// ==UserScript==
// @name         三国杀打小抄
// @namespace    https://greasyfork.org/scripts/448004
// @version      2.9.44
// @author       小麦 孤独尊
// @description  打小抄支持网页版和微端，微端文件请加群 830137048
// @icon         https://i0.hdslb.com/bfs/new_dyn/17ec41a0ca79633b77399065ab80da3f2138912.png
// @downloadURL  https://goka.top:8080/daxiaochao.user.js
// @updateURL    https://goka.top:8080/daxiaochao.user.js
// @match        *://game.4399iw2.com/yxsgs/*
// @match        *://my.4399.com/yxsgs/*
// @match        *://*.sanguosha.com/*
// @match        *://web.kuaiwan.com/kwsgsn/*
// @match        *://wan.baidu.com/microend?gameId=19793595/*
// @match        *://www.7k7k.com/special/sgs/?*
// @grant        none
// @run-at       document-start
// ==/UserScript==

(function () {
  'use strict';

  var Vt=Object.freeze,Jt=Object.defineProperty;var jn=(t,e,n)=>e in t?Jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ye=(t,e,n)=>(jn(t,typeof e!="symbol"?e+"":e,n),n);var Zt=(t,e)=>Vt(Jt(t,"raw",{value:Vt(e||t.slice())}));function Pe(t,e=null,n=!0){let i;return !i&&typeof localStorage<"u"&&(i=localStorage.getItem(t)),i?JSON.parse(i):e}async function $e(t,e,n=!0){typeof localStorage<"u"&&localStorage.setItem(t,JSON.stringify(e));}async function Nt(t,e=!0){typeof localStorage<"u"&&localStorage.removeItem(t);}function Wt(t,e=0){let n="";const i="  ".repeat(e);if(Array.isArray(t))t.every(a=>typeof a!="object"||!a)?n+=`${i}${t.join("	")}
`:(n+=`${i}<ol>
`,t.forEach(a=>{n+=`${i}  <li>
`,n+=Wt(a,e+2),n+=`${i}  </li>
`;}),n+=`${i}</ol>
`);else if(typeof t=="object"&&t!==null)if(Object.values(t).every(a=>typeof a!="object"||!a))n+=`${i}${Object.entries(t).map(([a,r])=>`<strong>${a}:</strong> ${r}`).join(", ")}
`;else {n+=`${i}<ul>
`;for(const a in t)n+=`${i}  <li>
`,n+=`${i}    <strong>${a}:</strong>
`,n+=Wt(t[a],e+2),n+=`${i}  </li>
`;n+=`${i}</ul>
`;}else n+=`${i}  ${t}
`;return n}async function Un(t,e=""){const n=document.createElement("a");n.download=e,n.href=t,n.click(),n.remove();}const Ct=[];let ft=!1,St=null;function Ke(t,e="acTooltip",n=1e4,i="",s=null,a=!1){a?Fn(t,e,n,i):(Ct.push({text:t,id:e,duration:n,className:i,clickCallback:s}),ft||Et());}function Fn(t,e,n,i){let s=document.getElementById(e);s||(s=document.createElement("div"),s.id=e,s.className="ac-tooltip "+i,document.body.appendChild(s)),s.innerHTML=t,s.className="ac-tooltip "+i,s.addEventListener("click",()=>{xt(uniqueId);}),setTimeout(()=>{s.classList.remove("hide"),s.classList.add("show"),s.style.top="20px";},50),St&&clearTimeout(St),St=setTimeout(()=>xt(e),n);}function ce(t){if(ChannelUtils!=null&&ChannelUtils.openQQBuy){ChannelUtils.openQQBuy({ret:!0,msg:t});return}}function Et(t){if(Ct.length===0){ft=!1;return}ft=!0;const{text:e,id:n,duration:i,className:s,clickCallback:a}=Ct.shift();let r=document.getElementById(n);r&&r.remove();let o=n+"-"+new Date().getTime(),c=document.createElement("div");c.id=o,c.className="ac-tooltip "+s,c.innerHTML=e,document.body.appendChild(c),a&&typeof a=="function"&&c.addEventListener("click",a),c.addEventListener("click",()=>{xt(o),Et();}),setTimeout(()=>{c.classList.remove("hide"),c.classList.add("show"),c.style.top="20px";},50),i?setTimeout(()=>{xt(o),Et();},i):ft=!1;}function xt(t){let e=document.getElementById(t);e&&(e.classList.remove("show"),e.classList.add("hide"),setTimeout(()=>{e&&e.remove();},300));}var xn,zn=function(t){return String.raw(xn||(xn=Zt([`
<html><head><meta charset="utf-8" /><title>战绩胜率统计</title><style>
table { margin-right: 8px; border-collapse: collapse; }
th, td { text-align: center; border: 1px solid black; font-size: 24px; box-sizing: border-box; }
td { padding: 2px 5px; }
.nav, thead { background: white; position: sticky;; }
.rate { margin: 5px; font-size: 28px;}
.button {  display: none; } 
.button[name=mode] ~ .label { display: inline-block; font-size: 30px; user-select: none; border: solid 1px black; border-radius: 5px; padding: 5px; margin: 5px; }
th .button ~ .label { display: inline-block; width: 100%; height: 100%;}
th .button:checked ~ .label::after { content: "↓"; }
th.reverse .button:checked ~ .label::after { content: "↑"; }
.button:checked ~ .label { background: rgb(64,160,255); } 
.s0 { background: white; }
.s1 { background: rgb(221,0,0); }
.s2 { background: rgb(255, 200, 0); }
.s3 { background: rgb(0, 136, 68); }
.s4 { background: rgb(0, 94, 183); }
.s5 { background: rgb(255, 0, 255); }
</style></head><body style="margin: 0 8px;">
<div class="nav" style="top: 0; height: 136px; z-index: 3"><div id="modeTab"></div><div id="summary"></div></div>
<div style="display: flex; align-items: flex-start; flex-wrap: wrap;"><table id="detail"><thead style="top: 135px; z-index: 1"></thead><tbody></tbody></table>
<table id="record"><thead style="top: 135px; z-index: 2"></thead><tbody></tbody></table></div>

<script>
const data = Object.entries(`,`).reduce((acc,[mode, records]) => {
acc[mode] = Object.entries(records).reverse().map(([time, record]) => ({timestamp:parseInt(time), time: new Date(time*1000).toISOString().slice(0,16).replace('T',' '), ...record, durationstr: formatSeconds(record.duration)}));
return acc;
},{});
const modeName = {1: '八人标准', 2: '六人身份', 3: '八人军争', 4: '应变身份', 5: '八人至尊', 6: '身份老友房', 7: '国战', 8: '应变国战', 9: '国战老友房', 10: '新1V1', 11: '欢乐', 12: '应变欢乐', 13: '欢乐老友房', 14: '统率', 15: '4V4演武', 16: '应变演武', 17: '欢乐演武', 18: '国战演武', 19: '统率排位', 20: '欢乐排位', 21: '智斗三国', 22: '欢乐新手', 23: '欢乐新手', 24: '六人新手', 25: '六人新手', 26: '排位赛', 27: '主公杀', 28: '1v1面杀练习场', 29: '五人匹配', 30: '排位赛', 31: '欢乐33', 32: '33老友房', 33: '武将试炼', 34: '武将试炼', 35: '斗地主', 36: '线上赛事', 37: '山河图', 38: '王战练习', 39: 'SCL练习', 40: '斗地主练习', 42: '八人匹配', 43: '个人挑战1V1', 44: '单骑无双'};
const sfName = {5:{0: '综合', 1: '主公', 2: '忠臣', 3: '反贼', 4: '内奸'},7:{0: '综合', 1: '魏国', 2: '蜀国', 3: '吴国', 4: '群雄', 5:'晋国'},26:{0:'综合',2:'先手',3:'后手'},35:{0:'综合',1:'地主',3:'农民'},44:{0:'综合',1:'先手',4:'后手'}};
colors=['white','rgb(221,0,0)','rgb(255, 200, 0)','rgb(0, 136, 68)','rgb(0, 94, 183)','rgb(255, 0, 255)','black'];
const modeTab = document.getElementById('modeTab');
[26,35,44,5,7].forEach(mode => {
if(mode in data) modeTab.innerHTML += '<label><input type="radio" class="button" name="mode" value="'+mode+'" onclick="reSet()"><span class="label">'+modeName[mode]+'</span></label>';
}); modeTab.innerHTML += ' （更多功能敬请期待…）';
document.querySelector('#record thead').innerHTML = '<tr onclick="recordSort(event)">'+['时间','武将','身份','胜负','时长'].map((name,i)=>'<th'+(i?'':' class="reverse"')+'><label><input type="radio" class="button" name="record" onchange="recordSort(event)" '+(i?'':'checked')+'><span class="label">'+name+'</span></label></th>').join('')+'</tr>';
function reSet() {
var i, tabcontent, tablinks;
window.mode = document.querySelector('#modeTab input[name="mode"]:checked')?.value
window.guozhanQ = modeName[mode].includes('国战');
window.records = data[mode].filter(record => record.shenfen).sort();
let summary = Array.from({length:10},(_,i)=>[0,0,0,i]);
let detail = records.reduce((acc, record) => {
    summary[0][record.result] += 1;
    summary[0][2] += record.duration;
    summary[record.shenfen][record.result] += 1;
    record.general.forEach((g,n)=>{
        if(!acc[g]) acc[g] = Array.from({length:10},(_,i)=>[0,0,0,i]);
        acc[g][0][record.result] += 1;
        acc[g][0][2] += record.duration;
        acc[g][guozhanQ?(n+1):record.shenfen][record.result] += 1;
    });
    return acc;
},{});
summary = summary.filter(s=>s[0]+s[1]>0);
let sf = guozhanQ?[0,1,2]:summary.map(s=>s[3]);
document.querySelector('#detail thead').innerHTML = '<tr><th rowspan=2>武将</th>'+sf.map(sf=>'<th colspan=4 style="background:'+colors[sf]+';">'+(guozhanQ?{0:'综合',1:'主将',2:'副将'}[sf]:sfName[window.mode][sf])+'</th>').join('')+'<th rowspan=2 onclick="detailSort(event)"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)"><span class="label">平均时长</span></label></th></tr><tr onclick="detailSort(event)">'+sf.flatMap((sf,i)=>['胜率','出场','胜场','败场'].map((name,j)=>'<th class="reverse"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)" '+(i==0&&j==1?'checked':'')+'><span class="label">'+name+'</span></label></th>')).join('')+'</tr>';
window.detail = Object.keys(detail).map(general=>{
    let rate = detail[general].filter(s=>sf.includes(s[3]));
    rate.forEach(s=>{ s[4] = s[0]+s[1]; s[5] = 100*s[0]/s[4]; s[2] = s[2]/s[4]; });
    return ({general, rate});
});
let summaryDiv = document.getElementById('summary');
summaryDiv.innerHTML = '';
summary.forEach(([win,lose,time,sf])=>{ summaryDiv.innerHTML += '<span class="rate" style="color:'+colors[guozhanQ?[6,4,1,3,2,5][sf]:sf||6]+';">'+sfName[window.mode][sf]+'胜率'+((100*win/(win+lose)).toFixed(2)+'%').replace(/(.0)?0%/,'%')+'('+win+'胜:'+lose+'负)</span>'; });
detailSort();
recordSort();
}

function detailSort(event,sf=0,key=4,reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'detail'){
        if(element.rowSpan>1) {sf = 0; key = 2; }
        else {
            sf = Math.floor(element.cellIndex/4);
            key = [5,4,0,1][element.cellIndex%4];
        }
        reverse = element.classList.toggle('reverse');
    }
}
window.detail = window.detail?.sort((a,b)=>{ a=a.rate[sf][key];b=b.rate[sf][key]; return isNaN(a)&&isNaN(b)?0:isNaN(a)?-1:isNaN(b)?1:a-b; });
if(reverse) window.detail = window.detail?.reverse();
document.querySelector('#detail tbody').innerHTML = window.detail?.map(({general, rate})=>'<tr><td>'+general+'</td>'+rate.map(s=>'<td>'+(s[4]?(s[5].toFixed(2)+'%').replace(/(.0)?0%/,'%'):'')+'</td><td>'+s[4]+'</td><td>'+s[0]+'</td><td>'+s[1]+'</td>').join('')+'<td>'+formatSeconds(rate[0][2])+'</td></tr>')?.join('');
}

function recordSort(event,key='timestamp', reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'record'){
        key = ['timestamp','general','shenfen','result','duration'][element.cellIndex]??key;
        reverse = element.classList.toggle('reverse');
    }
}
if(key!=='general') window.records = window.records?.sort((a,b)=>a[key]-b[key]);
else window.records = window.records?.sort((a,b)=>a[key][0].localeCompare(b[key][0]));
if(reverse) window.records = window.records?.reverse();
document.querySelector('#record tbody').innerHTML = window.records?.map(record => '<tr><td>'+record.time+'</td><td>'+record.general.join(' ')+'</td><td>'+sfName[window.mode][record.shenfen]+'</td><td>'+(record.result?'失败':'胜利')+'</td><td>'+record.durationstr+'</td></tr>')?.join('');
}

function formatSeconds(seconds) {
const hrs = Math.floor(seconds / 3600).toString().padStart(2, '0');
const mins = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
const secs = Math.floor((seconds % 60)).toString().padStart(2, '0');
return (seconds>=3600?(hrs+':'):'')+mins+':'+secs;
}

document.querySelector('#modeTab input[name="mode"]').click();
<\/script></body></html>`])),t)},qn="jsjiami.com.v7";(function(t,e,n,i,s,a,r){return t=t>>1,a="hs",r="hs",function(o,c,u,f,l){const d=Be;f="tfi",a=f+a,l="up",r+=l,a=u(a),r=u(r),u=0;const p=o();for(;[]&&--i+c;)try{f=-parseInt(d(409,"a(H["))/1+-parseInt(d(403,"qeH8"))/2+parseInt(d(426,"0zA0"))/3*(-parseInt(d(198,"dm0N"))/4)+-parseInt(d(348,"KDdW"))/5+parseInt(d(215,"f&xv"))/6+parseInt(d(493,"IAlp"))/7+parseInt(d(309,"f]5*"))/8*(parseInt(d(182,"CrM1"))/9);}catch{f=u;}finally{if(l=p[a](),t<=i)u?s?f=l:s=l:u=l;else if(u==s.replace(/[eTVJgrSEXQOudGnlCPMth=]/g,"")){if(f===c){p["un"+a](l);break}p[r](l);}}}(n,e,function(o,c,u,f,l,d,p){return c="split",o=arguments[0],o=o[c](""),u="reverse",o=o[u]("v"),f="join",o[f]("")})})(392,505473,ot,198);function ot(){const t=function(){return [qn,"ETOjesGjQitgamCiXlV.dcQProrem.nvgSh7gJMu==","A1pcMSkDWPq","WQjyWQWCla","WQJdV8kKW7/cUW","mqTbWO7cOGTU","W4HvAxW","pKhcMadcMq","WQZdUHWqoHVcSftcKCoEWQpcJa","EhxcHvDLotae","zSogy8o8uhWSst7cNSkrihNdPcm","WP0Fn8o6CW","W7FcOeXfyeRcLvRcQmoF","WRfuW7Lidq","FCoEjL5A","WR3dQ0NcUmkdWRebj0y","WRuoW6VcUCos","WOmIWRdcJd8","mM/dOWav","W54smCoF5zg15yY15yAl5Q6g5lYX6AUe","W7RcI2jYqa","WQGZcbZdGG","55Ie6ikt44oT5A6N6zMt5O+J5PYU5B+/5zgy","k8oFgmoGf8oQWPxdUq","W6r/qSkTW4pcPCotFuWHiX5X","zSo8yJlcHW","ygCIbSkfdSoYoCol","htRcHvmbWQHq","oKldQGSQW6/cRq","6ywm6Asx5O6h5P6l5Bs+5ywL6zEE","WPPYWPTLmvVdLmko","W6pdUrtcOCoaWOvGfJGComoPmGWBwmoV","WQldImkgW7lcVSkbtG","g8o/W5pcU20","m8oNj8oqmW","W4HVW6PliG","g8kcW6NdJWrjDG","WPvKWPewoG","WRPCW79oiG","psZcU1KQ","wvBcKCkiWOm","W4jrDetcMeldOW","FfRcN8kFWOG","W7ueWQpdTSo/","WPHSW5vVlG","ebqCWQec","W5vvW79RhG","FCkxW4hdQCkO","EuRcH8krWRpcJGRcL8kXzSoabG","smoPzrlcLW","WOdcQ8oGWPeq","WRK9W4dcJ8oQ","E1FcLSkDWPRcHbO","W40eWRZdTCox","yCkIWQJcUSkoWOJcNmojWPy","W7SbwCk7xW","hv7dHKRdPq","fCoOW5SQtW","qSkIW7pdSWbjxG4Vtmog","WPZcOCorFmkwcHtcS0BcPmo8FKxcU1RdIG","gW0JWQix","Eh3cGLD0mce","ACk5WRlcSa","W7NcU1XitKBcJwdcVmoDWPxcVYS","W6dcSb/dR8ojW4fGa2izrCo3BG","WPe8W4lcIxq","htRcHvmbWQ91WPis","cCo2W5qRwSo0W416","5PY86iEa5yEJ5l2Y5y2e5P6c","WQqBeHVdQSo/W6rG","A0/cN8kxWOu","kWVcRuSF","W6pdPCkBW6TdW5i0ptxcUSo2rq","lta3WRy7","umoal3L0","WQ5lWQ1dha","WQddQNtcQCkdWPa7dq","WOTmWP1Saa","s8k1W5uSt8k3W5LRcadcGsW","AGJcS08ms3tcSCodWRRcLWi","WPJdGZyNuhFdTW","WOGHW7tcUu/cOh/cPa","pmoylSo3dSoMWP8","WRa7WQtcGIy2Fq","EuRcH8krWRpcJGRcL8kJE8oHft4","FSkxWO7dHZBdPv0EdmoXdXK","6yAd6AET5O6f5P+I5y2e5l+t6AQY","W51UW7r5h8kasZ3cR8k2","EmoBieFcOmojsmoYfW","WPeTpSooWOW","WRhcTCoAWRKyWO48fW","w8opaMT/","WRuPW6RcRCoh","rCkKWQ3cLmkR","WPlcUSoiFmkOgb/cHehcPSob","ofFdTdjAhNm","5ysP5l6G6yAm6Awb5O275P+T5y6D5P66","WPadW4/cP38","hwtdTcyhWPBcIvxdIW","AMePamkCi8oc","ur9DqSkZ","of/dUWCdW6xcVry9hq","B2tdUdSWW7NcHa","pK/dUY0TW6/cPcC6gCkdjrxcHG","iCoFWRlcPGa","6BMW55Qk5BoR5y2h5B6N5zcIW6hcL8oyWO8","swVcPvn2","6z+g6kAH5ywY5lYR5y2E5P2pWQnTE8oh5OIX55E35Bcz5OIg5yEp5lId"].concat(function(){return ["WOaMfColBmoOW59GW4FcTx55WQ4","WQ9oCfqPd8olqKu","oLhdTrzzex7cMa","WOSMWRdcRXK","kMddRcCr","i8oIW6HdFmk6aq","rmoNW4BdL8kE","jmoVW6fbBG","WRTsWOv8gG","WR54WQubkuZdULC/","kKRdRXzxkxlcKCox","k8ogW53cMMJcSa","WOvhvhuO","WOu6W5VcLwe","j3O4aSkdm8ov","FG1bWOdcLbfPzIJdNgtcJfG5WRy","aSodW67cP3u","C8kUW4ddRmk1WRjd","oLNdSHzigg8","jmopWQRcQdVcUmoSW6hdNhaPWRlcTq","owutk8oTcZZdR8oSWRZcJ8otW4Lk","FbbqWOZcVrT5","W7VcPK1ez0ZcNq","WOGBdCoQWPC","W585y8kE","WQGKjI3dIq","pSofp8o7j8oSWO/dJCkSz8khW4JdQG","WOe9WRhcRX8","WQZcKmoKz8kN","e8oBW6jVDq","W4ztrNlcHq","xSk4W6FdSba","WQhdLmkCW7/cUmkKB8oF","zJjTxmkt","AhW4dmk1kCosj8oWzSoWW73dQG","E8o9rZxcSCk8WOZdImoqW6msWQiIdW","B8o9rYdcR8k2WPhdImomW6mP","55wz55s15Bgv5OMk5ysd5lIT","bsekWPOd","W71LD2xcNq","WOWvnmkZfmk1AW","lCoiW6vADG","gNpcIHZcSGRdHmoYn3hcKeDiW4e","WPtdHtaSwNZdTmov","o8ovj8o1ha","gwldTW9+","WRGfW5BcMCo+","a3FdK27dTa","D8o/W6VdLmk+xMFdHmoz","WR0Re8oZ","6yAS6AAD5O+Q5PY+5y686zMN5Pwh5l656AId","WP/dGIaLwx7dTSou","fhJcKdZcRcFdVCoAfq","W7XxzeFcOW","CrDc","p03dSHH5eM/cR8oxWR/cQZS","nSoEjCoXf8olWQ/dK8ku","FHXrWQRcObTZwWRdK37cLLqJWRyY","WQqLnSoWWPJdVmkkCwa5eHLoWPzMWPDlW4C","W6JcKmknW7hcRSoLECopzH7dPvG","WRixab7dSCoaW7vLnSkV","W6hdPmkqW6blW5rVgGtcRSoyFYa","WO3cTCoxDSkZhZ/cJeVcVmokz1G","W7TNW7ZcMwdcNGeDW6hdNulcLCkRWR53","h1/dQHjS","ztvVtCksEs1EW4ee","EKqhfmkU","pfikmCof","WP/dJJ8LqG","DCkUW53dR8ktWPrZWRrKl8oiAXK","c8k2fwP0WQW1cGVdJfnA","cHJcVfau","WOy6W6pcVMZcOwZcKGv1W5ioFq","fx/dVIicWRBcJ10","WRC2WQ3cGdq","5yA95l2X6yEv6AwE5O6P5P665yY75P6x","W5uPWPddN8oLySkPWQBdNCoyxvPZ","W4qOrSkZDG","e3/dSY8rWPdcVhxdOG","WR02WRBcSYi8Da","WQqBeGRdQCoNW6jSaCkTW43cICkL","5P+55zk05y2g5l6l6AU25lUI5AwWtWhcICkH","WOGgi8oUWQW","Ae0+emkc","W648qSkIAW","kL7dRHO1W5xcVsS5ca","uubTW7XhWRtcKmoUWRPzDSkL","Bh3cKMvZncCu","W4fDC3hcK0pdO8oM","WQDvAL4zkmoRxh7cKfpdMh4","of/dUWCwW7/cGYS1a8kMdYVcIZuAW74","WRhcN8onF8k2","ACk5WRlcSmk+WQ/cVmoqWRpdKq","WO99W5jBiq","AhW4dmk8j8oij8oVESoxW6NdQXNcGSoZ","W6eRWQ3dUCon","re3cGunR","WOPWW5H5pq","WP9UWPXRg0ldKmkeW6GEW5hcVa","WPmGW57cGMhcNwZcSXTYW4e","55wH5Bod5OIA5y2Z5lYk55ss","W74lWQFdPCo9","WQioW7pcImozW69oW7O/W48j","W7uvlGrJC8kNEwBcIg3dQKm","WQqAWQJcLtq","dMVdUgZdOW","5ywR5l6P5yYs5P6B6iEMod5xyq","W50YWORdLCovrCkjWRJdPG"].concat(function(){return ["WPBdQtS+wG","j8oLW6jeza","WQ3dQ8kyW5ZcLq","WO13W4X/ot7dPG","DCkUW53dRW","BfpcH8kiWRy","jSkNWPNdVmoLWOC0WPSI","W7ZcP1TgBKxcNfC","WOPTW4PvgJldUSoHnCkgWQWsxLhcNW","FG1bWOdcLbfPFcpdJLJcKG","WRiMWRxcJG88BsK0W4RcKSoQW4e","W6SnFf4VASoSE2JcJvldIa","zIvRw8ksEtXtW5ytrHiC","BSoWW6hdOSk4D0hdVq","aNCUlCoK","jMdMNiyq5Pso5yMNzv3dGu7PMAlMLOVLHkpOTlRNLBK","W4PAy3JcKehdOCoN","DCoCpupcSmoTECoB","W4jZzwlcKW","g0msjCoy","kCoPW47cRge","55Qf6ig344gs5A+C6zIn5OYq5P6P5B6W5zgY","WQviE1iWiSo7","W7FcGmkyWP5pW5nRuq","khpdRGKb","W5n1W6r0mCkmuWFcU8k0suFcLa","zSoqvbGG","vSoStZGWW5yOib0","WPevn8kXcCk1DSocedZdVa","mG1AW7lcSCkkW6K","WQ1vA2KS","55Uh5lQo6ygr5yIv5BsG5yEY6zEX","WRRcHCo7WRKS","r8oPW53dICkf","kv3dNWeU","k8otdSoCdG","bmonW5VcSgq","zSogy8o8xumpuJBcHmktpa","E8oSn0n6nWtdGYq4qhrO","WRZdRCkxW5RcVG","W6C6ECkRyG","kv3cKb/cHG","WPCOcmokCCodW7nO","ySobn07cTW","WOj2W5bFkHxdMSoLfW","DSkpW67dSKhdO8kGW4tdHgGxWOdcIa","6ysO6AAx5O6F5P2W5y6m55EW","BuGVl8kA","jSogW7BcG0y","WQehfrxdISo8W7vxm8kYW5ZcHmk5","WPqGW5/cICoo","l07dJvtdHq","WQ5oFxGT","WOWKjWddIG","W757W7VcL0dcNraW","Be3cMSkFWP3cTrFcQCkX","c2tdUdGAWOVcJvtdI3G+W4rOs8ozkW","DLFcUCkjWRG","EX1zWO7cRW","W4PkW4fEgG","WOmfn8kooCk1CSo0fINdSvJcNW","WQy5l8ohWQe","BmkIW4NdHtK","fmoKjCoSdq","WOeYaSoCE8opW79GW4FcU294WQG","W50KCSksr0BdSq","WQ5zWOfraW","udVcNdBcQKldMSoJohhcP00","W4jrDfxcNuRdQ8oNkhCsE8o4la","WPmTmmoBWOG","FWLAW7FcRSopW6tcNmk+kCkoW5yIaKZdIqlcISkRzSkgWPldRSoHW6K8wSoY","e2xdTXKZ","WPH9W4PQkJldVSonkCkuWRW","W5SYWOddKSolBSkXWPZdICoA","zfeCn8kg","E8o9j2Lopr7dPb84r2nLW7VcRCob","D8kZW4ZdO8k6WP5J","WRiMWRxcJG88Bs4QW5m","BCoTvGlcPmkkWOtdGCoBW7qKWRqz","l8oKW65iDSkXaSky","6z2M6ksz5yEB5l2z5yY+5P6sWPz9g0RMI6lNLjpLS4NMIQFLH6ZKUlO","fuxdIg3dSgO","FCk1W4FdPCkJWRntWQPF","metdOq0ZW4lcNq8y","bmoDWPRcLG4","6yAu6AAM5OYC5PYl5y6055wV","gsFcIvWoWOrW","ECoKW6ZdNCkOx3C","WOHWW5TzmZJdQG","BCkeC8odmSoWWONdTCkS","WRzJWR8lgwVdMLmDu8kdlvZcLLW","dSoGW4HuFG","WQiWkCo2WOS","WQaNWRJcJsG","aJVcTNOi","WPRcOComF8k5ptpcSa","z8kTW5RdRdK","y8owE8oYBa","mu7dGZSQ","WRlcUCoDWP0wWOC0fG3cJ8oDuqeD","D8ogzmo7","nSoOW6iqFa","5P2k5zoW5Bwf5lYq6AQ3WQBdIg1x5lQ+5Psr5y6W5l6555sl","WQyoW7RcTKW","WPJdIfpcT8kq","W5W5w8k1yW"]}())}())}();return ot=function(){return t},ot()}function Be(t,e){const n=ot();return Be=function(i,s){i=i-179;let a=n[i];if(Be.hYtIDO===void 0){var r=function(l){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",g="";for(let W=0,y,x,A=0;x=l.charAt(A++);~x&&(y=W%4?y*64+x:x,W++%4)?p+=String.fromCharCode(255&y>>(-2*W&6)):0)x=d.indexOf(x);for(let W=0,y=p.length;W<y;W++)g+="%"+("00"+p.charCodeAt(W).toString(16)).slice(-2);return decodeURIComponent(g)};const f=function(l,d){let p=[],g=0,W,y="";l=r(l);let x;for(x=0;x<256;x++)p[x]=x;for(x=0;x<256;x++)g=(g+p[x]+d.charCodeAt(x%d.length))%256,W=p[x],p[x]=p[g],p[g]=W;x=0,g=0;for(let A=0;A<l.length;A++)x=(x+1)%256,g=(g+p[x])%256,W=p[x],p[x]=p[g],p[g]=W,y+=String.fromCharCode(l.charCodeAt(A)^p[(p[x]+p[g])%256]);return y};Be.viTgLd=f,t=arguments,Be.hYtIDO=!![];}const o=n[0],c=i+o,u=t[c];return u?a=u:(Be.pYcDIc===void 0&&(Be.pYcDIc=!![]),a=Be.viTgLd(a,s),t[c]=a),a},Be(t,e)}async function Kn(t=S.v){const e=Be,n={MrSTd:function(s,a){return s(a)},LKhlk:"酒馆挂机今日可用",NjEti:function(s,a){return s(a)},lWlDV:e(187,"&W]U"),dBmul:function(s,a){return s===a},zQFBl:"fGrXL",dAcLm:"JYgRY",ksoIr:e(301,"^)XC"),dHzlq:"界小抄会员<br>无限制使用",lWTcl:e(305,"f&xv"),RWgDZ:function(s,a,r,o){return s(a,r,o)},CSuaq:"autoHuangGai",mBKaa:function(s,a){return s*a},awOKF:function(s,a){return s===a},Pqqmr:"task",pDqgI:e(225,"9hbO"),ZcMSy:function(s,a){return s!==a},wIity:"WzLeS",NaDsk:"HiFJy",QBelZ:e(481,"KDdW"),Rbims:e(202,"0zA0"),TGMKl:function(s,a){return s!==a},pWPoq:e(438,"A*Z3"),oYRaV:e(206,"0gC)"),xJQEi:"autoYueKaSwitch",aGrXn:function(s){return s()},gUopm:function(s,a){return s!==a},hAifJ:e(222,"x*gV"),BrZra:e(477,"qeH8")},i=[{id:e(452,"%6Ur"),action:mi},{id:n.QBelZ,action:Mt},{id:n.Rbims,action:En}];if(t)if(n.TGMKl(e(253,"A*Z3"),n[e(183,"Hx[!")]))i[e(320,"FX#@")]({id:n[e(341,"ru3f")],action:en},{id:n[e(252,"IAlp")],action:$t},{id:n.xJQEi,action:Yt}),n[e(240,"a(H[")](Qn);else {let s="本周已体验<br>今日可使用";_0x523735[e(339,"PmNT")]!==s&&(n.MrSTd(_0x2225f3,n[e(203,"tH!y")]),_0x90798d[e(302,"[NFk")]=s);}else if(n[e(370,"db]N")](n[e(345,"^vTn")],n[e(361,"uNpj")]))[{id:n.Pqqmr,action:en},{id:e(383,"tH!y"),action:$t},{id:n[e(279,"db]N")],action:Yt}][e(419,"qeH8")](({id:a})=>{const r=e;if(n[r(179,"%6Ur")](n.zQFBl,n[r(267,"0gC)")])){let o=r(218,"FX#@")+new _0x332899(_0xd5878f.guildVIP[_0x3b52ac[r(356,"x*gV")]])[r(490,"KDdW")]();_0x17c801[r(433,"f&xv")]!==o&&(n.NjEti(_0x2906cc,_0x116126[r(422,"%lus")]+n[r(358,"f]5*")]),_0x45cbed[r(303,"0zA0")]=o);}else {const o=document[r(467,"uyXJ")](a);o&&(r(259,"x*gV")!=="bICdq"?(o[r(249,"$!BY")]=![],o.disabled=!![],o[r(192,"^vTn")](new Event(n[r(380,"^)XC")]))):_0x39bb38[r(352,"0zA0")]&&_0xb124b2());}});else {_0xb7b0df[e(464,"x*gV")]=![],_0x261790[e(274,"inN5")]=![];let s=n.dHzlq;_0x363c80.innerHTML!==s&&(n[e(311,"$kAl")](_0x1ebe73,n.lWTcl),_0x56bc26="v",n.RWgDZ(_0x1bbdb8,n[e(239,"%6Ur")],_0x149471+n.mBKaa(n[e(328,"x*gV")](n.mBKaa(7,24),3600),1e3),![]),_0x1320be[e(219,"UQ(1")]=s);}i[e(223,"6IDZ")](({id:s,action:a})=>{const r=e,o=document[r(319,"IAlp")](s);o&&(o[r(434,"qeH8")]=![],n.awOKF(s,n[r(436,"%lus")])||n[r(416,"&W]U")](s,r(330,"OC3a"))?n.pDqgI===r(421,")h@*")?(_0x5d2429.onchange="",_0xfbfec6[r(333,"#O3T")]=!![],_0x48ff1d[r(249,"$!BY")]=![],_0x43cc22[r(480,"A*Z3")]=r(300,"P3(h")):o[r(418,"tH!y")]=()=>a():n.ZcMSy(n[r(216,"ru3f")],n.NaDsk)?o[r(437,"$kAl")]&&a():_0x202a84[r(404,"qJ!L")]=![]);});}function Qn(){const t=Be,e={JWCUZ:function(i,s,a,r){return i(s,a,r)},EKXQe:function(i,s){return i(s)},LFkcz:t(229,"Nryz"),xVcCh:function(i,s){return i(s)},RbsCb:"黄盖主公小号刷百胜功能可用！",ahfCe:t(226,"[NFk"),nhJwI:function(i,s){return i!==s},ihRoO:t(364,"9hbO"),JaDpL:t(373,"uyXJ"),tllTh:t(290,"$!BY")},n=document[t(276,"%lus")](e.tllTh);n.forEach(i=>{const s=t,a={YJmAi:e.LFkcz,aDrsu:function(r,o){return e.xVcCh(r,o)},tcEHk:e[s(244,"%lus")],JmRSz:e[s(209,"6IDZ")],AVAGG:s(204,"UAx9"),stkUv:function(r,o){return e[s(277,"9hbO")](r,o)},LMtja:e.ihRoO,LVFzB:s(459,"ru3f"),SUwVH:function(r,o){return e[s(268,"a(H[")](r,o)},EImxI:e[s(316,"kn^Z")]};i.disabled=![],i[s(475,"qJ!L")]=function(){const r=s;this[r(242,"f&xv")]?(n.forEach(o=>{const c=r,u={SQoOb:a.YJmAi,bEJUL:function(f,l){return a[Be(195,"0gC)")](f,l)},kuuXw:a[c(255,"f]5*")],JOxqr:a[c(448,"a(H[")],HWUIR:a[c(415,"jBhF")],XuqNT:c(402,"P3(h")};if(a[c(368,"6IDZ")](a[c(324,"PmNT")],a[c(273,"^vTn")])){if(o!==this)if(a.SUwVH(a[c(397,"dm0N")],a[c(440,"g(ge")])){const f={LcgDk:function(l,d){return l(d)},dXEbF:u[c(357,"a(H[")]};u[c(344,"9*Qn")](_0x4afb06,u[c(250,"f&xv")]),_0x178c16.innerHTML=_0x2cc5d1,_0x57bd6b[c(237,"sUxE")]=![],_0x3070c7[c(185,"%lus")]=function(){const l=c;this.checked?(_0x1f8e08[l(406,"f]5*")]=![],_0x45d408.autoBotSwitch=9,_0x190bc0.readyStart(0)):(_0x4415e5[l(188,"UQ(1")]=![],f[l(256,"a(H[")](_0x179d0b,"盖主速刷已关闭")),_0x177ef7[l(456,"vxed")](_0x401b3e[l(408,"9hbO")]),_0x5e5e60[l(366,"9hbO")](f.dXEbF,()=>_0x324d92(),500);};}else o.checked=![];}else {const f=u[c(291,"0zA0")].split("|");let l=0;for(;[];){switch(f[l++]){case"0":_0x60ed3b[c(495,"inN5")]=![];continue;case"1":_0x2530bf.delay(u[c(461,"$kAl")],()=>_0xa10af9(),500);continue;case"2":this[c(308,"6IDZ")]?(_0x30ef45.checked=![],_0x27585c[c(387,"9*Qn")]=!![],_0x4a70ca[c(205,"6IDZ")](u.HWUIR,()=>_0x520b18[c(472,"%tGd")](),500)):(_0x2fa382[c(258,"jBhF")]=![],_0x573eeb[c(476,"f]5*")](c(297,"ru3f"),()=>_0x370218(c(353,"A*Z3")),500));continue;case"3":_0x24bd64.auto(_0x1eb1f3[c(201,"f&xv")]);continue;case"4":_0xde73f0[c(298,"uyXJ")](c(329,"Nryz"))[c(263,"sUxE")][c(468,"uyXJ")](u[c(435,"ru3f")],'"'+_0x4903f8[c(280,"%tGd")][c(400,"PmNT")]()[c(199,"#O3T")](2,"0")+'"');continue}break}}}),e[r(213,"UQ(1")](nn,parseInt(this[r(385,"#O3T")][r(262,"Xn!H")]),parseInt(this.dataset[r(197,"0zA0")]),this[r(450,"qeH8")][r(221,"$kAl")])):e[r(270,"&W]U")](nn,![]);};});}async function rt(t=![]){const e=Be,n={TKnFX:e(355,"PmNT"),FOSkX:function(l,d){return l(d)},XQwul:e(425,"0zA0"),PpUSG:".status",YvnZN:e(231,"f&xv"),AXGFX:e(243,"IAlp"),gGerb:function(l,d){return l(d)},GcWfO:"酒馆挂机今日可用",mXPTq:function(l){return l()},XLYqW:e(251,"sUxE"),QDAtz:"autoBotSetUp",hVGWA:function(l,d){return l!==d},yXXEp:e(430,"#O3T"),AAmgb:"4|7|0|6|3|1|8|5|2",xMndl:e(346,"Hx[!"),uWuhS:function(l,d){return l===d},inQAU:function(l,d){return l===d},buLDO:"ufHov",KTnxh:function(l,d){return l(d)},vsUXZ:function(l,d){return l<=d},YcdWR:function(l,d,p,g){return l(d,p,g)},EMNJs:e(257,"FX#@"),LRYcA:"autoHGExplanation",YRuEb:function(l,d){return l-d},mBhza:function(l,d){return l*d},ZorFz:function(l,d){return l+d},QmVPv:function(l,d){return l*d},zdQBZ:function(l,d){return l*d},UwIIj:function(l,d){return l+d},nDPwO:function(l,d){return l*d},WIemB:function(l,d){return l===d},xmFop:"ZozWA",epSav:"界小抄会员<br>无限制使用",AgDQw:function(l,d){return l!==d},uZzmc:e(266,"%lus"),xtZEm:"autoHuangGai",ZLGrU:function(l,d){return l*d},GLkTP:function(l,d){return l*d},CgJDs:function(l,d){return l!==d},xFQot:e(420,"*Yk0"),HSqrp:e(482,"g(ge"),PBiUP:function(l,d){return l<=d},MhkKW:function(l,d){return l>=d},AgleW:"FZrVp",iLhiy:"fXKvE",ZgIiM:e(410,"&W]U"),cZYnw:"change",FvRhw:"1|0|4|3|2",zozPQ:function(l,d){return l<=d},hdLSk:function(l,d){return l+d},pwPio:function(l,d){return l==d},XBfYQ:e(212,"kn^Z"),CWfYG:e(469,"dm0N"),hncIv:e(392,"0zA0"),PPEGO:"黄盖主公小号刷百胜功能可用！"};let i=await ae[e(486,"Nryz")](),s=n[e(281,"KDdW")](i,n[e(271,"^)XC")](Pe,e(210,"g(ge"),0,![])),a=document[e(474,"7hXV")](e(188,"UQ(1")),r=document.getElementById(n[e(379,"vxed")]),o=document[e(427,"0zA0")](e(334,"FX#@")),c=document[e(288,"OC3a")](n.LRYcA),u=n[e(246,"CrM1")](S.trialTime,n[e(220,"qJ!L")](n[e(473,"$kAl")](6,24),3600)*1e3),f=new Date(n.ZorFz(S[e(442,"qeH8")],n.QmVPv(n[e(349,"uyXJ")](8,3600),1e3)))[e(211,")h@*")]()[e(326,"9hbO")](0,10);if(S.guildVIP[25242]=new Date(n[e(374,"IAlp")](i,n[e(189,"vxed")](n.nDPwO(n.nDPwO(6,24),3600),1e3)))[e(365,"OC3a")](),a[e(200,"OC3a")]=![],S.v)if(n.WIemB(e(312,"KDdW"),n[e(369,"dm0N")])){const l=n[e(261,"7hXV")][e(381,"P3(h")]("|");let d=0;for(;[];){switch(l[d++]){case"0":n[e(424,"k57k")](_0x36579a,e(241,"qJ!L"));continue;case"1":_0xac642c.autoBotSwitch=!![];continue;case"2":_0x4287e[e(447,"Nryz")]=!![];continue;case"3":_0x3b1c7d[e(306,"Hx[!")]=![];continue;case"4":_0x33a07c[e(278,"Nryz")](e(372,"9hbO"),()=>_0x3f481f(),500);continue;case"5":_0x2ea8be[e(439,"$kAl")](n[e(455,"KDdW")],()=>_0xc3a5fd.readyStart(0),500);continue;case"6":_0x3a7f5a.auto(_0x4f9fca[e(466,"0gC)")]);continue;case"7":_0x467a2c.checked=!![];continue;case"8":_0x48abd2[e(284,"Xn!H")](n[e(196,"vxed")])[e(384,"dm0N")][e(214,"&W]U")](n[e(260,"vxed")],n.AXGFX);continue}break}}else {a[e(354,"g(ge")]=![],r[e(414,"IAlp")]=![];let l=n.epSav;n[e(413,"KDdW")](o[e(412,"sUxE")],l)&&(n[e(457,"^vTn")](e(398,"jBhF"),e(282,"kn^Z"))?(n[e(338,"jBhF")](ce,n[e(479,"^)XC")]),s="v",n[e(485,"OC3a")]($e,n[e(314,"Hx[!")],n[e(207,"UQ(1")](i,n[e(337,"6IDZ")](n.GLkTP(7*24,3600),1e3)),![]),o[e(378,"UAx9")]=l):(n[e(238,"OC3a")](_0x2e1816,n.GcWfO),_0x4ae164.innerHTML=_0x408612));}else if(n.vsUXZ(i,S.guildVIP[S[e(351,"Hx[!")]])){let l="公会包月至<br>"+new Date(S[e(315,"tH!y")][S[e(307,"A*Z3")]]).toLocaleDateString();n[e(289,"KDdW")](o.innerHTML,l)&&(n.gGerb(ce,n.UwIIj(S[e(390,"Hx[!")],n[e(217,"^)XC")])),o[e(190,"%lus")]=l);}else if(n[e(389,")h@*")](i,17284896e5)){let l=e(235,"k57k");o[e(247,"CrM1")]!==l&&(n[e(304,"*Yk0")](e(342,"0zA0"),"WSnAQ")?(n.KTnxh(ce,n.HSqrp),a[e(295,"jBhF")](e(443,"a(H["),()=>{n[e(335,"Xn!H")](Dn);},{once:!![]}),o[e(484,"7hXV")]=l):(_0x2ea918.checked=![],_0x1a5f9c.autoBotSwitch=!![],_0x49a7f9[e(428,"*Yk0")]("autoBotTip",()=>_0x2240c0[e(191,"ru3f")](),500)));}else if(n[e(286,"g(ge")](i,u)){let l=e(322,"P3(h");n.CgJDs(o[e(264,"6IDZ")],l)&&(n.KTnxh(ce,n[e(363,"Hx[!")]),o[e(441,"uNpj")]=l);}else if(n[e(417,"UAx9")](i,S[e(275,"9hbO")]))if(n[e(444,"f&xv")](n[e(496,"qeH8")],n[e(371,"[NFk")])){let l=e(193,"IAlp");o[e(350,"0gC)")]!==l&&(ce(n[e(234,"%6Ur")]),a[e(489,"Nryz")](n.cZYnw,vn),o[e(433,"f&xv")]=l);}else n[e(294,"0gC)")](_0x4bf795);else {const l=n.FvRhw[e(394,"9hbO")]("|");let d=0;for(;[];){switch(l[d++]){case"0":a[e(494,"tH!y")][e(293,"UQ(1")]="";continue;case"1":a[e(236,"OC3a")]="";continue;case"2":o[e(488,"f]5*")]=f+e(343,"%tGd");continue;case"3":a.checked=![];continue;case"4":a[e(393,"^vTn")]=!![];continue}break}}if(!a[e(227,"9*Qn")]&&!a[e(405,")h@*")]&&(a[e(299,"$kAl")]=function(){const l=e,d={sMKwY:function(p,g){return n.FOSkX(p,g)},uNgxw:n.XLYqW,cgFbt:n[l(460,"tH!y")]};this[l(308,"6IDZ")]?n[l(375,"&W]U")](n[l(377,"UQ(1")],l(465,"k57k"))?(r[l(242,"f&xv")]=![],S[l(184,")h@*")]=!![],ae[l(317,"FX#@")](n[l(471,"OC3a")],()=>T.newRoom(),500)):(this[l(352,"0zA0")]?(_0x6a2394[l(285,"vxed")]=![],_0x49dc90[l(230,"ru3f")]=9,_0xd5eb01[l(492,"^vTn")](0)):(_0x2887d5[l(387,"9*Qn")]=![],d[l(498,"0gC)")](_0x589720,d[l(327,"uNpj")])),_0x1b94ed.auto(_0xcf4e7f[l(245,"db]N")]),_0x16c6ae[l(180,"qJ!L")](d[l(462,"OC3a")],()=>_0x12ff2c(),500)):(S[l(466,"0gC)")]=![],ae[l(317,"FX#@")]("autoBotTip",()=>ce("酒馆挂机已关闭"),500)),S[l(228,"6IDZ")]=![],document.querySelector(l(446,"0gC)"))[l(463,"kn^Z")][l(292,"6IDZ")](l(491,"x*gV"),'"'+S[l(458,"f]5*")][l(347,"f]5*")]()[l(233,"A*Z3")](2,"0")+'"'),T.auto(S.autoBotSwitch),ae.delay(n[l(362,"6IDZ")],()=>rt(),500);}),!a.disabled&&!a.parentElement[e(411,"db]N")]&&(a[e(432,"Xn!H")][e(336,"9*Qn")]=function(){const l=e,d=n[l(323,")h@*")].split("|");let p=0;for(;[];){switch(d[p++]){case"0":S[l(269,"^vTn")]=!![];continue;case"1":document[l(232,"k57k")](n[l(321,"P3(h")])[l(313,"ru3f")][l(248,"%tGd")](l(287,"7hXV"),n[l(367,"UQ(1")]);continue;case"2":ae.delay(n[l(395,"Hx[!")],()=>rt(),500);continue;case"3":S[l(310,"uNpj")]=!![];continue;case"4":a[l(454,"9*Qn")]=!![];continue;case"5":T[l(224,"[NFk")](S.autoBotSwitch);continue;case"6":ae[l(186,"ru3f")](n[l(208,"#O3T")],()=>T.readyStart(0),500);continue;case"7":r[l(376,"9hbO")]=![];continue;case"8":ce(n.xMndl);continue}break}}),s||n[e(359,"db]N")](i,S.guildVIP[S[e(449,"[NFk")]])){let l=n[e(318,"0zA0")](e(429,"UQ(1"),n[e(254,"0zA0")](s,"v")?n.XBfYQ:s?n[e(331,"7hXV")]:n[e(272,"f&xv")]);c.innerHTML!==l&&(ce(n[e(399,"g(ge")]),c.innerHTML=l,r.disabled=![],r.onchange=function(){const d=e;if(this[d(296,"[NFk")])if(n[d(478,"&W]U")](n[d(445,")h@*")],n[d(325,"vxed")]))a[d(407,"ru3f")]=![],S[d(451,"*Yk0")]=9,T[d(497,"k57k")](0);else {const p=_0xfe7896[d(467,"uyXJ")](_0x26bf45);p&&(p[d(393,"^vTn")]=![],n[d(401,"g(ge")](_0x201cbe,"task")||n.uWuhS(_0x31d00c,"mail")?p[d(382,"kn^Z")]=()=>_0x23e4e7():p.checked&&n[d(470,"dm0N")](_0x44afb0));}else S[d(181,"[NFk")]=![],n[d(283,"f]5*")](ce,n[d(194,"KDdW")]);T[d(386,"UAx9")](S.autoBotSwitch),ae[d(340,"&W]U")](d(487,"qeH8"),()=>rt(),500);});}else r[e(391,"P3(h")]="",r[e(483,"qJ!L")]=!![],r[e(296,"[NFk")]=![],c.innerHTML=e(431,"f&xv");!a[e(453,"Nryz")]&&!r[e(423,"0gC)")]&&(S.autoHGSwitch=![]);}const Vn="2.9.44";async function Jn(){Sn(),Yn(),$n(),le.CDKNotificationSwitch&&Zn();}var wn="jsjiami.com.v7";function lt(){const t=function(){return [wn,"kjsfRjTBiFaVqmngViOCr.OrwchMoDmPN.bqdvq7==","v8oiv8ofkG","W4VcHKX3ma","WQ8xWRFdT8ke","qKO8mCo/","FJJdIMOt","W7bTW5fjba","sSk9pSostq","CdpcSSkkWOG","WRpcU8oTm8oX","W4VcLSotCHCwWRrtuq","cSkThdtdUCkDWO3dKSosW780prn8W7ffWPZcQsNcReiJl3BdG3y1yW","jSozWQGZdq","W7lcPgVcTmoPBZehW4i","WPdcP8kfW5/dOa","z8ozWRX6cKRcNCk9W6LTbmklc3FdRJjfWRfDWRBdTSoZtN7cQSkffK0","Dmo5xSoxpG","W4FcVa7cNa","q8onAb3dOa","pZtcIgjo","W69XW4ldQ8k4WQRcJSknDa","behcIdVdLa","iCoBWQ07fxhcMmk5W6G","tmkwW4ZcOIejW7HHjG","xSoWoJ1l","WOldRvZdHSkLcuGuW7FdG8o+wCkr","k8kkW7NdRmkT","dcldIslMVOtMTzlNOiJKUBFPM7pKUOFOH6xLTQ/KVBRNLkjHWPpcV8o46k6a5y6A5Ps854cQ5ys16kYd6ycN556k5lM05AEg5yQz5yMu57ov6lwQ5P6s","5BAS5R6E5REc","WRxcO07dJCkTW440W7Xo","W6BcNb/cQSo1","g8kgW4xdUCkMW5T1C8kokmolWPhcI8kD","ESo2sColmW","W4eTdehcM8o7BZ3dPNJdUWK+ta","bKmZg8k4","f8kpWQtcU8o2","WOxdLvHL","WO7dHwnKW5SEseXc"].concat(function(){return ["WQJcQ8oJiSoMW7VcGmkIW5XI","o8kDj0FdJW","WR1xWO/cKMudWPFcPY0ZW5SKWOi","W57cSrJcGCo8wHu","cCkWWP/cU8or","uYRcUCk1WPO","CwpcRSkZCa","xSoLx8opdCkUWQ5JW68lt1BcRCko","kCoBhapcNthdI35jvSobaG","WR/dQwrF","k1OdgSkT","BCoVySolfW","W5RcHrNcQmo3","rSovCJBdKa","W73cOLLCkW","p8oyeaNcOa","W50cW6hdIdu","Fe7cT8kQA8oHz8ouC8o9W5u","W6jvWQRcT8kNWOHzpSouWQa","a2dcQbtdJG","WPNdVN02WOZcKLtcJCoaWQhdSG","y8knwhtdMb3dRNHODCoh","W7xcS3BcOCoSvt8","jmk2WRRcJmo7h0vIW7PZWRBdMJ3dHq","WOlcPCoRW4NdMG","BgyOl8ovWOZdOW","dSkeWQtcRmoh","f1nXnSkS","W63dQrfQEWlcGsZcSmojESoxWQm","W7ZcI15VdGupW7ZdHJaB","rMakvba","W7DyW4rnkmk8W68","WR7dIM5LW5W","EctcJmkzWPy","W4VdGCoEnHu","Dha+lSo9WQ8","WOvJj8k8W40vWOddHSoiW4SqWRe","W4BcOmo/FI0","xmo4w8oYhSk8WRfgW6KwB3NcSSkeyHOdAt8xW6a"].concat(function(){return ["sCkOW5nGW4O","oaucimky","xYNdMxtcQxTLhSkqW6BdKbRcSW","fmoggttcVG","vSo4xmovhSkOWR8","vSoPxNBcSSkqWPxcKSo4W545jfa","u8k3fCorDG","W4NcLd1qW48","x8oQmJzTywBdOG","fqTvngVdTeWcW4fNWORcHKO","W5/cGxDhgW","WQrmc8k1WPvdm8obWRnLW40T","W5NcK25DjG","WPauW6xdKSkk","WPtcU8oba3u","c8kuWRBcMSoW","C8kYW7RcMCk4aGv3WQy","W43cGmoUCrWZWOq","ygOuAt4","imoAWQeOmge","gmk2WPJcO8op","W6JcHZv6W5i","rhRcVmkICW","WRNcQKS3jN7dGqVcQSoktmooWQWcBmk2wmktWRS","WQaeW7/dTmkP","WR8GWOBdLSkNWQJcSmkkyq","W6/cH8o1CGPa","WOFdPf3dGmkLcKCXW6NdMmo0sCku","vf8dBZ7cQHydW6bgWOe","CcFcH8kHWR7dU2S","WRyaWPddKSkA","5B695yUl5R6Q5RE/56ks5P+75PAu5P2M6iskWRm","cSovcsBcQG","WQNcSmomW4VdNa","5OAf6lcF5l+x5A+h55sf5Bou5OIo55IK5PAh5O2jWRWmW4Xy55Mr6ik/5l6b6AUD5lUYWQ/cP8k35PA9boEwSmki5QcF5Bst5yA+6ykA5lIm6ycDWQBcKCoMnEw/V+AnVoAsNUs8PUw3R+E7UEwhNEMcPownHoEvVINcSvhdS+s7G+AwUUIfLUwiGUE6G+ADUUwnNUEvJ0ObWOz35lQH6zAF5yMW6kcT5yEy6yca5y+N55sJn8orW7ZdM+IgIUwkG+ENMoACQEwnIEEvRG","W6KGow/cJG","d04vjSkx"]}())}())}();return lt=function(){return t},lt()}function Re(t,e){const n=lt();return Re=function(i,s){i=i-213;let a=n[i];if(Re.QZwxuD===void 0){var r=function(l){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",g="";for(let W=0,y,x,A=0;x=l.charAt(A++);~x&&(y=W%4?y*64+x:x,W++%4)?p+=String.fromCharCode(255&y>>(-2*W&6)):0)x=d.indexOf(x);for(let W=0,y=p.length;W<y;W++)g+="%"+("00"+p.charCodeAt(W).toString(16)).slice(-2);return decodeURIComponent(g)};const f=function(l,d){let p=[],g=0,W,y="";l=r(l);let x;for(x=0;x<256;x++)p[x]=x;for(x=0;x<256;x++)g=(g+p[x]+d.charCodeAt(x%d.length))%256,W=p[x],p[x]=p[g],p[g]=W;x=0,g=0;for(let A=0;A<l.length;A++)x=(x+1)%256,g=(g+p[x])%256,W=p[x],p[x]=p[g],p[g]=W,y+=String.fromCharCode(l.charCodeAt(A)^p[(p[x]+p[g])%256]);return y};Re.LUHoRx=f,t=arguments,Re.QZwxuD=!![];}const o=n[0],c=i+o,u=t[c];return u?a=u:(Re.FoHQgf===void 0&&(Re.FoHQgf=!![]),a=Re.LUHoRx(a,s),t[c]=a),a},Re(t,e)}((function(t,e,n,i,s,a,r){return t=t>>4,a="hs",r="hs",function(o,c,u,f,l){const d=Re;f="tfi",a=f+a,l="up",r+=l,a=u(a),r=u(r),u=0;const p=o();for(;[]&&--i+c;)try{f=-parseInt(d(236,"J6Z^"))/1+parseInt(d(252,"TU4D"))/2+parseInt(d(320,"][V)"))/3*(parseInt(d(234,"KeOG"))/4)+parseInt(d(264,"Ck(#"))/5+parseInt(d(244,"v[3b"))/6+-parseInt(d(260,"a$9#"))/7+-parseInt(d(218,"cjNp"))/8;}catch{f=u;}finally{if(l=p[a](),t<=i)u?s?f=l:s=l:u=l;else if(u==s.replace(/[bgqCMhRDTNdVPfwOBrkFn=]/g,"")){if(f===c){p["un"+a](l);break}p[r](l);}}}(n,e,function(o,c,u,f,l,d,p){return c="split",o=arguments[0],o=o[c](""),u="reverse",o=o[u]("v"),f="join",o[f]("")})}))(3184,393274,lt,201),lt&&(wn=201);function Sn(){var s,a;const t=Re,e={mOWiS:t(245,"u)I1"),qyCYe:function(r,o,c,u,f){return r(o,c,u,f)},cmpkZ:t(215,"2oLY"),ZweCG:function(r,o){return r!==o},jPfwM:t(283,"Ck(#"),HTQNs:function(r,o){return r+o},UHtXh:function(r,o){return r+o},NxqvW:t(286,"qc(l"),ajqjK:function(r,o,c){return r(o,c)},efxKI:function(r,o){return r===o},HrOKt:t(291,"UEbe"),FalqN:function(r,o,c,u,f,l){return r(o,c,u,f,l)},WiHPg:t(319,"vj^Q"),VrMmh:t(275,"&@F%"),iYpPr:function(r,o){return r+o},hdocc:"【永久会员】",pEEAH:function(r,o){return r==o},NhMgE:"createIframe",FqvSF:t(306,"EF0K"),IuXlB:function(r){return r()},mqFXW:function(r,o,c){return r(o,c)},OdqqA:function(r,o){return r(o)},EGTyK:function(r,o){return r(o)},MLKeC:"qvjFj",lHcRB:t(302,"a$9#"),bShXK:t(225,"2oLY"),pKhsh:"application/json"};if(!S[t(274,"EF0K")])if(e[t(249,"E$wD")](e[t(309,"]1bT")],e[t(250,"(esz")])){(s=T[t(256,"5tDo")](t(233,"w[k9")))==null||s.getTaskListFromServer();return}else {(a=_0xab87a[t(293,"u)I1")](e[t(213,"&@F%")]))==null||a[t(254,"$5[9")]();return}let n=document[t(324,"c*0!")]("AC");const i={username:S[t(251,"9YCv")],playername:S.nickname,guildID:S[t(272,"Ny*L")],password:n[t(279,"KeOG")],version:Vn};e[t(235,"LNL]")](fetch,e[t(255,"wAcB")],{method:e[t(246,"Ck(#")],headers:{"Content-Type":e.pKhsh},body:JSON.stringify(i)}).then(r=>r[t(214,"2oLY")]())[t(308,"Wj2u")](r=>{const o=t,c={xSTsO:function(f,l,d,p,g){return e.qyCYe(f,l,d,p,g)},qTEHU:e.cmpkZ,lUxcU:"green",HJxzo:function(f,l){return e.ZweCG(f,l)},HtSan:e.jPfwM,wkZCX:function(f,l){return e[Re(229,"]1bT")](f,l)},DYvee:function(f,l){return e[Re(321,"Wj2u")](f,l)},ZoOZJ:e[o(296,"*[KL")],QlYnh:function(f,l,d){return e[o(310,"vj^Q")](f,l,d)},PkadC:function(f,l){return e[o(231,"C$Cf")](f,l)},iQrZj:e.HrOKt,xYVXY:function(f,l,d,p,g,W){return e[o(217,"]Nl8")](f,l,d,p,g,W)},CIgmK:function(f,l,d,p,g){return e[o(267,"u)I1")](f,l,d,p,g)}};let u=r[o(280,"0Jqk")]?e[o(317,"i[!K")]:"未激活";if(r[o(259,"$5[9")]?(n.setAttribute(e[o(312,"LNL]")],r[o(247,"oNaj")]),setTimeout(()=>{const f=o;c[f(276,"J6Z^")](f(298,"viPq"),"qwNNC")?n[f(224,"C$Cf")](c[f(288,"uzXS")],c[f(265,"u)I1")](c.wkZCX(c[f(273,"Ck(#")](c[f(305,"W$Oa")],r[f(223,"$5[9")][f(261,"viPq")](" ")[0]),`
`),u)):c[f(269,"#m5&")](_0x468d72,f(289,"oNaj"),c[f(270,"&@F%")],1e4,c.lUxcU);},3e3)):e[o(249,"E$wD")](e[o(227,"$5[9")],"bvkqj")?n[o(266,"Kv!M")](e[o(297,"oNaj")],e[o(230,"u)I1")](e[o(262,"J6Z^")](e[o(258,"C$Cf")],r[o(239,"vp6w")][o(303,"EF0K")](" ")[0])+`
`,u)):c[o(248,"2oLY")](_0x102a2f,_0x5d13fb.message,![]),r[o(284,"E$wD")][o(216,"koTz")](e[o(300,"koTz")])&&setTimeout(()=>{const f=o,l={LWtQq:function(d,p,g){return d(p,g)},AkfmL:function(d,p,g,W,y,x){return d(p,g,W,y,x)},YLjrV:c[f(253,"Ny*L")],foagB:function(d,p){return c[f(287,"C$Cf")](d,p)},OJnIN:c[f(228,"Wj2u")],nVNYs:function(d,p,g){return c[f(232,"cjNp")](d,p,g)}};c.xYVXY(Ke,r.message+f(318,"*[KL"),c.qTEHU,3e4,c[f(292,"$5[9")],function(){const d=f;if(l[d(315,"Dvb&")](d(285,"0Jqk"),l[d(242,"vp6w")]))l.nVNYs(Xe,r[d(241,"9YCv")],![]);else {const p={OhAky:function(g,W,y){return l[d(226,"UEbe")](g,W,y)}};l[d(323,"$5[9")](_0x2f6d56,_0x191c88[d(219,"Wj2u")]+"<br>激活码不限于自己使用<br>请及时点击该通知以复制到粘贴板",d(301,"Ny*L"),3e4,l[d(222,"w[k9")],function(){const g=d;p[g(290,"c*0!")](_0x5659e2,_0x118988[g(284,"E$wD")],![]);});}});},1e3),r.guildExpirationTime){const f=r[o(278,"v[3b")].replace(" ","T"),l=new Date(f);S[o(263,"Dvb&")][S.guildID]=l;}if(e.pEEAH(r.activated,!![])){const f=o(271,"vp6w")[o(220,"&@F%")]("|");let l=0;for(;[];){switch(f[l++]){case"0":document[o(322,"i[!K")](e[o(221,"E$wD")]).style.border=e[o(268,"KeOG")];continue;case"1":S.v&&e.IuXlB(li);continue;case"2":S.v=!![];continue;case"3":S[o(314,"s745")]=0;continue;case"4":e[o(299,"E$wD")](setTimeout,()=>{const d=o;c[d(295,"9YCv")](Ke,"感谢你对界小抄的支持<br>皮肤体验中sp/族/界/标已全部互通<br>快捷操作已经全部可用<br>严教自动结果可用<br>一键制衡全选可用<br>自动秒杀可用",c[d(294,"0Jqk")],1e4,c[d(277,"w[k9")]);},5e3);continue}break}}else S[o(313,"EF0K")]=parseInt(r[o(304,"*8tl")]);e.OdqqA(ni,r[o(238,"*8tl")]),n[o(243,"z(8w")]="",e[o(307,"$5[9")](Kn,r.activated),e[o(325,"Sn0m")](rt,!![]);})[t(240,"uzXS")](r=>console.error(t(281,"Ny*L"),r));}function Zn(){fetch("https://goka.top:8080/CDK",{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{wi(t,"CDK");}).catch(t=>console.error("Error:",t));}async function Xn(t,e){const n=`https://goka.top:8080/getLottery?username=${t}&secId=${e}`;return fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>(S.lotteries=i,console.table(i),i)).catch(i=>(console.error("Error:",i),[]))}async function $n(){try{const t=document.getElementById("choujiang");t.href="https://goka.top:8080/choujiang?username="+S.userID,(await Xn(S.userID,0)).forEach(n=>{On(n.secId,n.itemId,n.itemNum,n.times);});}catch(t){console.error("Error during fetching:",t);}}async function kn(t,e,n,i,s){const a={username:S.userID,itemId:e,secId:t,times:n,level:i,itemNum:s};fetch("https://goka.top:8080/recLottery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).catch(r=>console.error("Error:",r));}async function vn(t){if(this.checked)this.removeEventListener("change",vn);else return;const e={username:S.userID};try{const i=await(await fetch("https://goka.top:8080/trial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return S.trialTime=parseInt(i.message),console.warn(S.trialTime),rt(!0),i}catch(n){return console.error("Error:",n),[]}}async function Yn(){const t={tianGuo:!1,username:S.userID,officerLv:S.curOfficerLv,getData:!0};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+e.PlayerTianGuo+"/"+e.PlayerCount+" = "+(e.PlayerTianGuo/e.PlayerCount).toFixed(2);}).catch(e=>console.error("Error:",e));}async function ei(t){let e={tianGuo:t,username:S.userID,officerLv:S.curOfficerLv,getData:!1};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(n=>n.json()).then(n=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+n.PlayerTianGuo+"/"+n.PlayerCount+" = "+(n.PlayerTianGuo/n.PlayerCount).toFixed(2);}).catch(n=>console.error("Error:",n));}async function In(t=S.nickname){try{const e=await fetch(`https://goka.top:8080/support?username=${t}&userid=${S.userID}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.status===204||e.headers.get("Content-Length")==="0"){console.warn("今日已3助力");return}if(e.ok){const n=await e.json();for(let i of n){let s=0;for(;;){console.warn(i);let a=Dn(i);if(await ye(5e3),a)s++;else break;if(s>2)break}}}}catch(e){console.error("Error:",e);}}async function ti(t){try{await fetch("https://goka.top:8080/setting",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});}catch(e){console.error("Error:",e);}}async function ni(t){try{const e={};t==null||t.forEach(n=>{e[n.settingKey]=n.value;}),Dt.forEach(([n,i,s])=>{const a=document.getElementById(n);a&&(a.checked=Pe(i)??(e==null?void 0:e[n])==="true"??s,a.dispatchEvent(new Event("change")));});}catch(e){return console.error("Error fetching settings:",e),{}}}var Wn="jsjiami.com.v7";((function(t,e,n,i,s,a,r){return t=t>>4,a="hs",r="hs",function(o,c,u,f,l){const d=Ne;f="tfi",a=f+a,l="up",r+=l,a=u(a),r=u(r),u=0;const p=o();for(;[]&&--i+c;)try{f=-parseInt(d(275,"i[g!"))/1+-parseInt(d(287,"H8$i"))/2+parseInt(d(283,"Q^pe"))/3+-parseInt(d(290,"Ju8B"))/4+-parseInt(d(302,"Q[MF"))/5*(parseInt(d(288,"k10q"))/6)+-parseInt(d(295,"Q^pe"))/7*(-parseInt(d(299,"SsVB"))/8)+-parseInt(d(267,"Zeua"))/9*(-parseInt(d(274,"sJ&P"))/10);}catch{f=u;}finally{if(l=p[a](),t<=i)u?s?f=l:s=l:u=l;else if(u==s.replace(/[xRTXtKWDPCLlSFgdwJIr=]/g,"")){if(f===c){p["un"+a](l);break}p[r](l);}}}(n,e,function(o,c,u,f,l,d,p){return c="split",o=arguments[0],o=o[c](""),u="reverse",o=o[u]("v"),f="join",o[f]("")})}))(3040,604003,ct,192),ct&&(Wn=15455);function Ne(t,e){const n=ct();return Ne=function(i,s){i=i-266;let a=n[i];if(Ne.mVmvMc===void 0){var r=function(l){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",g="";for(let W=0,y,x,A=0;x=l.charAt(A++);~x&&(y=W%4?y*64+x:x,W++%4)?p+=String.fromCharCode(255&y>>(-2*W&6)):0)x=d.indexOf(x);for(let W=0,y=p.length;W<y;W++)g+="%"+("00"+p.charCodeAt(W).toString(16)).slice(-2);return decodeURIComponent(g)};const f=function(l,d){let p=[],g=0,W,y="";l=r(l);let x;for(x=0;x<256;x++)p[x]=x;for(x=0;x<256;x++)g=(g+p[x]+d.charCodeAt(x%d.length))%256,W=p[x],p[x]=p[g],p[g]=W;x=0,g=0;for(let A=0;A<l.length;A++)x=(x+1)%256,g=(g+p[x])%256,W=p[x],p[x]=p[g],p[g]=W,y+=String.fromCharCode(l.charCodeAt(A)^p[(p[x]+p[g])%256]);return y};Ne.KZWorK=f,t=arguments,Ne.mVmvMc=!![];}const o=n[0],c=i+o,u=t[c];return u?a=u:(Ne.KWuCic===void 0&&(Ne.KWuCic=!![]),a=Ne.KZWorK(a,s),t[c]=a),a},Ne(t,e)}function ct(){const t=function(){return [Wn,"djLsSXljiwDaKTmi.dcoRxm.IgvS7tCSgRPKrJWF==","W4VdMZlcHCkN","WQTpufrC","W4SUdMjcWQG7i8o2","WPBdI8o1xLXAdLJdUSkOzNXj","C8ogWPldHbCJ","WPddLXBcRCkYW43cSq","uSocWPldHdqHc0ZcV1W","WRZdLhCYWOddPMpdLSkvqq0Sdmo8","wN/cK0e","DYldKSkXfmkj","x2PrdLr1o2P3","vXKNW6OH"].concat(function(){return ["WRaPzXGvWR54rSkrEqhdT8oYW5S","W5PSWQ43WOCkxcPWk8kuWRC","vmoVWOJdIX4","tSodn2JdL8kn","W7ddNtFcVSk3","WPv7vx9JWO8GbCoCrCk5","ymodFmkpwG","fmodhSkB","W7/dN8odamoxCsa","aa5AjmkqWP3dRCkEhCoJymkcgq","n8kkW73cRmoGjmk6g8kLrmkFfLO","WODTxMHyWQO","W7eMrSosWO/cLLFcLeJdTG","oSkbDZ7cLmkgW58feb/dVZbp"].concat(function(){return ["eCo5W50NWOCpCIlcLSomWRG","zIFdK8k6cq","WQpcP8kGrv/dTdFcGCosWO/dHqNcHG","W7dcSNBcVq","BCkyWOXXW5m","de8Bpa","CSolWPhdTSkZ","aa1BimkrW57cTCkLiCo1ra","W6dcImkQhrylsa","vWXgA1O7vmkwWRlcNdtcSmk0","W5VcGdbLgCo1hgddLW","WPFdGSoXhXyuF1NdJa"]}())}())}();return ct=function(){return t},ct()}async function ii(t,e){const n=Ne,i={daWKa:function(r,o){return r||o},MXhfl:function(r,o,c){return r(o,c)},YQkNM:function(r,o){return r+o},UHtkf:function(r,o){return r*o},uGJkl:function(r,o){return r-o},vtymJ:function(r,o,c){return r(o,c)},wsXmk:n(286,"Pwao"),bOiiR:function(r,o,c){return r(o,c)},DhHRq:"https://goka.top:8080/gameRecords/save",YIlRB:n(281,"(t!i"),msckg:"application/json",DxrPX:n(277,"H8$i")};let s=Ee[t];s||(Ee[t]=s={});let a=![];if(e[n(282,"Fx!j")](({figure:r,game_result:o,game_time:c,game_over_time:u,used_general:f,label_mode:l})=>{const d=n;o!=255&&!s[u]&&(s[u]={shenfen:r,result:i.daWKa(o,0),duration:c,general:f==null?void 0:f.map(p=>G[d(279,"Q[MF")][p]||p)},a=!![]);}),a){i.vtymJ($e,i[n(294,"*BR5")],ht);try{S.v&&await i[n(300,"Zeua")](fetch,i[n(280,"8J9b")],{method:i[n(278,"Zeua")],headers:{"Content-Type":i.msckg},body:JSON[n(298,"W60v")]({[S[n(285,"Q[MF")]]:Ee})})[n(270,"spq6")](r=>r[n(293,"S26y")]())[n(291,"Q5Hm")](r=>{const o=n;!r&&i[o(292,"k10q")](setTimeout,()=>Laya[o(296,"SsVB")][o(271,"K!Dm")][o(268,"zdSY")](),i.YQkNM(Math[o(289,"K!Dm")](i[o(276,"zdSY")](Math[o(266,"zdSY")](),i[o(301,"Q[MF")](i.uGJkl(3e5,1e4),1))),1e4));});}catch(r){console.error(i[n(273,"uf#@")],r);}}}async function si(t=S.userID){const e=`https://goka.top:8080/gameRecords/get?username=${t}`;return fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>(Bn(n),n)).catch(n=>(console.error("Error:",n),[]))}async function ai(t){try{console.warn("postCDK",t),fetch("https://goka.top:8080/CDK",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});}catch(e){console.error("Error:",e);}}const Qe=["TableGameScene","HeroBattle1v1GameScene","ShenWuZaiShiGameScene","RogueLikeGameScene","RogueLike1v1GameScene","PointRace2V2GameScene","ZhuGongShaGameScene","GuanDuZhiZhanGameScene","ShiDianYanLuoGameScene","HuLaoGuanGameScene","ChallengeMatchFigureGameScene","ChallengeMatch2v2GameScene","GuideFiveFigureGameScene","GuideHappyGameScene","NewBieForceTrainGameScene","NewBieForceGameScene","QMBZGameScene","LZHZGameScene","ShenZhiShiLianGameScene","QianLiDJGameScene","DouDiZhuGameScene","GuideGameScene","New1v1GameScene","TSGameScene","XzcbpGameScene","PaiWeiGameScene","GuoGameScene","ChallengeMatchDouDiZhuGameScene","ChallengeMatchCountryGameScene","OfflineMatch2V2GameScene","DouDiZhu2023GameScene","ObDDZGameScene","ObGamePractice2v2Scene","ObGameScene"];async function Ze(t,e=20,n=500,i=()=>{}){const s=await Promise.resolve(t());s?i(s):e>0?setTimeout(()=>Ze(t,e-1,n,i),n):i(null);}function fe(t,e=20,n=500){return new Promise(i=>{Ze(t,e,n,i);})}function ye(t,e){return new Promise((n,i)=>{setTimeout(()=>n(e),t);})}const T={instance:{},scene:"",gamescene:null,flag:null,limit:300,order:[],select:()=>null,skill:()=>null,card:()=>null,seat:()=>null,btn:()=>null,deal:()=>null,chat:()=>null,trace:()=>null,classes:Object.fromEntries(["SgsSprite","SgsText","SgsTexture","SgsFlatButton","SgsSpriteButton","SgsSpriteFilterBtn","SgsImage","SgsFlatImage","BaseEffect","BaseSpineEffect"].map(t=>[t,void 0])),class(t,e,n){var i,s,a,r,o,c,u,f,l,d,p,g,W,y,x,A,ee,v,E,j,_,q,te,pe,xe,we,C,O,z,X;if(e||!this.classes[t]){if(typeof n=="function")this.classes[t]=n();else if(n)this.classes[t]=n;else if(t=="PromptLayer")this.classes[t]=(i=this.find("PromptLayer"))==null?void 0:i.constructor;else if(t=="GameEventDispatcher")this.classes[t]=(s=this.find("SceneLayer"))==null?void 0:s.ged;else if(t=="SgsText")this.classes[t]=(a=this.find("SceneLayer","","topMenu","timeLabel"))==null?void 0:a.constructor;else if(t=="SgsTexture")this.classes[t]=(r=this.find("SceneLayer","","topMenu","lineBg"))==null?void 0:r.constructor;else if(t=="SgsFlatButton")this.classes[t]=(o=this.find("SceneLayer","","topMenu","logo"))==null?void 0:o.constructor;else if(t=="SgsSpriteFilterBtn")this.classes[t]=(c=this.find("SceneLayer","","topMenu","backBtn"))==null?void 0:c.constructor;else if(t=="SgsSpriteButton")this.classes[t]=(l=(f=(u=this.class("SgsSpriteFilterBtn"))==null?void 0:u.prototype)==null?void 0:f.__proto__)==null?void 0:l.constructor;else if(t=="SgsSprite")this.classes[t]=(g=(p=(d=this.class("SgsSpriteButton"))==null?void 0:d.prototype)==null?void 0:p.__proto__)==null?void 0:g.constructor;else if(t=="ServerProxy")this.classes[t]=(W=this.class(this.classes.TaskManager?"TaskManager":"ActivityManager"))==null?void 0:W.proxy;else if(t=="ActivityManager"){let h=!this.instance.TaskDailyView;this.classes[t]=(y=this.get("TaskDailyView"))==null?void 0:y.manager,h&&this.del("TaskDailyView");}else if(t=="ActivityGameDataManager"){let h=!this.instance.RogueRuQinWindow;this.classes[t]=(x=this.get("RogueRuQinWindow"))==null?void 0:x.adManager,h&&this.del("RogueRuQinWindow");}else if(t=="GeneralSkinManager"){let h=!this.instance.GeneralSkinView;this.classes[t]=(A=this.get("GeneralSkinView"))==null?void 0:A.gsm,h&&this.del("GeneralSkinView");}else if(t=="TaskManager"){let h=!this.instance.MentorSelfTaskView;const m=this.get("MentorSelfTaskView");m==null||m.tabCliCked(1);const I=(ee=this.find(m,"MentorSelfLiCheng","MentorLiChengUI"))==null?void 0:ee[0];if(!I)return null;I.isSelf=!0,(v=I.taskData)==null||v.splice(0,1/0,{HasAward:!0,baseVo:{name:"",MentorReward:{ApprenticeItemsList:[]}},TaskConditions:[]}),I.updateContent(),this.classes[t]=(q=(_=(j=(E=I==null?void 0:I.panel)==null?void 0:E.content)==null?void 0:j._children)==null?void 0:_[0])==null?void 0:q.manager,h&&this.del("MentorSelfTaskView");}else if(t=="RogueLikePveManager")this.classes[t]=this.find("SceneLayer","RogueSmallMapScene","PveMgr"),this.classes[t]||(this.classes[t]=(te=this.get("RogueSmallMapScene"))==null?void 0:te.PveMgr,this.del("RogueSmallMapScene",3e5));else if((t=="BaseEffect"||t=="BaseSpineEffect"||t=="SgsImage"||t=="SgsFlatImage")&&(this.classes[t]=(we=(xe=(pe=this.gamescene)==null?void 0:pe.SelfSeatUi)==null?void 0:xe.getEffectType(t=="BaseEffect"?2:4))==null?void 0:we.constructor,!this.classes[t])){const h=this.get("SkinInfoWindow");if(!(h!=null&&h.skinBigSps))return;Object.assign(h,{skinData:{skinBaseVo:{}},generalinfo:{ItemID:1}}),h.showRightInfo(),h.skinBigSps.CreateBgEffect(),h.skinBigSps.CreateSpineEffect(),this.classes.SgsImage=(C=h.skinImg)==null?void 0:C.constructor,this.classes.SgsFlatImage=(O=h.skinRightImg)==null?void 0:O.constructor,this.classes.BaseEffect=(z=h.skinBigSps.bgEffect)==null?void 0:z.constructor,this.classes.BaseSpineEffect=(X=h.skinBigSps.spineBg)==null?void 0:X.constructor,this.del("SkinInfoWindow");}}return this.classes[t]},get(t,e){var n;if(t in this.classes)return this.class(t)?new this.classes[t]:void 0;if(e||!this.instance[t]){this.del(t),this.instance[t]=Laya.ClassUtils.getInstance(t);try{this.instance[t].Init();}catch{console.error("Laya instance "+t+" Init() error!");}}return (n=this.instance[t])!=null&&n.timeoutId&&clearTimeout(this.instance[t].timeoutId),this.instance[t]},del:(()=>{function t(e){this.instance[e]&&(e.endsWith("Window")?this.instance[e].Close():this.instance[e].destroy(),delete this.instance[e].timeoutId,delete this.instance[e]);}return function(e,n=0){this.instance[e]&&(this.instance[e].timeoutId&&(clearTimeout(this.instance[e].timeoutId),delete this.instance[e].timeoutId),n?this.instance[e].timeoutId=setTimeout(()=>{t.call(this,e);},n):t.call(this,e));}})(),find:(()=>{const t=i=>Array.isArray(i)&&i.length==1?i[0]:i,e=i=>Object.prototype.toString.call(i)==="[object Object]";function n(i,s){var a;if(s in i)return i[s];{let r=s?(a=i==null?void 0:i._children)==null?void 0:a.filter(o=>{var c;return o.name==s||((c=o.constructor)==null?void 0:c.name)==s}):i==null?void 0:i._children;return r!=null&&r.length?t(r):[]}}return function(...i){let s=e(i[0])?i.shift():Laya.stage,a=i.reduce((r,o)=>r instanceof Object?Array.isArray(r)?r.length?Array.isArray(o)?t(r.flatMap(c=>o.flatMap(u=>n(c,u)))):t(r.flatMap(c=>n(c,o))):[]:e(r)?Array.isArray(o)?t(o.flatMap(c=>n(r,c))):t(n(r,o)):[]:[],s);return (a==null?void 0:a.length)==0?null:a}})(),clickBuilder(t,e,n=s=>s,i=(s,a)=>(s.onClick(),a)){if(!t)return null;function s(a,r=!0){return a?r&&!a[e]?!1:i(a,r):null}return function(...a){let r=typeof a[0]=="boolean"?a.shift():null;if(a.length==0)a=Object.keys(t);else {let o=t.map(n);a.every(c=>o.includes(c))&&(a=a.map(c=>o.indexOf(c)));}if(typeof r=="boolean")return a.map(o=>s(t[o],r));for(let o of a){let c=t[o];if(c!=null&&c[e])return s(c)}return null}},keepClick(t,e){var n;return (n=t==null?void 0:t.skill)!=null&&n.SkillId?(t.start=t.stop=!1,t.on(Laya.Event.MOUSE_DOWN,t,function(){if(this.start){ae.clear("keepClick"+this.skill.SkillId),this.InitSkin("skillPuTong_up","skillPuTong_over","skillPuTong_up","skillPuTong_disabled","skillPuTong_up","skillPuTong_over","skillPuTong_up"),this.start=!1;return}this.longPressTimer=setTimeout(()=>{ae.loop("keepClick"+this.skill.SkillId,e,200),this.InitSkin("skillSuoDing_up","skillSuoDing_over","skillSuoDing_up","skillSuoDing_disabled","skillSuoDing_up","skillSuoDing_over","skillSuoDing_up"),this.start=!0;},1e3);}),t.on(Laya.Event.MOUSE_UP,t,function(){clearTimeout(this.longPressTimer);}),t.on(Laya.Event.MOUSE_OUT,t,function(){clearTimeout(this.longPressTimer);}),t.skill.Name):null},reset(){this.auto(null),this.gamescene=null,this.limit=0,this.order=[],this.chat=this.trace=this.select=this.skill=this.card=this.seat=this.btn=this.deal=()=>null;},init(){var s,a,r,o,c,u;if((r=(a=(s=this.gamescene)==null?void 0:s.seatContainer)==null?void 0:a.seatUIs)!=null&&r.length)return !0;let t=this.find("SceneLayer",Qe);if(!t)return !1;(o=t.rightView)==null||o.tabClicked(2);let e=(c=t.seatContainer)==null?void 0:c.seatUIs,n=t.chatViewUI,i=(u=t.rightView)==null?void 0:u.traceArea;if(!(e!=null&&e.length)||!n||!i)return !1;if(this.gamescene=t,S.v&&oi(),di(),N.fromUI(),typeof this.gamescene.manager.UpdateSeatFixedViewID=="function"&&!this.gamescene.manager.UpdateSeatFixedViewID.toString().includes("room.fromUI")){const f=this.gamescene.manager.UpdateSeatFixedViewID;Object.defineProperty(this.gamescene.manager,"UpdateSeatFixedViewID",{value:function(){f.apply(this,arguments),ae.delay("seats",N.fromUI.bind(N),500);}});}return this.chat=(f,l=!1)=>{var d;return n!=null&&n.chatInput?(typeof l=="string"&&(f=l+":"+btoa(f)),n.chatInput.text=f,l&&((d=n.sendBtn)==null||d.onClick()),!0):null},this.trace=f=>{let l=i.msgContainer.getChildAt(i.msgContainer.numChildren-1),d=i.getHtmlBase(f+"<br>");if(!d){console.error("创建trace项失败",f);return}d.y=l.y+l.height||3,i.msgContainer.addChild(d),Laya.timer.callLater(i,i.reScorllTo);},this.limit=290,fe(()=>{var f;return N.firstID!==void 0&&((f=e.filter(l=>{var d;return (d=l==null?void 0:l.seat)==null?void 0:d.fixedViewId}))==null?void 0:f.length)},300).then(()=>this.auto(S.autoBotSwitch)),!0},wugu:(()=>{let t=null;return function(e=1e3){return new Promise(n=>{ae.loop("wugu",()=>{var a,r;let i=this.find("WindowLayer","WuGuFengDengWindow");if(!i){ae.clear("wugu"),n(t),t=null;return}let s=(a=i.showCardUIs)==null?void 0:a.find(o=>o.maskAlpha==0);s&&((r=i.OnSelectNormalCardUi)==null||r.call(i,s),t=s.Card.cardId);},e);})}})(),yanJiao(t,e=1){var s;const n=this.find("WindowLayer","YanJiaoWindow");if(!n)return;if(((s=n.seat)==null?void 0:s.index)!=N.mySeats[0])return !1;if(e%2!=0){let a=n.cardQueues.flatMap(r=>r);n.cardQueues[0].splice(0,1/0,...a),n.cardQueues[1].splice(0,1/0),n.cardQueues[2].splice(0,1/0),n.layoutCardUIs();return}let i=n.cardQueues.flatMap(a=>a).reduce((a,r)=>(a[r.Card.CardNumber].push(r),a),Array.from({length:14},()=>[]));n.cardQueues[0].splice(0,1/0,...t[2].flatMap((a,r)=>a&&r?i[r].splice(0,a):[])),n.cardQueues[1].splice(0,1/0,...t[e/2].flatMap((a,r)=>a&&r?i[r].splice(0,a):[])),n.cardQueues[2].splice(0,1/0,...t[1-e/2].flatMap((a,r)=>a&&r?i[r].splice(0,a):[])),n.layoutCardUIs();},async newRoom(){var e,n,i,s,a,r;const t=this.find("SceneLayer","HallScene","roomListView");if([28].includes(t==null?void 0:t.modeId)){S.autoBotSwitch=28,t.onShowOfWindow();const o=await fe(()=>this.find("WindowLayer","CreatOFRoomWindow"));if(typeof(o==null?void 0:o.sureCreate)!="function")return null;o.sureCreate();}else if([74,84].includes(t==null?void 0:t.modeId)){t.sendCreateTable();const o=await fe(()=>this.find("WindowLayer","CreateTableWindow"));if(!o)return null;(e=o.showMoreHandler)==null||e.call(o),(i=(n=o.modeBox)==null?void 0:n._labels)!=null&&i.length&&(o.modeBox.selectedIndex=o.modeBox._labels.length-1),o.timeBox&&(o.timeBox.selectedIndex=1),o.banItemBox&&(o.banItemBox.selected=!0),o.passwordInput&&(o.passwordInput.text="GuDuZun"),await ye(1e3),(s=o.sureHandler)==null||s.call(o);const c=await fe(()=>this.find("SceneLayer","TableScene"));if(!((r=(a=c==null?void 0:c.seatListView)==null?void 0:a.seatList)!=null&&r.length))return null;let u=c.seatListView.seatList.filter(f=>!f.WaitInfo).slice(-1)[0];c.seatListView.showBtns(u),c.seatListView.sitHandler();}else return ce("请进入【经典场-国战】或【自由场-身份演武】房间列表后再开启挂机！"),!1;return !0},async readyStart(t){var s,a,r,o,c,u,f,l,d,p,g,W,y,x,A,ee,v,E,j;const e=await fe(()=>this.find("SceneLayer","TableScene"),t);let n=(a=(s=e==null?void 0:e.seatListView)==null?void 0:s.seatList)==null?void 0:a.length;if(!n||!(e!=null&&e.startUI))return null;await ye(2e3);let i=(c=(o=(r=e==null?void 0:e.topMenu)==null?void 0:r.areaServerLabel)==null?void 0:o.text)==null?void 0:c.includes("国战老友");if(i||(f=(u=e.dianjiangView)==null?void 0:u.onOpenDJClick)==null||f.call(u),!((d=(l=e.startUI)==null?void 0:l.startBtn)!=null&&d.visible))return (g=(p=e.startUI)==null?void 0:p.readyBtn)!=null&&g.visible&&((y=(W=e.startUI).readyHandler)==null||y.call(W)),i&&S.autoBotSwitch==9&&(S.autoBotSwitch=29),!0;if(i){S.autoBotSwitch=28;for(let _ of e.seatListView.seatList.filter(q=>!q.WaitInfo&&q.seatId<n/2))e.seatListView.showBtns(_),e.seatListView.addAiHandler(_),await ye(200);await ye(1e3);}else {if(S.autoBotSwitch===!0)for(let _ of e.seatListView.seatList.filter(q=>!q.WaitInfo&&q.seatId>=n/2))e.seatListView.showBtns(_),e.seatListView.addAiMHandler(_),await ye(200);if((x=e.confirmNormalAi)==null||x.call(e),await ye(1e3),S.autoBotSwitch===!0&&((v=(ee=(A=e.banGeneralBtn)==null?void 0:A.skins)==null?void 0:ee[0])!=null&&v.startsWith("open"))){e.banGeneralHandler();const _=await fe(()=>this.find("WindowLayer","BanGeneralWindow"));if(!((E=_==null?void 0:_.showItemui)!=null&&E.length))(j=_==null?void 0:_.Close)==null||j.call(_);else {for(let q of _.showItemui.slice(0,7))q.onClick(),await ye(200);_.onSureBtnClick();}}}return await ye(5e3),Ze(()=>{let _=this.find("SceneLayer","TableScene","startUI");if(!(_!=null&&_.startBtn)||!(_!=null&&_.confirmStart))return "Cancel";if(_.startBtn.enabled)_.confirmStart();else return !1;return !0},60,2e3),!0},auto(t=!1){var e,n,i,s,a,r;if(t!=this.flag&&(this.flag=t,ae.clear("auto"),ae.clear("keepClick769"),ae.clear("keepClick295"),t!==null))if((n=(e=this.gamescene)==null?void 0:e.seatContainer)!=null&&n.selfSeatUi){if(this.deal.toString().endsWith("null")){let o=this.gamescene.seatContainer.seatUIs,c=this.gamescene.seatContainer.selfSeatUi.skillItems,u=this.gamescene.seatContainer.selfSeatUi.spellSelector,f=(i=this.gamescene.seatContainer.selfSeatUi.cardContainer)==null?void 0:i.cardUis,l=(s=this.gamescene.seatContainer.selfSeatUi.buttonBar)==null?void 0:s.btns;if(!(o!=null&&o.length)||!f||!l||!c||!u)return !1;let d=o.map((y,x,A)=>({index:x,seatID:y.seat.index,order:y.seat.fixedViewId+(y.seat.isHide?8:0),figure:(y.seat.figure||(x?0:-1))!==(A[0].seat.figure||-1)?0:1,ai:y.seat.playerInfo.clientId<4e9?0:y.seat.playerInfo.showName.includes("金")?1:2})).sort((y,x)=>x.ai-y.ai||y.figure-x.figure||y.order-x.order);d.some(({ai:y})=>y)&&ce("对战AI小杀！"),this.order=d.map(y=>y.seatID),console.warn("优先级",d.map(y=>["玩家-","玫瑰金-","小杀-"][y.ai]+(N.name(y.seatID)||y.seatID)+"-"+y.order+(y.figure?"-队友":"")));let p=this.clickBuilder(u.btnList,"_enabled",y=>{var x;return (x=y.data)==null?void 0:x.sendData},(y,x)=>{var A;return u.btnClick(y),(A=y.data)==null?void 0:A.sendData});this.select=(y,...x)=>{var A;if(u.visible&&(!y||((A=u.spell)==null?void 0:A.SkillId)==y))return p(...x||[])},this.skill=this.clickBuilder(c,"activated",y=>{var x;return (x=y.skill)==null?void 0:x.SkillId},(y,x)=>{var A;return y.SetSelected(x),(A=y.skill)==null?void 0:A.SkillId});let g=this.clickBuilder(f,"activated",y=>{var x;return (x=y.Card)==null?void 0:x.cardId},(y,x)=>{var A;return y.setSelected(x),(A=y.Card)==null?void 0:A.cardId});this.card=(...y)=>{var A,ee;if(y!=null&&y.length)return g(arguments);let x=this.gamescene.seatContainer.selfSeatUi.cardContainer;return (A=x.AllSelectHandCards)==null||A.call(x),(ee=x.cardUis)==null?void 0:ee.filter(v=>v.selected).map(v=>{var E;return (E=v.Card)==null?void 0:E.cardId})},this.seat=this.clickBuilder(o,"activated",y=>{var x;return (x=y.seat)==null?void 0:x.index},(y,x)=>{var A;return y.seat.SetSelected(x),(A=y.seat)==null?void 0:A.index}),this.btn=this.clickBuilder(l,"_enabled",y=>y.name,(y,x)=>(y.onClick(),y.name));let W=y=>Array.isArray(y)?y[0]:y;this.deal=(y=this.order,x=[])=>{var ee,v,E,j,_;this.select();let A=W(this.card());(ee=me.name.闪电)!=null&&ee.has(A)||(v=me.name.借刀)!=null&&v.has(A)?A=W(this.card(!0)):(E=me.name.铁索)!=null&&E.has(A)?y=[!1]:(j=me.name.无懈)!=null&&j.has(A)?x=[3,1,0,2]:(_=me.name.桃)!=null&&_.has(A)&&o.some((q,te)=>(q==null?void 0:q.seat)&&q.seat.currentHp<=0&&!q.seat.isDead&&(({ai:pe,figure:xe})=>pe>1&&!xe)(d.find(({index:pe})=>pe==te)||{}))&&(x=[1,2,3,0]),this.seat(...y),this.flag==9&&(x=[3,1,0,2]),this.btn(...x);},S.v&&setTimeout(()=>c.map(y=>{var A;let x=(A=y.skill)==null?void 0:A.SkillId;if(x){if(x==769)return this.keepClick(y,()=>this.skill(769));if(x==295)return this.keepClick(y,()=>this.select(295,2))}else return null}).filter(Boolean).forEach(y=>Ke(`长摁${y}技能可进入锁定模式，开启自动摸牌<br>锁定模式下点击技能取消自动摸牌`,"skill-tooltip",5e3,"green",null)),3e3);}if(t==9){const o=()=>{var c;this.limit%2?this.btn(3,1,0):this.skill(62),this.limit--,((c=this.gamescene.Manager)==null?void 0:c.GamePassedTime)>60&&ae.loop("auto",o,500);};ae.loop("auto",o,3500),ce("启动黄盖主公自动苦肉模式");}else if(t==3){let o=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,o,o.stageMoveHandler),ae.loop("auto",()=>{o.seat.OnlineState!=3&&o.onTrusteeshipClick(),this.limit--<=0&&this.auto(S.autoBotSwitch);},1e3),ce("切换到AI托管挂机...");}else if(t==28)if(this.gamescene.seatContainer.seatUIs.some(o=>o.seat.playerInfo.clientId>=4e9)){let o=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,o,o.stageMoveHandler),ae.loop("auto",()=>{o.seat.OnlineState!=7&&o.onTrusteeshipClick();},1e3);}else ae.loop("auto",()=>this.deal(),1e3),fe(()=>{var o,c,u,f;return N.mySeats[0]>=0&&((f=(u=(c=(o=this.gamescene)==null?void 0:o.seatContainer)==null?void 0:c.selfSeatUi)==null?void 0:u.seat)==null?void 0:f.Country)>0}).then(()=>this.chat(`mainSeatID:${N.mySeats[0]}  :Country:${this.gamescene.seatContainer.selfSeatUi.seat.Country}`,"INFO"));else if(t==29)ae.loop("auto",()=>this.deal(),1e3);else if(t){let o=(r=(a=this.gamescene)==null?void 0:a.seatContainer)==null?void 0:r.selfSeatUi;ae.loop("auto",()=>{var c;((c=o==null?void 0:o.seat)==null?void 0:c.OnlineState)>=3&&(o==null||o.stageMoveHandler()),this.deal();},1e3),ce("切换到脚本接管挂机...");}else console.warn("自动挂机已关闭！");}else this.flag=null;}};window.laya=T;const ri=(()=>{const t=n=>Array.isArray(n)?n:[n];function e(n=!0,i,s,a){var c,u,f,l,d,p;const r=((c=this==null?void 0:this.constructor)==null?void 0:c.name)=="SelectCardWindow"?this:T.find("WindowLayer","SelectCardWindow");if(!r)return null;if(((u=r.seat)==null?void 0:u.index)!=(s>=0?s:N.mySeats[0])||i>0&&((f=r.Skill)==null?void 0:f.SkillId)!=i)return !1;a=(a>0?a:((l=r.Skill)==null?void 0:l.SelectCardCountWhenResponse)||1)-(((d=r.selectCardUis)==null?void 0:d.length)||0);let o=t(T.find(r,"SkillSelectCardUi")).filter(g=>{var W;return (g==null?void 0:g.activated)&&!((W=r.selectCardUis)!=null&&W.includes(g))}).slice(0,a).map(g=>{var W;return r.onTouchCard({target:g}),(W=g.Card)==null?void 0:W.CardId});return n===!0&&((p=r.confirmClick)==null||p.call(r)),o}return async function(n,...i){var A,ee;const s=await fe(()=>T.find("WindowLayer","SelectCardWindow"),50,100);if(n)return e.apply(s,i);const a=s==null?void 0:s.confirm_btn,r=((A=s.Skill)==null?void 0:A.SelectCardCountWhenResponse)||1;if(!(a!=null&&a.textField)||!(r>1)||((ee=s.seat)==null?void 0:ee.index)!=N.mySeats[0])return !1;let{x:o,y:c,width:u,height:f,_labelColors:l,_labelPadding:d,textField:{fontSize:p,font:g,bold:W},constructor:y}=a,x=s.myFuncBtn||new y;return Object.assign(x,{label:"一键全选",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:u,height:f,labelSize:p,labelFont:g,labelBold:W,_labelColors:l,_labelPadding:d}),x.pos(o-1.2*u,c),s.myFuncBtn||(x.InitSkin("window_btn_style1_normal","window_btn_style1_over","window_btn_style1_down","window_btn_style1_disable"),s.addChild(s.myFuncBtn=x),s.myFuncBtn.on(Laya.Event.CLICK,s,e)),!0}})();function kt(t,e=null){var n,i;if(le.cardLabelSwitch){const s=(i=(n=T.gamescene.seatContainer)==null?void 0:n.selfSeatUi)==null?void 0:i.cardContainer;if(!s||!s.cardUis)return;s.cardUis.forEach((a,r)=>{try{if(!a)return;if(t=="新组合"){const o=a.Card.cardInfo.type+"-"+a.Card.cardInfo.Color;!H.spellSpace[3338].has(o)&&a.CardLabelDesc!="新组合"?a.AddCardLabel(t):H.spellSpace[3338].has(o)&&a.CardLabelDesc=="新组合"&&a.AddCardLabel();}if(t=="明牌"&&e.includes(a.Card.cardId)){let o=a.CardLabelDesc;a.AddCardLabel(o+t);}}catch(o){console.error(`更新卡牌${r}标签失败:`,o);}});}}const oi=(()=>{function t(n){var a,r;const i=((a=this==null?void 0:this.constructor)==null?void 0:a.name)=="CardUIContainer"?this:T.find("SceneLayer",Qe,"SelfSeatUi","cardContainer");if(!((r=i==null?void 0:i.cardUis)!=null&&r.length))return null;if(n===!0&&typeof(i==null?void 0:i.AllSelectHandCards)=="function")return i.AllSelectHandCards();if(n!==!1&&typeof(i==null?void 0:i.RAllSelectHandCards)=="function")return i.RAllSelectHandCards();let s=i.cardUis.filter(o=>o==null?void 0:o.activated).reduce((o,c)=>(o[c.selected?1:0].push(c),o),[[],[]]);n!==!0&&s[1].forEach(o=>o.CardUI_Click()),n!==!1&&s[0].forEach(o=>o.CardUI_Click());}const e=[function(){t.call(this,!0);},function(){t.call(this,void 0);},function(){t.call(this,!1);}];return async function(){var i;const n=await fe(()=>{var s;return ((s=T.gamescene)==null?void 0:s.SelfSeatUi)||T.find("SceneLayer",Qe,"SelfSeatUi")});if(!((i=n==null?void 0:n.cardContainer)!=null&&i.cardUis))return !1;if(e.forEach((s,a)=>{let r=n["myFuncBtn"+a]||T.get("SgsSpriteFilterBtn");Object.assign(r,{label:["全选","反选","取消"][a],width:40,height:29,labelSize:12,labelBold:!0,labelFont:"simsun",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",labelPadding:"0,0,0,0",labelColors:"#E4D5A0,#E4D5A0,#E4D5A0,#d0cece"}),n["myFuncBtn"+a]||(r.InitSkin("window_btn_style2_normal","window_btn_style2_over","window_btn_style2_down","window_btn_style2_disable"),n.addChild(n["myFuncBtn"+a]=r),n["myFuncBtn"+a].on(Laya.Event.CLICK,n.cardContainer,s));}),!n.OnStageResize.toString().includes("myFuncBtn")){const s=n.OnStageResize;Object.defineProperty(n,"OnStageResize",{value:function(){s.apply(this,arguments);let a=this.width-(this.constructor.handCardRight||252)+50;Array.from({length:3},(r,o)=>{var c;return (c=this["myFuncBtn"+o])==null?void 0:c.pos(a,33+27*o)});}}),n.OnStageResize();}return !0}})();async function li(){if(!S.patchGetOnlineSKinList){const t=T.get("GeneralSkinView").gsm.__proto__;t[vt]||(t[vt]=t.GetOnlineSKinList),Object.defineProperty(t,"GetOnlineSKinList",{value:function(e){let n=t[vt].apply(this,arguments);const i=G.vskinMap[e]?Array.from(G.vskinMap[e]).filter(o=>o!==e):[];if(i&&i.length){for(var s=[],a=0;a<i.length;a++){var r=this.getOnlineSKinListByGeneralId(i[a],!0,!0);r&&r.length&&(s=s.concat(r));}n&&n.length&&(n=n.concat(s),n=n.reduce((o,c)=>(o.some(u=>u.skinID===c.skinID)||o.push(c),o),[]));}if(n&&n.length)return n},configurable:!0}),S.patchGetOnlineSKinList=!0;}}async function Cn(){const t=Symbol("originalRelayout"),e=await fe(()=>{var i;return ((i=T.gamescene)==null?void 0:i.topMenu)||T.find("SceneLayer",Qe,"topMenu")});async function n(){const i=e==null?void 0:e.__proto__;!i||S.patchSkinBtn||(S.patchSkinBtn=!0,i[t]||(i[t]=i.ReLayoutBtnByScene),Object.defineProperty(i,"ReLayoutBtnByScene",{value:function(){i[t].apply(this,arguments),this.skinBtn&&(this.skinBtn.visible=!0);let s=SystemContext.gameWidth;for(let a=this.btnList.length-1;a>=0;a--){const r=this.btnList[a];r.visible&&(s=s-r.width+1,r.x=s);}this.btnStartX=s;},configurable:!0}));}!e||S.patchSkinBtn||(n(),S.patchSkinBtn=!0,e.ReLayoutBtnByScene());}const dt={res:{},sprite:void 0,async init(){var n,i;if((n=this.sprite)!=null&&n._parent)return this.sprite;const t=await fe(()=>T.find("BackgroundLayer"));if(!t||(this.sprite=this.sprite||t.myBg||T.get("SgsSprite"),!this.sprite))return !1;this.sprite.bg||(this.sprite.bg=T.get("SgsFlatImage"),this.sprite.addDrawChild(this.sprite.bg)),t.myBg=this.sprite,t.addChild(this.sprite),this.sprite.zOrder=100;const e=(i=this.sprite)==null?void 0:i.OnStageResize;return typeof e=="function"&&!e.toString().includes("func.apply")&&Object.defineProperty(this.sprite,"OnStageResize",{value:function(){e.apply(this,arguments);let s=Math.max(this.width?SystemContext.gameWidth/this.width:1,this.height?SystemContext.gameHeight/this.height:1);this.scale(s,s),this.pos(SystemContext.gameWidth/2,SystemContext.gameHeight/2);}}),!0},async setBg({url:t,type:e,width:n,height:i}=this.res){var s;if(t&&((s=this.sprite)!=null&&s._parent||await fe(()=>this.init()),!(!this.sprite||this.sprite.url==t))){if(Object.assign(this.sprite,{width:n,height:i}),this.clear(),e==0)this.sprite.bg.skin=t,this.sprite.bg.posInteger(-n/2,-i/2);else if(e!=1){let a,r,o,c;e==2?(o="sk",c=T.class("BaseEffect")):(o="json",c=T.class("BaseSpineEffect")),e!=3?(a=["beijing","xingxiang"],r="play"):(a=["beijing","daiji","qianjing"],r="DaiJi"),a.forEach(u=>{let f=new c;this.sprite.addChild(f),f.AutoReleaseRes=!0,f.InitEffect(`${t}/${u}.${o}`,r,!0),f.playEffect(),e==2&&f.size(n,i);});}this.sprite.OnStageResize(),this.sprite.url=t,Object.assign(this.res,{url:t,type:e,width:n,height:i}),await $e(S.userID+"::paperRes",this.res,!0);}},async switch(t){var e;if(t)return this.setBg();(e=this.sprite)==null||e.removeSelf();},async clear(t){var n;if(!this.sprite)return;for(this.res={},this.sprite.bg.skin=null;this.sprite.numChildren;)(n=this.sprite.removeChildAt(0))==null||n.destroy();if(!t)return;Nt(S.userID+"::paperRes",!0),this.sprite.removeSelf(),this.sprite=void 0;const e=await fe(()=>T.find("BackgroundLayer"));if(!e)return !1;delete e.myBg;}},Xt=(()=>async function(){var t,e,n;try{const i=await fe(()=>T.find("WindowLayer","BlessNewWindow"));if(!i||!i.blessTimeTxt||!i.tongxinTxt||!i.taskUI){console.error("UI实例或其属性未定义");return}const a=((e=(t=i.blessTimeTxt)==null?void 0:t.text)==null?void 0:e.split(`
`))[0],r=parseFloat(i.tongxinTxt.text)||0,o=parseFloat((n=i.taskUI.drawContaniers[0])==null?void 0:n.text)||0,c=o===0?0:Math.floor(r/o*100);i.blessTimeTxt.text=`${a}
出结率：${r} / ${o} = ${c}%`;}catch(i){console.error("执行 calTongXinJieLv 时发生错误:",i);}})(),ci=(()=>{async function t(){var o,c,u,f,l,d,p,g;if(!((o=this==null?void 0:this.skinImg)!=null&&o.skin))return null;let i=this.is169?594:this.isHor?536:350,s=this.is169?335:this.isHor?380:464,a=this.isDynamicPlay!=1?0:((u=(c=this.skinData)==null?void 0:c.skinBaseVo)==null?void 0:u.ResType)||0,r=((l=(f=this.skinData)==null?void 0:f.skinBaseVo)==null?void 0:l.DynamicSkinBigSkeletonUrl)||"";if(a==2?T.class("BaseEffect",!0,()=>{var W,y;return (y=(W=this.skinBigSps)==null?void 0:W.bgEffect)==null?void 0:y.constructor}):a>2&&T.class("BaseSpineEffect",!0,()=>{var W,y;return (y=(W=this.skinBigSps)==null?void 0:W.spineBg)==null?void 0:y.constructor}),a==1){r=(((p=(d=this.skinData)==null?void 0:d.skinBaseVo)==null?void 0:p.DynamicSkinBigUrl)||"")+".mp4",this.myFuncBtn0.off(Laya.Event.CLICK,this,t),this.myFuncBtn0.on(Laya.Event.CLICK,this,()=>e.call(this,r)),this.myFuncBtn0.label="保存视频";return}else if(a==3)this.skinData.skinBaseVo.NewSkinJudge?r=this.skinData.skinBaseVo.DynamicSkinBigSkeletonUrlNew(this.juexingState):a=4;else if(!(a==2||a==4)){let{response:W,url:y}=await n(this.skinImg.skin);if(y&&W.ok){r=y;let x=await W.blob(),A=await createImageBitmap(x);i=A.width,s=A.height;}}(g=this.Close)==null||g.call(this),console.warn({url:r,type:a,width:i,height:s}),Ke("壁纸设置成功，该壁纸会覆盖所有原生壁纸<br>如需停止使用该壁纸，可在设置中关闭","ac-tooltip",1e4,"green",null),setTimeout(()=>dt.setBg({url:r,type:a,width:i,height:s}),1e3);}async function e(i){var f,l,d,p,g,W,y;let s=((l=(f=this.skinData)==null?void 0:f.skinBaseVo)==null?void 0:l.name)||G.generalDict[(d=this.skinData)==null?void 0:d.generalID]||"三国杀皮肤",a=(g=(p=this.skinData)==null?void 0:p.skinBaseVo)==null?void 0:g.bigSkin,r=i&&typeof i=="string"?i:((W=this.skinImg)==null?void 0:W.skin)||"";if(!r)return;let[,o,c]=r.match(/\/([0-9]+)(_[0-9])?(\.png|\.mp4)/i).map(Number),u=((y=G.skinSP[o])==null?void 0:y.length)||{60500:3,62300:2,66100:2}[o]||(c?2:1);(u>1?Array.from({length:u},(x,A)=>"_"+(A+1)):[""]).forEach(async x=>{let A=r.replace(/(\/[0-9]+)(_[0-9])?(\.png|\.mp4)/i,"$1"+x+"$3"),{response:ee}=await n(A,a);if(ee!=null&&ee.ok){let v=await ee.blob(),E=URL.createObjectURL(v);Un(E,s+x),URL.revokeObjectURL(E);}});}async function n(i,s=!0){if(s){let r=i.replace("/big/static/","/big/bigSkin/"),o=await fetch(r);if(o.ok)return {response:o,url:r}}let a=await fetch(i);return a.ok?{response:a,url:i}:null}return async function(){const i=await fe(()=>T.find("WindowLayer","SkinInfoWindow")),s=i==null?void 0:i.skinFrame;if(!s)return !1;let{x:a,y:r,width:o}=s;return [t,e].forEach((c,u)=>{let f=i["myFuncBtn"+u]||T.get("SgsFlatButton");Object.assign(f,{label:["设为壁纸","保存图片"][u],width:166,height:50,labelSize:18,labelFont:"fzltchjw",labelPadding:"0,0,10,0",labelColors:"#FCE1AA,#FCE1AA,#FCE1AA,#FCE1AA",align:"center",valign:"middle"}),f.pos(a+o/2+(u-1)*166,r-50),i["myFuncBtn"+u]||(f.InitSkin("skinInfo_dynamicBtn_normal","skinInfo_dynamicBtn_over","skinInfo_dynamicBtn_down","skinInfo_dynamicBtn_disable"),i.contentSprite.addDrawChild(i["myFuncBtn"+u]=f),i["myFuncBtn"+u].on(Laya.Event.CLICK,i,c));}),!0}})(),di=(()=>{let t=!1;async function e(){var a,r,o;const i=await fe(()=>T.find(this==null?void 0:this.stateContainer,"SeatStateTextUI")).then(c=>Array.isArray(c)?c[0]:c),s=(a=i==null?void 0:i.__proto__)==null?void 0:a.SetSeatState;return typeof s!="function"||s.toString().includes("func.apply")?t=!1:(Object.defineProperty(i.__proto__,"SetSeatState",{value:function(c,u){var l;let f=["SeatStateBoTuPo"].includes((l=u==null?void 0:u.constructor)==null?void 0:l.name);f&&(c!=null&&c.IsSelf)&&(this.textField.fontSize=17,this.textField.color="#FFFFFF"),s.apply(this,arguments),f&&(this.textField.text=this.textField.text.replace("♠","♤").replace("♥","♡"));},configurable:!0}),["SeatStateBoTuPo"].includes((o=(r=i.seatState)==null?void 0:r.constructor)==null?void 0:o.name)&&(i.textField.fontSize=17,i.textField.color="#FFFFFF",i.textField.text=i.textField.text.replace("♠","♤").replace("♥","♡")),t=!0)}function n(i){const s=i==null?void 0:i.updateSeatState;if(typeof s!="function"||s.toString().includes("func.apply"))return !1;Object.defineProperty(i,"updateSeatState",{value:async function(a){t&&Object.defineProperty(this,"updateSeatState",{value:s,configurable:!0}),s.apply(this,arguments),!t&&a&&a.Opened&&!a.MultiFlag&&!(a.IsZhanFaState&&this.rogue1v1ZhanFaContainer)&&!a.NeedAnimate&&a.NeedLayout&&!(a.IsStateCard&&this.seat&&this.seat.IsSelf)&&(t=!0,e.call(this));},configurable:!0});}return async function(){var s,a,r;if(t)return !0;const i=(a=(s=T.gamescene)==null?void 0:s.seatContainer)==null?void 0:a.seatUIs;if(!(i!=null&&i.length))return !1;i.forEach(n),n((r=i[0])==null?void 0:r.__proto__);}})();async function ui(){var i;const t=await fe(()=>T.find("SceneLayer","","chatViewUI")||T.find("SceneLayer","","","chatViewUI"));if(typeof(t==null?void 0:t.showChatSettingView)!="function")return null;t.showChatSettingView();const e=(i=t.settingView)==null?void 0:i.__proto__,n=e==null?void 0:e.createChildren;if(typeof n!="function")return !1;if(e.wuxieQ=le.wuxieSwitch,Object.defineProperty(e,"set",{value:function(){le.wuxieSwitch=this.wuxieQ=!le.wuxieSwitch;},configurable:!0}),n.toString().includes("func.apply"))return !0;Object.defineProperty(e,"createChildren",{value:function(){n.apply(this,arguments);const s=this==null?void 0:this.roomCheck;if(!s)return;this.bgTet.height=this.height+=21;let{x:a,y:r,width:o,height:c,_labelColors:u,_labelPadding:f,textField:{fontSize:l,font:d,bold:p},constructor:g}=s;this.wuxieCheck=new g,Object.assign(this.wuxieCheck,{label:"显示技能读条",y:r+21*2,x:a,width:o,height:c,labelSize:l,labelFont:d,labelBold:p,_labelColors:u,_labelPadding:f}),this.wuxieCheck.InitSkin("cmn_checkbox_normal","cmn_checkbox_over","cmn_checkbox_dark","cmn_checkbox_disabled","cmn_checkbox_select_normal","cmn_checkbox_select_over"),this.addDrawChild(this.wuxieCheck),this.wuxieCheck.on(Laya.Event.CHANGE,this,this.set),this.wuxieQ&&(this.wuxieCheck.selected=!0);},configurable:!0});}async function fi(){const t=await fe(()=>T.find("SceneLayer","TableScene")),e=t==null?void 0:t.recordBtn;if(!(e!=null&&e.textField))return !1;let{x:n,y:i,width:s,height:a,constructor:r}=e,o=t.myFuncBtn||new r;return Object.assign(o,{width:s,height:30}),o.pos(31,46),t.myFuncBtn||(Object.assign(o,{label:"将池",labelFont:"fzltchjw",labelSize:18,sizeGrid:"15,15,15,15",labelColors:"#FBEDC3,#FBEDC3,#FBEDC3,#FBEDC3"}),o.InitSkin("vippoint_red_normal","vippoint_red_over","vippoint_red_down","vippoint_red_disable"),t.addChild(t.myFuncBtn=o),t.myFuncBtn.on(Laya.Event.CLICK,t,t.showJiangChi)),!0}const hi=(()=>{const t=["","鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"];function e(a,r){if(a.every(o=>r[o]>0))return a.map(o=>r[o]).reduce((o,c)=>o+c)}async function n(a){let r=await fetch("https://goka.top:8080/getHengFu").then(u=>u.json()).then(u=>u[7909701].map(f=>f.split(",").map(Number))),o=Object.fromEntries(a),c=new Map;for(;;){let u,f=0;for(let l of r){let d=e(l,o);d>f&&(u=l,f=d);}if(!f)break;u.forEach(l=>o[l]--),c.set(u,(c.get(u)||0)+1);}return Array.from(c.entries())}async function i(){var c,u;const a=((c=this==null?void 0:this.constructor)==null?void 0:c.name)=="NS2023ComposeWindow"?this:T.find("WindowLayer","NS2023ComposeWindow");if(!((u=a==null?void 0:a.itemList)!=null&&u.length))return !1;let r=a.itemList.map(f=>[f.baseData.FourID-79070,f.propCount]),o=await n(r);xi(`合成将消耗以下材料<br>${o.map(([f,l])=>f.map(d=>t[d]).join("")+"*"+l).join("<br>")}`,"一键合成横幅","合成",()=>{o.forEach(([f,l])=>{var d;for(let p=0;p<l;p++)(d=T.class("ActivityGameDataManager"))==null||d.SendNianCompose(f);});},"取消");}async function s(){var c,u;if(!S.nickname)return ce("请稍后再试");const a=((c=this==null?void 0:this.constructor)==null?void 0:c.name)=="NS2023ComposeWindow"?this:T.find("WindowLayer","NS2023ComposeWindow");if(!((u=a==null?void 0:a.chunlianList)!=null&&u.length))return !1;let r=a.chunlianList.filter(f=>{var l;return (l=f==null?void 0:f.countTxt)==null?void 0:l.text}).map(f=>{var l,d,p,g;return [(d=(l=f.data)==null?void 0:l.goodsInfo)==null?void 0:d.ItemID,parseInt((g=(p=f.countTxt.text).slice)==null?void 0:g.call(p,1))]});if(!r.length)return ce("请先合成春联字符");let o=0;r.forEach(([f,l])=>{var d;for(let p=0;p<l&&o++<10;p++)(d=T.class("ActivityGameDataManager"))==null||d.SendClientNianPresentReq(f,S.nickname);}),setTimeout(()=>Mt(!0),6e3);}return async function(){const a=await fe(()=>T.find("WindowLayer","NS2023ComposeWindow")),r=a==null?void 0:a.composeBtn;if(!(r!=null&&r.textField))return !1;let{x:o,y:c,width:u,height:f,_labelColors:l,_labelPadding:d,textField:{fontSize:p,font:g,bold:W},constructor:y}=r;return [s,i].forEach((x,A)=>{let ee=a["myFuncBtn"+A]||new y;Object.assign(ee,{label:["赠送给自己","合成横幅"][A],width:u,height:f,labelSize:p,labelFont:g,labelBold:W,_labelColors:l,_labelPadding:d}),ee.pos(o+u*[2.3,-3.5][A],c),a["myFuncBtn"+A]||(ee.InitSkin("red_small_btn_normal","red_small_btn_over","red_small_btn_down","red_small_btn_disable"),a.contentSprite.addDrawChild(a["myFuncBtn"+A]=ee),a["myFuncBtn"+A].on(Laya.Event.CLICK,a,x));}),!0}})();function pi(t){ht[t]?Bn(ht[t]):ht[t]=Ee,Pt(t);}async function Pt(t,e=[26,35,44,5,7]){const n=T.get("SevenDayResultWindow");n.uuid=t,Ee.req=new Set(e),setTimeout(()=>{Array.from(Ee.req,i=>n.sendReq(i)),T.del("SevenDayResultWindow",1e3);},0);}async function $t(){setTimeout(async()=>{var e,n;await ye(1e3);const t=T.get("KanShuWindow",!0);((e=t.jbpUserData)==null?void 0:e.Status)==0&&(t.onKanShuClick(),await ye(2e3),t.onUpdateAwardStatus(),await ye(1e3)),((n=t.jbpUserData)==null?void 0:n.Status)==1&&(t.autoClickAllPeach(),await ye(1e3),t.onShowEvent(),await ye(500),t.onShowEvent(),T.del("KanShuWindow",3e3));},0);}async function Yt(){var n;const t=T.get("ZhiGouMonthCardView");if(t.updateAllInfo(),(n=t.cardData)!=null&&n.bActive){t.getBtnClick();for(let i=0;i<4;i++)t.addItemClick(i);}T.del("ZhiGouMonthCardView",1e3);const e=T.get("NewWeekCardView");e.updateAllInfo(),e.getBtn._text=="领取"&&e.getBtnClick(),T.del("NewWeekCardView",1e3);}async function En(){var n,i,s,a,r;const t=T.get("GeneralOpenWindow"),e=((r=(a=(s=(i=(n=t==null?void 0:t.newView)==null?void 0:n.freeTimeTxt)==null?void 0:i._text)==null?void 0:s.split(":"))==null?void 0:a.map(Number))==null?void 0:r.reduce((o,c,u)=>o+c*Math.pow(60,2-u),0))*1e3||0;e?setTimeout(En,e):t.onNewOpenBag(8100101,3),T.del("GeneralOpenWindow",5e3),fe(()=>T.find("WindowLayer","GeneralOpenResultWindow")).then(o=>o==null?void 0:o.Close());}async function mi(){var n;const t=T.get("GuildDrumWindow",!1);t==null||t.initDrums(),t.updateItems(),await ye(1e3);let e=(n=t==null?void 0:t.itemList)==null?void 0:n.find(i=>i.leftTime);ae.loop("drum",()=>e==null?void 0:e.btnClick(),300,(e==null?void 0:e.leftTime)||0,()=>T.del("GuildDrumWindow",500));}async function gi(t=!1){try{await ye(1e4);const e=T.get("DailySignNewView",!1);if((e==null?void 0:e.signState)==2)for(let n=0;n<e.itemList.length;n++){let i=e.itemList[n].baseData.ID;i!=9020101&&i.toString().startsWith("90")&&t||e.itemList[n].type==1&&(e.itemList[n].OnSignClick(),ce("自动签到已完成<br>如需关闭，可在小抄设置中关闭"),await ye(500));}for(let n=0;n<(e==null?void 0:e.totalItemList.length);n++)e.totalItemList[n].type==3&&(e.totalItemList[n].OnSignClick(),await ye(500));if(T.del("DailySignNewView",1e4),!t){const n=T.get("WyqjBigView"),i=it(n).find(s=>{var a;return ((a=s==null?void 0:s.constructor)==null?void 0:a.name)=="WyqjSmallView"});i==null||i.Init(),i==null||i.onClickTiYanBtn(),T.del("WyqjBigView",3e3);}}catch(e){console.error(e);}}async function en(){const t=T.get("TaskDailyView");t.taskPanel.contentSp.drawContaniers.filter(r=>{var o;return (o=r==null?void 0:r.taskvo)==null?void 0:o.CanAward}).forEach(r=>r.onOpClick()),setTimeout(()=>{Array.from({length:3},(r,o)=>{var c;return (c=t.topDayTask)==null?void 0:c.onClickItem(o)}),t.manager.HasJDRewardRed&&t.onceRewardClick(),T.del("TaskDailyView",3e3);},3e3);const e=T.get("IndpdtPanelWindow2");e.enterFunc();const[n,i]=it(e,!0),s=it(n).find(r=>{var o;return ((o=r==null?void 0:r.constructor)==null?void 0:o.name)=="NewPlayerSignGiftView"});s==null||s.Init(),s!=null&&s.panel&&fe(()=>T.find(s.panel,"Box","NewPlayerSignGiftItem")).then(r=>{var o;return (o=r==null?void 0:r.filter(c=>{var u;return (u=c==null?void 0:c.taskUserVo)==null?void 0:u.CanAward}))==null?void 0:o.forEach(c=>c.onItemClick())}),i&&(i.Init(),i.clickTab(1),i.curView.taskPanel.contentSp.drawContaniers.filter(r=>{var o;return (o=r==null?void 0:r.taskvo)==null?void 0:o.CanAward}).forEach(r=>r.onOpClick()),setTimeout(()=>{i.clickTab(0),i.tabGroup.btnList[0].redPointIsShow&&i.curView.onClickGetAll();},3e3)),T.del("IndpdtPanelWindow2",1e4);const a=T.get("ActivityWindow");a.enterFunc(),it(a).flatMap(r=>{try{return it(r)}catch{return []}}).flatMap(r=>{try{return r.itemArr.map(o=>o.getAwardBtn)}catch{return []}}).filter(r=>r.visible).forEach(r=>r.onClick()),setTimeout(()=>{var r;return (r=T.find("WindowLayer","TaskReqRewardWindow"))==null?void 0:r.Close()}),ae.delay("VuplexWebView",()=>a.Hide(),500),T.del("ActivityWindow",3e3);}function it(t,e){var n,i,s;return ((s=(i=(n=t==null?void 0:t.tabGroup)==null?void 0:n.btnList)==null?void 0:i.filter(a=>e||a.redPointIsShow))==null?void 0:s.map(a=>{let r=t.viewStack.childInitDataList.findIndex(o=>o==a.value);return r<1&&(r=a.value),t.viewStack.selectedIndex=r,t.viewStack._childUIList[r]}))||[]}function tn(t=""){const e=T.get("GiftExchangeWindow");e.giftInput.text=t,e.getClicked(),T.del("GiftExchangeWindow",1e4);}const Mt=(()=>{async function t(){var i,s,a,r,o,c,u,f,l,d;const e=((i=this==null?void 0:this.constructor)==null?void 0:i.name)=="MailWindow"?this:T.find("WindowLayer","MailWindow")||T.get("MailWindow"),n=e==null?void 0:e.mailContentWindow;if(Array.isArray(n==null?void 0:n.winArr)){(a=(s=T.class("ActivityManager"))==null?void 0:s.AskRechargeInfoAgain)==null||a.call(s),await ye(1e3);for(const p of (((r=e.manager)==null?void 0:r.systemMailList)||[]).filter(({mid:g})=>g)){let g=p.mid;if(p.title=="道具过期提醒")(o=e.manager)==null||o.DeleteMail(g);else if(p.hasAttachMent){p.read||(c=e.manager)==null||c.ReadMail(g);let W=p.AttachmentType,y=((u=p.attachment.getStringKey("key"))==null?void 0:u[0])??"",x=p.fromUserName&&p.fromUserName!="系统未知好友"?p.fromUserName:"";if(W==1){let A=x?2:0;n.ChangeWindow(A,p),(f=n.winArr[A])==null||f.getBtnClick(),(l=n.winArr[A])==null||l.Close(),n.close();}else W==2&&((d=e.manager)==null||d.SendClientDbsGetgmawardReq(y,g,x));await ye(500),setTimeout(()=>{var A;p.read&&p.Geted&&((A=e.manager)==null||A.DeleteMail(g));},1e3);}}T.del("MailWindow",1e4);}}return async function(e){if(e)return t();const n=await fe(()=>T.find("WindowLayer","MailWindow")),i=n==null?void 0:n.feedbackBtn;if(!(i!=null&&i.textField))return !1;let{x:s,y:a,width:r,height:o,_labelColors:c,_labelPadding:u,textField:{fontSize:f,font:l,bold:d},constructor:p}=i,g=n.myFuncBtn||new p;return Object.assign(g,{label:"一键领取",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:r,height:o,labelSize:f,labelFont:l,labelBold:d,_labelColors:c,_labelPadding:u}),g.pos(s-1.05*r,a),n.myFuncBtn||(g.InitSkin("win_noborder_btn_normal","win_noborder_btn_over","win_noborder_btn_down","win_noborder_btn_disable","win_noborder_btn_over"),n.addChild(n.myFuncBtn=g),n.myFuncBtn.on(Laya.Event.CLICK,n,t)),!0}})(),nn=(()=>{let t=null,e=0,n="",i,s;const a=u=>{var f,l,d,p;return ((f=u==null?void 0:u.selloutTex)==null?void 0:f.visible)==!1&&((p=(d=(l=u==null?void 0:u.limitCount)==null?void 0:l._innerHTML)==null?void 0:d.includes)==null?void 0:p.call(d,"0/"))};function r(){t=null,document.querySelectorAll('.left input[type="checkbox"]').forEach(u=>{u.checked=!1;});}function o(u=900,f=50){ae.loop("seckill",()=>{var l;if(i=T.find("WindowLayer","ActivityWindow","","WelfareSeckillView")||T.get("WelfareSeckillView"),!((l=i==null?void 0:i.itemList)!=null&&l.length))return null;if(s=i.itemList.find((d,p)=>{var g;return p==t||((g=d.data)==null?void 0:g.goods_id)==t}),typeof(s==null?void 0:s.buyHpItemHandler)!="function")return !1;ae.set("seckill",c,e+50),ce(`秒杀连点器启动！
${n}`);},f,u/f>>0,()=>ce(`未找到秒杀面板！
连点器秒杀失败！`));}function c(u=300){s==null||s.buyHpItemHandler(),ae.loop("seckill",()=>{s==null||s.buyHpItemHandler(),a(s)||(r(),ae.clear("seckill"));},u);}return (u,f,l="",d=1e3)=>{var p;if(u===!1)r(),ae.clear("seckill"),ce("秒杀连点器已取消！");else if(u!==void 0&&u!==t){e=f||Date.now();let g=e-d,W=g-Date.now();t=u,n=l||((p=G.goodsID(u))==null?void 0:p.name)||"",W>1?(ce(`${(W/6e4).toFixed(1)}分钟后启动秒杀连点器！
${n}`),ae.set("seckill",o,g)):o();}return t}})();async function xi(t,e="",n,i,s="",a=null){var c,u;if(T.class("PromptLayer")||await fe(()=>T.class("PromptLayer"),1e3,1e3),!t)return null;class r{constructor(l,d,p=!1){Object.assign(this,{label:l,callBack:d,isCancel:p,thisObject:this,btnStyle:p?2:1,btnWidth:42,btnHeigth:29});}Clear(){this.thisObject=this.callBack=this.callBackParams=this.btnDescCallBack=this.btnGrayFunc=null,this.isCancel=this.btnGray=this.btnDescTime=!1;}}var o={content:t,title:e,canClose:!1,clickClose:!0,showIcon:!0,buttonArr:[new r(n,i)],Clear(){var f,l,d;(f=this.buttonArr)==null||f.forEach(p=>p==null?void 0:p.Clear()),(l=this.checkBoxData)==null||l.Clear(),(d=this.countdownData)==null||d.Clear();}};s&&o.buttonArr.push(new r(s,a,!0)),(u=(c=T.class("PromptLayer"))==null?void 0:c.GetInstance())==null||u.ShowConfirmWin(o);}async function sn(t={},e="",n=null){let i=await fe(()=>T.find("PromptLayer","ConfirmWindow"));if(!i)return null;Array.isArray(i)||(i=[i]),i.forEach(s=>{if(!(s!=null&&s.confirmData)||Object.entries(t).some(([r,o])=>s.confirmData[r]!=o))return;typeof n=="boolean"&&s.checkBox&&(s.checkBox.selected=n);let a=s.confirmData.buttonArr.find(r=>r.label==e);a.callBack&&a.thisObject&&a.callBack.apply(a.thisObject,a.callBackParams),s.confirmData.clickClose&&s.RemoveFromParent();});}function Dn(t="浩铭er",e=!1){var i;const n=T.get("SzxyHelpWin");return n.enterWindow(t),(i=n==null?void 0:n.btnHelp)!=null&&i.enabled?(n.onClickHelp(),T.del("SzxyHelpWin"),!0):(e&&ce("助力已完成，非常感谢！"),T.del("SzxyHelpWin"),!1)}const qe=0,Ce=65280,We=65282;var Tn="jsjiami.com.v7";function ze(t,e){const n=nt();return ze=function(i,s){i=i-283;let a=n[i];if(ze.zdEtZF===void 0){var r=function(l){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",g="";for(let W=0,y,x,A=0;x=l.charAt(A++);~x&&(y=W%4?y*64+x:x,W++%4)?p+=String.fromCharCode(255&y>>(-2*W&6)):0)x=d.indexOf(x);for(let W=0,y=p.length;W<y;W++)g+="%"+("00"+p.charCodeAt(W).toString(16)).slice(-2);return decodeURIComponent(g)};const f=function(l,d){let p=[],g=0,W,y="";l=r(l);let x;for(x=0;x<256;x++)p[x]=x;for(x=0;x<256;x++)g=(g+p[x]+d.charCodeAt(x%d.length))%256,W=p[x],p[x]=p[g],p[g]=W;x=0,g=0;for(let A=0;A<l.length;A++)x=(x+1)%256,g=(g+p[x])%256,W=p[x],p[x]=p[g],p[g]=W,y+=String.fromCharCode(l.charCodeAt(A)^p[(p[x]+p[g])%256]);return y};ze.Diplav=f,t=arguments,ze.zdEtZF=!![];}const o=n[0],c=i+o,u=t[c];return u?a=u:(ze.Vzrebh===void 0&&(ze.Vzrebh=!![]),a=ze.Diplav(a,s),t[c]=a),a},ze(t,e)}function nt(){const t=function(){return [Tn,"qnyjghsCYjMiamViQ.McomU.IWv7fpeISKGkxSPE==","fmo9W7FcVmogWQD3pYtcRLJdUvO","kmkVbmkwl8oGCmoTjG","W5qqeCoyW5HcWRxdI27dN8o6","sCo0FY5YWQWbsmoQs8oAna","WRJcHr7cVaXItJJdPg7cJh4","W4JcNdZcTYzzE8or"].concat(function(){return ["WO4Mk8oUW5xdMWOK","p1RdHuVdHmo3BCoklqtdIH3cGG","ptuCWRmaW6b9WRxdRW","E0RcISoOeZpdPffRWOCG","uGxdMcmTzmk/B0VdPmoqWQ3cHa","WOhcOmkabCoaW49GuhXiW4W","sSokp8khuHRcLXO","W7BdQIZcRSoSmSoDWRbwymkR"].concat(function(){return ["WQfBWQZcMhxcK8knrJ0clG","ztBdS8oqW6FcLmkyW77cTZ8bcG","W6VcHmoEWOZcH8o4WROFWP/cVSkD","WRqDW57cNCkgifzgW5xdPmksv3e","yHr+ESoGwmo2CmoadLCYWQa"]}())}())}();return nt=function(){return t},nt()}((function(t,e,n,i,s,a,r){return t=t>>1,a="hs",r="hs",function(o,c,u,f,l){const d=ze;f="tfi",a=f+a,l="up",r+=l,a=u(a),r=u(r),u=0;const p=o();for(;[]&&--i+c;)try{f=parseInt(d(295,"axVt"))/1+-parseInt(d(283,"u5Ld"))/2+parseInt(d(284,"bC)X"))/3*(parseInt(d(296,"e$!x"))/4)+parseInt(d(289,"oAX8"))/5*(parseInt(d(287,"[J0P"))/6)+-parseInt(d(301,"OylK"))/7+-parseInt(d(288,"66pA"))/8*(parseInt(d(285,"c3Vy"))/9)+-parseInt(d(286,"tVp$"))/10*(-parseInt(d(298,"pRYO"))/11);}catch{f=u;}finally{if(l=p[a](),t<=i)u?s?f=l:s=l:u=l;else if(u==s.replace(/[yVhgIeMYCPkqWQxfGKpSEnU=]/g,"")){if(f===c){p["un"+a](l);break}p[r](l);}}}(n,e,function(o,c,u,f,l,d,p){return c="split",o=arguments[0],o=o[c](""),u="reverse",o=o[u]("v"),f="join",o[f]("")})}))(376,849340,nt,190),nt&&(Tn=nt);const S={userID:0,account:"",nickname:"",inviteName:"",curOfficerLv:1,v:![],UsedGeneralSkinID:{UsedGeneralSkinID:{}},isFrameAdd:![],goods:[],lotteries:[],closeIframe:![],trialTime:0,autoBotStatus:30,autoBotInfinite:![],guildVIP:{},recGoods:{}};let Dt=[["padding","PADDING",0],["skinSwitch","SKIN_SWITCH",!1],["generalSwitch","GENERAL_SWITCH",!1],["skinStateSwitch","SKIN_STATE_SWITCH",!0],["skinStateBlockSwitch","SKIN_STATE_BLOCK_SWITCH",!1],["skinPaperSwitch","SKIN_PAPER_SWITCH",!0],["allPaperSwitch","ALL_PAPER_SWITCH",!1],["cardBackSwitch","CARD_BACK_SWITCH",!1],["seatUISwitch","SEAT_UI_SWITCH",!0],["autoSignSwitch","AUTO_SIGN_SWITCH",!1],["autoSignSkipSwitch","AUTO_SIGN_SKIP_SWITCH",!1],["autoInviteSwitch","AUTO_INVITE_SWITCH",!1],["autoDrumSwitch","AUTO_DRUM_SWITCH",!1],["autoWuJiangSwitch","AUTO_WUJIANG_SWITCH",!1],["autoKanShuSwitch","AUTO_KANSHU_SWITCH",!1],["autoYueKaSwitch","AUTO_YUEKA_SWITCH",!1],["skipWindowSwitch","SKIP_WINDOW_SWITCH",!1],["skipADSwitch","SKIP_AD_SWITCH",!0],["CDKNotificationSwitch","CDK_NOTIFICATION_SWITCH",!0],["killEffectSwitch","KILL_EFFECT_SWITCH",!1],["wuxieSwitch","WUXIE_SWITCH",!1],["rogueWallpaperSwitch","ROGUE_WALLPAPER_SWITCH",!1],["cardLabelSwitch","CARD_LABEL_SWITCH",!0]];const le=new Proxy(Object.fromEntries(Dt.map(([t,e,n])=>[t,Pe(e,n)])),{set:function(t,e,n){let i=Object.fromEntries(Dt)[e]??e;$e(i,n);let s={};return s.username=S.userID,s.settingKey=e,s.value=n,Ht(ti(s),300),t[e]=n,e=="padding"&&(window.padding=n),!0}}),vt=Symbol("GetOnlineSKinList"),F={seatWidthPercent:.3,firstUpdateSeatUI:!1,scoreFrameTotal:10,scoreFrameIndex:0,paddingLeft:10,paddingRight:15,paddingTop:30,paddingBottom:0,paddingLeftTopExtra:0,selectStarted:!1,leftRightTop:20,stackCardAreaHeight:0,stackCardAreaY:0,MAX_SEAT_WIDTH:149,inPopFirstTarget:!1,unscaledWidth:146,unscaledHeight:172,MAX_HEIGHT:180,MAX_WIDTH:150,scale:1,selfSeatUiUnscaledHeight:178,rightBarWidth:221,seatUIs:[],cities:[]},G={},Ee={};function Bn(t){Object.assign(Ee,t);}const ht=Pe("gameRecord",{}),Le={},ae={tasks:{},shift:0,overdue:!0,async now(){if(!this.overdue)return Date.now()+this.shift;this.overdue=!1,this.delay("timer",()=>{this.overdue=!0;},18e5);const t=["https://worldtimeapi.org/api/timezone/Etc/UTC","https://timeapi.io/api/Time/current/zone?timeZone=UTC"];for(const e of t)try{const n=await fetch(e);if(!n.ok){console.error(`Error fetching time from ${e}: ${n.statusText}`);continue}const i=await n.json();let s;return i.utc_datetime?s=new Date(i.utc_datetime).getTime():i.dateTime&&(s=new Date(i.dateTime).getTime()),this.shift=s-Date.now(),s}catch(n){console.error(`Error fetching time from ${e}:`,n);continue}return ce("使用当前电脑时间"),Date.now()+this.shift},loop(t,e,n,i=1/0,s){this.clear(t);let a=setInterval(()=>{e(),--i<=0&&(this.clear(t),typeof s=="function"&&s());},n);return this.tasks[t]={intervalId:a,callback:e},this.tasks[t].intervalId},delay(t,e,n){this.clear(t);let i=setTimeout(()=>{this.clear(t),e();},n);return this.tasks[t]={timeoutId:i,callback:e},this.tasks[t].timeoutId},set(t,e,n,i=18e5){(async function s(){this.clear(t);const a=Date.now(),r=(n??a)-a;if(r>1){let o=setTimeout(s.bind(this),r<i?r:i);this.tasks[t]={timeoutId:o,callback:e};}else e();}).call(this);},trigger(t){if(!this.tasks[t])return null;let{timeoutId:e,callback:n}=this.tasks[t];return e&&(clearTimeout(e),delete this.tasks[t]),typeof n!="function"?!1:(n(),!0)},clear(t){t?Array.isArray(t)||(t=[t]):t=Object.keys(this.tasks),t.filter(e=>this.tasks[e]).map(e=>{if(!this.tasks[e])return null;let{intervalId:n,timeoutId:i}=this.tasks[e];return i?clearTimeout(i):n&&clearInterval(n),delete this.tasks[e],e});}},H=new Proxy({turn:0,round:0,phase:0,currentID:void 0,isGameStart:!0,isPassed:!1,spellSpace:{},domContainer:["temp","phase","round","turn","game","long"].reduce((t,e,n)=>(t[e]=t[n]=[],t),{}),end(t){(this.isGameStart&&!this.isPassed||t===!1)&&(this.isGameStart=!1,this.isPassed=!0,F.seatUIs=[],F.friendGeneral=0,jt(null),T.reset(),document.querySelectorAll(".mizhu").forEach(e=>e.style.display="none"),console.warn("游戏已结束！")),t&&this.isPassed&&(this.isPassed=!1,this.turn=0,this.round=0,this.phase=0,this.currentID=void 0,this.spellSpace={},Pt(S.userID),N.reset(),console.warn("游戏已重置！游戏即将开始！"),Ze(()=>T.init()));},ready(t){this.end(!0),N.cardList=t;let e=G.cardIDsOrder.filter(i=>t.includes(i)),n=e.concat(t.filter(i=>!e.includes(i))).filter(Boolean);me.init(n),ne.init(n,"2-255"),N.isGuoZhan=t.includes(1150),N.isDouDiZhu=t.includes(13005),N.isShanHeTu=t.includes(20100),N.isShanHeTu&&(Le.sanBanFu=0),Vi(),N.isShanHeTu&&le.rogueWallpaperSwitch&&Cn(),[3338].forEach(i=>delete this.spellSpace[i]),console.warn("牌堆初始化完成");},start(){this.isGameStart||!N.size||(this.isGameStart=!0,this.isPassed=!1,console.warn("游戏开始！["+N.seatIDs+"] > "+N.mySeats),Ui(),Fi(N.size),ne.draw());},enter(t,e,n){var i,s,a,r,o,c,u,f,l,d,p;if(t>0)this.turn=t,this.round=0,this.clear("turn"),t==1&&(this.clear("game"),this.start());else {e==0?(this.currentID=n,this.round++,this.phase=0,[7011,3090,2143,3271].forEach(y=>delete this.spellSpace[y]),document.getElementById("suit").innerText="",document.getElementById("boTu").innerText="",document.getElementById("result").innerHTML="",ne.draw("2-255"),this.clear("round"),S.autoBotSwitch===!0&&T.limit>0&&((r=(a=(s=(i=T.gamescene)==null?void 0:i.topMenu)==null?void 0:s.areaServerLabel)==null?void 0:a.text)!=null&&r.includes("身份"))&&(this.currentID==((d=(l=(f=(u=(c=(o=T.gamescene)==null?void 0:o.seatContainer)==null?void 0:c.seatUIs)==null?void 0:u.filter(y=>y.seat.currentHp>0))==null?void 0:f.map(y=>y.seat.index))==null?void 0:l.slice(-1))==null?void 0:d[0])?T.auto(3):this.currentID!=N.mySeats[0]&&T.auto(!0))):this.phase++,this.clear("phase");let g=document.getElementById("phrase"),W=parseInt((p=g.innerText.match(/\(([0-9])\)$/))==null?void 0:p[1]);this.phase==W?g.innerText=g.innerText.replace(/(回合)?(.{2,3})(阶段)? ?\(([0-9])\)$/,`$2>${["开始时","准备","判定","摸牌","出牌","弃牌","结束","结束时","结束后"][e]}($4)`):g.innerText=`${["回合开始时","准备阶段","判定阶段","摸牌阶段","出牌阶段","弃牌阶段","结束阶段","回合结束时","回合结束后"][e]} (${this.phase})`;}},clear(t,e,n){let i=this.domContainer[t];for(let s=i.length-1;s>=0;s--)n===void 0&&e!==i[s].SpellID&&i[s].count--,(!(i[s].count>0)||e===i[s].SpellID&&n===i[s].SeatID)&&(i[s].element.remove(),i.splice(s,1));}},{ownKeys(t){return Reflect.ownKeys(t.spellSpace)},getOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t.spellSpace,e)},deleteProperty(t,e){return Reflect.deleteProperty(t.spellSpace,e)},get(t,e,n){return e in t?t[e]:Reflect.get(t.spellSpace,e,t.spellSpace)},set(t,e,n,i){return e in t?t[e]=n:Reflect.set(t.spellSpace,e,n,t.spellSpace),!0}}),N={cardList:[],seatUIs:[],seatIDs:[],orderIDs:[],mySeats:[],generals:{},shift:0,isShanHeTu:!1,isGuoZhan:!1,isDouDiZhu:!1,size:void 0,firstID:void 0,seatPos(t=8){return {0:[],1:[0],2:[0,4],3:[0,3,5],4:[0,1,4,7],5:[0,1,3,5,7],6:[0,1,3,4,5,7],7:[0,1,2,3,5,6,7],8:[0,1,2,3,4,5,6,7]}[t]},dealCard:()=>null,reset(){this.cardList=[],this.seatUIs=[],this.seatIDs=[],this.orderIDs=[],this.mySeats=[],this.generals={},this.shift=0,this.isShanHeTu=!1,this.isGuoZhan=!1,this.isDouDiZhu=!1,this.size=void 0,this.firstID=void 0,this.dealCard=(t,e)=>{t=parseInt(t),this.orderIDs.includes(t)||(this.firstID===void 0&&(this.firstID=t,console.warn("[PubGsCMoveCard]先手位置:"+t)),this.orderIDs.push(t),e>0&&!this.mySeats.includes(t)&&(this.mySeats.length?this.mySeats.push(t):this.setMyID(t)),this.update(!1,this.orderIDs)),this.orderIDs.length==this.size&&(this.dealCard=()=>null);};},getOrder(t){var i;if(this.seatUIs.length)return (i=this.seatUIs.find(s=>s.seatID==t))==null?void 0:i.order;let e=this.seatIDs.indexOf(this.firstID??this.seatIDs[0])%this.size,n=this.seatIDs.indexOf(parseInt(t));if(n!==-1)return (n-e+this.size)%this.size},getIndex(t){if(this.seatUIs.length)return this.seatUIs.findIndex(s=>s.seatID==t);let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,n=this.seatIDs.indexOf(parseInt(t));if(n<0)return;let i=(n-e+this.size)%this.size;return this.seatPos()[i]},getID(t){var s;if(this.seatUIs.length)return (s=this.seatUIs[this.seatPos().indexOf(parseInt(t))])==null?void 0:s.seatID;let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,n=this.seatPos().indexOf(parseInt(t));if(n<0)return;let i=(n+e+this.size)%this.size;return this.seatIDs[i]},sequence(t){let e=this.seatIDs.indexOf(t);return e<0?[]:this.seatIDs.slice(e).concat(this.seatIDs.slice(0,e))},update(t,e=this.orderIDs){if(e=e.slice(),e.length>this.seatIDs.length||e.length==this.seatIDs.length&&t!==!1)this.seatIDs=e,this.size=e.length;else if(t){for(let n=e.length;n<this.size;n++)e.push(((e[n-1]??-1)+1)%this.size);this.seatIDs=e,this.size=e.length;}this.draw();},fromUI(){var e,n,i,s,a,r;let t=(s=(i=(n=(e=T.gamescene)==null?void 0:e.seatContainer)==null?void 0:n.seatUIs)==null?void 0:i.map(o=>o.seat))==null?void 0:s.filter(o=>!o.isHide);(a=t==null?void 0:t.filter(o=>o.fixedViewId))!=null&&a.length&&(this.seatUIs=t.map(o=>({seatID:o.index,order:o.fixedViewId-1,seat:o})),this.size=this.seatUIs.length,this.firstID=((r=this.seatUIs.find(o=>o.order==0))==null?void 0:r.seatID)??this.firstID,this.seatIDs=this.seatUIs.map(o=>o.seatID),this.setMyID(this.seatUIs[0].seatID),this.draw());},setMyID(t){if(t!==void 0&&this.mySeats[0]!==t){let e=this.mySeats.indexOf(t);e>-1&&this.mySeats.splice(e,1),this.mySeats.unshift(t);}},setGeneral(t,e,n=0,i=!1){if(!G.generalDict[e])return;this.generals[t]||(this.generals[t]=Array(this.isGuoZhan?2:1).fill(0)),this.generals[t][n]=e;let s=this.getOrder(t),a=document.getElementById(s+1);a&&a.style.setProperty("--No-content",`"${N.name(t)}"`);},find(t,e,n=!1){var i;return Array.isArray(e)||(e=[e]),(i=this.generals[t])==null?void 0:i.find(s=>e.find(a=>{var r;return n?(r=G.skinMap[s])==null?void 0:r.has(a):s==a}))},name(t,e=!0){var s,a,r,o;let n=this.getOrder(t);if(n===void 0)return "";let i=((s=this.generals[t])==null?void 0:s.length)>1?this.generals[t].map(c=>G.generalDict[c]):[(o=(r=(a=this.seatUIs.find(c=>c.seatID==t))==null?void 0:a.seat)==null?void 0:r.general)==null?void 0:o.CardName];return e===null&&(i==null?void 0:i.length)!=1&&(i=[]),(i!=null&&i.some(Boolean)?i.map(c=>c||"暗").join("丨"):"一二三四五六七八"[n]+"号位")+(e?"丨"+"一二三四五六七八"[n]:"")},draw(){this.seatIDs.forEach(t=>{let e=this.getOrder(t),n=document.getElementById(e+1);if(!n)return;let i=N.name(t);n.style.setProperty("--No-content",`"${i}"`);}),jt();}},me=new Proxy({name:{},color:Array.from({length:7},()=>new Set),number:Array.from({length:14},()=>new Set),query:new Set,select:{name:new Set,color:new Set,number:new Set},cards:[],QCARD:class{constructor(t,e,n,i,s){this.id=t,this.name=e,this.color=n,this.number=i,this.type=s,this.key=-1;}plot(t){let e=this._button;if(!e){if(e=this._button=document.createElement("button"),e.className=this.color<=2?"shoupai R":"shoupai",!this.id)return e;e.id="Qcard"+this.id,e.innerHTML=`<span>${An(this.color)+Me(this.number)}</span><br>${this.name.substring(0,2)}`;}return (this.key!==t||t==1)&&(this.key=t,e.style.backgroundColor=t===0?"":t===1?"cyan":"#23201d",e.title=t===0?"牌堆":t===2?"弃牌堆":se.findKZ(this.id).zones.map(n=>{let[i,s,a]=n.split("-").map(r=>parseInt(r));return ne.name(s,i,null,a,a)}).join("/")),e}},[Symbol.iterator]:function*(){for(let t of this.cards)t!==void 0&&(yield t);},init(t){this.name={},this.color=Array.from({length:7},()=>new Set),this.number=Array.from({length:14},()=>new Set),this.type=Array.from({length:4},()=>new Set),this.query=new Set,this.select={name:new Set,color:new Set,number:new Set},this.cards=[],t.forEach(e=>{let{name:n,color:i,number:s,type:a}=oe[e];n in this.name||(this.name[n]=new Set),this.name[n].add(e),this.color[i].add(e),this.number[s].add(e),this.type[a].add(e),i==3&&s>=2&&s<=9&&this.number[0].add(e),n.match(/^(冰|火|雷)?杀$/)&&this.color[Math.ceil(i/2)+4].add(e),this.cards[e]=new this.QCARD(e,n,i,s,a);});},onquery(t,e){if(this.select[t].delete(e)){if(this.select[t].size){Array.from(this[t][e]).forEach(n=>this.query.delete(n)),this.draw();return}}else this.select[t].add(e);this.query=["name","number","color"].filter(n=>this.select[n].size).reduce((n,i)=>new Set(Array.from(this.select[i]).flatMap(s=>Array.from(this[i][s])).filter(s=>!n.size||n.has(s))),new Set),this.draw();},queryone(t,e){this.query=new Set(Array.from(this[t][e])),this.draw();},draw(){const t=document.getElementById("cardTypeDetail");if(t.innerHTML="",this.query.size==0)return;let e=new Set(ne.unknown),n=new Set(ne.qipai),i=G.cardIDsOrder.filter(s=>this.query.has(s)).reduce((s,a)=>(e.has(a)?s[0].push(a):n.has(a)?s[2].push(a):s[1].push(a),s),[[],[],[]]);[0,1,2].forEach(s=>i[s].forEach(a=>t.appendChild(this.cards[a].plot(s))));}},{get(t,e,n){return typeof e=="number"||typeof e=="string"&&!isNaN(e)?t.cards[e]:Reflect.get(...arguments)}}),Z=class Z{static label(e){if(Z.groups.has(e))return Z.groups.get(e);const n=Z.LABELs.shift();return Z.groups.set(e,n),n}constructor(e,n=null,i="12-255",s=null,a=null){var r;this._key=e,this.zone=i,this.id=n??((r=this.next)==null?void 0:r.id)??this.key,this.next=s,this.prev=a,Z.nodes.has(e)||Z.nodes.set(e,new Set),Z.nodes.get(e).add(this);}get head(){let e=this;for(;e.prev;)e=e.prev;return e}get end(){let e=this;for(;e.next;)e=e.next;return e}get key(){return this._key}set key(e){this._key!=e&&(Z.nodes.get(this._key).delete(this),this._key=e,Z.nodes.has(e)||Z.nodes.set(e,new Set),Z.nodes.get(e).add(this));}static get(e){return Z.nodes.has(e)?Array.from(Z.nodes.get(e)):[]}static init(e,n){return Z.key=0,Z.nodes=new Map,Z.groups=new Map([[0,"?"]]),Z.LABELs=Array.from({length:62},(i,s)=>String.fromCharCode(s+65)),e.map(i=>new Z(0,i,n))}toString(){return this.next?this.prev?this.key+"<"+this.next.toString():this.zone+":"+this.key+"<"+this.next.toString():"["+this.id+"]"+(this.key>0?oe[this.id].ncn:"？")}plot(e){var i;if(this.key<0&&this.key%2==0&&this.next)return this.next.plot(e);let n=this._button;return n||(n=this._button=document.createElement("button"),n.className="shoupai"),n.disabled=this.key<=0&&this.key%2==0,(e||this.key!=((i=n==null?void 0:n.dataset)==null?void 0:i.key)||this.key<=0&&Z.label(this.key)!=n.innerHTML)&&(n.className="shoupai",n.id="card"+this.id,n.dataset.key=this.key,this.key>0?(n.classList.remove("G"),oe[this.id].color>2?n.classList.remove("R"):oe[this.id].color>0&&n.classList.add("R"),n.style.color="",n.style.fontSize="",n.title=new ne("unknown").cards.has(this)?Z.findKZ(this.id).zones.map(s=>{let[a,r,o]=s.split("-").map(c=>parseInt(c));return ne.name(r,a,null,o,o)}).join("/"):oe[this.id].ncn,n.innerHTML=`<span>${oe[this.id].cn}</span><br>${oe[this.id].name.substring(0,2)}`):(n.classList.add("G"),n.innerHTML="？")),n}swap(e){if(!e||e==this)return this;for([this.key,e.key]=[e.key,this.key],[this.id,e.id]=[e.id,this.id],[this.next,e.next]=[e.next,this.next],this.next&&(this.next.prev=this),e.next&&(e.next.prev=e);e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;for(e.plot(!0),ne.draw(e.zone),e=this;e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;return e.plot(!0),ne.draw(e.zone),this}create(e){const n=new Z(this.key,this.id,this.zone,this.next,this);return this.key=e,this.next&&(this.next.prev=n),this.next=n,this}delete(){let e=!1;if(this.next){let n=this.next;return this.key=n.key,this.id=n.id,this.next=n.next,n.next?n.next.prev=this:new ne("unknown").cards.delete(n)&&(e=!0,this.prev&&new ne("unknown").cards.add(this)),Z.nodes.get(n.key).delete(n),e}else return this.key===0?(this.key=this.id,_t(this.id,this.key),!0):null}destroy(e){let n=!1,i=this.key;for(;i<0;)this.delete()&&(n=!0),Z.unpack(i)&&(n=!0),i=this.key;return this.key!=e&&(this.key=e??this.id,_t(this.id,this.key)),this.prev?Z.unpack(this.prev.key):(this.plot(!0),ne.draw(this.zone)),n&&ne.draw("unknown"),this}identify(e,n=null){if(n!==null&&console.count("REidentify"+n+">"+this),this.id==e)return this.key>0?this:(n&&(this.end.id=n),this.destroy(),this);let i,s=new Set([this.key]),a=[[this.key,[]]];for(;a.length>0;){let[r,o]=a.shift();if(i=Z.find(r,e),i){o.concat(i).reduce((c,u)=>c.swap(u).next,this);break}for(let c of Z.get(r).filter(u=>u.next))s.has(c.next.key)||(s.add(c.next.key),a.push([c.next.key,o.concat(c)]));}if(i){if(n){let r=this;for(r.id=n;r.next;)r=r.next,r.id=n;}return this.destroy(),this}else {if(e>0)return this.identify(0,e);console.error("identify error: "+(e>0?e:n)+">"+this);}return null}static move(e,n){Array.isArray(e)||(e=[e]);let{turn:i,round:s,phase:a}=H;return e==null||e.forEach(r=>Object.assign(r,{zone:n,turn:i,round:s,phase:a})),Array.from(new Set(e==null?void 0:e.map(r=>r.key))).filter(r=>r<=0).map(r=>Z.unpack(r)).length?ne.draw("unknown"):Array.from(new Set(e==null?void 0:e.map(r=>r.key))).filter(r=>r>0&&me.query.has(r)).forEach(r=>{me[r].plot(n=="2-255"?2:1);}),e}static pack(e,n,i){if(!((e==null?void 0:e.length)>1&&(e!=null&&e.every(r=>r))))return;let s=new Set(e.map(r=>r.key));if(s.size===1)return [...s][0];Z.key=Z.key-1;let a;if(i){if(new Set(e.map(c=>c.head.zone)).size===1)return null;let o=Array.from(Z.nodes.keys()).filter(c=>c<0);for(let c=0;c>=Z.key;c--)if(!(o.includes(c*2-1)||o.includes(c*2-2))){a=c*2-i;break}o.filter(c=>c>a).sort((c,u)=>c-u).forEach(c=>{Z.get(c).forEach(u=>{u.key=u.key-2,u.head.plot(!0);});}),a=-i;}else a=Z.key*2-(n?2:1);return e.forEach(r=>{r.create(a),new ne("unknown").cards.delete(r),n||new ne("unknown").cards.add(r.end);}),ne.draw("unknown"),a}static unpack(e){if(e>0)return !0;const n=Z.get(e);let i=new Set(n.map(a=>{var r;return (r=a.next)==null?void 0:r.key})),s=new Set(n.map(a=>a.head.zone));if(n.length===1||!s.has("1-255")&&(s.size===1||i.size===1&&e!==0)){Z.groups.has(e)&&(Z.LABELs.unshift(Z.groups.get(e)),Z.groups.delete(e));let a=n.map(r=>r.delete()).some(Boolean);return Array.from(new Set(n.filter(r=>r.prev).map(r=>r.prev.key))).forEach(r=>Z.unpack(r)),n.filter(r=>!r.prev).forEach(r=>r.plot(!0)),Array.from(s).forEach(r=>ne.draw(r)),a}else return !1}static find(e,n){let i=Z.get(e).find(s=>s.id==n);if(i===void 0&&e!=0){let s=Z.get(0).find(a=>a.id==n);s&&(i=Z.get(e).find(a=>a.end.key==0),i!==void 0&&s.swap(i.end));}return i}static findIDs(e,n=!1,i=new Set,s=new Set){return s.add(e),e>0||!n&&e==0?i.add(e):(n||e%2!=0)&&Z.get(e).forEach(a=>{if(a.next){let r=a.next.key;s.has(r)||Z.findIDs(r,n,i,s);}else n&&i.add(a.id);}),Array.from(i)}static findKZ(e,n=!1,i=new Set,s=new Set){let a=e;return !(a instanceof Z)&&e>0&&(a=Z.get(e)[0]),a instanceof Z||(a=Z.get(0).find(r=>r.id==e)),a instanceof Z&&(!n&&a.key==0?(s.add(""),i.add(0)):(s.add(a.head.zone),i.has(a.key)||(i.add(a.key),(a.key<0||n&&a.key==0)&&Z.get(a.key).forEach(r=>{r!=a&&Z.findKZ(r,n,i,s);})),a.prev&&Z.findKZ(a.prev,n,i,s))),{keys:Array.from(i),zones:Array.from(s)}}};Ye(Z,"key",NaN),Ye(Z,"nodes",new Map),Ye(Z,"groups",new Map([[0,"?"]])),Ye(Z,"LABELs",Array.from({length:50},(e,n)=>String.fromCodePoint(n<20?9312+n:n<35?12881-20+n:12977-35+n)));let se=Z;const Se=class Se{static get paidui(){return Array.from(new Set(Array.from(se.get(0),({id:e})=>e).concat((Se.obj["1-255"]??[]).map(({id:e})=>e))))}static get qipai(){return (Se.obj["2-255"]??[]).filter(({key:e})=>e>0).map(({id:e})=>e)}static get unknown(){return Array.from(se.get(0),({id:e})=>e)}static shoupai(e){return (Se.obj["5-"+e]??[]).filter(({key:n})=>n>0).map(({id:n})=>n)}constructor(e,n=5,i=Ce,s=null,a=null,r=null){var o;typeof e=="number"?(this.id=e,this.zone=n,this.id==0&&[0,1,2,3,9,12].includes(this.zone)&&(this.id=255),this.zone==9&&(this.zone=1),this.zone==4&&(this.id=this.id+"-"+(r||a||0)),this.zone==8&&(this.id="-"+(a||r||0)),this.zoneID=this.zone+"-"+this.id):typeof e=="string"?[this.zoneID,this.zone,this.id]=e.match(/(.*?)-(.*)/)??[e,e,""]:(o=e==null?void 0:e.every)!=null&&o.call(e,c=>c instanceof se),this.zoneID in Se.obj||(Se.obj[this.zoneID]=[]),this.zone==1?this.pos=i===Ce?qe:i===qe?Ce:i:this.zone===10?this.pos=i:this.pos=We,this.count=s;}show(e=[]){if(isNaN(se.key))return [];if(Array.isArray(e)||(e=[e]),e.filter(s=>s>0).length==0)return [];let n=[],i=e.slice();if(this.pos==Ce)n=this.cards.slice(-e.length).map(s=>s.identify(i.shift()));else if(this.pos!=We)n=this.cards.slice(this.pos,e.length).map(s=>s.identify(i.shift()));else if(this.zone!=1){let s=i.map(a=>se.findKZ(a,!0).keys);this.cards.slice().sort((a,r)=>r.key-a.key).some(a=>{if(i.filter(r=>r>0).length==0)return !0;s.some((r,o)=>{if(r.includes(a.key))return n[o]=a.identify(i[o]),r.length=0,i[o]=null,!0});}),i.forEach((a,r)=>{var o,c,u,f;if(a&&(n[r]=(o=this.cards.find(l=>l.id==0))==null?void 0:o.identify(a),n[r]===void 0&&(n[r]=(c=this.cards.find(l=>l.key==0))==null?void 0:c.identify(a)),n[r]===void 0)){let l=se.get(a)[0];l?(n[r]=(f=(u=this.cards.find(d=>!n.includes(d)))==null?void 0:u.swap(l))==null?void 0:f.identify(a),console.error(this.zoneID+"SWAP Card ["+a+"] Shown")):(n[r]=new se(a,a,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+a+"] Shown"));}});}return Se.draw(this.zoneID),n}remove(e=[],n,i){if(isNaN(se.key))return [];Array.isArray(e)||(e=[e]),i&&(this.count=i);let s=[],a=e.slice();if(this.pos==Ce)s=this.cards.splice(-this.count);else if(this.pos!=We)s=this.cards.splice(this.pos,this.count),this.zone==1&&[3208,7011,987,988].includes(n)&&(s=s.reverse());else if(e.filter(c=>c>0).length>0){let c=a.map(f=>se.findKZ(f,!0).keys);this.cards.slice().reverse().sort((f,l)=>l.key-f.key).some(f=>{if(a.filter(l=>l>0).length==0)return !0;c.some((l,d)=>{if(l.includes(f.key))return s[d]=this.cards.splice(this.cards.indexOf(f),1)[0],l.length=0,a[d]=null,!0});}),a.forEach((f,l)=>{var p;if(!f)return;let d=this.cards.findIndex(g=>g.id==0);if(d===-1&&(d=this.cards.findIndex(g=>g.key==0)),d>-1)s[l]=this.cards.splice(d,1)[0];else {let g=se.get(f)[0],W=this.cards.findIndex(y=>!s.includes(y));g&&W>=0?(s[l]=(p=this.cards.splice(W,1)[0])==null?void 0:p.swap(g),console.error(this.zoneID+"SWAP Card ["+f+"] Moved")):(s[l]=new se(f,f,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+f+"] Moved"));}});}else if(this.count==this.length||this.size==1)s=this.cards.splice(0,this.count);else if(this.zone==1||this.zone==2){var r=[...this.cards.filter(c=>c.key<=0).sort((c,u)=>u.key-c.key),...this.cards.filter(c=>c.key>0)];if([11104,3488,862].includes(n)){var o=new Set(r.map(c=>c.key));n==11104?o=new Set(Array.from(o).filter(c=>se.get(c).some(u=>{var f;return (f=me.type[3])==null?void 0:f.has(u.id)}))):n==3488?o=new Set(Array.from(o).filter(c=>se.get(c).some(u=>{var f,l,d;return ((f=me.name.雷杀)==null?void 0:f.has(u.id))||((l=me.name.火杀)==null?void 0:l.has(u.id))||((d=me.name.冰杀)==null?void 0:d.has(u.id))}))):n==862&&(o=new Set(Array.from(o).filter(c=>se.get(c).some(u=>me.number[6].has(u.id))))),r=r.filter(c=>o.has(c.key));}s=r.slice(0,this.count),s.some(c=>c.key>0||c.key%2)&&se.pack(r,!0),s.forEach(c=>this.cards.splice(this.cards.indexOf(c),1));}else se.pack(this.cards),s=this.cards.splice(0,this.count);return s.length!=this.count&&Array.from({length:this.count-s.length},()=>(console.error(this.zoneID+" New Card Moved"),s.push(new se(0,0,this.zoneID)))),e.filter(c=>c>0).length==this.count?e.forEach((c,u)=>{var f;return (f=s[u])==null?void 0:f.identify(c)}):s.filter(c=>c.key>0).length==this.count&&s.forEach(({id:c},u)=>{e[u]=c;}),Se.draw(this.zoneID),s}add(e){if(isNaN(se.key))return;let n=se.move(e,this.zoneID).slice();return this.pos==We?this.cards.splice(this.cards.length,0,...n):this.pos==Ce?this.cards.splice(this.cards.length,0,...n):this.cards.splice(this.pos,0,...n.reverse()),Se.draw(this.zoneID),e}set(e){isNaN(se.key)||(Se.obj[this.zoneID]=se.move(e,this.zoneID),Se.draw(this.zoneID));}get cards(){return Se.obj[this.zoneID]??[]}get length(){var e;return ((e=this.cards)==null?void 0:e.length)??0}get size(){var e;return new Set(((e=this.cards)==null?void 0:e.map(n=>n.key))??[]).size}static init(e,n){Se.obj={unknown:new Set},Se.obj[n]=se.init(e,n);}static draw(e){var u,f;if(isNaN(se.key))return;if(e===void 0){Object.keys(Se.obj).filter(l=>l.split("-")[0]=="5").forEach(l=>Se.draw(l));return}let n=null,i=null,[s,a,r]=((u=e.split("-"))==null?void 0:u.map(Number))??[];if(e=="unknown")n="knownCards";else if(s==1)n="paiduiCards";else if(s==2)n="qipaiCards";else if(s==5)n=String(N.getOrder(a)+1);else if(s==4&&r in G.markSpell)n="mark"+e;else return;i=document.getElementById(n);let o=Array.from(Se.obj[e]??[]);if(s==2){let{turn:l,round:d,phase:p}=H;o=o.filter(g=>g.turn==l&&g.round==d);}if(e=="unknown"&&(Array.from(new Set(o.map(l=>l.head.zone))).forEach(l=>Se.draw(l)),me.draw()),!o||o.filter(l=>l.key>0||l.key%2!==0).length==0){i&&(i.classList.contains("markedCard")?i.remove():i.querySelectorAll(":scope>.shoupai").forEach(l=>l.remove()));return}if(i)i.querySelectorAll(":scope>.shoupai").forEach(l=>l.remove());else if(s==4)(f=document.getElementById(String(N.getOrder(a)+1)))==null||f.insertAdjacentHTML("beforeend",`<div id="${n}" class="markedCard"><span class = 'mark'>${G.markSpell[r]}</span></div>`),i=document.getElementById(n);else return;e!="1-255"&&o.sort((l,d)=>l.key>0&&d.key>0?0:d.key-l.key),s==4&&(i=i.firstElementChild||i);var c=1;o.map(l=>l.plot(e=="unknown")).reverse().forEach((l,d,p)=>{var g,W;if(l.dataset.key==((W=(g=p[d+1])==null?void 0:g.dataset)==null?void 0:W.key))c++;else {c>1&&(l.style.fontSize="",l.innerHTML=`<span>${l.innerHTML}×</span><br>${c}`);let y=parseInt(l.dataset.key);if(y<0){let x=se.findIDs(y).sort((A,ee)=>A>0&&ee>0?0:ee-A);l.title=c+"张："+x.map(A=>oe[A].ncn).join("/"),e!=="1-255"&&x.length<5&&(l.style.fontSize="",l.innerHTML=x.map(A=>{var ee,v;return ((v=(ee=se.get(A)[0])==null?void 0:ee.plot())==null?void 0:v.outerHTML)||""}).join(""));}s==4?i.insertAdjacentElement("afterend",l):i.insertAdjacentElement("afterbegin",l),c=1;}});}static name(e,n,i,s,a){var o;let r;if(isNaN(n))return "?";if(n==1&&e==0)return "牌堆(游戏开始前) ";if(n==1&&e==255)r="牌堆";else if(n==2)r="弃牌堆";else if(n==3)r="处理区";else if(n==4)r="标记";else if(n==5)r="手牌";else if(n==6)r="装备";else if(n==7)r="判定区";else if(n==8)r="弹窗";else {if(n==9)return "洗牌";n==10?r="交换临时区":n==11?r="弃牌临时区":n==12?r="回收区":n==0&&(r="游戏外");}return ([0,1,2,3,8,11,12].includes(n)?"":N.name(e,!1))+([4,8].includes(n)?"["+((o=G.spellDict[n==8?a:s||a||0])==null?void 0:o.name)+"]":"")+(r??"zone"+n)+({[qe]:"底",[Ce]:"顶",[We]:"*"}[i]??(i?":"+i:""))}};Ye(Se,"obj",{unknown:new Set});let ne=Se;function yi(t=[],e=[]){const n=new Map;return t.forEach(i=>{n.set(i.GoodsBaseID,i.ChangeCount);}),e.forEach(i=>{const{GoodsBaseID:s,ChangeCount:a}=i;n.has(s)?n.set(s,n.get(s)+a):n.set(s,a);}),Array.from(n,([i,s])=>({GoodsBaseID:i,ChangeCount:s}))}const Ln={乐不思蜀:"乐",兵粮寸断:"兵",八卦阵:"八卦",爪黄飞电:"爪黄+1",的卢:"的卢+1",绝影:"绝影+1",骅骝:"骅骝+1",赤兔:"赤兔-1",大宛:"大宛-1",紫骍:"紫骍-1",紫騂:"紫骍-1",诸葛连弩:"连弩",木牛流马:"木马",顺手牵羊:"顺手",万箭齐发:"万箭",五谷丰登:"五谷",无中生有:"无中",过河拆桥:"过拆",桃园结义:"桃园",无懈可击:"无懈",南蛮入侵:"南蛮",借刀杀人:"借刀",铁索连环:"铁索",随机应变:"随机",远交近攻:"远交",以逸待劳:"逸劳",知己知彼:"知己",逐近弃远:"逐近",洞烛先机:"洞烛",出其不意:"出其",水淹七军:"水淹","无懈可击·国":"国无",挟天子以令诸侯:"挟令",方天画戟:"方天戟",雌雄双股剑:"雌雄剑",青龙偃月刀:"青龙刀",丈八蛇矛:"丈八矛",朱雀羽扇:"朱雀扇",白银狮子:"白银狮",三尖两刃刀:"三尖刀",乌铁锁链:"乌铁链",五行鹤翎扇:"五行扇",太公阴符:"太公符",无双方天戟:"无双戟",束发紫金冠:"紫金冠",玲珑狮蛮带:"玲珑带",红棉百花袍:"百花袍",红锦百花袍:"百花袍",四乘粮舆:"四乘舆",铁蒺玄舆:"铁蒺舆",飞轮战舆:"飞轮舆",鬼龙斩月刀:"鬼龙刀",国风玉袍:"国风袍",赤炎镇魂琴:"赤炎琴",奇门八阵:"奇门阵",绝尘金戈:"绝尘+1",修罗炼狱戟:"修罗戟",虚妄之冕:"虚妄冕",赤血青峰:"赤青锋",赤血青锋:"赤青锋",鸾凤和鸣剑:"鸾凤剑",七彩神鹿:"神鹿-1",金乌落日弓:"金乌弓",刑天破军斧:"刑天斧",长安大舰:"长安-2",禅让诏书:"诏书",镔铁双戟:"镔铁戟",继往开来:"继往",攻守兼备:"攻守",进退自如:"进退",洪荒之力:"洪荒",同舟共济:"同舟",力争上游:"力争",逆水行舟:"逆水",撒豆成兵:"撒豆",移花接木:"移花",联军盛宴:"联军",调虎离山:"调虎",火烧连营:"火烧",勠力同心:"勠力",调剂盐梅:"调剂",声东击西:"声东",增兵减灶:"增兵",草木皆兵:"草木",唯我独尊:"独尊",弃甲曳兵:"弃甲",金蝉脱壳:"金蝉",故步自封:"自封",金鼓笙旗:"金鼓",党同伐异:"伐异",燎原之火:"燎原","八卦阵(复制)":"八卦","仁王盾(复制)":"仁王盾","藤甲(复制)":"藤甲","白银狮子(复制)":"白银狮",商鞅变法:"变法",真龙长剑:"真龙剑",传国玉玺:"玉玺",厚积形:"厚积",桎梏形:"桎梏",盈冲形:"盈冲",背水形:"背水",整肃形:"整肃",寸兵形:"寸兵",雄黄酒:"酒"},oe=new Proxy({cards:{0:{name:"",type:0,color:0,number:0,ncn:"?",cn:"0",c:"",n:0}},[Symbol.iterator]:function*(){for(let t in this.cards)yield this.cards[t];}},{get:function(t,e){var n;if(e in t)return t[e];if(!t.cards[e])if((n=G.cardDict)!=null&&n[e]){let{name:i,type:s,color:a,number:r,subType:o}=G.cardDict[e],c=An(a),u=Me(r);t.cards[e]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[o]||Ln[i]||i,type:parseInt(s),color:parseInt(a),number:parseInt(r),ncn:i+c+u,cn:c+u,c,n:u};}else t.cards[e]=t.cards[0];return t.cards[e]}});function An(t){return ["","♥","♦","♠","♣"][t]??""}function Me(t,e=!0){return e&&parseInt(t)==1?"A":{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"J",12:"Q",13:"K"}[t]??""}function bi(){for(let e=11;e<=60;e++){const n=`https://web.sanguosha.com/220/h5_2/res/runtime/pc/Face/${e}.png`,i=document.createElement("img");i.src=n,i.classList.add("face"),i.onmousedown=()=>Xe(`#${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);}["昏君，昏君啊","主公，别开枪，自己人","能不能快一点儿呀，兵贵神速啊","小内再不跳，后面还怎么玩儿啊","小内啊，您老悠着点儿","不好意思，刚才卡了","你可以打的再烂一点儿吗","哥们儿，给力点儿行吗","你们怎么忍心就这么让我酱油了","我，我惹你们了吗","姑娘，你真是条汉子","三十六计，走为上，容我去去便回","人心散了，队伍不好带啊","风吹鸡蛋壳，牌去人安乐","哥，交个朋友吧","妹子，交个朋友吧","我从未见过如此厚颜无耻之人","你随便杀，闪不了算我输","这波不亏","请收下我的膝盖","你咋不上天呢","放开我的队友，冲我来","见证奇迹的时刻到了"].forEach((e,n)=>{const i=document.createElement("span");i.classList.add("calRes"),i.textContent=e,i.onmousedown=()=>Xe(`${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);});}async function Xe(t,e){ce("复制成功！");var n={1:"⒈",2:"⒉",3:"⒊",4:"⒋",5:"⒌",6:"⒍",7:"⒎",8:"⒏",9:"⒐",J:"Ⓙ",Q:"Ⓠ",K:"Ⓚ","+":" ",10:"⒑"};if(e&&Object.keys(n).forEach(s=>{t=t.replaceAll(s,n[s]);}),T.chat(t),window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var i=document.createElement("textarea");i.textContent=t,i.style.position="fixed",document.body.appendChild(i),i.select();try{return document.execCommand("copy")}catch(s){return console.warn("Copy to clipboard failed.",s),prompt("Copy to clipboard: Ctrl+C, Enter",t)}finally{document.body.removeChild(i);}}}async function wi(t,e){if(le.CDKNotificationSwitch){let s=Pe("CDK");s||(s=[]);let a=t.filter(r=>!s.includes(r.cdk));await ye(1e4);for(let r of a)Ke(`找到兑换码！<br>${r.cdk}<br>点击即可兑换且关闭此条通知${r.rewards}<br>如不想要兑换码通知，可在设置中关闭`,"ac-tooltip",1e4,"green",function(){!s.includes(r.cdk)&&s.push(r.cdk),$e("CDK",s),tn(r.cdk);});}var n=document.getElementById(e);n.innerText="",t.length==0&&e=="CDK"&&(t=["所有兑换码已经兑换","迟点再看看吧"],Nt("CDK"));for(let s of t){let a=document.createElement("button");a.className="calRes",a.innerText=typeof s=="object"?`${s.cdk}`:s,a.onmousedown=function(){tn(typeof s=="object"?s.cdk:s),a.innerText="已兑换",setTimeout(()=>{a.textContent=typeof s=="object"?`${s.cdk}`:s;},"500");},n.append(a);var i=document.createElement("br");n.append(i);}}function Si(t){var e=document.getElementById("storeDetail");e.innerText="",t.length==0&&(t=["暂无集市数据"]);for(let n of t){let i=document.createElement("button");i.className="storeDetail",i.innerText=n,e.append(i);}}let ki={9020101:"欢乐豆",100301:"手气卡",100201:"点将卡",1150001:"灵宝经诰",100401:"换将卡",200201:"诏令天下",112301:"校尉将印",112101:"朱砂",12119999:"桃花",111801:"功勋",1111801:"水晶碎片",1114301:"圣魂玄晶",112501:"大将军印",1142901:"夺宝券"};function Rn(t){return !ki[t]}function On(t,e,n,i){var s;if(document.getElementById("sec"+t)==null){let a=document.getElementById("lottery");const r=document.createElement("div"),o=document.createElement("div");o.innerHTML=G.secId[t].Name+"："+G.generalDict[G.secId[t].bigrewards]+"  次数："+i+"<br>",o.id="sec"+t+"+times",r.id="sec"+t,r.append(o),a.append(r),a.append(document.createElement("hr"));}if(typeof document.getElementById("sec"+t)<"u"&&document.getElementById(t+"+"+e)==null){const a=document.getElementById("sec"+t+"+times");a.innerHTML=G.secId[t].Name+"："+G.generalDict[G.secId[t].bigrewards]+"  次数："+i+"<br>";let r=document.getElementById("sec"+t);const o=document.createElement("div");o.className="suit",Rn(e)&&o.classList.add("r");const c=document.createElement("span"),u=document.createElement("span");c.innerText=((s=G.goodsID(e))==null?void 0:s.name)+" * ",u.innerText=n,c.id=t+"+"+e,u.id=t+"+"+e+"+number",o.append(c),o.append(u),r.appendChild(o);}else if(typeof document.getElementById(t)<"u"&&document.getElementById(t+"+"+e)!=null){const a=document.getElementById("sec"+t+"+times");a.innerHTML=G.secId[t].Name+"："+G.generalDict[G.secId[t].bigrewards]+"  次数："+i+"<br>";let r=document.getElementById(t+"+"+e+"+number"),o=parseInt(r.innerText);o+=n,r.innerText=o;}}function an(t){let e=document.getElementById("lastUseCard");const n=document.createElement("div");for(const s of t){if(s=="0")continue;var i=document.createElement("button");i.className=oe[s].color<=2?"shoupai R":"shoupai";let a=document.createElement("span");a.innerText=oe[s].cn,i.appendChild(a),i.appendChild(document.createElement("br")),i.innerHTML+=oe[s].name.substring(0,2),n.append(i);}e.innerHTML=n.innerHTML;}const rn=new MutationObserver(t=>{t.forEach(e=>{const n=e.target,i=document.getElementById(n.id),s=document.getElementById("s"+n.id);if(s&&i&&(e.type==="childList"||e.type==="attributes")){const a=n.innerHTML;if(s.dataset.lastContent!==a){if(s){const r=n.cloneNode(!0);s.innerHTML=r.innerHTML,Gn(s);}s.dataset.lastContent=a;}}});}),vi={attributes:!0,childList:!0,subtree:!0};function Gn(t){t&&t instanceof HTMLElement&&(t.scrollHeight>40?t.classList.add("show-ellipsis"):t.classList.remove("show-ellipsis"));}function Ht(t,e){let n;function i(...s){clearTimeout(n),n=setTimeout(()=>t.apply(this,s),e);}return i.cancel=function(){clearTimeout(n),n=null;},i}const Ii=Ht(()=>{requestAnimationFrame(()=>{document.querySelectorAll(".sorder-body").forEach(e=>{Gn(e);});});},500);window.addEventListener("resize",Ii);function yt(){const t=document.getElementById("seatUI"),e=document.createDocumentFragment();for(let n of F.seatUIs)if(n.posY&&n.posX&&typeof n.actualSeatID<"u")if(document.getElementById("sor"+n.actualSeatID)==null){const i=document.createElement("div");i.className="sorderContainer",i.id="sor"+n.actualSeatID,i.style.top=n.posY+"px",i.style.left=n.posX+"px",i.style.width=(F.unscaledWidth+F.paddingRight)*F.scale+"px";const s=document.createElement("div");s.className="sorder-body",s.classList.add("sNo"+n.actualSeatID),s.id="s"+n.actualSeatID,i.appendChild(s);const a=document.getElementById(n.actualSeatID);a&&(rn.observe(a,vi),e.appendChild(i));}else {const i=document.getElementById("sor"+n.actualSeatID);i.style.top=n.posY+"px",i.style.left=n.posX+"px",i.style.width=(F.unscaledWidth+F.paddingRight)*F.scale+"px";}if(F.seatUIs.length===0){rn.disconnect();for(let n=1;n<=8;n++){const i=document.getElementById("sor"+n);i&&i.remove();}}t.appendChild(e);}async function Tt(t,e){for(let s of t){const{x:a,y:r}=G.Rcity[s.id],o=F.centerX+a*SystemContext.gameScale/window.devicePixelRatio+"px",c=F.centerY+r*SystemContext.gameScale/window.devicePixelRatio+"px";if(document.getElementById("city"+s.id+s.event)==null){const u=document.createElement("div");if(u.id="city"+s.id+s.event,u.className="city",u.style.position="absolute",u.style.fontSize="15px",u.style.left=o,u.style.top=c,typeof G.Rfight[s.event]<"u"){let l=[];for(let d of G.Rfight[s.event].generals){let p=d.start?"[先行]":"",[g,W]=cn(d,Le.difficulty);W?l.push('<span style="color: rgb(240, 65, 85); font-weight: bolder">'+d.generalname+p+" "+g.join(" ")+"</span>"):l.push(d.generalname+p);}u.innerHTML=G.text[s.event]+"<hr>"+l.join("<br>").replace(/\n/g," ")+"<hr>"+G.Rfight[s.event].get.replace(/\n/g,"<br>");}else {let l=[];for(let d=1;d<4;d++){let p=s.event+d.toString().padStart(2,"0"),g=[];if(G.Rchoose[p])if(G.Rchoose[p].generals)for(let W of G.Rchoose[p].generals){let y=W.start?"[先行]":"",[x,A]=cn(W,Le.difficulty);A?g.push('<span style="color: rgb(240, 65, 85); font-weight: bolder">'+W.generalname+" "+y+x.join(" ")+"</span>"):g.push(W.generalname+y);}else g.push(G.Rchoose[p].lost)&&g.push("");l.push(g);}u.innerHTML=(G.text[s.event]!==void 0?G.text[s.event]+"<hr>":"")+((G.Rchoose[s.event+"01"]?(G.Rchoose[s.event+"01"].lost==""?"":l[0].join("<br>").replace(/\n/g," ")+"<hr>")+G.Rchoose[s.event+"01"].get.replace(/\n/g,"<br>"):"")+(G.Rchoose[s.event+"02"]?"<hr>"+(G.Rchoose[s.event+"02"].lost==""?"":l[1].join("<br>").replace(/\n/g," ")+"<hr>")+G.Rchoose[s.event+"02"].get.replace(/\n/g,"<br>"):"")+(G.Rchoose[s.event+"03"]?"<hr>"+(G.Rchoose[s.event+"03"].lost==""?"":l[2].join("<br>").replace(/\n/g," ")+"<hr>")+G.Rchoose[s.event+"03"].get.replace(/\n/g,"<br>"):""));}document.getElementById("rogueUI").appendChild(u);}else {const u=document.getElementById("city"+s.id+s.event);u.style.left=o,u.style.top=c;}}const n=t.map(s=>"city"+s.id+s.event);document.querySelectorAll("div.city").forEach(s=>{n.includes(s.id)||s.remove();});}function bt(t,e="点击复制",n=!0,i=!1,s=null){let a=document.createElement("button");return a.className="calRes",a.title=e,a.disabled=i,a.innerText=t,a.onclick=()=>{Xe(t,n),a.innerText="复制成功",setTimeout(()=>{a.textContent=t;},500);},a}async function on(t){let e=t.slice().sort((a,r)=>a-r),n=[];function i(a,r,o){if(o===13){n.push(a.slice());return}if(!(o>13))for(let c=r;c<e.length;c++)c>r&&e[c]===e[c-1]||(a.push(e[c]),i(a,c+1,o+e[c]),a.pop());}i([],0,0);let s=document.getElementById("result");s.innerHTML="";for(let a of n.sort((r,o)=>o.length-r.length))if(s.appendChild(bt(a.map(r=>Me(r,!1)).join("+"))),s.children.length>=15)break;s.innerHTML===""&&(s.innerHTML='<span class="textRes">【资援】无解！</span>');}async function Wi(t,e=!1){function n(c,...u){let f=c.slice();for(let l=0;l<f.length;l++){for(let d=0;d<u.length;d++)if(f[l]-=u[d][l],f[l]<0)return !1;if(l>0&&f[l]>=2)return 0}return f}let i=t.reduce((c,u)=>(c[0]++,c[u]++,c),Array(14).fill(0)),s=Math.floor(i[14]/2),a=new Map([[0,[Array(14).fill(0)]]]);for(let c=1;c<=13;c++){let u=i[c];if(u!=0)for(let f of Array.from(a.keys()).sort((l,d)=>d-l)){let l=a.get(f);for(let d=1;d<=u;d++){let p=f+c*d;if(p>s)break;a.has(p)||a.set(p,[]);for(let g=0;g<l.length;g++){let W=l[g].slice();W[0]+=d,W[c]+=d,a.get(p).push(W);}}}}a.delete(0);let r=new Map;for(let c of Array.from(a.keys()).sort((u,f)=>f-u)){let u=a.get(c);for(let f=0;f<u.length;f++)for(let l=f;l<u.length;l++){let d=n(i,u[f],u[l]);d&&(r.has(d[0])||r.set(d[0],[]),u[f][0]<=u[l][0]?r.get(d[0]).push([u[f],u[l],d]):r.get(d[0]).push([u[l],u[f],d]));}}let o=document.getElementById("result");o.innerHTML="",Array.from(r.keys()).sort((c,u)=>c-u).some(c=>{if(r.get(c).sort((u,f)=>u[0][0]-f[0][0]).forEach(([u,f,l])=>{let d=document.createElement("button");d.className="calRes";let p=document.createElement("span"),g=document.createElement("span");p.innerText=u.flatMap((W,y)=>y>0?Array(W).fill(Me(y,!1)):[]).join("+"),g.innerText=f.flatMap((W,y)=>y>0?Array(W).fill(Me(y,!1)):[]).join("+"),d.appendChild(p),d.insertAdjacentHTML("beforeend","<span>=</span>"),d.appendChild(g),d.title="点击复制",d.onclick=function(){Xe(this.innerText,!0);},e&&(d.title="点击“=”左侧或右侧的数字，将被点击一侧的数字分配给自己，另一侧的分配给张昌蒲",p.className="yanjiaospan",g.className="yanjiaospan",p.onclick=function(W){W.stopPropagation(),T.yanJiao([u,f,l],2);},g.onclick=function(W){W.stopPropagation(),T.yanJiao([u,f,l],0);}),o.appendChild(d);}),o.children.length>=5)return !0}),o.innerHTML===""?o.innerHTML='<span class="textRes">【严教】无解！</span>':e&&o.insertAdjacentHTML("afterbegin","界小抄：点下方数字可以自动分配牌<br>点击想要分配给自己的一组数字即可");}async function Ci(t,e){if(!(t!=null&&t.length))return;let n=t.slice().sort((r,o)=>r-o),i=[];function s(r,o,c){if(!(c>13)){i.unshift(r.slice()),e&&(i[0].K=c===13?r.length:0);for(let u=o;u<n.length;u++)u>o&&n[u]===n[u-1]||(r.push(n[u]),s(r,u+1,c+n[u]),r.pop());}}s([],0,0);let a=document.getElementById("result");a.innerHTML="";for(let r of i.filter((o,c,u)=>!u.some(f=>o.length<f.length&&o.every(l=>f.includes(l)))).sort((o,c)=>c.K-o.K||c.length-o.length))a.appendChild(bt(r.map(o=>Me(o,!1)).join("+"))),e&&r.K&&a.lastChild.classList.add("textRes");}async function ln(t,e){function n(o,c,u,f,l){if(u.length===l+1){c.push([...u,...u.reduce((d,p)=>(d.splice(d.indexOf(p),1),d),o.slice())]);return}for(let d=f;d<o.length;d++)d>f&&o[d]===o[d-1]||(u.push(o[d]),u[0]+=o[d],n(o,c,u,d+1,l),u[0]-=u.pop());return c}let i=document.getElementById("result");if(i.innerHTML="",!(t!=null&&t.length)||!(e!=null&&e.length))return;let s=Math.max(t.length,e.length);t.sort((o,c)=>o-c),e.sort((o,c)=>o-c);for(let o=2;o<=s;o++){let c=n(t,[],[0],0,o);n(e,[],[0],0,o).forEach(u=>c.forEach(f=>{u[0]>f[0]&&u.slice(1,o+1).every(l=>!f.slice(1,o+1).includes(l))&&(s<3||Array.from({length:o}).some((l,d)=>u[d+1]<f[d+1]))&&i.appendChild(bt(u.slice(1,o+1).map(l=>Me(l))+"→"+f.slice(1,o+1).map(l=>Me(l)),"点击复制",!1));}));}let a=Array.from(new Set(e)),r=Array.from(new Set(t));a.forEach(o=>{let c=r.filter(u=>u<o);c.length&&i.appendChild(bt(Me(o)+"→"+c.map(u=>Me(u)).join("/"),"点击复制",!1));}),i.innerHTML===""&&(i.innerHTML='<span class="textRes">【易城】无法交换！</span>');}async function Bt(t){var c,u,f;if(!(t!=null&&t.allData)){F.cities=[],Tt(F.cities),document.getElementById("centerUI").classList.remove("show"),document.getElementById("centerUI").classList.add("hide");return}const e=document.getElementById("centerUI");e.classList.remove("hide"),e.classList.add("show");let n=t.allData,i=n.shopData,s=n.chapterData,a=n.generalpool;if(i){i.bShow=!0;let l=[];if(i.itemId&&G.Rplot)for(let d of i.itemId)G.Rplot[d]&&l.push(G.Rplot[d].name);Si(l);}if(a&&a.general_change&&a.general_change.length>0){let l=a.general_change.map(d=>G.generalDict[d]||`Unknown (${d})`);Ke(`小抄提示：可换将为${l.reverse().join(", ")}`,"acTooltip",1e4,"green",null,!0);}let r=n.seasonData,o=r&&r.difficulty;o&&(Le.difficulty=o),Le.general=((u=(c=n.gameData)==null?void 0:c.myGeneral)==null?void 0:u.uGeneralId)??0,Le.itemId=((f=n.gameData)==null?void 0:f.itemId)??[],s&&s.locations&&(F.cities=s.locations.map(l=>({id:l.location,event:l.event})),G.Rcity&&Tt(F.cities));}const Ei=(()=>{class t{constructor(){this.id=0,this.goods_id=0,this.goods_cnt=0,this.price_type=0,this.price_num=0,this.stock=0,this.buy_limit=0,this.ori_price=0,this.all_bought_cnt=0,this.self_bought_cnt=0;}Read(s){this.id=s.readUnsignedByte(),this.goods_id=s.readUnsignedInt(),this.goods_cnt=s.readUnsignedInt(),this.price_type=s.readUnsignedByte(),this.price_num=s.readUnsignedInt(),this.stock=s.readUnsignedInt(),this.buy_limit=s.readUnsignedByte(),this.ori_price=s.readUnsignedInt();}UpdateDate(s){this.goods_id=s.goods_id,this.goods_cnt=s.goods_cnt,this.price_type=s.price_type,this.price_num=s.price_num,this.stock=s.stock,this.buy_limit=s.buy_limit,this.ori_price=s.ori_price,this.all_bought_cnt=s.all_bought_cnt,this.self_bought_cnt=s.self_bought_cnt;}}function e(i){i.position=0;let s=[],a=i.readBoolean();if(i.Data.length<=1)return null;let r=i.readUnsignedInt(),o=i.readUnsignedInt(),c=new Date(r*1e3).toISOString().slice(5,16).replace("T"," "),u=new Date(o*1e3).toISOString().slice(5,16).replace("T"," "),f=i.readUnsignedInt();for(let l=0;l<f;l++){let d=new t;d.Read(i);let p=s.find(g=>g.id==d.id);p?p.UpdateDate(d):s.push(d);}f=i.readUnsignedInt();for(let l=0;l<f;l++){let d=i.readUnsignedInt(),p=i.readUnsignedInt(),g=s.find(W=>W.id==d);g&&(g.all_bought_cnt=p);}f=i.readUnsignedInt();for(let l=0;l<f;l++){let d=i.readUnsignedInt(),p=i.readUnsignedInt(),g=s.find(W=>W.id==d);g&&(g.self_bought_cnt=p);}return {commonVo:s,start_time:r,end_time:o,start:c,end:u,next:a}}let n=!1;return async i=>{if(n)return null;const s=document.querySelectorAll('.left input[type="checkbox"]');let a=e(i);if(!a)return null;let{commonVo:r,start_time:o,end_time:c,start:u,end:f,next:l}=a;if(l)return;o=(o-8*60*60)*1e3;let d=r.map(({goods_id:W,goods_cnt:y,price_type:x,price_num:A,stock:ee,buy_limit:v,ori_price:E,all_bought_cnt:j,self_bought_cnt:_},q)=>{var we;let te=A+["","通用元宝","元宝","银两"][x]+": "+((we=G.goodsID(W))==null?void 0:we.name)+(y>1?"*"+y:""),pe=`${u} ~ ${f} 共${ee}个`,xe=j>=ee||_>=v;return Object.assign(s[q].dataset??{},{goods_id:W,start_time:o,goods:te}),{goods_id:W,goods:te,title:pe,disabled:xe}}),p=document.getElementsByClassName("right")[0];p&&(p.innerHTML=d.map(({goods:W,title:y,disabled:x})=>`<span class="secKillDetailText${x?" gray":""}" title="${y}">${W}</span>`).join(""));let g=p.start-6e4;return g>Date.now()&&ae.set("miaosha",()=>{ce(`${u}
秒杀即将开始！
`+d.map(({goods:W})=>W).join(`
`)),n=!0,setTimeout(()=>{n=!1;},66666);},g),i.Size==i.position}})();let Di=["巳蛇","灵动","八门","盾弓","智迟","持盈","卫主","不死","刚烈","觉醒","悲鸣","断肠","节命","先机","悲鸣","忘魂","雅士","挥泪","不屈","封冻","灵躯","武魂","已蛇"];const It={getspell:0,getspell_ZD:1,getspell_KN:2,getspell_EM:3,getspell_LY:4};function cn(t,e){let n=[],i=!1,s=Ti(e);const a=It[s];let r=Object.keys(It).filter(o=>It[o]<=a).map(o=>t[o]).filter(Boolean).join(";");r=r==null?void 0:r.split(";").map(o=>{var c;return ((c=G.spellDict[o])==null?void 0:c.name)||"无收录技能"});for(let o of r)Di.includes(o)&&(n.push(o),i=!0);return [n,i]}function Ti(t){switch(Math.floor((t-1)/5)){case 0:return "getspell";case 1:return "getspell_ZD";case 2:return "getspell_KN";case 3:return "getspell_EM";case 4:return "getspell_LY";default:return "getspell"}}var st=[],Lt=[],dn={290:"推锋",766:"匡弼"},_e=[],pt={},mt={},tt={},Je={},gt=new Map,De=()=>({name:"加载中"}),Ie=[],At={},Rt={},Oe={},Te={},Bi={},Ot={},Gt={};Object.assign(G,{cardDict:st,cardIDsOrder:Lt,spellDict:_e,generalDict:pt,skinSP:mt,skinDict:tt,skinMap:Je,bigSkin:gt,goodsID:De,rogejson:Te,gxjson:Bi,Rfight:Oe,Rchoose:Rt,Rcity:At,secId:Ot,vskinMap:Gt,Rplot:Ie});async function Li(t){return new Promise(e=>JSZipUtils.getBinaryContent(window.location.host==="test.sanguosha.com"?"https://test.sanguosha.com/h5/res/config//Config_w.sgs":"https://web.sanguosha.com/220/h5_2/res/config/Config_w.sgs?v="+window.resourceVersion,(n,i)=>JSZip.loadAsync(i).then(async s=>{var ee;const a=function(){const v=new Date;return v.getFullYear().toString()+(v.getMonth()+1).toString().padStart(2,"0")+v.getDate().toString().padStart(2,"0")+"T000002"}();let r=["sys_playcard","cha_spell","character","hd_roguelike","hd_1v1_rogue","sys_h5_shop","sys_gs_dbs_fs_goodsbaseinfo","sys_server_item_drops_templete_config","sys_h5_dbs_clientserverpub","cha_gs_dbs_fs_skininfo","gn_dbs_quest","sys_h5_quest","sys_h5_task","ff_dbs_lottery_new","ff_exchange_new","sys_treasure_chest","gn_dbs_giftbag","ff_tiangong","ff_chess"];var o=await Promise.all(r.map(v=>s.file(v+".sgs").async("arraybuffer").then(E=>JSON.parse(new TextDecoder().decode(new Zlib.Gunzip(CtrUtil.Ctr.Ofb_Dec(E)).decompress()))))).then(v=>r.reduce((E,j,_)=>(E[j+".sgs"]=v[_],E),{}));function c(v,E){if(typeof v!="object")return v;let j={};for(let _ in v){let q=E.get(_)||_;j[q]=v[_];}return j}var u=new Map([["id","编号"],["name","名称"],["time","时间"],["desc","说明"],["reward","奖励"],["price","价格"],["max","限购"],["effect","效果"],["info","信息"]]),f=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.reduce((v,E)=>(v.set(E.a,E),v),new Map),l=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.abbreviation.field.reduce((v,{Short:E,Long:j})=>(v.set(E,j),v),new Map),d=o["sys_server_item_drops_templete_config.sgs"].AllDrop.DropTemplete.DropGroup.DropItem.reduce((v,E)=>(v.has(E.a)||v.set(E.a,[]),v.get(E.a).push(E.d),v),new Map);De=(()=>{var v={};return function(E){if(E=parseInt(E),v[E])return v[E];let j=c(f.get(E),l),_=o["sys_h5_shop.sgs"].root.itemtips.find(({a:te})=>te==E),q=(j==null?void 0:j.usedeffect)&&y(j==null?void 0:j.usedeffect);return v[E]={...j,..._&&{info:_.e},...q&&{effect:q}}}})();var p={};function g(v){var j;let E=v==null?void 0:v.replace(/([^0-9,\.])/g,"").split(",").map(_=>parseInt(_));return (E==null?void 0:E.length)<2?v:(p[E[0]]??(p[E[0]]=(j=f.get(E[0]))==null?void 0:j.b)??E[0])+(parseInt(E[1])>1?"*"+E[1]:"")}var W={};function y(v){let E=parseInt(v);if(E!=1e3&&Math.abs(E)>0)return W[E]??(W[E]=(d.get(Math.abs(E))??[]).map(j=>{var _;return ((_=f.get(j))==null?void 0:_.b)??y(j)}).join(E>0?"/":"&"))}_e=o["cha_spell.sgs"].GameSpells.spell.reduce((v,{a:E,c:j,o:_})=>{var te,pe;let q={name:j,spellid:E,desc:((pe=(te=_==null?void 0:_.replace(/<[^\<\>]*>/g,""))==null?void 0:te.replace(/#.*/g,""))==null?void 0:pe.replace(/[;\n]+$/g,""))||""};return (q.desc.includes("暗置")||q.desc.includes("扣置")||q.desc.includes("移出"))&&(dn[E]=Ln[q.name]??q.name),v[E]=q,v},[]);let x=o["sys_playcard.sgs"].abbreviation.reduce((v,{Short:E,Long:j})=>(v.set(E,j),v),new Map);if(st=o["sys_playcard.sgs"].GamePlayCards.card.map(v=>c(v,x)).reduce((v,E)=>{var j,_;return v[E.id]={...E,name:E.name??((j=_e[E.spellId])==null?void 0:j.name),desc:(_=_e[E.spellId])==null?void 0:_.desc},v},[]),Lt=o["sys_playcard.sgs"].GamePlayCards.card.sort((v,E)=>v.c-E.c||v.d-E.d||v.h-E.h||v.m-E.m||v.g-E.g||v.f-E.f||v.a-E.a).map(({a:v})=>v),gt=new Map(o["cha_gs_dbs_fs_skininfo.sgs"].generalskin.items.item.map(v=>[String(v.a),[v.a,v.c,v.v||v.q,v.r]]).reverse()),tt=o["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.reduce((v,{skinID:E,name:j,skinlevel:_,dongPoint:q})=>{let te=parseInt(E/100);return v[te]||(v[te]={}),v[te][E]={level:{"0,0":"普通","0,1":"稀有","0,2":"史诗","0,3":"传说","0,4":"限定"}[_]||"未知",name:j,state:q!==void 0},v},{}),mt=o["cha_gs_dbs_fs_skininfo.sgs"].generalskin.speciaSkin.filter(v=>String(v.skinID).includes("_")).reduce((v,E)=>{let[j,_]=E.skinID.split("_").map(Number);return v[j]?v[j].includes(_)||v[j].push(_):v[j]=[_],v},{}),Object.entries(mt).forEach(([v,E])=>{var q,te;(q=gt.get(v))==null||q.push(E);let j=parseInt(v/100),_=(te=tt[j])==null?void 0:te[v];_&&(delete tt[j][v],E.forEach(pe=>{tt[j][v+"_"+pe]={..._,name:_.name+pe};}));}),pt=o["character.sgs"].GameCharacters.character.reduce((v,{a:E,ai:j,b:_})=>(v[E]=(j||"")+(_==null?void 0:_.replaceAll("&","")),v),{}),o["character.sgs"].GameCharacters.character.forEach(({a:v,v:E})=>{if(typeof E!="string"){Je[v]=new Set([v]);return}let j=[v,...E.split(";").map(q=>parseInt(q))],_=j.find(q=>q in Je);if(_){let q=Je[_];j.filter(te=>!q.has(te)).forEach(te=>(Je[te]=q).add(te));}else {let q=new Set(j);j.forEach(te=>Je[te]=q);}}),Gt=o["character.sgs"].WuJiangs.Spgroup.reduce((v,E)=>{const j=E.spgenerals?E.spgenerals.split(",").map(Number):[];return j.forEach(_=>{v[_]=new Set(j);}),v},{}),Ot=o["ff_tiangong.sgs"].root.Common.reduce((v,E)=>(v[E.Id]=E,v),{}),typeof t!="string"){let v=o["gn_dbs_giftbag.sgs"].giftsys.gifts.giftsItem.Item.filter(E=>E.cdkey!="sgs"&&!E.platform&&E.endtime>=a&&E.begintime<=a).sort((E,j)=>E.endtime-j.endtime).map(E=>{const j="<br>"+E.dataInfo.match(/\[(\d+),(\d+)\]/g).map(_=>{const[q,te,pe]=_.match(/\[(\d+),(\d+)\]/);return `${De(te).name} * ${pe}`}).join("<br>");return {giftID:E.giftID,endtime:E.endtime,begintime:E.begintime,dataInfo:E.dataInfo,rewards:j}}).filter(Boolean);G.CDKDict=v;}if(Object.assign(G,{cardDict:st,cardIDsOrder:Lt,markSpell:dn,spellDict:_e,generalDict:pt,skinSP:mt,skinDict:tt,skinMap:Je,bigSkin:gt,goodsID:De,secId:Ot}),(typeof t!="string"||t=="roge")&&async function(v,E){At=v.Root.Level.reduce((h,{cityID:m,cityname:I,citypic:w,citycoordinate:D,startshow:k})=>{let[L,Q]=D.split(",").map(Number);return h[m]={x:L,y:-Q,boss:k,name:I??(w==null?void 0:w.replace(/^city_([0-9])_(.+)*\.png$/,(Y,ie,B)=>({"1jjy":"将军营","1jl":"箭楼","1wl":"望楼","1fht1":"烽火台(左)","1ck":"仓库","1yf":"营房","1fht2":"烽火台(右)","1sjc":"神君祠","2xsj":"西市集","2wl":"望楼","2dsj":"东市集","2wk":"武库","2hgl":"挥公陵","2sdg":"舜帝宫","2gcm":"干城门","2ywt":"演武台","3ds":"东市","3gg":"桂宫","3bg":"北宫","3wyg":"未央宫","3wk":"武库","3mgg":"明光宫","3clg":"长乐宫","4js":"金市","4lyt":"凌云台","4hly":"华林园","4tc":"太仓","4tx":"碳墟","4smm":"司马门","4wk":"武库","4sz":"石址","5my":"梅园","5fhl":"凤凰林","5lt":"龙亭","5wk":"武库","5wl":"望楼","5cm":"城门","5ql":"谯楼","5clg":"陈留宫","6jkg":"建康宫","6ql":"戚里","6wl":"望楼","6ycq":"邺城桥","6ywt":"演武台","6sg":"书馆","6wfl":"万福楼","6wk":"武库","6tqt":"铜雀台"})[ie+B]??Y))},h},{}),v.Root.Tactics.forEach(({plot:h,plotname:m,plotdesc:I,school:w,money:D,level:k})=>{Ie[h]={name:m.replaceAll("·",""),desc:I.replaceAll(" ",""),school:w,money:D,level:k,type:2};}),v.Root.Spell.forEach(({id:h,spellid:m,money:I,level:w})=>{var D,k;Ie[h]={name:(D=_e[m])==null?void 0:D.name,desc:(k=_e[m])==null?void 0:k.desc,spellid:m,money:I,level:w,type:3};}),v.Root.Card.forEach(({id:h,cardid:m,isequip:I,money:w,level:D})=>{var k=st[m];Ie[h]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[k.subType]??k.name,desc:k.desc,color:k.color,number:k.number,money:w,level:D,type:4+I,rType:(k.type*10+k.subType)*100+I};});var j=v.Root.Roundid.reduce((h,{useSeason:m})=>m),_=new Map,q=v.Root.Text.reduce((h,{ID:m,text:I})=>(h[m]=I,h),[]);v.Root.General=(h=>v.Root.General.map(m=>c(m,h)))(v.root.abbreviation.reduce((h,{Short:m,Long:I})=>(h.set(m,I),h),new Map)),v.Root.Adventure.forEach(h=>{h.chapname=q[h.chapname]??h.chapname;});let te=v.Root.RewardGroup.reduce((h,{reward:m,rewarddesc:I,allreward:w,abandonmoney:D})=>{var k,L;return h[m]=(D?D+"铜币/":"")+((L=(k=w==null?void 0:w.split(";"))==null?void 0:k.flatMap(Q=>Q==null?void 0:Q.split(",")))==null?void 0:L.map(Q=>["随机","普通","稀有","史诗","传说"][Q]).join("/"))+I.replace("多选一","自选"),h},v.Root.Other.reduce((h,{reward:m,rewardname:I})=>(h[m]=I,h),{}));var pe=v.Root.Chapter.reduce((h,{seasonID:m,chapter:I,cityName:w,bosslocation:D,location:k})=>(k.split(";").forEach(L=>{h[L]=`${m}-${I}${w}`;}),h[D]=`${m}-${I}${w}BOSS`,h),{}),xe=v.Root.General.reduce((h,m)=>(h[m.generalgroup]||(h[m.generalgroup]=[]),h[m.generalgroup].push(m),m.generalname=m.generalname.replace("&",""),h),{});v.Root.General.forEach(h=>{h.GeneralRank||(h.GeneralRank=0),h.JumpStage&&(h.next=(([m,I])=>xe[m][I-1]??xe[m][0])(h.JumpStage.split(";"))),h.info={general:h.generalname,hp:h.hp,maxhp:h.maxhp,card:h.cardnum,draw:h.draw,sha:1+h.exshatimes,armor:h.armor,getarmor:h.getarmor,...h.next?{next:h.next.generalname}:{}},h.spells=["","_ZD","_KN","_EM","_LY"].flatMap((m,I)=>{var w;return (((w=h["getspell"+m])==null?void 0:w.split(";"))??[]).map(D=>_e[D]).filter(Boolean).map(D=>({...D,level:I}))}),h.spell=h.spells.map(({name:m})=>m).join(","),h.cards=["","_ZD","_KN","_EM","_LY"].flatMap((m,I)=>{var w,D;return [...((w=h["carddesc"+m])==null?void 0:w.split(";"))??[],...((D=h["equip"+m])==null?void 0:D.split(";"))??[]].map(k=>st[k]).filter(Boolean).map(({id:k})=>({id:k,ncn:oe[k].ncn,level:I}))}),h.card=h.cards.map(({ncn:m})=>m).join(",");}),Oe=v.Root.Fight.reduce((h,m)=>{function I(w,D,k=!1){w&&(m.fight+=X(w.info),m.lost+=(w.start?"[先手]":"")+w.generalname,w.next?(m.lost+=">",w.next.stage=D,w.next.info.pre=w.generalname,m.generals.push(w.next),I(w.next,D+1,k)):k||(m.fight+="+",m.lost+=" "));}if(m.generals=[...xe[m.Ggroup]??[]],m.fight="",m.lost="",m.startnum){let w=m.generals.find(D=>D.generalID==m.startnum);w&&(w.start=!0);}return m.generals.forEach((w,D,k)=>I(w,1,D==k.length-1)),m.get=m.itemgroup+`铜币
`+(m.rewarditem?String(m.rewarditem).split(";"):[]).concat(String(m.reward).split(";")).map(w=>te[w]).join(`
`),m.text=q[m.text]??m.text,m.name=q[m.name]??m.name,h[m.fightID]=m,h},[]);for(let h in xe)h in Oe||(Oe[h]={generals:xe[h]});if(Rt=v.Root.Choose.reduce((h,m)=>{var I;return m.type==7?(h[m.effectID]=Oe[m.event1],_.set(m.event1,(I=v.Root.Adventure.find(w=>w.ID===parseInt(m.effectID/10)))==null?void 0:I.chapname)):m.type==3&&m.event1=="2"?h[m.effectID]={get:"营地"}:h[m.effectID]={lost:(w=>w&&"失去 "+w)(z(m.lostitem,m.lostnum,m.effectID)),get:(w=>w&&m.showitem?w.replace("随机","特定"):w)(z(m.getitem,m.getnum,m.effectID))},h},[]),Object.assign(G,{Rfight:Oe,Rchoose:Rt,Rcity:At,vskinMap:Gt,Rplot:Ie,text:q}),!t||t=="roge"){var we=Object.entries(xe).reduce((h,[m,I])=>{var L,Q,Y,ie,B;let w=m.length<6?m.slice(-3):m.slice(0,2)!=="99"?m.slice(-5,-2)+">":"*"+m.slice(-2),D=m.length<6?m.slice(0,-3)-2:m.slice(0,2)!=="99"?m.slice(0,-5)-2:m.slice(-3,-2)-m.slice(-4,-3)+9;if(["新年大吉"].includes(((L=Oe[m])==null?void 0:L.name)??((Q=Oe[parseInt(w)+4e3])==null?void 0:Q.name)))return h;h[w]||(h[w]={fight:((Y=Oe[m])==null?void 0:Y.name)??((ie=Oe[parseInt(w)+4e3])==null?void 0:ie.name)??"",generals:{}}),_.has(m)&&(h[w].event=_.get(m));let k=h[w].generals;return (((B=Oe[m])==null?void 0:B.generals)??I).forEach(de=>{let M=(w.startsWith("*")?D:"")+(de.stage||"")+"#"+de.generalID;for(;;){if(!k[M])k[M]={general:(de.info.pre?">":"")+de.generalname+(de.info.next?">":""),info:X(de.info),levels:[],start:[],infos:{},spell:{},card:{},ad:{}};else if(k[M].levels.includes(D)){M+="@";continue}break}let ue=k[M];D%10<6&&D<20&&(ue.levels.push(D),de.start&&ue.start.push(D)),ue.infos[D]=de.info,de.otherad&&(ue.ad[D]=de.otherad),de.spells&&de.spells.forEach(ke=>{ue.spell[ke.spellid]||(ue.spell[ke.spellid]={...ke,levels:[],level:void 0}),D%10<6&&D<20&&ue.spell[ke.spellid].levels.push(D+(ke.level??0));}),de.cards&&de.cards.forEach(ke=>{ue.card[ke.id]||(ue.card[ke.id]={name:ke.ncn,levels:[],level:void 0}),D%10<6&&D<20&&ue.card[ke.id].levels.push(D+(ke.level??0));});}),h},{});Object.entries(we).forEach(([h,m])=>{we[h].shift=h.startsWith("*")&&Math.min(...Object.values(m.generals).flatMap(I=>I.levels))==1?1:0,m.generals=Object.values(m.generals).map(I=>(I.level=Math.min(...I.levels.sort((w,D)=>D-w))-we[h].shift,I.level=I.level,I.spell=Object.values(I.spell).map(w=>{let D=Math.min(...w.levels.sort((k,L)=>L-k));return w.levels.some((k,L,Q)=>k<10&&!Q.includes(k+10)&&(I.levels.includes(k+10)||I.levels.length==2&&I.levels.includes(10)))&&(w.level=[D]),w.levels.some(k=>k<10)&&(k=>{k.length&&(w.level=[D,k[k.length-1]]);})(w.levels.filter((k,L,Q)=>k>=10&&!Q.includes(k-10))),w.level=(w.level??D)-we[h].shift,delete w.levels,delete w.spellid,w}).sort((w,D)=>{let k=L=>L[1]>=10?L[1]:L[0]??L;return k(w.level)%10-k(D.level)%10||k(w.level)-k(D.level)}),I.card=Object.values(I.card).map(w=>{let D=Math.min(...w.levels.sort((k,L)=>L-k));return w.levels.some((k,L,Q)=>k<10&&!Q.includes(k+10)&&(I.levels.includes(k+10)||I.levels.length==2&&I.levels.includes(10)))&&(w.level=[D]),w.levels.some(k=>k<10)&&(k=>{k.length&&(w.level=[D,k[k.length-1]]);})(w.levels.filter((k,L,Q)=>k>=10&&!Q.includes(k-10))),w.level=(w.level??D)-we[h].shift,delete w.levels,w}).sort((w,D)=>{let k=L=>L[1]>=10?L[1]:L[0]??L;return k(w.level)%10-k(D.level)%10||k(w.level)-k(D.level)}),I.card.length||delete I.card,I.info=Object.values(I.infos).reduce((w,D)=>(Object.keys(w).forEach(k=>{D[k]>w[k]&&(w[k]=D[k]);}),w),{hp:0,card:0,draw:0,sha:0}),Object.keys(I.ad).length?Object.keys(I.ad).sort((w,D)=>D-w).forEach((w,D,k)=>{(w>=10&&I.ad[w]==I.ad[w%10]||I.ad[w]==I.ad[k[D+1]])&&delete I.ad[w];}):delete I.ad,I.start.length?I.start=Math.min(...I.start):delete I.start,delete I.infos,delete I.levels,I)).sort((I,w)=>I.level-w.level);});var C=v.Root.UniversalGroup.filter(h=>h.fightgroup!==void 0).reduce((h,m)=>{h[m.fightID]||(h[m.fightID]={});let I=String(m.fightgroup).slice(-3);return h[m.fightID][I]||(h[m.fightID][I]=[]),h[m.fightID][I].push(m),h},{}),O=Array.from(Array.from(v.Root.Level.reduce((h,{cityID:m,eventfight:I,universalfight:w,startshow:D})=>{var L,Q;k(w),k((Q=(L=I==null?void 0:I.split(";"))==null?void 0:L.map(Y=>Y.slice(-3)))==null?void 0:Q.filter((Y,ie,B)=>!B.slice(ie+1).includes(Y)));function k(Y){if(!Y||Y.length==0)return;let ie=h.get(Y);ie?ie.includes(pe[m])||ie.push(pe[m]):h.set(Y,[pe[m]]);}return h},new Map).entries()).reduce((h,[m,I])=>{let w=I.length>1&&new Set(I.map(D=>D.slice(0,3))).size<2?I.map((D,k)=>D.slice(k?3:0)).join("/"):String(I);return h.get(w)||h.set(w,new Set),(C[m]?Object.keys(C[m]):m).forEach(D=>h.get(w).add(D)),h},new Map).entries()).reduce((h,[m,I])=>(h[m]=Array.from(I,w=>we[w]),h),{});Te.jsbs=JSON.stringify(Object.entries(O).filter(h=>h[0].includes(j+"-")).reduce((h,[m,I])=>{let w=m.slice(2);return h[w]||(h[w]=[]),I.forEach(D=>{D.fight!="新年大吉"&&h[w].push(D);}),h},{})),Te.jsft=JSON.stringify(Object.values(we).filter(h=>["天涯故交","招兵买马","万众敬仰"].includes(h.event)&&h.shift||["突来危机","擂台比武","战事推演","为民除害","赛前演习","宵小叫嚣"].includes(h.event)).reduce((h,{event:m,generals:I,fight:w})=>(h[m]||(h[m]=[]),h[m].push({...w?{fight:w}:{},generals:I}),h),{})),Te.wscd=JSON.stringify(Object.values(E.Card.map(({CitationID:h,money:m})=>({...Ie[h],money:m})).reduce((h,{level:m,money:I,name:w,color:D,number:k,desc:L,rType:Q})=>{let Y=m+w+k;return h[Y]||(h[Y]={cl:[],level:I,name:w,number:k,type:Q,desc:L}),h[Y].cl.push(D),h},{})).sort(Ve("type","level"))),Te.wssp=JSON.stringify(E.Spell.map(({CitationID:h,money:m})=>({...Ie[h],money:m})).sort(Ve("money","level","spellid")).map(({level:h,money:m,name:I,desc:w})=>({level:m,name:I,desc:w}))),Te.wszf=JSON.stringify(E.Tactics.map(({CitationID:h,money:m})=>({...Ie[h],money:m})).filter(h=>{var m;return (h.name=(m=h.name)==null?void 0:m.replace("·新",""))&&!h.name.includes("废弃")&&!h.desc.includes("备用")&&!/(游戏|战斗)开始/.test(h.desc)}).sort((h,m)=>!h.money^!m.money?h.money?1:-1:h.name.slice(0,2).localeCompare(m.name.slice(0,2))!=0?h.name.slice(0,2).localeCompare(m.name.slice(0,2)):Ve("money","level","name.length")(h,m)).map(({level:h,money:m,name:I,desc:w})=>({level:m,name:I,desc:w})).filter((h,m,I)=>JSON.stringify(h)!=JSON.stringify(I[m+1]))),Te.jssp=JSON.stringify(Ie.filter(h=>(h==null?void 0:h.type)==3).sort(Ve("level","money","spellid")).map(({level:h,money:m,name:I,desc:w})=>({name:I,level:h,desc:w}))),Te.jscd=JSON.stringify(Object.values(Ie.filter(h=>(h==null?void 0:h.type)>=4).reduce((h,{level:m,money:I,name:w,color:D,number:k,type:L,desc:Q,rType:Y})=>{let ie=m+w+k,B=[33,34].includes(Math.floor(Y/100))||w=="诸葛连弩"&&m==4;return h[ie]||(h[ie]={cl:[],level:B?0:m,money:I,name:w,number:k,type:Y+(B?6:0),desc:Q}),h[ie].cl.push(D),h},{})).sort(Ve("type","level","money")).sort((h,m)=>h.level>0&&m.level==0?-1:0)),Te.jssd=JSON.stringify(v.Root.seed.sort(Ve("level","seed")).map(({name:h,desc:m,level:I,huchijineng:w})=>{var k,L,Q;let D=(k=m==null?void 0:m.match(/.*获得【([^【】]*)】.*/))==null?void 0:k[1];return D&&(m+=((L=_e[w])==null?void 0:L.desc)??((Q=_e.find(Y=>(Y==null?void 0:Y.name)==D))==null?void 0:Q.desc)),{name:h,level:I,desc:m}})),Te.jssc=JSON.stringify(v.Root.school.map(({school:h,name:m,effect:I,needputong:w,needxiyou:D,needshishi:k,needchuanshuo:L})=>({school:h,name:m,need:[w,D,k,L],desc:Ie[I].desc.replaceAll(" ","")}))).replace("（","(").replace("）",")").replace("）",")"),Te.jszf=JSON.stringify(Ie.filter(h=>(h==null?void 0:h.type)==2).filter(h=>(h.school=parseInt(h.school||100),h.name=h.name.replace("·新",""),!h.name.includes("废弃")&&!h.desc.includes("备用")&&!h.name.includes("套装"))).sort((h,m)=>h.name.slice(0,2).localeCompare(m.name.slice(0,2))!=0?h.name.slice(0,2).localeCompare(m.name.slice(0,2)):Ve("level","money","name.length")(h,m)).map(({level:h,money:m,name:I,desc:w,school:D})=>({...D<100?{school:D}:{},name:I,level:h,desc:w})).filter((h,m,I)=>JSON.stringify(h)!=JSON.stringify(I[m+1]))),Te.jstf=JSON.stringify(v.Root.saijitianfu.filter(h=>h.seasonID==j).reduce((h,{tfid:m,ceng:I,type:w,cost:D,plot:k,preposition:L})=>(h[m]={id:m,x:w,y:I,cost:D,pre:(L==null?void 0:L.split(/,|;/))??[],...Ie[k]},h),[{id:0,x:0,y:0,cost:0,pre:[],name:"",level:0,type:0}])),e(Te);}function z(h,m,I){var w,D,k;return h?h.includes(",")?(([L,Q])=>["随机","普通","稀有","史诗","传说"][Q]+{2:"战法",3:"技能",4:"手牌",5:"装备"}[L])(h.split(",")):te[h]?(m>1?m:"")+te[h]:Ie[h]?(w=Ie[h])==null?void 0:w.name:xe[h]?(_.set(h,(D=v.Root.Adventure.find(L=>L.ID===parseInt(I/10)))==null?void 0:D.chapname),xe[h].map(L=>L.generalname).join(`
`)):(k=v.Root.Card.find(L=>L.id==h))==null?void 0:k.name:""}function X({general:h,hp:m,maxhp:I,armor:w,getarmor:D,card:k,draw:L,sha:Q,next:Y,pre:ie}){return (ie?">":"")+h+m+(I!==m?"/"+I:"")+"血"+k+"牌摸"+L+"杀"+Q+(Y?">":"")}}(o["hd_roguelike.sgs"],o["hd_1v1_rogue.sgs"]),typeof t!="string"||t=="guanxing"){let we=function(C,O,z="https://web.sanguosha.com/220/h5_2/res/runtime/pc/general/big/bigSkin/"){let X=z+C+".png";return fetch(X).then(h=>{if(h.ok)return {name:O,desc:`<a target="_blank" href="${X}"><img src="${X.replace("bigSkin","static").replace("big/s","seat/s")}"></a>`};if(!z.includes("seat"))return we(C,O,z.replace("big/s","seat/s").replace("bigSkin","static"))})};G.gxjson={"结果为推演和预测，请以最终公告为准！更新时间":new Date().toLocaleString(),"【充值消费】":[]};let v=o["gn_dbs_quest.sgs"].TaskAll.Task.filter(({_attributes:C})=>C.clientTimeStart>=String(a)).map(({_attributes:C,Reward:O})=>{let z=",";return O.SelectReward&&(O=O.SelectReward,z="/"),O.RewardItem.length||(O.RewardItem=[O.RewardItem]),{id:C.id,time:C.timeStart.slice(0,8)+"—"+C.timeEnd.slice(0,8),desc:"【"+C.name+"】"+C.desc,reward:O.RewardItem.map(({_attributes:X})=>g(X.itemId+","+X.count)).join(z)}}).concat(o["sys_h5_quest.sgs"].root.Task.filter(C=>C.ClientTimeStart>=String(a)).map(({Id:C,Name:O,Desc:z,Rewards:X,Count:h,ClientTimeStart:m,ExtraRewards:I,ClientTimeEnd:w,SelectRewards:D})=>{let k=D?"/":",";return {id:C,time:m.slice(0,8)+"—"+w.slice(0,8),desc:"【"+O+"】"+z,reward:[X+","+h,...(I==null?void 0:I.split(";"))??[]].map(g).join(k)}})),E=o["sys_h5_task.sgs"].TaskAll.TaskNode.filter(({duration:C,quest_id:O})=>O&&(!C||(C==null?void 0:C.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6})?.*"),"$1"))>=String(a))).reduce((C,{duration:O,quest_id:z,name:X})=>{var I,w;let h=z.split(";").map(D=>parseInt(D)).filter(D=>D>0),m=(((w=O||((I=v.find(({id:D,time:k})=>h.includes(D)&&k))==null?void 0:I.time))==null?void 0:w.slice(0,8))+"·【"+(X==null?void 0:X.replace(/.*盲盒.*/,"盲盒福利"))+"】").replace(/.*(充值|消费).*/,"【充值消费】");return h.forEach(D=>{D!=""&&(C[D]=m);}),C},{});v.forEach(({id:C,...O})=>{let z=E[C]??String(a)+"·【其它任务】";G.gxjson[z]||(G.gxjson[z]=[]),G.gxjson[z].push(O);}),(C=>{var O;C.length>1&&(G.gxjson[((O=C[0].time)==null?void 0:O.slice(0,8))+"·兑换【占星秘宝】"]=C);})(o["ff_dbs_lottery_new.sgs"].root.ShopGoods.filter(({timeRange:C})=>(C==null?void 0:C.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a)).map(({Id:C,counts:O,exchangecount:z,timeRange:X})=>({time:X==null?void 0:X.replace(/.*?([0-9]+)T[0-9]+,([0-9]+)T[0-9]+/,(h,m,I)=>m+"-"+I),desc:"消耗·星石币*"+z,reward:g(C+","+O)}))),o["ff_exchange_new.sgs"].root.Common.filter(({duration:C})=>(C==null?void 0:C.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a)).forEach(({itemid:C,goods:O,rewardstype:z,duration:X})=>G.gxjson[X.slice(0,8)+"·【"+De(C).name+"】兑换"]=O.sort((h,m)=>m.exchangecount1-h.exchangecount1).map(({exchangecount1:h,Id2:m,counts:I,limitcounts:w,itemid2:D,exchangecount2:k})=>{let L=String(I).split(";");return {time:X.slice(0,8)+"—"+X.slice(16,24),desc:"消耗·"+g((D??C)+","+(k??h))+(w?",限"+w+"次":""),reward:String(m).split(";").map((Q,Y)=>g(Q+","+L[Y])).join("/")}})),o["sys_treasure_chest.sgs"].root.Common.filter(({duration:C})=>(C==null?void 0:C.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a)).forEach(({itemid:C,rewards:O,duration:z})=>G.gxjson[z.slice(0,8)+"·开启【"+De(C).name+"】"]=O.map(X=>({time:z.slice(0,8)+"—"+z.slice(16,24),desc:"开启·"+g(C+","+X.counts),reward:JSON.stringify(X).split(/,"goodsid[0-9]+":" *([0-9,;]+) *"/).filter(h=>(h==null?void 0:h.search(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/))>=0).map(h=>h.replace(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/,(m,I,w)=>g(I)+(w?"["+g(w)+"]":""))).join(X.rewardstype==2?"/":",")})));let j=[],_=[],q=[],te=o["sys_h5_dbs_clientserverpub.sgs"].client.DuoBao[0].item.filter(({BeginTime:C})=>C>String(a)).flatMap(({DropId:C,ExchangeId:O,BeginTime:z,EndTime:X})=>{let h=z.slice(0,8)+"-"+X.slice(0,8),m=(d.get(Math.abs(C))??[]).map(De).filter(({name:k})=>!["夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","招募令","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(k)),I=m.map(({ID:k})=>k),D=(d.get(Math.abs(O))??[]).map(De).filter(({ID:k,name:L,TypeID:Q})=>I.includes(k)||!(Q==43&&(L!=null&&L.endsWith("动态套装"))||Q==36&&(L!=null&&L.startsWith("文和乱武*"))||Q==25&&["赵襄","沙摩柯(SP)","孙尚香(界限突破)"].includes(L)||["枭雄金印","水晶碎片","圣魂玄晶","史诗皮肤锦囊","传说皮肤锦囊","至臻皮肤礼盒","谋定水晶自选礼盒"].includes(L))).map(({ID:k,name:L})=>{let Q=m.findIndex(({name:Y})=>Y==L);return Q>=0&&I.splice(Q,1,k),k});return Array.from(new Set([...I,...D])).map(De).map(({ID:k,TypeID:L,PicID:Q,name:Y,returngoods:ie,usedeffect:B,info:de,fragment:M})=>{var ke;let ue={time:h,name:Y,price:[...I.includes(k)?["四角"]:[],...D.includes(k)&&M?[M+"夺宝碎片"]:[]].join("/"),...(be=>be&&{desc:be})(["祈福灯","圣魂玄晶","枭雄金印"].includes(Y)?"":ie&&ie!="0"&&ie.split(";").filter(be=>(be==null?void 0:be.search(/[0-9]+,[0-9]+/))>=0).map(g).join(";")||(B==null?void 0:B.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&B.replace(/([0-9]+),[0-9,]+/g,g)||B&&y(B)||de)};return (L==36||((ke=ue.name)==null?void 0:ke.search(/\*[^0-9]/))>=0)&&q.push({name:Y,res:Q}),ue})});te.length&&(G.gxjson.夺宝行动=te,te=te.map(({name:C})=>C));let pe=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(C=>{var O;return ((O=C.x)==null?void 0:O.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a)&&C.a!=834901}).map(({a:C,ah:O,l:z})=>{if(z&&z.replace(/([0-9]+),[0-9,]+/g,(X,h)=>(!O&&![100301,200101,1325201].includes(parseInt(h))&&j.push(parseInt(h)),X)),O)_.push(C);else return C}).filter(Boolean).concat(j).sort((C,O)=>C-O).filter((C,O,z)=>O==0||C!=z[O-1]);Array.from(new Set(o["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.filter(C=>C.SellTime>String(a)).map(C=>C.baseID).concat(pe.concat(pe.filter((C,O,z)=>C-z[O-1]>1e3&&z[O+1]-C<1e3).map(C=>o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(O=>O.a-C>0&&O.a-C<1e4).map(O=>O.a)).reduce((C,O)=>[...C,...O],[])).sort((C,O)=>C-O)))).map(C=>De(C)).filter(C=>C&&![...te,"夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","招募令","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(C.name)).forEach(({ID:C,TypeID:O,PicID:z,name:X,maxBuyCount:h,yuanbao:m,returngoods:I,SellTime:w,usedeffect:D,info:k,yuanbaoonly:L,fragment:Q,exchange:Y,shopvisual:ie})=>{var de;let B={...w&&{time:w.replace(/.*?([0-9]+)T[0-9]+;([0-9]+)T[0-9]+/,(M,ue,ke)=>ue+"-"+ke)},name:X,...Y!=null&&Y.includes(",")?{price:g(Y)}:ie&&m!=999999&&{price:L?m+"通用元宝":m+"元宝",...h&&((M,ue)=>parseInt(M)>0?{max:ue+"个/"+(M==1?"":M)+"天"}:{})(...h.split(";"))},...(M=>M&&{desc:M})(["祈福灯","圣魂玄晶","枭雄金印"].includes(X)?"":I&&I!="0"&&I.split(";").filter(M=>(M==null?void 0:M.search(/[0-9]+,[0-9]+/))>=0).map(g).join(";")||(D==null?void 0:D.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&D.replace(/([0-9]+),[0-9,]+/g,g)||D&&y(D)||k)};(O==36||((de=B.name)==null?void 0:de.search(/\*[^0-9]/))>=0)&&q.push({name:X,res:z}),String(B.price).includes("夺宝")||String(B.price).includes("灵宝")?(G.gxjson.夺宝行动||(G.gxjson.夺宝行动=[]),G.gxjson.夺宝行动.push(B)):B.max?(G.gxjson.限购礼包||(G.gxjson.限购礼包=[]),G.gxjson.限购礼包.push(B)):(G.gxjson.其它道具||(G.gxjson.其它道具=[]),G.gxjson.其它道具.push(B));}),(ee=G.gxjson.其它道具)==null||ee.sort((C,O)=>C.price&&!O.price?-1:1),_.length&&(G.gxjson.祈福武将=Object.entries(_.map(C=>De(C)).filter(({returngoods:C})=>{var O;return ((O=De(C.split(";")[1].split(",")[0]))==null?void 0:O.TypeID)==25}).reduce((C,{name:O,lotteryPrice:z})=>(C[z]||(C[z]=[]),C[z].push(O.replace("武将","").replace(/\(.*?\)/g,"")),C),{})).sort((C,O)=>O[0]-C[0]).map(([C,O])=>({price:C+"同心结",reward:O.join("/")}))),(C=>{C.length&&(G.gxjson.祈愿台=C);})(o["ff_tiangong.sgs"].root.Drop.reduce((C,{Id:O,ItemId:z,MaxCount:X})=>(C[O]||(C[O]=[]),(h=>{["欢乐豆","手气卡","点将卡","换将卡","诏令天下","夺宝券","招募令","武将包","皮肤包","朱砂","灵宝","桃花","功勋","校尉将印","大将军印","水晶碎片","圣魂玄晶","传世玉玺"].some(m=>h.startsWith(m))||C[O].push(h);})(g(z+","+X)),C),[]).reduce((C,O)=>{if(O){let z=C.find(({reward:X})=>O.includes(X));z&&(z.reward=O.join(","));}return C},o["ff_tiangong.sgs"].root.Common.slice().reverse().reduce((C,{Id:O,Name:z,bigrewards:X,Duration2:h})=>{let m=parseInt(h.slice(0,8))+1;if(m<parseInt(a))return C;let I=C.find(({name:w})=>w==z);return I?I.time+=";"+m:C.push({name:z,reward:pt[X],time:String(m)}),C},[]).reverse()));const xe=(()=>{var C={};return function(O){return C[O]?C[O]:C[O]=o["ff_chess.sgs"].root.NewChess.filter(({PlanId2:z})=>z==O).reduce((z,{MaxFloors:X})=>z+parseInt(X),0)}})();(C=>{C.length&&(G.gxjson.绘卷=C);})(o["ff_chess.sgs"].root.Common.reduce((C,{GrandPrize:O,PlanID2:z,duration2:X})=>{var m;let h=parseInt(X.slice(0,8))+1;return h<parseInt(a)||C.push({reward:(m=De(O))==null?void 0:m.name,预估价格:xe(z)/2>>0,time:h+"-"+X.slice(16,24)}),C},[])),G.gxjson.新品皮肤=q.map(({name:C})=>({name:C})),Object.entries(G.gxjson).forEach(([C,O])=>G.gxjson[C]=Array.isArray(O)?O.map(z=>c(z,u)):c(O,u)),(!t||t=="guanxing")&&e(Promise.all(q.map(({name:C,res:O})=>we(O,C))).then(C=>G.gxjson.新品皮肤=C.filter(Boolean)).then(()=>(Object.entries(G.gxjson).forEach(([C,O])=>G.gxjson[C]=Array.isArray(O)?O.map(z=>c(z,u)):c(O,u)),G.gxjson)));}e(o),console.warn("[initMap] Config_w 解析完成");})))}function Ve(...t){return new Function("_a","_b","return "+t.map(e=>"((_a."+e+")-(_b."+e+"))").join("||"))}function Ai(t,e){const n=t.matchAll(/\[(\d+),(\d+)\]/g),i=Array.from(n).map(a=>({GoodsBaseID:parseInt(a[1]),ChangeCount:parseInt(a[2])}));if(i.length!==e.length)return !1;const s=new Map(e.map(a=>[a.GoodsBaseID,a.ChangeCount]));return i.every(a=>s.get(a.GoodsBaseID)===a.ChangeCount)&&e.every(a=>i.some(r=>r.GoodsBaseID===a.GoodsBaseID&&r.ChangeCount===a.ChangeCount))}var Ri=`<head><title>三国杀打小抄</title><meta charset="UTF-8"><style>::-webkit-scrollbar{width:5px;height:12px}::-webkit-scrollbar-track{border:1px solid #050505}::-webkit-scrollbar-thumb{background:#5f563f}::-webkit-scrollbar-thumb:hover{background:#2c2c2c}.body{width:100%;padding:0;font-size:13px;background:#23201d;background-size:cover;color:#f2de9c;display:flex;flex-direction:column;margin:1px;user-select:none;max-width:100vw;overflow-x:hidden;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Tahoma,Arial,sans-serif}.nav{width:100%;background:#23201d;text-align:center;display:flex;align-items:center;gap:15px;padding:5px 0}.nav1{font-weight:bolder;height:20px;width:40%;color:#f2de9c;background:#23201d;margin-right:15px;display:block}.sha{font-weight:bolder;height:20px;width:40%;color:#f2de9c;background:#23201d;margin-right:15px;display:block}#nav1:empty{display:none}.nav2{height:20px;width:49%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.nav2:hover{color:#f2de9c;background:#372820;border:1px solid #f2de9c}.nav2:focus{background:#372820;box-shadow:1px 1px 3px #f2de9c}.content{margin:1px}.AC-head{font-weight:bolder;height:66px;width:13%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin:1px;border-radius:5px;border:1px #23201d solid;box-shadow:1px 0 3px;overflow:hidden}.AC-head:hover{background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.AC-body{height:60px;width:79%;float:left;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.invite-body{height:40px;width:92%;float:left;display:flex;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:5px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.orderContainer{text-align:right;vertical-align:bottom}.order-head{font-weight:bolder;width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.order-body:empty{height:35px}.order-body{position:relative;padding:5px;height:auto;width:94%;display:block;box-shadow:1px 1px 3px;z-index:1;margin:1px;overflow:hidden;border-radius:5px}.order-body:after{text-align:center;content:var(--No-content, '座位号丨武将');position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownShouPai{border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.knownCardsInHand{text-align:center;position:relative;overflow:hidden;display:none;height:auto}.knownCards:empty{text-align:center;position:relative;overflow:hidden;display:none}.knownCards{width:94%;text-align:center;position:relative;overflow:hidden;height:auto}@keyframes blink{50%{border-color:#f2de9c}}.paiduiCards:after{text-align:center;content:'牌堆';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.qipaiCards:after{text-align:center;content:'本回合弃牌堆';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownCards{padding:5px;height:auto;width:94%;float:right;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.knownCards:after{text-align:center;content:'场上手牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#quanBian:after{text-align:center;content:'权变牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#yanXi:after{text-align:center;content:'宴戏牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardTypeDetail:after{text-align:center;content:'牌堆类型详情';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.ding{text-align:center;width:100%;position:relative;height:auto;display:none}.dingCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.dingCards:after{content:'第一张为牌堆顶';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.di{text-align:center;width:100%;position:relative;height:auto;display:none}.diCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.diCards:after{content:'第一张为牌堆底';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardDetail{width:100%;overflow:hidden;display:block}.type{width:100%;float:left}.cardTypeContainer{width:100%;overflow:hidden;display:block}.type-head{width:10%;float:left;text-align:center;color:#f2de9c;margin-left:3px;display:block;overflow:hidden;cursor:pointer}.type-body{padding:5px;width:94%;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.cardType{font-size:12px;width:25%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.cardType:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.storeDetail{font-size:12px;width:50%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.detail{width:100%;float:left;overflow:hidden}.detail-head{width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.detail-body{min-height:40px;padding:5px;width:94%;float:left;display:block;box-shadow:1px 1px 3px;margin:1px;border-radius:5px;overflow:hidden}.panel-header{background:#23201d;color:#f2de9c;padding:3px;text-align:left;border:none;width:100%;cursor:pointer;display:flex;align-items:center;border-radius:5px;border:1px transparent solid}.triangle{width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-left:6px solid #f2de9c;margin-right:10px;transition:transform .3s ease}.panel-content{max-height:0;width:100%;float:left;display:block;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;transition:max-height .3s ease-out}.panel-header.active .triangle{transform:rotate(90deg)}.panel-header.active{color:#f2de9c;background:#372820}.panel-header:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.r{color:#f04155}.suitRec{width:50%;float:right;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",Tahoma,Arial,sans-serif;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7)}.suit{width:50%;float:left}.phrase{float:left}.face{width:12.5%;display:block;float:left}.face:hover{width:12.5%;display:block;float:left;background:#f2de9c}#shandian{width:100%;float:left}.function{width:50%;margin:1px}.jizhan{width:100%;float:left}.yanjiao{width:50%;float:left}.yanjiaospan{border:1px solid #0000;box-sizing:border-box}.yanjiaospan:hover{border:1px solid #f2de9c;cursor:pointer}.calRes{width:98%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px;font-size:13px;margin:1px}.secKillDetailText{width:100%;height:26px;float:left;text-align:center;color:#f2de9c;background:#23201d;display:block;border-radius:5px;line-height:26px;margin-top:17px}.calRes:not(:disabled):hover{font-size:12px;color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhuBTN{width:48%;height:20px;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhuBTN:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhu{width:100%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhu:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#mySeatID1{width:48%}#mySeatID2{width:48%}.res{width:100%;float:left}a:link,a:visited{color:inherit;text-decoration:none;display:inline-flex;text-decoration:underline;border-radius:5px;cursor:pointer;align-items:center;justify-content:center}a:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#donate{position:relative;color:#f2de9c;display:block;text-align:center}.uuid{position:relative;color:#f2de9c;display:block;text-align:center;cursor:pointer}.uuid:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.uuid:active{background:#372820}.width{width:100%;height:5px;clear:both}.switch-container{display:flex}.switch{position:relative;display:block;margin-left:10px;width:56px;height:26px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#23201d;-webkit-transition:.4s;transition:.4s;border-radius:34px;border:1px solid #f2de9c;--slider-position:2px}.slider:before{position:absolute;content:"";height:20px;width:20px;left:var(--slider-position,2px);bottom:2px;background-color:#f2de9c;-webkit-transition:.4s;transition:.4s;border-radius:50%}input:checked+.slider{background-color:#372820}input:focus+.slider{box-shadow:0 0 1px #372820}.status{position:absolute;top:50%;transform:translateY(-50%);left:5px;color:#555}.explanation{margin:0 10px;display:flex;width:100%}input:checked+.slider+.status:before{content:'开'}input:checked+.slider+#autoBotStatus:before{content:var(--bot-status, '30');color:#f2de9c}input+.slider+#autoBotStatus:before{content:var(--bot-status, '关')}input+.slider+.status:before{content:"关"}.calRes:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.markedCard{display:inline-flex;align-items:center;border-radius:5px;border:1px solid #000;width:auto;background-color:#372820;color:#f2de9c}.mark{writing-mode:vertical-rl;margin-right:0;color:#f2de9c}.markedCard>.mark:only-child{display:none}.shoupai{color:#000;--shoupai-width:33px;padding:0;font-weight:bolder;margin-right:calc(32px - var(--shoupai-width));float:left;width:var(--shoupai-width);min-width:var(--shoupai-width);height:38px;border:1px solid #000;text-align:center;background:rgba(210,200,160,.5);border-radius:5px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",'Noto Color Emoji';white-space:nowrap;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7);font-size:13px}.shoupai.R{color:red}.shoupai.G{background:0}.shoupai.G .shoupai{background:0;pointer-events:none}.order-body:not(#paiduiCards) .shoupai:disabled{display:none}.order-body:not(#paiduiCards) .shoupai.G{width:auto}.left{width:30%;float:left}.right{width:70%;float:right}input[type=checkbox]:disabled+.slider{background-color:gray;cursor:not-allowed}.question-mark{display:inline-block;position:relative;width:15px;height:15px;line-height:15px;text-align:center;border:1px solid #f2de9c;border-radius:50%;margin-left:2px;transition:background-color .3s}.question-mark:hover{background-color:#372820;cursor:pointer}.tooltip{position:relative;background-color:#333;text-align:center;padding:5px;border-radius:5px;max-width:200px;white-space:pre-line;z-index:10000000001;opacity:0;pointer-events:none;transition:opacity .1s ease-in-out;color:#f2de9c;font-size:13px}.tooltip.visible{opacity:1;pointer-events:auto}.tooltip.top{margin-left:50px}#sidebarHint{position:fixed;top:0;right:0;width:25px;height:100%;background-color:rgba(55,40,32,.8);color:#f2de9c;display:none;justify-content:center;align-items:center;font-size:20px;writing-mode:vertical-rl;text-orientation:upright}:root{--my-background-image:url('https://web.sanguosha.com/220/h5_2/res/assets/bigPng/propGet.png')}.sorderContainer{font-size:13px;width:100%;display:flex;align-items:center;width:146px;z-index:10000000000;user-select:none;text-align:left;transition:height .2s;position:fixed;transform-origin:0 0}.sorder-head{display:flex;align-items:center;justify-content:center;font-weight:bolder;width:10%;height:25px;text-align:center;color:#f2de9c;margin-left:3px}.sorder-body{pointer-events:auto;height:auto;width:100%;float:right;display:flex;flex-wrap:wrap;overflow:hidden;z-index:1;max-height:48px}.sorder-body.show-ellipsis::after{content:'...';position:absolute;bottom:0;left:50%;transform:translateX(-50%);text-align:center;color:#f2de9c;font-weight:700;height:20px;background:linear-gradient(to bottom,rgba(255,255,255,0),rgb(0 0 0 / 80%));width:inherit}.sorder-body:hover{max-height:none;overflow:visible}.sorder-body:hover::after{display:none}.sorder-body:not(#paiduiCards) .shoupai:disabled{display:none}.sorder-body:not(#paiduiCards) .shoupai.G{width:auto}@keyframes fadeInLeftToRight{0%{clip-path:inset(0 100% 0 0);opacity:0}100%{clip-path:inset(0 0 0 0);opacity:1}}@keyframes fadeOutRightToLeft{0%{clip-path:inset(0 0 0 0);opacity:1}100%{clip-path:inset(0 100% 0 0);opacity:0}}.ac-tooltip{position:fixed;top:100px;left:45%;background-color:transparent;background-image:var(--my-background-image);cursor:pointer;background-size:100% 100%;color:#f44336;font-size:16px;border-radius:4px;z-index:9999;overflow:hidden;white-space:nowrap;padding:16px 32px;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transform:translateX(0);transition:opacity 1s ease-in-out,visibility 1s ease-in-out}.ac-tooltip.green{background-color:transparent;color:#f2de9c}.city{visibility:hidden;transition:opacity 1s ease-in-out,visibility 1s ease-in-out;background-color:rgba(55,52,39,.7);color:#f2de9c;align-items:center;justify-content:center;border-radius:5px;text-align:center;flex-direction:column;padding:5px}hr{width:100%;margin:0}@keyframes blink{50%{border-color:#f2de9c}}.centerUI{width:18px;height:18px;background-color:#4e251f;border-radius:4px;display:flex;border:1px solid rgb(110 107 91);justify-content:center;align-items:center;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,.3);visibility:hidden}.centerUI::after{content:"!";font-family:Arial,sans-serif;font-size:15px;color:#fff;font-weight:700}.centerUI:hover{background-color:rgb(134 74 58)}.show{animation:fadeInLeftToRight 1s forwards,blink 2s infinite;visibility:visible}.hide{animation:fadeOutRightToLeft 1s forwards;visibility:hidden}.window{width:1024px;height:600px;border:2px solid #333;border-radius:8px;box-shadow:0 0 15px rgba(0,0,0,.5);position:relative;background-color:#f5f5f5;overflow:hidden}.window-header{display:flex;justify-content:space-between;align-items:center;background-color:#23201d;color:#fff;padding:5px;cursor:move}.window-header .title{font-weight:700;padding-left:10px}.window-header .controls{display:flex;gap:5px}.window-header .controls button{background:0 0;border:none;color:#fff;cursor:pointer;padding:5px}.window-header .controls button:hover{background-color:rgba(255,255,255,.2)}.window-content{width:100%;height:calc(100% - 40px);border:none}.fullscreen{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-5C3C11THB3"><\/script><script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"><\/script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5C3C11THB3")<\/script></head><div class="body"><div class="nav"><div class="nav1" id="phrase">当前阶段提示</div><div class="sha" id="sha">可出杀次数：0</div></div><div><a href="https://goka.top:8080/chunlian" target="_blank" class="calRes">查看春联</a></div><div class="content" id="content"><div class="orderAndShouPai" id="orderAndShouPai"><button class="panel-header"><span class="triangle"></span> <b>武将手牌</b></button><div class="panel-content order" id="button"><div class="orderContainer" id="or1"><div class="order-body No1" id="1" style="--No-content:'神诸葛亮丨一'"><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button><div class="markedCard"><span class="mark">木马</span> <button class="shoupai G">♥10<br>测试</button> <button class="shoupai R">♦K<br>测试</button></div><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button></div></div><div class="orderContainer" id="or2"><div class="order-body No2" id="2" style="--No-content:'卧龙诸葛丨二'"><button class="shoupai G">♥10<br>暗牌</button> <button class="shoupai G">♥10<br>样式</button></div></div><div class="orderContainer" id="or3" style="--No-content:'天候孔明丨三'"><div class="order-body No3" id="3"></div></div><div class="orderContainer" id="or4" style="--No-content:'诸葛亮丨四'"><div class="order-body No4" id="4"></div></div><div class="orderContainer" id="or5" style="--No-content:'武诸葛亮丨五'"><div class="order-body No5" id="5"></div></div><div class="orderContainer" id="or6" style="--No-content:'卧龙凤雏丨六'"><div class="order-body No6" id="6"></div></div><div class="orderContainer" id="or7" style="--No-content:'界卧龙诸葛丨七'"><div class="order-body No7" id="7"></div></div><div class="orderContainer" id="or8" style="--No-content:'界诸葛亮丨八'"><div class="order-body No8" id="8"></div></div></div><div><div class="orderContainer"><div class="knownCards" id="knownCards"></div></div><div class="orderContainer"><div class="order-body paiduiCards" id="paiduiCards"></div></div><div class="orderContainer"><div class="order-body qipaiCards" id="qipaiCards"></div></div><div class="orderContainer"><div class="knownCards quanBianYanXi" id="quanBian"></div><div class="knownCards quanBianYanXi" id="yanXi"></div></div></div></div><div class="width"></div><div class="cardDetail" id="cardDetail"><div class="space"></div><div class="detail"><div class="detail-body"><div class="suit r" id="heart">♥红桃 × 0</div><div class="suit" id="spade">♠黑桃 × 0</div><div class="suit" id="club">♣梅花 × 0</div><div class="suit r" id="diamond">♦方片 × 0</div><div class="suit r" id="hongsha">红杀 × 0</div><div class="suit" id="heisha" n>黑杀 × 0</div><span>乱击/权变</span><div class="suitRec" id="suit"></div><br><span>博图</span><div class="suitRec" id="boTu"></div><br><span>上一张使用的牌</span><br><button class="shoupai R" id="lastUseCard">＾＾<br>•ω•</button><br><br><br><div id="guhuo" style="display:none">蛊惑牌</div><div class="function yanjiao" id="yanjiao">严教小抄</div><button class="function mizhuBTN" id="mizhu">糜竺小抄</button> <button class="function mizhu mySeatID" id="mySeatID1">座位：1</button> <button class="function mizhu mySeatID" id="mySeatID2">座位：2</button><div class="function res" id="result">结果样式：1 1 1 1 = 4</div></div></div><div class="width"></div><div class="type"><div class="cardTypeContainer"><div class="type-body type1" id="type1"><button class="cardType" id="test1">小抄</button> <button class="cardType">开发</button> <button class="cardType">小伙伴</button></div></div><div class="cardTypeContainer"><div class="type-body type2" id="type2"><button class="cardType">霜迟</button> <button class="cardType">孤独尊</button> <button class="cardType">无所谓</button> <button class="cardType">埃城</button> <button class="cardType">辉弥</button> <button class="cardType">天野</button> <button class="cardType">人富</button></div></div><div class="cardTypeContainer"><div class="type-body type3" id="type3"></div></div><div class="orderContainer"><div class="knownCards cardTypeDetail" id="cardTypeDetail"></div></div></div></div><div class="width"></div><div class="width"></div><div class="laya" id="laya"><div class="space"></div><button class="panel-header laya-header"><span class="triangle"></span> <b>快捷操作</b></button><div class="panel-content" id="layaDiv"><div class="switch-container"><div id="autoBotSwitchContainer"><span class="explanation">自动挂机<span class="question-mark" data-tooltip="AI接管挂机刷酒馆30亲密度&#10;自动创建演武房间开始对战&#10;建议点将张辽禁将只留标风&#10;禁用其它SP武将可提高胜率&#10;到身份演武房间列表后开启&#10;界小抄用户可以无限制使用&#10;开关数字表示酒馆剩余时间&#10;双击打开官阶百胜无尽挂机&#10;到经典场国战开启可刷福卡">?</span></span> <label class="switch"><input id="autoBotSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoBotStatus"></span></label></div><div><span class="explanation" id="autoExplanation"></span></div></div><div class="switch-container"><div><span class="explanation">盖主速刷<span class="question-mark" data-tooltip="主公点将黄盖一分钟苦肉自杀速刷&#10;可用来刷武将百胜战功和官阶任务&#10;保证已激活的账号在 7 天内登录过&#10;一：登录小号创建自选身份密码房&#10;二：多开大号加入房间点自动挂机&#10;三：大号需双击自动挂机开始锁定&#10;四：小号点将黄盖，打开盖主速刷&#10;五：大号准备并保持两窗口在前台&#10;">?</span></span> <label class="switch"><input id="autoHGSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoHGStatus"></span></label></div><div><span class="explanation" id="autoHGExplanation"></span></div></div><div class="switch-container" style="display:none"><div><span class="explanation">加入互助<span class="question-mark" data-tooltip="点击加入小抄互相助力小组&#10;每天自动助力三位小抄玩家&#10;同时收到三位小抄玩家助力&#10;默认为小抄给当前玩家助力&#10;右侧可输入想要助力的玩家&#10;“再”打开《加入互助》开关&#10;该玩家可收到三个小抄助力&#10;">?</span></span> <label class="switch"><input id="autoInviteSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><textarea class="invite-body" type="text" id="inviteName" required maxlength="10" size="10" placeholder="大西瓜"></textarea></div></div><button class="calRes" id="guanxing">自助观星</button> <button class="calRes" id="mail" disabled="disabled">一键领取邮箱物品</button> <button class="calRes" id="task" disabled="disabled">一键领取所有任务奖励</button></div></div><div class="store" id="store"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>山河图</b></button><div class="panel-content"><div><button class="calRes" id="openStore">点击打开商店换装备->跳奇遇</button></div><div><span id="chongsheng">重生是否发动：否</span></div><div><span id="sanBanFu">三板斧计数器</span></div><div id="storeDetail"><button class="storeDetail">集市霸王·壹300</button> <button class="storeDetail">集市霸王·贰200</button> <button class="storeDetail">集市霸王·叁100</button> <button class="storeDetail">会员商店·肆1100</button> <button class="storeDetail">稳定承载1100</button> <button class="storeDetail">极奢1100</button></div></div></div><div class="secKill" id="secKill"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>秒杀连点器（悬停查看详情）</b></button><div class="panel-content" id="secKillDetail"><div class="left"><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem1Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem2Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem3Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br></div><div class="right"><span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span></div></div></div><div class="chat" id="chat"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>聊天（点击自动输入）</b></button><div class="panel-content chat-body"></div></div><div class="CDK"><button class="panel-header"><span class="triangle"></span> <b>兑换码（点击即兑换）</b></button><div class="panel-content"><div class="function res" id="CDK"><button class="calRes">小麦好帅</button></div></div></div><div class="tianguo"><button class="panel-header"><span class="triangle"></span> <b>统计</b></button><div class="panel-content"><button id="gamerecord" class="calRes" style="text-align:center">战绩胜率统计</button><div id="PlayerTianGuo" style="text-align:center">你的天过次数/总次数</div><div><div id="lottery"><a href="https://goka.top:8080/choujiang?username=" target="_blank" class="calRes" id="choujiang">点击查看祈愿台数据</a></div></div></div></div><button class="panel-header"><span class="triangle"></span> <b>设置</b></button><div class="setting panel-content"><div class="switch-container"><div><span class="explanation">皮肤体验<span class="question-mark" data-tooltip="该功能仅限于体验皮肤&#10;喜欢还请购买支持画师&#10;此功能随时失效！！！">?</span></span> <label class="switch"><input id="skinSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="skinStateButton"><span class="explanation">动态皮肤</span> <label class="switch"><input id="skinStateSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">屏蔽动态<span class="question-mark" data-tooltip="屏蔽其他人的动态皮肤&#10;电脑卡顿的话可以打开">?</span></span> <label class="switch"><input id="skinStateBlockSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">皮肤壁纸 <span class="question-mark" data-tooltip="打开后进入皮肤详情界面进行设置&#10;可以将动静态皮肤设置为游戏壁纸&#10;也可以把静态皮肤图片保存到本地&#10;不建议与微端自定义背景同时使用">?</span> </span><label class="switch"><input id="skinPaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="paperStateButton"><span class="explanation">全局壁纸<span class="question-mark" data-tooltip="对局外也将背景替换为皮肤壁纸">?</span></span> <label class="switch"><input id="allPaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">山河图壁纸 <span class="question-mark" data-tooltip="强制打开山河图壁纸">?</span> </span><label class="switch"><input id="rogueWallpaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div style="display:none"><span class="explanation">金色卡背</span> <label class="switch"><input id="cardBackSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">明牌框框 <span class="question-mark" data-tooltip="明牌展示在武将下面">? </span></span><label class="switch"><input id="seatUISwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">五阶特效 <span class="question-mark" data-tooltip="其他角色显示五阶特效">? </span></span><label class="switch"><input id="generalSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">自动签到 <span class="question-mark" data-tooltip="自动领取打卡签到的奖励">? </span></span><label class="switch"><input id="autoSignSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">跳体验卡 <span class="question-mark" data-tooltip="签到会有体验武将&#10;如领取会污染将池&#10;开启按钮跳过领取&#10;月底记得手动领取">? </span></span><label class="switch"><input id="autoSignSkipSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">领武将包<span class="question-mark" data-tooltip="每天登录，自动领取免费的武将包">?</span></span> <label class="switch"><input id="autoWuJiangSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">公会三敲<span class="question-mark" data-tooltip="每天自动公会三敲&#10;无惧公会长的诫厉">?</span></span> <label class="switch"><input id="autoDrumSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">月卡奖励<span class="question-mark" data-tooltip="自动领取月卡奖励&#10;界小抄先行体验">?</span></span> <label class="switch"><input id="autoYueKaSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">自动砍树<span class="question-mark" data-tooltip="每天登录自动砍树&#10;界小抄先行体验">?</span></span> <label class="switch"><input id="autoKanShuSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">跳过弹窗<span class="question-mark" data-tooltip="跳过领取武将&#10;MVP结算&#10;出货弹窗&#10;老仙特效&#10;加快氪金速度">?</span></span> <label class="switch"><input id="skipWindowSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">击杀特效 <span class="question-mark" data-tooltip="屏蔽击杀特效">? </span></span><label class="switch"><input id="killEffectSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">兑换码&emsp;<span class="question-mark" data-tooltip="开启将显示兑换码通知&#10;且收集您的兑换码兑换">?</span></span> <label class="switch"><input id="CDKNotificationSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">卡牌标签<span class="question-mark" data-tooltip="会在自己手上的卡牌显示标签&#10;明牌：五谷顺手迂志等明牌&#10;新组合：界小抄提示百出的新组合&#10;更多标签在开发中">?</span></span> <label class="switch"><input id="cardLabelSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div></div><div class="width"></div><div class="ACContainer"><textarea class="AC-body" type="text" id="AC" name="AC" required placeholder="点击添加激活码&#13;&#10;当前激活码未激活"></textarea> <button class="AC-head" type="submit" id="ACSubmit">激活</button></div><div style="text-align:center"><a href="https://afdian.com/@yimadaO_o" target="_blank">开发不易 如您喜欢 不妨支持小抄</a><div class="width"></div><a href="https://qm.qq.com/q/PBA8Mt4rCI" target="_blank">加群一起玩</a><div class="width"></div><a href="https://support.qq.com/products/664780/" target="_blank">提需求</a><div class="width"></div><a href="https://greasyfork.org/zh-CN/scripts/448004-%E4%B8%89%E5%9B%BD%E6%9D%80%E6%89%93%E5%B0%8F%E6%8A%84/versions" target="_blank">查看历史更新</a><div class="width"></div><div class="uuid id" id="uuid">id：</div><div class="width"></div><div class="uuid nickName" id="nickName">昵称：</div><div class="width"></div><div class="uuid guildID" id="guildID">公会数字ID：</div><div class="width"></div><div class="width"></div></div></div><script><\/script></div>`;let et=null;const at=" "+"2.9.44".replace(/^2\.9\./,""),Oi=`
新增功能：卡牌标签，将在自己的手牌增加一个提示标签，设置中打开；
明牌：将在自己的手牌增加一个提示标签，提示自己哪张牌是展示过的明牌；
界小抄；
新增荀攸百出新组合标签，提示手上的牌哪张是没用过的新百出组合；
皮肤体验中sp/族/界/标皮肤互通；
该版本改动较多，如有问题请及时反馈以便及时修复
`.replace(/；/g,"<br>");var yn,bn;(bn=(yn=document.getElementById("createSkinIframeSource"))==null?void 0:yn.contentWindow)==null||bn.document;function Gi(){return window.WDVerSion="1.0.0",window.padding=le.padding||0,window.addEventListener("resize",_n),new Promise((t,e)=>{function n(){return new Promise(i=>{function s(){var a;typeof JSZipUtils<"u"&&typeof CtrUtil<"u"&&typeof((a=CtrUtil==null?void 0:CtrUtil.Ctr)==null?void 0:a.Ofb_Dec)<"u"&&typeof SystemContext<"u"&&document.getElementById("bgDiv")?Mn(!0).then(i):setTimeout(s,1e3);}s();})}Promise.all([n()]).then(t).catch(e);})}function _i(){var t,e,n,i;return window.removeEventListener("resize",_n),window.removeEventListener("resize",Pn),window.removeEventListener("SGSresize",Nn),(t=document.getElementById("seatUI"))==null||t.remove(),(e=document.getElementById("rogueUI"))==null||e.remove(),(n=document.getElementById("cusBGDiv"))==null||n.remove(),(i=document.getElementById("createIframe"))==null||i.remove(),S.isFrameAdd=!1,!0}function _n(){window.innerWidth=document.documentElement.clientWidth-window.padding;}function Nn(){window.dispatchEvent(new Event("resize"));}let ut;function Pn(){ut&&clearTimeout(ut),ut=setTimeout(()=>{Pi(),ut=null;},500);}async function Mn(t=!1){var e,n,i,s,a;if(t&&((e=document.getElementById("seatUI"))==null||e.remove(),(n=document.getElementById("rogueUI"))==null||n.remove(),(i=document.getElementById("cusBGDiv"))==null||i.remove(),(s=document.getElementById("createIframe"))==null||s.remove(),S.isFrameAdd=!1),!S.isFrameAdd){window.addEventListener("resize",Pn),SystemContext._gameScreenType=SystemContext.gameScreenType,SystemContext._gameScale=SystemContext.gameScale,Object.defineProperty(SystemContext,"gameScreenType",{get:function(){return this._gameScreenType},set:function(r){this._gameScreenType!==r&&(this._gameScreenType=r,window.dispatchEvent(new Event("SGSresize")));}}),Object.defineProperty(SystemContext,"gameScale",{get:function(){return this._gameScale},set:function(r){this._gameScale!==r&&(this._gameScale=r,window.dispatchEvent(new Event("SGSresize")));}}),window.addEventListener("SGSresize",Nn);try{document.getElementById("bgDiv").firstElementChild.draggable=!1,(a=document.querySelector("link[rel=stylesheet]"))==null||a.remove();}catch{}return ji(),Ni(),zi(),S.isFrameAdd=!0,Li(!0)}}function Ni(){var t=document.getElementById("bgDiv");if(t){var e=document.createElement("div");e.id="cusBGDiv",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.zIndex="0",e.style.pointerEvents="none";var n=document.createElement("video");n.className="bg-ani",n.id="sgsBgVideo",n.autoplay=!0,n.loop=!0,n.muted=!0,n.preload="auto",n.style.setProperty("object-fit","fill","important");var i=document.createElement("img");i.className="bg-ani",i.id="sgsBgIMG",i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i.style.zIndex="1",i.style.position="absolute",i.style.top="0",i.style.left="0",e.appendChild(n),e.appendChild(i),t.appendChild(e),window.dispatchEvent(new Event("resize"));}}function Pi(){if(!SystemContext)return;F.width=SystemContext.gameWidth*SystemContext.gameScale>>0,F.height=SystemContext.gameHeight*SystemContext.gameScale>>0,F.scale=SystemContext.gameScale,F.seatUIs&&F.seatUIs.length>0&&(Hn(),yt());let t={width:(SystemContext.gameWidth*SystemContext.gameScale>>0)/window.devicePixelRatio,height:(SystemContext.gameHeight*SystemContext.gameScale>>0)/window.devicePixelRatio};le.padding&&document.getElementById("createIframe")?(document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px",document.getElementById("createIframe").style.height="100%",document.getElementById("createIframe").style.right="0px",document.getElementById("createIframe").style.top="0px"):document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px";let e=document.getElementById("cusBGDiv"),n=document.getElementById("sgsBgVideo"),i=document.getElementById("sgsBgIMG"),s=document.getElementById("seatUI"),a=document.getElementById("rogueUI"),r=document.getElementById("centerUI"),o=((window.innerHeight*window.devicePixelRatio-SystemContext.gameScale*SystemContext.gameHeight)/(2*window.devicePixelRatio)+SystemContext.gameScale*SystemContext.gameHeight/2)/window.devicePixelRatio;e&&(e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.left=window.innerWidth/2+"px",e.style.top=o+"px"),n.width=t.width,n.height=t.height,n.style.left=window.innerWidth/2+"px",n.style.top=o+"px",i.width=t.width,i.height=t.height,s.style.width=`${t.width}px`,s.style.height=`${t.height}px`,s.style.left=window.innerWidth/2+"px",s.style.top=o+"px",a.style.width=`${t.width}px`,a.style.height=`${t.height}px`,a.style.left=window.innerWidth/2+"px",a.style.top=o+"px",F.centerX=window.innerWidth>t.width?t.width/2:window.innerWidth/2,F.centerY=t.height/2,r.style.left=210*SystemContext.gameScale/window.devicePixelRatio+"px",r.style.top=52*SystemContext.gameScale/window.devicePixelRatio+"px",F.cities.length>0&&Tt(F.cities);}function Hn(){const t={ScaledHeight:F.selfSeatUiUnscaledHeight*F.scale};let e=F.unscaledWidth*F.scale,n=F.unscaledHeight*F.scale;F.ScaleWidth=e,F.ScaleHeight=n;let i=F.height,s=F.width;var a=t.ScaledHeight,r=0,o=0,c=F.seatUIs.length;if(c!=1){r=e,o=n;var u=[];u=F.seatUIs;var f=u.length-1,l=0,d=0,p=0;f<3?d=f:f==3?d=1:f==4||f==6?d=2:(f==5||f==7)&&(d=3),l=f-d>>1,p=f-l-d,N.isShanHeTu&&c==3&&F.friendGeneral==1&&(d=1,p=1);var g=1,W,y,x=0,A=0,ee=0,v=0,E=F.rightBarWidth*F.scale,j=0;if(l>0){var _=r,q=o*l;for(ee=(i-a-q)*.25>>0,F.verticalGap=ee,q+=(l-1)*ee,W=g+l,x=s-_-F.paddingRight*F.scale-E-j,A=(i-a-q-F.paddingTop*F.scale-F.paddingBottom>>1)+(F.paddingTop+10)*F.scale+q+F.leftRightTop;g<W;g+=1)y=u[g],A-=n,y.posX=(x-5>>0)/window.devicePixelRatio,y.posY=(A+n>>0)/window.devicePixelRatio,y.DisplayLocation="Right",A-=ee;}if(d>0){var te=r*d;for(v=(s-E-te)*.07>>0,F.horizontalGap=v,te+=(d-1)*v,W=g+d,x=(s-te-E)/2+te+(s<=1600?F.paddingLeftTopExtra:0),A=(F.paddingTop+10)*F.scale;g<W;g+=1)y=u[g],x-=e,y.posX=(x>>0)/window.devicePixelRatio,y.posY=(A+n>>0)/window.devicePixelRatio,y.DisplayLocation="Top",x-=v;}var pe=0;if(p>0){var xe=o*p;for(ee=(i-a-xe)*.25>>0,xe+=(p-1)*ee,W=g+p,x=F.paddingLeft*F.scale,A=(i-a-xe-F.paddingTop*F.scale-F.paddingBottom>>1)+(F.paddingTop+10)*F.scale+F.leftRightTop;g<W;g+=1)y=u[g],y&&(y.DisplayLocation="Left",y.posX=(x+pe>>0)/window.devicePixelRatio,y.posY=(A+n>>0)/window.devicePixelRatio),A+=o+ee;}}}function jt(t){if(F.seatUIs=[],yt(),t===null)return;let e=N.sequence(N.mySeats[0]);F.seatUIs=e.map(n=>({actualSeatID:N.getOrder(n)+1})),Hn(),yt();}function Mi(){document.getElementById("sgsBgIMG").src="https://web.sanguosha.com/10/pc/res/assets/runtime/general/maxBig/604701.png",setTimeout(function(){document.getElementById("sgsBgIMG").src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";},2e4);}function Hi(){var t=document.createElement("div");t.id="sidebarHint",t.innerText="拖到这里变为变为侧边栏，再次拖动取消侧边栏",document.body.appendChild(t);}function ji(){var t=document.createElement("div");t.id="seatUI",t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.pointerEvents="none",t.style.display="";var e=document.createElement("div");e.id="rogueUI",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.pointerEvents="none",e.style.display="",le.seatUISwitch?t.style.display="block":(t.style.display="none",document.querySelectorAll("#seatUI > *:not(.city)").forEach(i=>i.style.display="none"));var n=document.createElement("div");n.id="centerUI",n.className="centerUI",n.style.position="absolute",n.style.pointerEvents="auto",n.onmouseover=function(){document.querySelectorAll("div.city").forEach(s=>{s.classList.remove("hide"),s.classList.add("show");});},n.onmouseout=function(){document.querySelectorAll("div.city").forEach(s=>{s.classList.remove("show"),s.classList.add("hide");});},e.appendChild(n),document.body.appendChild(t),document.body.appendChild(e);}function Ui(){for(let t=0;t<=7;t++){let e="or"+(t+1);document.getElementById(e).style.display="block";}}function Fi(t){for(let e=7;e>=t;e--){let n="or"+(e+1);document.getElementById(n).style.display="none";}}function zi(){let t=document.getElementById("createIframe");if(!t){t=document.createElement("div"),t.id="createIframe",t.id="createIframe",t.className="createIframe",t.style.position="fixed",t.style.overflow="hidden",t.style.resize="vertical",t.style.top="31px",t.style.right="155px",t.style.width="230px",t.style.height="500px",t.style.zIndex="10000000000",t.style.display="flex",t.style.flexDirection="column",t.style.color="#f2de9c",t.style.background="rgb(35, 32, 29)",t.style.userSelect="none",t.style.textAlign="left",t.style.transition="height 200ms",t.style.borderRadius="8px",t.style.transformOrigin="top right",t.style.transform="translate(0px, 0px)";var e=document.createElement("p");e.id="header",e.className="header",e.style.margin="1px",e.style.userSelect="none",e.style.cursor="grab",e.style.display="flex",e.style.alignItems="center",e.style.fontSize="20px",e.style.borderRadius="5px";var n=document.createElement("span");n.id="title",n.style="margin-right: auto;",n.innerText="三国杀打小抄"+at,t.appendChild(e),t.onmouseover=function(){document.querySelectorAll("div.city").forEach(u=>{u.classList.remove("hide"),u.classList.add("show");});},t.onmouseout=function(){document.querySelectorAll("div.city").forEach(u=>{u.classList.remove("show"),u.classList.add("hide");});};var i=document.createElement("button");i.innerText="-",i.id="toggle-me",i.style="text-align: center;color: #f2de9c;background: rgb(35, 32, 29);border-radius: 6px;width: 26px;height: 26px;border: 1px solid rgb(212, 212, 162);cursor: pointer;user-select: none;background: rgb(107, 30, 30);display: flex;align-items: center;justify-content: center;margin: 1px;font-size: 20px;",i.type="button",i.addEventListener("mouseover",function(){i.style.backgroundColor="rgb(130, 30, 30)";}),i.addEventListener("mouseout",function(){i.style.backgroundColor="rgb(107, 30, 30)";}),e.appendChild(n),e.appendChild(i),localStorage.getItem("DXCVersion")!=at&&(Ke(`小抄已经更新到${at}<br>${Oi}`,"acTooltip",3e4,"green"),localStorage.setItem("DXCVersion",at)),document.body.appendChild(t),et=document.createElement("div"),et.style="border: none;width: 230px;height: 100%;margin: 0px;overflow-y: auto;overflow-x: hidden;",et.id="iframe-source",t.append(et),et.innerHTML=Ri,et.querySelectorAll("script").forEach(c=>{const u=document.createElement("script");c.src?(u.src=c.src,u.async=c.async):u.textContent=c.textContent,document.body.appendChild(u),c.remove();});const a=document.querySelectorAll('input[id$="Switch"]'),r=document.querySelectorAll(".slider");a.forEach((c,u)=>{const f=r[u];c.addEventListener("change",l=>{const d=l.target.checked;try{gsap.to(f,{duration:.4,ease:"power2.inOut",css:{"--slider-position":d?"30px":"2px"},onStart:()=>{gsap.to(f,{scale:1.1,duration:.2,ease:"power1.inOut"});},onComplete:()=>{gsap.to(f,{scale:1,duration:.2,ease:"power1.inOut"});}}),gsap.to(f,{duration:.4,ease:"power2.inOut",boxShadow:d?"0 0 15px rgba(255, 204, 0, 1)":"0 0 0 rgba(0, 0, 0, 0)",background:d?"linear-gradient(to right, #ff7b54, #ffcc00)":"rgb(35, 32, 29)"});}catch(p){console.error("GSAP animation failed:",p);}});}),document.querySelectorAll(".panel-header").forEach(c=>{c.addEventListener("click",function(){const u=this.nextElementSibling;this.classList.toggle("active"),u.style.maxHeight?u.style.maxHeight=null:u.style.maxHeight=u.scrollHeight+"px";const f=new MutationObserver(()=>{u.style.maxHeight&&(u.style.maxHeight=u.scrollHeight+"px");});f.observe(u,{childList:!0,subtree:!0,characterData:!0}),u.style.maxHeight||f.disconnect();});}),document.querySelectorAll(".laya-header")[0].click(),document.querySelectorAll(".question-mark").forEach(function(c){c.addEventListener("mouseenter",function(u){let f=document.createElement("div");f.classList.add("tooltip","top"),f.textContent=c.getAttribute("data-tooltip"),document.body.appendChild(f);const l=c.getBoundingClientRect();f.style.left=`${l.left+window.scrollX+l.width/2-f.offsetWidth}px`,f.style.top=`${l.top+window.scrollY-f.offsetHeight-8}px`,f.classList.add("visible"),c.addEventListener("mouseleave",function(){f.classList.remove("visible"),setTimeout(()=>{f.remove();},100);});});});}Hi(),qi(),Qi(),bi();}function qi(){var t=document.getElementById("toggle-me");t.onclick=function(){S.closeIframe=!S.closeIframe,S.closeIframe?(document.getElementById("createIframe").style.top="31px",document.getElementById("createIframe").style.right="155px",document.getElementById("iframe-source").style.display="none",t.innerText="+",document.getElementById("createIframe").style.height="30px",document.getElementById("createIframe").style.opacity="0.6",document.getElementById("createIframe").style.width="75px",document.getElementById("title").innerText="小抄",document.getElementById("createIframe").style.resize="none",le.padding&&(le.padding=0,window.dispatchEvent(new Event("resize")),hn=0,pn=0,document.getElementById("createIframe").style.transform=`translate(${hn}px, ${pn}px)`)):(document.getElementById("iframe-source").style.display="block",t.innerText="-",document.getElementById("createIframe").style.height="500px",document.getElementById("createIframe").style.opacity="1",document.getElementById("createIframe").style.width="230px",document.getElementById("title").innerText="三国杀打小抄"+at,document.getElementById("createIframe").style.resize="vertical");},document.getElementById("autoInviteSwitch").addEventListener("click",n=>{var s;if(n.target.checked){var i=(s=document.getElementById("inviteName"))==null?void 0:s.value;typeof i=="string"&&i.length!==0&&(S.inviteName=i,$e("INVITE_NAME",S.inviteName),ce(`为目前机器所有账号绑定助力${S.inviteName}，如需更改/删除，更改/删除昵称重新打开开关`)),In(S.inviteName.trim()||S.nickname);}else Nt("INVITE_NAME");}),document.getElementById("guanxing").onmousedown=function(){const n=un(Wt(G.gxjson),"myWindowGuanXing","观星");fn(n);},document.getElementById("gamerecord").onclick=async function(){for(this.disabled=!0,Pt(S.userID);Ee.req;)await ye(500);this.disabled=!1,S.v&&await si();const n=un(zn(JSON.stringify(Ee)),"myWindowGameRecord","游戏记录");fn(n);},document.getElementById("mizhu").onmousedown=function(){let n=document.querySelectorAll(".mizhu");N.mySeats.length<=1?(n.forEach(i=>i.style.display="none"),on(Array.from(ne.shoupai(N.mySeats[0]),i=>oe[i].number))):N.mySeats.forEach((i,s)=>{n[s].style.display="block",n[s].innerText=N.name(i),n[s].onclick=()=>{on(Array.from(ne.shoupai(i),a=>oe[a].number));},s==0&&n[s].click();});};function e(n,i,o){var c,u,f,l;var a=n.target,r=a.checked,o=a.id;if(!(o==="autoBotSwitch"||o==="autoHGSwitch"))if(le[o]=r,o=="skinSwitch")document.getElementById("skinStateButton").style.display=r?"block":"none";else if(o=="seatUISwitch")document.getElementById("seatUI").style.display=r?"block":"none";else if(o=="skinPaperSwitch"){let d=(u=(c=T.find("SceneLayer",null))==null?void 0:c.constructor)==null?void 0:u.name;document.getElementById("paperStateButton").style.display=r?"block":"none",dt.switch(r&&(Qe.includes(d)||le.allPaperSwitch&&!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(d)));}else if(o=="allPaperSwitch"){let d=(l=(f=T.find("SceneLayer",null))==null?void 0:f.constructor)==null?void 0:l.name;dt.switch(r&&!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(d)||Qe.includes(d));}else o=="rogueWallpaperSwitch"&&(console.warn("rogueWallpaperSwitch",r),r&&Cn());}if(window.padding==0){console.warn("closesidebar");var t=document.getElementById("toggle-me");console.warn("toggle"),t.click();}window.dispatchEvent(new Event("resize")),document.querySelectorAll(".switch").forEach(n=>n.addEventListener("change",e)),document.getElementById("ACSubmit").onclick=Sn,Ki();}function Ki(){let t=document.getElementById("openStore");t.onclick=function(){T.class("GameEventDispatcher").ShowWindow("RogueJiShiWindow"),Ke("满足以下条件购买技能或者装备可跳关<br>1、已经进入对局<br>2、商店有可替换的装备/技能<br>例如身上有麒麟弓，商店有贯石斧<br>购买完成之后，投降之后会显示替换提示<br>","acTooltip",1e4,"green",!1);};}function un(t,e,n){let i=document.getElementById("myWindow"+e);if(i)return i.style.display="block",i;const s=document.createElement("div");s.classList.add("window"),s.id=e;const a=document.createElement("div");a.classList.add("window-header");const r=document.createElement("div");r.classList.add("title"),r.innerText=n;const o=document.createElement("div");o.classList.add("controls");const c=document.createElement("button");c.innerText="⬜";const u=document.createElement("button");u.innerText="❌",o.appendChild(c),o.appendChild(u),a.appendChild(r),a.appendChild(o);const f=document.createElement("iframe");return f.classList.add("window-content"),f.srcdoc=`
    <html>
      <head><meta charset="utf-8" /><title>${e}</title></head>
      <body>${t}</body>
    </html>
  `,s.appendChild(a),s.appendChild(f),document.body.appendChild(s),{windowDiv:s,maximizeBtn:c,closeBtn:u}}function fn(t){const{windowDiv:e,maximizeBtn:n,closeBtn:i}=t;let s=!1;n.addEventListener("click",()=>{s?e.classList.remove("fullscreen"):e.classList.add("fullscreen"),s=!s;}),i.addEventListener("click",()=>{e.style.display="none";});}let hn=0,pn=0;function Qi(){const t=document.getElementById("header"),e=document.getElementById("createIframe"),n=document.getElementById("sidebarHint");let i=!1,s=0,a=0,r=0,o=0,c=!1;const u=d=>{t.style.cursor="grabbing",i=!0,s=d.clientX||d.touches[0].clientX,a=d.clientY||d.touches[0].clientY,e.style.userSelect="none",e.style.willChange="transform",document.addEventListener("mousemove",f),document.addEventListener("mouseup",l),document.addEventListener("touchmove",f),document.addEventListener("touchend",l);};t.addEventListener("mousedown",u),t.addEventListener("touchstart",u);function f(d){if(!i)return;n.style.display="flex";const p=d.clientX||d.touches[0].clientX,g=d.clientY||d.touches[0].clientY,W=p-s,y=g-a;r+=W,o+=y,le.padding&&(le.padding=0,e.style.height="500px",window.dispatchEvent(new Event("resize"))),c||(c=!0,requestAnimationFrame(()=>{e.style.transform=`translate(${r}px, ${o}px)`,c=!1;})),window.innerWidth-p<25?n.style.backgroundColor="rgba(55, 40, 32, 1)":n.style.backgroundColor="rgba(55, 40, 32, 0.8)",s=p,a=g;}function l(d){n.style.display="none",t.style.cursor="grab",i=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",l),e.style.willChange="auto",window.innerWidth-(d.clientX||d.touches[0].clientX)<25&&t.id==="header"&&(le.padding||(S.closeIframe&&document.getElementById("toggle-me").click(),le.padding=232,window.dispatchEvent(new Event("resize")),r=0,o=0,e.style.transform=`translate(${r}px, ${o}px)`));}}function _t(t,e){let{name:n,number:i,color:s}=oe[t??0];if(t!==void 0&&(!t||!n||me.name[n]===void 0))return;let a=ne.unknown;(t?[n]:Object.keys(me.name)).forEach(r=>{let o=a.filter(u=>me.name[r].has(u)).length,c=document.getElementById(r);c.textContent=o>1?o+r:r,c.disabled=o<=0;}),(t?[5,6].filter(r=>me.color[r].has(t)).concat(s):[1,2,3,4,5,6]).forEach(r=>{var u;let o=a.filter(f=>me.color[r].has(f)).length,c=document.getElementById(["","heart","club","spade","diamond","hongsha","heisha"][r]);c.innerHTML=(u=c.innerHTML)==null?void 0:u.replace(/-?[0-9]+/,String(o));}),t?me.query.has(t)&&me[t].plot(e==0?0:1):me.draw();}function Vi(){for(let t=1;t<=3;t++)document.getElementById("type"+t).innerHTML="";for(let t of document.getElementsByClassName("order-body"))t.innerHTML="",t.title="一二三四五六七八"[t.id.slice(-1)]??t.title;for(let t in me.name){let e=document.getElementById("type"+oe[[...me.name[t]][0]].type),n=document.createElement("button");n.id=t,n.className="cardType",n.innerText=t,n.onclick=()=>{me.queryone("name",t);},e.appendChild(n);}F.seatUIs=[],yt(),Bt();}var Ji=[1562902854,1678425373];const mn=function(){const t=typeof window.requestIdleCallback=="function";return console.warn("Use IdleCallback",t),function(e,n=500){if(t){const i=window.requestIdleCallback(e),s=setTimeout(()=>{window.cancelIdleCallback(i),e();},n);return ()=>clearTimeout(s)}else return setTimeout(e,0)}}();Ht(t=>{const e=S.recGoods[t.secId];if(e&&e.length>0){for(let n of e)kn(t.secId,n.GoodsBaseID,t.openTime,t.levelId,n.ChangeCount);delete S.recGoods[t.secId];}},6e4);function Zi(t){var r,o,c,u,f,l,d,p,g,W,y,x,A,ee,v,E,j,_,q,te,pe,xe,we,C,O,z,X,h,m,I,w,D;try{if(!t)return;if((r=t.startsWith)!=null&&r.call(t,"socket连接关闭")){sn({content:"您的二次密码认证错误，请稍后再试"},"确定");return}if((o=t.startsWith)!=null&&o.call(t,"--checkPlayChatFast msg=INFO:")){let b=atob(t.slice(29,t.indexOf(" soundUrl",29))),[P,R,U,J]=b.split(":").map($=>isNaN(Number($))?$:Number($));if(console.warn(b,{[P]:R,[U]:J}),P=="mainSeatID"){let $=T.order.indexOf(R);$>=0&&(T.order.splice($,1),T.order.push(R)),fe(()=>N.mySeats[0]>=0).then(()=>{var V,ge,Ae,Fe;((Fe=(Ae=(ge=(V=T.gamescene)==null?void 0:V.seatContainer)==null?void 0:ge.selfSeatUi)==null?void 0:Ae.seat)==null?void 0:Fe[U])==J&&T.chat(`sub-SeatID:${N.mySeats[0]}  :${U}:${J}`,"INFO");});}else if(P="sub-SeatID"){let $=T.order.indexOf(R);$>=0&&(T.order.splice($,1),T.order.splice(-1,0,R));}}else if((c=t.startsWith)!=null&&c.call(t,"SwitchScene"))mn(()=>{var P,R;let b=T.scene=t.slice(t.lastIndexOf("-")+1);H.end(Qe.includes(b)),le.skinPaperSwitch&&dt.switch(le.allPaperSwitch?!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(b):Qe.includes(b)),b=="TableScene"?(fi(),S.autoBotSwitch&&ae.delay("auto",()=>Ze(()=>S.autoBotSwitch&&T.readyStart(),20),8e3)):b=="HallScene"?(S.autoBotSwitch===!0||S.autoBotSwitch===28)&&(ce("5秒后开始酒馆自动挂机"),ae.delay("auto",()=>Ze(()=>(S.autoBotSwitch===!0||S.autoBotSwitch===28)&&T.newRoom(),10,1e3),5e3)):["NewPaiWeiScene","DouDiZhu2023Scene","RogueLike1v1Scene","RogueLikeBigMapScene"].some(U=>t.endsWith(U))&&((S.autoBotSwitch===!0||S.autoBotSwitch===28)&&((P=document.getElementById("autoBotSwitch"))==null||P.click()),(S.autoBotSwitch===9||S.autoBotSwitch===29)&&((R=document.getElementById("autoHGSwitch"))==null||R.click()));});else if(le.skipWindowSwitch&&["TianShuWindow","RogueLike1v1ZhanJiWindow","GameResultWindow","GeneralOpenResultWindow","GetPropSpecialWindow","GameMvpWindow","SkinOpenResultWindowNew","OldbackOneClickDrawAwdWin","VersionNoticeWindow","AdPushWindow"].includes(t)){let b=t=="GetPropSpecialWindow"?5:1,P=t=="TianShuWindow"?R=>{var U;return (R==null?void 0:R.type)==6?(R.type=0,(U=R.Close)==null?void 0:U.call(R)):"false"}:t=="GetPropSpecialWindow"?R=>{var U,J;return (U=R==null?void 0:R.Hide)==null||U.call(R),(J=R==null?void 0:R.Close)==null?void 0:J.call(R)}:t=="RogueLike1v1ZhanJiWindow"?R=>{var U;return (U=R==null?void 0:R.onClickClose)==null?void 0:U.call(R)}:R=>{var U;return (U=R==null?void 0:R.Close)==null?void 0:U.call(R)};Ze(()=>fe(()=>T.find(null,t),10,200*b).then(R=>Array.isArray(R)?R.every(P):R!=null&&R.Close?P(R):"done"),b,1e3);}else if((u=t.endsWith)!=null&&u.call(t,"View"))t=="VuplexWebView"&&ae.trigger("VuplexWebView");else if((f=t.endsWith)!=null&&f.call(t,"Window"))t=="MailWindow"?Mt():t=="ChangeSkinWindow"?le.skinSwitch&&fe(()=>T.find("WindowLayer","ChangeSkinWindow","selectView","itemList"),50,100).then(b=>(b==null?void 0:b.length)>1&&(b==null?void 0:b.forEach(P=>{P.dynamicState=P.hasSkin?P.dynamicState?-1:-2:-3,P.hasSkin=P.bg.mouseEnabled=!0,P.blackbg.visible=P.isUsing=!1,P.timeBg.visible=P.composeBg.visible=P.composeIcon.visible=P.composeTxt1.visible=P.composeTxt2.visible=P.composeTxt.visible=P.timeLimiteTxt.visible=!1;}))):t=="NS2023ComposeWindow"?hi():t=="SkinInfoWindow"?le.skinPaperSwitch&&ci():t=="BlessNewWindow"?Xt():t=="SelectSkinWindow"?S.autoBotSwitch!=9&&fe(()=>T.find("WindowLayer",t)).then(b=>b==null?void 0:b.Close()):t=="SelectCardWindow"?T.flag===!0&&ri(!0,!0):t=="WuGuFengDengWindow"&&T.flag===!0?T.wugu():["SelectGeneralWindow","SelectGeneralHappyWindow","SelectCountryWarGeneralWindow"].includes(t)&&S.autoBotSwitch?setTimeout(()=>{fe(()=>T.find("WindowLayer",t)).then(async b=>{var U,J;if(!((U=b==null?void 0:b.generalUis)!=null&&U.length))return;if(t=="SelectCountryWarGeneralWindow"){for(let $ of b.generalUis)$!=null&&$.Card&&($!=null&&$.CanSelect)&&(b.onClickGeneralCard($),await ye(1e3));await ye(1e3),(J=b.confirmBtnEvent)==null||J.call(b);return}let P=-1,R=null;b.generalUis.some($=>{var ge;if($!=null&&$.dianJiangSk)return R=$;let V=((ge=$==null?void 0:$.generalInfo)==null?void 0:ge.quality)||0;V>P&&(P=V,R=$);}),R==null||R.sureBtnClick(),S.autoBotSwitch!=9&&setTimeout(()=>R==null?void 0:R.sureBtnClick(),500);});},3e3):t=="AdPushWindow"&&fe(()=>T.find("WindowLayer",t)).then(b=>b.curViewList[0].closeClicker(),ce("小抄已经为你跳过广告和祈愿台出货播报"));else if(t.className===void 0&&!["ClientGeneralSkinReq"].includes((l=t.constructor)==null?void 0:l.name))return;le.killEffectSwitch&&t.className=="CClientGameRewardPointNTF"&&(t.Type=0);let{ProtoObj:k,className:L,SeatID:Q,SrcSeatID:Y,targetSeatID:ie,SpellID:B,Param:de,Params:M,Datas:ue,DataCount:ke,CardCount:be,CardIDs:K,FromID:He,FromZone:he,FromPosition:ve,FromZoneParam:Ut,ToID:je,ToZone:re,ToPosition:wt,ToZoneParam:Ft,MoveType:Ue,Type:Ge}=t;if(L||(L=(d=t.constructor)==null?void 0:d.name),!S.userID&&t.userID&&["ClientLoginRep","ClientUserDataCounterNtf","ClinetNetSpeedNtf","SmsgUpdateTaskListToClient","ClientGuildMemberChangeNtf"].includes(L)){if(Object.assign(S,{userID:t.userID,nickname:t.Nickname||S.nickname||"",account:t.Account||localStorage.LastUserName||localStorage.SGS_LASTLOGIN_ACCOUNT||localStorage.SGS_LASTLOGIN_ACCOUNT1||S.account||""}),S.UsedGeneralSkinID=Pe(S.account+"::UsedGeneralSkinID",S.UsedGeneralSkinID),Object.assign(dt.res,Pe(S.userID+"::paperRes",{},!0)),ui(),Ji.includes(S.userID))return;Promise.all([Mn(),fe(()=>{var ge;const b=T.get("QldjChooseRuleWindow");let{clientId:P,nickname:R,guildID:U,guildName:J,Level:$,vipLevel:V}=((ge=b==null?void 0:b.seat)==null?void 0:ge.playerInfo)||{};return T.del("QldjChooseRuleWindow"),P!=S.userID||!R||!J&&U?null:(Object.assign(S,{nickname:R,guildID:U,guildName:J,Level:$,vipLevel:V}),R)},30,1e3)]).then(()=>{le.autoSignSwitch&&gi(le.autoSignSkipSwitch),pi(S.userID);let b=document.getElementById("uuid");b.innerText="id："+S.userID,b.onclick=function(){Xe(S.userID,!1),b.innerText="复制成功",setTimeout(()=>{b.textContent="id："+S.userID;},"500");};let P=document.getElementById("nickName");P.innerText="昵称："+S.nickname,P.onclick=function(){Xe(S.nickname,!1),P.innerText="复制成功",setTimeout(()=>{P.textContent="昵称："+S.nickname;},"500");};let R=document.getElementById("guildID");R.innerText="公会数字ID："+S.guildID,Jn(),document.getElementById("inviteName").setAttribute("placeholder",S.nickname||""),Pe("INVITE_NAME")&&Pe("INVITE_NAME")!=S.Nickname&&(document.getElementById("inviteName").value=Pe("INVITE_NAME"));async function U(J=2e4){var ge;let V=0;for(;!S.nickname||!S.userID;)if(await new Promise(Ae=>setTimeout(Ae,2e3)),V+=2e3,V>=J){ce("没办法获取到昵称用于助力 请重新登录");return}In(((ge=S.inviteName)==null?void 0:ge.trim())||S.nickname);}Date.now()<new Date("2024-12-15")&&le.autoInviteSwitch&&U();});}if(L=="ClientNianComposeRep"){console.warn(t);var e=localStorage.getItem(S.account+"::NianComposeRecord"),n=e&&((p=JSON.parse(e))==null?void 0:p.NianComposeRecord)||[];n.push({id:t.goodsbaseId,items:t.composeId});try{fetch("https://goka.top:8080/chunlian",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});}catch(b){console.error("Error parsing JSON:",b);}}if(L=="ClientGeneralSkinRep"){N.mySeats[0]===void 0&&Ge==5&&t.ClientID<10&&(N.setMyID(t.ClientID),jt());let b=t.GeneralSkinList[0],P=N.find(N.mySeats[0],b.GeneralID,!0);if(b.GeneralID!=P&&le.skinStateBlockSwitch&&(b.state=0),le.skinSwitch&&P){if([46,479].includes(b.GeneralID)&&Mi(),S.UsedGeneralSkinID.UsedGeneralSkinID[P]){let[R,U]=String(S.UsedGeneralSkinID.UsedGeneralSkinID[P]).split("_").map(J=>parseInt(J));b.SkinID=R,b.skin_type=U||0;}b.state=le.skinStateSwitch?1:0;}}else if(L=="ClientGeneralSkinReq"){if(le.skinSwitch){let{RealGeneralID:b,SkinID:P,state:R}=t.SkinItem;if(!(R<0))return;R<-2&&(t.SkinItem.SkinID=0),t.SkinItem.state=R<-1?0:1;let[U,J]=String(S.UsedGeneralSkinID.UsedGeneralSkinID[b]).split("_").map(Number);if(U==P)if(P in G.skinSP)P=P+"_"+G.skinSP[P][(J||1)%G.skinSP[P].length];else return;S.UsedGeneralSkinID.UsedGeneralSkinID[b]=P,$e(S.account+"::UsedGeneralSkinID",S.UsedGeneralSkinID);}}else if(L!="MsgReconnectGame"){if(L=="ClientOfficerInfoRep")S.curOfficerLv=t.curOfficerLv;else if(L=="decodeSSCChatmsgNtf")k.scene==11&&(k.scene=2);else if(L=="ClientRoleGeneralStarRep")le.generalSwitch&&(t.Star>=0&&(t.Star=4),k.star>=0&&(k.star=4));else if(L=="ClientGameRecordInfoRep")(k==null?void 0:k.query_uid)==S.userID&&[26,35,44,5,7].includes(k==null?void 0:k.id)&&((g=Ee==null?void 0:Ee.req)==null||g.delete(k.id),((W=Ee.req)==null?void 0:W.size)==0&&delete Ee.req,(y=k==null?void 0:k.all_record)!=null&&y.length&&ii(k.id||0,k.all_record));else if(L=="DbsCcUserGoodshintNtf")Ge==2010&&typeof t.GoodsList=="object"&&(S.goods=yi(S.goods,t.GoodsList)),(Ge==58||Ge==65)&&ae.delay("tongxin",()=>Xt(),5e3),Ge==5&&typeof t.GoodsList=="object"&&(S.CDKgoods=t.GoodsList);else if(L=="decodeClientSecretInfoRep"){if(Object.keys(S.goods).length>0){G.currentSec=k.secId;for(let b of S.goods)On(G.currentSec,b.GoodsBaseID,b.ChangeCount,k.openTime),(b.GoodsBaseID==11180||Rn(b.GoodsBaseID))&&kn(k.secId,b.GoodsBaseID,k.openTime,k.levelId,b.ChangeCount);}S.goods=[];}else if(L=="ClientPickupgiftbagRep"&&le.CDKNotificationSwitch){if(t.CDKey!=""&&!/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]+$/.test(t.CDKey)&&(t.Result==1||t.Result==2)){for(let b of G.CDKDict)if(Ai(b.dataInfo,S.CDKgoods)){b.cdk=t.CDKey,ai(b);break}}}else if(L=="decodeClientTavernInfoRep"){let b=((x=k==null?void 0:k.tavern_info)==null?void 0:x.day_quest_finished_cnt)??0;if(S.autoBotStatus=30-b,S.autoBotInfinite||document.querySelector(".status").style.setProperty("--bot-status",`"${S.autoBotStatus.toString().padStart(2,"0")}"`),b>=30){let P=document.getElementById("autoBotSwitch");P!=null&&P.checked&&!S.autoBotInfinite&&P.click(),ce(`今日已获得亲密度：${b}<br>恭喜你完成任务~`);}else b>0&&ce(`今日已获得亲密度：${b}，还差 ${30-b} 亲密度<br>继续努力吧~`);}else if(L=="ClientSecKillInfoRep")Ei(t.Data);else if(L=="decodeRogueLikeDataSync")Bt(k);else if(L=="ClientActivitysetDataRep")mn(()=>{Bt();});else if(L=="decodeRogueLikeGameOverRep")document.getElementById("chongsheng").innerText="重生是否发动：是";else if(L=="SmsgGamePlayerDead")(S.autoBotSwitch===!0||S.autoBotSwitch===28)&&!S.autoBotInfinite&&Q==N.mySeats[0]&&setTimeout(()=>{var b,P,R,U,J;((R=(P=(b=T.gamescene)==null?void 0:b.seatContainer)==null?void 0:P.seatUIs)==null?void 0:R.reduce(($,V,ge,Ae)=>{var Fe,zt,qt,Kt,Qt;return $+((Fe=V==null?void 0:V.seat)!=null&&Fe.figure&&V.seat.figure==Ae[0].seat.figure||(Kt=(qt=(zt=V==null?void 0:V.seat)==null?void 0:zt.playerInfo)==null?void 0:qt.showName)!=null&&Kt.includes("金")?1:-1)*((Qt=V==null?void 0:V.seat)==null?void 0:Qt.currentHp)},0))<0&&((J=(U=T.gamescene)==null?void 0:U.topMenu)==null||J.onClickBack(),sn({title:"退出游戏"},"确定",!0));},1e4);else if(L=="MsgGameDealCharacter"){if(S.userID==1099193522&&typeof Allows<"u"&&typeof Ge<"u"&&Ge==1){var i=Math.floor(Math.random()*Allows.length+1);document.getElementById("title").innerText="选"+i;}}else if(L=="GsCUpdateRoleDataNtf")N.mySeats[0]===void 0&&t.StateID===58&&(N.setMyID(Q),console.warn(L,"游戏人数："+N.size+", 我的座位："+N.mySeats,N.seatIDs));else if(L=="GsCFirstPhaseRole")Q!==void 0&&(N.firstID=Q,console.warn("先手位置:"+N.firstID));else if(L=="MsgGameRoundNtf")t.isPassed&&(H.isPassed=t.isPassed);else if(!(L=="MsgGameOver"||L=="ClientRecommendShopItemRep"||L=="ClientLeavetableRep")){if(L=="decodeRougeBaseInfoRep")F.friendGeneral=((A=k==null?void 0:k.friendGeneral)==null?void 0:A.length)??F.friendGeneral;else if(L=="MsgGamePlayCardNtf")H.ready(t.CardList);else if(L=="SmsgGameSetCharacter")N.mySeats[0]===void 0&&N.isDouDiZhu&&t.Infos.length==1&&N.setMyID(t.Infos[0].SeatID),t.Infos.forEach(({SeatID:b,CharacterID:P})=>{N.setGeneral(b,P);});else if(L=="GsCGuoZhanSetCharacter")(ee=t.GeneralData)==null||ee.forEach(({index:b,cardID:P})=>{N.setGeneral(Q,P,b);});else if(L=="MsgGameTurnNtf")H.enter(t.TurnCnt);else if(L=="GsCGamephaseNtf")H.enter(null,t.Round,Q);else if(L=="GsCUpdateRoleDataExNtf")H.currentID==Q&&t.DataID==1&&Array.isArray(t.Datas)&&(document.getElementById("sha").innerText="可出杀次数："+Math.max(0,ue[2]-ue[1]),Q==N.mySeats[0]&&N.isShanHeTu&&((v=Le.itemId)!=null&&v.includes(2042))&&(ue[1]==0&&(Le.previousData=0),Le.sanBanFu+=ue[1]-Le.previousData,Le.previousData=ue[1],Le.sanBanFu%3==0?document.getElementById("sanBanFu").innerText="三板斧计数器":document.getElementById("sanBanFu").innerText="三板斧计数器："+((Number(Le.sanBanFu)-1)%3+1)));else if(L=="GsCTriggerSpellNew"){if(le.wuxieSwitch){const b=U=>{var J;return U?`<font color='#FFFF00' href='1|${U}|0|2'>"${(J=G.spellDict[U])==null?void 0:J.name}"</font>`:"未知技能"},P=U=>(J=>J?`<font color='#FFFF00' >${J}${U==N.mySeats[0]?"(你)":""}</font>`:"")(N.name(U,null));let R=(E=t.TriggerSpellData)!=null&&E.length?t.TriggerSpellData:[{}];if(!R.length)return;T.trace("<font color='#00FFFF'>&gt;&gt;</font>"+((j=R[0])!=null&&j.SpellId?"":((U,J)=>U&&J?U+"的"+J:U||J)(P(t.SrcSpellCasterSeat),t.SrcSpellID?b(t.SrcSpellID):""))+"<font color='#00FFFF'>&gt;</font>"+(U=>U?"向"+U:"")(P(t.TriggerSeatId))+"询问"+R.map(({SpellId:U,SeatId:J,Targets:$})=>((V,ge)=>ge?`对${ge}的`:V?`${V}的`:"")(J!=t.TriggerSeatId?P(J):"",($==null?void 0:$.map(P).join(","))||"")+b(U)).join(","));}}else if(L=="ClientHappyGetFriendHandcardRep")N.find(t.seatId,[7004,2087,3048])&&new ne(t.seatId).show(t.Cards);else if(L=="PubGsCUseCard")N.mySeats[0]==Q&&an([t.CardID]),H.currentID==Q&&N.find(H.currentID,[7003,2086,3047])&&t.useType==1&&t.fromZone!=1&&!t.isSend?(H.spellSpace[7011]||(H.spellSpace[7011]={count:0,color:new Set}),oe[t.CardID].type!=3&&H.spellSpace[7011].count++,H.spellSpace[7011].color.add(oe[t.CardID].c),document.getElementById("suit").innerHTML="["+H.spellSpace[7011].count+"]"+Array.from(H.spellSpace[7011].color).join("")):H.currentID==Q&&N.find(H.currentID,[330,1068])&&t.useType==1&&!t.isSend&&(document.getElementById("suit").innerHTML=oe[t.CardID].cn);else if(L=="PubGsCUseSpell"){if(N.mySeats[0]==Q&&K.length==1&&an(K),B==3324)document.getElementById("chongsheng").innerText="重生是否发动：是";else if(B==2143)H.spellSpace[B]||(H.spellSpace[B]=new Set),K.forEach(b=>H.spellSpace[B].add(oe[b].c)),document.getElementById("suit").innerHTML=Array.from(H.spellSpace[B]).join("");else if([3157,3511].includes(B)&&K.filter(b=>b>0).length!=0&&(Y==N.mySeats[0]||S.v))H[B]=K;else if([3193,3185,3138].includes(B)||B==3161)H.phase--;else if(B==3338&&K.length!=0&&S.v&&N.generals[N.mySeats[0]]==573){H.spellSpace[B]||(H.spellSpace[B]=new Set);const b=K[0]+"-"+K[1];H.spellSpace[B].has(b)||(H.spellSpace[B].add(b),console.warn("new combination",H.spellSpace[B]),ae.delay("baichu",()=>kt("新组合"),500));}}else if(L=="GsCRoleOptTargetNtf")if(B==945&&de==0&&(M==null?void 0:M.length)>0)Wi(M.map(b=>oe[b].number),S.v&&Q==N.mySeats[0]);else if(B==3440&&N.mySeats.includes(Q)&&de==0&&(M==null?void 0:M.length)>0)Ge==28?ln(M.map(b=>oe[b].number),new ne(Q).cards.map(b=>oe[b.id].number)):ln();else if(B==11003&&de==0&&(M==null?void 0:M.length)>0&&Y!=N.mySeats[0]&&le.v)document.getElementById("result").innerHTML='<span class="textRes"> 【锻造】<br>'+M.map(b=>oe[b].ncn).join("<br>")+"</span>";else if([7016,7017].includes(B)&&(M==null?void 0:M.length)>0&&(Y==N.mySeats[0]||S.v)){H[B]=M.slice();let b=Array.from(new Set(new ne(de).cards.map(({key:V})=>V))).sort((V,ge)=>ge-V),P=Array.from(new Set(new ne(255,1).cards.slice(0,N.isGuoZhan?void 0:2).map(({key:V})=>V))).sort((V,ge)=>ge-V),{yes:R,no:U}=M.reduce((V,ge)=>{let{keys:Ae}=se.findKZ(ge);return b.find(Fe=>Ae.includes(Fe))!==void 0&&V.yes.push(ge),P.find(Fe=>Ae.includes(Fe))!==void 0&&V.no.push(ge),V},{yes:[],no:[]}),J=document.getElementById("result");U.length==2?R=M.filter(V=>!U.includes(V)):R.length==1&&(U=M.filter(V=>!R.includes(V))),R.length==1||R.length==2?(J.innerHTML='<span class="textRes">【宴戏】'+R.map(V=>oe[V].ncn).join("/")+"</span>",H[B]=R.concat(M.filter(V=>!R.includes(V)))):J.innerHTML='<span class="textRes">【宴戏】未知</span>';let $=new ne(de).show(H[B][0]).concat(new ne(255,1,N.isGuoZhan?We:Ce).show(H[B].slice(-2)));R.length==3?se.pack($):R.length==1?se.pack($.slice(1,3)):R.length==2&&(se.pack($.slice(0,2)),se.pack($.slice(1,3))),M.forEach(V=>{J.innerHTML+='<span class="textRes'+(R.length<3&&R.includes(V)?" textRes":"")+'">'+oe[V].ncn+"："+[[R,"手牌"],[U,"牌堆"]].filter(([ge,Ae])=>ge.includes(V)).map(([ge,Ae])=>Ae).join("/")+"</span><br>";});}else [4,5,921,372,811,357,3119,501,3437].includes(B)&&(M==null?void 0:M.length)>0?ie!==void 0&&ie!==255&&new ne(ie).show(M):[851,361,774,3310].includes(B)&&de==0&&(M==null?void 0:M.length)>0?ie!==void 0&&ie!==255&&new ne(ie).show(M):B==943&&de==0&&(M==null?void 0:M.length)==1?new ne(255,1).show(M):B==898&&de==0&&(M==null?void 0:M.length)>2?Y!==void 0&&Y!==255&&new ne(Y).show(M.slice(1,M[0]+1)):(B==987||B==988)&&de==1&&(M==null?void 0:M.length)>2?ie!==void 0&&ie!==255&&(Y==N.mySeats[0]||S.v)&&new ne(ie).show(M.slice(-M[1])):B==3266&&de==0&&(M==null?void 0:M.length)>0?ie!==void 0&&(Y==N.mySeats[0]||S.v)&&new ne(ie,ie==255?1:5).show(M.filter((b,P)=>P%3==1)):B==3483&&de==1?(M==null?void 0:M.length)>2&&ie!==void 0&&ie!==255?new ne(ie).show(M.slice(-M[1])):M[0]>0&&(H[B]=M[0]):(B==7010||B==7011)&&(M==null?void 0:M.length)>0&&ie==255?(H.spellSpace[7009]=M.slice(),(Y==N.mySeats[0]||S.v)&&se.pack(new ne(255,1).show(M))):B==2900&&Ge==28&&N.setGeneral(ie,M[2],M[1],!0);else if(L=="CGsRoleSpellOptRep")B==2022?N.setGeneral(Q,ue[0],ue[1],!0):B==7009?((_=H[7009])==null||_.pop(),(q=H[7009])!=null&&q.length||new ne(255,1).show(ue)):B==3336?new ne(255,1,qe).show((te=ue==null?void 0:ue.slice())==null?void 0:te.reverse()):ue.length>0&&B==15&&Ge==10&&ei(oe[ue[0]].color==1);else if(L=="PubGsCMoveCard"){if(K=K.slice(),be===0||Ue===0||re===11||t.isSend)return;if(B==713&&Ue==21&&be==K.length-2){let b=K.splice(0,1)[0];K.splice(b,1);}K.filter(b=>b>0).length!=be&&K.filter(b=>b>0).length!=0&&(console.error("PubGsCMoveCard error: 明暗牌混合：["+K+"]"),console.error(t),K=[]),he==1&&ve==We&&[3208,7011,987,988].includes(B)&&(ve=Ce),he==1&&ve==We&&Ue==13&&be==1&&(ve=Ce),he==1&&ve==We&&re==4&&Ue==8&&B==795&&be==1&&(ve=Ce),he==1&&ve==We&&re==5&&B==3101&&be==1&&(ve=qe),he==1&&ve==We&&re==5&&!N.isGuoZhan&&[7016,7017].includes(B)&&be==1&&(ve=Ce),he==1&&re==5&&B==3338&&S.v&&je==N.mySeats[0]&&ae.delay("baichu",()=>kt("新组合"),500),je==N.mySeats[0]&&(he==8&&re==5&&B==6||he==5&&re==5)&&ae.delay("mingpai",()=>kt("明牌",K),500),re==1&&je==255&&wt==Ce&&(K=K.filter(b=>b!=4400&&b!=4401));var s=new ne(He,he,ve,be,B,Ut),a=new ne(je,re,wt,be,B,Ft);if(re==12||he==12)re!=12?a.add(K.concat(Array(be-K.length).fill(0)).map(b=>new se(b,b,a.zoneID))):he!=12&&he!=0&&s.remove(K,B);else if(he==5&&re==1&&je==0)a.add(s.remove(K.filter(b=>b>0)).map(b=>b.destroy(0)));else if(he==2&&re==9&&He==0&&je==0)H.isGameStart&&!H.isPassed&&se.pack(se.get(0).map(b=>b.destroy()),!1,1),a.set([...a.cards.map(b=>H.isPassed?b.destroy(0):b),...s.cards.map(b=>b.destroy(0))]),s.set([]),_t(),H.isPassed=!1;else if(Ue!==255){if(he==1&&re==5&&N.dealCard(je,K[0]),re==2&&(H.spellSpace[3090]||(H.spellSpace[3090]=new Set),K.forEach(b=>H.spellSpace[3090].add(oe[b].c)),document.getElementById("boTu").innerHTML=Array.from(H.spellSpace[3090]).join("")),(he==5||re==5)&&(je==((pe=N.mySeats)==null?void 0:pe[0])||He==((xe=N.mySeats)==null?void 0:xe[0]))){let b=Array.from(ne.shoupai(N.mySeats[0]));re==5?b.push(...K):he==5&&(b=b.filter(U=>!K.includes(U))),b=b.map(U=>oe[U]);const{countType2:P,countSha:R}=[...b].reduce((U,J)=>(J.type===2&&!["乐","兵","闪电"].includes(J.name)&&U.countType2++,["杀","火杀","雷杀","冰杀"].includes(J.name)&&U.countSha++,U),{countType2:0,countSha:0});document.getElementById("result").innerHTML='<span class="textRes">【权道】杀：普通锦囊</span><br><span class="textRes">'+R+"："+P+"</span>";}if([441,3492].includes(B)&&re==8&&Ue==6&&Ci(K.map(b=>oe[b].number),B==3492&&S.v),B==3033&&he==1&&re==8&&K.filter(b=>b>0).length==1){let b=oe[K[0]].number,P=0,R=0,U=0;ne.paidui.forEach(J=>{let $=oe[J].number;$===b?U++:$>b?P++:R++;}),document.getElementById("result").innerHTML='<span class="textRes">【吉占】猜'+(P>R?"大":"小")+'</span><br><span class="textRes">跟'+b+"比，"+P+"张大		"+R+"张小		"+U+"平</span>";}if(B==3329&&He==H.currentID){let b=oe[K[0]].number,P=ne.paidui,R=["无中","洞烛","顺手","过拆","逐近","决斗","南蛮","万箭","出其","水淹","随机","洪荒","同舟","力争","移花"].flatMap(J=>P.filter($=>{var V;return (V=me.name[J])==null?void 0:V.has($)})).reduce((J,$)=>{let V=oe[$].number;return V>b?J.g++:V<b?J.l++:J.e++,J},{g:0,l:0,e:0}),U=["五谷","桃园","火攻","借刀","撒豆"].flatMap(J=>P.filter($=>{var V;return (V=me.name[J])==null?void 0:V.has($)})).reduce((J,$)=>{let V=oe[$].number;return V>b?J.g++:V<b?J.l++:J.e++,J},{g:0,l:0,e:0});document.getElementById("result").innerHTML='<span class="textRes">【和衷】'+(R.g>R.l?"大":R.g<R.l?"小":U.g>U.l?"大":U.g<U.l?"小":"平")+'</span><br><span class="textRes">'+R.g+"."+U.g+"大		"+R.l+"."+U.l+"小</span>";}else B==3488&&he==5&&re==5&&Ue==21&&K.filter(b=>b>0).length==1?(H[B]||(H[B]={}),H[B][He]=K.find(b=>b>0)):B==3488&&he==5&&re==10&&Ue==11&&K.filter(b=>b>0).length==0?(K[0]=((we=H[B])==null?void 0:we[He])||0,H[B].stack=K[0]):B==3488&&he==10&&(re==1||re==2)&&Ue==11&&K.filter(b=>b>0).length==0&&(K[0]=((C=H[B])==null?void 0:C.stack)||0,(O=H[B])==null||delete O.stack);if([3157,3511].includes(B)&&he==2&&re==5&&be==((z=H[B])==null?void 0:z.length)&&K.filter(b=>b>0).length==0&&H[B].forEach((b,P)=>K[P]=b),[7016,7017].includes(B)&&re==5&&be==1&&(Y==N.mySeats[0]||S.v)&&(K[0]&&((X=H[B])!=null&&X.includes(K[0]))?H[B].splice(H[B].indexOf(K[0]),1):he==5||((h=H[B])==null?void 0:h.length)==2||((m=H[B])==null?void 0:m.length)==1?K[0]=((I=H[B])==null?void 0:I.shift())||0:N.isGuoZhan),He==je&&he==re&&(ve==wt||re!=1)&&(Ut==Ft||re!=4))s.show(K);else if(B==3208&&he==10&&re==5&&K.filter(b=>b>0).length===0)s.pos=qe,se.pack(s.cards.slice(0,s.length-1)),a.add(s.remove(K));else if(B==3483)if(he==10&&re==10)K.filter(b=>b>0).length===0&&(s.pos=qe,a.pos=Ce),a.add(s.remove(K));else if(he==1&&re==10&&ve==We)H[B]&&se.pack(s.cards.slice(0,H[B])),K.filter(b=>b>0).length==0&&(s.pos=qe),a.add(s.remove(K));else if(he==5&&re==10)H[B]=a.add(s.remove(K));else if(he==10&&re==1&&ve==We){if(K.filter(b=>b>0).length==0&&((w=H[B])==null?void 0:w.length)==be&&H[B].every(b=>s.cards.includes(b))){let b=H[B].flatMap(R=>s.cards.splice(s.cards.indexOf(R),1));se.pack(a.add(b));let P=b.map(R=>R.key);P.every(R=>R>0)&&K.splice(0,be,...P);}else a.add(s.remove(K));delete H[B];}else a.add(s.remove(K));else if(B==780&&he==5&&ve==We&&be==1)if(re==5&&He==H.currentID)H[B]=a.add(s.remove(K))[0];else if(re==1&&He!=H.currentID&&s.cards.includes(H[B])){let b=(D=a.add(s.cards.splice(s.cards.indexOf(H[B]),1))[0])==null?void 0:D.key;b>0&&K.filter(P=>P>0).length==0&&(K[0]=b),delete H[B];}else a.add(s.remove(K));else a.add(s.remove(K,B));}}}}}catch(k){console.error(k);}}function gn(){let t=Array.prototype.slice.call(arguments);try{return t[0]==="INIT"?Gi():t[0]==="EXIT"?_i():Zi(t[t.length-1])}catch(e){console.error(e.message),console.error(e.stack);const[,n,i]=e.stack.match(/(\d+):(\d+)/);console.error("Line:",n),console.error("Column:",i),ce("小抄GG了，联系作者解决");}}typeof SGSMODULE<"u"&&(Object.defineProperty(window.console,"log",{get(){return console.info},set(){}}),window.SGSMODULE.forEach(t=>t("EXIT")),delete window.SGSMODULE);console.info("%c三国杀打小抄","font-weight: bold; color: white; background-color: #525288; padding: 1px 4px; border-radius: 4px;");window.SGSMODULE=[];Object.defineProperty(window.console,"log",{get(){return function(...t){(window._debug||window.isLogAllClass)&&console.debug(...t),window.SGSMODULE.forEach(e=>e==null?void 0:e(...t));}},set(){}});gn("INIT").then(t=>{t&&window.SGSMODULE.push(gn);});

})();