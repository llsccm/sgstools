// ==UserScript==
// @name         三国杀打小抄
// @namespace    https://greasyfork.org/scripts/448004
// @version      2.9.44.5
// @author       小麦 孤独尊
// @description  打小抄支持网页版和微端，微端文件请加群 830137048
// @icon         https://i0.hdslb.com/bfs/new_dyn/17ec41a0ca79633b77399065ab80da3f2138912.png
// @downloadURL  https://goka.top:8080/daxiaochao.user.js
// @updateURL    https://goka.top:8080/daxiaochao.user.js
// @match        *://game.4399iw2.com/yxsgs/*
// @match        *://my.4399.com/yxsgs/*
// @match        *://*.sanguosha.com/*
// @match        *://web.kuaiwan.com/kwsgsn/*
// @match        *://wan.baidu.com/microend?gameId=19793595/*
// @match        *://www.7k7k.com/special/sgs/?*
// @grant        none
// @run-at       document-start
// ==/UserScript==

(function () {
  'use strict';

  var Vt=Object.freeze,Jt=Object.defineProperty;var Hn=(t,e,n)=>e in t?Jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Xe=(t,e,n)=>(Hn(t,typeof e!="symbol"?e+"":e,n),n);var Zt=(t,e)=>Vt(Jt(t,"raw",{value:Vt(e||t.slice())}));function Ne(t,e=null,n=!0){let i;return !i&&typeof localStorage<"u"&&(i=localStorage.getItem(t)),i?JSON.parse(i):e}async function $e(t,e,n=!0){typeof localStorage<"u"&&localStorage.setItem(t,JSON.stringify(e));}async function Nt(t,e=!0){typeof localStorage<"u"&&localStorage.removeItem(t);}function Ct(t,e=0){let n="";const i="  ".repeat(e);if(Array.isArray(t))t.every(r=>typeof r!="object"||!r)?n+=`${i}${t.join("	")}
`:(n+=`${i}<ol>
`,t.forEach(r=>{n+=`${i}  <li>
`,n+=Ct(r,e+2),n+=`${i}  </li>
`;}),n+=`${i}</ol>
`);else if(typeof t=="object"&&t!==null)if(Object.values(t).every(r=>typeof r!="object"||!r))n+=`${i}${Object.entries(t).map(([r,s])=>`<strong>${r}:</strong> ${s}`).join(", ")}
`;else {n+=`${i}<ul>
`;for(const r in t)n+=`${i}  <li>
`,n+=`${i}    <strong>${r}:</strong>
`,n+=Ct(t[r],e+2),n+=`${i}  </li>
`;n+=`${i}</ul>
`;}else n+=`${i}  ${t}
`;return n}async function qn(t,e=""){const n=document.createElement("a");n.download=e,n.href=t,n.click(),n.remove();}const It=[];let ft=!1,kt=null;function ze(t,e="acTooltip",n=1e4,i="",o=null,r=!1){r?Un(t,e,n,i):(It.push({text:t,id:e,duration:n,className:i,clickCallback:o}),ft||Et());}function Un(t,e,n,i){let o=document.getElementById(e);o||(o=document.createElement("div"),o.id=e,o.className="ac-tooltip "+i,document.body.appendChild(o)),o.innerHTML=t,o.className="ac-tooltip "+i,o.addEventListener("click",()=>{xt(uniqueId);}),setTimeout(()=>{o.classList.remove("hide"),o.classList.add("show"),o.style.top="20px";},50),kt&&clearTimeout(kt),kt=setTimeout(()=>xt(e),n);}function ue(t){if(ChannelUtils!=null&&ChannelUtils.openQQBuy){ChannelUtils.openQQBuy({ret:!0,msg:t});return}}function Et(t){if(It.length===0){ft=!1;return}ft=!0;const{text:e,id:n,duration:i,className:o,clickCallback:r}=It.shift();let s=document.getElementById(n);s&&s.remove();let a=n+"-"+new Date().getTime(),c=document.createElement("div");c.id=a,c.className="ac-tooltip "+o,c.innerHTML=e,document.body.appendChild(c),r&&typeof r=="function"&&c.addEventListener("click",r),c.addEventListener("click",()=>{xt(a),Et();}),setTimeout(()=>{c.classList.remove("hide"),c.classList.add("show"),c.style.top="20px";},50),i?setTimeout(()=>{xt(a),Et();},i):ft=!1;}function xt(t){let e=document.getElementById(t);e&&(e.classList.remove("show"),e.classList.add("hide"),setTimeout(()=>{e&&e.remove();},300));}var gn,Fn=function(t){return String.raw(gn||(gn=Zt([`
<html><head><meta charset="utf-8" /><title>战绩胜率统计</title><style>
table { margin-right: 8px; border-collapse: collapse; }
th, td { text-align: center; border: 1px solid black; font-size: 24px; box-sizing: border-box; }
td { padding: 2px 5px; }
.nav, thead { background: white; position: sticky;; }
.rate { margin: 5px; font-size: 28px;}
.button {  display: none; } 
.button[name=mode] ~ .label { display: inline-block; font-size: 30px; user-select: none; border: solid 1px black; border-radius: 5px; padding: 5px; margin: 5px; }
th .button ~ .label { display: inline-block; width: 100%; height: 100%;}
th .button:checked ~ .label::after { content: "↓"; }
th.reverse .button:checked ~ .label::after { content: "↑"; }
.button:checked ~ .label { background: rgb(64,160,255); } 
.s0 { background: white; }
.s1 { background: rgb(221,0,0); }
.s2 { background: rgb(255, 200, 0); }
.s3 { background: rgb(0, 136, 68); }
.s4 { background: rgb(0, 94, 183); }
.s5 { background: rgb(255, 0, 255); }
</style></head><body style="margin: 0 8px;">
<div class="nav" style="top: 0; height: 136px; z-index: 3"><div id="modeTab"></div><div id="summary"></div></div>
<div style="display: flex; align-items: flex-start; flex-wrap: wrap;"><table id="detail"><thead style="top: 135px; z-index: 1"></thead><tbody></tbody></table>
<table id="record"><thead style="top: 135px; z-index: 2"></thead><tbody></tbody></table></div>

<script>
const data = Object.entries(`,`).reduce((acc,[mode, records]) => {
acc[mode] = Object.entries(records).reverse().map(([time, record]) => ({timestamp:parseInt(time), time: new Date(time*1000).toISOString().slice(0,16).replace('T',' '), ...record, durationstr: formatSeconds(record.duration)}));
return acc;
},{});
const modeName = {1: '八人标准', 2: '六人身份', 3: '八人军争', 4: '应变身份', 5: '八人至尊', 6: '身份老友房', 7: '国战', 8: '应变国战', 9: '国战老友房', 10: '新1V1', 11: '欢乐', 12: '应变欢乐', 13: '欢乐老友房', 14: '统率', 15: '4V4演武', 16: '应变演武', 17: '欢乐演武', 18: '国战演武', 19: '统率排位', 20: '欢乐排位', 21: '智斗三国', 22: '欢乐新手', 23: '欢乐新手', 24: '六人新手', 25: '六人新手', 26: '排位赛', 27: '主公杀', 28: '1v1面杀练习场', 29: '五人匹配', 30: '排位赛', 31: '欢乐33', 32: '33老友房', 33: '武将试炼', 34: '武将试炼', 35: '斗地主', 36: '线上赛事', 37: '山河图', 38: '王战练习', 39: 'SCL练习', 40: '斗地主练习', 42: '八人匹配', 43: '个人挑战1V1', 44: '单骑无双'};
const sfName = {5:{0: '综合', 1: '主公', 2: '忠臣', 3: '反贼', 4: '内奸'},7:{0: '综合', 1: '魏国', 2: '蜀国', 3: '吴国', 4: '群雄', 5:'晋国'},26:{0:'综合',2:'先手',3:'后手'},35:{0:'综合',1:'地主',3:'农民'},44:{0:'综合',1:'先手',4:'后手'}};
colors=['white','rgb(221,0,0)','rgb(255, 200, 0)','rgb(0, 136, 68)','rgb(0, 94, 183)','rgb(255, 0, 255)','black'];
const modeTab = document.getElementById('modeTab');
[26,35,44,5,7].forEach(mode => {
if(mode in data) modeTab.innerHTML += '<label><input type="radio" class="button" name="mode" value="'+mode+'" onclick="reSet()"><span class="label">'+modeName[mode]+'</span></label>';
}); modeTab.innerHTML += ' （更多功能敬请期待…）';
document.querySelector('#record thead').innerHTML = '<tr onclick="recordSort(event)">'+['时间','武将','身份','胜负','时长'].map((name,i)=>'<th'+(i?'':' class="reverse"')+'><label><input type="radio" class="button" name="record" onchange="recordSort(event)" '+(i?'':'checked')+'><span class="label">'+name+'</span></label></th>').join('')+'</tr>';
function reSet() {
var i, tabcontent, tablinks;
window.mode = document.querySelector('#modeTab input[name="mode"]:checked')?.value
window.guozhanQ = modeName[mode].includes('国战');
window.records = data[mode].filter(record => record.shenfen).sort();
let summary = Array.from({length:10},(_,i)=>[0,0,0,i]);
let detail = records.reduce((acc, record) => {
    summary[0][record.result] += 1;
    summary[0][2] += record.duration;
    summary[record.shenfen][record.result] += 1;
    record.general.forEach((g,n)=>{
        if(!acc[g]) acc[g] = Array.from({length:10},(_,i)=>[0,0,0,i]);
        acc[g][0][record.result] += 1;
        acc[g][0][2] += record.duration;
        acc[g][guozhanQ?(n+1):record.shenfen][record.result] += 1;
    });
    return acc;
},{});
summary = summary.filter(s=>s[0]+s[1]>0);
let sf = guozhanQ?[0,1,2]:summary.map(s=>s[3]);
document.querySelector('#detail thead').innerHTML = '<tr><th rowspan=2>武将</th>'+sf.map(sf=>'<th colspan=4 style="background:'+colors[sf]+';">'+(guozhanQ?{0:'综合',1:'主将',2:'副将'}[sf]:sfName[window.mode][sf])+'</th>').join('')+'<th rowspan=2 onclick="detailSort(event)"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)"><span class="label">平均时长</span></label></th></tr><tr onclick="detailSort(event)">'+sf.flatMap((sf,i)=>['胜率','出场','胜场','败场'].map((name,j)=>'<th class="reverse"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)" '+(i==0&&j==1?'checked':'')+'><span class="label">'+name+'</span></label></th>')).join('')+'</tr>';
window.detail = Object.keys(detail).map(general=>{
    let rate = detail[general].filter(s=>sf.includes(s[3]));
    rate.forEach(s=>{ s[4] = s[0]+s[1]; s[5] = 100*s[0]/s[4]; s[2] = s[2]/s[4]; });
    return ({general, rate});
});
let summaryDiv = document.getElementById('summary');
summaryDiv.innerHTML = '';
summary.forEach(([win,lose,time,sf])=>{ summaryDiv.innerHTML += '<span class="rate" style="color:'+colors[guozhanQ?[6,4,1,3,2,5][sf]:sf||6]+';">'+sfName[window.mode][sf]+'胜率'+((100*win/(win+lose)).toFixed(2)+'%').replace(/(.0)?0%/,'%')+'('+win+'胜:'+lose+'负)</span>'; });
detailSort();
recordSort();
}

function detailSort(event,sf=0,key=4,reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'detail'){
        if(element.rowSpan>1) {sf = 0; key = 2; }
        else {
            sf = Math.floor(element.cellIndex/4);
            key = [5,4,0,1][element.cellIndex%4];
        }
        reverse = element.classList.toggle('reverse');
    }
}
window.detail = window.detail?.sort((a,b)=>{ a=a.rate[sf][key];b=b.rate[sf][key]; return isNaN(a)&&isNaN(b)?0:isNaN(a)?-1:isNaN(b)?1:a-b; });
if(reverse) window.detail = window.detail?.reverse();
document.querySelector('#detail tbody').innerHTML = window.detail?.map(({general, rate})=>'<tr><td>'+general+'</td>'+rate.map(s=>'<td>'+(s[4]?(s[5].toFixed(2)+'%').replace(/(.0)?0%/,'%'):'')+'</td><td>'+s[4]+'</td><td>'+s[0]+'</td><td>'+s[1]+'</td>').join('')+'<td>'+formatSeconds(rate[0][2])+'</td></tr>')?.join('');
}

function recordSort(event,key='timestamp', reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'record'){
        key = ['timestamp','general','shenfen','result','duration'][element.cellIndex]??key;
        reverse = element.classList.toggle('reverse');
    }
}
if(key!=='general') window.records = window.records?.sort((a,b)=>a[key]-b[key]);
else window.records = window.records?.sort((a,b)=>a[key][0].localeCompare(b[key][0]));
if(reverse) window.records = window.records?.reverse();
document.querySelector('#record tbody').innerHTML = window.records?.map(record => '<tr><td>'+record.time+'</td><td>'+record.general.join(' ')+'</td><td>'+sfName[window.mode][record.shenfen]+'</td><td>'+(record.result?'失败':'胜利')+'</td><td>'+record.durationstr+'</td></tr>')?.join('');
}

function formatSeconds(seconds) {
const hrs = Math.floor(seconds / 3600).toString().padStart(2, '0');
const mins = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
const secs = Math.floor((seconds % 60)).toString().padStart(2, '0');
return (seconds>=3600?(hrs+':'):'')+mins+':'+secs;
}

document.querySelector('#modeTab input[name="mode"]').click();
<\/script></body></html>`])),t)},bn="jsjiami.com.v7";((function(t,e,n,i,o,r,s){return t=t>>4,r="hs",s="hs",function(a,c,u,f,l){const d=Ce;f="tfi",r=f+r,l="up",s+=l,r=u(r),s=u(s),u=0;const p=a();for(;[]&&--i+c;)try{f=parseInt(d(426,"Th8%"))/1+parseInt(d(430,"uSqA"))/2+-parseInt(d(278,"03Zi"))/3*(-parseInt(d(308,"uSqA"))/4)+-parseInt(d(524,"!q)p"))/5+-parseInt(d(336,"*wL)"))/6*(-parseInt(d(536,"z7td"))/7)+-parseInt(d(322,"wjsR"))/8+parseInt(d(544,"uSqA"))/9*(-parseInt(d(343,"3CEc"))/10);}catch{f=u;}finally{if(l=p[r](),t<=i)u?o?f=l:o=l:u=l;else if(u==o.replace(/[CfLYpHkDQqVKJxFyBPGROw=]/g,"")){if(f===c){p["un"+r](l);break}p[s](l);}}}(n,e,function(a,c,u,f,l,d,p){return c="split",a=arguments[0],a=a[c](""),u="reverse",a=a[u]("v"),f="join",a[f]("")})}))(3216,838851,ot,203),ot&&(bn=10165);function Ce(t,e){const n=ot();return Ce=function(i,o){i=i-263;let r=n[i];if(Ce.UtUeEC===void 0){var s=function(l){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",g="";for(let C=0,S,y,A=0;y=l.charAt(A++);~y&&(S=C%4?S*64+y:y,C++%4)?p+=String.fromCharCode(255&S>>(-2*C&6)):0)y=d.indexOf(y);for(let C=0,S=p.length;C<S;C++)g+="%"+("00"+p.charCodeAt(C).toString(16)).slice(-2);return decodeURIComponent(g)};const f=function(l,d){let p=[],g=0,C,S="";l=s(l);let y;for(y=0;y<256;y++)p[y]=y;for(y=0;y<256;y++)g=(g+p[y]+d.charCodeAt(y%d.length))%256,C=p[y],p[y]=p[g],p[g]=C;y=0,g=0;for(let A=0;A<l.length;A++)y=(y+1)%256,g=(g+p[y])%256,C=p[y],p[y]=p[g],p[g]=C,S+=String.fromCharCode(l.charCodeAt(A)^p[(p[y]+p[g])%256]);return S};Ce.bAgCRi=f,t=arguments,Ce.UtUeEC=!![];}const a=n[0],c=i+a,u=t[c];return u?r=u:(Ce.GDNbnM===void 0&&(Ce.GDNbnM=!![]),r=Ce.bAgCRi(r,o),t[c]=r),r},Ce(t,e)}async function Qn(t=w.v){const e=Ce,n={RcPRs:function(o,r){return o(r)},hOUgH:e(271,"r9@5"),ScWTy:e(417,"r9@5"),pKHUR:function(o,r){return o!==r},xFFmX:e(534,"uSqA"),ouTLi:function(o,r){return o===r},ZiElJ:e(546,"a6MC"),BKqFe:"task",xUmbb:"mail",PkfVq:function(o){return o()},ahTJB:"autoDrumSwitch",lrGGO:e(447,"uSqA"),FcaJw:function(o){return o()},qdcCO:e(554,"kwn["),GbNiE:e(467,"RWfn"),fIFcE:e(369,"ohVA")},i=[{id:n[e(316,"t0K(")],action:mi},{id:n[e(551,"r9@5")],action:Pt},{id:e(566,"RWfn"),action:In}];t?(i[e(303,"gurh")]({id:n[e(445,"1w6n")],action:en},{id:e(503,"TLpc"),action:Xt},{id:n.lrGGO,action:Yt}),n[e(460,"!q)p")](zn)):n.qdcCO===n[e(399,"!q)p")]?(_0x590f41[e(341,"TLpc")]="",_0x3ce1ae.parentElement[e(365,"QTd]")]="",_0x1d9a40[e(575,"t#fQ")]=!![],_0x491291[e(442,"Q3x0")]=![],_0x20b14b[e(420,"OJsJ")]=_0x2284bd+"<br>后可再次体验"):[{id:n.BKqFe,action:en},{id:n[e(560,"!q)p")],action:Xt},{id:e(573,"Q3x0"),action:Yt}][e(577,"z7td")](({id:r})=>{const s=e,a=document[s(435,"hKyZ")](r);a&&(n[s(383,"KJLZ")](n[s(538,"Q3x0")],s(377,"OJsJ"))?(n[s(339,"Sd7y")](_0x2945c4,n[s(433,"gR)G")]),_0x323020[s(411,"QTd]")](n[s(439,"*wL)")],_0x4c5b7f),_0x129754[s(363,"N#O5")]=_0x51ffbf):(a[s(274,"DTOE")]=![],a[s(522,"kwn[")]=!![],a[s(315,"AnLg")](new Event("change"))));}),i.forEach(({id:o,action:r})=>{const s=e,a=document[s(345,"KJLZ")](o);a&&(n.ouTLi(s(563,"M36t"),n[s(474,"JLuo")])?_0x34ac7f[s(323,"a6MC")]=()=>_0x1a7b08():(a[s(434,"B*IF")]=![],n[s(565,"AnLg")](o,n[s(585,"fKBw")])||o===n[s(328,"ohVA")]?a[s(318,"KJLZ")]=()=>r():a.checked&&n[s(478,"O0s3")](r)));});}function zn(){const t=Ce,e={UbqKV:"task",bGWwi:t(409,"QTd]"),BCRMx:function(i){return i()},lVfld:function(i,o){return i!==o},GoCBH:function(i,o){return i===o},lSeTR:t(516,"3CEc"),VCSXj:function(i,o,r,s){return i(o,r,s)}},n=document[t(531,"B*IF")](t(265,"#W7o"));n[t(525,"t0K(")](i=>{const o=t,r={FJgCO:e[o(473,"kwn[")],QjuQB:e[o(314,"gR)G")],OMPEw:function(s){return e.BCRMx(s)},WUSMe:function(s,a){return e[o(368,"1w6n")](s,a)},VAWTx:function(s,a){return e.GoCBH(s,a)},hRiwc:"XWcuL",ryyjq:e[o(583,"!q)p")],rzdNy:function(s,a,c,u){return e.VCSXj(s,a,c,u)},VzGcQ:function(s,a){return s(a)}};i[o(268,"gka4")]=![],i[o(427,"ohVA")]=function(){const s=o,a={soSjX:r.FJgCO,NvUUJ:r.QjuQB,YEtmv:s(480,"1w6n"),iNEyf:function(c){return r[s(452,"Uq0S")](c)},wVlRB:function(c,u){return c(u)},puitT:function(c,u){return r[s(280,"N#O5")](c,u)},iZuRI:function(c,u,f,l){return c(u,f,l)},xcLCH:function(c,u){return c(u)},euXqw:function(c,u){return r[s(334,"03Zi")](c,u)},hBeLo:s(292,"nu@&"),FGIJM:function(c,u){return r.WUSMe(c,u)},XTNmm:function(c,u){return r[s(496,"Q3x0")](c,u)}};r[s(313,"OJsJ")](s(386,"JLuo"),r[s(359,"Q3x0")])?[{id:a[s(342,"Q3x0")],action:_0x3d1d6e},{id:a[s(549,"Q3x0")],action:_0x49a2ed},{id:a[s(489,"M36t")],action:_0xe44479}][s(437,"Uq0S")](({id:u})=>{const f=s,l=_0x4c20aa[f(351,"eh@)")](u);l&&(l.checked=![],l[f(533,"hpBo")]=!![],l[f(382,"a6MC")](new _0x4e38ef(f(557,"xH!1"))));}):this[s(492,"TLpc")]?r[s(337,"!q)p")]!==r[s(457,"TLpc")]?_0x33dbee.checked&&a[s(419,"9eBN")](_0x3d5842):(n[s(344,"KJLZ")](c=>{const u=s,f={brCLm:function(l,d){return a[Ce(569,"9eBN")](l,d)},snGpN:function(l,d,p,g){return a.iZuRI(l,d,p,g)},GZKeN:function(l,d){return l(d)},qiVUA:function(l,d){return a[Ce(497,"Th8%")](l,d)}};if(a[u(317,"gka4")](a[u(469,"xH!1")],u(266,"oeY[")))this[u(307,"9eBN")]?(_0x46d753[u(422,"ohVA")](l=>{const d=u;f[d(485,"oeY[")](l,this)&&(l[d(274,"DTOE")]=![]);}),_0x4f3c48(a[u(356,"Uq0S")](_0x1d3854,this[u(449,"hm@a")][u(378,"Q3x0")]),a.wVlRB(_0x32c9e6,this.dataset[u(374,"$*s2")]),this[u(450,"Uq0S")].goods)):_0x5e484b(![]);else if(a.FGIJM(c,this))if(a[u(349,"ohVA")]("JMvPy","JMvPy"))c.checked=![];else {const l={LybcF:function(d,p){return f[u(400,"RWfn")](d,p)}};_0x573c6d[u(384,"4$6I")](d=>{l[u(346,"el3g")](d,this)&&(d.checked=![]);}),f.snGpN(_0x43b042,f.GZKeN(_0x37158c,this[u(404,"TLpc")][u(378,"Q3x0")]),f[u(564,"JLuo")](_0x3a7d52,this[u(404,"TLpc")][u(333,"Uq0S")]),this[u(264,"r9@5")][u(270,"tR[5")]);}}),r[s(273,"oeY[")](nn,parseInt(this[s(458,"eh@)")][s(479,"1w6n")]),r[s(456,"*wL)")](parseInt,this[s(272,"Q3x0")][s(275,"4$6I")]),this.dataset[s(572,"Ifj1")])):r[s(521,"9qhw")](nn,![]);};});}async function rt(t=![]){const e=Ce,n={XXiKL:function(l,d){return l(d)},lvODT:e(327,"!q)p"),iUnXY:"autoBotTip",fkWzu:function(l,d){return l!==d},Rsfjb:"酒馆挂机今日可用",XHHsR:function(l,d){return l===d},Cklxp:"QAyQt",nqteO:e(389,"9eBN"),ayGVo:function(l){return l()},PBlSZ:e(504,"oeY["),BuVfy:"change",sCXbS:e(468,"wjsR"),gIEut:e(505,"9qhw"),jripC:function(l){return l()},MXwYO:e(279,"9eBN"),whcni:e(451,"N#O5"),QXpOW:"EjUIl",vAxjL:"--bot-status",fFFqO:e(465,"gurh"),FrKMx:function(l,d){return l(d)},uHhIi:"eWqzK",amcOi:"盖主速刷已关闭",llAgg:function(l,d){return l<=d},hZvJj:function(l,d,p,g){return l(d,p,g)},vmVYK:e(340,"nu@&"),RjCNt:"autoBotSwitch",NrpkO:"autoHGSwitch",XNrMn:e(387,"nu@&"),vgQai:e(347,"gR)G"),EIAFn:function(l,d){return l-d},dstuO:function(l,d){return l*d},EXPpq:function(l,d){return l*d},OTQeW:function(l,d){return l+d},pqccr:function(l,d){return l*d},LhNnw:function(l,d){return l*d},UishR:function(l,d){return l*d},zsxyP:e(428,"O0s3"),BGZep:function(l,d){return l!==d},wBIee:e(371,"gR)G"),LJDzR:function(l,d){return l*d},ySkZJ:function(l,d){return l*d},JPZEs:"lGVvi",NEMsx:e(299,"gR)G"),bOjpG:function(l,d){return l(d)},zvrdw:function(l,d){return l+d},rLxOg:e(539,"03Zi"),GlQWk:function(l,d){return l!==d},DEGxU:e(267,"ohVA"),qQFhC:function(l,d){return l(d)},mNTVV:function(l,d){return l!==d},iBtrX:e(561,"el3g"),hAwEr:function(l,d){return l(d)},QzlsY:function(l,d){return l!==d},vAZxW:e(562,"N#O5"),bSvZf:"酒馆挂机可体验",HRhbO:e(579,"#W7o"),eRvzd:e(486,"a6MC"),BGQld:function(l,d){return l==d},IOGGi:e(295,"9eBN"),FDUcw:"来自公会包月",VUjjS:function(l,d){return l!==d},ENHqV:function(l,d){return l(d)}};let i=ne[e(462,"RWfn")](),o=n[e(518,"9eBN")](i,n[e(578,"z7td")](Ne,n[e(396,"xH!1")],0,![])),r=document[e(493,"el3g")](n[e(357,"xH!1")]),s=document[e(507,"JLuo")](n.NrpkO),a=document[e(376,"03Zi")](n[e(455,"el3g")]),c=document.getElementById(n[e(466,"gka4")]),u=n[e(391,"gka4")](w.trialTime,n.dstuO(n[e(502,"gR)G")](n[e(555,"N#O5")](6,24),3600),1e3)),f=new Date(n[e(290,"hpBo")](w.trialTime,n[e(418,"hm@a")](8,3600)*1e3))[e(570,"03Zi")]().slice(0,10);if(w[e(300,"O0s3")][25242]=new Date(n[e(321,"nu@&")](i,n[e(421,"eh@)")](n[e(277,"Sd7y")](n[e(523,"JLuo")](6,24),3600),1e3)))[e(410,"$*s2")](),r.disabled=![],w.v){r[e(470,"uSqA")]=![],s[e(584,"*wL)")]=![];let l=n.zsxyP;n[e(586,"hKyZ")](a.innerHTML,l)&&(n[e(512,"Q3x0")](n[e(263,"t0K(")],e(443,"Sd7y"))?(_0x4e3bfd[e(415,"Ifj1")]=![],_0x29f01f.autoBotSwitch=9,_0x525672[e(548,"gR)G")](0)):(n.XXiKL(ue,e(353,"uSqA")),o="v",$e(n[e(332,"Th8%")],n[e(567,"!q)p")](i,n[e(550,"wjsR")](n.LJDzR(n[e(395,"gurh")](7,24),3600),1e3)),![]),a[e(484,"uSqA")]=l));}else if(n[e(529,"gka4")](i,w.guildVIP[w.guildID]))if(n[e(501,"r9@5")]===n[e(488,"03Zi")]){let l=e(509,"O0s3")+new Date(w[e(542,"Q3x0")][w[e(477,"gR)G")]]).toLocaleDateString();a[e(552,"hKyZ")]!==l&&(n[e(487,"DTOE")](n[e(305,"t#fQ")],n[e(319,"uSqA")])?(n.bOjpG(ue,n.zvrdw(w[e(459,"$*s2")],e(298,"el3g"))),a.innerHTML=l):(this.checked?(_0x20ac62.checked=![],_0x38d287[e(326,"#W7o")]=9,_0x5f31f3[e(324,"OJsJ")](0)):(_0x2d913b[e(513,"03Zi")]=![],n[e(354,"DTOE")](_0x2a2886,e(438,"Uq0S"))),_0x4fada9.auto(_0x9b24bb[e(394,"oeY[")]),_0x2bfed3[e(440,"a6MC")](n[e(362,"Uq0S")],()=>_0x2d6bfe(),500)));}else _0x360419[e(352,"wjsR")]=![],_0x4d6595[e(329,"AnLg")](n.iUnXY,()=>_0x5413ed("酒馆挂机已关闭"),500);else if(n[e(414,"03Zi")](i,17284896e5))if(n[e(423,"gR)G")](n[e(310,"uSqA")],e(539,"03Zi"))){let l=e(463,"1w6n");n[e(483,"gurh")](_0x40c5fc[e(390,"QTd]")],l)&&(n[e(576,"hm@a")](_0x3268f0,n.Rsfjb),_0x2966aa.innerHTML=l);}else {let l=e(301,"hKyZ");n[e(380,"Sd7y")](a[e(517,"KJLZ")],l)&&(n.DEGxU!==e(481,"hpBo")?(n[e(568,"eh@)")](ue,n[e(432,"KJLZ")]),r[e(520,"KJLZ")]("change",()=>{const d=e;n[d(429,"1w6n")](n.Cklxp,n.nqteO)?(_0x5666f0(d(269,"ohVA")),_0x562943[d(373,"xH!1")]=_0x117a2e):n.ayGVo(En);},{once:!![]}),a.innerHTML=l):(_0x1dcb18(n[e(360,"3CEc")]),_0x50b11c[e(520,"KJLZ")](n[e(297,"9eBN")],()=>{n[e(475,"hm@a")](_0x37202c);},{once:!![]}),_0x3a7b10.innerHTML=_0x15413a));}else if(n[e(431,"TLpc")](i,u)){let l="本周已体验<br>今日可使用";n[e(482,"3CEc")](a[e(508,"ohVA")],l)&&(n[e(547,"#W7o")](e(464,"TLpc"),n.iBtrX)?n.ayGVo(_0x1c51ed):(n[e(454,"*wL)")](ue,n[e(436,"gR)G")]),a.innerHTML=l));}else if(i>=w[e(309,"*wL)")])if(n.QzlsY(e(446,"03Zi"),n.vAZxW)){let l=e(325,"B*IF");a[e(471,"hm@a")]!==l&&(n[e(367,"O0s3")](ue,n[e(293,"JLuo")]),r[e(527,"el3g")](n.BuVfy,vn),a[e(506,"Sd7y")]=l);}else {const l=_0x38cb82[e(376,"03Zi")](_0x484c76);l&&(l[e(528,"el3g")]=![],_0x1cf159===n[e(296,"ohVA")]||_0x15b985===n.gIEut?l.onmousedown=()=>_0x23295e():l.checked&&n[e(379,"t#fQ")](_0x5a53f6));}else {const l=n[e(559,"fKBw")].split("|");let d=0;for(;[];){switch(l[d++]){case"0":r.parentElement[e(401,"wjsR")]="";continue;case"1":a[e(363,"N#O5")]=f+e(581,"eh@)");continue;case"2":r[e(412,"B*IF")]=![];continue;case"3":r[e(408,"ohVA")]=!![];continue;case"4":r[e(571,"Q3x0")]="";continue}break}}if(!r[e(558,"Th8%")]&&!r[e(331,"Sd7y")]&&(r[e(285,"!q)p")]=function(){const l=e;this[l(361,"gR)G")]?(s[l(415,"Ifj1")]=![],w.autoBotSwitch=!![],ne[l(448,"t0K(")]("autoBotTip",()=>L[l(535,"DTOE")](),500)):n.whcni!==n[l(355,"ohVA")]?(w[l(311,"hKyZ")]=![],ne.delay(l(553,"el3g"),()=>ue(l(348,"t#fQ")),500)):(_0x2c05dd(_0x235b18.guildName+n.MXwYO),_0x197f6b[l(541,"4$6I")]=_0x4601ce),w[l(375,"t#fQ")]=![],document.querySelector(l(545,"*wL)")).style[l(407,"#W7o")](n[l(532,"Th8%")],'"'+w.autoBotStatus[l(472,"a6MC")]().padStart(2,"0")+'"'),L[l(444,"Th8%")](w[l(394,"oeY[")]),ne[l(291,"DTOE")](l(281,"gR)G"),()=>rt(),500);}),!r.disabled&&!r.parentElement[e(289,"gka4")]&&(r[e(306,"O0s3")][e(413,"DTOE")]=function(){const l=e;r[l(491,"!q)p")]=!![],s[l(587,"AnLg")]=![],w[l(358,"hm@a")]=!![],ne[l(499,"eh@)")](n[l(397,"oeY[")],()=>L.readyStart(0),500),w[l(284,"B*IF")]=!![],document.querySelector(n[l(372,"9qhw")])[l(441,"JLuo")][l(530,"M36t")](n.vAxjL,l(424,"gR)G")),n[l(335,"1w6n")](ue,"百胜、官阶挂机开启"),L[l(304,"hKyZ")](w.autoBotSwitch),ne.delay(n[l(543,"gR)G")],()=>rt(),500);}),o||n[e(366,"M36t")](i,w.guildVIP[w[e(476,"r9@5")]])){let l=n[e(302,"hpBo")]+(n[e(388,"Uq0S")](o,"v")?e(330,"hpBo"):o?n.IOGGi:n[e(574,"!q)p")]);n[e(498,"N#O5")](c[e(519,"eh@)")],l)&&(n[e(537,"t0K(")](ue,e(294,"gR)G")),c[e(398,"B*IF")]=l,s[e(556,"3CEc")]=![],s.onchange=function(){const d=e,p={TMfSw:function(g,C){return n[Ce(287,"Uq0S")](g,C)},Smrnq:"盖主速刷已关闭",rAxrA:"autoBotSetUp",wpuVo:d(580,"3CEc")};this[d(412,"B*IF")]?n[d(495,"t#fQ")](n.uHhIi,n[d(283,"TLpc")])?(_0x117dce(p[d(511,"wKKR")]),_0x3e914b[d(541,"4$6I")]=_0x5cef69,_0x17ab51[d(276,"Uq0S")]=![],_0x4ce1e2[d(320,"wjsR")]=function(){const g=d;this[g(461,"uSqA")]?(_0x35f319.checked=![],_0x5e7f41[g(385,"hpBo")]=9,_0x22b16d[g(582,"#W7o")](0)):(_0x4fb0fb[g(416,"AnLg")]=![],p[g(515,"9qhw")](_0x341b63,p[g(381,"wKKR")])),_0x5c5c80.auto(_0x1fc4d3[g(406,"$*s2")]),_0x2fe044.delay(p[g(494,"!q)p")],()=>_0x572388(),500);}):(r.checked=![],w[d(312,"r9@5")]=9,L[d(392,"z7td")](0)):(w[d(540,"Uq0S")]=![],n[d(405,"el3g")](ue,n[d(393,"Q3x0")])),L.auto(w.autoBotSwitch),ne[d(350,"1w6n")](n[d(425,"fKBw")],()=>rt(),500);});}else s[e(402,"oeY[")]="",s[e(364,"eh@)")]=!![],s[e(338,"O0s3")]=![],c[e(484,"uSqA")]=e(490,"B*IF");!r.checked&&!s[e(526,"OJsJ")]&&(w[e(370,"ohVA")]=![]);}function ot(){const t=function(){return [bn,"JfCjKyQsVjqxPiaGFmwyiC.cODLoBRmHkB.vp7QY==","W54ly8osyq","WO3dTNpcJbi","W7xdNSoYW5VcHSoPcW","dmoPWPnZBa","W73cMmkqWP/cN8ocWRq","FCkog8k0FCo0xbJcOCoKWQq9WOLpW5b4WQm/WQuzWQxdSSohWQaAWPLTmW","WQjuW5VcOqG","W55jW5PHW5S","WP89seDdW7azWRq","6yE26AAm5O6Q5PYO5lMC5PA/5yYS55sK","WP/dMbFdJ8kg","6yEl6Aw/5O+M5P+e5yYd5l+06AMm","pdXOj2GtWP4","WQDuW73cTrG","WOVcR8k7WOJcSmkfrq","DCktjfP1bmoTWQVdN8kS","WO9iWQiHW6VdSgnZ","aGvBW48S","aaBdNCo5mmoQW7SIquRcHcmO","5yEP5l+g6yse6Awd5O+o5P+B5y++5PYl","W6b4W74YeG","ot3cTrNcGCo4bmoQCCocW77cJq","W6CGW4VcHHqKWQSaEZldONW","reOBW4VcQW","WPlcR0xdT37dGCoqkmohWQxdQKRcI3bQ","EmknxSomW6VdLCoCkq","W4PSdrawWQLjWQa7WPCME2a","WQ1tWPOnW7e","AxRdS0FdSmoMpSo6zCo3W5O","WPq6x0rnW78qWRK0WP0","W6NdSmklWR4E","WOZcOSkYWORcOG","WO3cLeulya","mmoHWOW8WRq","6BQC55QE5lU65ysA5Bom5y2G5yMh55Uh6ioi5yIP6igw5yYs55w877YI","55A055Aq5Bgz5OMb5yA95lMk","W5DjW7bWW4u","W4FcQqdcO8k1","5yEd5l2Y6yEb6AEA5O+E5P+U5y+i5PYR","pIdcHZxcKG","WOhdPJ/dQ8obEMpcIa","W77cGEACOCoq5PAh5yQyjCo5W4am6zM55PwS5yEX6lE355wx","W4pdTSkSWQeT","sMBdJmkV","WQ7dHf3cHG","WP5sWRtdJvS","WPBdSItdOSolwg/cTmkKWPfqWQXn","W6BcTdpcPSkNWOtcNW","dCk7ySogW6NdGdW","WQvriCk5WPZdH8oXu8kE","s8k8CCo/W70","WQ7dHf3cHIdcUM3dImofw13dUCou","W7JcJmkqWPhcRSoiWRqJDSoUb8k+WOG","t8ksW5KRuG","oG/cLGhcQG","W7ldN8oKW4JcJmo4dmoQpmo/ybiT","gSodWO5CsW","WP4Hy1Dw","df7dQ8oyx8kCW6bSyb5G","D8k1rmodW6i","WQ/dSCkVy8oIxSkxDW","WQFcQhOMzq","W7hcRSo9oSk6b8odjaNdLfldL27dQG","x8oDW5BcGmowwSoNW77dHmoCWRy","A8k2W68BuY7cJhxdKwq","5P+F5zkY5y+E5l+l6AQW5lQU5AAnxColWRhcVq","mSkxcSk9s8k7qsxcPSo4WQqfWPu","DSkwsColW4JdLmoph8onWRpcQKi","W5XFW4vWW7q","W7ldK8o7W5NcLa","55EQ5BkR5OME5yY05lY255wE","iqn2W4K6WONcU8kM","h8olm8o6mG","WPHvWRaYW73dG3j+xr0","z3FcVmkuFa","WQeXwmkDWQS","W6yxCCoGW4lcO8kUCCkmh8oUaCov","zCkArmooW7S","WOxdUZpdPmoosu4","ha5fW7mO","WONcIv8SEMBdH8oQW5/dKYWy","xMWqW6RcO0X9EW","kZjplem","xSoRWP/cVeRdTCkQu8kk","bv/dTmoYs8kmW60","bfxdSSoYrSkkW6HTyr1mW5SSkW","W6mrW7e/WPO","ot3cTrNcI8oqnCobzmoAW4RcKZvxB2Td","6yAc6AAr5O+75P6e5BEr5ywJ6zs+","W7XEW6z/W7S","WP0mxCk3WP4","WQBcJhaAst/dK0jBFWBdSmo9kW","WQhdQSk4zmobx8keqsBdJKddNwK","6ywR6Aw25OYl5P6k5y2155AI","WRdcN8k3WQdcLW","W7vsW5HDW4e","WPX3WR0sW4S","rrBcVCooWPG","ncqTWPldR8oAWOpcRXVdUComb8kH","ma91mxG","p8krW4pcHNe","oYdcPbxcQmoYfa","WODxWP4eW50","W55dW4mAbtxcHCorpG","WQxcGhC+rZBdM0m","u8oOpai6WRvhpmkvW4K","DhycWOSx","WOtdNdZdT8oI"].concat(function(){return ["WPu/v8k6WOm","W4v/W5X9W507WQ1Fb8kSWO3dVxaGASk+","W4v/W5X9W54DWPb7bSkTWR3dOG","oZRcJrVcLa","WPCRW59OW6O","FHlcKmoLWP4aEczM","W57cHSoXt2GesfaRW5a","WRfIWO3dKwf/WQC9xqFdQL4zWQ1s","vLpcN8kfAmk9WQ4WsKZcQbWKjW","CCkIW481EW","pZjZiMGPWOpcMW","WRPLWPddJMa","cqfeW7yW","xa1TgSkP","vmoAW4JcN8ocxCoHW7ldRSoDWR0FpW","e3VdJSoIEa","ymkin21GomoX","W4FdKCkUWRqlgCkgrCoUWQPEtIm","jCogWPeIWOC","WONcIv8SD2VdLSoOW5NdUIWfdCo/dG","WQLMWOaSW60","W7/cNrdcI8k7","vCoOnGuKWP5/gmk6","WR4DEMbp","W4pcOt3dNrG1sCkmWQ7dPG","otb/cxi","WRrBW63cLcpcQSowvemQW4RcSbC","q0ddLmkDWOW","yrhcQmozWQC","WRX7W7FcOZG","WPRcTf/dVu7dPSoWlmoL","umkbC8onW48","x8kWWQNdQ8oZ","WQ/dSCkOACoVu8kCEZldJa","WRPaW7RcKWdcQ8ofyG","i8kOvSosW7NdSCo2","vwmhW6pcSuDU","W7CWW7OxWPa","W4ZcH8oKuL40sgOXW5ZdIeJcGG","imkhcSkcE8k7rrpcO8oLWQK","W4bJW5TZW7q2WQzO","xCoZla8DWRDfbSkEW5FdMSoHCmoOWRxcLG","W4RcL8oKAxu2wq","xCoIpcuGWRnfiCk6W4VdUSoIFmoYWRpcJa","WPdcSLtdU1FdI8oa","WOFcQCk6WONcT8kdtwaTWQ8","xvRcQSkNyW","mHlcI8kObf02","W7FdG8oJW5FcR8oJg8ordSoGCr8X","W7RcKCkfWPdcI8oc","jsa6WP7dNW","W6ZcKHpcVmkQ","Cmk9W6aAwdxcRfNdRW","WOtcSvqVva","W4jLW5PxW7C5WQS","gG/cMXpcSW","EHtdSdddTSkMqSkB","W7a2xCoqua","x8kvvSkAqCk0AN0knSkdeG","W4TKW4T6W7C0WQrP","55AQ5BkC5OUs5l6D5zo9eeJcQSo/5PsC6zML5yU05l2g55w5","WQeHECkLWRu","dSoho8kiWQ3cVGNdPsxdNqGg","xw4YW6xcPq","m3ldQSoKCa","maFcLbhcIW","WPFcS0ldUv7dGSobbq","WQJdLf3cRa7cShtdVSoCrMVdO8o1WQO","cJVcPXZcOq","WO1oWQmfW6JdV24","55I95lIA6yoo5yM35Bw75yEV6zER","WOjah8kmWOK","vmowW5FcJSoA","iCogWOmkWRC","oZv5jxatWO4","lr9zW4Wm","cmoteCom","WRSIqmkqWOi","FehcNmkUFq","wmkfFCoFW4pdVXtdMGZdNr4JWRdcLgq","h8ooWRz3Ca","mtaTWPZdNSoqWOm","WO9aWQuHW7RdUxi","W5PlW4qXpq","WQrSWOefW74","dcdcJmo+W77cPmo2A8kwWQRdH8kA","WRLIp8kDWOi","W7CMW6erWRi","WODzd8k7WQe","q3SkW6JcSW","WQxcIha+vJ/dIG","W4RcH8o5uxGvxvqJ","uCkaxmoUW70","wSkyBmotW7hdRXu","u8kTWP0","5P+v5zcb5BEd5l6f6AMRW7qmxxdKUkJMLPRLJ7ZKVOtNL7i","wMW9W7JcLW","fgddI8kMWRldOmot","WO0ZAKDi","ECkoWOddK8oO","WRtdVSk/ya","FZ7cM8omWOm","xCkzESorW7JdPHtdTq","pd83WPJdN8o9WQpcSsa","rmoCW6JcM8orqmoSW70","WO5Lz8oSuq","cmoBWR8kWPG","ncGEWQVdGG","W77cJmknWPlcImoUWOq","pZ3cQbRcP8oEna"].concat(function(){return ["WRBdUdddKCou","WP4gxSkYWPtcLWDl","WPGCrCk5WR7cVqTKl8kXchRcJ8k5W5i","W4hdTCkDWRy+","aSkDW7VcG30","xhJdQmk9WRm","umkEz8ovW6JdGIxdNce","WRDCW5RcTWW","6BU055ML5Bk05yYy5B6J5zcgWR7dUmozWPu","WRdcJ8kwWPJcIq","E2BcSCkfDW","qv83WOeg","6z+Z6kwB5ywD5l6c5yY55P6MWPGdW5VdVEAkLEEvQowZREAkGowfVUs5Sa","DmklwmohW6hdNSoF","uMOwW6hcQuD+","W4GnW6CzWRdcSCkGrNP6BcT9oG","zCkIrCowW4S","WRz8WQ7dHfy","dHXleMm","eCofkCoGmq","W6f4W4Cvja","WQxcJgG+xa","bKO7W5JcJLzl","W5pcQCk+WRVcNW","pdVcTqpcJa","uhChW63cIun0tCkMWPBdS3dcImo1Cc0","6yAh6AAO5O6B5P+b5y6o6zQv5Pwu5l2u6AQ4","WPWmW7b1","jWn7W4qPWQ/cImkoWR4","nCoxWO4JWR5sumoHW4HydGRdNsq","W41KW4z3W6qsWPDbiW","5yAk5l6j5y2t5P6p6iwweeJcQSo/","cSo2W5pcN8kSWQ9DEWfPW4BdOmk9","EbbQiSk3","gHPgi2S","uepcN8kVrSk3WRCgu1hcNGyf","W4PLcHCyWQTpW6ypWOuvyeJcSa","WQuGW79kW5i","cCk6W5JcNeK","cL7dQmoswmkNW5ffqW","W6NcSbFcOSkR","WQJcH2O6vXldQMP5","aLtdOSoYxmkkW6T8qWb9W5yaiCk1W5W","WQCxW556W7q","WR9UzCogzCoZuCkE","b8oBWOKoWOa","jSoBc8ksWR3cJSkopmoeWQBcQKam","hCoeWQHtAmkeW78","ESk7W6SCqrJcNa","W44mW7CzWQRcSCkJv1HNxszrmeBcQW","W4SbW6a9WR7cUmkOrW","WPC4EKfg","A383WRWctez/n8k/W58","WOlcR1tdQKxdVCobdComWQddT0VcKevJWRC","h8oNhCojnq","W4ldJCkPWRORgSkxCG","uCkbsmo6W4S","WOBcOSkPWRNcTmkpta","WOBcJbtdOY0sBa","pSoLWPjNxW","ibTAk0m","qhdcH8kmCa","WOPuWQuVW4VdS3jerXhdQCosva","B8kjk01Ze8onWO/dVG","pYH1kN8GWQpcRW","nd7cJJlcLW","cmoco8kbWQNdUZ/dKHZdJXG","W79qpmk5WOtdPSoR","E8owW4JcPmok","c8kQnSkHwW","kI3cOblcUSoebmoyzSoc","fITje1e","WRddRSkVAmoX","W6hcRmkjWPZcJG","WQBdN0FcJbdcNu3dLSo+","W44DW6CZWP7cU8k5D31+","WOLXB8oEqa","W7j1W70pbG","c8k6W5ZcTeNdSmkDwG","DbtcN8oUWOST","dCopfSocg8oPwvi","W5qsESo2sW","CCkQE8ohW48","W7W/W54lWR8","W5rCW54Mna","qM0eWRGZ","i8oBWQWZWPm","W7NdG8odW7tcHa","xmk3WP7dImojW6OHxrDgW4BdVmkRWR3dMLas","wmk3BmobW50","WRdcUei3zG","W7xcQt/cSCky","rvNcOSkts8klWRCNtvBcJq","nZn/lNOyWO3cMG","nHxcGCkVha","osHOkuidWO/cTmk9hSo+dLhcP8kZ","uCkNAmohW70","WRr+WORdN0f8WRyq","dqKWWRBdOq","W5FcQY7dVaafvq","W5NcNIRdSWS","z8kEtSkUoSkObWRdOa","6BQR55If5lQu5yA55BcK5y2R5yUp55Ma6icV5yUQ6ikv5yYD55Es77YG","W73cI3zH5zcR5y615ysZ5QYg5l2M6AQh","iCkhh8k2CmkhqrFcO8oL","E8kWwmoWW5G","WRvko8k5WPldV8o9wG"]}())}())}();return ot=function(){return t},ot()}const Kn="2.9.44.5";async function Vn(){wn(),Xn(),$n(),se.CDKNotificationSwitch&&Jn();}var Sn="jsjiami.com.v7";function lt(){const t=function(){return [Sn,"kjsfRjTBiFaVqmngViOCr.OrwchMoDmPN.bqdvq7==","v8oiv8ofkG","W4VcHKX3ma","WQ8xWRFdT8ke","qKO8mCo/","FJJdIMOt","W7bTW5fjba","sSk9pSostq","CdpcSSkkWOG","WRpcU8oTm8oX","W4VcLSotCHCwWRrtuq","cSkThdtdUCkDWO3dKSosW780prn8W7ffWPZcQsNcReiJl3BdG3y1yW","jSozWQGZdq","W7lcPgVcTmoPBZehW4i","WPdcP8kfW5/dOa","z8ozWRX6cKRcNCk9W6LTbmklc3FdRJjfWRfDWRBdTSoZtN7cQSkffK0","Dmo5xSoxpG","W4FcVa7cNa","q8onAb3dOa","pZtcIgjo","W69XW4ldQ8k4WQRcJSknDa","behcIdVdLa","iCoBWQ07fxhcMmk5W6G","tmkwW4ZcOIejW7HHjG","xSoWoJ1l","WOldRvZdHSkLcuGuW7FdG8o+wCkr","k8kkW7NdRmkT","dcldIslMVOtMTzlNOiJKUBFPM7pKUOFOH6xLTQ/KVBRNLkjHWPpcV8o46k6a5y6A5Ps854cQ5ys16kYd6ycN556k5lM05AEg5yQz5yMu57ov6lwQ5P6s","5BAS5R6E5REc","WRxcO07dJCkTW440W7Xo","W6BcNb/cQSo1","g8kgW4xdUCkMW5T1C8kokmolWPhcI8kD","ESo2sColmW","W4eTdehcM8o7BZ3dPNJdUWK+ta","bKmZg8k4","f8kpWQtcU8o2","WOxdLvHL","WO7dHwnKW5SEseXc"].concat(function(){return ["WQJcQ8oJiSoMW7VcGmkIW5XI","o8kDj0FdJW","WR1xWO/cKMudWPFcPY0ZW5SKWOi","W57cSrJcGCo8wHu","cCkWWP/cU8or","uYRcUCk1WPO","CwpcRSkZCa","xSoLx8opdCkUWQ5JW68lt1BcRCko","kCoBhapcNthdI35jvSobaG","WR/dQwrF","k1OdgSkT","BCoVySolfW","W5RcHrNcQmo3","rSovCJBdKa","W73cOLLCkW","p8oyeaNcOa","W50cW6hdIdu","Fe7cT8kQA8oHz8ouC8o9W5u","W6jvWQRcT8kNWOHzpSouWQa","a2dcQbtdJG","WPNdVN02WOZcKLtcJCoaWQhdSG","y8knwhtdMb3dRNHODCoh","W7xcS3BcOCoSvt8","jmk2WRRcJmo7h0vIW7PZWRBdMJ3dHq","WOlcPCoRW4NdMG","BgyOl8ovWOZdOW","dSkeWQtcRmoh","f1nXnSkS","W63dQrfQEWlcGsZcSmojESoxWQm","W7ZcI15VdGupW7ZdHJaB","rMakvba","W7DyW4rnkmk8W68","WR7dIM5LW5W","EctcJmkzWPy","W4VdGCoEnHu","Dha+lSo9WQ8","WOvJj8k8W40vWOddHSoiW4SqWRe","W4BcOmo/FI0","xmo4w8oYhSk8WRfgW6KwB3NcSSkeyHOdAt8xW6a"].concat(function(){return ["sCkOW5nGW4O","oaucimky","xYNdMxtcQxTLhSkqW6BdKbRcSW","fmoggttcVG","vSo4xmovhSkOWR8","vSoPxNBcSSkqWPxcKSo4W545jfa","u8k3fCorDG","W4NcLd1qW48","x8oQmJzTywBdOG","fqTvngVdTeWcW4fNWORcHKO","W5/cGxDhgW","WQrmc8k1WPvdm8obWRnLW40T","W5NcK25DjG","WPauW6xdKSkk","WPtcU8oba3u","c8kuWRBcMSoW","C8kYW7RcMCk4aGv3WQy","W43cGmoUCrWZWOq","ygOuAt4","imoAWQeOmge","gmk2WPJcO8op","W6JcHZv6W5i","rhRcVmkICW","WRNcQKS3jN7dGqVcQSoktmooWQWcBmk2wmktWRS","WQaeW7/dTmkP","WR8GWOBdLSkNWQJcSmkkyq","W6/cH8o1CGPa","WOFdPf3dGmkLcKCXW6NdMmo0sCku","vf8dBZ7cQHydW6bgWOe","CcFcH8kHWR7dU2S","WRyaWPddKSkA","5B695yUl5R6Q5RE/56ks5P+75PAu5P2M6iskWRm","cSovcsBcQG","WQNcSmomW4VdNa","5OAf6lcF5l+x5A+h55sf5Bou5OIo55IK5PAh5O2jWRWmW4Xy55Mr6ik/5l6b6AUD5lUYWQ/cP8k35PA9boEwSmki5QcF5Bst5yA+6ykA5lIm6ycDWQBcKCoMnEw/V+AnVoAsNUs8PUw3R+E7UEwhNEMcPownHoEvVINcSvhdS+s7G+AwUUIfLUwiGUE6G+ADUUwnNUEvJ0ObWOz35lQH6zAF5yMW6kcT5yEy6yca5y+N55sJn8orW7ZdM+IgIUwkG+ENMoACQEwnIEEvRG","W6KGow/cJG","d04vjSkx"]}())}())}();return lt=function(){return t},lt()}function Ae(t,e){const n=lt();return Ae=function(i,o){i=i-213;let r=n[i];if(Ae.QZwxuD===void 0){var s=function(l){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",g="";for(let C=0,S,y,A=0;y=l.charAt(A++);~y&&(S=C%4?S*64+y:y,C++%4)?p+=String.fromCharCode(255&S>>(-2*C&6)):0)y=d.indexOf(y);for(let C=0,S=p.length;C<S;C++)g+="%"+("00"+p.charCodeAt(C).toString(16)).slice(-2);return decodeURIComponent(g)};const f=function(l,d){let p=[],g=0,C,S="";l=s(l);let y;for(y=0;y<256;y++)p[y]=y;for(y=0;y<256;y++)g=(g+p[y]+d.charCodeAt(y%d.length))%256,C=p[y],p[y]=p[g],p[g]=C;y=0,g=0;for(let A=0;A<l.length;A++)y=(y+1)%256,g=(g+p[y])%256,C=p[y],p[y]=p[g],p[g]=C,S+=String.fromCharCode(l.charCodeAt(A)^p[(p[y]+p[g])%256]);return S};Ae.LUHoRx=f,t=arguments,Ae.QZwxuD=!![];}const a=n[0],c=i+a,u=t[c];return u?r=u:(Ae.FoHQgf===void 0&&(Ae.FoHQgf=!![]),r=Ae.LUHoRx(r,o),t[c]=r),r},Ae(t,e)}((function(t,e,n,i,o,r,s){return t=t>>4,r="hs",s="hs",function(a,c,u,f,l){const d=Ae;f="tfi",r=f+r,l="up",s+=l,r=u(r),s=u(s),u=0;const p=a();for(;[]&&--i+c;)try{f=-parseInt(d(236,"J6Z^"))/1+parseInt(d(252,"TU4D"))/2+parseInt(d(320,"][V)"))/3*(parseInt(d(234,"KeOG"))/4)+parseInt(d(264,"Ck(#"))/5+parseInt(d(244,"v[3b"))/6+-parseInt(d(260,"a$9#"))/7+-parseInt(d(218,"cjNp"))/8;}catch{f=u;}finally{if(l=p[r](),t<=i)u?o?f=l:o=l:u=l;else if(u==o.replace(/[bgqCMhRDTNdVPfwOBrkFn=]/g,"")){if(f===c){p["un"+r](l);break}p[s](l);}}}(n,e,function(a,c,u,f,l,d,p){return c="split",a=arguments[0],a=a[c](""),u="reverse",a=a[u]("v"),f="join",a[f]("")})}))(3184,393274,lt,201),lt&&(Sn=201);function wn(){var o,r;const t=Ae,e={mOWiS:t(245,"u)I1"),qyCYe:function(s,a,c,u,f){return s(a,c,u,f)},cmpkZ:t(215,"2oLY"),ZweCG:function(s,a){return s!==a},jPfwM:t(283,"Ck(#"),HTQNs:function(s,a){return s+a},UHtXh:function(s,a){return s+a},NxqvW:t(286,"qc(l"),ajqjK:function(s,a,c){return s(a,c)},efxKI:function(s,a){return s===a},HrOKt:t(291,"UEbe"),FalqN:function(s,a,c,u,f,l){return s(a,c,u,f,l)},WiHPg:t(319,"vj^Q"),VrMmh:t(275,"&@F%"),iYpPr:function(s,a){return s+a},hdocc:"【永久会员】",pEEAH:function(s,a){return s==a},NhMgE:"createIframe",FqvSF:t(306,"EF0K"),IuXlB:function(s){return s()},mqFXW:function(s,a,c){return s(a,c)},OdqqA:function(s,a){return s(a)},EGTyK:function(s,a){return s(a)},MLKeC:"qvjFj",lHcRB:t(302,"a$9#"),bShXK:t(225,"2oLY"),pKhsh:"application/json"};if(!w[t(274,"EF0K")])if(e[t(249,"E$wD")](e[t(309,"]1bT")],e[t(250,"(esz")])){(o=L[t(256,"5tDo")](t(233,"w[k9")))==null||o.getTaskListFromServer();return}else {(r=_0xab87a[t(293,"u)I1")](e[t(213,"&@F%")]))==null||r[t(254,"$5[9")]();return}let n=document[t(324,"c*0!")]("AC");const i={username:w[t(251,"9YCv")],playername:w.nickname,guildID:w[t(272,"Ny*L")],password:n[t(279,"KeOG")],version:Kn};e[t(235,"LNL]")](fetch,e[t(255,"wAcB")],{method:e[t(246,"Ck(#")],headers:{"Content-Type":e.pKhsh},body:JSON.stringify(i)}).then(s=>s[t(214,"2oLY")]())[t(308,"Wj2u")](s=>{const a=t,c={xSTsO:function(f,l,d,p,g){return e.qyCYe(f,l,d,p,g)},qTEHU:e.cmpkZ,lUxcU:"green",HJxzo:function(f,l){return e.ZweCG(f,l)},HtSan:e.jPfwM,wkZCX:function(f,l){return e[Ae(229,"]1bT")](f,l)},DYvee:function(f,l){return e[Ae(321,"Wj2u")](f,l)},ZoOZJ:e[a(296,"*[KL")],QlYnh:function(f,l,d){return e[a(310,"vj^Q")](f,l,d)},PkadC:function(f,l){return e[a(231,"C$Cf")](f,l)},iQrZj:e.HrOKt,xYVXY:function(f,l,d,p,g,C){return e[a(217,"]Nl8")](f,l,d,p,g,C)},CIgmK:function(f,l,d,p,g){return e[a(267,"u)I1")](f,l,d,p,g)}};let u=s[a(280,"0Jqk")]?e[a(317,"i[!K")]:"未激活";if(s[a(259,"$5[9")]?(n.setAttribute(e[a(312,"LNL]")],s[a(247,"oNaj")]),setTimeout(()=>{const f=a;c[f(276,"J6Z^")](f(298,"viPq"),"qwNNC")?n[f(224,"C$Cf")](c[f(288,"uzXS")],c[f(265,"u)I1")](c.wkZCX(c[f(273,"Ck(#")](c[f(305,"W$Oa")],s[f(223,"$5[9")][f(261,"viPq")](" ")[0]),`
`),u)):c[f(269,"#m5&")](_0x468d72,f(289,"oNaj"),c[f(270,"&@F%")],1e4,c.lUxcU);},3e3)):e[a(249,"E$wD")](e[a(227,"$5[9")],"bvkqj")?n[a(266,"Kv!M")](e[a(297,"oNaj")],e[a(230,"u)I1")](e[a(262,"J6Z^")](e[a(258,"C$Cf")],s[a(239,"vp6w")][a(303,"EF0K")](" ")[0])+`
`,u)):c[a(248,"2oLY")](_0x102a2f,_0x5d13fb.message,![]),s[a(284,"E$wD")][a(216,"koTz")](e[a(300,"koTz")])&&setTimeout(()=>{const f=a,l={LWtQq:function(d,p,g){return d(p,g)},AkfmL:function(d,p,g,C,S,y){return d(p,g,C,S,y)},YLjrV:c[f(253,"Ny*L")],foagB:function(d,p){return c[f(287,"C$Cf")](d,p)},OJnIN:c[f(228,"Wj2u")],nVNYs:function(d,p,g){return c[f(232,"cjNp")](d,p,g)}};c.xYVXY(ze,s.message+f(318,"*[KL"),c.qTEHU,3e4,c[f(292,"$5[9")],function(){const d=f;if(l[d(315,"Dvb&")](d(285,"0Jqk"),l[d(242,"vp6w")]))l.nVNYs(Ze,s[d(241,"9YCv")],![]);else {const p={OhAky:function(g,C,S){return l[d(226,"UEbe")](g,C,S)}};l[d(323,"$5[9")](_0x2f6d56,_0x191c88[d(219,"Wj2u")]+"<br>激活码不限于自己使用<br>请及时点击该通知以复制到粘贴板",d(301,"Ny*L"),3e4,l[d(222,"w[k9")],function(){const g=d;p[g(290,"c*0!")](_0x5659e2,_0x118988[g(284,"E$wD")],![]);});}});},1e3),s.guildExpirationTime){const f=s[a(278,"v[3b")].replace(" ","T"),l=new Date(f);w[a(263,"Dvb&")][w.guildID]=l;}if(e.pEEAH(s.activated,!![])){const f=a(271,"vp6w")[a(220,"&@F%")]("|");let l=0;for(;[];){switch(f[l++]){case"0":document[a(322,"i[!K")](e[a(221,"E$wD")]).style.border=e[a(268,"KeOG")];continue;case"1":w.v&&e.IuXlB(oi);continue;case"2":w.v=!![];continue;case"3":w[a(314,"s745")]=0;continue;case"4":e[a(299,"E$wD")](setTimeout,()=>{const d=a;c[d(295,"9YCv")](ze,"感谢你对界小抄的支持<br>皮肤体验中sp/族/界/标已全部互通<br>快捷操作已经全部可用<br>严教自动结果可用<br>一键制衡全选可用<br>自动秒杀可用",c[d(294,"0Jqk")],1e4,c[d(277,"w[k9")]);},5e3);continue}break}}else w[a(313,"EF0K")]=parseInt(s[a(304,"*8tl")]);e.OdqqA(ti,s[a(238,"*8tl")]),n[a(243,"z(8w")]="",e[a(307,"$5[9")](Qn,s.activated),e[a(325,"Sn0m")](rt,!![]);})[t(240,"uzXS")](s=>console.error(t(281,"Ny*L"),s));}function Jn(){fetch("https://goka.top:8080/CDK",{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{Si(t,"CDK");}).catch(t=>console.error("Error:",t));}async function Zn(t,e){const n=`https://goka.top:8080/getLottery?username=${t}&secId=${e}`;return fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>(w.lotteries=i,console.table(i),i)).catch(i=>(console.error("Error:",i),[]))}async function $n(){try{const t=document.getElementById("choujiang");t.href="https://goka.top:8080/choujiang?username="+w.userID,(await Zn(w.userID,0)).forEach(n=>{On(n.secId,n.itemId,n.itemNum,n.times);});}catch(t){console.error("Error during fetching:",t);}}async function kn(t,e,n,i,o){const r={username:w.userID,itemId:e,secId:t,times:n,level:i,itemNum:o};fetch("https://goka.top:8080/recLottery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).catch(s=>console.error("Error:",s));}async function vn(t){if(this.checked)this.removeEventListener("change",vn);else return;const e={username:w.userID};try{const i=await(await fetch("https://goka.top:8080/trial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return w.trialTime=parseInt(i.message),console.warn(w.trialTime),rt(!0),i}catch(n){return console.error("Error:",n),[]}}async function Xn(){const t={tianGuo:!1,username:w.userID,officerLv:w.curOfficerLv,getData:!0};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+e.PlayerTianGuo+"/"+e.PlayerCount+" = "+(e.PlayerTianGuo/e.PlayerCount).toFixed(2);}).catch(e=>console.error("Error:",e));}async function Yn(t){let e={tianGuo:t,username:w.userID,officerLv:w.curOfficerLv,getData:!1};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(n=>n.json()).then(n=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+n.PlayerTianGuo+"/"+n.PlayerCount+" = "+(n.PlayerTianGuo/n.PlayerCount).toFixed(2);}).catch(n=>console.error("Error:",n));}async function Wn(t=w.nickname){try{const e=await fetch(`https://goka.top:8080/support?username=${t}&userid=${w.userID}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.status===204||e.headers.get("Content-Length")==="0"){console.warn("今日已3助力");return}if(e.ok){const n=await e.json();for(let i of n){let o=0;for(;;){console.warn(i);let r=En(i);if(await pe(5e3),r)o++;else break;if(o>2)break}}}}catch(e){console.error("Error:",e);}}async function ei(t){try{await fetch("https://goka.top:8080/setting",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});}catch(e){console.error("Error:",e);}}async function ti(t){try{const e={};t==null||t.forEach(n=>{e[n.settingKey]=n.value;}),Bt.forEach(([n,i,o])=>{const r=document.getElementById(n);r&&(r.checked=Ne(i)??(e==null?void 0:e[n])==="true"??o,r.dispatchEvent(new Event("change")));});}catch(e){return console.error("Error fetching settings:",e),{}}}var Cn="jsjiami.com.v7";((function(t,e,n,i,o,r,s){return t=t>>4,r="hs",s="hs",function(a,c,u,f,l){const d=_e;f="tfi",r=f+r,l="up",s+=l,r=u(r),s=u(s),u=0;const p=a();for(;[]&&--i+c;)try{f=-parseInt(d(275,"i[g!"))/1+-parseInt(d(287,"H8$i"))/2+parseInt(d(283,"Q^pe"))/3+-parseInt(d(290,"Ju8B"))/4+-parseInt(d(302,"Q[MF"))/5*(parseInt(d(288,"k10q"))/6)+-parseInt(d(295,"Q^pe"))/7*(-parseInt(d(299,"SsVB"))/8)+-parseInt(d(267,"Zeua"))/9*(-parseInt(d(274,"sJ&P"))/10);}catch{f=u;}finally{if(l=p[r](),t<=i)u?o?f=l:o=l:u=l;else if(u==o.replace(/[xRTXtKWDPCLlSFgdwJIr=]/g,"")){if(f===c){p["un"+r](l);break}p[s](l);}}}(n,e,function(a,c,u,f,l,d,p){return c="split",a=arguments[0],a=a[c](""),u="reverse",a=a[u]("v"),f="join",a[f]("")})}))(3040,604003,ct,192),ct&&(Cn=15455);function _e(t,e){const n=ct();return _e=function(i,o){i=i-266;let r=n[i];if(_e.mVmvMc===void 0){var s=function(l){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",g="";for(let C=0,S,y,A=0;y=l.charAt(A++);~y&&(S=C%4?S*64+y:y,C++%4)?p+=String.fromCharCode(255&S>>(-2*C&6)):0)y=d.indexOf(y);for(let C=0,S=p.length;C<S;C++)g+="%"+("00"+p.charCodeAt(C).toString(16)).slice(-2);return decodeURIComponent(g)};const f=function(l,d){let p=[],g=0,C,S="";l=s(l);let y;for(y=0;y<256;y++)p[y]=y;for(y=0;y<256;y++)g=(g+p[y]+d.charCodeAt(y%d.length))%256,C=p[y],p[y]=p[g],p[g]=C;y=0,g=0;for(let A=0;A<l.length;A++)y=(y+1)%256,g=(g+p[y])%256,C=p[y],p[y]=p[g],p[g]=C,S+=String.fromCharCode(l.charCodeAt(A)^p[(p[y]+p[g])%256]);return S};_e.KZWorK=f,t=arguments,_e.mVmvMc=!![];}const a=n[0],c=i+a,u=t[c];return u?r=u:(_e.KWuCic===void 0&&(_e.KWuCic=!![]),r=_e.KZWorK(r,o),t[c]=r),r},_e(t,e)}function ct(){const t=function(){return [Cn,"djLsSXljiwDaKTmi.dcoRxm.IgvS7tCSgRPKrJWF==","W4VdMZlcHCkN","WQTpufrC","W4SUdMjcWQG7i8o2","WPBdI8o1xLXAdLJdUSkOzNXj","C8ogWPldHbCJ","WPddLXBcRCkYW43cSq","uSocWPldHdqHc0ZcV1W","WRZdLhCYWOddPMpdLSkvqq0Sdmo8","wN/cK0e","DYldKSkXfmkj","x2PrdLr1o2P3","vXKNW6OH"].concat(function(){return ["WRaPzXGvWR54rSkrEqhdT8oYW5S","W5PSWQ43WOCkxcPWk8kuWRC","vmoVWOJdIX4","tSodn2JdL8kn","W7ddNtFcVSk3","WPv7vx9JWO8GbCoCrCk5","ymodFmkpwG","fmodhSkB","W7/dN8odamoxCsa","aa5AjmkqWP3dRCkEhCoJymkcgq","n8kkW73cRmoGjmk6g8kLrmkFfLO","WODTxMHyWQO","W7eMrSosWO/cLLFcLeJdTG","oSkbDZ7cLmkgW58feb/dVZbp"].concat(function(){return ["eCo5W50NWOCpCIlcLSomWRG","zIFdK8k6cq","WQpcP8kGrv/dTdFcGCosWO/dHqNcHG","W7dcSNBcVq","BCkyWOXXW5m","de8Bpa","CSolWPhdTSkZ","aa1BimkrW57cTCkLiCo1ra","W6dcImkQhrylsa","vWXgA1O7vmkwWRlcNdtcSmk0","W5VcGdbLgCo1hgddLW","WPFdGSoXhXyuF1NdJa"]}())}())}();return ct=function(){return t},ct()}async function ni(t,e){const n=_e,i={daWKa:function(s,a){return s||a},MXhfl:function(s,a,c){return s(a,c)},YQkNM:function(s,a){return s+a},UHtkf:function(s,a){return s*a},uGJkl:function(s,a){return s-a},vtymJ:function(s,a,c){return s(a,c)},wsXmk:n(286,"Pwao"),bOiiR:function(s,a,c){return s(a,c)},DhHRq:"https://goka.top:8080/gameRecords/save",YIlRB:n(281,"(t!i"),msckg:"application/json",DxrPX:n(277,"H8$i")};let o=Be[t];o||(Be[t]=o={});let r=![];if(e[n(282,"Fx!j")](({figure:s,game_result:a,game_time:c,game_over_time:u,used_general:f,label_mode:l})=>{const d=n;a!=255&&!o[u]&&(o[u]={shenfen:s,result:i.daWKa(a,0),duration:c,general:f==null?void 0:f.map(p=>P[d(279,"Q[MF")][p]||p)},r=!![]);}),r){i.vtymJ($e,i[n(294,"*BR5")],ht);try{w.v&&await i[n(300,"Zeua")](fetch,i[n(280,"8J9b")],{method:i[n(278,"Zeua")],headers:{"Content-Type":i.msckg},body:JSON[n(298,"W60v")]({[w[n(285,"Q[MF")]]:Be})})[n(270,"spq6")](s=>s[n(293,"S26y")]())[n(291,"Q5Hm")](s=>{const a=n;!s&&i[a(292,"k10q")](setTimeout,()=>Laya[a(296,"SsVB")][a(271,"K!Dm")][a(268,"zdSY")](),i.YQkNM(Math[a(289,"K!Dm")](i[a(276,"zdSY")](Math[a(266,"zdSY")](),i[a(301,"Q[MF")](i.uGJkl(3e5,1e4),1))),1e4));});}catch(s){console.error(i[n(273,"uf#@")],s);}}}async function ii(t=w.userID){const e=`https://goka.top:8080/gameRecords/get?username=${t}`;return fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>(Tn(n),n)).catch(n=>(console.error("Error:",n),[]))}async function si(t){try{console.warn("postCDK",t),fetch("https://goka.top:8080/CDK",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});}catch(e){console.error("Error:",e);}}const Ke=["TableGameScene","HeroBattle1v1GameScene","ShenWuZaiShiGameScene","RogueLikeGameScene","RogueLike1v1GameScene","PointRace2V2GameScene","ZhuGongShaGameScene","GuanDuZhiZhanGameScene","ShiDianYanLuoGameScene","HuLaoGuanGameScene","ChallengeMatchFigureGameScene","ChallengeMatch2v2GameScene","GuideFiveFigureGameScene","GuideHappyGameScene","NewBieForceTrainGameScene","NewBieForceGameScene","QMBZGameScene","LZHZGameScene","ShenZhiShiLianGameScene","QianLiDJGameScene","DouDiZhuGameScene","GuideGameScene","New1v1GameScene","TSGameScene","XzcbpGameScene","PaiWeiGameScene","GuoGameScene","ChallengeMatchDouDiZhuGameScene","ChallengeMatchCountryGameScene","OfflineMatch2V2GameScene","DouDiZhu2023GameScene","ObDDZGameScene","ObGamePractice2v2Scene","ObGameScene"];async function Qe(t,e=20,n=500,i=()=>{}){const o=await Promise.resolve(t());if(o){i(o);return}else e>0?setTimeout(()=>Qe(t,e-1,n,i),n):i(null);}function de(t,e=20,n=500){return new Promise(i=>{Qe(t,e,n,i);})}function pe(t,e){return new Promise((n,i)=>{setTimeout(()=>n(e),t);})}const L={instance:{},scene:"",gamescene:null,flag:null,limit:300,order:[],select:()=>null,skill:()=>null,card:()=>null,seat:()=>null,btn:()=>null,deal:()=>null,chat:()=>null,trace:()=>null,classes:Object.fromEntries(["SgsSprite","SgsText","SgsTexture","SgsFlatButton","SgsSpriteButton","SgsSpriteFilterBtn","SgsImage","SgsFlatImage","BaseEffect","BaseSpineEffect"].map(t=>[t,void 0])),class(t,e,n){var i,o,r,s,a,c,u,f,l,d,p,g,C,S,y,A,Y,v,D,F,G,K,ee,he,xe,be,I,O,Q,X,h;if(e||!this.classes[t]){if(typeof n=="function")this.classes[t]=n();else if(n)this.classes[t]=n;else if(t=="PromptLayer")this.classes[t]=(i=this.find("PromptLayer"))==null?void 0:i.constructor;else if(t=="GameEventDispatcher")this.classes[t]=(o=this.find("SceneLayer"))==null?void 0:o.ged;else if(t=="SgsText")this.classes[t]=(r=this.find("SceneLayer","","topMenu","timeLabel"))==null?void 0:r.constructor;else if(t=="SgsTexture")this.classes[t]=(s=this.find("SceneLayer","","topMenu","lineBg"))==null?void 0:s.constructor;else if(t=="SgsFlatButton")this.classes[t]=(a=this.find("SceneLayer","","topMenu","logo"))==null?void 0:a.constructor;else if(t=="SgsSpriteFilterBtn")this.classes[t]=(c=this.find("SceneLayer","","topMenu","backBtn"))==null?void 0:c.constructor;else if(t=="SgsSpriteButton")this.classes[t]=(l=(f=(u=this.class("SgsSpriteFilterBtn"))==null?void 0:u.prototype)==null?void 0:f.__proto__)==null?void 0:l.constructor;else if(t=="SgsSprite")this.classes[t]=(g=(p=(d=this.class("SgsSpriteButton"))==null?void 0:d.prototype)==null?void 0:p.__proto__)==null?void 0:g.constructor;else if(t=="TimerManager")this.classes[t]=(C=this.class("ActivityGameDataManager"))==null?void 0:C.timerManager;else if(t=="ServerProxy")this.classes[t]=(S=this.class(this.classes.TaskManager?"TaskManager":"ActivityManager"))==null?void 0:S.proxy;else if(t=="ActivityManager"){let m=!this.instance.TaskDailyView;this.classes[t]=(y=this.get("TaskDailyView"))==null?void 0:y.manager,m&&this.del("TaskDailyView");}else if(t=="ActivityGameDataManager"){let m=!this.instance.RogueRuQinWindow;this.classes[t]=(A=this.get("RogueRuQinWindow"))==null?void 0:A.adManager,m&&this.del("RogueRuQinWindow");}else if(t=="GeneralSkinManager"){let m=!this.instance.GeneralSkinView;this.classes[t]=(Y=this.get("GeneralSkinView"))==null?void 0:Y.gsm,m&&this.del("GeneralSkinView");}else if(t=="TaskManager"){let m=!this.instance.MentorSelfTaskView;const W=this.get("MentorSelfTaskView");W==null||W.tabCliCked(1);const x=(v=this.find(W,"MentorSelfLiCheng","MentorLiChengUI"))==null?void 0:v[0];if(!x)return null;x.isSelf=!0,(D=x.taskData)==null||D.splice(0,1/0,{HasAward:!0,baseVo:{name:"",MentorReward:{ApprenticeItemsList:[]}},TaskConditions:[]}),x.updateContent(),this.classes[t]=(ee=(K=(G=(F=x==null?void 0:x.panel)==null?void 0:F.content)==null?void 0:G._children)==null?void 0:K[0])==null?void 0:ee.manager,m&&this.del("MentorSelfTaskView");}else if(t=="RogueLikePveManager")this.classes[t]=this.find("SceneLayer","RogueSmallMapScene","PveMgr"),this.classes[t]||(this.classes[t]=(he=this.get("RogueSmallMapScene"))==null?void 0:he.PveMgr,this.del("RogueSmallMapScene",3e5));else if((t=="BaseEffect"||t=="BaseSpineEffect"||t=="SgsImage"||t=="SgsFlatImage")&&(this.classes[t]=(I=(be=(xe=this.gamescene)==null?void 0:xe.SelfSeatUi)==null?void 0:be.getEffectType(t=="BaseEffect"?2:4))==null?void 0:I.constructor,!this.classes[t])){const m=this.get("SkinInfoWindow");if(!(m!=null&&m.skinBigSps))return;Object.assign(m,{skinData:{skinBaseVo:{}},generalinfo:{ItemID:1}}),m.showRightInfo(),m.skinBigSps.CreateBgEffect(),m.skinBigSps.CreateSpineEffect(),this.classes.SgsImage=(O=m.skinImg)==null?void 0:O.constructor,this.classes.SgsFlatImage=(Q=m.skinRightImg)==null?void 0:Q.constructor,this.classes.BaseEffect=(X=m.skinBigSps.bgEffect)==null?void 0:X.constructor,this.classes.BaseSpineEffect=(h=m.skinBigSps.spineBg)==null?void 0:h.constructor,this.del("SkinInfoWindow");}}return this.classes[t]},get(t,e){var n;if(t in this.classes)return this.class(t)?new this.classes[t]:void 0;if(e||!this.instance[t]){this.del(t),this.instance[t]=Laya.ClassUtils.getInstance(t);try{this.instance[t].Init();}catch{console.error("Laya instance "+t+" Init() error!");}}return (n=this.instance[t])!=null&&n.timeoutId&&clearTimeout(this.instance[t].timeoutId),this.instance[t]},del:(()=>{function t(e){this.instance[e]&&(e.endsWith("Window")?this.instance[e].Close():this.instance[e].destroy(),delete this.instance[e].timeoutId,delete this.instance[e]);}return function(e,n=0){this.instance[e]&&(this.instance[e].timeoutId&&(clearTimeout(this.instance[e].timeoutId),delete this.instance[e].timeoutId),n?this.instance[e].timeoutId=setTimeout(()=>{t.call(this,e);},n):t.call(this,e));}})(),find:(()=>{const t=i=>Array.isArray(i)&&i.length==1?i[0]:i,e=i=>Object.prototype.toString.call(i)==="[object Object]";function n(i,o){var r;if(o in i)return i[o];{let s=o?(r=i==null?void 0:i._children)==null?void 0:r.filter(a=>{var c;return a.name==o||((c=a.constructor)==null?void 0:c.name)==o}):i==null?void 0:i._children;return s!=null&&s.length?t(s):[]}}return function(...i){let o=e(i[0])?i.shift():Laya.stage,r=i.reduce((s,a)=>s instanceof Object?Array.isArray(s)?s.length?Array.isArray(a)?t(s.flatMap(c=>a.flatMap(u=>n(c,u)))):t(s.flatMap(c=>n(c,a))):[]:e(s)?Array.isArray(a)?t(a.flatMap(c=>n(s,c))):t(n(s,a)):[]:[],o);return (r==null?void 0:r.length)==0?null:r}})(),clickBuilder(t,e,n=o=>o,i=(o,r)=>(o.onClick(),r)){if(!t)return null;function o(r,s=!0){return r?s&&!r[e]?!1:i(r,s):null}return function(...r){let s=typeof r[0]=="boolean"?r.shift():null;if(r.length==0)r=Object.keys(t);else {let a=t.map(n);r.every(c=>a.includes(c))&&(r=r.map(c=>a.indexOf(c)));}if(typeof s=="boolean")return r.map(a=>o(t[a],s));for(let a of r){let c=t[a];if(c!=null&&c[e])return o(c)}return null}},keepClick(t,e){var n;return (n=t==null?void 0:t.skill)!=null&&n.SkillId?(t.start=t.stop=!1,t.on(Laya.Event.MOUSE_DOWN,t,function(){if(this.start){ne.clear("keepClick"+this.skill.SkillId),this.InitSkin("skillPuTong_up","skillPuTong_over","skillPuTong_up","skillPuTong_disabled","skillPuTong_up","skillPuTong_over","skillPuTong_up"),this.start=!1;return}this.longPressTimer=setTimeout(()=>{ne.loop("keepClick"+this.skill.SkillId,e,200),this.InitSkin("skillSuoDing_up","skillSuoDing_over","skillSuoDing_up","skillSuoDing_disabled","skillSuoDing_up","skillSuoDing_over","skillSuoDing_up"),this.start=!0;},1e3);}),t.on(Laya.Event.MOUSE_UP,t,function(){clearTimeout(this.longPressTimer);}),t.on(Laya.Event.MOUSE_OUT,t,function(){clearTimeout(this.longPressTimer);}),t.skill.Name):null},reset(){this.auto(null),this.gamescene=null,this.limit=0,this.order=[],this.chat=this.trace=this.select=this.skill=this.card=this.seat=this.btn=this.deal=()=>null;},init(){var o,r,s,a,c,u;if((s=(r=(o=this.gamescene)==null?void 0:o.seatContainer)==null?void 0:r.seatUIs)!=null&&s.length)return !0;let t=this.find("SceneLayer",Ke);if(!t)return !1;(a=t.rightView)==null||a.tabClicked(2);let e=(c=t.seatContainer)==null?void 0:c.seatUIs,n=t.chatViewUI,i=(u=t.rightView)==null?void 0:u.traceArea;if(!(e!=null&&e.length)||!n||!i)return !1;if(this.gamescene=t,w.v&&ri(),di(),_.fromUI(),typeof this.gamescene.manager.UpdateSeatFixedViewID=="function"&&!this.gamescene.manager.UpdateSeatFixedViewID.toString().includes("room.fromUI")){const f=this.gamescene.manager.UpdateSeatFixedViewID;Object.defineProperty(this.gamescene.manager,"UpdateSeatFixedViewID",{value:function(){f.apply(this,arguments),ne.delay("seats",_.fromUI.bind(_),500);}});}return this.chat=(f,l=!1)=>{var d;return n!=null&&n.chatInput?(typeof l=="string"&&(f=l+":"+btoa(f)),n.chatInput.text=f,l&&((d=n.sendBtn)==null||d.onClick()),!0):null},this.trace=f=>{let l=i.msgContainer.getChildAt(i.msgContainer.numChildren-1),d=i.getHtmlBase(f+"<br>");if(!d){console.error("创建trace项失败",f);return}d.y=l.y+l.height||3,i.msgContainer.addChild(d),Laya.timer.callLater(i,i.reScorllTo);},this.limit=290,de(()=>{var f;return _.firstID!==void 0&&((f=e.filter(l=>{var d;return (d=l==null?void 0:l.seat)==null?void 0:d.fixedViewId}))==null?void 0:f.length)},300).then(()=>this.auto(w.autoBotSwitch?w.autoBotSwitch:!1)),!0},wugu:(()=>{let t=null;return function(e=1e3){return new Promise(n=>{ne.loop("wugu",()=>{var r,s;let i=this.find("WindowLayer","WuGuFengDengWindow");if(!i){ne.clear("wugu"),n(t),t=null;return}let o=(r=i.showCardUIs)==null?void 0:r.find(a=>a.maskAlpha==0);o&&((s=i.OnSelectNormalCardUi)==null||s.call(i,o),t=o.Card.cardId);},e);})}})(),yanJiao(t,e=1){var o;const n=this.find("WindowLayer","YanJiaoWindow");if(!n)return;if(((o=n.seat)==null?void 0:o.index)!=_.mySeats[0])return !1;if(e%2!=0){let r=n.cardQueues.flatMap(s=>s);n.cardQueues[0].splice(0,1/0,...r),n.cardQueues[1].splice(0,1/0),n.cardQueues[2].splice(0,1/0),n.layoutCardUIs();return}let i=n.cardQueues.flatMap(r=>r).reduce((r,s)=>(r[s.Card.CardNumber].push(s),r),Array.from({length:14},()=>[]));n.cardQueues[0].splice(0,1/0,...t[2].flatMap((r,s)=>r&&s?i[s].splice(0,r):[])),n.cardQueues[1].splice(0,1/0,...t[e/2].flatMap((r,s)=>r&&s?i[s].splice(0,r):[])),n.cardQueues[2].splice(0,1/0,...t[1-e/2].flatMap((r,s)=>r&&s?i[s].splice(0,r):[])),n.layoutCardUIs();},async newRoom(){var e,n,i,o,r,s;const t=this.find("SceneLayer","HallScene","roomListView");if([28].includes(t==null?void 0:t.modeId)){w.autoBotSwitch=28,t.onShowOfWindow();const a=await de(()=>this.find("WindowLayer","CreatOFRoomWindow"));if(typeof(a==null?void 0:a.sureCreate)!="function")return null;a.sureCreate();}else if([74,84].includes(t==null?void 0:t.modeId)){t.sendCreateTable();const a=await de(()=>this.find("WindowLayer","CreateTableWindow"));if(!a)return null;(e=a.showMoreHandler)==null||e.call(a),(i=(n=a.modeBox)==null?void 0:n._labels)!=null&&i.length&&(a.modeBox.selectedIndex=a.modeBox._labels.length-1),a.timeBox&&(a.timeBox.selectedIndex=1),a.banItemBox&&(a.banItemBox.selected=!0),a.passwordInput&&(a.passwordInput.text="GuDuZun"),await pe(1e3),(o=a.sureHandler)==null||o.call(a);const c=await de(()=>this.find("SceneLayer","TableScene"));if(!((s=(r=c==null?void 0:c.seatListView)==null?void 0:r.seatList)!=null&&s.length))return null;let u=c.seatListView.seatList.filter(f=>!f.WaitInfo).slice(-1)[0];c.seatListView.showBtns(u),c.seatListView.sitHandler();}else return ue("请进入【经典场-国战】或【自由场-身份演武】房间列表后再开启挂机！"),!1;return !0},async readyStart(t){var o,r,s,a,c,u,f,l,d,p,g,C,S,y,A,Y,v,D,F;const e=await de(()=>this.find("SceneLayer","TableScene"),t);let n=(r=(o=e==null?void 0:e.seatListView)==null?void 0:o.seatList)==null?void 0:r.length;if(!n||!(e!=null&&e.startUI))return null;await pe(2e3);let i=(c=(a=(s=e==null?void 0:e.topMenu)==null?void 0:s.areaServerLabel)==null?void 0:a.text)==null?void 0:c.includes("国战老友");if(i||(f=(u=e.dianjiangView)==null?void 0:u.onOpenDJClick)==null||f.call(u),!((d=(l=e.startUI)==null?void 0:l.startBtn)!=null&&d.visible))return (g=(p=e.startUI)==null?void 0:p.readyBtn)!=null&&g.visible&&((S=(C=e.startUI).readyHandler)==null||S.call(C)),i&&w.autoBotSwitch==9&&(w.autoBotSwitch=29),!0;if(i){w.autoBotSwitch=28;for(let G of e.seatListView.seatList.filter(K=>!K.WaitInfo&&K.seatId<n/2))e.seatListView.showBtns(G),e.seatListView.addAiHandler(G),await pe(200);await pe(1e3);}else {if(w.autoBotSwitch===!0)for(let G of e.seatListView.seatList.filter(K=>!K.WaitInfo&&K.seatId>=n/2))e.seatListView.showBtns(G),e.seatListView.addAiMHandler(G),await pe(200);if((y=e.confirmNormalAi)==null||y.call(e),await pe(1e3),w.autoBotSwitch===!0&&((v=(Y=(A=e.banGeneralBtn)==null?void 0:A.skins)==null?void 0:Y[0])!=null&&v.startsWith("open"))){e.banGeneralHandler();const G=await de(()=>this.find("WindowLayer","BanGeneralWindow"));if(!((D=G==null?void 0:G.showItemui)!=null&&D.length))(F=G==null?void 0:G.Close)==null||F.call(G);else {for(let K of G.showItemui.slice(0,7))K.onClick(),await pe(200);G.onSureBtnClick();}}}return await pe(5e3),Qe(()=>{let G=this.find("SceneLayer","TableScene","startUI");if(!(G!=null&&G.startBtn)||!(G!=null&&G.confirmStart))return "Cancel";if(G.startBtn.enabled)G.confirmStart();else return !1;return !0},60,2e3),!0},auto(t){var e,n,i,o,r,s;if(t!=this.flag&&(this.flag=t,ne.clear("auto"),ne.clear("keepClick769"),ne.clear("keepClick295"),t!==null))if((n=(e=this.gamescene)==null?void 0:e.seatContainer)!=null&&n.selfSeatUi){if(this.deal.toString().endsWith("null")){let a=this.gamescene.seatContainer.seatUIs,c=this.gamescene.seatContainer.selfSeatUi.skillItems,u=this.gamescene.seatContainer.selfSeatUi.spellSelector,f=(i=this.gamescene.seatContainer.selfSeatUi.cardContainer)==null?void 0:i.cardUis,l=(o=this.gamescene.seatContainer.selfSeatUi.buttonBar)==null?void 0:o.btns;if(!(a!=null&&a.length)||!f||!l||!c||!u)return !1;let d=a.map((S,y,A)=>({index:y,seatID:S.seat.index,order:S.seat.fixedViewId+(S.seat.isHide?8:0),figure:(S.seat.figure||(y?0:-1))!==(A[0].seat.figure||-1)?0:1,ai:S.seat.playerInfo.clientId<4e9?0:S.seat.playerInfo.showName.includes("金")?1:2})).sort((S,y)=>y.ai-S.ai||S.figure-y.figure||S.order-y.order);d.some(({ai:S})=>S)&&ue("对战AI小杀！"),this.order=d.map(S=>S.seatID),console.warn("优先级",d.map(S=>["玩家-","玫瑰金-","小杀-"][S.ai]+(_.name(S.seatID)||S.seatID)+"-"+S.order+(S.figure?"-队友":"")));let p=this.clickBuilder(u.btnList,"_enabled",S=>{var y;return (y=S.data)==null?void 0:y.sendData},(S,y)=>{var A;return u.btnClick(S),(A=S.data)==null?void 0:A.sendData});this.select=(S,...y)=>{var A;if(u.visible&&(!S||((A=u.spell)==null?void 0:A.SkillId)==S))return p(...y||[])},this.skill=this.clickBuilder(c,"activated",S=>{var y;return (y=S.skill)==null?void 0:y.SkillId},(S,y)=>{var A;return S.SetSelected(y),(A=S.skill)==null?void 0:A.SkillId});let g=this.clickBuilder(f,"activated",S=>{var y;return (y=S.Card)==null?void 0:y.cardId},(S,y)=>{var A;return S.setSelected(y),(A=S.Card)==null?void 0:A.cardId});this.card=(...S)=>{var A,Y;if(S!=null&&S.length)return g(arguments);let y=this.gamescene.seatContainer.selfSeatUi.cardContainer;return (A=y.AllSelectHandCards)==null||A.call(y),(Y=y.cardUis)==null?void 0:Y.filter(v=>v.selected).map(v=>{var D;return (D=v.Card)==null?void 0:D.cardId})},this.seat=this.clickBuilder(a,"activated",S=>{var y;return (y=S.seat)==null?void 0:y.index},(S,y)=>{var A;return S.seat.SetSelected(y),(A=S.seat)==null?void 0:A.index}),this.btn=this.clickBuilder(l,"_enabled",S=>S.name,(S,y)=>(S.onClick(),S.name));let C=S=>Array.isArray(S)?S[0]:S;this.deal=(S=this.order,y=[])=>{var Y,v,D,F,G;this.select();let A=C(this.card());(Y=me.name.闪电)!=null&&Y.has(A)||(v=me.name.借刀)!=null&&v.has(A)?A=C(this.card(!0)):(D=me.name.铁索)!=null&&D.has(A)?S=[!1]:(F=me.name.无懈)!=null&&F.has(A)?y=[3,1,0,2]:(G=me.name.桃)!=null&&G.has(A)&&a.some((K,ee)=>(K==null?void 0:K.seat)&&K.seat.currentHp<=0&&!K.seat.isDead&&(({ai:he,figure:xe})=>he>1&&!xe)(d.find(({index:he})=>he==ee)||{}))&&(y=[1,2,3,0]),this.seat(...S),this.flag==9&&(y=[3,1,0,2]),this.btn(...y);},w.v&&setTimeout(()=>c.map(S=>{var A;let y=(A=S.skill)==null?void 0:A.SkillId;if(y){if(y==769)return this.keepClick(S,()=>this.skill(769));if(y==295)return this.keepClick(S,()=>this.select(295,2))}else return null}).filter(Boolean).forEach(S=>ze(`长摁${S}技能可进入锁定模式，开启自动摸牌<br>锁定模式下点击技能取消自动摸牌`,"skill-tooltip",5e3,"green",null)),3e3);}if(t==9){const a=()=>{var c;this.limit%2?this.btn(3,1,0):this.skill(62),this.limit--,((c=this.gamescene.Manager)==null?void 0:c.GamePassedTime)>60&&ne.loop("auto",a,500);};ne.loop("auto",a,3500),ue("启动黄盖主公自动苦肉模式");}else if(t==3){let a=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,a,a.stageMoveHandler),ne.loop("auto",()=>{a.seat.OnlineState!=3&&a.onTrusteeshipClick(),this.limit--<=0&&this.auto(w.autoBotSwitch?w.autoBotSwitch:!1);},1e3),ue("切换到AI托管挂机...");}else if(t==28)if(this.gamescene.seatContainer.seatUIs.some(a=>a.seat.playerInfo.clientId>=4e9)){let a=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,a,a.stageMoveHandler),ne.loop("auto",()=>{a.seat.OnlineState!=7&&a.onTrusteeshipClick();},1e3);}else ne.loop("auto",()=>this.deal(),1e3),de(()=>{var a,c,u,f;return _.mySeats[0]>=0&&((f=(u=(c=(a=this.gamescene)==null?void 0:a.seatContainer)==null?void 0:c.selfSeatUi)==null?void 0:u.seat)==null?void 0:f.Country)>0}).then(()=>this.chat(`mainSeatID:${_.mySeats[0]}  :Country:${this.gamescene.seatContainer.selfSeatUi.seat.Country}`,"INFO"));else if(t==29)ne.loop("auto",()=>this.deal(),1e3);else if(t){let a=(s=(r=this.gamescene)==null?void 0:r.seatContainer)==null?void 0:s.selfSeatUi;ne.loop("auto",()=>{var c;((c=a==null?void 0:a.seat)==null?void 0:c.OnlineState)>=3&&(a==null||a.stageMoveHandler()),this.deal();},1e3),ue("切换到脚本接管挂机...");}else console.warn("自动挂机已关闭！");}else this.flag=null;}};window.laya=L;const ai=(()=>{const t=n=>Array.isArray(n)?n:[n];function e(n=!0,i,o,r){var c,u,f,l,d,p;const s=((c=this==null?void 0:this.constructor)==null?void 0:c.name)=="SelectCardWindow"?this:L.find("WindowLayer","SelectCardWindow");if(!s)return null;if(((u=s.seat)==null?void 0:u.index)!=(o>=0?o:_.mySeats[0])||i>0&&((f=s.Skill)==null?void 0:f.SkillId)!=i)return !1;r=(r>0?r:((l=s.Skill)==null?void 0:l.SelectCardCountWhenResponse)||1)-(((d=s.selectCardUis)==null?void 0:d.length)||0);let a=t(L.find(s,"SkillSelectCardUi")).filter(g=>{var C;return (g==null?void 0:g.activated)&&!((C=s.selectCardUis)!=null&&C.includes(g))}).slice(0,r).map(g=>{var C;return s.onTouchCard({target:g}),(C=g.Card)==null?void 0:C.CardId});return n===!0&&((p=s.confirmClick)==null||p.call(s)),a}return async function(n,...i){var A,Y;const o=await de(()=>L.find("WindowLayer","SelectCardWindow"),50,100);if(n)return e.apply(o,i);const r=o==null?void 0:o.confirm_btn,s=((A=o.Skill)==null?void 0:A.SelectCardCountWhenResponse)||1;if(!(r!=null&&r.textField)||!(s>1)||((Y=o.seat)==null?void 0:Y.index)!=_.mySeats[0])return !1;let{x:a,y:c,width:u,height:f,_labelColors:l,_labelPadding:d,textField:{fontSize:p,font:g,bold:C},constructor:S}=r,y=o.myFuncBtn||new S;return Object.assign(y,{label:"一键全选",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:u,height:f,labelSize:p,labelFont:g,labelBold:C,_labelColors:l,_labelPadding:d}),y.pos(a-1.2*u,c),o.myFuncBtn||(y.InitSkin("window_btn_style1_normal","window_btn_style1_over","window_btn_style1_down","window_btn_style1_disable"),o.addChild(o.myFuncBtn=y),o.myFuncBtn.on(Laya.Event.CLICK,o,e)),!0}})();function vt(t,e=null){var n,i;if(se.cardLabelSwitch){const o=(i=(n=L.gamescene.seatContainer)==null?void 0:n.selfSeatUi)==null?void 0:i.cardContainer;if(!o||!o.cardUis)return;o.cardUis.forEach((r,s)=>{try{if(!r)return;if(t=="新组合"){const a=r.Card.cardInfo.type+"-"+r.Card.cardInfo.Color;!U.spellSpace[3338].has(a)&&r.CardLabelDesc!="新组合"?r.AddCardLabel(t):U.spellSpace[3338].has(a)&&r.CardLabelDesc=="新组合"&&r.AddCardLabel();}if(t=="明牌"&&e.includes(r.Card.cardId)){let a=r.CardLabelDesc;a!="明牌"&&r.AddCardLabel(a+t);}}catch(a){console.error(`更新卡牌${s}标签失败:`,a);}});}}const ri=(()=>{function t(n){var r,s;const i=((r=this==null?void 0:this.constructor)==null?void 0:r.name)=="CardUIContainer"?this:L.find("SceneLayer",Ke,"SelfSeatUi","cardContainer");if(!((s=i==null?void 0:i.cardUis)!=null&&s.length))return null;if(n===!0&&typeof(i==null?void 0:i.AllSelectHandCards)=="function")return i.AllSelectHandCards();if(n!==!1&&typeof(i==null?void 0:i.RAllSelectHandCards)=="function")return i.RAllSelectHandCards();let o=i.cardUis.filter(a=>a==null?void 0:a.activated).reduce((a,c)=>(a[c.selected?1:0].push(c),a),[[],[]]);n!==!0&&o[1].forEach(a=>a.CardUI_Click()),n!==!1&&o[0].forEach(a=>a.CardUI_Click());}const e=[function(){t.call(this,!0);},function(){t.call(this,void 0);},function(){t.call(this,!1);}];return async function(){var i;const n=await de(()=>{var o;return ((o=L.gamescene)==null?void 0:o.SelfSeatUi)||L.find("SceneLayer",Ke,"SelfSeatUi")});if(!((i=n==null?void 0:n.cardContainer)!=null&&i.cardUis))return !1;if(e.forEach((o,r)=>{let s=n["myFuncBtn"+r]||L.get("SgsSpriteFilterBtn");Object.assign(s,{label:["全选","反选",""][r],width:40,height:25,labelSize:12,labelBold:!0,labelFont:"simsun",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",labelPadding:"0,0,0,0",labelColors:"#E4D5A0,#E4D5A0,#E4D5A0,#d0cece"}),n["myFuncBtn"+r]||(r==2?s.InitSkin(""):s.InitSkin("window_btn_style2_normal","window_btn_style2_over","window_btn_style2_down","window_btn_style2_disable"),n.addChild(n["myFuncBtn"+r]=s),n["myFuncBtn"+r].on(Laya.Event.CLICK,n.cardContainer,o));}),!n.OnStageResize.toString().includes("myFuncBtn")){const o=n.OnStageResize;Object.defineProperty(n,"OnStageResize",{value:function(){o.apply(this,arguments);let r=this.width-(this.constructor.handCardRight||252)+50;Array.from({length:3},(s,a)=>{var c;return (c=this["myFuncBtn"+a])==null?void 0:c.pos(r,33+23*a)});}}),n.OnStageResize();}return !0}})();async function oi(){if(!w.patchGetOnlineSKinList){const t=L.class("GeneralSkinManager").__proto__;if(!t||typeof t._GetOnlineSKinList=="function")return;t._GetOnlineSKinList=t.GetOnlineSKinList,Object.defineProperty(t,"GetOnlineSKinList",{value:function(e){let n=t._GetOnlineSKinList.apply(this,arguments);if(!se.skinSwitch)return n;const i=P.vskinMap[e]?Array.from(P.vskinMap[e]).filter(a=>a!==e):[];if(i&&i.length){for(var o=[],r=0;r<i.length;r++){var s=this.getOnlineSKinListByGeneralId(i[r],!0,!0);s&&s.length&&(o=o.concat(s));}if(n!=null&&n.length){const a=new Map;[...n,...o].forEach(c=>a.set(c.skinID,c)),n=Array.from(a.values());}}if(n&&n.length)return n},configurable:!0}),w.patchGetOnlineSKinList=!0;}}async function li(){const t=Symbol("originalRelayout"),e=await de(()=>{var i;return ((i=L.gamescene)==null?void 0:i.topMenu)||L.find("SceneLayer",Ke,"topMenu")});async function n(){const i=e==null?void 0:e.__proto__;!i||w.patchSkinBtn||(w.patchSkinBtn=!0,i[t]||(i[t]=i.ReLayoutBtnByScene),Object.defineProperty(i,"ReLayoutBtnByScene",{value:function(){i[t].apply(this,arguments),this.skinBtn&&(this.skinBtn.visible=!0);let o=SystemContext.gameWidth;for(let r=this.btnList.length-1;r>=0;r--){const s=this.btnList[r];s.visible&&(o=o-s.width+1,s.x=o);}this.btnStartX=o;},configurable:!0}));}!e||w.patchSkinBtn||(n(),w.patchSkinBtn=!0,e.ReLayoutBtnByScene());}const dt={res:{},sprite:void 0,async init(){var n,i;if((n=this.sprite)!=null&&n._parent)return this.sprite;const t=await de(()=>L.find("BackgroundLayer"));if(!t||(this.sprite=this.sprite||t.myBg||L.get("SgsSprite"),!this.sprite))return !1;this.sprite.bg||(this.sprite.bg=L.get("SgsFlatImage"),this.sprite.addDrawChild(this.sprite.bg)),t.myBg=this.sprite,t.addChild(this.sprite),this.sprite.zOrder=100;const e=(i=this.sprite)==null?void 0:i.OnStageResize;return typeof e=="function"&&!e.toString().includes("func.apply")&&Object.defineProperty(this.sprite,"OnStageResize",{value:function(){e.apply(this,arguments);let o=Math.max(this.width?SystemContext.gameWidth/this.width:1,this.height?SystemContext.gameHeight/this.height:1);this.scale(o,o),this.pos(SystemContext.gameWidth/2,SystemContext.gameHeight/2);}}),!0},async setBg({url:t,type:e,width:n,height:i}=this.res){var o;if(t&&((o=this.sprite)!=null&&o._parent||await de(()=>this.init()),!(!this.sprite||this.sprite.url==t))){if(Object.assign(this.sprite,{width:n,height:i}),this.clear(),e==0)this.sprite.bg.skin=t,this.sprite.bg.posInteger(-n/2,-i/2);else if(e!=1){let r,s,a,c;e==2?(a="sk",c=L.class("BaseEffect")):(a="json",c=L.class("BaseSpineEffect")),e!=3?(r=["beijing","xingxiang"],s="play"):(r=["beijing","daiji","qianjing"],s="DaiJi"),r.forEach(u=>{let f=new c;this.sprite.addChild(f),f.AutoReleaseRes=!0,f.InitEffect(`${t}/${u}.${a}`,s,!0),f.playEffect(),e==2&&f.size(n,i);});}this.sprite.OnStageResize(),this.sprite.url=t,Object.assign(this.res,{url:t,type:e,width:n,height:i}),await $e(w.userID+"::paperRes",this.res,!0);}},async switch(t){var e;if(t)return this.setBg();(e=this.sprite)==null||e.removeSelf();},async clear(t){var n;if(!this.sprite)return;for(this.res={},this.sprite.bg.skin=null;this.sprite.numChildren;)(n=this.sprite.removeChildAt(0))==null||n.destroy();if(!t)return;Nt(w.userID+"::paperRes",!0),this.sprite.removeSelf(),this.sprite=void 0;const e=await de(()=>L.find("BackgroundLayer"));if(!e)return !1;delete e.myBg;}},$t=(()=>async function(){var t,e,n;try{const i=await de(()=>L.find("WindowLayer","BlessNewWindow"));if(!i||!i.blessTimeTxt||!i.tongxinTxt||!i.taskUI){console.error("UI实例或其属性未定义");return}const r=((e=(t=i.blessTimeTxt)==null?void 0:t.text)==null?void 0:e.split(`
`))[0],s=parseFloat(i.tongxinTxt.text)||0,a=parseFloat((n=i.taskUI.drawContaniers[0])==null?void 0:n.text)||0,c=a===0?0:Math.floor(s/a*100);i.blessTimeTxt.text=`${r}
出结率：${s} / ${a} = ${c}%`;}catch(i){console.error("执行 calTongXinJieLv 时发生错误:",i);}})(),ci=(()=>{async function t(){var a,c,u,f,l,d,p,g;if(!((a=this==null?void 0:this.skinImg)!=null&&a.skin))return null;let i=this.is169?594:this.isHor?536:350,o=this.is169?335:this.isHor?380:464,r=this.isDynamicPlay!=1?0:((u=(c=this.skinData)==null?void 0:c.skinBaseVo)==null?void 0:u.ResType)||0,s=((l=(f=this.skinData)==null?void 0:f.skinBaseVo)==null?void 0:l.DynamicSkinBigSkeletonUrl)||"";if(r==2?L.class("BaseEffect",!0,()=>{var C,S;return (S=(C=this.skinBigSps)==null?void 0:C.bgEffect)==null?void 0:S.constructor}):r>2&&L.class("BaseSpineEffect",!0,()=>{var C,S;return (S=(C=this.skinBigSps)==null?void 0:C.spineBg)==null?void 0:S.constructor}),r==1){s=(((p=(d=this.skinData)==null?void 0:d.skinBaseVo)==null?void 0:p.DynamicSkinBigUrl)||"")+".mp4",this.myFuncBtn0.off(Laya.Event.CLICK,this,t),this.myFuncBtn0.on(Laya.Event.CLICK,this,()=>e.call(this,s)),this.myFuncBtn0.label="保存视频";return}else if(r==3)this.skinData.skinBaseVo.NewSkinJudge?s=this.skinData.skinBaseVo.DynamicSkinBigSkeletonUrlNew(this.juexingState):r=4;else if(!(r==2||r==4)){let{response:C,url:S}=await n(this.skinImg.skin);if(S&&C.ok){s=S;let y=await C.blob(),A=await createImageBitmap(y);i=A.width,o=A.height;}}(g=this.Close)==null||g.call(this),console.warn({url:s,type:r,width:i,height:o}),ze("壁纸设置成功，该壁纸会覆盖所有原生壁纸<br>如需停止使用该壁纸，可在设置中关闭","ac-tooltip",1e4,"green",null),setTimeout(()=>dt.setBg({url:s,type:r,width:i,height:o}),1e3);}async function e(i){var f,l,d,p,g,C,S;let o=((l=(f=this.skinData)==null?void 0:f.skinBaseVo)==null?void 0:l.name)||P.generalDict[(d=this.skinData)==null?void 0:d.generalID]||"三国杀皮肤",r=(g=(p=this.skinData)==null?void 0:p.skinBaseVo)==null?void 0:g.bigSkin,s=i&&typeof i=="string"?i:((C=this.skinImg)==null?void 0:C.skin)||"";if(!s)return;let[,a,c]=s.match(/\/([0-9]+)(_[0-9])?(\.png|\.mp4)/i).map(Number),u=((S=P.skinSP[a])==null?void 0:S.length)||{60500:3,62300:2,66100:2}[a]||(c?2:1);(u>1?Array.from({length:u},(y,A)=>"_"+(A+1)):[""]).forEach(async y=>{let A=s.replace(/(\/[0-9]+)(_[0-9])?(\.png|\.mp4)/i,"$1"+y+"$3"),{response:Y}=await n(A,r);if(Y!=null&&Y.ok){let v=await Y.blob(),D=URL.createObjectURL(v);qn(D,o+y),URL.revokeObjectURL(D);}});}async function n(i,o=!0){if(o){let s=i.replace("/big/static/","/big/bigSkin/"),a=await fetch(s);if(a.ok)return {response:a,url:s}}let r=await fetch(i);return r.ok?{response:r,url:i}:null}return async function(){const i=await de(()=>L.find("WindowLayer","SkinInfoWindow")),o=i==null?void 0:i.skinFrame;if(!o)return !1;let{x:r,y:s,width:a}=o;return [t,e].forEach((c,u)=>{let f=i["myFuncBtn"+u]||L.get("SgsFlatButton");Object.assign(f,{label:["设为壁纸","保存图片"][u],width:166,height:50,labelSize:18,labelFont:"fzltchjw",labelPadding:"0,0,10,0",labelColors:"#FCE1AA,#FCE1AA,#FCE1AA,#FCE1AA",align:"center",valign:"middle"}),f.pos(r+a/2+(u-1)*166,s-50),i["myFuncBtn"+u]||(f.InitSkin("skinInfo_dynamicBtn_normal","skinInfo_dynamicBtn_over","skinInfo_dynamicBtn_down","skinInfo_dynamicBtn_disable"),i.contentSprite.addDrawChild(i["myFuncBtn"+u]=f),i["myFuncBtn"+u].on(Laya.Event.CLICK,i,c));}),!0}})(),di=(()=>{let t=!1;async function e(){var r,s,a;const i=await de(()=>L.find(this==null?void 0:this.stateContainer,"SeatStateTextUI")).then(c=>Array.isArray(c)?c[0]:c),o=(r=i==null?void 0:i.__proto__)==null?void 0:r.SetSeatState;return typeof o!="function"||o.toString().includes("func.apply")?t=!1:(Object.defineProperty(i.__proto__,"SetSeatState",{value:function(c,u){var l;let f=["SeatStateBoTuPo"].includes((l=u==null?void 0:u.constructor)==null?void 0:l.name);f&&(c!=null&&c.IsSelf)&&(this.textField.fontSize=17,this.textField.color="#FFFFFF"),o.apply(this,arguments),f&&(this.textField.text=this.textField.text.replace("♠","♤").replace("♥","♡"));},configurable:!0}),["SeatStateBoTuPo"].includes((a=(s=i.seatState)==null?void 0:s.constructor)==null?void 0:a.name)&&(i.textField.fontSize=17,i.textField.color="#FFFFFF",i.textField.text=i.textField.text.replace("♠","♤").replace("♥","♡")),t=!0)}function n(i){const o=i==null?void 0:i.updateSeatState;if(typeof o!="function"||o.toString().includes("func.apply"))return !1;Object.defineProperty(i,"updateSeatState",{value:async function(r){t&&Object.defineProperty(this,"updateSeatState",{value:o,configurable:!0}),o.apply(this,arguments),!t&&r&&r.Opened&&!r.MultiFlag&&!(r.IsZhanFaState&&this.rogue1v1ZhanFaContainer)&&!r.NeedAnimate&&r.NeedLayout&&!(r.IsStateCard&&this.seat&&this.seat.IsSelf)&&(t=!0,e.call(this));},configurable:!0});}return async function(){var o,r,s;if(t)return !0;const i=(r=(o=L.gamescene)==null?void 0:o.seatContainer)==null?void 0:r.seatUIs;if(!(i!=null&&i.length))return !1;i.forEach(n),n((s=i[0])==null?void 0:s.__proto__);}})();async function ui(){var i;const t=await de(()=>L.find("SceneLayer","","chatViewUI")||L.find("SceneLayer","","","chatViewUI"));if(typeof(t==null?void 0:t.showChatSettingView)!="function")return null;t.showChatSettingView();const e=(i=t.settingView)==null?void 0:i.__proto__,n=e==null?void 0:e.createChildren;if(typeof n!="function")return !1;if(e.wuxieQ=se.wuxieSwitch,Object.defineProperty(e,"set",{value:function(){se.wuxieSwitch=this.wuxieQ=!se.wuxieSwitch;},configurable:!0}),n.toString().includes("func.apply"))return !0;Object.defineProperty(e,"createChildren",{value:function(){n.apply(this,arguments);const o=this==null?void 0:this.roomCheck;if(!o)return;this.bgTet.height=this.height+=21;let{x:r,y:s,width:a,height:c,_labelColors:u,_labelPadding:f,textField:{fontSize:l,font:d,bold:p},constructor:g}=o;this.wuxieCheck=new g,Object.assign(this.wuxieCheck,{label:"显示技能读条",y:s+21*2,x:r,width:a,height:c,labelSize:l,labelFont:d,labelBold:p,_labelColors:u,_labelPadding:f}),this.wuxieCheck.InitSkin("cmn_checkbox_normal","cmn_checkbox_over","cmn_checkbox_dark","cmn_checkbox_disabled","cmn_checkbox_select_normal","cmn_checkbox_select_over"),this.addDrawChild(this.wuxieCheck),this.wuxieCheck.on(Laya.Event.CHANGE,this,this.set),this.wuxieQ&&(this.wuxieCheck.selected=!0);},configurable:!0});}async function fi(){const t=await de(()=>L.find("SceneLayer","TableScene")),e=t==null?void 0:t.recordBtn;if(!(e!=null&&e.textField))return !1;let{x:n,y:i,width:o,height:r,constructor:s}=e,a=t.myFuncBtn||new s;return Object.assign(a,{width:o,height:30}),a.pos(31,46),t.myFuncBtn||(Object.assign(a,{label:"将池",labelFont:"fzltchjw",labelSize:18,sizeGrid:"15,15,15,15",labelColors:"#FBEDC3,#FBEDC3,#FBEDC3,#FBEDC3"}),a.InitSkin("vippoint_red_normal","vippoint_red_over","vippoint_red_down","vippoint_red_disable"),t.addChild(t.myFuncBtn=a),t.myFuncBtn.on(Laya.Event.CLICK,t,t.showJiangChi)),!0}const hi=(()=>{const t=["","鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"];function e(r,s){if(r.every(a=>s[a]>0))return r.map(a=>s[a]).reduce((a,c)=>a+c)}async function n(r){let s=await fetch("https://goka.top:8080/getHengFu").then(u=>u.json()).then(u=>u[7909701].map(f=>f.split(",").map(Number))),a=Object.fromEntries(r),c=new Map;for(;;){let u,f=0;for(let l of s){let d=e(l,a);d>f&&(u=l,f=d);}if(!f)break;u.forEach(l=>a[l]--),c.set(u,(c.get(u)||0)+1);}return Array.from(c.entries())}async function i(){var c,u;const r=((c=this==null?void 0:this.constructor)==null?void 0:c.name)=="NS2023ComposeWindow"?this:L.find("WindowLayer","NS2023ComposeWindow");if(!((u=r==null?void 0:r.itemList)!=null&&u.length))return !1;let s=r.itemList.map(f=>[f.baseData.FourID-79070,f.propCount]),a=await n(s);xi(`合成将消耗以下材料<br>${a.map(([f,l])=>f.map(d=>t[d]).join("")+"*"+l).join("<br>")}`,"一键合成横幅","合成",()=>{a.forEach(([f,l])=>{var d;for(let p=0;p<l;p++)(d=L.class("ActivityGameDataManager"))==null||d.SendNianCompose(f);});},"取消");}async function o(){var c,u;if(!w.nickname)return ue("请稍后再试");const r=((c=this==null?void 0:this.constructor)==null?void 0:c.name)=="NS2023ComposeWindow"?this:L.find("WindowLayer","NS2023ComposeWindow");if(!((u=r==null?void 0:r.chunlianList)!=null&&u.length))return !1;let s=r.chunlianList.filter(f=>{var l;return (l=f==null?void 0:f.countTxt)==null?void 0:l.text}).map(f=>{var l,d,p,g;return [(d=(l=f.data)==null?void 0:l.goodsInfo)==null?void 0:d.ItemID,parseInt((g=(p=f.countTxt.text).slice)==null?void 0:g.call(p,1))]});if(!s.length)return ue("请先合成春联字符");let a=0;s.forEach(([f,l])=>{var d;for(let p=0;p<l&&a++<10;p++)(d=L.class("ActivityGameDataManager"))==null||d.SendClientNianPresentReq(f,w.nickname);}),setTimeout(()=>Pt(!0),6e3);}return async function(){const r=await de(()=>L.find("WindowLayer","NS2023ComposeWindow")),s=r==null?void 0:r.composeBtn;if(!(s!=null&&s.textField))return !1;let{x:a,y:c,width:u,height:f,_labelColors:l,_labelPadding:d,textField:{fontSize:p,font:g,bold:C},constructor:S}=s;return [o,i].forEach((y,A)=>{let Y=r["myFuncBtn"+A]||new S;Object.assign(Y,{label:["赠送给自己","合成横幅"][A],width:u,height:f,labelSize:p,labelFont:g,labelBold:C,_labelColors:l,_labelPadding:d}),Y.pos(a+u*[2.3,-3.5][A],c),r["myFuncBtn"+A]||(Y.InitSkin("red_small_btn_normal","red_small_btn_over","red_small_btn_down","red_small_btn_disable"),r.contentSprite.addDrawChild(r["myFuncBtn"+A]=Y),r["myFuncBtn"+A].on(Laya.Event.CLICK,r,y));}),!0}})();function pi(t){ht[t]?Tn(ht[t]):ht[t]=Be,Mt(t);}async function Mt(t,e=[26,35,44,5,7]){const n=L.get("SevenDayResultWindow");n.uuid=t,Be.req=new Set(e),setTimeout(()=>{Array.from(Be.req,i=>n.sendReq(i)),L.del("SevenDayResultWindow",1e3);},0);}async function Xt(){setTimeout(async()=>{var e,n;await pe(1e3);const t=L.get("KanShuWindow",!0);((e=t.jbpUserData)==null?void 0:e.Status)==0&&(t.onKanShuClick(),await pe(2e3),t.onUpdateAwardStatus(),await pe(1e3)),((n=t.jbpUserData)==null?void 0:n.Status)==1&&(t.autoClickAllPeach(),await pe(1e3),t.onShowEvent(),await pe(500),t.onShowEvent(),L.del("KanShuWindow",3e3));},0);}async function Yt(){var n;const t=L.get("ZhiGouMonthCardView");if(t.updateAllInfo(),(n=t.cardData)!=null&&n.bActive){t.getBtnClick();for(let i=0;i<4;i++)t.addItemClick(i);}L.del("ZhiGouMonthCardView",1e3);const e=L.get("NewWeekCardView");e.updateAllInfo(),e.getBtn._text=="领取"&&e.getBtnClick(),L.del("NewWeekCardView",1e3);}async function In(){var n,i,o,r,s;const t=L.get("GeneralOpenWindow"),e=((s=(r=(o=(i=(n=t==null?void 0:t.newView)==null?void 0:n.freeTimeTxt)==null?void 0:i._text)==null?void 0:o.split(":"))==null?void 0:r.map(Number))==null?void 0:s.reduce((a,c,u)=>a+c*Math.pow(60,2-u),0))*1e3||0;e?setTimeout(In,e):t.onNewOpenBag(8100101,3),L.del("GeneralOpenWindow",5e3),de(()=>L.find("WindowLayer","GeneralOpenResultWindow")).then(a=>a==null?void 0:a.Close());}async function mi(){var n;const t=L.get("GuildDrumWindow",!1);t==null||t.initDrums(),t.updateItems(),await pe(1e3);let e=(n=t==null?void 0:t.itemList)==null?void 0:n.find(i=>i.leftTime);ne.loop("drum",()=>e==null?void 0:e.btnClick(),300,(e==null?void 0:e.leftTime)||0,()=>L.del("GuildDrumWindow",500));}async function gi(t=!1){try{await pe(1e4);const e=L.get("DailySignNewView",!1);if((e==null?void 0:e.signState)==2)for(let n=0;n<e.itemList.length;n++){let i=e.itemList[n].baseData.ID;i!=9020101&&i.toString().startsWith("90")&&t||e.itemList[n].type==1&&(e.itemList[n].OnSignClick(),ue("自动签到已完成<br>如需关闭，可在小抄设置中关闭"),await pe(500));}for(let n=0;n<(e==null?void 0:e.totalItemList.length);n++)e.totalItemList[n].type==3&&(e.totalItemList[n].OnSignClick(),await pe(500));if(L.del("DailySignNewView",1e4),!t){const n=L.get("WyqjBigView"),i=it(n).find(o=>{var r;return ((r=o==null?void 0:o.constructor)==null?void 0:r.name)=="WyqjSmallView"});i==null||i.Init(),i==null||i.onClickTiYanBtn(),L.del("WyqjBigView",3e3);}}catch(e){console.error(e);}}async function en(){const t=L.get("TaskDailyView");t.taskPanel.contentSp.drawContaniers.filter(s=>{var a;return (a=s==null?void 0:s.taskvo)==null?void 0:a.CanAward}).forEach(s=>s.onOpClick()),setTimeout(()=>{Array.from({length:3},(s,a)=>{var c;return (c=t.topDayTask)==null?void 0:c.onClickItem(a)}),t.manager.HasJDRewardRed&&t.onceRewardClick(),L.del("TaskDailyView",3e3);},3e3);const e=L.get("IndpdtPanelWindow2");e.enterFunc();const[n,i]=it(e,!0),o=it(n).find(s=>{var a;return ((a=s==null?void 0:s.constructor)==null?void 0:a.name)=="NewPlayerSignGiftView"});o==null||o.Init(),o!=null&&o.panel&&de(()=>L.find(o.panel,"Box","NewPlayerSignGiftItem")).then(s=>{var a;return (a=s==null?void 0:s.filter(c=>{var u;return (u=c==null?void 0:c.taskUserVo)==null?void 0:u.CanAward}))==null?void 0:a.forEach(c=>c.onItemClick())}),i&&(i.Init(),i.clickTab(1),i.curView.taskPanel.contentSp.drawContaniers.filter(s=>{var a;return (a=s==null?void 0:s.taskvo)==null?void 0:a.CanAward}).forEach(s=>s.onOpClick()),setTimeout(()=>{i.clickTab(0),i.tabGroup.btnList[0].redPointIsShow&&i.curView.onClickGetAll();},3e3)),L.del("IndpdtPanelWindow2",1e4);const r=L.get("ActivityWindow");r.enterFunc(),it(r).flatMap(s=>{try{return it(s)}catch{return []}}).flatMap(s=>{try{return s.itemArr.map(a=>a.getAwardBtn)}catch{return []}}).filter(s=>s.visible).forEach(s=>s.onClick()),setTimeout(()=>{var s;return (s=L.find("WindowLayer","TaskReqRewardWindow"))==null?void 0:s.Close()}),ne.delay("VuplexWebView",()=>r.Hide(),500),L.del("ActivityWindow",3e3);}function it(t,e){var n,i,o;return ((o=(i=(n=t==null?void 0:t.tabGroup)==null?void 0:n.btnList)==null?void 0:i.filter(r=>e||r.redPointIsShow))==null?void 0:o.map(r=>{let s=t.viewStack.childInitDataList.findIndex(a=>a==r.value);return s<1&&(s=r.value),t.viewStack.selectedIndex=s,t.viewStack._childUIList[s]}))||[]}function tn(t=""){const e=L.get("GiftExchangeWindow");e.giftInput.text=t,e.getClicked(),L.del("GiftExchangeWindow",1e4);}const Pt=(()=>{async function t(){var i,o,r,s,a,c,u,f,l,d;const e=((i=this==null?void 0:this.constructor)==null?void 0:i.name)=="MailWindow"?this:L.find("WindowLayer","MailWindow")||L.get("MailWindow"),n=e==null?void 0:e.mailContentWindow;if(Array.isArray(n==null?void 0:n.winArr)){(r=(o=L.class("ActivityManager"))==null?void 0:o.AskRechargeInfoAgain)==null||r.call(o),await pe(1e3);for(const p of (((s=e.manager)==null?void 0:s.systemMailList)||[]).filter(({mid:g})=>g)){let g=p.mid;if(p.title=="道具过期提醒")(a=e.manager)==null||a.DeleteMail(g);else if(p.hasAttachMent){p.read||(c=e.manager)==null||c.ReadMail(g);let C=p.AttachmentType,S=((u=p.attachment.getStringKey("key"))==null?void 0:u[0])??"",y=p.fromUserName&&p.fromUserName!="系统未知好友"?p.fromUserName:"";if(C==1){let A=y?2:0;n.ChangeWindow(A,p),(f=n.winArr[A])==null||f.getBtnClick(),(l=n.winArr[A])==null||l.Close(),n.close();}else C==2&&((d=e.manager)==null||d.SendClientDbsGetgmawardReq(S,g,y));await pe(500),setTimeout(()=>{var A;p.read&&p.Geted&&((A=e.manager)==null||A.DeleteMail(g));},1e3);}}L.del("MailWindow",1e4);}}return async function(e){if(e)return t();const n=await de(()=>L.find("WindowLayer","MailWindow")),i=n==null?void 0:n.feedbackBtn;if(!(i!=null&&i.textField))return !1;let{x:o,y:r,width:s,height:a,_labelColors:c,_labelPadding:u,textField:{fontSize:f,font:l,bold:d},constructor:p}=i,g=n.myFuncBtn||new p;return Object.assign(g,{label:"一键领取",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:s,height:a,labelSize:f,labelFont:l,labelBold:d,_labelColors:c,_labelPadding:u}),g.pos(o-1.05*s,r),n.myFuncBtn||(g.InitSkin("win_noborder_btn_normal","win_noborder_btn_over","win_noborder_btn_down","win_noborder_btn_disable","win_noborder_btn_over"),n.addChild(n.myFuncBtn=g),n.myFuncBtn.on(Laya.Event.CLICK,n,t)),!0}})(),nn=(()=>{let t=null,e=0,n="",i,o;const r=u=>{var f,l,d,p;return ((f=u==null?void 0:u.selloutTex)==null?void 0:f.visible)==!1&&((p=(d=(l=u==null?void 0:u.limitCount)==null?void 0:l._innerHTML)==null?void 0:d.includes)==null?void 0:p.call(d,"0/"))};function s(){t=null,document.querySelectorAll('.left input[type="checkbox"]').forEach(u=>{u.checked=!1;});}function a(u=900,f=50){ne.loop("seckill",()=>{var l;if(i=L.find("WindowLayer","ActivityWindow","","WelfareSeckillView")||L.get("WelfareSeckillView"),!((l=i==null?void 0:i.itemList)!=null&&l.length))return null;if(o=i.itemList.find((d,p)=>{var g;return p==t||((g=d.data)==null?void 0:g.goods_id)==t}),typeof(o==null?void 0:o.buyHpItemHandler)!="function")return !1;ne.set("seckill",c,e+50),ue(`秒杀连点器启动！
${n}`);},f,u/f>>0,()=>ue(`未找到秒杀面板！
连点器秒杀失败！`));}function c(u=300){o==null||o.buyHpItemHandler(),ne.loop("seckill",()=>{o==null||o.buyHpItemHandler(),r(o)||(s(),ne.clear("seckill"));},u);}return (u,f,l="",d=1e3)=>{var p;if(u===!1)s(),ne.clear("seckill"),ue("秒杀连点器已取消！");else if(u!==void 0&&u!==t){e=f||ne.now();let g=e-d,C=g-ne.now();t=u,n=l||((p=P.goodsID(u))==null?void 0:p.name)||"",C>1?(ue(`${(C/6e4).toFixed(1)}分钟后启动秒杀连点器！
${n}`),ne.set("seckill",a,g)):a();}return t}})();async function xi(t,e="",n,i,o="",r=null){var c,u;if(L.class("PromptLayer")||await de(()=>L.class("PromptLayer"),1e3,1e3),!t)return null;class s{constructor(l,d,p=!1){Object.assign(this,{label:l,callBack:d,isCancel:p,thisObject:this,btnStyle:p?2:1,btnWidth:42,btnHeigth:29});}Clear(){this.thisObject=this.callBack=this.callBackParams=this.btnDescCallBack=this.btnGrayFunc=null,this.isCancel=this.btnGray=this.btnDescTime=!1;}}var a={content:t,title:e,canClose:!1,clickClose:!0,showIcon:!0,buttonArr:[new s(n,i)],Clear(){var f,l,d;(f=this.buttonArr)==null||f.forEach(p=>p==null?void 0:p.Clear()),(l=this.checkBoxData)==null||l.Clear(),(d=this.countdownData)==null||d.Clear();}};o&&a.buttonArr.push(new s(o,r,!0)),(u=(c=L.class("PromptLayer"))==null?void 0:c.GetInstance())==null||u.ShowConfirmWin(a);}async function sn(t={},e="",n=null){let i=await de(()=>L.find("PromptLayer","ConfirmWindow"));if(!i)return null;Array.isArray(i)||(i=[i]),i.forEach(o=>{if(!(o!=null&&o.confirmData)||Object.entries(t).some(([s,a])=>o.confirmData[s]!=a))return;typeof n=="boolean"&&o.checkBox&&(o.checkBox.selected=n);let r=o.confirmData.buttonArr.find(s=>s.label==e);r.callBack&&r.thisObject&&r.callBack.apply(r.thisObject,r.callBackParams),o.confirmData.clickClose&&o.RemoveFromParent();});}function En(t="浩铭er",e=!1){var i;const n=L.get("SzxyHelpWin");return n.enterWindow(t),(i=n==null?void 0:n.btnHelp)!=null&&i.enabled?(n.onClickHelp(),L.del("SzxyHelpWin"),!0):(e&&ue("助力已完成，非常感谢！"),L.del("SzxyHelpWin"),!1)}const Fe=0,Ee=65280,Ie=65282;var Bn="jsjiami.com.v7";function Ue(t,e){const n=tt();return Ue=function(i,o){i=i-283;let r=n[i];if(Ue.zdEtZF===void 0){var s=function(l){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",g="";for(let C=0,S,y,A=0;y=l.charAt(A++);~y&&(S=C%4?S*64+y:y,C++%4)?p+=String.fromCharCode(255&S>>(-2*C&6)):0)y=d.indexOf(y);for(let C=0,S=p.length;C<S;C++)g+="%"+("00"+p.charCodeAt(C).toString(16)).slice(-2);return decodeURIComponent(g)};const f=function(l,d){let p=[],g=0,C,S="";l=s(l);let y;for(y=0;y<256;y++)p[y]=y;for(y=0;y<256;y++)g=(g+p[y]+d.charCodeAt(y%d.length))%256,C=p[y],p[y]=p[g],p[g]=C;y=0,g=0;for(let A=0;A<l.length;A++)y=(y+1)%256,g=(g+p[y])%256,C=p[y],p[y]=p[g],p[g]=C,S+=String.fromCharCode(l.charCodeAt(A)^p[(p[y]+p[g])%256]);return S};Ue.Diplav=f,t=arguments,Ue.zdEtZF=!![];}const a=n[0],c=i+a,u=t[c];return u?r=u:(Ue.Vzrebh===void 0&&(Ue.Vzrebh=!![]),r=Ue.Diplav(r,o),t[c]=r),r},Ue(t,e)}function tt(){const t=function(){return [Bn,"qnyjghsCYjMiamViQ.McomU.IWv7fpeISKGkxSPE==","fmo9W7FcVmogWQD3pYtcRLJdUvO","kmkVbmkwl8oGCmoTjG","W5qqeCoyW5HcWRxdI27dN8o6","sCo0FY5YWQWbsmoQs8oAna","WRJcHr7cVaXItJJdPg7cJh4","W4JcNdZcTYzzE8or"].concat(function(){return ["WO4Mk8oUW5xdMWOK","p1RdHuVdHmo3BCoklqtdIH3cGG","ptuCWRmaW6b9WRxdRW","E0RcISoOeZpdPffRWOCG","uGxdMcmTzmk/B0VdPmoqWQ3cHa","WOhcOmkabCoaW49GuhXiW4W","sSokp8khuHRcLXO","W7BdQIZcRSoSmSoDWRbwymkR"].concat(function(){return ["WQfBWQZcMhxcK8knrJ0clG","ztBdS8oqW6FcLmkyW77cTZ8bcG","W6VcHmoEWOZcH8o4WROFWP/cVSkD","WRqDW57cNCkgifzgW5xdPmksv3e","yHr+ESoGwmo2CmoadLCYWQa"]}())}())}();return tt=function(){return t},tt()}((function(t,e,n,i,o,r,s){return t=t>>1,r="hs",s="hs",function(a,c,u,f,l){const d=Ue;f="tfi",r=f+r,l="up",s+=l,r=u(r),s=u(s),u=0;const p=a();for(;[]&&--i+c;)try{f=parseInt(d(295,"axVt"))/1+-parseInt(d(283,"u5Ld"))/2+parseInt(d(284,"bC)X"))/3*(parseInt(d(296,"e$!x"))/4)+parseInt(d(289,"oAX8"))/5*(parseInt(d(287,"[J0P"))/6)+-parseInt(d(301,"OylK"))/7+-parseInt(d(288,"66pA"))/8*(parseInt(d(285,"c3Vy"))/9)+-parseInt(d(286,"tVp$"))/10*(-parseInt(d(298,"pRYO"))/11);}catch{f=u;}finally{if(l=p[r](),t<=i)u?o?f=l:o=l:u=l;else if(u==o.replace(/[yVhgIeMYCPkqWQxfGKpSEnU=]/g,"")){if(f===c){p["un"+r](l);break}p[s](l);}}}(n,e,function(a,c,u,f,l,d,p){return c="split",a=arguments[0],a=a[c](""),u="reverse",a=a[u]("v"),f="join",a[f]("")})}))(376,849340,tt,190),tt&&(Bn=tt);const w={userID:0,account:"",nickname:"",inviteName:"",curOfficerLv:1,v:![],UsedGeneralSkinID:{UsedGeneralSkinID:{}},isFrameAdd:![],goods:[],lotteries:[],closeIframe:![],trialTime:0,autoBotStatus:30,autoBotInfinite:![],guildVIP:{},recGoods:{}};let Bt=[["padding","PADDING",0],["skinSwitch","SKIN_SWITCH",!1],["generalSwitch","GENERAL_SWITCH",!1],["skinStateSwitch","SKIN_STATE_SWITCH",!0],["skinStateBlockSwitch","SKIN_STATE_BLOCK_SWITCH",!1],["skinPaperSwitch","SKIN_PAPER_SWITCH",!0],["allPaperSwitch","ALL_PAPER_SWITCH",!1],["cardBackSwitch","CARD_BACK_SWITCH",!1],["seatUISwitch","SEAT_UI_SWITCH",!0],["autoSignSwitch","AUTO_SIGN_SWITCH",!1],["autoSignSkipSwitch","AUTO_SIGN_SKIP_SWITCH",!1],["autoInviteSwitch","AUTO_INVITE_SWITCH",!1],["autoDrumSwitch","AUTO_DRUM_SWITCH",!1],["autoWuJiangSwitch","AUTO_WUJIANG_SWITCH",!1],["autoKanShuSwitch","AUTO_KANSHU_SWITCH",!1],["autoYueKaSwitch","AUTO_YUEKA_SWITCH",!1],["skipWindowSwitch","SKIP_WINDOW_SWITCH",!1],["skipADSwitch","SKIP_AD_SWITCH",!0],["CDKNotificationSwitch","CDK_NOTIFICATION_SWITCH",!0],["killEffectSwitch","KILL_EFFECT_SWITCH",!1],["wuxieSwitch","WUXIE_SWITCH",!1],["rogueCitySwitch","ROGUE_CITY_SWITCH",!0],["cardLabelSwitch","CARD_LABEL_SWITCH",!0]];const se=new Proxy(Object.fromEntries(Bt.map(([t,e,n])=>[t,Ne(e,n)])),{set:function(t,e,n){let i=Object.fromEntries(Bt)[e]??e;$e(i,n);let o={};return o.username=w.userID,o.settingKey=e,o.value=n,jt(ei(o),300),t[e]=n,e=="padding"&&(window.padding=n),!0}}),V={seatWidthPercent:.3,firstUpdateSeatUI:!1,scoreFrameTotal:10,scoreFrameIndex:0,paddingLeft:10,paddingRight:15,paddingTop:30,paddingBottom:0,paddingLeftTopExtra:0,selectStarted:!1,leftRightTop:20,stackCardAreaHeight:0,stackCardAreaY:0,MAX_SEAT_WIDTH:149,inPopFirstTarget:!1,unscaledWidth:146,unscaledHeight:172,MAX_HEIGHT:180,MAX_WIDTH:150,scale:1,selfSeatUiUnscaledHeight:178,rightBarWidth:221,seatUIs:[],cities:[]},P={},Be={};function Tn(t){Object.assign(Be,t);}const ht=Ne("gameRecord",{}),ke={},ne={tasks:{},corr:0,shift:0,now(t=!0){return Date.now()+this.corr+(t?0:this.shift)},sync(t){this.corr=(t.ServerTime-8*3600)*1e3-Date.now(),this.shift&&(t.ServerTime+=this.shift/1e3>>0);},update(t=Date.now()){var e;(e=L.class("TimerManager"))==null||e.SendHeartbeart(t);},modify(t=null){this.shift=t?t-this.now():0,this.update();},local(t){let e=new Date(t??this.now()),n=e.getTimezoneOffset();return e.setMinutes(e.getMinutes()-n),e.toISOString()},loop(t,e,n,i=1/0,o){this.clear(t);let r=setInterval(()=>{e(),--i<=0&&(this.clear(t),typeof o=="function"&&o());},n);return this.tasks[t]={intervalId:r,callback:e},this.tasks[t].intervalId},delay(t,e,n){this.clear(t);let i=setTimeout(()=>{this.clear(t),e();},n);return this.tasks[t]={timeoutId:i,callback:e},this.tasks[t].timeoutId},set(t,e,n,i=18e5){this.clear(t);const o=this.now(),r=(n??o)-o;if(r>1){let s=setTimeout(()=>this.set(t,e,n,i),r<i?r:i);this.tasks[t]={timeoutId:s,callback:e};}else e();},trigger(t){if(!this.tasks[t])return null;let{timeoutId:e,callback:n}=this.tasks[t];return e&&(clearTimeout(e),delete this.tasks[t]),typeof n!="function"?!1:(n(),!0)},clear(t){t?Array.isArray(t)||(t=[t]):t=Object.keys(this.tasks),t.filter(e=>this.tasks[e]).map(e=>{if(!this.tasks[e])return null;let{intervalId:n,timeoutId:i}=this.tasks[e];return i&&clearTimeout(i),n&&clearInterval(n),delete this.tasks[e],e});}},U=new Proxy({turn:0,round:0,phase:0,currentID:void 0,isGameStart:!0,isPassed:!1,spellSpace:{},domContainer:["temp","phase","round","turn","game","long"].reduce((t,e,n)=>(t[e]=t[n]=[],t),{}),end(t){(this.isGameStart&&!this.isPassed||t===!1)&&(this.isGameStart=!1,this.isPassed=!0,V.seatUIs=[],V.friendGeneral=0,Ht(null),L.reset(),document.querySelectorAll(".mizhu").forEach(e=>e.style.display="none"),console.warn("游戏已结束！")),t&&this.isPassed&&(this.isPassed=!1,this.turn=0,this.round=0,this.phase=0,this.currentID=void 0,this.spellSpace={},Mt(w.userID),_.reset(),console.warn("游戏已重置！游戏即将开始！"),Qe(()=>L.init()));},ready(t){this.end(!0),_.cardList=t;let e=P.cardIDsOrder.filter(i=>t.includes(i)),n=e.concat(t.filter(i=>!e.includes(i))).filter(Boolean);me.init(n),te.init(n,"2-255"),_.isGuoZhan=t.includes(1150),_.isDouDiZhu=t.includes(13005),_.isShanHeTu=t.includes(20100),_.isShanHeTu&&(ke.sanBanFu=0),Xi(),_.isShanHeTu&&li(),[3338].forEach(i=>delete this.spellSpace[i]),console.warn("牌堆初始化完成");},start(){this.isGameStart||!_.size||(this.isGameStart=!0,this.isPassed=!1,console.warn("游戏开始！["+_.seatIDs+"] > "+_.mySeats),zi(),Ki(_.size),te.draw());},enter(t,e,n){var i,o,r,s,a,c,u,f,l,d,p;if(t>0)this.turn=t,this.round=0,this.clear("turn"),t==1&&(this.clear("game"),this.start());else {e==0?(this.currentID=n,this.round++,this.phase=0,[7011,3090,2143,3271].forEach(S=>delete this.spellSpace[S]),document.getElementById("suit").innerText="",document.getElementById("boTu").innerText="",document.getElementById("result").innerHTML="",te.draw("2-255"),this.clear("round"),w.autoBotSwitch===!0&&L.limit>0&&((s=(r=(o=(i=L.gamescene)==null?void 0:i.topMenu)==null?void 0:o.areaServerLabel)==null?void 0:r.text)!=null&&s.includes("身份"))&&(this.currentID==((d=(l=(f=(u=(c=(a=L.gamescene)==null?void 0:a.seatContainer)==null?void 0:c.seatUIs)==null?void 0:u.filter(S=>S.seat.currentHp>0))==null?void 0:f.map(S=>S.seat.index))==null?void 0:l.slice(-1))==null?void 0:d[0])?L.auto(3):this.currentID!=_.mySeats[0]&&L.auto(!0))):this.phase++,this.clear("phase");let g=document.getElementById("phrase"),C=parseInt((p=g.innerText.match(/\(([0-9])\)$/))==null?void 0:p[1]);this.phase==C?g.innerText=g.innerText.replace(/(回合)?(.{2,3})(阶段)? ?\(([0-9])\)$/,`$2>${["开始时","准备","判定","摸牌","出牌","弃牌","结束","结束时","结束后"][e]}($4)`):g.innerText=`${["回合开始时","准备阶段","判定阶段","摸牌阶段","出牌阶段","弃牌阶段","结束阶段","回合结束时","回合结束后"][e]} (${this.phase})`;}},clear(t,e,n){let i=this.domContainer[t];for(let o=i.length-1;o>=0;o--)n===void 0&&e!==i[o].SpellID&&i[o].count--,(!(i[o].count>0)||e===i[o].SpellID&&n===i[o].SeatID)&&(i[o].element.remove(),i.splice(o,1));}},{ownKeys(t){return Reflect.ownKeys(t.spellSpace)},getOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t.spellSpace,e)},deleteProperty(t,e){return Reflect.deleteProperty(t.spellSpace,e)},get(t,e,n){return e in t?t[e]:Reflect.get(t.spellSpace,e,t.spellSpace)},set(t,e,n,i){return e in t?t[e]=n:Reflect.set(t.spellSpace,e,n,t.spellSpace),!0}}),_={cardList:[],seatUIs:[],seatIDs:[],orderIDs:[],mySeats:[],generals:{},shift:0,isShanHeTu:!1,isGuoZhan:!1,isDouDiZhu:!1,size:void 0,firstID:void 0,seatPos(t=8){return {0:[],1:[0],2:[0,4],3:[0,3,5],4:[0,1,4,7],5:[0,1,3,5,7],6:[0,1,3,4,5,7],7:[0,1,2,3,5,6,7],8:[0,1,2,3,4,5,6,7]}[t]},dealCard:()=>null,reset(){this.cardList=[],this.seatUIs=[],this.seatIDs=[],this.orderIDs=[],this.mySeats=[],this.generals={},this.shift=0,this.isShanHeTu=!1,this.isGuoZhan=!1,this.isDouDiZhu=!1,this.size=void 0,this.firstID=void 0,this.dealCard=(t,e)=>{t=parseInt(t),this.orderIDs.includes(t)||(this.firstID===void 0&&(this.firstID=t,console.warn("[PubGsCMoveCard]先手位置:"+t)),this.orderIDs.push(t),e>0&&!this.mySeats.includes(t)&&(this.mySeats.length?this.mySeats.push(t):this.setMyID(t)),this.update(!1,this.orderIDs)),this.orderIDs.length==this.size&&(this.dealCard=()=>null);};},getOrder(t){var i;if(this.seatUIs.length)return (i=this.seatUIs.find(o=>o.seatID==t))==null?void 0:i.order;let e=this.seatIDs.indexOf(this.firstID??this.seatIDs[0])%this.size,n=this.seatIDs.indexOf(parseInt(t));if(n!==-1)return (n-e+this.size)%this.size},getIndex(t){if(this.seatUIs.length)return this.seatUIs.findIndex(o=>o.seatID==t);let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,n=this.seatIDs.indexOf(parseInt(t));if(n<0)return;let i=(n-e+this.size)%this.size;return this.seatPos()[i]},getID(t){var o;if(this.seatUIs.length)return (o=this.seatUIs[this.seatPos().indexOf(parseInt(t))])==null?void 0:o.seatID;let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,n=this.seatPos().indexOf(parseInt(t));if(n<0)return;let i=(n+e+this.size)%this.size;return this.seatIDs[i]},sequence(t){let e=this.seatIDs.indexOf(t);return e<0?[]:this.seatIDs.slice(e).concat(this.seatIDs.slice(0,e))},update(t,e=this.orderIDs){if(e=e.slice(),e.length>this.seatIDs.length||e.length==this.seatIDs.length&&t!==!1)this.seatIDs=e,this.size=e.length;else if(t){for(let n=e.length;n<this.size;n++)e.push(((e[n-1]??-1)+1)%this.size);this.seatIDs=e,this.size=e.length;}this.draw();},fromUI(){var e,n,i,o,r,s;let t=(o=(i=(n=(e=L.gamescene)==null?void 0:e.seatContainer)==null?void 0:n.seatUIs)==null?void 0:i.map(a=>a.seat))==null?void 0:o.filter(a=>!a.isHide);(r=t==null?void 0:t.filter(a=>a.fixedViewId))!=null&&r.length&&(this.seatUIs=t.map(a=>({seatID:a.index,order:a.fixedViewId-1,seat:a})),this.size=this.seatUIs.length,this.firstID=((s=this.seatUIs.find(a=>a.order==0))==null?void 0:s.seatID)??this.firstID,this.seatIDs=this.seatUIs.map(a=>a.seatID),this.setMyID(this.seatUIs[0].seatID),this.draw());},setMyID(t){if(t!==void 0&&this.mySeats[0]!==t){let e=this.mySeats.indexOf(t);e>-1&&this.mySeats.splice(e,1),this.mySeats.unshift(t);}},setGeneral(t,e,n=0,i=!1){if(!P.generalDict[e])return;this.generals[t]||(this.generals[t]=Array(this.isGuoZhan?2:1).fill(0)),this.generals[t][n]=e;let o=this.getOrder(t),r=document.getElementById(o+1);r&&r.style.setProperty("--No-content",`"${_.name(t)}"`);},find(t,e,n=!1){var i;return Array.isArray(e)||(e=[e]),(i=this.generals[t])==null?void 0:i.find(o=>e.find(r=>{var s;return n?(s=P.skinMap[o])==null?void 0:s.has(r):o==r}))},name(t,e=!0){var o,r,s,a;let n=this.getOrder(t);if(n===void 0)return "";let i=((o=this.generals[t])==null?void 0:o.length)>1?this.generals[t].map(c=>P.generalDict[c]):[(a=(s=(r=this.seatUIs.find(c=>c.seatID==t))==null?void 0:r.seat)==null?void 0:s.general)==null?void 0:a.CardName];return e===null&&(i==null?void 0:i.length)!=1&&(i=[]),(i!=null&&i.some(Boolean)?i.map(c=>c||"暗").join("丨"):"一二三四五六七八"[n]+"号位")+(e?"丨"+"一二三四五六七八"[n]:"")},draw(){this.seatIDs.forEach(t=>{let e=this.getOrder(t),n=document.getElementById(e+1);if(!n)return;let i=_.name(t);n.style.setProperty("--No-content",`"${i}"`);}),Ht();}},me=new Proxy({name:{},color:Array.from({length:7},()=>new Set),number:Array.from({length:14},()=>new Set),query:new Set,select:{name:new Set,color:new Set,number:new Set},cards:[],QCARD:class{constructor(t,e,n,i,o){this.id=t,this.name=e,this.color=n,this.number=i,this.type=o,this.key=-1;}plot(t){let e=this._button;if(!e){if(e=this._button=document.createElement("button"),e.className=this.color<=2?"shoupai R":"shoupai",!this.id)return e;e.id="Qcard"+this.id,e.innerHTML=`<span>${Ln(this.color)+Me(this.number)}</span><br>${this.name.substring(0,2)}`;}return (this.key!==t||t==1)&&(this.key=t,e.style.backgroundColor=t===0?"":t===1?"cyan":"#23201d",e.title=t===0?"牌堆":t===2?"弃牌堆":ie.findKZ(this.id).zones.map(n=>{let[i,o,r]=n.split("-").map(s=>parseInt(s));return te.name(o,i,null,r,r)}).join("/")),e}},[Symbol.iterator]:function*(){for(let t of this.cards)t!==void 0&&(yield t);},init(t){this.name={},this.color=Array.from({length:7},()=>new Set),this.number=Array.from({length:14},()=>new Set),this.type=Array.from({length:4},()=>new Set),this.query=new Set,this.select={name:new Set,color:new Set,number:new Set},this.cards=[],t.forEach(e=>{let{name:n,color:i,number:o,type:r}=re[e];n in this.name||(this.name[n]=new Set),this.name[n].add(e),this.color[i].add(e),this.number[o].add(e),this.type[r].add(e),i==3&&o>=2&&o<=9&&this.number[0].add(e),n.match(/^(冰|火|雷)?杀$/)&&this.color[Math.ceil(i/2)+4].add(e),this.cards[e]=new this.QCARD(e,n,i,o,r);});},onquery(t,e){if(this.select[t].delete(e)){if(this.select[t].size){Array.from(this[t][e]).forEach(n=>this.query.delete(n)),this.draw();return}}else this.select[t].add(e);this.query=["name","number","color"].filter(n=>this.select[n].size).reduce((n,i)=>new Set(Array.from(this.select[i]).flatMap(o=>Array.from(this[i][o])).filter(o=>!n.size||n.has(o))),new Set),this.draw();},queryone(t,e){this.query=new Set(Array.from(this[t][e])),this.draw();},draw(){const t=document.getElementById("cardTypeDetail");if(t.innerHTML="",this.query.size==0)return;let e=new Set(te.unknown),n=new Set(te.qipai),i=P.cardIDsOrder.filter(o=>this.query.has(o)).reduce((o,r)=>(e.has(r)?o[0].push(r):n.has(r)?o[2].push(r):o[1].push(r),o),[[],[],[]]);[0,1,2].forEach(o=>i[o].forEach(r=>t.appendChild(this.cards[r].plot(o))));}},{get(t,e,n){return typeof e=="number"||typeof e=="string"&&!isNaN(e)?t.cards[e]:Reflect.get(...arguments)}}),Z=class Z{static label(e){if(Z.groups.has(e))return Z.groups.get(e);const n=Z.LABELs.shift();return Z.groups.set(e,n),n}constructor(e,n=null,i="12-255",o=null,r=null){var s;this._key=e,this.zone=i,this.id=n??((s=this.next)==null?void 0:s.id)??this.key,this.next=o,this.prev=r,Z.nodes.has(e)||Z.nodes.set(e,new Set),Z.nodes.get(e).add(this);}get head(){let e=this;for(;e.prev;)e=e.prev;return e}get end(){let e=this;for(;e.next;)e=e.next;return e}get key(){return this._key}set key(e){this._key!=e&&(Z.nodes.get(this._key).delete(this),this._key=e,Z.nodes.has(e)||Z.nodes.set(e,new Set),Z.nodes.get(e).add(this));}static get(e){return Z.nodes.has(e)?Array.from(Z.nodes.get(e)):[]}static init(e,n){return Z.key=0,Z.nodes=new Map,Z.groups=new Map([[0,"?"]]),Z.LABELs=Array.from({length:62},(i,o)=>String.fromCharCode(o+65)),e.map(i=>new Z(0,i,n))}toString(){return this.next?this.prev?this.key+"<"+this.next.toString():this.zone+":"+this.key+"<"+this.next.toString():"["+this.id+"]"+(this.key>0?re[this.id].ncn:"？")}plot(e){var i;if(this.key<0&&this.key%2==0&&this.next)return this.next.plot(e);let n=this._button;return n||(n=this._button=document.createElement("button"),n.className="shoupai"),n.disabled=this.key<=0&&this.key%2==0,(e||this.key!=((i=n==null?void 0:n.dataset)==null?void 0:i.key)||this.key<=0&&Z.label(this.key)!=n.innerHTML)&&(n.className="shoupai",n.id="card"+this.id,n.dataset.key=this.key,this.key>0?(n.classList.remove("G"),re[this.id].color>2?n.classList.remove("R"):re[this.id].color>0&&n.classList.add("R"),n.style.color="",n.style.fontSize="",n.title=new te("unknown").cards.has(this)?Z.findKZ(this.id).zones.map(o=>{let[r,s,a]=o.split("-").map(c=>parseInt(c));return te.name(s,r,null,a,a)}).join("/"):re[this.id].ncn,n.innerHTML=`<span>${re[this.id].cn}</span><br>${re[this.id].name.substring(0,2)}`):(n.classList.add("G"),n.innerHTML="？")),n}swap(e){if(!e||e==this)return this;for([this.key,e.key]=[e.key,this.key],[this.id,e.id]=[e.id,this.id],[this.next,e.next]=[e.next,this.next],this.next&&(this.next.prev=this),e.next&&(e.next.prev=e);e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;for(e.plot(!0),te.draw(e.zone),e=this;e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;return e.plot(!0),te.draw(e.zone),this}create(e){const n=new Z(this.key,this.id,this.zone,this.next,this);return this.key=e,this.next&&(this.next.prev=n),this.next=n,this}delete(){let e=!1;if(this.next){let n=this.next;return this.key=n.key,this.id=n.id,this.next=n.next,n.next?n.next.prev=this:new te("unknown").cards.delete(n)&&(e=!0,this.prev&&new te("unknown").cards.add(this)),Z.nodes.get(n.key).delete(n),e}else return this.key===0?(this.key=this.id,_t(this.id,this.key),!0):null}destroy(e){let n=!1,i=this.key;for(;i<0;)this.delete()&&(n=!0),Z.unpack(i)&&(n=!0),i=this.key;return this.key!=e&&(this.key=e??this.id,_t(this.id,this.key)),this.prev?Z.unpack(this.prev.key):(this.plot(!0),te.draw(this.zone)),n&&te.draw("unknown"),this}identify(e,n=null){if(n!==null&&console.count("REidentify"+n+">"+this),this.id==e)return this.key>0?this:(n&&(this.end.id=n),this.destroy(),this);let i,o=new Set([this.key]),r=[[this.key,[]]];for(;r.length>0;){let[s,a]=r.shift();if(i=Z.find(s,e),i){a.concat(i).reduce((c,u)=>c.swap(u).next,this);break}for(let c of Z.get(s).filter(u=>u.next))o.has(c.next.key)||(o.add(c.next.key),r.push([c.next.key,a.concat(c)]));}if(i){if(n){let s=this;for(s.id=n;s.next;)s=s.next,s.id=n;}return this.destroy(),this}else {if(e>0)return this.identify(0,e);console.error("identify error: "+(e>0?e:n)+">"+this);}return null}static move(e,n){Array.isArray(e)||(e=[e]);let{turn:i,round:o,phase:r}=U;return e==null||e.forEach(s=>Object.assign(s,{zone:n,turn:i,round:o,phase:r})),Array.from(new Set(e==null?void 0:e.map(s=>s.key))).filter(s=>s<=0).map(s=>Z.unpack(s)).length?te.draw("unknown"):Array.from(new Set(e==null?void 0:e.map(s=>s.key))).filter(s=>s>0&&me.query.has(s)).forEach(s=>{me[s].plot(n=="2-255"?2:1);}),e}static pack(e,n,i){if(!((e==null?void 0:e.length)>1&&(e!=null&&e.every(s=>s))))return;let o=new Set(e.map(s=>s.key));if(o.size===1)return [...o][0];Z.key=Z.key-1;let r;if(i){if(new Set(e.map(c=>c.head.zone)).size===1)return null;let a=Array.from(Z.nodes.keys()).filter(c=>c<0);for(let c=0;c>=Z.key;c--)if(!(a.includes(c*2-1)||a.includes(c*2-2))){r=c*2-i;break}a.filter(c=>c>r).sort((c,u)=>c-u).forEach(c=>{Z.get(c).forEach(u=>{u.key=u.key-2,u.head.plot(!0);});}),r=-i;}else r=Z.key*2-(n?2:1);return e.forEach(s=>{s.create(r),new te("unknown").cards.delete(s),n||new te("unknown").cards.add(s.end);}),te.draw("unknown"),r}static unpack(e){if(e>0)return !0;const n=Z.get(e);let i=new Set(n.map(r=>{var s;return (s=r.next)==null?void 0:s.key})),o=new Set(n.map(r=>r.head.zone));if(n.length===1||!o.has("1-255")&&(o.size===1||i.size===1&&e!==0)){Z.groups.has(e)&&(Z.LABELs.unshift(Z.groups.get(e)),Z.groups.delete(e));let r=n.map(s=>s.delete()).some(Boolean);return Array.from(new Set(n.filter(s=>s.prev).map(s=>s.prev.key))).forEach(s=>Z.unpack(s)),n.filter(s=>!s.prev).forEach(s=>s.plot(!0)),Array.from(o).forEach(s=>te.draw(s)),r}else return !1}static find(e,n){let i=Z.get(e).find(o=>o.id==n);if(i===void 0&&e!=0){let o=Z.get(0).find(r=>r.id==n);o&&(i=Z.get(e).find(r=>r.end.key==0),i!==void 0&&o.swap(i.end));}return i}static findIDs(e,n=!1,i=new Set,o=new Set){return o.add(e),e>0||!n&&e==0?i.add(e):(n||e%2!=0)&&Z.get(e).forEach(r=>{if(r.next){let s=r.next.key;o.has(s)||Z.findIDs(s,n,i,o);}else n&&i.add(r.id);}),Array.from(i)}static findKZ(e,n=!1,i=new Set,o=new Set){let r=e;return !(r instanceof Z)&&e>0&&(r=Z.get(e)[0]),r instanceof Z||(r=Z.get(0).find(s=>s.id==e)),r instanceof Z&&(!n&&r.key==0?(o.add(""),i.add(0)):(o.add(r.head.zone),i.has(r.key)||(i.add(r.key),(r.key<0||n&&r.key==0)&&Z.get(r.key).forEach(s=>{s!=r&&Z.findKZ(s,n,i,o);})),r.prev&&Z.findKZ(r.prev,n,i,o))),{keys:Array.from(i),zones:Array.from(o)}}};Xe(Z,"key",NaN),Xe(Z,"nodes",new Map),Xe(Z,"groups",new Map([[0,"?"]])),Xe(Z,"LABELs",Array.from({length:50},(e,n)=>String.fromCodePoint(n<20?9312+n:n<35?12881-20+n:12977-35+n)));let ie=Z;const Se=class Se{static get paidui(){return Array.from(new Set(Array.from(ie.get(0),({id:e})=>e).concat((Se.obj["1-255"]??[]).map(({id:e})=>e))))}static get qipai(){return (Se.obj["2-255"]??[]).filter(({key:e})=>e>0).map(({id:e})=>e)}static get unknown(){return Array.from(ie.get(0),({id:e})=>e)}static shoupai(e){return (Se.obj["5-"+e]??[]).filter(({key:n})=>n>0).map(({id:n})=>n)}constructor(e,n=5,i=Ee,o=null,r=null,s=null){var a;typeof e=="number"?(this.id=e,this.zone=n,this.id==0&&[0,1,2,3,9,12].includes(this.zone)&&(this.id=255),this.zone==9&&(this.zone=1),this.zone==4&&(this.id=this.id+"-"+(s||r||0)),this.zone==8&&(this.id="-"+(r||s||0)),this.zoneID=this.zone+"-"+this.id):typeof e=="string"?[this.zoneID,this.zone,this.id]=e.match(/(.*?)-(.*)/)??[e,e,""]:(a=e==null?void 0:e.every)!=null&&a.call(e,c=>c instanceof ie),this.zoneID in Se.obj||(Se.obj[this.zoneID]=[]),this.zone==1?this.pos=i===Ee?Fe:i===Fe?Ee:i:this.zone===10?this.pos=i:this.pos=Ie,this.count=o;}show(e=[]){if(isNaN(ie.key))return [];if(Array.isArray(e)||(e=[e]),e.filter(o=>o>0).length==0)return [];let n=[],i=e.slice();if(this.pos==Ee)n=this.cards.slice(-e.length).map(o=>o.identify(i.shift()));else if(this.pos!=Ie)n=this.cards.slice(this.pos,e.length).map(o=>o.identify(i.shift()));else if(this.zone!=1){let o=i.map(r=>ie.findKZ(r,!0).keys);this.cards.slice().sort((r,s)=>s.key-r.key).some(r=>{if(i.filter(s=>s>0).length==0)return !0;o.some((s,a)=>{if(s.includes(r.key))return n[a]=r.identify(i[a]),s.length=0,i[a]=null,!0});}),i.forEach((r,s)=>{var a,c,u,f;if(r&&(n[s]=(a=this.cards.find(l=>l.id==0))==null?void 0:a.identify(r),n[s]===void 0&&(n[s]=(c=this.cards.find(l=>l.key==0))==null?void 0:c.identify(r)),n[s]===void 0)){let l=ie.get(r)[0];l?(n[s]=(f=(u=this.cards.find(d=>!n.includes(d)))==null?void 0:u.swap(l))==null?void 0:f.identify(r),console.error(this.zoneID+"SWAP Card ["+r+"] Shown")):(n[s]=new ie(r,r,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+r+"] Shown"));}});}return Se.draw(this.zoneID),n}remove(e=[],n,i){if(isNaN(ie.key))return [];Array.isArray(e)||(e=[e]),i&&(this.count=i);let o=[],r=e.slice();if(this.pos==Ee)o=this.cards.splice(-this.count);else if(this.pos!=Ie)o=this.cards.splice(this.pos,this.count),this.zone==1&&[3208,7011,987,988].includes(n)&&(o=o.reverse());else if(e.filter(c=>c>0).length>0){let c=r.map(f=>ie.findKZ(f,!0).keys);this.cards.slice().reverse().sort((f,l)=>l.key-f.key).some(f=>{if(r.filter(l=>l>0).length==0)return !0;c.some((l,d)=>{if(l.includes(f.key))return o[d]=this.cards.splice(this.cards.indexOf(f),1)[0],l.length=0,r[d]=null,!0});}),r.forEach((f,l)=>{var p;if(!f)return;let d=this.cards.findIndex(g=>g.id==0);if(d===-1&&(d=this.cards.findIndex(g=>g.key==0)),d>-1)o[l]=this.cards.splice(d,1)[0];else {let g=ie.get(f)[0],C=this.cards.findIndex(S=>!o.includes(S));g&&C>=0?(o[l]=(p=this.cards.splice(C,1)[0])==null?void 0:p.swap(g),console.error(this.zoneID+"SWAP Card ["+f+"] Moved")):(o[l]=new ie(f,f,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+f+"] Moved"));}});}else if(this.count==this.length||this.size==1)o=this.cards.splice(0,this.count);else if(this.zone==1||this.zone==2){var s=[...this.cards.filter(c=>c.key<=0).sort((c,u)=>u.key-c.key),...this.cards.filter(c=>c.key>0)];if([11104,3488,862].includes(n)){var a=new Set(s.map(c=>c.key));n==11104?a=new Set(Array.from(a).filter(c=>ie.get(c).some(u=>{var f;return (f=me.type[3])==null?void 0:f.has(u.id)}))):n==3488?a=new Set(Array.from(a).filter(c=>ie.get(c).some(u=>{var f,l,d;return ((f=me.name.雷杀)==null?void 0:f.has(u.id))||((l=me.name.火杀)==null?void 0:l.has(u.id))||((d=me.name.冰杀)==null?void 0:d.has(u.id))}))):n==862&&(a=new Set(Array.from(a).filter(c=>ie.get(c).some(u=>me.number[6].has(u.id))))),s=s.filter(c=>a.has(c.key));}o=s.slice(0,this.count),o.some(c=>c.key>0||c.key%2)&&ie.pack(s,!0),o.forEach(c=>this.cards.splice(this.cards.indexOf(c),1));}else ie.pack(this.cards),o=this.cards.splice(0,this.count);return o.length!=this.count&&Array.from({length:this.count-o.length},()=>(console.error(this.zoneID+" New Card Moved"),o.push(new ie(0,0,this.zoneID)))),e.filter(c=>c>0).length==this.count?e.forEach((c,u)=>{var f;return (f=o[u])==null?void 0:f.identify(c)}):o.filter(c=>c.key>0).length==this.count&&o.forEach(({id:c},u)=>{e[u]=c;}),Se.draw(this.zoneID),o}add(e){if(isNaN(ie.key))return;let n=ie.move(e,this.zoneID).slice();return this.pos==Ie?this.cards.splice(this.cards.length,0,...n):this.pos==Ee?this.cards.splice(this.cards.length,0,...n):this.cards.splice(this.pos,0,...n.reverse()),Se.draw(this.zoneID),e}set(e){isNaN(ie.key)||(Se.obj[this.zoneID]=ie.move(e,this.zoneID),Se.draw(this.zoneID));}get cards(){return Se.obj[this.zoneID]??[]}get length(){var e;return ((e=this.cards)==null?void 0:e.length)??0}get size(){var e;return new Set(((e=this.cards)==null?void 0:e.map(n=>n.key))??[]).size}static init(e,n){Se.obj={unknown:new Set},Se.obj[n]=ie.init(e,n);}static draw(e){var u,f;if(isNaN(ie.key))return;if(e===void 0){Object.keys(Se.obj).filter(l=>l.split("-")[0]=="5").forEach(l=>Se.draw(l));return}let n=null,i=null,[o,r,s]=((u=e.split("-"))==null?void 0:u.map(Number))??[];if(e=="unknown")n="knownCards";else if(o==1)n="paiduiCards";else if(o==2)n="qipaiCards";else if(o==5)n=String(_.getOrder(r)+1);else if(o==4&&s in P.markSpell)n="mark"+e;else return;i=document.getElementById(n);let a=Array.from(Se.obj[e]??[]);if(o==2){let{turn:l,round:d,phase:p}=U;a=a.filter(g=>g.turn==l&&g.round==d);}if(e=="unknown"&&(Array.from(new Set(a.map(l=>l.head.zone))).forEach(l=>Se.draw(l)),me.draw()),!a||a.filter(l=>l.key>0||l.key%2!==0).length==0){i&&(i.classList.contains("markedCard")?i.remove():i.querySelectorAll(":scope>.shoupai").forEach(l=>l.remove()));return}if(i)i.querySelectorAll(":scope>.shoupai").forEach(l=>l.remove());else if(o==4)(f=document.getElementById(String(_.getOrder(r)+1)))==null||f.insertAdjacentHTML("beforeend",`<div id="${n}" class="markedCard"><span class = 'mark'>${P.markSpell[s]}</span></div>`),i=document.getElementById(n);else return;e!="1-255"&&a.sort((l,d)=>l.key>0&&d.key>0?0:d.key-l.key),o==4&&(i=i.firstElementChild||i);var c=1;a.map(l=>l.plot(e=="unknown")).reverse().forEach((l,d,p)=>{var g,C;if(l.dataset.key==((C=(g=p[d+1])==null?void 0:g.dataset)==null?void 0:C.key))c++;else {c>1&&(l.style.fontSize="",l.innerHTML=`<span>${l.innerHTML}×</span><br>${c}`);let S=parseInt(l.dataset.key);if(S<0){let y=ie.findIDs(S).sort((A,Y)=>A>0&&Y>0?0:Y-A);l.title=c+"张："+y.map(A=>re[A].ncn).join("/"),e!=="1-255"&&y.length<5&&(l.style.fontSize="",l.innerHTML=y.map(A=>{var Y,v;return ((v=(Y=ie.get(A)[0])==null?void 0:Y.plot())==null?void 0:v.outerHTML)||""}).join(""));}o==4?i.insertAdjacentElement("afterend",l):i.insertAdjacentElement("afterbegin",l),c=1;}});}static name(e,n,i,o,r){var a;let s;if(isNaN(n))return "?";if(n==1&&e==0)return "牌堆(游戏开始前) ";if(n==1&&e==255)s="牌堆";else if(n==2)s="弃牌堆";else if(n==3)s="处理区";else if(n==4)s="标记";else if(n==5)s="手牌";else if(n==6)s="装备";else if(n==7)s="判定区";else if(n==8)s="弹窗";else {if(n==9)return "洗牌";n==10?s="交换临时区":n==11?s="弃牌临时区":n==12?s="回收区":n==0&&(s="游戏外");}return ([0,1,2,3,8,11,12].includes(n)?"":_.name(e,!1))+([4,8].includes(n)?"["+((a=P.spellDict[n==8?r:o||r||0])==null?void 0:a.name)+"]":"")+(s??"zone"+n)+({[Fe]:"底",[Ee]:"顶",[Ie]:"*"}[i]??(i?":"+i:""))}};Xe(Se,"obj",{unknown:new Set});let te=Se;function yi(t=[],e=[]){const n=new Map;return t.forEach(i=>{n.set(i.GoodsBaseID,i.ChangeCount);}),e.forEach(i=>{const{GoodsBaseID:o,ChangeCount:r}=i;n.has(o)?n.set(o,n.get(o)+r):n.set(o,r);}),Array.from(n,([i,o])=>({GoodsBaseID:i,ChangeCount:o}))}const Dn={乐不思蜀:"乐",兵粮寸断:"兵",八卦阵:"八卦",爪黄飞电:"爪黄+1",的卢:"的卢+1",绝影:"绝影+1",骅骝:"骅骝+1",赤兔:"赤兔-1",大宛:"大宛-1",紫骍:"紫骍-1",紫騂:"紫骍-1",诸葛连弩:"连弩",木牛流马:"木马",顺手牵羊:"顺手",万箭齐发:"万箭",五谷丰登:"五谷",无中生有:"无中",过河拆桥:"过拆",桃园结义:"桃园",无懈可击:"无懈",南蛮入侵:"南蛮",借刀杀人:"借刀",铁索连环:"铁索",随机应变:"随机",远交近攻:"远交",以逸待劳:"逸劳",知己知彼:"知己",逐近弃远:"逐近",洞烛先机:"洞烛",出其不意:"出其",水淹七军:"水淹","无懈可击·国":"国无",挟天子以令诸侯:"挟令",方天画戟:"方天戟",雌雄双股剑:"雌雄剑",青龙偃月刀:"青龙刀",丈八蛇矛:"丈八矛",朱雀羽扇:"朱雀扇",白银狮子:"白银狮",三尖两刃刀:"三尖刀",乌铁锁链:"乌铁链",五行鹤翎扇:"五行扇",太公阴符:"太公符",无双方天戟:"无双戟",束发紫金冠:"紫金冠",玲珑狮蛮带:"玲珑带",红棉百花袍:"百花袍",红锦百花袍:"百花袍",四乘粮舆:"四乘舆",铁蒺玄舆:"铁蒺舆",飞轮战舆:"飞轮舆",鬼龙斩月刀:"鬼龙刀",国风玉袍:"国风袍",赤炎镇魂琴:"赤炎琴",奇门八阵:"奇门阵",绝尘金戈:"绝尘+1",修罗炼狱戟:"修罗戟",虚妄之冕:"虚妄冕",赤血青峰:"赤青锋",赤血青锋:"赤青锋",鸾凤和鸣剑:"鸾凤剑",七彩神鹿:"神鹿-1",金乌落日弓:"金乌弓",刑天破军斧:"刑天斧",长安大舰:"长安-2",禅让诏书:"诏书",镔铁双戟:"镔铁戟",继往开来:"继往",攻守兼备:"攻守",进退自如:"进退",洪荒之力:"洪荒",同舟共济:"同舟",力争上游:"力争",逆水行舟:"逆水",撒豆成兵:"撒豆",移花接木:"移花",联军盛宴:"联军",调虎离山:"调虎",火烧连营:"火烧",勠力同心:"勠力",调剂盐梅:"调剂",声东击西:"声东",增兵减灶:"增兵",草木皆兵:"草木",唯我独尊:"独尊",弃甲曳兵:"弃甲",金蝉脱壳:"金蝉",故步自封:"自封",金鼓笙旗:"金鼓",党同伐异:"伐异",燎原之火:"燎原","八卦阵(复制)":"八卦","仁王盾(复制)":"仁王盾","藤甲(复制)":"藤甲","白银狮子(复制)":"白银狮",商鞅变法:"变法",真龙长剑:"真龙剑",传国玉玺:"玉玺",厚积形:"厚积",桎梏形:"桎梏",盈冲形:"盈冲",背水形:"背水",整肃形:"整肃",寸兵形:"寸兵",雄黄酒:"酒"},re=new Proxy({cards:{0:{name:"",type:0,color:0,number:0,ncn:"?",cn:"0",c:"",n:0}},[Symbol.iterator]:function*(){for(let t in this.cards)yield this.cards[t];}},{get:function(t,e){var n;if(e in t)return t[e];if(!t.cards[e])if((n=P.cardDict)!=null&&n[e]){let{name:i,type:o,color:r,number:s,subType:a}=P.cardDict[e],c=Ln(r),u=Me(s);t.cards[e]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[a]||Dn[i]||i,type:parseInt(o),color:parseInt(r),number:parseInt(s),ncn:i+c+u,cn:c+u,c,n:u};}else t.cards[e]=t.cards[0];return t.cards[e]}});function Ln(t){return ["","♥","♦","♠","♣"][t]??""}function Me(t,e=!0){return e&&parseInt(t)==1?"A":{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"J",12:"Q",13:"K"}[t]??""}function bi(){for(let e=11;e<=60;e++){const n=`https://web.sanguosha.com/220/h5_2/res/runtime/pc/Face/${e}.png`,i=document.createElement("img");i.src=n,i.classList.add("face"),i.onmousedown=()=>Ze(`#${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);}["昏君，昏君啊","主公，别开枪，自己人","能不能快一点儿呀，兵贵神速啊","小内再不跳，后面还怎么玩儿啊","小内啊，您老悠着点儿","不好意思，刚才卡了","你可以打的再烂一点儿吗","哥们儿，给力点儿行吗","你们怎么忍心就这么让我酱油了","我，我惹你们了吗","姑娘，你真是条汉子","三十六计，走为上，容我去去便回","人心散了，队伍不好带啊","风吹鸡蛋壳，牌去人安乐","哥，交个朋友吧","妹子，交个朋友吧","我从未见过如此厚颜无耻之人","你随便杀，闪不了算我输","这波不亏","请收下我的膝盖","你咋不上天呢","放开我的队友，冲我来","见证奇迹的时刻到了"].forEach((e,n)=>{const i=document.createElement("span");i.classList.add("calRes"),i.textContent=e,i.onmousedown=()=>Ze(`${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);});}async function Ze(t,e){ue("复制成功！");var n={1:"⒈",2:"⒉",3:"⒊",4:"⒋",5:"⒌",6:"⒍",7:"⒎",8:"⒏",9:"⒐",J:"Ⓙ",Q:"Ⓠ",K:"Ⓚ","+":" ",10:"⒑"};if(e&&Object.keys(n).forEach(o=>{t=t.replaceAll(o,n[o]);}),L.chat(t),window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var i=document.createElement("textarea");i.textContent=t,i.style.position="fixed",document.body.appendChild(i),i.select();try{return document.execCommand("copy")}catch(o){return console.warn("Copy to clipboard failed.",o),prompt("Copy to clipboard: Ctrl+C, Enter",t)}finally{document.body.removeChild(i);}}}async function Si(t,e){if(se.CDKNotificationSwitch){let o=Ne("CDK");o||(o=[]);let r=t.filter(s=>!o.includes(s.cdk));await pe(1e4);for(let s of r)ze(`找到兑换码！<br>${s.cdk}<br>点击即可兑换且关闭此条通知${s.rewards}<br>如不想要兑换码通知，可在设置中关闭`,"ac-tooltip",1e4,"green",function(){!o.includes(s.cdk)&&o.push(s.cdk),$e("CDK",o),tn(s.cdk);});}var n=document.getElementById(e);n.innerText="",t.length==0&&e=="CDK"&&(t=["所有兑换码已经兑换","迟点再看看吧"],Nt("CDK"));for(let o of t){let r=document.createElement("button");r.className="calRes",r.innerText=typeof o=="object"?`${o.cdk}`:o,r.onmousedown=function(){tn(typeof o=="object"?o.cdk:o),r.innerText="已兑换",setTimeout(()=>{r.textContent=typeof o=="object"?`${o.cdk}`:o;},"500");},n.append(r);var i=document.createElement("br");n.append(i);}}function wi(t){var e=document.getElementById("storeDetail");e.innerText="",t.length==0&&(t=["暂无集市数据"]);for(let n of t){let i=document.createElement("button");i.className="storeDetail",i.innerText=n,e.append(i);}}let ki={9020101:"欢乐豆",100301:"手气卡",100201:"点将卡",1150001:"灵宝经诰",100401:"换将卡",200201:"诏令天下",112301:"校尉将印",112101:"朱砂",12119999:"桃花",111801:"功勋",1111801:"水晶碎片",1114301:"圣魂玄晶",112501:"大将军印",1142901:"夺宝券"};function An(t){return !ki[t]}function On(t,e,n,i){var o;if(document.getElementById("sec"+t)==null){let r=document.getElementById("lottery");const s=document.createElement("div"),a=document.createElement("div");a.innerHTML=P.secId[t].Name+"："+P.generalDict[P.secId[t].bigrewards]+"  次数："+i+"<br>",a.id="sec"+t+"+times",s.id="sec"+t,s.append(a),r.append(s),r.append(document.createElement("hr"));}if(typeof document.getElementById("sec"+t)<"u"&&document.getElementById(t+"+"+e)==null){const r=document.getElementById("sec"+t+"+times");r.innerHTML=P.secId[t].Name+"："+P.generalDict[P.secId[t].bigrewards]+"  次数："+i+"<br>";let s=document.getElementById("sec"+t);const a=document.createElement("div");a.className="suit",An(e)&&a.classList.add("r");const c=document.createElement("span"),u=document.createElement("span");c.innerText=((o=P.goodsID(e))==null?void 0:o.name)+" * ",u.innerText=n,c.id=t+"+"+e,u.id=t+"+"+e+"+number",a.append(c),a.append(u),s.appendChild(a);}else if(typeof document.getElementById(t)<"u"&&document.getElementById(t+"+"+e)!=null){const r=document.getElementById("sec"+t+"+times");r.innerHTML=P.secId[t].Name+"："+P.generalDict[P.secId[t].bigrewards]+"  次数："+i+"<br>";let s=document.getElementById(t+"+"+e+"+number"),a=parseInt(s.innerText);a+=n,s.innerText=a;}}function an(t){let e=document.getElementById("lastUseCard");const n=document.createElement("div");for(const o of t){if(o=="0")continue;var i=document.createElement("button");i.className=re[o].color<=2?"shoupai R":"shoupai";let r=document.createElement("span");r.innerText=re[o].cn,i.appendChild(r),i.appendChild(document.createElement("br")),i.innerHTML+=re[o].name.substring(0,2),n.append(i);}e.innerHTML=n.innerHTML;}const rn=new MutationObserver(t=>{t.forEach(e=>{const n=e.target,i=document.getElementById(n.id),o=document.getElementById("s"+n.id);if(o&&i&&(e.type==="childList"||e.type==="attributes")){const r=n.innerHTML;if(o.dataset.lastContent!==r){if(o){const s=n.cloneNode(!0);o.innerHTML=s.innerHTML,Rn(o);}o.dataset.lastContent=r;}}});}),vi={attributes:!0,childList:!0,subtree:!0};function Rn(t){t&&t instanceof HTMLElement&&(t.scrollHeight>40?t.classList.add("show-ellipsis"):t.classList.remove("show-ellipsis"));}function jt(t,e){let n;function i(...o){clearTimeout(n),n=setTimeout(()=>t.apply(this,o),e);}return i.cancel=function(){clearTimeout(n),n=null;},i}const Wi=jt(()=>{requestAnimationFrame(()=>{document.querySelectorAll(".sorder-body").forEach(e=>{Rn(e);});});},500);window.addEventListener("resize",Wi);function yt(){const t=document.getElementById("seatUI"),e=document.createDocumentFragment();for(let n of V.seatUIs)if(n.posY&&n.posX&&typeof n.actualSeatID<"u")if(document.getElementById("sor"+n.actualSeatID)==null){const i=document.createElement("div");i.className="sorderContainer",i.id="sor"+n.actualSeatID,i.style.top=n.posY+"px",i.style.left=n.posX+"px",i.style.width=(V.unscaledWidth+V.paddingRight)*V.scale+"px";const o=document.createElement("div");o.className="sorder-body",o.classList.add("sNo"+n.actualSeatID),o.id="s"+n.actualSeatID,i.appendChild(o);const r=document.getElementById(n.actualSeatID);r&&(rn.observe(r,vi),e.appendChild(i));}else {const i=document.getElementById("sor"+n.actualSeatID);i.style.top=n.posY+"px",i.style.left=n.posX+"px",i.style.width=(V.unscaledWidth+V.paddingRight)*V.scale+"px";}if(V.seatUIs.length===0){rn.disconnect();for(let n=1;n<=8;n++){const i=document.getElementById("sor"+n);i&&i.remove();}}t.appendChild(e);}const Pe={TITLE:{color:"#f2de9c",fontSize:20,bold:!0},HR:{text:"--------------------",color:"#ccc",fontSize:15},GENERAL:{normal:"#f2de9c",warning:"rgb(240, 65, 85)",fontSize:20},GET_INFO:{color:"#f2de9c",fontSize:20,bold:!0}};function nt(t){const e=new Laya.Label;return e.text=t.text||"",e.color=t.color||"#ffffff",e.fontSize=t.fontSize||16,e.bold=t.bold||!1,e.align="center",e.valign="middle",e.width=210,e}function bt(){return nt({text:Pe.HR.text,color:Pe.HR.color,fontSize:Pe.HR.fontSize,bold:!1})}function Gn(t,e){const[n,i]=Ai(t,e),o=t.start?"[先行]":"";return nt({text:`${t.generalname}${o}${i?" "+n.join(" "):""}`,color:i?Pe.GENERAL.warning:Pe.GENERAL.normal,fontSize:Pe.GENERAL.fontSize,bold:!0})}function Ci(t,e,n){t.layoutEnabled=!0,t.vScrollBarSkin="",e.graphics.clear(),e.graphics.drawRect(0,0,210,n,"#3B3A27"),e.pos(0,0);}function Ii(t,e){let n=0;if(P.text[t.event]){const r=nt({text:P.text[t.event],...Pe.TITLE});e.addChild(r),n+=r.height;const s=bt();e.addChild(s),n+=s.height;}t.generals.forEach(r=>{const s=Gn(r,ke.difficulty);e.addChild(s),n+=s.height;});const i=bt();e.addChild(i),n+=i.height;const o=nt({text:t.get.replace(/\n/g,`
`),...Pe.GET_INFO});return e.addChild(o),n+=o.height,n}function Ei(t,e){let n=0;for(let i=0;i<3;i++){const o=t+(i+1).toString().padStart(2,"0");if(!P.Rchoose[o])continue;const r=P.Rchoose[o];r.generals&&r.generals.forEach(c=>{const u=Gn(c,ke.difficulty);e.addChild(u),n+=u.height;});const s=nt({text:r.get.replace(/\n/g,`
`),...Pe.GET_INFO});e.addChild(s),n+=s.height;const a=bt();e.addChild(a),n+=a.height;}return n}function Tt(t,e){ke.res=[];for(const n of t){const{x:i,y:o}=P.Rcity[n.id];let r=0;const s=new Laya.VBox;s.pos(i,o),s.zOrder=999,s.name="city";const a=new Laya.Sprite;if(a.alpha=.7,s.addChild(a),P.Rfight[n.event])r=Ii({...P.Rfight[n.event],event:n.event},s);else {if(P.text[n.event]){const c=nt({text:P.text[n.event],...Pe.TITLE});s.addChild(c),r+=c.height;const u=bt();s.addChild(u),r+=u.height;}r+=Ei(n.event,s);}Ci(s,a,r),ke.res.push({id:n.id,city:s});}de(()=>L.find("SceneLayer","RogueSmallMapScene")).then(n=>{for(let i=(n==null?void 0:n.cityView.numChildren)-1;i>=0;i--){const o=n.cityView.getChildAt(i);o.name==="city"&&n.cityView.removeChild(o);}ke.res.forEach(({city:i})=>{n.cityView.addChild(i);});});}function St(t,e="点击复制",n=!0,i=!1,o=null){let r=document.createElement("button");return r.className="calRes",r.title=e,r.disabled=i,r.innerText=t,r.onclick=()=>{Ze(t,n),r.innerText="复制成功",setTimeout(()=>{r.textContent=t;},500);},r}async function on(t){let e=t.slice().sort((r,s)=>r-s),n=[];function i(r,s,a){if(a===13){n.push(r.slice());return}if(!(a>13))for(let c=s;c<e.length;c++)c>s&&e[c]===e[c-1]||(r.push(e[c]),i(r,c+1,a+e[c]),r.pop());}i([],0,0);let o=document.getElementById("result");o.innerHTML="";for(let r of n.sort((s,a)=>a.length-s.length))if(o.appendChild(St(r.map(s=>Me(s,!1)).join("+"))),o.children.length>=15)break;o.innerHTML===""&&(o.innerHTML='<span class="textRes">【资援】无解！</span>');}async function Bi(t,e=!1){function n(c,...u){let f=c.slice();for(let l=0;l<f.length;l++){for(let d=0;d<u.length;d++)if(f[l]-=u[d][l],f[l]<0)return !1;if(l>0&&f[l]>=2)return 0}return f}let i=t.reduce((c,u)=>(c[0]++,c[u]++,c),Array(14).fill(0)),o=Math.floor(i[14]/2),r=new Map([[0,[Array(14).fill(0)]]]);for(let c=1;c<=13;c++){let u=i[c];if(u!=0)for(let f of Array.from(r.keys()).sort((l,d)=>d-l)){let l=r.get(f);for(let d=1;d<=u;d++){let p=f+c*d;if(p>o)break;r.has(p)||r.set(p,[]);for(let g=0;g<l.length;g++){let C=l[g].slice();C[0]+=d,C[c]+=d,r.get(p).push(C);}}}}r.delete(0);let s=new Map;for(let c of Array.from(r.keys()).sort((u,f)=>f-u)){let u=r.get(c);for(let f=0;f<u.length;f++)for(let l=f;l<u.length;l++){let d=n(i,u[f],u[l]);d&&(s.has(d[0])||s.set(d[0],[]),u[f][0]<=u[l][0]?s.get(d[0]).push([u[f],u[l],d]):s.get(d[0]).push([u[l],u[f],d]));}}let a=document.getElementById("result");a.innerHTML="",Array.from(s.keys()).sort((c,u)=>c-u).some(c=>{if(s.get(c).sort((u,f)=>u[0][0]-f[0][0]).forEach(([u,f,l])=>{let d=document.createElement("button");d.className="calRes";let p=document.createElement("span"),g=document.createElement("span");p.innerText=u.flatMap((C,S)=>S>0?Array(C).fill(Me(S,!1)):[]).join("+"),g.innerText=f.flatMap((C,S)=>S>0?Array(C).fill(Me(S,!1)):[]).join("+"),d.appendChild(p),d.insertAdjacentHTML("beforeend","<span>=</span>"),d.appendChild(g),d.title="点击复制",d.onclick=function(){Ze(this.innerText,!0);},e&&(d.title="点击“=”左侧或右侧的数字，将被点击一侧的数字分配给自己，另一侧的分配给张昌蒲",p.className="yanjiaospan",g.className="yanjiaospan",p.onclick=function(C){C.stopPropagation(),L.yanJiao([u,f,l],2);},g.onclick=function(C){C.stopPropagation(),L.yanJiao([u,f,l],0);}),a.appendChild(d);}),a.children.length>=5)return !0}),a.innerHTML===""?a.innerHTML='<span class="textRes">【严教】无解！</span>':e&&a.insertAdjacentHTML("afterbegin","界小抄：点下方数字可以自动分配牌<br>点击想要分配给自己的一组数字即可");}async function Ti(t,e){if(!(t!=null&&t.length))return;let n=t.slice().sort((s,a)=>s-a),i=[];function o(s,a,c){if(!(c>13)){i.unshift(s.slice()),e&&(i[0].K=c===13?s.length:0);for(let u=a;u<n.length;u++)u>a&&n[u]===n[u-1]||(s.push(n[u]),o(s,u+1,c+n[u]),s.pop());}}o([],0,0);let r=document.getElementById("result");r.innerHTML="";for(let s of i.filter((a,c,u)=>!u.some(f=>a.length<f.length&&a.every(l=>f.includes(l)))).sort((a,c)=>c.K-a.K||c.length-a.length))r.appendChild(St(s.map(a=>Me(a,!1)).join("+"))),e&&s.K&&r.lastChild.classList.add("textRes");}async function ln(t,e){function n(a,c,u,f,l){if(u.length===l+1){c.push([...u,...u.reduce((d,p)=>(d.splice(d.indexOf(p),1),d),a.slice())]);return}for(let d=f;d<a.length;d++)d>f&&a[d]===a[d-1]||(u.push(a[d]),u[0]+=a[d],n(a,c,u,d+1,l),u[0]-=u.pop());return c}let i=document.getElementById("result");if(i.innerHTML="",!(t!=null&&t.length)||!(e!=null&&e.length))return;let o=Math.max(t.length,e.length);t.sort((a,c)=>a-c),e.sort((a,c)=>a-c);for(let a=2;a<=o;a++){let c=n(t,[],[0],0,a);n(e,[],[0],0,a).forEach(u=>c.forEach(f=>{u[0]>f[0]&&u.slice(1,a+1).every(l=>!f.slice(1,a+1).includes(l))&&(o<3||Array.from({length:a}).some((l,d)=>u[d+1]<f[d+1]))&&i.appendChild(St(u.slice(1,a+1).map(l=>Me(l))+"→"+f.slice(1,a+1).map(l=>Me(l)),"点击复制",!1));}));}let r=Array.from(new Set(e)),s=Array.from(new Set(t));r.forEach(a=>{let c=s.filter(u=>u<a);c.length&&i.appendChild(St(Me(a)+"→"+c.map(u=>Me(u)).join("/"),"点击复制",!1));}),i.innerHTML===""&&(i.innerHTML='<span class="textRes">【易城】无法交换！</span>');}async function Dt(t){var a,c,u;if(!(t!=null&&t.allData))return;let e=t.allData,n=e.shopData,i=e.chapterData,o=e.generalpool;if(n){n.bShow=!0;let f=[];if(n.itemId&&P.Rplot)for(let l of n.itemId)P.Rplot[l]&&f.push(P.Rplot[l].name);wi(f);}if(o&&o.general_change&&o.general_change.length>0){let f=o.general_change.map(l=>P.generalDict[l]||`Unknown (${l})`);ze(`小抄提示：可换将为${f.reverse().join(", ")}`,"acTooltip",1e4,"green",null,!0);}let r=e.seasonData,s=r&&r.difficulty;s&&(ke.difficulty=s),ke.general=((c=(a=e.gameData)==null?void 0:a.myGeneral)==null?void 0:c.uGeneralId)??0,ke.itemId=((u=e.gameData)==null?void 0:u.itemId)??[],i&&i.locations&&(V.cities=i.locations.map(f=>({id:f.location,event:f.event})),P.Rcity&&se.rogueCitySwitch&&Tt(V.cities));}const Di=(()=>{class t{constructor(){this.id=0,this.goods_id=0,this.goods_cnt=0,this.price_type=0,this.price_num=0,this.stock=0,this.buy_limit=0,this.ori_price=0,this.all_bought_cnt=0,this.self_bought_cnt=0;}Read(o){this.id=o.readUnsignedByte(),this.goods_id=o.readUnsignedInt(),this.goods_cnt=o.readUnsignedInt(),this.price_type=o.readUnsignedByte(),this.price_num=o.readUnsignedInt(),this.stock=o.readUnsignedInt(),this.buy_limit=o.readUnsignedByte(),this.ori_price=o.readUnsignedInt();}UpdateDate(o){this.goods_id=o.goods_id,this.goods_cnt=o.goods_cnt,this.price_type=o.price_type,this.price_num=o.price_num,this.stock=o.stock,this.buy_limit=o.buy_limit,this.ori_price=o.ori_price,this.all_bought_cnt=o.all_bought_cnt,this.self_bought_cnt=o.self_bought_cnt;}}function e(i){i.position=0;let o=[],r=i.readBoolean();if(i.Data.length<=1)return null;let s=i.readUnsignedInt(),a=i.readUnsignedInt(),c=new Date(s*1e3).toISOString().slice(5,16).replace("T"," "),u=new Date(a*1e3).toISOString().slice(5,16).replace("T"," "),f=i.readUnsignedInt();for(let l=0;l<f;l++){let d=new t;d.Read(i);let p=o.find(g=>g.id==d.id);p?p.UpdateDate(d):o.push(d);}f=i.readUnsignedInt();for(let l=0;l<f;l++){let d=i.readUnsignedInt(),p=i.readUnsignedInt(),g=o.find(C=>C.id==d);g&&(g.all_bought_cnt=p);}f=i.readUnsignedInt();for(let l=0;l<f;l++){let d=i.readUnsignedInt(),p=i.readUnsignedInt(),g=o.find(C=>C.id==d);g&&(g.self_bought_cnt=p);}return {commonVo:o,start_time:s,end_time:a,start:c,end:u,next:r}}let n=!1;return async i=>{if(n)return null;const o=document.querySelectorAll('.left input[type="checkbox"]');let r=e(i);if(!r)return null;let{commonVo:s,start_time:a,end_time:c,start:u,end:f,next:l}=r;if(l)return;a=(a-8*60*60)*1e3;let d=s.map(({goods_id:C,goods_cnt:S,price_type:y,price_num:A,stock:Y,buy_limit:v,ori_price:D,all_bought_cnt:F,self_bought_cnt:G},K)=>{var be;let ee=A+["","通用元宝","元宝","银两"][y]+": "+((be=P.goodsID(C))==null?void 0:be.name)+(S>1?"*"+S:""),he=`${u} ~ ${f} 共${Y}个`,xe=F>=Y||G>=v;return Object.assign(o[K].dataset??{},{goods_id:C,start_time:a,goods:ee}),{goods_id:C,goods:ee,title:he,disabled:xe}}),p=document.getElementsByClassName("right")[0];p&&(p.innerHTML=d.map(({goods:C,title:S,disabled:y})=>`<span class="secKillDetailText${y?" gray":""}" title="${S}">${C}</span>`).join(""));let g=p.start-6e4;return g>ne.now()&&ne.set("miaosha",()=>{ue(`${u}
秒杀即将开始！
`+d.map(({goods:C})=>C).join(`
`)),n=!0,setTimeout(()=>{n=!1;},66666);},g),i.Size==i.position}})();let Li=["巳蛇","灵动","八门","盾弓","智迟","持盈","卫主","不死","刚烈","觉醒","悲鸣","断肠","节命","先机","悲鸣","忘魂","雅士","挥泪","不屈","封冻","灵躯","武魂","已蛇","邪徒"];const Wt={getspell:0,getspell_ZD:1,getspell_KN:2,getspell_EM:3,getspell_LY:4};function Ai(t,e){let n=[],i=!1,o=Oi(e);const r=Wt[o];let s=Object.keys(Wt).filter(a=>Wt[a]<=r).map(a=>t[a]).filter(Boolean).join(";");s=s==null?void 0:s.split(";").map(a=>{var c;return ((c=P.spellDict[a])==null?void 0:c.name)||"无收录技能"});for(let a of s)Li.includes(a)&&(n.push(a),i=!0);return [n,i]}function Oi(t){switch(Math.floor((t-1)/5)){case 0:return "getspell";case 1:return "getspell_ZD";case 2:return "getspell_KN";case 3:return "getspell_EM";case 4:return "getspell_LY";default:return "getspell"}}var st=[],Lt=[],cn={290:"推锋",766:"匡弼"},Ge=[],pt={},mt={},et={},Je={},gt=new Map,Te=()=>({name:"加载中"}),We=[],At={},Ot={},Oe={},De={},Ri={},Rt={},Gt={};Object.assign(P,{cardDict:st,cardIDsOrder:Lt,spellDict:Ge,generalDict:pt,skinSP:mt,skinDict:et,skinMap:Je,bigSkin:gt,goodsID:Te,rogejson:De,gxjson:Ri,Rfight:Oe,Rchoose:Ot,Rcity:At,secId:Rt,vskinMap:Gt,Rplot:We});async function Gi(t){return new Promise(e=>JSZipUtils.getBinaryContent(window.location.host==="test.sanguosha.com"?"https://test.sanguosha.com/h5/res/config//Config_w.sgs":"https://web.sanguosha.com/220/h5_2/res/config/Config_w.sgs?v="+window.resourceVersion,(n,i)=>JSZip.loadAsync(i).then(async o=>{var Y;const r=function(){const v=new Date;return v.getFullYear().toString()+(v.getMonth()+1).toString().padStart(2,"0")+v.getDate().toString().padStart(2,"0")+"T000002"}();let s=["sys_playcard","cha_spell","character","hd_roguelike","hd_1v1_rogue","sys_h5_shop","sys_gs_dbs_fs_goodsbaseinfo","sys_server_item_drops_templete_config","sys_h5_dbs_clientserverpub","cha_gs_dbs_fs_skininfo","gn_dbs_quest","sys_h5_quest","sys_h5_task","ff_dbs_lottery_new","ff_exchange_new","sys_treasure_chest","gn_dbs_giftbag","ff_tiangong","ff_chess"];var a=await Promise.all(s.map(v=>o.file(v+".sgs").async("arraybuffer").then(D=>JSON.parse(new TextDecoder().decode(new Zlib.Gunzip(CtrUtil.Ctr.Ofb_Dec(D)).decompress()))))).then(v=>s.reduce((D,F,G)=>(D[F+".sgs"]=v[G],D),{}));function c(v,D){if(typeof v!="object")return v;let F={};for(let G in v){let K=D.get(G)||G;F[K]=v[G];}return F}var u=new Map([["id","编号"],["name","名称"],["time","时间"],["desc","说明"],["reward","奖励"],["price","价格"],["max","限购"],["effect","效果"],["info","信息"]]),f=a["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.reduce((v,D)=>(v.set(D.a,D),v),new Map),l=a["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.abbreviation.field.reduce((v,{Short:D,Long:F})=>(v.set(D,F),v),new Map),d=a["sys_server_item_drops_templete_config.sgs"].AllDrop.DropTemplete.DropGroup.DropItem.reduce((v,D)=>(v.has(D.a)||v.set(D.a,[]),v.get(D.a).push(D.d),v),new Map);Te=(()=>{var v={};return function(D){if(D=parseInt(D),v[D])return v[D];let F=c(f.get(D),l),G=a["sys_h5_shop.sgs"].root.itemtips.find(({a:ee})=>ee==D),K=(F==null?void 0:F.usedeffect)&&S(F==null?void 0:F.usedeffect);return v[D]={...F,...G&&{info:G.e},...K&&{effect:K}}}})();var p={};function g(v){var F;let D=v==null?void 0:v.replace(/([^0-9,\.])/g,"").split(",").map(G=>parseInt(G));return (D==null?void 0:D.length)<2?v:(p[D[0]]??(p[D[0]]=(F=f.get(D[0]))==null?void 0:F.b)??D[0])+(parseInt(D[1])>1?"*"+D[1]:"")}var C={};function S(v){let D=parseInt(v);if(D!=1e3&&Math.abs(D)>0)return C[D]??(C[D]=(d.get(Math.abs(D))??[]).map(F=>{var G;return ((G=f.get(F))==null?void 0:G.b)??S(F)}).join(D>0?"/":"&"))}Ge=a["cha_spell.sgs"].GameSpells.spell.reduce((v,{a:D,c:F,o:G})=>{var ee,he;let K={name:F,spellid:D,desc:((he=(ee=G==null?void 0:G.replace(/<[^\<\>]*>/g,""))==null?void 0:ee.replace(/#.*/g,""))==null?void 0:he.replace(/[;\n]+$/g,""))||""};return (K.desc.includes("暗置")||K.desc.includes("扣置")||K.desc.includes("移出"))&&(cn[D]=Dn[K.name]??K.name),v[D]=K,v},[]);let y=a["sys_playcard.sgs"].abbreviation.reduce((v,{Short:D,Long:F})=>(v.set(D,F),v),new Map);if(st=a["sys_playcard.sgs"].GamePlayCards.card.map(v=>c(v,y)).reduce((v,D)=>{var F,G;return v[D.id]={...D,name:D.name??((F=Ge[D.spellId])==null?void 0:F.name),desc:(G=Ge[D.spellId])==null?void 0:G.desc},v},[]),Lt=a["sys_playcard.sgs"].GamePlayCards.card.sort((v,D)=>v.c-D.c||v.d-D.d||v.h-D.h||v.m-D.m||v.g-D.g||v.f-D.f||v.a-D.a).map(({a:v})=>v),gt=new Map(a["cha_gs_dbs_fs_skininfo.sgs"].generalskin.items.item.map(v=>[String(v.a),[v.a,v.c,v.v||v.q,v.r]]).reverse()),et=a["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.reduce((v,{skinID:D,name:F,skinlevel:G,dongPoint:K})=>{let ee=parseInt(D/100);return v[ee]||(v[ee]={}),v[ee][D]={level:{"0,0":"普通","0,1":"稀有","0,2":"史诗","0,3":"传说","0,4":"限定"}[G]||"未知",name:F,state:K!==void 0},v},{}),mt=a["cha_gs_dbs_fs_skininfo.sgs"].generalskin.speciaSkin.filter(v=>String(v.skinID).includes("_")).reduce((v,D)=>{let[F,G]=D.skinID.split("_").map(Number);return v[F]?v[F].includes(G)||v[F].push(G):v[F]=[G],v},{}),Object.entries(mt).forEach(([v,D])=>{var K,ee;(K=gt.get(v))==null||K.push(D);let F=parseInt(v/100),G=(ee=et[F])==null?void 0:ee[v];G&&(delete et[F][v],D.forEach(he=>{et[F][v+"_"+he]={...G,name:G.name+he};}));}),pt=a["character.sgs"].GameCharacters.character.reduce((v,{a:D,ai:F,b:G})=>(v[D]=(F||"")+(G==null?void 0:G.replaceAll("&","")),v),{}),a["character.sgs"].GameCharacters.character.forEach(({a:v,v:D})=>{if(typeof D!="string"){Je[v]=new Set([v]);return}let F=[v,...D.split(";").map(K=>parseInt(K))],G=F.find(K=>K in Je);if(G){let K=Je[G];F.filter(ee=>!K.has(ee)).forEach(ee=>(Je[ee]=K).add(ee));}else {let K=new Set(F);F.forEach(ee=>Je[ee]=K);}}),Gt=a["character.sgs"].WuJiangs.Spgroup.reduce((v,D)=>{const F=D.spgenerals?D.spgenerals.split(",").map(Number):[];return F.forEach(G=>{v[G]=new Set(F);}),v},{}),Rt=a["ff_tiangong.sgs"].root.Common.reduce((v,D)=>(v[D.Id]=D,v),{}),typeof t!="string"){let v=a["gn_dbs_giftbag.sgs"].giftsys.gifts.giftsItem.Item.filter(D=>D.cdkey!="sgs"&&!D.platform&&D.endtime>=r&&D.begintime<=r).sort((D,F)=>D.endtime-F.endtime).map(D=>{const F="<br>"+D.dataInfo.match(/\[(\d+),(\d+)\]/g).map(G=>{const[K,ee,he]=G.match(/\[(\d+),(\d+)\]/);return `${Te(ee).name} * ${he}`}).join("<br>");return {giftID:D.giftID,endtime:D.endtime,begintime:D.begintime,dataInfo:D.dataInfo,rewards:F}}).filter(Boolean);P.CDKDict=v;}if(Object.assign(P,{cardDict:st,cardIDsOrder:Lt,markSpell:cn,spellDict:Ge,generalDict:pt,skinSP:mt,skinDict:et,skinMap:Je,bigSkin:gt,goodsID:Te,secId:Rt}),(typeof t!="string"||t=="roge")&&async function(v,D){At=v.Root.Level.reduce((h,{cityID:m,cityname:W,citypic:x,citycoordinate:k,startshow:E})=>{let[j,J]=k.split(",").map(Number);return h[m]={x:j,y:-J,boss:E,name:W??(x==null?void 0:x.replace(/^city_([0-9])_(.+)*\.png$/,(T,oe,M)=>({"1jjy":"将军营","1jl":"箭楼","1wl":"望楼","1fht1":"烽火台(左)","1ck":"仓库","1yf":"营房","1fht2":"烽火台(右)","1sjc":"神君祠","2xsj":"西市集","2wl":"望楼","2dsj":"东市集","2wk":"武库","2hgl":"挥公陵","2sdg":"舜帝宫","2gcm":"干城门","2ywt":"演武台","3ds":"东市","3gg":"桂宫","3bg":"北宫","3wyg":"未央宫","3wk":"武库","3mgg":"明光宫","3clg":"长乐宫","4js":"金市","4lyt":"凌云台","4hly":"华林园","4tc":"太仓","4tx":"碳墟","4smm":"司马门","4wk":"武库","4sz":"石址","5my":"梅园","5fhl":"凤凰林","5lt":"龙亭","5wk":"武库","5wl":"望楼","5cm":"城门","5ql":"谯楼","5clg":"陈留宫","6jkg":"建康宫","6ql":"戚里","6wl":"望楼","6ycq":"邺城桥","6ywt":"演武台","6sg":"书馆","6wfl":"万福楼","6wk":"武库","6tqt":"铜雀台"})[oe+M]??T))},h},{}),v.Root.Tactics.forEach(({plot:h,plotname:m,plotdesc:W,school:x,money:k,level:E})=>{We[h]={name:m.replaceAll("·",""),desc:W.replaceAll(" ",""),school:x,money:k,level:E,type:2};}),v.Root.Spell.forEach(({id:h,spellid:m,money:W,level:x})=>{var k,E;We[h]={name:(k=Ge[m])==null?void 0:k.name,desc:(E=Ge[m])==null?void 0:E.desc,spellid:m,money:W,level:x,type:3};}),v.Root.Card.forEach(({id:h,cardid:m,isequip:W,money:x,level:k})=>{var E=st[m];We[h]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[E.subType]??E.name,desc:E.desc,color:E.color,number:E.number,money:x,level:k,type:4+W,rType:(E.type*10+E.subType)*100+W};});var F=v.Root.Roundid.reduce((h,{useSeason:m})=>m),G=new Map,K=v.Root.Text.reduce((h,{ID:m,text:W})=>(h[m]=W,h),[]);v.Root.General=(h=>v.Root.General.map(m=>c(m,h)))(v.root.abbreviation.reduce((h,{Short:m,Long:W})=>(h.set(m,W),h),new Map)),v.Root.Adventure.forEach(h=>{h.chapname=K[h.chapname]??h.chapname;});let ee=v.Root.RewardGroup.reduce((h,{reward:m,rewarddesc:W,allreward:x,abandonmoney:k})=>{var E,j;return h[m]=(k?k+"铜币/":"")+((j=(E=x==null?void 0:x.split(";"))==null?void 0:E.flatMap(J=>J==null?void 0:J.split(",")))==null?void 0:j.map(J=>["随机","普通","稀有","史诗","传说"][J]).join("/"))+W.replace("多选一","自选"),h},v.Root.Other.reduce((h,{reward:m,rewardname:W})=>(h[m]=W,h),{}));var he=v.Root.Chapter.reduce((h,{seasonID:m,chapter:W,cityName:x,bosslocation:k,location:E})=>(E.split(";").forEach(j=>{h[j]=`${m}-${W}${x}`;}),h[k]=`${m}-${W}${x}BOSS`,h),{}),xe=v.Root.General.reduce((h,m)=>(h[m.generalgroup]||(h[m.generalgroup]=[]),h[m.generalgroup].push(m),m.generalname=m.generalname.replace("&",""),h),{});v.Root.General.forEach(h=>{h.GeneralRank||(h.GeneralRank=0),h.JumpStage&&(h.next=(([m,W])=>xe[m][W-1]??xe[m][0])(h.JumpStage.split(";"))),h.info={general:h.generalname,hp:h.hp,maxhp:h.maxhp,card:h.cardnum,draw:h.draw,sha:1+h.exshatimes,armor:h.armor,getarmor:h.getarmor,...h.next?{next:h.next.generalname}:{}},h.spells=["","_ZD","_KN","_EM","_LY"].flatMap((m,W)=>{var x;return (((x=h["getspell"+m])==null?void 0:x.split(";"))??[]).map(k=>Ge[k]).filter(Boolean).map(k=>({...k,level:W}))}),h.spell=h.spells.map(({name:m})=>m).join(","),h.cards=["","_ZD","_KN","_EM","_LY"].flatMap((m,W)=>{var x,k;return [...((x=h["carddesc"+m])==null?void 0:x.split(";"))??[],...((k=h["equip"+m])==null?void 0:k.split(";"))??[]].map(E=>st[E]).filter(Boolean).map(({id:E})=>({id:E,ncn:re[E].ncn,level:W}))}),h.card=h.cards.map(({ncn:m})=>m).join(",");}),Oe=v.Root.Fight.reduce((h,m)=>{function W(x,k,E=!1){x&&(m.fight+=X(x.info),m.lost+=(x.start?"[先手]":"")+x.generalname,x.next?(m.lost+=">",x.next.stage=k,x.next.info.pre=x.generalname,m.generals.push(x.next),W(x.next,k+1,E)):E||(m.fight+="+",m.lost+=" "));}if(m.generals=[...xe[m.Ggroup]??[]],m.fight="",m.lost="",m.startnum){let x=m.generals.find(k=>k.generalID==m.startnum);x&&(x.start=!0);}return m.generals.forEach((x,k,E)=>W(x,1,k==E.length-1)),m.get=m.itemgroup+`铜币
`+(m.rewarditem?String(m.rewarditem).split(";"):[]).concat(String(m.reward).split(";")).map(x=>ee[x]).join(`
`),m.text=K[m.text]??m.text,m.name=K[m.name]??m.name,h[m.fightID]=m,h},[]);for(let h in xe)h in Oe||(Oe[h]={generals:xe[h]});if(Ot=v.Root.Choose.reduce((h,m)=>{var W;return m.type==7?(h[m.effectID]=Oe[m.event1],G.set(m.event1,(W=v.Root.Adventure.find(x=>x.ID===parseInt(m.effectID/10)))==null?void 0:W.chapname)):m.type==3&&m.event1=="2"?h[m.effectID]={get:"营地"}:h[m.effectID]={lost:(x=>x&&"失去 "+x)(Q(m.lostitem,m.lostnum,m.effectID)),get:(x=>x&&m.showitem?x.replace("随机","特定"):x)(Q(m.getitem,m.getnum,m.effectID))},h},[]),Object.assign(P,{Rfight:Oe,Rchoose:Ot,Rcity:At,vskinMap:Gt,Rplot:We,text:K}),!t||t=="roge"){var be=Object.entries(xe).reduce((h,[m,W])=>{var j,J,T,oe,M;let x=m.length<6?m.slice(-3):m.slice(0,2)!=="99"?m.slice(-5,-2)+">":"*"+m.slice(-2),k=m.length<6?m.slice(0,-3)-2:m.slice(0,2)!=="99"?m.slice(0,-5)-2:m.slice(-3,-2)-m.slice(-4,-3)+9;if(["新年大吉"].includes(((j=Oe[m])==null?void 0:j.name)??((J=Oe[parseInt(x)+4e3])==null?void 0:J.name)))return h;h[x]||(h[x]={fight:((T=Oe[m])==null?void 0:T.name)??((oe=Oe[parseInt(x)+4e3])==null?void 0:oe.name)??"",generals:{}}),G.has(m)&&(h[x].event=G.get(m));let E=h[x].generals;return (((M=Oe[m])==null?void 0:M.generals)??W).forEach(le=>{let ye=(x.startsWith("*")?k:"")+(le.stage||"")+"#"+le.generalID;for(;;){if(!E[ye])E[ye]={general:(le.info.pre?">":"")+le.generalname+(le.info.next?">":""),info:X(le.info),levels:[],start:[],infos:{},spell:{},card:{},ad:{}};else if(E[ye].levels.includes(k)){ye+="@";continue}break}let ce=E[ye];k%10<6&&k<20&&(ce.levels.push(k),le.start&&ce.start.push(k)),ce.infos[k]=le.info,le.otherad&&(ce.ad[k]=le.otherad),le.spells&&le.spells.forEach(H=>{ce.spell[H.spellid]||(ce.spell[H.spellid]={...H,levels:[],level:void 0}),k%10<6&&k<20&&ce.spell[H.spellid].levels.push(k+(H.level??0));}),le.cards&&le.cards.forEach(H=>{ce.card[H.id]||(ce.card[H.id]={name:H.ncn,levels:[],level:void 0}),k%10<6&&k<20&&ce.card[H.id].levels.push(k+(H.level??0));});}),h},{});Object.entries(be).forEach(([h,m])=>{be[h].shift=h.startsWith("*")&&Math.min(...Object.values(m.generals).flatMap(W=>W.levels))==1?1:0,m.generals=Object.values(m.generals).map(W=>(W.level=Math.min(...W.levels.sort((x,k)=>k-x))-be[h].shift,W.level=W.level,W.spell=Object.values(W.spell).map(x=>{let k=Math.min(...x.levels.sort((E,j)=>j-E));return x.levels.some((E,j,J)=>E<10&&!J.includes(E+10)&&(W.levels.includes(E+10)||W.levels.length==2&&W.levels.includes(10)))&&(x.level=[k]),x.levels.some(E=>E<10)&&(E=>{E.length&&(x.level=[k,E[E.length-1]]);})(x.levels.filter((E,j,J)=>E>=10&&!J.includes(E-10))),x.level=(x.level??k)-be[h].shift,delete x.levels,delete x.spellid,x}).sort((x,k)=>{let E=j=>j[1]>=10?j[1]:j[0]??j;return E(x.level)%10-E(k.level)%10||E(x.level)-E(k.level)}),W.card=Object.values(W.card).map(x=>{let k=Math.min(...x.levels.sort((E,j)=>j-E));return x.levels.some((E,j,J)=>E<10&&!J.includes(E+10)&&(W.levels.includes(E+10)||W.levels.length==2&&W.levels.includes(10)))&&(x.level=[k]),x.levels.some(E=>E<10)&&(E=>{E.length&&(x.level=[k,E[E.length-1]]);})(x.levels.filter((E,j,J)=>E>=10&&!J.includes(E-10))),x.level=(x.level??k)-be[h].shift,delete x.levels,x}).sort((x,k)=>{let E=j=>j[1]>=10?j[1]:j[0]??j;return E(x.level)%10-E(k.level)%10||E(x.level)-E(k.level)}),W.card.length||delete W.card,W.info=Object.values(W.infos).reduce((x,k)=>(Object.keys(x).forEach(E=>{k[E]>x[E]&&(x[E]=k[E]);}),x),{hp:0,card:0,draw:0,sha:0}),Object.keys(W.ad).length?Object.keys(W.ad).sort((x,k)=>k-x).forEach((x,k,E)=>{(x>=10&&W.ad[x]==W.ad[x%10]||W.ad[x]==W.ad[E[k+1]])&&delete W.ad[x];}):delete W.ad,W.start.length?W.start=Math.min(...W.start):delete W.start,delete W.infos,delete W.levels,W)).sort((W,x)=>W.level-x.level);});var I=v.Root.UniversalGroup.filter(h=>h.fightgroup!==void 0).reduce((h,m)=>{h[m.fightID]||(h[m.fightID]={});let W=String(m.fightgroup).slice(-3);return h[m.fightID][W]||(h[m.fightID][W]=[]),h[m.fightID][W].push(m),h},{}),O=Array.from(Array.from(v.Root.Level.reduce((h,{cityID:m,eventfight:W,universalfight:x,startshow:k})=>{var j,J;E(x),E((J=(j=W==null?void 0:W.split(";"))==null?void 0:j.map(T=>T.slice(-3)))==null?void 0:J.filter((T,oe,M)=>!M.slice(oe+1).includes(T)));function E(T){if(!T||T.length==0)return;let oe=h.get(T);oe?oe.includes(he[m])||oe.push(he[m]):h.set(T,[he[m]]);}return h},new Map).entries()).reduce((h,[m,W])=>{let x=W.length>1&&new Set(W.map(k=>k.slice(0,3))).size<2?W.map((k,E)=>k.slice(E?3:0)).join("/"):String(W);return h.get(x)||h.set(x,new Set),(I[m]?Object.keys(I[m]):m).forEach(k=>h.get(x).add(k)),h},new Map).entries()).reduce((h,[m,W])=>(h[m]=Array.from(W,x=>be[x]),h),{});De.jsbs=JSON.stringify(Object.entries(O).filter(h=>h[0].includes(F+"-")).reduce((h,[m,W])=>{let x=m.slice(2);return h[x]||(h[x]=[]),W.forEach(k=>{k.fight!="新年大吉"&&h[x].push(k);}),h},{})),De.jsft=JSON.stringify(Object.values(be).filter(h=>["天涯故交","招兵买马","万众敬仰"].includes(h.event)&&h.shift||["突来危机","擂台比武","战事推演","为民除害","赛前演习","宵小叫嚣"].includes(h.event)).reduce((h,{event:m,generals:W,fight:x})=>(h[m]||(h[m]=[]),h[m].push({...x?{fight:x}:{},generals:W}),h),{})),De.wscd=JSON.stringify(Object.values(D.Card.map(({CitationID:h,money:m})=>({...We[h],money:m})).reduce((h,{level:m,money:W,name:x,color:k,number:E,desc:j,rType:J})=>{let T=m+x+E;return h[T]||(h[T]={cl:[],level:W,name:x,number:E,type:J,desc:j}),h[T].cl.push(k),h},{})).sort(Ve("type","level"))),De.wssp=JSON.stringify(D.Spell.map(({CitationID:h,money:m})=>({...We[h],money:m})).sort(Ve("money","level","spellid")).map(({level:h,money:m,name:W,desc:x})=>({level:m,name:W,desc:x}))),De.wszf=JSON.stringify(D.Tactics.map(({CitationID:h,money:m})=>({...We[h],money:m})).filter(h=>{var m;return (h.name=(m=h.name)==null?void 0:m.replace("·新",""))&&!h.name.includes("废弃")&&!h.desc.includes("备用")&&!/(游戏|战斗)开始/.test(h.desc)}).sort((h,m)=>!h.money^!m.money?h.money?1:-1:h.name.slice(0,2).localeCompare(m.name.slice(0,2))!=0?h.name.slice(0,2).localeCompare(m.name.slice(0,2)):Ve("money","level","name.length")(h,m)).map(({level:h,money:m,name:W,desc:x})=>({level:m,name:W,desc:x})).filter((h,m,W)=>JSON.stringify(h)!=JSON.stringify(W[m+1]))),De.jssp=JSON.stringify(We.filter(h=>(h==null?void 0:h.type)==3).sort(Ve("level","money","spellid")).map(({level:h,money:m,name:W,desc:x})=>({name:W,level:h,desc:x}))),De.jscd=JSON.stringify(Object.values(We.filter(h=>(h==null?void 0:h.type)>=4).reduce((h,{level:m,money:W,name:x,color:k,number:E,type:j,desc:J,rType:T})=>{let oe=m+x+E,M=[33,34].includes(Math.floor(T/100))||x=="诸葛连弩"&&m==4;return h[oe]||(h[oe]={cl:[],level:M?0:m,money:W,name:x,number:E,type:T+(M?6:0),desc:J}),h[oe].cl.push(k),h},{})).sort(Ve("type","level","money")).sort((h,m)=>h.level>0&&m.level==0?-1:0)),De.jssd=JSON.stringify(v.Root.seed.sort(Ve("level","seed")).map(({name:h,desc:m,level:W,huchijineng:x})=>{var E,j,J;let k=(E=m==null?void 0:m.match(/.*获得【([^【】]*)】.*/))==null?void 0:E[1];return k&&(m+=((j=Ge[x])==null?void 0:j.desc)??((J=Ge.find(T=>(T==null?void 0:T.name)==k))==null?void 0:J.desc)),{name:h,level:W,desc:m}})),De.jssc=JSON.stringify(v.Root.school.map(({school:h,name:m,effect:W,needputong:x,needxiyou:k,needshishi:E,needchuanshuo:j})=>({school:h,name:m,need:[x,k,E,j],desc:We[W].desc.replaceAll(" ","")}))).replace("（","(").replace("）",")").replace("）",")"),De.jszf=JSON.stringify(We.filter(h=>(h==null?void 0:h.type)==2).filter(h=>(h.school=parseInt(h.school||100),h.name=h.name.replace("·新",""),!h.name.includes("废弃")&&!h.desc.includes("备用")&&!h.name.includes("套装"))).sort((h,m)=>h.name.slice(0,2).localeCompare(m.name.slice(0,2))!=0?h.name.slice(0,2).localeCompare(m.name.slice(0,2)):Ve("level","money","name.length")(h,m)).map(({level:h,money:m,name:W,desc:x,school:k})=>({...k<100?{school:k}:{},name:W,level:h,desc:x})).filter((h,m,W)=>JSON.stringify(h)!=JSON.stringify(W[m+1]))),De.jstf=JSON.stringify(v.Root.saijitianfu.filter(h=>h.seasonID==F).reduce((h,{tfid:m,ceng:W,type:x,cost:k,plot:E,preposition:j})=>(h[m]={id:m,x,y:W,cost:k,pre:(j==null?void 0:j.split(/,|;/))??[],...We[E]},h),[{id:0,x:0,y:0,cost:0,pre:[],name:"",level:0,type:0}])),e(De);}function Q(h,m,W){var x,k,E;return h?h.includes(",")?(([j,J])=>["随机","普通","稀有","史诗","传说"][J]+{2:"战法",3:"技能",4:"手牌",5:"装备"}[j])(h.split(",")):ee[h]?(m>1?m:"")+ee[h]:We[h]?(x=We[h])==null?void 0:x.name:xe[h]?(G.set(h,(k=v.Root.Adventure.find(j=>j.ID===parseInt(W/10)))==null?void 0:k.chapname),xe[h].map(j=>j.generalname).join(`
`)):(E=v.Root.Card.find(j=>j.id==h))==null?void 0:E.name:""}function X({general:h,hp:m,maxhp:W,armor:x,getarmor:k,card:E,draw:j,sha:J,next:T,pre:oe}){return (oe?">":"")+h+m+(W!==m?"/"+W:"")+"血"+E+"牌摸"+j+"杀"+J+(T?">":"")}}(a["hd_roguelike.sgs"],a["hd_1v1_rogue.sgs"]),typeof t!="string"||t=="guanxing"){let be=function(I,O,Q="https://web.sanguosha.com/220/h5_2/res/runtime/pc/general/big/bigSkin/"){let X=Q+I+".png";return fetch(X).then(h=>{if(h.ok)return {name:O,desc:`<a target="_blank" href="${X}"><img src="${X.replace("bigSkin","static").replace("big/s","seat/s")}"></a>`};if(!Q.includes("seat"))return be(I,O,Q.replace("big/s","seat/s").replace("bigSkin","static"))})};P.gxjson={"结果为推演和预测，请以最终公告为准！更新时间":new Date().toLocaleString(),"【充值消费】":[]};let v=a["gn_dbs_quest.sgs"].TaskAll.Task.filter(({_attributes:I})=>I.clientTimeStart>=String(r)).map(({_attributes:I,Reward:O})=>{let Q=",";return O.SelectReward&&(O=O.SelectReward,Q="/"),O.RewardItem.length||(O.RewardItem=[O.RewardItem]),{id:I.id,time:I.timeStart.slice(0,8)+"—"+I.timeEnd.slice(0,8),desc:"【"+I.name+"】"+I.desc,reward:O.RewardItem.map(({_attributes:X})=>g(X.itemId+","+X.count)).join(Q)}}).concat(a["sys_h5_quest.sgs"].root.Task.filter(I=>I.ClientTimeStart>=String(r)).map(({Id:I,Name:O,Desc:Q,Rewards:X,Count:h,ClientTimeStart:m,ExtraRewards:W,ClientTimeEnd:x,SelectRewards:k})=>{let E=k?"/":",";return {id:I,time:m.slice(0,8)+"—"+x.slice(0,8),desc:"【"+O+"】"+Q,reward:[X+","+h,...(W==null?void 0:W.split(";"))??[]].map(g).join(E)}})),D=a["sys_h5_task.sgs"].TaskAll.TaskNode.filter(({duration:I,quest_id:O})=>O&&(!I||(I==null?void 0:I.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6})?.*"),"$1"))>=String(r))).reduce((I,{duration:O,quest_id:Q,name:X})=>{var W,x;let h=Q.split(";").map(k=>parseInt(k)).filter(k=>k>0),m=(((x=O||((W=v.find(({id:k,time:E})=>h.includes(k)&&E))==null?void 0:W.time))==null?void 0:x.slice(0,8))+"·【"+(X==null?void 0:X.replace(/.*盲盒.*/,"盲盒福利"))+"】").replace(/.*(充值|消费).*/,"【充值消费】");return h.forEach(k=>{k!=""&&(I[k]=m);}),I},{});v.forEach(({id:I,...O})=>{let Q=D[I]??String(r)+"·【其它任务】";P.gxjson[Q]||(P.gxjson[Q]=[]),P.gxjson[Q].push(O);}),(I=>{var O;I.length>1&&(P.gxjson[((O=I[0].time)==null?void 0:O.slice(0,8))+"·兑换【占星秘宝】"]=I);})(a["ff_dbs_lottery_new.sgs"].root.ShopGoods.filter(({timeRange:I})=>(I==null?void 0:I.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)).map(({Id:I,counts:O,exchangecount:Q,timeRange:X})=>({time:X==null?void 0:X.replace(/.*?([0-9]+)T[0-9]+,([0-9]+)T[0-9]+/,(h,m,W)=>m+"-"+W),desc:"消耗·星石币*"+Q,reward:g(I+","+O)}))),a["ff_exchange_new.sgs"].root.Common.filter(({duration:I})=>(I==null?void 0:I.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)).forEach(({itemid:I,goods:O,rewardstype:Q,duration:X})=>P.gxjson[X.slice(0,8)+"·【"+Te(I).name+"】兑换"]=O.sort((h,m)=>m.exchangecount1-h.exchangecount1).map(({exchangecount1:h,Id2:m,counts:W,limitcounts:x,itemid2:k,exchangecount2:E})=>{let j=String(W).split(";");return {time:X.slice(0,8)+"—"+X.slice(16,24),desc:"消耗·"+g((k??I)+","+(E??h))+(x?",限"+x+"次":""),reward:String(m).split(";").map((J,T)=>g(J+","+j[T])).join("/")}})),a["sys_treasure_chest.sgs"].root.Common.filter(({duration:I})=>(I==null?void 0:I.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)).forEach(({itemid:I,rewards:O,duration:Q})=>P.gxjson[Q.slice(0,8)+"·开启【"+Te(I).name+"】"]=O.map(X=>({time:Q.slice(0,8)+"—"+Q.slice(16,24),desc:"开启·"+g(I+","+X.counts),reward:JSON.stringify(X).split(/,"goodsid[0-9]+":" *([0-9,;]+) *"/).filter(h=>(h==null?void 0:h.search(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/))>=0).map(h=>h.replace(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/,(m,W,x)=>g(W)+(x?"["+g(x)+"]":""))).join(X.rewardstype==2?"/":",")})));let F=[],G=[],K=[],ee=a["sys_h5_dbs_clientserverpub.sgs"].client.DuoBao[0].item.filter(({BeginTime:I})=>I>String(r)).flatMap(({DropId:I,ExchangeId:O,BeginTime:Q,EndTime:X})=>{let h=Q.slice(0,8)+"-"+X.slice(0,8),m=(d.get(Math.abs(I))??[]).map(Te).filter(({name:E})=>!["夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","招募令","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(E)),W=m.map(({ID:E})=>E),k=(d.get(Math.abs(O))??[]).map(Te).filter(({ID:E,name:j,TypeID:J})=>W.includes(E)||!(J==43&&(j!=null&&j.endsWith("动态套装"))||J==36&&(j!=null&&j.startsWith("文和乱武*"))||J==25&&["赵襄","沙摩柯(SP)","孙尚香(界限突破)"].includes(j)||["枭雄金印","水晶碎片","圣魂玄晶","史诗皮肤锦囊","传说皮肤锦囊","至臻皮肤礼盒","谋定水晶自选礼盒"].includes(j))).map(({ID:E,name:j})=>{let J=m.findIndex(({name:T})=>T==j);return J>=0&&W.splice(J,1,E),E});return Array.from(new Set([...W,...k])).map(Te).map(({ID:E,TypeID:j,PicID:J,name:T,returngoods:oe,usedeffect:M,info:le,fragment:ye})=>{var H;let ce={time:h,name:T,price:[...W.includes(E)?["四角"]:[],...k.includes(E)&&ye?[ye+"夺宝碎片"]:[]].join("/"),...(we=>we&&{desc:we})(["祈福灯","圣魂玄晶","枭雄金印"].includes(T)?"":oe&&oe!="0"&&oe.split(";").filter(we=>(we==null?void 0:we.search(/[0-9]+,[0-9]+/))>=0).map(g).join(";")||(M==null?void 0:M.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&M.replace(/([0-9]+),[0-9,]+/g,g)||M&&S(M)||le)};return (j==36||((H=ce.name)==null?void 0:H.search(/\*[^0-9]/))>=0)&&K.push({name:T,res:J}),ce})});ee.length&&(P.gxjson.夺宝行动=ee,ee=ee.map(({name:I})=>I));let he=a["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(I=>{var O;return ((O=I.x)==null?void 0:O.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)&&I.a!=834901}).map(({a:I,ah:O,l:Q})=>{if(Q&&Q.replace(/([0-9]+),[0-9,]+/g,(X,h)=>(!O&&![100301,200101,1325201].includes(parseInt(h))&&F.push(parseInt(h)),X)),O)G.push(I);else return I}).filter(Boolean).concat(F).sort((I,O)=>I-O).filter((I,O,Q)=>O==0||I!=Q[O-1]);Array.from(new Set(a["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.filter(I=>I.SellTime>String(r)).map(I=>I.baseID).concat(he.concat(he.filter((I,O,Q)=>I-Q[O-1]>1e3&&Q[O+1]-I<1e3).map(I=>a["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(O=>O.a-I>0&&O.a-I<1e4).map(O=>O.a)).reduce((I,O)=>[...I,...O],[])).sort((I,O)=>I-O)))).map(I=>Te(I)).filter(I=>I&&![...ee,"夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","招募令","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(I.name)).forEach(({ID:I,TypeID:O,PicID:Q,name:X,maxBuyCount:h,yuanbao:m,returngoods:W,SellTime:x,usedeffect:k,info:E,yuanbaoonly:j,fragment:J,exchange:T,shopvisual:oe})=>{var le;let M={...x&&{time:x.replace(/.*?([0-9]+)T[0-9]+;([0-9]+)T[0-9]+/,(ye,ce,H)=>ce+"-"+H)},name:X,...T!=null&&T.includes(",")?{price:g(T)}:oe&&m!=999999&&{price:j?m+"通用元宝":m+"元宝",...h&&((ye,ce)=>parseInt(ye)>0?{max:ce+"个/"+(ye==1?"":ye)+"天"}:{})(...h.split(";"))},...(ye=>ye&&{desc:ye})(["祈福灯","圣魂玄晶","枭雄金印"].includes(X)?"":W&&W!="0"&&W.split(";").filter(ye=>(ye==null?void 0:ye.search(/[0-9]+,[0-9]+/))>=0).map(g).join(";")||(k==null?void 0:k.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&k.replace(/([0-9]+),[0-9,]+/g,g)||k&&S(k)||E)};(O==36||((le=M.name)==null?void 0:le.search(/\*[^0-9]/))>=0)&&K.push({name:X,res:Q}),String(M.price).includes("夺宝")||String(M.price).includes("灵宝")?(P.gxjson.夺宝行动||(P.gxjson.夺宝行动=[]),P.gxjson.夺宝行动.push(M)):M.max?(P.gxjson.限购礼包||(P.gxjson.限购礼包=[]),P.gxjson.限购礼包.push(M)):(P.gxjson.其它道具||(P.gxjson.其它道具=[]),P.gxjson.其它道具.push(M));}),(Y=P.gxjson.其它道具)==null||Y.sort((I,O)=>I.price&&!O.price?-1:1),G.length&&(P.gxjson.祈福武将=Object.entries(G.map(I=>Te(I)).filter(({returngoods:I})=>{var O;return ((O=Te(I.split(";")[1].split(",")[0]))==null?void 0:O.TypeID)==25}).reduce((I,{name:O,lotteryPrice:Q})=>(I[Q]||(I[Q]=[]),I[Q].push(O.replace("武将","").replace(/\(.*?\)/g,"")),I),{})).sort((I,O)=>O[0]-I[0]).map(([I,O])=>({price:I+"同心结",reward:O.join("/")}))),(I=>{I.length&&(P.gxjson.祈愿台=I);})(a["ff_tiangong.sgs"].root.Drop.reduce((I,{Id:O,ItemId:Q,MaxCount:X})=>(I[O]||(I[O]=[]),(h=>{["欢乐豆","手气卡","点将卡","换将卡","诏令天下","夺宝券","招募令","武将包","皮肤包","朱砂","灵宝","桃花","功勋","校尉将印","大将军印","水晶碎片","圣魂玄晶","传世玉玺"].some(m=>h.startsWith(m))||I[O].push(h);})(g(Q+","+X)),I),[]).reduce((I,O)=>{if(O){let Q=I.find(({reward:X})=>O.includes(X));Q&&(Q.reward=O.join(","));}return I},a["ff_tiangong.sgs"].root.Common.slice().reverse().reduce((I,{Id:O,Name:Q,bigrewards:X,Duration2:h})=>{let m=parseInt(h.slice(0,8))+1;if(m<parseInt(r))return I;let W=I.find(({name:x})=>x==Q);return W?W.time+=";"+m:I.push({name:Q,reward:pt[X],time:String(m)}),I},[]).reverse()));const xe=(()=>{var I={};return function(O){return I[O]?I[O]:I[O]=a["ff_chess.sgs"].root.NewChess.filter(({PlanId2:Q})=>Q==O).reduce((Q,{MaxFloors:X})=>Q+parseInt(X),0)}})();(I=>{I.length&&(P.gxjson.绘卷=I);})(a["ff_chess.sgs"].root.Common.reduce((I,{GrandPrize:O,PlanID2:Q,duration2:X})=>{var m;let h=parseInt(X.slice(0,8))+1;return h<parseInt(r)||I.push({reward:(m=Te(O))==null?void 0:m.name,预估价格:xe(Q)/2>>0,time:h+"-"+X.slice(16,24)}),I},[])),P.gxjson.新品皮肤=K.map(({name:I})=>({name:I})),Object.entries(P.gxjson).forEach(([I,O])=>P.gxjson[I]=Array.isArray(O)?O.map(Q=>c(Q,u)):c(O,u)),(!t||t=="guanxing")&&e(Promise.all(K.map(({name:I,res:O})=>be(O,I))).then(I=>P.gxjson.新品皮肤=I.filter(Boolean)).then(()=>(Object.entries(P.gxjson).forEach(([I,O])=>P.gxjson[I]=Array.isArray(O)?O.map(Q=>c(Q,u)):c(O,u)),P.gxjson)));}e(a),console.warn("[initMap] Config_w 解析完成");})))}function Ve(...t){return new Function("_a","_b","return "+t.map(e=>"((_a."+e+")-(_b."+e+"))").join("||"))}function _i(t,e){const n=t.matchAll(/\[(\d+),(\d+)\]/g),i=Array.from(n).map(r=>({GoodsBaseID:parseInt(r[1]),ChangeCount:parseInt(r[2])}));if(i.length!==e.length)return !1;const o=new Map(e.map(r=>[r.GoodsBaseID,r.ChangeCount]));return i.every(r=>o.get(r.GoodsBaseID)===r.ChangeCount)&&e.every(r=>i.some(s=>s.GoodsBaseID===r.GoodsBaseID&&s.ChangeCount===r.ChangeCount))}var Ni=`<head><title>三国杀打小抄</title><meta charset="UTF-8"><style>::-webkit-scrollbar{width:5px;height:12px}::-webkit-scrollbar-track{border:1px solid #050505}::-webkit-scrollbar-thumb{background:#5f563f}::-webkit-scrollbar-thumb:hover{background:#2c2c2c}.body{width:100%;padding:0;font-size:13px;background:#23201d;background-size:cover;color:#f2de9c;display:flex;flex-direction:column;margin:1px;user-select:none;max-width:100vw;overflow-x:hidden;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Tahoma,Arial,sans-serif}.nav{width:100%;background:#23201d;text-align:center;display:flex;align-items:center;gap:15px;padding:5px 0}.nav1{font-weight:bolder;height:20px;width:40%;color:#f2de9c;background:#23201d;margin-right:15px;display:block}.sha{font-weight:bolder;height:20px;width:40%;color:#f2de9c;background:#23201d;margin-right:15px;display:block}#nav1:empty{display:none}.nav2{height:20px;width:49%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.nav2:hover{color:#f2de9c;background:#372820;border:1px solid #f2de9c}.nav2:focus{background:#372820;box-shadow:1px 1px 3px #f2de9c}.content{margin:1px}.AC-head{font-weight:bolder;height:66px;width:13%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin:1px;border-radius:5px;border:1px #23201d solid;box-shadow:1px 0 3px;overflow:hidden}.AC-head:hover{background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.AC-body{height:60px;width:79%;float:left;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.invite-body{height:40px;width:92%;float:left;display:flex;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:5px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.orderContainer{text-align:right;vertical-align:bottom}.order-head{font-weight:bolder;width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.order-body:empty{height:35px}.order-body{position:relative;padding:5px;height:auto;width:94%;display:block;box-shadow:1px 1px 3px;z-index:1;margin:1px;overflow:hidden;border-radius:5px}.order-body:after{text-align:center;content:var(--No-content, '座位号丨武将');position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownShouPai{border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.knownCardsInHand{text-align:center;position:relative;overflow:hidden;display:none;height:auto}.knownCards:empty{text-align:center;position:relative;overflow:hidden;display:none}.knownCards{width:94%;text-align:center;position:relative;overflow:hidden;height:auto}@keyframes blink{50%{border-color:#f2de9c}}.paiduiCards:after{text-align:center;content:'牌堆';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.qipaiCards:after{text-align:center;content:'本回合弃牌堆';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownCards{padding:5px;height:auto;width:94%;float:right;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.knownCards:after{text-align:center;content:'场上手牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#quanBian:after{text-align:center;content:'权变牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#yanXi:after{text-align:center;content:'宴戏牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardTypeDetail:after{text-align:center;content:'牌堆类型详情';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.ding{text-align:center;width:100%;position:relative;height:auto;display:none}.dingCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.dingCards:after{content:'第一张为牌堆顶';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.di{text-align:center;width:100%;position:relative;height:auto;display:none}.diCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.diCards:after{content:'第一张为牌堆底';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardDetail{width:100%;overflow:hidden;display:block}.type{width:100%;float:left}.cardTypeContainer{width:100%;overflow:hidden;display:block}.type-head{width:10%;float:left;text-align:center;color:#f2de9c;margin-left:3px;display:block;overflow:hidden;cursor:pointer}.type-body{padding:5px;width:94%;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.cardType{font-size:12px;width:25%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.cardType:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.storeDetail{font-size:12px;width:50%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.detail{width:100%;float:left;overflow:hidden}.detail-head{width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.detail-body{min-height:40px;padding:5px;width:94%;float:left;display:block;box-shadow:1px 1px 3px;margin:1px;border-radius:5px;overflow:hidden}.panel-header{background:#23201d;color:#f2de9c;padding:3px;text-align:left;border:none;width:100%;cursor:pointer;display:flex;align-items:center;border-radius:5px;border:1px transparent solid}.triangle{width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-left:6px solid #f2de9c;margin-right:10px;transition:transform .3s ease}.panel-content{max-height:0;width:100%;float:left;display:block;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;transition:max-height .3s ease-out}.panel-header.active .triangle{transform:rotate(90deg)}.panel-header.active{color:#f2de9c;background:#372820}.panel-header:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.r{color:#f04155}.suitRec{width:50%;float:right;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",Tahoma,Arial,sans-serif;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7)}.suit{width:50%;float:left}.phrase{float:left}.face{width:12.5%;display:block;float:left}.face:hover{width:12.5%;display:block;float:left;background:#f2de9c}#shandian{width:100%;float:left}.function{width:50%;margin:1px}.jizhan{width:100%;float:left}.yanjiao{width:50%;float:left}.yanjiaospan{border:1px solid #0000;box-sizing:border-box}.yanjiaospan:hover{border:1px solid #f2de9c;cursor:pointer}.calRes{width:98%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px;font-size:13px;margin:1px}.secKillDetailText{width:100%;height:26px;float:left;text-align:center;color:#f2de9c;background:#23201d;display:block;border-radius:5px;line-height:26px;margin-top:17px}.calRes:not(:disabled):hover{font-size:12px;color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhuBTN{width:48%;height:20px;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhuBTN:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhu{width:100%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhu:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#mySeatID1{width:48%}#mySeatID2{width:48%}.res{width:100%;float:left}a:link,a:visited{color:inherit;text-decoration:none;display:inline-flex;text-decoration:underline;border-radius:5px;cursor:pointer;align-items:center;justify-content:center}a:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#donate{position:relative;color:#f2de9c;display:block;text-align:center}.uuid{position:relative;color:#f2de9c;display:block;text-align:center;cursor:pointer}.uuid:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.uuid:active{background:#372820}.width{width:100%;height:5px;clear:both}.switch-container{display:flex}.switch{position:relative;display:block;margin-left:10px;width:56px;height:26px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#23201d;-webkit-transition:.4s;transition:.4s;border-radius:34px;border:1px solid #f2de9c;--slider-position:2px}.slider:before{position:absolute;content:"";height:20px;width:20px;left:var(--slider-position,2px);bottom:2px;background-color:#f2de9c;-webkit-transition:.4s;transition:.4s;border-radius:50%}input:checked+.slider{background-color:#372820}input:focus+.slider{box-shadow:0 0 1px #372820}.status{position:absolute;top:50%;transform:translateY(-50%);left:5px;color:#555}.explanation{margin:0 10px;display:flex;width:100%}input:checked+.slider+.status:before{content:'开'}input:checked+.slider+#autoBotStatus:before{content:var(--bot-status, '30');color:#f2de9c}input+.slider+#autoBotStatus:before{content:var(--bot-status, '关')}input+.slider+.status:before{content:"关"}.calRes:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.markedCard{display:inline-flex;align-items:center;border-radius:5px;border:1px solid #000;width:auto;background-color:#372820;color:#f2de9c}.mark{writing-mode:vertical-rl;margin-right:0;color:#f2de9c}.markedCard>.mark:only-child{display:none}.shoupai{color:#000;--shoupai-width:33px;padding:0;font-weight:bolder;margin-right:calc(32px - var(--shoupai-width));float:left;width:var(--shoupai-width);min-width:var(--shoupai-width);height:38px;border:1px solid #000;text-align:center;background:rgba(210,200,160,.5);border-radius:5px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",'Noto Color Emoji';white-space:nowrap;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7);font-size:13px}.shoupai.R{color:red}.shoupai.G{background:0}.shoupai.G .shoupai{background:0;pointer-events:none}.order-body:not(#paiduiCards) .shoupai:disabled{display:none}.order-body:not(#paiduiCards) .shoupai.G{width:auto}.left{width:30%;float:left}.right{width:70%;float:right}input[type=checkbox]:disabled+.slider{background-color:gray;cursor:not-allowed}.question-mark{display:inline-block;position:relative;width:15px;height:15px;line-height:15px;text-align:center;border:1px solid #f2de9c;border-radius:50%;margin-left:2px;transition:background-color .3s}.question-mark:hover{background-color:#372820;cursor:pointer}.tooltip{position:relative;background-color:#333;text-align:center;padding:5px;border-radius:5px;max-width:200px;white-space:pre-line;z-index:10000000001;opacity:0;pointer-events:none;transition:opacity .1s ease-in-out;color:#f2de9c;font-size:13px}.tooltip.visible{opacity:1;pointer-events:auto}.tooltip.top{margin-left:50px}#sidebarHint{position:fixed;top:0;right:0;width:25px;height:100%;background-color:rgba(55,40,32,.8);color:#f2de9c;display:none;justify-content:center;align-items:center;font-size:20px;writing-mode:vertical-rl;text-orientation:upright}:root{--my-background-image:url('https://web.sanguosha.com/220/h5_2/res/assets/bigPng/propGet.png')}.sorderContainer{font-size:13px;width:100%;display:flex;align-items:center;width:146px;z-index:10000000000;user-select:none;text-align:left;transition:height .2s;position:fixed;transform-origin:0 0}.sorder-head{display:flex;align-items:center;justify-content:center;font-weight:bolder;width:10%;height:25px;text-align:center;color:#f2de9c;margin-left:3px}.sorder-body{pointer-events:auto;height:auto;width:100%;float:right;display:flex;flex-wrap:wrap;overflow:hidden;z-index:1;max-height:48px}.sorder-body.show-ellipsis::after{content:'...';position:absolute;bottom:0;left:50%;transform:translateX(-50%);text-align:center;color:#f2de9c;font-weight:700;height:20px;background:linear-gradient(to bottom,rgba(255,255,255,0),rgb(0 0 0 / 80%));width:inherit}.sorder-body:hover{max-height:none;overflow:visible}.sorder-body:hover::after{display:none}.sorder-body:not(#paiduiCards) .shoupai:disabled{display:none}.sorder-body:not(#paiduiCards) .shoupai.G{width:auto}@keyframes fadeInLeftToRight{0%{clip-path:inset(0 100% 0 0);opacity:0}100%{clip-path:inset(0 0 0 0);opacity:1}}@keyframes fadeOutRightToLeft{0%{clip-path:inset(0 0 0 0);opacity:1}100%{clip-path:inset(0 100% 0 0);opacity:0}}.ac-tooltip{position:fixed;top:100px;left:45%;background-color:transparent;background-image:var(--my-background-image);cursor:pointer;background-size:100% 100%;color:#f44336;font-size:16px;border-radius:4px;z-index:9999;overflow:hidden;white-space:nowrap;padding:16px 32px;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transform:translateX(0);transition:opacity 1s ease-in-out,visibility 1s ease-in-out}.ac-tooltip.green{background-color:transparent;color:#f2de9c}.city{visibility:hidden;transition:opacity 1s ease-in-out,visibility 1s ease-in-out;background-color:rgba(55,52,39,.7);color:#f2de9c;align-items:center;justify-content:center;border-radius:5px;text-align:center;flex-direction:column;padding:5px}hr{width:100%;margin:0}@keyframes blink{50%{border-color:#f2de9c}}.show{animation:fadeInLeftToRight 1s forwards,blink 2s infinite;visibility:visible}.hide{animation:fadeOutRightToLeft 1s forwards;visibility:hidden}.window{width:1024px;height:600px;border:2px solid #333;border-radius:8px;box-shadow:0 0 15px rgba(0,0,0,.5);position:relative;background-color:#f5f5f5;overflow:hidden}.window-header{display:flex;justify-content:space-between;align-items:center;background-color:#23201d;color:#fff;padding:5px;cursor:move}.window-header .title{font-weight:700;padding-left:10px}.window-header .controls{display:flex;gap:5px}.window-header .controls button{background:0 0;border:none;color:#fff;cursor:pointer;padding:5px}.window-header .controls button:hover{background-color:rgba(255,255,255,.2)}.window-content{width:100%;height:calc(100% - 40px);border:none}.fullscreen{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-5C3C11THB3"><\/script><script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"><\/script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5C3C11THB3")<\/script></head><div class="body"><div class="nav"><div class="nav1" id="phrase">当前阶段提示</div><div class="sha" id="sha">可出杀次数：0</div></div><div><a href="https://goka.top:8080/chunlian" target="_blank" class="calRes">查看春联</a></div><div class="content" id="content"><div class="orderAndShouPai" id="orderAndShouPai"><button class="panel-header"><span class="triangle"></span> <b>武将手牌</b></button><div class="panel-content order" id="button"><div class="orderContainer" id="or1"><div class="order-body No1" id="1" style="--No-content:'神诸葛亮丨一'"><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button><div class="markedCard"><span class="mark">木马</span> <button class="shoupai G">♥10<br>测试</button> <button class="shoupai R">♦K<br>测试</button></div><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button></div></div><div class="orderContainer" id="or2"><div class="order-body No2" id="2" style="--No-content:'卧龙诸葛丨二'"><button class="shoupai G">♥10<br>暗牌</button> <button class="shoupai G">♥10<br>样式</button></div></div><div class="orderContainer" id="or3" style="--No-content:'天候孔明丨三'"><div class="order-body No3" id="3"></div></div><div class="orderContainer" id="or4" style="--No-content:'诸葛亮丨四'"><div class="order-body No4" id="4"></div></div><div class="orderContainer" id="or5" style="--No-content:'武诸葛亮丨五'"><div class="order-body No5" id="5"></div></div><div class="orderContainer" id="or6" style="--No-content:'卧龙凤雏丨六'"><div class="order-body No6" id="6"></div></div><div class="orderContainer" id="or7" style="--No-content:'界卧龙诸葛丨七'"><div class="order-body No7" id="7"></div></div><div class="orderContainer" id="or8" style="--No-content:'界诸葛亮丨八'"><div class="order-body No8" id="8"></div></div></div><div><div class="orderContainer"><div class="knownCards" id="knownCards"></div></div><div class="orderContainer"><div class="order-body paiduiCards" id="paiduiCards"></div></div><div class="orderContainer"><div class="order-body qipaiCards" id="qipaiCards"></div></div><div class="orderContainer"><div class="knownCards quanBianYanXi" id="quanBian"></div><div class="knownCards quanBianYanXi" id="yanXi"></div></div></div></div><div class="width"></div><div class="cardDetail" id="cardDetail"><div class="space"></div><div class="detail"><div class="detail-body"><div class="suit r" id="heart">♥红桃 × 0</div><div class="suit" id="spade">♠黑桃 × 0</div><div class="suit" id="club">♣梅花 × 0</div><div class="suit r" id="diamond">♦方片 × 0</div><div class="suit r" id="hongsha">红杀 × 0</div><div class="suit" id="heisha" n>黑杀 × 0</div><span>乱击/权变</span><div class="suitRec" id="suit"></div><br><span>博图</span><div class="suitRec" id="boTu"></div><br><span>上一张使用的牌</span><br><button class="shoupai R" id="lastUseCard">＾＾<br>•ω•</button><br><br><br><div id="guhuo" style="display:none">蛊惑牌</div><div class="function yanjiao" id="yanjiao">严教小抄</div><button class="function mizhuBTN" id="mizhu">糜竺小抄</button> <button class="function mizhu mySeatID" id="mySeatID1">座位：1</button> <button class="function mizhu mySeatID" id="mySeatID2">座位：2</button><div class="function res" id="result">结果样式：1 1 1 1 = 4</div></div></div><div class="width"></div><div class="type"><div class="cardTypeContainer"><div class="type-body type1" id="type1"><button class="cardType" id="test1">小抄</button> <button class="cardType">开发</button> <button class="cardType">小伙伴</button></div></div><div class="cardTypeContainer"><div class="type-body type2" id="type2"><button class="cardType">霜迟</button> <button class="cardType">孤独尊</button> <button class="cardType">无所谓</button> <button class="cardType">埃城</button> <button class="cardType">辉弥</button> <button class="cardType">天野</button> <button class="cardType">人富</button></div></div><div class="cardTypeContainer"><div class="type-body type3" id="type3"></div></div><div class="orderContainer"><div class="knownCards cardTypeDetail" id="cardTypeDetail"></div></div></div></div><div class="width"></div><div class="width"></div><div class="laya" id="laya"><div class="space"></div><button class="panel-header laya-header"><span class="triangle"></span> <b>快捷操作</b></button><div class="panel-content" id="layaDiv"><div class="switch-container"><div id="autoBotSwitchContainer"><span class="explanation">自动挂机<span class="question-mark" data-tooltip="AI接管挂机刷酒馆30亲密度&#10;自动创建演武房间开始对战&#10;建议点将张辽禁将只留标风&#10;禁用其它SP武将可提高胜率&#10;到身份演武房间列表后开启&#10;界小抄用户可以无限制使用&#10;开关数字表示酒馆剩余时间&#10;双击打开官阶百胜无尽挂机&#10;到经典场国战开启可刷福卡">?</span></span> <label class="switch"><input id="autoBotSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoBotStatus"></span></label></div><div><span class="explanation" id="autoExplanation"></span></div></div><div class="switch-container"><div><span class="explanation">盖主速刷<span class="question-mark" data-tooltip="主公点将黄盖一分钟苦肉自杀速刷&#10;可用来刷武将百胜战功和官阶任务&#10;保证已激活的账号在 7 天内登录过&#10;一：登录小号创建自选身份密码房&#10;二：多开大号加入房间点自动挂机&#10;三：大号需双击自动挂机开始锁定&#10;四：小号点将黄盖，打开盖主速刷&#10;五：大号准备并保持两窗口在前台&#10;">?</span></span> <label class="switch"><input id="autoHGSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoHGStatus"></span></label></div><div><span class="explanation" id="autoHGExplanation"></span></div></div><div class="switch-container" style="display:none"><div><span class="explanation">加入互助<span class="question-mark" data-tooltip="点击加入小抄互相助力小组&#10;每天自动助力三位小抄玩家&#10;同时收到三位小抄玩家助力&#10;默认为小抄给当前玩家助力&#10;右侧可输入想要助力的玩家&#10;“再”打开《加入互助》开关&#10;该玩家可收到三个小抄助力&#10;">?</span></span> <label class="switch"><input id="autoInviteSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><textarea class="invite-body" type="text" id="inviteName" required maxlength="10" size="10" placeholder="大西瓜"></textarea></div></div><button class="calRes" id="guanxing">自助观星</button> <button class="calRes" id="mail" disabled="disabled">一键领取邮箱物品</button> <button class="calRes" id="task" disabled="disabled">一键领取所有任务奖励</button></div></div><div class="store" id="store"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>山河图</b></button><div class="panel-content"><div><button class="calRes" id="openStore">点击打开商店换装备->跳奇遇</button></div><div><span id="chongsheng">重生是否发动：否</span></div><div><span id="sanBanFu">三板斧计数器</span></div><div id="storeDetail"><button class="storeDetail">集市霸王·壹300</button> <button class="storeDetail">集市霸王·贰200</button> <button class="storeDetail">集市霸王·叁100</button> <button class="storeDetail">会员商店·肆1100</button> <button class="storeDetail">稳定承载1100</button> <button class="storeDetail">极奢1100</button></div></div></div><div class="secKill" id="secKill"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>秒杀连点器（悬停查看详情）</b></button><div class="panel-content" id="secKillDetail"><div class="left"><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem1Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem2Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem3Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br></div><div class="right"><span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span></div></div></div><div class="chat" id="chat"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>聊天（点击自动输入）</b></button><div class="panel-content chat-body"></div></div><div class="CDK"><button class="panel-header"><span class="triangle"></span> <b>兑换码（点击即兑换）</b></button><div class="panel-content"><div class="function res" id="CDK"><button class="calRes">小麦好帅</button></div></div></div><div class="tianguo"><button class="panel-header"><span class="triangle"></span> <b>统计</b></button><div class="panel-content"><button id="gamerecord" class="calRes" style="text-align:center">战绩胜率统计</button><div id="PlayerTianGuo" style="text-align:center">你的天过次数/总次数</div><div><div id="lottery"><a href="https://goka.top:8080/choujiang?username=" target="_blank" class="calRes" id="choujiang">点击查看祈愿台数据</a></div></div></div></div><button class="panel-header"><span class="triangle"></span> <b>设置</b></button><div class="setting panel-content"><div class="switch-container"><div><span class="explanation">皮肤体验<span class="question-mark" data-tooltip="该功能仅限于体验皮肤&#10;喜欢还请购买支持画师&#10;此功能随时失效！！！">?</span></span> <label class="switch"><input id="skinSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="skinStateButton"><span class="explanation">动态皮肤</span> <label class="switch"><input id="skinStateSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">屏蔽动态<span class="question-mark" data-tooltip="屏蔽其他人的动态皮肤&#10;电脑卡顿的话可以打开">?</span></span> <label class="switch"><input id="skinStateBlockSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">皮肤壁纸 <span class="question-mark" data-tooltip="打开后进入皮肤详情界面进行设置&#10;可以将动静态皮肤设置为游戏壁纸&#10;也可以把静态皮肤图片保存到本地&#10;不建议与微端自定义背景同时使用">?</span> </span><label class="switch"><input id="skinPaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="paperStateButton"><span class="explanation">全局壁纸<span class="question-mark" data-tooltip="对局外也将背景替换为皮肤壁纸">?</span></span> <label class="switch"><input id="allPaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">山河地图 <span class="question-mark" data-tooltip="提前预测奇遇事件">?</span> </span><label class="switch"><input id="rogueCitySwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div style="display:none"><span class="explanation">金色卡背</span> <label class="switch"><input id="cardBackSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">明牌框框 <span class="question-mark" data-tooltip="明牌展示在武将下面">? </span></span><label class="switch"><input id="seatUISwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">五阶特效 <span class="question-mark" data-tooltip="其他角色显示五阶特效">? </span></span><label class="switch"><input id="generalSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">自动签到 <span class="question-mark" data-tooltip="自动领取打卡签到的奖励">? </span></span><label class="switch"><input id="autoSignSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">跳体验卡 <span class="question-mark" data-tooltip="签到会有体验武将&#10;如领取会污染将池&#10;开启按钮跳过领取&#10;月底记得手动领取">? </span></span><label class="switch"><input id="autoSignSkipSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">领武将包<span class="question-mark" data-tooltip="每天登录，自动领取免费的武将包">?</span></span> <label class="switch"><input id="autoWuJiangSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">公会三敲<span class="question-mark" data-tooltip="每天自动公会三敲&#10;无惧公会长的诫厉">?</span></span> <label class="switch"><input id="autoDrumSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">月卡奖励<span class="question-mark" data-tooltip="自动领取月卡奖励&#10;界小抄先行体验">?</span></span> <label class="switch"><input id="autoYueKaSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">自动砍树<span class="question-mark" data-tooltip="每天登录自动砍树&#10;界小抄先行体验">?</span></span> <label class="switch"><input id="autoKanShuSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">跳过弹窗<span class="question-mark" data-tooltip="跳过领取武将&#10;MVP结算&#10;出货弹窗&#10;老仙特效&#10;加快氪金速度">?</span></span> <label class="switch"><input id="skipWindowSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">击杀特效 <span class="question-mark" data-tooltip="屏蔽击杀特效">? </span></span><label class="switch"><input id="killEffectSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">兑换码&emsp;<span class="question-mark" data-tooltip="开启将显示兑换码通知&#10;且收集您的兑换码兑换">?</span></span> <label class="switch"><input id="CDKNotificationSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">卡牌标签<span class="question-mark" data-tooltip="会在自己手上的卡牌显示标签&#10;明牌：五谷顺手迂志等明牌&#10;新组合：界小抄提示百出的新组合&#10;更多标签在开发中">?</span></span> <label class="switch"><input id="cardLabelSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div></div><div class="width"></div><div class="ACContainer"><textarea class="AC-body" type="text" id="AC" name="AC" required placeholder="点击添加激活码&#13;&#10;当前激活码未激活"></textarea> <button class="AC-head" type="submit" id="ACSubmit">激活</button></div><div style="text-align:center"><a href="https://afdian.com/@yimadaO_o" target="_blank">开发不易 如您喜欢 不妨支持小抄</a><div class="width"></div><a href="https://qm.qq.com/q/PBA8Mt4rCI" target="_blank">加群一起玩</a><div class="width"></div><a href="https://support.qq.com/products/664780/" target="_blank">提需求</a><div class="width"></div><a href="https://greasyfork.org/zh-CN/scripts/448004-%E4%B8%89%E5%9B%BD%E6%9D%80%E6%89%93%E5%B0%8F%E6%8A%84/versions" target="_blank">查看历史更新</a><div class="width"></div><div class="uuid id" id="uuid">id：</div><div class="width"></div><div class="uuid nickName" id="nickName">昵称：</div><div class="width"></div><div class="uuid guildID" id="guildID">公会数字ID：</div><div class="width"></div><div class="width"></div></div></div><script><\/script></div>`;let Ye=null;const at=" "+"2.9.44.5".replace(/^2\.9\./,""),Mi=`
跳过弹窗增加游戏结算和MVP结算弹窗；
【界小抄】；
修复因为游戏结算和MVP结算弹窗导致酒馆挂机失效的问题；
`.replace(/；/g,"<br>");var xn,yn;(yn=(xn=document.getElementById("createSkinIframeSource"))==null?void 0:xn.contentWindow)==null||yn.document;function Pi(){return window.WDVerSion="1.0.0",window.padding=se.padding||0,window.addEventListener("resize",_n),new Promise((t,e)=>{function n(){return new Promise(i=>{function o(){var r;typeof JSZipUtils<"u"&&typeof CtrUtil<"u"&&typeof((r=CtrUtil==null?void 0:CtrUtil.Ctr)==null?void 0:r.Ofb_Dec)<"u"&&typeof SystemContext<"u"&&document.getElementById("bgDiv")?Pn(!0).then(i):setTimeout(o,1e3);}o();})}Promise.all([n()]).then(t).catch(e);})}function ji(){var t,e,n,i;return window.removeEventListener("resize",_n),window.removeEventListener("resize",Mn),window.removeEventListener("SGSresize",Nn),(t=document.getElementById("seatUI"))==null||t.remove(),(e=document.getElementById("rogueUI"))==null||e.remove(),(n=document.getElementById("cusBGDiv"))==null||n.remove(),(i=document.getElementById("createIframe"))==null||i.remove(),w.isFrameAdd=!1,!0}function _n(){window.innerWidth=document.documentElement.clientWidth-window.padding;}function Nn(){window.dispatchEvent(new Event("resize"));}let ut;function Mn(){ut&&clearTimeout(ut),ut=setTimeout(()=>{qi(),ut=null;},500);}async function Pn(t=!1){var e,n,i,o,r;if(t&&((e=document.getElementById("seatUI"))==null||e.remove(),(n=document.getElementById("rogueUI"))==null||n.remove(),(i=document.getElementById("cusBGDiv"))==null||i.remove(),(o=document.getElementById("createIframe"))==null||o.remove(),w.isFrameAdd=!1),!w.isFrameAdd){window.addEventListener("resize",Mn),SystemContext._gameScreenType=SystemContext.gameScreenType,SystemContext._gameScale=SystemContext.gameScale,Object.defineProperty(SystemContext,"gameScreenType",{get:function(){return this._gameScreenType},set:function(s){this._gameScreenType!==s&&(this._gameScreenType=s,window.dispatchEvent(new Event("SGSresize")));}}),Object.defineProperty(SystemContext,"gameScale",{get:function(){return this._gameScale},set:function(s){this._gameScale!==s&&(this._gameScale=s,window.dispatchEvent(new Event("SGSresize")));}}),window.addEventListener("SGSresize",Nn);try{document.getElementById("bgDiv").firstElementChild.draggable=!1,(r=document.querySelector("link[rel=stylesheet]"))==null||r.remove();}catch{}return Qi(),Hi(),Vi(),w.isFrameAdd=!0,Gi(!0)}}function Hi(){var t=document.getElementById("bgDiv");if(t){var e=document.createElement("div");e.id="cusBGDiv",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.zIndex="0",e.style.pointerEvents="none";var n=document.createElement("video");n.className="bg-ani",n.id="sgsBgVideo",n.autoplay=!0,n.loop=!0,n.muted=!0,n.preload="auto",n.style.setProperty("object-fit","fill","important");var i=document.createElement("img");i.className="bg-ani",i.id="sgsBgIMG",i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i.style.zIndex="1",i.style.position="absolute",i.style.top="0",i.style.left="0",e.appendChild(n),e.appendChild(i),t.appendChild(e),window.dispatchEvent(new Event("resize"));}}function qi(){if(!SystemContext)return;V.width=SystemContext.gameWidth*SystemContext.gameScale>>0,V.height=SystemContext.gameHeight*SystemContext.gameScale>>0,V.scale=SystemContext.gameScale,V.seatUIs&&V.seatUIs.length>0&&(jn(),yt());let t={width:(SystemContext.gameWidth*SystemContext.gameScale>>0)/window.devicePixelRatio,height:(SystemContext.gameHeight*SystemContext.gameScale>>0)/window.devicePixelRatio};se.padding&&document.getElementById("createIframe")?(document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px",document.getElementById("createIframe").style.height="100%",document.getElementById("createIframe").style.right="0px",document.getElementById("createIframe").style.top="0px"):document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px";let e=document.getElementById("cusBGDiv"),n=document.getElementById("sgsBgVideo"),i=document.getElementById("sgsBgIMG"),o=document.getElementById("seatUI"),r=document.getElementById("rogueUI"),s=((window.innerHeight*window.devicePixelRatio-SystemContext.gameScale*SystemContext.gameHeight)/(2*window.devicePixelRatio)+SystemContext.gameScale*SystemContext.gameHeight/2)/window.devicePixelRatio;e&&(e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.left=window.innerWidth/2+"px",e.style.top=s+"px"),n.width=t.width,n.height=t.height,n.style.left=window.innerWidth/2+"px",n.style.top=s+"px",i.width=t.width,i.height=t.height,o.style.width=`${t.width}px`,o.style.height=`${t.height}px`,o.style.left=window.innerWidth/2+"px",o.style.top=s+"px",r.style.width=`${t.width}px`,r.style.height=`${t.height}px`,r.style.left=window.innerWidth/2+"px",r.style.top=s+"px",V.centerX=window.innerWidth>t.width?t.width/2:window.innerWidth/2,V.centerY=t.height/2;}function jn(){const t={ScaledHeight:V.selfSeatUiUnscaledHeight*V.scale};let e=V.unscaledWidth*V.scale,n=V.unscaledHeight*V.scale;V.ScaleWidth=e,V.ScaleHeight=n;let i=V.height,o=V.width;var r=t.ScaledHeight,s=0,a=0,c=V.seatUIs.length;if(c!=1){s=e,a=n;var u=[];u=V.seatUIs;var f=u.length-1,l=0,d=0,p=0;f<3?d=f:f==3?d=1:f==4||f==6?d=2:(f==5||f==7)&&(d=3),l=f-d>>1,p=f-l-d,_.isDouDiZhu&&(V.seatUIs[0].actualSeatID==2?(d=1,l=1):V.seatUIs[0].actualSeatID==3&&(d=1,p=1)),_.isShanHeTu&&c==3&&V.friendGeneral==1&&(d=1,p=1);var g=1,C,S,y=0,A=0,Y=0,v=0,D=V.rightBarWidth*V.scale,F=0;if(l>0){var G=s,K=a*l;for(Y=(i-r-K)*.25>>0,V.verticalGap=Y,K+=(l-1)*Y,C=g+l,y=o-G-V.paddingRight*V.scale-D-F,A=(i-r-K-V.paddingTop*V.scale-V.paddingBottom>>1)+(V.paddingTop+10)*V.scale+K+V.leftRightTop;g<C;g+=1)S=u[g],A-=n,S.posX=(y-5>>0)/window.devicePixelRatio,S.posY=(A+n>>0)/window.devicePixelRatio,S.DisplayLocation="Right",A-=Y;}if(d>0){var ee=s*d;for(v=(o-D-ee)*.07>>0,V.horizontalGap=v,ee+=(d-1)*v,C=g+d,y=(o-ee-D)/2+ee+(o<=1600?V.paddingLeftTopExtra:0),A=(V.paddingTop+10)*V.scale;g<C;g+=1)S=u[g],y-=e,S.posX=(y>>0)/window.devicePixelRatio,S.posY=(A+n>>0)/window.devicePixelRatio,S.DisplayLocation="Top",y-=v;}var he=0;if(p>0){var xe=a*p;for(Y=(i-r-xe)*.25>>0,xe+=(p-1)*Y,C=g+p,y=V.paddingLeft*V.scale,A=(i-r-xe-V.paddingTop*V.scale-V.paddingBottom>>1)+(V.paddingTop+10)*V.scale+V.leftRightTop;g<C;g+=1)S=u[g],S&&(S.DisplayLocation="Left",S.posX=(y+he>>0)/window.devicePixelRatio,S.posY=(A+n>>0)/window.devicePixelRatio),A+=a+Y;}}}function Ht(t){if(V.seatUIs=[],yt(),t===null)return;let e=_.sequence(_.mySeats[0]);V.seatUIs=e.map(n=>({actualSeatID:_.getOrder(n)+1})),jn(),yt();}function Ui(){document.getElementById("sgsBgIMG").src="https://web.sanguosha.com/10/pc/res/assets/runtime/general/maxBig/604701.png",setTimeout(function(){document.getElementById("sgsBgIMG").src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";},2e4);}function Fi(){var t=document.createElement("div");t.id="sidebarHint",t.innerText="拖到这里变为变为侧边栏，再次拖动取消侧边栏",document.body.appendChild(t);}function Qi(){var t=document.createElement("div");t.id="seatUI",t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.pointerEvents="none",t.style.display="";var e=document.createElement("div");e.id="rogueUI",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.pointerEvents="none",e.style.display="",se.seatUISwitch?t.style.display="block":(t.style.display="none",document.querySelectorAll("#seatUI > *:not(.city)").forEach(n=>n.style.display="none")),document.body.appendChild(t),document.body.appendChild(e);}function zi(){for(let t=0;t<=7;t++){let e="or"+(t+1);document.getElementById(e).style.display="block";}}function Ki(t){for(let e=7;e>=t;e--){let n="or"+(e+1);document.getElementById(n).style.display="none";}}function Vi(){let t=document.getElementById("createIframe");if(!t){t=document.createElement("div"),t.id="createIframe",t.id="createIframe",t.className="createIframe",t.style.position="fixed",t.style.overflow="hidden",t.style.resize="vertical",t.style.top="31px",t.style.right="155px",t.style.width="230px",t.style.height="500px",t.style.zIndex="10000000000",t.style.display="flex",t.style.flexDirection="column",t.style.color="#f2de9c",t.style.background="rgb(35, 32, 29)",t.style.userSelect="none",t.style.textAlign="left",t.style.transition="height 200ms",t.style.borderRadius="8px",t.style.transformOrigin="top right",t.style.transform="translate(0px, 0px)";var e=document.createElement("p");e.id="header",e.className="header",e.style.margin="1px",e.style.userSelect="none",e.style.cursor="grab",e.style.display="flex",e.style.alignItems="center",e.style.fontSize="20px",e.style.borderRadius="5px";var n=document.createElement("span");n.id="title",n.style="margin-right: auto;",n.innerText="三国杀打小抄"+at,t.appendChild(e),t.onmouseover=function(){document.querySelectorAll("div.city").forEach(u=>{u.classList.remove("hide"),u.classList.add("show");});},t.onmouseout=function(){document.querySelectorAll("div.city").forEach(u=>{u.classList.remove("show"),u.classList.add("hide");});};var i=document.createElement("button");i.innerText="-",i.id="toggle-me",i.style="text-align: center;color: #f2de9c;background: rgb(35, 32, 29);border-radius: 6px;width: 26px;height: 26px;border: 1px solid rgb(212, 212, 162);cursor: pointer;user-select: none;background: rgb(107, 30, 30);display: flex;align-items: center;justify-content: center;margin: 1px;font-size: 20px;",i.type="button",i.addEventListener("mouseover",function(){i.style.backgroundColor="rgb(130, 30, 30)";}),i.addEventListener("mouseout",function(){i.style.backgroundColor="rgb(107, 30, 30)";}),e.appendChild(n),e.appendChild(i),localStorage.getItem("DXCVersion")!=at&&(ze(`小抄已经更新到${at}<br>${Mi}`,"acTooltip",3e4,"green"),localStorage.setItem("DXCVersion",at)),document.body.appendChild(t),Ye=document.createElement("div"),Ye.style="border: none;width: 230px;height: 100%;margin: 0px;overflow-y: auto;overflow-x: hidden;",Ye.id="iframe-source",t.append(Ye),Ye.innerHTML=Ni,Ye.querySelectorAll("script").forEach(c=>{const u=document.createElement("script");c.src?(u.src=c.src,u.async=c.async):u.textContent=c.textContent,document.body.appendChild(u),c.remove();});const r=document.querySelectorAll('input[id$="Switch"]'),s=document.querySelectorAll(".slider");r.forEach((c,u)=>{const f=s[u];c.addEventListener("change",l=>{const d=l.target.checked;try{gsap.to(f,{duration:.4,ease:"power2.inOut",css:{"--slider-position":d?"30px":"2px"},onStart:()=>{gsap.to(f,{scale:1.1,duration:.2,ease:"power1.inOut"});},onComplete:()=>{gsap.to(f,{scale:1,duration:.2,ease:"power1.inOut"});}}),gsap.to(f,{duration:.4,ease:"power2.inOut",boxShadow:d?"0 0 15px rgba(255, 204, 0, 1)":"0 0 0 rgba(0, 0, 0, 0)",background:d?"linear-gradient(to right, #ff7b54, #ffcc00)":"rgb(35, 32, 29)"});}catch(p){console.error("GSAP animation failed:",p);}});}),document.querySelectorAll(".panel-header").forEach(c=>{c.addEventListener("click",function(){const u=this.nextElementSibling;this.classList.toggle("active"),u.style.maxHeight?u.style.maxHeight=null:u.style.maxHeight=u.scrollHeight+"px";const f=new MutationObserver(()=>{u.style.maxHeight&&(u.style.maxHeight=u.scrollHeight+"px");});f.observe(u,{childList:!0,subtree:!0,characterData:!0}),u.style.maxHeight||f.disconnect();});}),document.querySelectorAll(".laya-header")[0].click(),document.querySelectorAll(".question-mark").forEach(function(c){c.addEventListener("mouseenter",function(u){let f=document.createElement("div");f.classList.add("tooltip","top"),f.textContent=c.getAttribute("data-tooltip"),document.body.appendChild(f);const l=c.getBoundingClientRect();f.style.left=`${l.left+window.scrollX+l.width/2-f.offsetWidth}px`,f.style.top=`${l.top+window.scrollY-f.offsetHeight-8}px`,f.classList.add("visible"),c.addEventListener("mouseleave",function(){f.classList.remove("visible"),setTimeout(()=>{f.remove();},100);});});});}Fi(),Ji(),$i(),bi();}function Ji(){var t=document.getElementById("toggle-me");t.onclick=function(){w.closeIframe=!w.closeIframe,w.closeIframe?(document.getElementById("createIframe").style.top="31px",document.getElementById("createIframe").style.right="155px",document.getElementById("iframe-source").style.display="none",t.innerText="+",document.getElementById("createIframe").style.height="30px",document.getElementById("createIframe").style.opacity="0.6",document.getElementById("createIframe").style.width="75px",document.getElementById("title").innerText="小抄",document.getElementById("createIframe").style.resize="none",se.padding&&(se.padding=0,window.dispatchEvent(new Event("resize")),fn=0,hn=0,document.getElementById("createIframe").style.transform=`translate(${fn}px, ${hn}px)`)):(document.getElementById("iframe-source").style.display="block",t.innerText="-",document.getElementById("createIframe").style.height="500px",document.getElementById("createIframe").style.opacity="1",document.getElementById("createIframe").style.width="230px",document.getElementById("title").innerText="三国杀打小抄"+at,document.getElementById("createIframe").style.resize="vertical");},document.getElementById("autoInviteSwitch").addEventListener("click",n=>{var o;if(n.target.checked){var i=(o=document.getElementById("inviteName"))==null?void 0:o.value;typeof i=="string"&&i.length!==0&&(w.inviteName=i,$e("INVITE_NAME",w.inviteName),ue(`为目前机器所有账号绑定助力${w.inviteName}，如需更改/删除，更改/删除昵称重新打开开关`)),Wn(w.inviteName.trim()||w.nickname);}else Nt("INVITE_NAME");}),document.getElementById("guanxing").onmousedown=function(){const n=dn(Ct(P.gxjson),"myWindowGuanXing","观星");un(n);},document.getElementById("gamerecord").onclick=async function(){for(this.disabled=!0,Mt(w.userID);Be.req;)await pe(500);this.disabled=!1,w.v&&await ii();const n=dn(Fn(JSON.stringify(Be)),"myWindowGameRecord","游戏记录");un(n);},document.getElementById("mizhu").onmousedown=function(){let n=document.querySelectorAll(".mizhu");_.mySeats.length<=1?(n.forEach(i=>i.style.display="none"),on(Array.from(te.shoupai(_.mySeats[0]),i=>re[i].number))):_.mySeats.forEach((i,o)=>{n[o].style.display="block",n[o].innerText=_.name(i),n[o].onclick=()=>{on(Array.from(te.shoupai(i),r=>re[r].number));},o==0&&n[o].click();});};function e(n,i,a){var c,u,f,l;var r=n.target,s=r.checked,a=r.id;if(!(a==="autoBotSwitch"||a==="autoHGSwitch"))if(se[a]=s,a=="skinSwitch")document.getElementById("skinStateButton").style.display=s?"block":"none";else if(a=="seatUISwitch")document.getElementById("seatUI").style.display=s?"block":"none";else if(a=="skinPaperSwitch"){let d=(u=(c=L.find("SceneLayer",null))==null?void 0:c.constructor)==null?void 0:u.name;document.getElementById("paperStateButton").style.display=s?"block":"none",dt.switch(s&&(Ke.includes(d)||se.allPaperSwitch&&!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(d)));}else if(a=="allPaperSwitch"){let d=(l=(f=L.find("SceneLayer",null))==null?void 0:f.constructor)==null?void 0:l.name;dt.switch(s&&!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(d)||Ke.includes(d));}else a=="rogueCitySwitch"&&Tt(s?V.cities:"");}if(window.padding==0){console.warn("closesidebar");var t=document.getElementById("toggle-me");console.warn("toggle"),t.click();}window.dispatchEvent(new Event("resize")),document.querySelectorAll(".switch").forEach(n=>n.addEventListener("change",e)),document.getElementById("ACSubmit").onclick=wn,Zi();}function Zi(){let t=document.getElementById("openStore");t.onclick=function(){L.class("GameEventDispatcher").ShowWindow("RogueJiShiWindow"),ze("满足以下条件购买技能或者装备可跳关<br>1、已经进入对局<br>2、商店有可替换的装备/技能<br>例如身上有麒麟弓，商店有贯石斧<br>购买完成之后，投降之后会显示替换提示<br>","acTooltip",1e4,"green",!1);};}function dn(t,e,n){let i=document.getElementById("myWindow"+e);if(i)return i.style.display="block",i;const o=document.createElement("div");o.classList.add("window"),o.id=e;const r=document.createElement("div");r.classList.add("window-header");const s=document.createElement("div");s.classList.add("title"),s.innerText=n;const a=document.createElement("div");a.classList.add("controls");const c=document.createElement("button");c.innerText="⬜";const u=document.createElement("button");u.innerText="❌",a.appendChild(c),a.appendChild(u),r.appendChild(s),r.appendChild(a);const f=document.createElement("iframe");return f.classList.add("window-content"),f.srcdoc=`
    <html>
      <head><meta charset="utf-8" /><title>${e}</title></head>
      <body>${t}</body>
    </html>
  `,o.appendChild(r),o.appendChild(f),document.body.appendChild(o),{windowDiv:o,maximizeBtn:c,closeBtn:u}}function un(t){const{windowDiv:e,maximizeBtn:n,closeBtn:i}=t;let o=!1;n.addEventListener("click",()=>{o?e.classList.remove("fullscreen"):e.classList.add("fullscreen"),o=!o;}),i.addEventListener("click",()=>{e.style.display="none";});}let fn=0,hn=0;function $i(){const t=document.getElementById("header"),e=document.getElementById("createIframe"),n=document.getElementById("sidebarHint");let i=!1,o=0,r=0,s=0,a=0,c=!1;const u=d=>{t.style.cursor="grabbing",i=!0,o=d.clientX||d.touches[0].clientX,r=d.clientY||d.touches[0].clientY,e.style.userSelect="none",e.style.willChange="transform",document.addEventListener("mousemove",f),document.addEventListener("mouseup",l),document.addEventListener("touchmove",f),document.addEventListener("touchend",l);};t.addEventListener("mousedown",u),t.addEventListener("touchstart",u);function f(d){if(!i)return;n.style.display="flex";const p=d.clientX||d.touches[0].clientX,g=d.clientY||d.touches[0].clientY,C=p-o,S=g-r;s+=C,a+=S,se.padding&&(se.padding=0,e.style.height="500px",window.dispatchEvent(new Event("resize"))),c||(c=!0,requestAnimationFrame(()=>{e.style.transform=`translate(${s}px, ${a}px)`,c=!1;})),window.innerWidth-p<25?n.style.backgroundColor="rgba(55, 40, 32, 1)":n.style.backgroundColor="rgba(55, 40, 32, 0.8)",o=p,r=g;}function l(d){n.style.display="none",t.style.cursor="grab",i=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",l),e.style.willChange="auto",window.innerWidth-(d.clientX||d.touches[0].clientX)<25&&t.id==="header"&&(se.padding||(w.closeIframe&&document.getElementById("toggle-me").click(),se.padding=232,window.dispatchEvent(new Event("resize")),s=0,a=0,e.style.transform=`translate(${s}px, ${a}px)`));}}function _t(t,e){let{name:n,number:i,color:o}=re[t??0];if(t!==void 0&&(!t||!n||me.name[n]===void 0))return;let r=te.unknown;(t?[n]:Object.keys(me.name)).forEach(s=>{let a=r.filter(u=>me.name[s].has(u)).length,c=document.getElementById(s);c.textContent=a>1?a+s:s,c.disabled=a<=0;}),(t?[5,6].filter(s=>me.color[s].has(t)).concat(o):[1,2,3,4,5,6]).forEach(s=>{var u;let a=r.filter(f=>me.color[s].has(f)).length,c=document.getElementById(["","heart","club","spade","diamond","hongsha","heisha"][s]);c.innerHTML=(u=c.innerHTML)==null?void 0:u.replace(/-?[0-9]+/,String(a));}),t?me.query.has(t)&&me[t].plot(e==0?0:1):me.draw();}function Xi(){for(let t=1;t<=3;t++)document.getElementById("type"+t).innerHTML="";for(let t of document.getElementsByClassName("order-body"))t.innerHTML="",t.title="一二三四五六七八"[t.id.slice(-1)]??t.title;for(let t in me.name){let e=document.getElementById("type"+re[[...me.name[t]][0]].type),n=document.createElement("button");n.id=t,n.className="cardType",n.innerText=t,n.onclick=()=>{me.queryone("name",t);},e.appendChild(n);}V.seatUIs=[],yt(),Dt();}var Yi=[1562902854,1678425373];const pn=function(){const t=typeof window.requestIdleCallback=="function";return console.warn("Use IdleCallback",t),function(e,n=500){if(t){const i=window.requestIdleCallback(e),o=setTimeout(()=>{window.cancelIdleCallback(i),e();},n);return ()=>clearTimeout(o)}else return setTimeout(e,0)}}();jt(t=>{const e=w.recGoods[t.secId];if(e&&e.length>0){for(let n of e)kn(t.secId,n.GoodsBaseID,t.openTime,t.levelId,n.ChangeCount);delete w.recGoods[t.secId];}},6e4);function es(t){var o,r,s,a,c,u,f,l,d,p,g,C,S,y,A,Y,v,D,F,G,K,ee,he,xe,be,I,O,Q,X,h,m,W;try{if(!t)return;if((o=t.startsWith)!=null&&o.call(t,"socket连接关闭")){sn({content:"您的二次密码认证错误，请稍后再试"},"确定");return}if((r=t.startsWith)!=null&&r.call(t,"--checkPlayChatFast msg=INFO:")){let b=atob(t.slice(29,t.indexOf(" soundUrl",29))),[R,B,N,z]=b.split(":").map($=>isNaN(Number($))?$:Number($));if(console.warn(b,{[R]:B,[N]:z}),R=="mainSeatID"){let $=L.order.indexOf(B);$>=0&&(L.order.splice($,1),L.order.push(B)),de(()=>_.mySeats[0]>=0).then(()=>{var q,ge,Le,qe;((qe=(Le=(ge=(q=L.gamescene)==null?void 0:q.seatContainer)==null?void 0:ge.selfSeatUi)==null?void 0:Le.seat)==null?void 0:qe[N])==z&&L.chat(`sub-SeatID:${_.mySeats[0]}  :${N}:${z}`,"INFO");});}else if(R="sub-SeatID"){let $=L.order.indexOf(B);$>=0&&(L.order.splice($,1),L.order.splice(-1,0,B));}}else if((s=t.startsWith)!=null&&s.call(t,"SwitchScene"))pn(()=>{var R,B;let b=L.scene=t.slice(t.lastIndexOf("-")+1);U.end(Ke.includes(b)),se.skinPaperSwitch&&dt.switch(se.allPaperSwitch?!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(b):Ke.includes(b)),b=="TableScene"?(fi(),w.autoBotSwitch&&ne.delay("auto",()=>Qe(()=>w.autoBotSwitch&&L.readyStart(),20),8e3)):b=="HallScene"?(w.autoBotSwitch===!0||w.autoBotSwitch===28)&&(ue("5秒后开始酒馆自动挂机"),ne.delay("auto",()=>Qe(()=>(w.autoBotSwitch===!0||w.autoBotSwitch===28)&&L.newRoom(),10,1e3),5e3)):["NewPaiWeiScene","DouDiZhu2023Scene","RogueLike1v1Scene","RogueLikeBigMapScene"].some(N=>t.endsWith(N))&&((w.autoBotSwitch===!0||w.autoBotSwitch===28)&&((R=document.getElementById("autoBotSwitch"))==null||R.click()),(w.autoBotSwitch===9||w.autoBotSwitch===29)&&((B=document.getElementById("autoHGSwitch"))==null||B.click()));});else if(se.skipWindowSwitch&&["TianShuWindow","RogueLike1v1ZhanJiWindow","GameResultWindow","GeneralOpenResultWindow","GetPropSpecialWindow","GameMvpWindow","SkinOpenResultWindowNew","OldbackOneClickDrawAwdWin","VersionNoticeWindow","AdPushWindow"].includes(t)){let b=t=="GetPropSpecialWindow"?5:1,R=t=="TianShuWindow"?B=>{var N;return (B==null?void 0:B.type)==6?(B.type=0,(N=B.Close)==null?void 0:N.call(B)):"false"}:t=="GetPropSpecialWindow"?B=>{var N,z;return (N=B==null?void 0:B.Hide)==null||N.call(B),(z=B==null?void 0:B.Close)==null?void 0:z.call(B)}:t=="GameResultWindow"?B=>pe(500).then(()=>{var N;return (N=B==null?void 0:B.laterClose)==null?void 0:N.call(B)}):t=="RogueLike1v1ZhanJiWindow"?B=>pe(500).then(()=>{var N;return (N=B==null?void 0:B.onClickClose)==null?void 0:N.call(B)}):t=="AdPushWindow"?B=>(B==null||B.curViewList.forEach(N=>{var z;return (z=N==null?void 0:N.closeClicker)==null?void 0:z.call(N)}),ue("小抄已经为你跳过广告和祈愿台出货播报")):B=>{var N;return (N=(B==null?void 0:B.laterClose)??(B==null?void 0:B.Close))==null?void 0:N.bind(B)()};Qe(()=>de(()=>L.find(null,t),10,200*b).then(B=>Array.isArray(B)?B.every(R):B!=null&&B.Close?R(B):"done"),b,1e3);}if(w.autoBotSwitch&&["GameResultWindow","GameMvpWindow"].includes(t)){let b=t=="GameResultWindow"?R=>pe(500).then(()=>{var B;return (B=R==null?void 0:R.laterClose)==null?void 0:B.call(R)}):R=>{var B;return (B=(R==null?void 0:R.laterClose)??(R==null?void 0:R.Close))==null?void 0:B.bind(R)()};Qe(()=>de(()=>L.find(null,t),10,200).then(R=>Array.isArray(R)?R.every(b):R!=null&&R.Close?b(R):"done"),1,1e3);}else if((a=t.endsWith)!=null&&a.call(t,"View"))t=="VuplexWebView"&&ne.trigger("VuplexWebView");else if((c=t.endsWith)!=null&&c.call(t,"Window"))t=="MailWindow"?Pt():t=="ChangeSkinWindow"?se.skinSwitch&&de(()=>L.find("WindowLayer","ChangeSkinWindow","selectView"),50,100).then(b=>{var B,N,z,$;if(!((B=b==null?void 0:b.itemList)!=null&&B.length))return;let R=[(N=b.generalInfo)==null?void 0:N.Id,...((z=b.generalInfo)==null?void 0:z.GeneralSkinParentIDs)||[]];(($=b==null?void 0:b.itemList)==null?void 0:$.length)>1&&b.itemList.forEach(q=>{q.dynamicState=R.includes(q.SkinID/100>>0)?q.hasSkin?q.dynamicState?-1:-2:-3:-4,q.hasSkin=q.bg.mouseEnabled=!0,q.blackbg.visible=q.isUsing=!1,q.timeBg.visible=q.composeBg.visible=q.composeIcon.visible=q.composeTxt1.visible=q.composeTxt2.visible=q.composeTxt.visible=q.timeLimiteTxt.visible=!1;});}):t=="NS2023ComposeWindow"?hi():t=="SkinInfoWindow"?se.skinPaperSwitch&&ci():t=="BlessNewWindow"?$t():t=="SelectSkinWindow"?w.autoBotSwitch!=9&&de(()=>L.find("WindowLayer",t)).then(b=>b==null?void 0:b.Close()):t=="SelectCardWindow"?L.flag===!0&&ai(!0,!0):t=="WuGuFengDengWindow"&&L.flag===!0?L.wugu():["SelectGeneralWindow","SelectGeneralHappyWindow","SelectCountryWarGeneralWindow"].includes(t)&&w.autoBotSwitch&&setTimeout(()=>{de(()=>L.find("WindowLayer",t)).then(async b=>{var N,z;if(!((N=b==null?void 0:b.generalUis)!=null&&N.length))return;if(t=="SelectCountryWarGeneralWindow"){for(let $ of b.generalUis)$!=null&&$.Card&&($!=null&&$.CanSelect)&&(b.onClickGeneralCard($),await pe(1e3));await pe(1e3),(z=b.confirmBtnEvent)==null||z.call(b);return}let R=-1,B=null;b.generalUis.some($=>{var ge;if($!=null&&$.dianJiangSk)return B=$;let q=((ge=$==null?void 0:$.generalInfo)==null?void 0:ge.quality)||0;q>R&&(R=q,B=$);}),B==null||B.sureBtnClick(),w.autoBotSwitch!=9&&setTimeout(()=>B==null?void 0:B.sureBtnClick(),500);});},3e3);else if(t.className===void 0&&!["ClientGeneralSkinReq"].includes((u=t.constructor)==null?void 0:u.name))return;se.killEffectSwitch&&t.className=="CClientGameRewardPointNTF"&&(t.Type=0);let{ProtoObj:x,className:k,SeatID:E,SrcSeatID:j,targetSeatID:J,SpellID:T,Param:oe,Params:M,Datas:le,DataCount:ye,CardCount:ce,CardIDs:H,FromID:we,FromZone:fe,FromPosition:ve,FromZoneParam:qt,ToID:je,ToZone:ae,ToPosition:wt,ToZoneParam:Ut,MoveType:He,Type:Re}=t;if(k||(k=(f=t.constructor)==null?void 0:f.name),!w.userID&&t.userID&&["ClientLoginRep","ClientUserDataCounterNtf","ClinetNetSpeedNtf","SmsgUpdateTaskListToClient","ClientGuildMemberChangeNtf"].includes(k)){if(Object.assign(w,{userID:t.userID,nickname:t.Nickname||w.nickname||"",account:t.Account||localStorage.LastUserName||localStorage.SGS_LASTLOGIN_ACCOUNT||localStorage.SGS_LASTLOGIN_ACCOUNT1||w.account||""}),w.UsedGeneralSkinID=Ne(w.account+"::UsedGeneralSkinID",w.UsedGeneralSkinID),Object.assign(dt.res,Ne(w.userID+"::paperRes",{},!0)),ui(),Yi.includes(w.userID))return;Promise.all([Pn(),de(()=>{var ge;const b=L.get("QldjChooseRuleWindow");let{clientId:R,nickname:B,guildID:N,guildName:z,Level:$,vipLevel:q}=((ge=b==null?void 0:b.seat)==null?void 0:ge.playerInfo)||{};return L.del("QldjChooseRuleWindow"),R!=w.userID||!B||!z&&N?null:(Object.assign(w,{nickname:B,guildID:N,guildName:z,Level:$,vipLevel:q}),B)},30,1e3)]).then(()=>{se.autoSignSwitch&&gi(se.autoSignSkipSwitch),pi(w.userID);let b=document.getElementById("uuid");b.innerText="id："+w.userID,b.onclick=function(){Ze(w.userID,!1),b.innerText="复制成功",setTimeout(()=>{b.textContent="id："+w.userID;},"500");};let R=document.getElementById("nickName");R.innerText="昵称："+w.nickname,R.onclick=function(){Ze(w.nickname,!1),R.innerText="复制成功",setTimeout(()=>{R.textContent="昵称："+w.nickname;},"500");};let B=document.getElementById("guildID");B.innerText="公会数字ID："+w.guildID,Vn(),document.getElementById("inviteName").setAttribute("placeholder",w.nickname||""),Ne("INVITE_NAME")&&Ne("INVITE_NAME")!=w.Nickname&&(document.getElementById("inviteName").value=Ne("INVITE_NAME"));async function N(z=2e4){var ge;let q=0;for(;!w.nickname||!w.userID;)if(await new Promise(Le=>setTimeout(Le,2e3)),q+=2e3,q>=z){ue("没办法获取到昵称用于助力 请重新登录");return}Wn(((ge=w.inviteName)==null?void 0:ge.trim())||w.nickname);}Date.now()<new Date("2024-12-15")&&se.autoInviteSwitch&&N();});}if(k=="ClientGeneralSkinRep"){_.mySeats[0]===void 0&&Re==5&&t.ClientID<10&&(_.setMyID(t.ClientID),Ht());let b=t.GeneralSkinList[0],R=_.find(_.mySeats[0],b.GeneralID,!0);if(b.GeneralID!=R&&se.skinStateBlockSwitch&&(b.state=0),se.skinSwitch&&R){if([46,479].includes(b.GeneralID)&&Ui(),w.UsedGeneralSkinID.UsedGeneralSkinID[R]){let[N,z]=String(w.UsedGeneralSkinID.UsedGeneralSkinID[R]).split("_").map($=>parseInt($));b.SkinID=N,b.skin_type=z||0;}b.state=se.skinStateSwitch?1:0;const B=L.class("GeneralSkinManager");(B.SelfSkinList.every(({baseInfo:N})=>N.firstUsedEffect!=b.SkinID)||(l=B._GetOnlineSKinList)!=null&&l.call(B,b.GeneralID).every(({skinID:N})=>N!=b.SkinID))&&requestAnimationFrame(()=>{B.generalSkinOwnHT[b.GeneralID]=0;});}}else if(k=="ClientGeneralSkinReq"){if(se.skinSwitch){let{RealGeneralID:b,SkinID:R,state:B}=t.SkinItem;if(!(B<0))return;B<-2&&(t.SkinItem.SkinID=0),t.SkinItem.state=B<-1?0:1;let[N,z]=String(w.UsedGeneralSkinID.UsedGeneralSkinID[b]).split("_").map(Number);if(N==R)if(R in P.skinSP)R=R+"_"+P.skinSP[R][(z||1)%P.skinSP[R].length];else return;w.UsedGeneralSkinID.UsedGeneralSkinID[b]=R,$e(w.account+"::UsedGeneralSkinID",w.UsedGeneralSkinID);}}else if(k!="MsgReconnectGame"){if(k=="ClientOfficerInfoRep")w.curOfficerLv=t.curOfficerLv;else if(k=="decodeSSCChatmsgNtf")x.scene==11&&(x.scene=2);else if(k=="ClientRoleGeneralStarRep")se.generalSwitch&&(t.Star>=0&&(t.Star=4),x.star>=0&&(x.star=4));else if(k=="ClientGameRecordInfoRep")(x==null?void 0:x.query_uid)==w.userID&&[26,35,44,5,7].includes(x==null?void 0:x.id)&&((d=Be==null?void 0:Be.req)==null||d.delete(x.id),((p=Be.req)==null?void 0:p.size)==0&&delete Be.req,(g=x==null?void 0:x.all_record)!=null&&g.length&&ni(x.id||0,x.all_record));else if(k=="DbsCcUserGoodshintNtf")Re==2010&&typeof t.GoodsList=="object"&&(w.goods=yi(w.goods,t.GoodsList)),(Re==58||Re==65)&&ne.delay("tongxin",()=>$t(),5e3),Re==5&&typeof t.GoodsList=="object"&&(w.CDKgoods=t.GoodsList);else if(k=="decodeClientSecretInfoRep"){if(Object.keys(w.goods).length>0){P.currentSec=x.secId;for(let b of w.goods)On(P.currentSec,b.GoodsBaseID,b.ChangeCount,x.openTime),(b.GoodsBaseID==11180||An(b.GoodsBaseID))&&kn(x.secId,b.GoodsBaseID,x.openTime,x.levelId,b.ChangeCount);}w.goods=[];}else if(k=="ClientPickupgiftbagRep"&&se.CDKNotificationSwitch){if(t.CDKey!=""&&!/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]+$/.test(t.CDKey)&&(t.Result==1||t.Result==2)){for(let b of P.CDKDict)if(_i(b.dataInfo,w.CDKgoods)){b.cdk=t.CDKey,si(b);break}}}else if(k=="decodeClientTavernInfoRep"){let b=((C=x==null?void 0:x.tavern_info)==null?void 0:C.day_quest_finished_cnt)??0;if(w.autoBotStatus=30-b,w.autoBotInfinite||document.querySelector(".status").style.setProperty("--bot-status",`"${w.autoBotStatus.toString().padStart(2,"0")}"`),b>=30){let R=document.getElementById("autoBotSwitch");R!=null&&R.checked&&!w.autoBotInfinite&&R.click(),ue(`今日已获得亲密度：${b}<br>恭喜你完成任务~`);}else b>0&&ue(`今日已获得亲密度：${b}，还差 ${30-b} 亲密度<br>继续努力吧~`);}else if(k=="MsgHeartAliveRep")ne.sync(t);else if(k=="ClientSecKillInfoRep")Di(t.Data);else if(k=="decodeRogueLikeDataSync")Dt(x);else if(k=="ClientActivitysetDataRep")pn(()=>{Dt();});else if(k=="decodeRogueLikeGameOverRep")document.getElementById("chongsheng").innerText="重生是否发动：是";else if(k=="SmsgGamePlayerDead")(w.autoBotSwitch===!0||w.autoBotSwitch===28)&&!w.autoBotInfinite&&E==_.mySeats[0]&&setTimeout(()=>{var b,R,B,N,z;((B=(R=(b=L.gamescene)==null?void 0:b.seatContainer)==null?void 0:R.seatUIs)==null?void 0:B.reduce(($,q,ge,Le)=>{var qe,Ft,Qt,zt,Kt;return $+((qe=q==null?void 0:q.seat)!=null&&qe.figure&&q.seat.figure==Le[0].seat.figure||(zt=(Qt=(Ft=q==null?void 0:q.seat)==null?void 0:Ft.playerInfo)==null?void 0:Qt.showName)!=null&&zt.includes("金")?1:-1)*((Kt=q==null?void 0:q.seat)==null?void 0:Kt.currentHp)},0))<0&&((z=(N=L.gamescene)==null?void 0:N.topMenu)==null||z.onClickBack(),sn({title:"退出游戏"},"确定",!0));},1e4);else if(k=="MsgGameDealCharacter"){if(w.userID==1099193522&&typeof Allows<"u"&&typeof Re<"u"&&Re==1){var e=Math.floor(Math.random()*Allows.length+1);document.getElementById("title").innerText="选"+e;}}else if(k=="GsCUpdateRoleDataNtf")_.mySeats[0]===void 0&&t.StateID===58&&(_.setMyID(E),console.warn(k,"游戏人数："+_.size+", 我的座位："+_.mySeats,_.seatIDs));else if(k=="GsCFirstPhaseRole")E!==void 0&&(_.firstID=E,console.warn("先手位置:"+_.firstID));else if(k=="MsgGameRoundNtf")t.isPassed&&(U.isPassed=t.isPassed);else if(!(k=="MsgGameOver"||k=="ClientRecommendShopItemRep"||k=="ClientLeavetableRep")){if(k=="decodeRougeBaseInfoRep")V.friendGeneral=((S=x==null?void 0:x.friendGeneral)==null?void 0:S.length)??V.friendGeneral;else if(k=="MsgGamePlayCardNtf")U.ready(t.CardList);else if(k=="SmsgGameSetCharacter")_.mySeats[0]===void 0&&_.isDouDiZhu&&t.Infos.length==1&&_.setMyID(t.Infos[0].SeatID),t.Infos.forEach(({SeatID:b,CharacterID:R})=>{_.setGeneral(b,R);});else if(k=="GsCGuoZhanSetCharacter")(y=t.GeneralData)==null||y.forEach(({index:b,cardID:R})=>{_.setGeneral(E,R,b);});else if(k=="MsgGameTurnNtf")U.enter(t.TurnCnt);else if(k=="GsCGamephaseNtf")U.enter(null,t.Round,E);else if(k=="GsCUpdateRoleDataExNtf")U.currentID==E&&t.DataID==1&&Array.isArray(t.Datas)&&(document.getElementById("sha").innerText="可出杀次数："+Math.max(0,le[2]-le[1]),E==_.mySeats[0]&&_.isShanHeTu&&((A=ke.itemId)!=null&&A.includes(2042))&&(le[1]==0&&(ke.previousData=0),ke.sanBanFu+=le[1]-ke.previousData,ke.previousData=le[1],ke.sanBanFu%3==0?document.getElementById("sanBanFu").innerText="三板斧计数器":document.getElementById("sanBanFu").innerText="三板斧计数器："+((Number(ke.sanBanFu)-1)%3+1)));else if(k=="GsCTriggerSpellNew"){if(se.wuxieSwitch){const b=N=>{var z;return N?`<font color='#FFFF00' href='1|${N}|0|2'>"${(z=P.spellDict[N])==null?void 0:z.name}"</font>`:"未知技能"},R=N=>(z=>z?`<font color='#FFFF00' >${z}${N==_.mySeats[0]?"(你)":""}</font>`:"")(_.name(N,null));let B=(Y=t.TriggerSpellData)!=null&&Y.length?t.TriggerSpellData:[{}];if(!B.length)return;L.trace("<font color='#00FFFF'>&gt;&gt;</font>"+((v=B[0])!=null&&v.SpellId?"":((N,z)=>N&&z?N+"的"+z:N||z)(R(t.SrcSpellCasterSeat),t.SrcSpellID?b(t.SrcSpellID):""))+"<font color='#00FFFF'>&gt;</font>"+(N=>N?"向"+N:"")(R(t.TriggerSeatId))+"询问"+B.map(({SpellId:N,SeatId:z,Targets:$})=>((q,ge)=>ge?`对${ge}的`:q?`${q}的`:"")(z!=t.TriggerSeatId?R(z):"",($==null?void 0:$.map(R).join(","))||"")+b(N)).join(","));}}else if(k=="ClientHappyGetFriendHandcardRep")_.find(t.seatId,[7004,2087,3048])&&new te(t.seatId).show(t.Cards);else if(k=="PubGsCUseCard")_.mySeats[0]==E&&an([t.CardID]),U.currentID==E&&_.find(U.currentID,[7003,2086,3047])&&t.useType==1&&t.fromZone!=1&&!t.isSend?(U.spellSpace[7011]||(U.spellSpace[7011]={count:0,color:new Set}),re[t.CardID].type!=3&&U.spellSpace[7011].count++,U.spellSpace[7011].color.add(re[t.CardID].c),document.getElementById("suit").innerHTML="["+U.spellSpace[7011].count+"]"+Array.from(U.spellSpace[7011].color).join("")):U.currentID==E&&_.find(U.currentID,[330,1068])&&t.useType==1&&!t.isSend&&(document.getElementById("suit").innerHTML=re[t.CardID].cn);else if(k=="PubGsCUseSpell"){if(_.mySeats[0]==E&&H.length==1&&an(H),T==3324)document.getElementById("chongsheng").innerText="重生是否发动：是";else if(T==2143)U.spellSpace[T]||(U.spellSpace[T]=new Set),H.forEach(b=>U.spellSpace[T].add(re[b].c)),document.getElementById("suit").innerHTML=Array.from(U.spellSpace[T]).join("");else if([3157,3511].includes(T)&&H.filter(b=>b>0).length!=0&&(j==_.mySeats[0]||w.v))U[T]=H;else if([3193,3185,3138].includes(T)||T==3161)U.phase--;else if(T==3338&&H.length!=0&&w.v&&_.generals[_.mySeats[0]]==573){U.spellSpace[T]||(U.spellSpace[T]=new Set);const b=H[0]+"-"+H[1];U.spellSpace[T].has(b)||(U.spellSpace[T].add(b),console.warn("new combination",U.spellSpace[T]),ne.delay("baichu",()=>vt("新组合"),500));}}else if(k=="GsCRoleOptTargetNtf")if(T==945&&oe==0&&(M==null?void 0:M.length)>0)Bi(M.map(b=>re[b].number),w.v&&E==_.mySeats[0]);else if(T==3440&&_.mySeats.includes(E)&&oe==0&&(M==null?void 0:M.length)>0)Re==28?ln(M.map(b=>re[b].number),new te(E).cards.map(b=>re[b.id].number)):ln();else if(T==11003&&oe==0&&(M==null?void 0:M.length)>0&&j!=_.mySeats[0]&&se.v)document.getElementById("result").innerHTML='<span class="textRes"> 【锻造】<br>'+M.map(b=>re[b].ncn).join("<br>")+"</span>";else if([7016,7017].includes(T)&&(M==null?void 0:M.length)>0&&(j==_.mySeats[0]||w.v)){U[T]=M.slice();let b=Array.from(new Set(new te(oe).cards.map(({key:q})=>q))).sort((q,ge)=>ge-q),R=Array.from(new Set(new te(255,1).cards.slice(0,_.isGuoZhan?void 0:2).map(({key:q})=>q))).sort((q,ge)=>ge-q),{yes:B,no:N}=M.reduce((q,ge)=>{let{keys:Le}=ie.findKZ(ge);return b.find(qe=>Le.includes(qe))!==void 0&&q.yes.push(ge),R.find(qe=>Le.includes(qe))!==void 0&&q.no.push(ge),q},{yes:[],no:[]}),z=document.getElementById("result");N.length==2?B=M.filter(q=>!N.includes(q)):B.length==1&&(N=M.filter(q=>!B.includes(q))),B.length==1||B.length==2?(z.innerHTML='<span class="textRes">【宴戏】'+B.map(q=>re[q].ncn).join("/")+"</span>",U[T]=B.concat(M.filter(q=>!B.includes(q)))):z.innerHTML='<span class="textRes">【宴戏】未知</span>';let $=new te(oe).show(U[T][0]).concat(new te(255,1,_.isGuoZhan?Ie:Ee).show(U[T].slice(-2)));B.length==3?ie.pack($):B.length==1?ie.pack($.slice(1,3)):B.length==2&&(ie.pack($.slice(0,2)),ie.pack($.slice(1,3))),M.forEach(q=>{z.innerHTML+='<span class="textRes'+(B.length<3&&B.includes(q)?" textRes":"")+'">'+re[q].ncn+"："+[[B,"手牌"],[N,"牌堆"]].filter(([ge,Le])=>ge.includes(q)).map(([ge,Le])=>Le).join("/")+"</span><br>";});}else [4,5,921,372,811,357,3119,501,3437].includes(T)&&(M==null?void 0:M.length)>0?J!==void 0&&J!==255&&new te(J).show(M):[851,361,774,3310].includes(T)&&oe==0&&(M==null?void 0:M.length)>0?J!==void 0&&J!==255&&new te(J).show(M):T==943&&oe==0&&(M==null?void 0:M.length)==1?new te(255,1).show(M):T==898&&oe==0&&(M==null?void 0:M.length)>2?j!==void 0&&j!==255&&new te(j).show(M.slice(1,M[0]+1)):(T==987||T==988)&&oe==1&&(M==null?void 0:M.length)>2?J!==void 0&&J!==255&&(j==_.mySeats[0]||w.v)&&new te(J).show(M.slice(-M[1])):T==3266&&oe==0&&(M==null?void 0:M.length)>0?J!==void 0&&(j==_.mySeats[0]||w.v)&&new te(J,J==255?1:5).show(M.filter((b,R)=>R%3==1)):T==3483&&oe==1?(M==null?void 0:M.length)>2&&J!==void 0&&J!==255?new te(J).show(M.slice(-M[1])):M[0]>0&&(U[T]=M[0]):(T==7010||T==7011)&&(M==null?void 0:M.length)>0&&J==255?(U.spellSpace[7009]=M.slice(),(j==_.mySeats[0]||w.v)&&ie.pack(new te(255,1).show(M))):T==2900&&Re==28&&_.setGeneral(J,M[2],M[1],!0);else if(k=="CGsRoleSpellOptRep")T==2022?_.setGeneral(E,le[0],le[1],!0):T==7009?((D=U[7009])==null||D.pop(),(F=U[7009])!=null&&F.length||new te(255,1).show(le)):T==3336?new te(255,1,Fe).show((G=le==null?void 0:le.slice())==null?void 0:G.reverse()):le.length>0&&T==15&&Re==10&&Yn(re[le[0]].color==1);else if(k=="PubGsCMoveCard"){if(H=H.slice(),ce===0||He===0||ae===11||t.isSend)return;if(T==713&&He==21&&ce==H.length-2){let b=H.splice(0,1)[0];H.splice(b,1);}if(H.filter(b=>b>0).length!=ce&&H.filter(b=>b>0).length!=0&&(console.error("PubGsCMoveCard error: 明暗牌混合：["+H+"]"),console.error(t),H=[]),fe==1&&ve==Ie&&[3208,7011,987,988].includes(T)&&(ve=Ee),fe==1&&ve==Ie&&He==13&&ce==1&&(ve=Ee),fe==1&&ve==Ie&&ae==4&&He==8&&T==795&&ce==1&&(ve=Ee),fe==1&&ve==Ie&&ae==5&&T==3101&&ce==1&&(ve=Fe),fe==1&&ve==Ie&&ae==5&&!_.isGuoZhan&&[7016,7017].includes(T)&&ce==1&&(ve=Ee),fe==1&&ae==5&&T==3338&&w.v&&je==_.mySeats[0]&&ne.delay("baichu",()=>vt("新组合"),500),fe==8&&ae==5&&T==6||fe==5&&ae==5){let b=new Set(_.mySeats);b.delete(_.mySeats[0]),console.log(b),!b.has(we)&&je==_.mySeats[0]&&ne.delay("mingpai",()=>vt("明牌",H),500);}ae==1&&je==255&&wt==Ee&&(H=H.filter(b=>b!=4400&&b!=4401));var n=new te(we,fe,ve,ce,T,qt),i=new te(je,ae,wt,ce,T,Ut);if(ae==12||fe==12)ae!=12?i.add(H.concat(Array(ce-H.length).fill(0)).map(b=>new ie(b,b,i.zoneID))):fe!=12&&fe!=0&&n.remove(H,T);else if(fe==5&&ae==1&&je==0)i.add(n.remove(H.filter(b=>b>0)).map(b=>b.destroy(0)));else if(fe==2&&ae==9&&we==0&&je==0)U.isGameStart&&!U.isPassed&&ie.pack(ie.get(0).map(b=>b.destroy()),!1,1),i.set([...i.cards.map(b=>U.isPassed?b.destroy(0):b),...n.cards.map(b=>b.destroy(0))]),n.set([]),_t(),U.isPassed=!1;else if(He!==255){if(fe==1&&ae==5&&_.dealCard(je,H[0]),ae==2&&(U.spellSpace[3090]||(U.spellSpace[3090]=new Set),H.forEach(b=>U.spellSpace[3090].add(re[b].c)),document.getElementById("boTu").innerHTML=Array.from(U.spellSpace[3090]).join("")),(fe==5||ae==5)&&(je==((K=_.mySeats)==null?void 0:K[0])||we==((ee=_.mySeats)==null?void 0:ee[0]))){let b=Array.from(te.shoupai(_.mySeats[0]));ae==5?b.push(...H):fe==5&&(b=b.filter(N=>!H.includes(N))),b=b.map(N=>re[N]);const{countType2:R,countSha:B}=[...b].reduce((N,z)=>(z.type===2&&!["乐","兵","闪电"].includes(z.name)&&N.countType2++,["杀","火杀","雷杀","冰杀"].includes(z.name)&&N.countSha++,N),{countType2:0,countSha:0});document.getElementById("result").innerHTML='<span class="textRes">【权道】杀：普通锦囊</span><br><span class="textRes">'+B+"："+R+"</span>";}if([441,3492].includes(T)&&ae==8&&He==6&&Ti(H.map(b=>re[b].number),T==3492&&w.v),T==3033&&fe==1&&ae==8&&H.filter(b=>b>0).length==1){let b=re[H[0]].number,R=0,B=0,N=0;te.paidui.forEach(z=>{let $=re[z].number;$===b?N++:$>b?R++:B++;}),document.getElementById("result").innerHTML='<span class="textRes">【吉占】猜'+(R>B?"大":"小")+'</span><br><span class="textRes">跟'+b+"比，"+R+"张大		"+B+"张小		"+N+"平</span>";}if(T==3329&&we==U.currentID){let b=re[H[0]].number,R=te.paidui,B=["无中","洞烛","顺手","过拆","逐近","决斗","南蛮","万箭","出其","水淹","随机","洪荒","同舟","力争","移花"].flatMap(z=>R.filter($=>{var q;return (q=me.name[z])==null?void 0:q.has($)})).reduce((z,$)=>{let q=re[$].number;return q>b?z.g++:q<b?z.l++:z.e++,z},{g:0,l:0,e:0}),N=["五谷","桃园","火攻","借刀","撒豆"].flatMap(z=>R.filter($=>{var q;return (q=me.name[z])==null?void 0:q.has($)})).reduce((z,$)=>{let q=re[$].number;return q>b?z.g++:q<b?z.l++:z.e++,z},{g:0,l:0,e:0});document.getElementById("result").innerHTML='<span class="textRes">【和衷】'+(B.g>B.l?"大":B.g<B.l?"小":N.g>N.l?"大":N.g<N.l?"小":"平")+'</span><br><span class="textRes">'+B.g+"."+N.g+"大		"+B.l+"."+N.l+"小</span>";}else T==3488&&fe==5&&ae==5&&He==21&&H.filter(b=>b>0).length==1?(U[T]||(U[T]={}),U[T][we]=H.find(b=>b>0)):T==3488&&fe==5&&ae==10&&He==11&&H.filter(b=>b>0).length==0?(H[0]=((he=U[T])==null?void 0:he[we])||0,U[T].stack=H[0]):T==3488&&fe==10&&(ae==1||ae==2)&&He==11&&H.filter(b=>b>0).length==0&&(H[0]=((xe=U[T])==null?void 0:xe.stack)||0,(be=U[T])==null||delete be.stack);if([3157,3511].includes(T)&&fe==2&&ae==5&&ce==((I=U[T])==null?void 0:I.length)&&H.filter(b=>b>0).length==0&&U[T].forEach((b,R)=>H[R]=b),[7016,7017].includes(T)&&ae==5&&ce==1&&(j==_.mySeats[0]||w.v)&&(H[0]&&((O=U[T])!=null&&O.includes(H[0]))?U[T].splice(U[T].indexOf(H[0]),1):fe==5||((Q=U[T])==null?void 0:Q.length)==2||((X=U[T])==null?void 0:X.length)==1?H[0]=((h=U[T])==null?void 0:h.shift())||0:_.isGuoZhan),we==je&&fe==ae&&(ve==wt||ae!=1)&&(qt==Ut||ae!=4))n.show(H);else if(T==3208&&fe==10&&ae==5&&H.filter(b=>b>0).length===0)n.pos=Fe,ie.pack(n.cards.slice(0,n.length-1)),i.add(n.remove(H));else if(T==3483)if(fe==10&&ae==10)H.filter(b=>b>0).length===0&&(n.pos=Fe,i.pos=Ee),i.add(n.remove(H));else if(fe==1&&ae==10&&ve==Ie)U[T]&&ie.pack(n.cards.slice(0,U[T])),H.filter(b=>b>0).length==0&&(n.pos=Fe),i.add(n.remove(H));else if(fe==5&&ae==10)U[T]=i.add(n.remove(H));else if(fe==10&&ae==1&&ve==Ie){if(H.filter(b=>b>0).length==0&&((m=U[T])==null?void 0:m.length)==ce&&U[T].every(b=>n.cards.includes(b))){let b=U[T].flatMap(B=>n.cards.splice(n.cards.indexOf(B),1));ie.pack(i.add(b));let R=b.map(B=>B.key);R.every(B=>B>0)&&H.splice(0,ce,...R);}else i.add(n.remove(H));delete U[T];}else i.add(n.remove(H));else if(T==780&&fe==5&&ve==Ie&&ce==1)if(ae==5&&we==U.currentID)U[T]=i.add(n.remove(H))[0];else if(ae==1&&we!=U.currentID&&n.cards.includes(U[T])){let b=(W=i.add(n.cards.splice(n.cards.indexOf(U[T]),1))[0])==null?void 0:W.key;b>0&&H.filter(R=>R>0).length==0&&(H[0]=b),delete U[T];}else i.add(n.remove(H));else i.add(n.remove(H,T));}}}}}catch(x){console.error(x);}}function mn(){let t=Array.prototype.slice.call(arguments);try{return t[0]==="INIT"?Pi():t[0]==="EXIT"?ji():es(t[t.length-1])}catch(e){console.error(e.message),console.error(e.stack);const[,n,i]=e.stack.match(/(\d+):(\d+)/);console.error("Line:",n),console.error("Column:",i),ue("小抄GG了，联系作者解决");}}typeof SGSMODULE<"u"&&(Object.defineProperty(window.console,"log",{get(){return console.info},set(){}}),window.SGSMODULE.forEach(t=>t("EXIT")),delete window.SGSMODULE);console.info("%c三国杀打小抄","font-weight: bold; color: white; background-color: #525288; padding: 1px 4px; border-radius: 4px;");window.SGSMODULE=[];Object.defineProperty(window.console,"log",{get(){return function(...t){(window._debug||window.isLogAllClass)&&console.debug(...t),window.SGSMODULE.forEach(e=>e==null?void 0:e(...t));}},set(){}});mn("INIT").then(t=>{t&&window.SGSMODULE.push(mn);});

})();