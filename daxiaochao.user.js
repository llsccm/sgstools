// ==UserScript==
// @name         三国杀打小抄
// @namespace    https://greasyfork.org/scripts/448004
// @version      2.9.45
// @author       小麦 孤独尊
// @description  打小抄支持网页版和微端，微端文件请加群 830137048
// @icon         https://i0.hdslb.com/bfs/new_dyn/17ec41a0ca79633b77399065ab80da3f2138912.png
// @downloadURL  https://goka.top:8080/daxiaochao.user.js
// @updateURL    https://goka.top:8080/daxiaochao.user.js
// @match        *://game.4399iw2.com/yxsgs/*
// @match        *://my.4399.com/yxsgs/*
// @match        *://*.sanguosha.com/*
// @match        *://web.kuaiwan.com/kwsgsn/*
// @match        *://wan.baidu.com/microend?gameId=19793595/*
// @match        *://www.7k7k.com/special/sgs/?*
// @match        *://playgame.iqiyi.com/login/iframe_page_web/top?game_id=146
// @grant        none
// @run-at       document-start
// ==/UserScript==

(function () {
  'use strict';

  var Jt=Object.freeze,Zt=Object.defineProperty;var qn=(t,e,n)=>e in t?Zt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var et=(t,e,n)=>(qn(t,typeof e!="symbol"?e+"":e,n),n);var $t=(t,e)=>Jt(Zt(t,"raw",{value:Jt(e||t.slice())}));function Pe(t,e=null,n=!0){let i;return !i&&typeof localStorage<"u"&&(i=localStorage.getItem(t)),i?JSON.parse(i):e}async function Ke(t,e,n=!0){typeof localStorage<"u"&&localStorage.setItem(t,JSON.stringify(e));}async function zt(t,e=!0){typeof localStorage<"u"&&localStorage.removeItem(t);}function Lt(t,e=0){let n="";const i="  ".repeat(e);if(Array.isArray(t))t.every(a=>typeof a!="object"||!a)?n+=`${i}${t.join("	")}
`:(n+=`${i}<ol>
`,t.forEach(a=>{n+=`${i}  <li>
`,n+=Lt(a,e+2),n+=`${i}  </li>
`;}),n+=`${i}</ol>
`);else if(typeof t=="object"&&t!==null)if(Object.values(t).every(a=>typeof a!="object"||!a))n+=`${i}${Object.entries(t).map(([a,s])=>`<strong>${a}:</strong> ${s}`).join(", ")}
`;else {n+=`${i}<ul>
`;for(const a in t)n+=`${i}  <li>
`,n+=`${i}    <strong>${a}:</strong>
`,n+=Lt(t[a],e+2),n+=`${i}  </li>
`;n+=`${i}</ul>
`;}else n+=`${i}  ${t}
`;return n}function zn(t){if(!(t!=null&&t.length))return "";const e=t.flatMap(n=>Object.keys(n)).filter((n,i,r)=>r.indexOf(n)===i);return '<table border="1"><thead><tr><th>'+e.join("</th><th>")+"</th></tr></thead><tbody><tr><td>"+t.map(n=>e.map(i=>n[i]||"").join("</td><td>")).join("</td></tr><tr><td>")+"</td></tr></tbody></table>"}async function Un(t,e=""){const n=document.createElement("a");n.download=e,n.href=t,n.click(),n.remove();}const Ot=[];let pt=!1,Ct=null;function Fe(t,e="acTooltip",n=1e4,i="",r=null,a=!1){a?Qn(t,e,n,i):(Ot.push({text:t,id:e,duration:n,className:i,clickCallback:r}),pt||At());}function Qn(t,e,n,i){let r=document.getElementById(e);r||(r=document.createElement("div"),r.id=e,r.className="ac-tooltip "+i,document.body.appendChild(r)),r.innerHTML=t,r.className="ac-tooltip "+i,r.addEventListener("click",()=>{St(uniqueId);}),setTimeout(()=>{r.classList.remove("hide"),r.classList.add("show"),r.style.top="20px";},50),Ct&&clearTimeout(Ct),Ct=setTimeout(()=>St(e),n);}function ue(t){if(ChannelUtils!=null&&ChannelUtils.openQQBuy){ChannelUtils.openQQBuy({ret:!0,msg:t});return}}function At(t){if(Ot.length===0){pt=!1;return}pt=!0;const{text:e,id:n,duration:i,className:r,clickCallback:a}=Ot.shift();let s=document.getElementById(n);s&&s.remove();let o=n+"-"+new Date().getTime(),l=document.createElement("div");l.id=o,l.className="ac-tooltip "+r,l.innerHTML=e,document.body.appendChild(l),a&&typeof a=="function"&&l.addEventListener("click",a),l.addEventListener("click",()=>{St(o),At();}),setTimeout(()=>{l.classList.remove("hide"),l.classList.add("show"),l.style.top="20px";},50),i?setTimeout(()=>{St(o),At();},i):pt=!1;}function St(t){let e=document.getElementById(t);e&&(e.classList.remove("show"),e.classList.add("hide"),setTimeout(()=>{e&&e.remove();},300));}var mn,Fn=function(t){return String.raw(mn||(mn=$t([`
<html><head><meta charset="utf-8" /><title>战绩胜率统计</title><style>
table { margin-right: 8px; border-collapse: collapse; }
th, td { text-align: center; border: 1px solid black; font-size: 24px; box-sizing: border-box; }
td { padding: 2px 5px; }
.nav, thead { background: white; position: sticky;; }
.rate { margin: 5px; font-size: 28px;}
.button {  display: none; } 
.button[name=mode] ~ .label { display: inline-block; font-size: 30px; user-select: none; border: solid 1px black; border-radius: 5px; padding: 5px; margin: 5px; }
th .button ~ .label { display: inline-block; width: 100%; height: 100%;}
th .button:checked ~ .label::after { content: "↓"; }
th.reverse .button:checked ~ .label::after { content: "↑"; }
.button:checked ~ .label { background: rgb(64,160,255); } 
.s0 { background: white; }
.s1 { background: rgb(221,0,0); }
.s2 { background: rgb(255, 200, 0); }
.s3 { background: rgb(0, 136, 68); }
.s4 { background: rgb(0, 94, 183); }
.s5 { background: rgb(255, 0, 255); }
</style></head><body style="margin: 0 8px;">
<div class="nav" style="top: 0; height: 136px; z-index: 3"><div id="modeTab"></div><div id="summary"></div></div>
<div style="display: flex; align-items: flex-start; flex-wrap: wrap;"><table id="detail"><thead style="top: 135px; z-index: 1"></thead><tbody></tbody></table>
<table id="record"><thead style="top: 135px; z-index: 2"></thead><tbody></tbody></table></div>

<script>
const data = Object.entries(`,`).reduce((acc,[mode, records]) => {
acc[mode] = Object.entries(records).reverse().map(([time, record]) => ({timestamp:parseInt(time), time: new Date(time*1000).toISOString().slice(0,16).replace('T',' '), ...record, durationstr: formatSeconds(record.duration)}));
return acc;
},{});
const modeName = {1: '八人标准', 2: '六人身份', 3: '八人军争', 4: '应变身份', 5: '八人至尊', 6: '身份老友房', 7: '国战', 8: '应变国战', 9: '国战老友房', 10: '新1V1', 11: '欢乐', 12: '应变欢乐', 13: '欢乐老友房', 14: '统率', 15: '4V4演武', 16: '应变演武', 17: '欢乐演武', 18: '国战演武', 19: '统率排位', 20: '欢乐排位', 21: '智斗三国', 22: '欢乐新手', 23: '欢乐新手', 24: '六人新手', 25: '六人新手', 26: '排位赛', 27: '主公杀', 28: '1v1面杀练习场', 29: '五人匹配', 30: '排位赛', 31: '欢乐33', 32: '33老友房', 33: '武将试炼', 34: '武将试炼', 35: '斗地主', 36: '线上赛事', 37: '山河图', 38: '王战练习', 39: 'SCL练习', 40: '斗地主练习', 42: '八人匹配', 43: '个人挑战1V1', 44: '单骑无双'};
const sfName = {5:{0: '综合', 1: '主公', 2: '忠臣', 3: '反贼', 4: '内奸'},7:{0: '综合', 1: '魏国', 2: '蜀国', 3: '吴国', 4: '群雄', 5:'晋国'},26:{0:'综合',2:'先手',3:'后手'},35:{0:'综合',1:'地主',3:'农民'},44:{0:'综合',1:'先手',4:'后手'}};
colors=['white','rgb(221,0,0)','rgb(255, 200, 0)','rgb(0, 136, 68)','rgb(0, 94, 183)','rgb(255, 0, 255)','black'];
const modeTab = document.getElementById('modeTab');
[26,35,44,5,7].forEach(mode => {
if(mode in data) modeTab.innerHTML += '<label><input type="radio" class="button" name="mode" value="'+mode+'" onclick="reSet()"><span class="label">'+modeName[mode]+'</span></label>';
}); modeTab.innerHTML += ' （更多功能敬请期待…）';
document.querySelector('#record thead').innerHTML = '<tr onclick="recordSort(event)">'+['时间','武将','身份','胜负','时长'].map((name,i)=>'<th'+(i?'':' class="reverse"')+'><label><input type="radio" class="button" name="record" onchange="recordSort(event)" '+(i?'':'checked')+'><span class="label">'+name+'</span></label></th>').join('')+'</tr>';
function reSet() {
var i, tabcontent, tablinks;
window.mode = document.querySelector('#modeTab input[name="mode"]:checked')?.value
window.guozhanQ = modeName[mode].includes('国战');
window.records = data[mode].filter(record => record.shenfen).sort();
let summary = Array.from({length:10},(_,i)=>[0,0,0,i]);
let detail = records.reduce((acc, record) => {
    summary[0][record.result] += 1;
    summary[0][2] += record.duration;
    summary[record.shenfen][record.result] += 1;
    record.general.forEach((g,n)=>{
        if(!acc[g]) acc[g] = Array.from({length:10},(_,i)=>[0,0,0,i]);
        acc[g][0][record.result] += 1;
        acc[g][0][2] += record.duration;
        acc[g][guozhanQ?(n+1):record.shenfen][record.result] += 1;
    });
    return acc;
},{});
summary = summary.filter(s=>s[0]+s[1]>0);
let sf = guozhanQ?[0,1,2]:summary.map(s=>s[3]);
document.querySelector('#detail thead').innerHTML = '<tr><th rowspan=2>武将</th>'+sf.map(sf=>'<th colspan=4 style="background:'+colors[sf]+';">'+(guozhanQ?{0:'综合',1:'主将',2:'副将'}[sf]:sfName[window.mode][sf])+'</th>').join('')+'<th rowspan=2 onclick="detailSort(event)"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)"><span class="label">平均时长</span></label></th></tr><tr onclick="detailSort(event)">'+sf.flatMap((sf,i)=>['胜率','出场','胜场','败场'].map((name,j)=>'<th class="reverse"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)" '+(i==0&&j==1?'checked':'')+'><span class="label">'+name+'</span></label></th>')).join('')+'</tr>';
window.detail = Object.keys(detail).map(general=>{
    let rate = detail[general].filter(s=>sf.includes(s[3]));
    rate.forEach(s=>{ s[4] = s[0]+s[1]; s[5] = 100*s[0]/s[4]; s[2] = s[2]/s[4]; });
    return ({general, rate});
});
let summaryDiv = document.getElementById('summary');
summaryDiv.innerHTML = '';
summary.forEach(([win,lose,time,sf])=>{ summaryDiv.innerHTML += '<span class="rate" style="color:'+colors[guozhanQ?[6,4,1,3,2,5][sf]:sf||6]+';">'+sfName[window.mode][sf]+'胜率'+((100*win/(win+lose)).toFixed(2)+'%').replace(/(.0)?0%/,'%')+'('+win+'胜:'+lose+'负)</span>'; });
detailSort();
recordSort();
}

function detailSort(event,sf=0,key=4,reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'detail'){
        if(element.rowSpan>1) {sf = 0; key = 2; }
        else {
            sf = Math.floor(element.cellIndex/4);
            key = [5,4,0,1][element.cellIndex%4];
        }
        reverse = element.classList.toggle('reverse');
    }
}
window.detail = window.detail?.sort((a,b)=>{ a=a.rate[sf][key];b=b.rate[sf][key]; return isNaN(a)&&isNaN(b)?0:isNaN(a)?-1:isNaN(b)?1:a-b; });
if(reverse) window.detail = window.detail?.reverse();
document.querySelector('#detail tbody').innerHTML = window.detail?.map(({general, rate})=>'<tr><td>'+general+'</td>'+rate.map(s=>'<td>'+(s[4]?(s[5].toFixed(2)+'%').replace(/(.0)?0%/,'%'):'')+'</td><td>'+s[4]+'</td><td>'+s[0]+'</td><td>'+s[1]+'</td>').join('')+'<td>'+formatSeconds(rate[0][2])+'</td></tr>')?.join('');
}

function recordSort(event,key='timestamp', reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'record'){
        key = ['timestamp','general','shenfen','result','duration'][element.cellIndex]??key;
        reverse = element.classList.toggle('reverse');
    }
}
if(key!=='general') window.records = window.records?.sort((a,b)=>a[key]-b[key]);
else window.records = window.records?.sort((a,b)=>a[key][0].localeCompare(b[key][0]));
if(reverse) window.records = window.records?.reverse();
document.querySelector('#record tbody').innerHTML = window.records?.map(record => '<tr><td>'+record.time+'</td><td>'+record.general.join(' ')+'</td><td>'+sfName[window.mode][record.shenfen]+'</td><td>'+(record.result?'失败':'胜利')+'</td><td>'+record.durationstr+'</td></tr>')?.join('');
}

function formatSeconds(seconds) {
const hrs = Math.floor(seconds / 3600).toString().padStart(2, '0');
const mins = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
const secs = Math.floor((seconds % 60)).toString().padStart(2, '0');
return (seconds>=3600?(hrs+':'):'')+mins+':'+secs;
}

document.querySelector('#modeTab input[name="mode"]').click();
<\/script></body></html>`])),t)},yn="jsjiami.com.v7";((function(t,e,n,i,r,a,s){return t=t>>4,a="hs",s="hs",function(o,l,c,f,d){const u=Ee;f="tfi",a=f+a,d="up",s+=d,a=c(a),s=c(s),c=0;const p=o();for(;[]&&--i+l;)try{f=parseInt(u(426,"Th8%"))/1+parseInt(u(430,"uSqA"))/2+-parseInt(u(278,"03Zi"))/3*(-parseInt(u(308,"uSqA"))/4)+-parseInt(u(524,"!q)p"))/5+-parseInt(u(336,"*wL)"))/6*(-parseInt(u(536,"z7td"))/7)+-parseInt(u(322,"wjsR"))/8+parseInt(u(544,"uSqA"))/9*(-parseInt(u(343,"3CEc"))/10);}catch{f=c;}finally{if(d=p[a](),t<=i)c?r?f=d:r=d:c=d;else if(c==r.replace(/[CfLYpHkDQqVKJxFyBPGROw=]/g,"")){if(f===l){p["un"+a](d);break}p[s](d);}}}(n,e,function(o,l,c,f,d,u,p){return l="split",o=arguments[0],o=o[l](""),c="reverse",o=o[c]("v"),f="join",o[f]("")})}))(3216,838851,dt,203),dt&&(yn=10165);function Ee(t,e){const n=dt();return Ee=function(i,r){i=i-263;let a=n[i];if(Ee.UtUeEC===void 0){var s=function(d){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",m="";for(let y=0,C,S,j=0;S=d.charAt(j++);~S&&(C=y%4?C*64+S:S,y++%4)?p+=String.fromCharCode(255&C>>(-2*y&6)):0)S=u.indexOf(S);for(let y=0,C=p.length;y<C;y++)m+="%"+("00"+p.charCodeAt(y).toString(16)).slice(-2);return decodeURIComponent(m)};const f=function(d,u){let p=[],m=0,y,C="";d=s(d);let S;for(S=0;S<256;S++)p[S]=S;for(S=0;S<256;S++)m=(m+p[S]+u.charCodeAt(S%u.length))%256,y=p[S],p[S]=p[m],p[m]=y;S=0,m=0;for(let j=0;j<d.length;j++)S=(S+1)%256,m=(m+p[S])%256,y=p[S],p[S]=p[m],p[m]=y,C+=String.fromCharCode(d.charCodeAt(j)^p[(p[S]+p[m])%256]);return C};Ee.bAgCRi=f,t=arguments,Ee.UtUeEC=!![];}const o=n[0],l=i+o,c=t[l];return c?a=c:(Ee.GDNbnM===void 0&&(Ee.GDNbnM=!![]),a=Ee.bAgCRi(a,r),t[l]=a),a},Ee(t,e)}async function Vn(t=w.v){const e=Ee,n={RcPRs:function(r,a){return r(a)},hOUgH:e(271,"r9@5"),ScWTy:e(417,"r9@5"),pKHUR:function(r,a){return r!==a},xFFmX:e(534,"uSqA"),ouTLi:function(r,a){return r===a},ZiElJ:e(546,"a6MC"),BKqFe:"task",xUmbb:"mail",PkfVq:function(r){return r()},ahTJB:"autoDrumSwitch",lrGGO:e(447,"uSqA"),FcaJw:function(r){return r()},qdcCO:e(554,"kwn["),GbNiE:e(467,"RWfn"),fIFcE:e(369,"ohVA")},i=[{id:n[e(316,"t0K(")],action:gi},{id:n[e(551,"r9@5")],action:Tn},{id:e(566,"RWfn"),action:En}];t?(i[e(303,"gurh")]({id:n[e(445,"1w6n")],action:tn},{id:e(503,"TLpc"),action:Xt},{id:n.lrGGO,action:en}),n[e(460,"!q)p")](Kn)):n.qdcCO===n[e(399,"!q)p")]?(_0x590f41[e(341,"TLpc")]="",_0x3ce1ae.parentElement[e(365,"QTd]")]="",_0x1d9a40[e(575,"t#fQ")]=!![],_0x491291[e(442,"Q3x0")]=![],_0x20b14b[e(420,"OJsJ")]=_0x2284bd+"<br>后可再次体验"):[{id:n.BKqFe,action:tn},{id:n[e(560,"!q)p")],action:Xt},{id:e(573,"Q3x0"),action:en}][e(577,"z7td")](({id:a})=>{const s=e,o=document[s(435,"hKyZ")](a);o&&(n[s(383,"KJLZ")](n[s(538,"Q3x0")],s(377,"OJsJ"))?(n[s(339,"Sd7y")](_0x2945c4,n[s(433,"gR)G")]),_0x323020[s(411,"QTd]")](n[s(439,"*wL)")],_0x4c5b7f),_0x129754[s(363,"N#O5")]=_0x51ffbf):(o[s(274,"DTOE")]=![],o[s(522,"kwn[")]=!![],o[s(315,"AnLg")](new Event("change"))));}),i.forEach(({id:r,action:a})=>{const s=e,o=document[s(345,"KJLZ")](r);o&&(n.ouTLi(s(563,"M36t"),n[s(474,"JLuo")])?_0x34ac7f[s(323,"a6MC")]=()=>_0x1a7b08():(o[s(434,"B*IF")]=![],n[s(565,"AnLg")](r,n[s(585,"fKBw")])||r===n[s(328,"ohVA")]?o[s(318,"KJLZ")]=()=>a():o.checked&&n[s(478,"O0s3")](a)));});}function Kn(){const t=Ee,e={UbqKV:"task",bGWwi:t(409,"QTd]"),BCRMx:function(i){return i()},lVfld:function(i,r){return i!==r},GoCBH:function(i,r){return i===r},lSeTR:t(516,"3CEc"),VCSXj:function(i,r,a,s){return i(r,a,s)}},n=document[t(531,"B*IF")](t(265,"#W7o"));n[t(525,"t0K(")](i=>{const r=t,a={FJgCO:e[r(473,"kwn[")],QjuQB:e[r(314,"gR)G")],OMPEw:function(s){return e.BCRMx(s)},WUSMe:function(s,o){return e[r(368,"1w6n")](s,o)},VAWTx:function(s,o){return e.GoCBH(s,o)},hRiwc:"XWcuL",ryyjq:e[r(583,"!q)p")],rzdNy:function(s,o,l,c){return e.VCSXj(s,o,l,c)},VzGcQ:function(s,o){return s(o)}};i[r(268,"gka4")]=![],i[r(427,"ohVA")]=function(){const s=r,o={soSjX:a.FJgCO,NvUUJ:a.QjuQB,YEtmv:s(480,"1w6n"),iNEyf:function(l){return a[s(452,"Uq0S")](l)},wVlRB:function(l,c){return l(c)},puitT:function(l,c){return a[s(280,"N#O5")](l,c)},iZuRI:function(l,c,f,d){return l(c,f,d)},xcLCH:function(l,c){return l(c)},euXqw:function(l,c){return a[s(334,"03Zi")](l,c)},hBeLo:s(292,"nu@&"),FGIJM:function(l,c){return a.WUSMe(l,c)},XTNmm:function(l,c){return a[s(496,"Q3x0")](l,c)}};a[s(313,"OJsJ")](s(386,"JLuo"),a[s(359,"Q3x0")])?[{id:o[s(342,"Q3x0")],action:_0x3d1d6e},{id:o[s(549,"Q3x0")],action:_0x49a2ed},{id:o[s(489,"M36t")],action:_0xe44479}][s(437,"Uq0S")](({id:c})=>{const f=s,d=_0x4c20aa[f(351,"eh@)")](c);d&&(d.checked=![],d[f(533,"hpBo")]=!![],d[f(382,"a6MC")](new _0x4e38ef(f(557,"xH!1"))));}):this[s(492,"TLpc")]?a[s(337,"!q)p")]!==a[s(457,"TLpc")]?_0x33dbee.checked&&o[s(419,"9eBN")](_0x3d5842):(n[s(344,"KJLZ")](l=>{const c=s,f={brCLm:function(d,u){return o[Ee(569,"9eBN")](d,u)},snGpN:function(d,u,p,m){return o.iZuRI(d,u,p,m)},GZKeN:function(d,u){return d(u)},qiVUA:function(d,u){return o[Ee(497,"Th8%")](d,u)}};if(o[c(317,"gka4")](o[c(469,"xH!1")],c(266,"oeY[")))this[c(307,"9eBN")]?(_0x46d753[c(422,"ohVA")](d=>{const u=c;f[u(485,"oeY[")](d,this)&&(d[u(274,"DTOE")]=![]);}),_0x4f3c48(o[c(356,"Uq0S")](_0x1d3854,this[c(449,"hm@a")][c(378,"Q3x0")]),o.wVlRB(_0x32c9e6,this.dataset[c(374,"$*s2")]),this[c(450,"Uq0S")].goods)):_0x5e484b(![]);else if(o.FGIJM(l,this))if(o[c(349,"ohVA")]("JMvPy","JMvPy"))l.checked=![];else {const d={LybcF:function(u,p){return f[c(400,"RWfn")](u,p)}};_0x573c6d[c(384,"4$6I")](u=>{d[c(346,"el3g")](u,this)&&(u.checked=![]);}),f.snGpN(_0x43b042,f.GZKeN(_0x37158c,this[c(404,"TLpc")][c(378,"Q3x0")]),f[c(564,"JLuo")](_0x3a7d52,this[c(404,"TLpc")][c(333,"Uq0S")]),this[c(264,"r9@5")][c(270,"tR[5")]);}}),a[s(273,"oeY[")](sn,parseInt(this[s(458,"eh@)")][s(479,"1w6n")]),a[s(456,"*wL)")](parseInt,this[s(272,"Q3x0")][s(275,"4$6I")]),this.dataset[s(572,"Ifj1")])):a[s(521,"9qhw")](sn,![]);};});}async function ct(t=![]){const e=Ee,n={XXiKL:function(d,u){return d(u)},lvODT:e(327,"!q)p"),iUnXY:"autoBotTip",fkWzu:function(d,u){return d!==u},Rsfjb:"酒馆挂机今日可用",XHHsR:function(d,u){return d===u},Cklxp:"QAyQt",nqteO:e(389,"9eBN"),ayGVo:function(d){return d()},PBlSZ:e(504,"oeY["),BuVfy:"change",sCXbS:e(468,"wjsR"),gIEut:e(505,"9qhw"),jripC:function(d){return d()},MXwYO:e(279,"9eBN"),whcni:e(451,"N#O5"),QXpOW:"EjUIl",vAxjL:"--bot-status",fFFqO:e(465,"gurh"),FrKMx:function(d,u){return d(u)},uHhIi:"eWqzK",amcOi:"盖主速刷已关闭",llAgg:function(d,u){return d<=u},hZvJj:function(d,u,p,m){return d(u,p,m)},vmVYK:e(340,"nu@&"),RjCNt:"autoBotSwitch",NrpkO:"autoHGSwitch",XNrMn:e(387,"nu@&"),vgQai:e(347,"gR)G"),EIAFn:function(d,u){return d-u},dstuO:function(d,u){return d*u},EXPpq:function(d,u){return d*u},OTQeW:function(d,u){return d+u},pqccr:function(d,u){return d*u},LhNnw:function(d,u){return d*u},UishR:function(d,u){return d*u},zsxyP:e(428,"O0s3"),BGZep:function(d,u){return d!==u},wBIee:e(371,"gR)G"),LJDzR:function(d,u){return d*u},ySkZJ:function(d,u){return d*u},JPZEs:"lGVvi",NEMsx:e(299,"gR)G"),bOjpG:function(d,u){return d(u)},zvrdw:function(d,u){return d+u},rLxOg:e(539,"03Zi"),GlQWk:function(d,u){return d!==u},DEGxU:e(267,"ohVA"),qQFhC:function(d,u){return d(u)},mNTVV:function(d,u){return d!==u},iBtrX:e(561,"el3g"),hAwEr:function(d,u){return d(u)},QzlsY:function(d,u){return d!==u},vAZxW:e(562,"N#O5"),bSvZf:"酒馆挂机可体验",HRhbO:e(579,"#W7o"),eRvzd:e(486,"a6MC"),BGQld:function(d,u){return d==u},IOGGi:e(295,"9eBN"),FDUcw:"来自公会包月",VUjjS:function(d,u){return d!==u},ENHqV:function(d,u){return d(u)}};let i=ie[e(462,"RWfn")](),r=n[e(518,"9eBN")](i,n[e(578,"z7td")](Pe,n[e(396,"xH!1")],0,![])),a=document[e(493,"el3g")](n[e(357,"xH!1")]),s=document[e(507,"JLuo")](n.NrpkO),o=document[e(376,"03Zi")](n[e(455,"el3g")]),l=document.getElementById(n[e(466,"gka4")]),c=n[e(391,"gka4")](w.trialTime,n.dstuO(n[e(502,"gR)G")](n[e(555,"N#O5")](6,24),3600),1e3)),f=new Date(n[e(290,"hpBo")](w.trialTime,n[e(418,"hm@a")](8,3600)*1e3))[e(570,"03Zi")]().slice(0,10);if(w[e(300,"O0s3")][25242]=new Date(n[e(321,"nu@&")](i,n[e(421,"eh@)")](n[e(277,"Sd7y")](n[e(523,"JLuo")](6,24),3600),1e3)))[e(410,"$*s2")](),a.disabled=![],w.v){a[e(470,"uSqA")]=![],s[e(584,"*wL)")]=![];let d=n.zsxyP;n[e(586,"hKyZ")](o.innerHTML,d)&&(n[e(512,"Q3x0")](n[e(263,"t0K(")],e(443,"Sd7y"))?(_0x4e3bfd[e(415,"Ifj1")]=![],_0x29f01f.autoBotSwitch=9,_0x525672[e(548,"gR)G")](0)):(n.XXiKL(ue,e(353,"uSqA")),r="v",Ke(n[e(332,"Th8%")],n[e(567,"!q)p")](i,n[e(550,"wjsR")](n.LJDzR(n[e(395,"gurh")](7,24),3600),1e3)),![]),o[e(484,"uSqA")]=d));}else if(n[e(529,"gka4")](i,w.guildVIP[w.guildID]))if(n[e(501,"r9@5")]===n[e(488,"03Zi")]){let d=e(509,"O0s3")+new Date(w[e(542,"Q3x0")][w[e(477,"gR)G")]]).toLocaleDateString();o[e(552,"hKyZ")]!==d&&(n[e(487,"DTOE")](n[e(305,"t#fQ")],n[e(319,"uSqA")])?(n.bOjpG(ue,n.zvrdw(w[e(459,"$*s2")],e(298,"el3g"))),o.innerHTML=d):(this.checked?(_0x20ac62.checked=![],_0x38d287[e(326,"#W7o")]=9,_0x5f31f3[e(324,"OJsJ")](0)):(_0x2d913b[e(513,"03Zi")]=![],n[e(354,"DTOE")](_0x2a2886,e(438,"Uq0S"))),_0x4fada9.auto(_0x9b24bb[e(394,"oeY[")]),_0x2bfed3[e(440,"a6MC")](n[e(362,"Uq0S")],()=>_0x2d6bfe(),500)));}else _0x360419[e(352,"wjsR")]=![],_0x4d6595[e(329,"AnLg")](n.iUnXY,()=>_0x5413ed("酒馆挂机已关闭"),500);else if(n[e(414,"03Zi")](i,17284896e5))if(n[e(423,"gR)G")](n[e(310,"uSqA")],e(539,"03Zi"))){let d=e(463,"1w6n");n[e(483,"gurh")](_0x40c5fc[e(390,"QTd]")],d)&&(n[e(576,"hm@a")](_0x3268f0,n.Rsfjb),_0x2966aa.innerHTML=d);}else {let d=e(301,"hKyZ");n[e(380,"Sd7y")](o[e(517,"KJLZ")],d)&&(n.DEGxU!==e(481,"hpBo")?(n[e(568,"eh@)")](ue,n[e(432,"KJLZ")]),a[e(520,"KJLZ")]("change",()=>{const u=e;n[u(429,"1w6n")](n.Cklxp,n.nqteO)?(_0x5666f0(u(269,"ohVA")),_0x562943[u(373,"xH!1")]=_0x117a2e):n.ayGVo(Bn);},{once:!![]}),o.innerHTML=d):(_0x1dcb18(n[e(360,"3CEc")]),_0x50b11c[e(520,"KJLZ")](n[e(297,"9eBN")],()=>{n[e(475,"hm@a")](_0x37202c);},{once:!![]}),_0x3a7b10.innerHTML=_0x15413a));}else if(n[e(431,"TLpc")](i,c)){let d="本周已体验<br>今日可使用";n[e(482,"3CEc")](o[e(508,"ohVA")],d)&&(n[e(547,"#W7o")](e(464,"TLpc"),n.iBtrX)?n.ayGVo(_0x1c51ed):(n[e(454,"*wL)")](ue,n[e(436,"gR)G")]),o.innerHTML=d));}else if(i>=w[e(309,"*wL)")])if(n.QzlsY(e(446,"03Zi"),n.vAZxW)){let d=e(325,"B*IF");o[e(471,"hm@a")]!==d&&(n[e(367,"O0s3")](ue,n[e(293,"JLuo")]),a[e(527,"el3g")](n.BuVfy,Wn),o[e(506,"Sd7y")]=d);}else {const d=_0x38cb82[e(376,"03Zi")](_0x484c76);d&&(d[e(528,"el3g")]=![],_0x1cf159===n[e(296,"ohVA")]||_0x15b985===n.gIEut?d.onmousedown=()=>_0x23295e():d.checked&&n[e(379,"t#fQ")](_0x5a53f6));}else {const d=n[e(559,"fKBw")].split("|");let u=0;for(;[];){switch(d[u++]){case"0":a.parentElement[e(401,"wjsR")]="";continue;case"1":o[e(363,"N#O5")]=f+e(581,"eh@)");continue;case"2":a[e(412,"B*IF")]=![];continue;case"3":a[e(408,"ohVA")]=!![];continue;case"4":a[e(571,"Q3x0")]="";continue}break}}if(!a[e(558,"Th8%")]&&!a[e(331,"Sd7y")]&&(a[e(285,"!q)p")]=function(){const d=e;this[d(361,"gR)G")]?(s[d(415,"Ifj1")]=![],w.autoBotSwitch=!![],ie[d(448,"t0K(")]("autoBotTip",()=>B[d(535,"DTOE")](),500)):n.whcni!==n[d(355,"ohVA")]?(w[d(311,"hKyZ")]=![],ie.delay(d(553,"el3g"),()=>ue(d(348,"t#fQ")),500)):(_0x2c05dd(_0x235b18.guildName+n.MXwYO),_0x197f6b[d(541,"4$6I")]=_0x4601ce),w[d(375,"t#fQ")]=![],document.querySelector(d(545,"*wL)")).style[d(407,"#W7o")](n[d(532,"Th8%")],'"'+w.autoBotStatus[d(472,"a6MC")]().padStart(2,"0")+'"'),B[d(444,"Th8%")](w[d(394,"oeY[")]),ie[d(291,"DTOE")](d(281,"gR)G"),()=>ct(),500);}),!a.disabled&&!a.parentElement[e(289,"gka4")]&&(a[e(306,"O0s3")][e(413,"DTOE")]=function(){const d=e;a[d(491,"!q)p")]=!![],s[d(587,"AnLg")]=![],w[d(358,"hm@a")]=!![],ie[d(499,"eh@)")](n[d(397,"oeY[")],()=>B.readyStart(0),500),w[d(284,"B*IF")]=!![],document.querySelector(n[d(372,"9qhw")])[d(441,"JLuo")][d(530,"M36t")](n.vAxjL,d(424,"gR)G")),n[d(335,"1w6n")](ue,"百胜、官阶挂机开启"),B[d(304,"hKyZ")](w.autoBotSwitch),ie.delay(n[d(543,"gR)G")],()=>ct(),500);}),r||n[e(366,"M36t")](i,w.guildVIP[w[e(476,"r9@5")]])){let d=n[e(302,"hpBo")]+(n[e(388,"Uq0S")](r,"v")?e(330,"hpBo"):r?n.IOGGi:n[e(574,"!q)p")]);n[e(498,"N#O5")](l[e(519,"eh@)")],d)&&(n[e(537,"t0K(")](ue,e(294,"gR)G")),l[e(398,"B*IF")]=d,s[e(556,"3CEc")]=![],s.onchange=function(){const u=e,p={TMfSw:function(m,y){return n[Ee(287,"Uq0S")](m,y)},Smrnq:"盖主速刷已关闭",rAxrA:"autoBotSetUp",wpuVo:u(580,"3CEc")};this[u(412,"B*IF")]?n[u(495,"t#fQ")](n.uHhIi,n[u(283,"TLpc")])?(_0x117dce(p[u(511,"wKKR")]),_0x3e914b[u(541,"4$6I")]=_0x5cef69,_0x17ab51[u(276,"Uq0S")]=![],_0x4ce1e2[u(320,"wjsR")]=function(){const m=u;this[m(461,"uSqA")]?(_0x35f319.checked=![],_0x5e7f41[m(385,"hpBo")]=9,_0x22b16d[m(582,"#W7o")](0)):(_0x4fb0fb[m(416,"AnLg")]=![],p[m(515,"9qhw")](_0x341b63,p[m(381,"wKKR")])),_0x5c5c80.auto(_0x1fc4d3[m(406,"$*s2")]),_0x2fe044.delay(p[m(494,"!q)p")],()=>_0x572388(),500);}):(a.checked=![],w[u(312,"r9@5")]=9,B[u(392,"z7td")](0)):(w[u(540,"Uq0S")]=![],n[u(405,"el3g")](ue,n[u(393,"Q3x0")])),B.auto(w.autoBotSwitch),ie[u(350,"1w6n")](n[u(425,"fKBw")],()=>ct(),500);});}else s[e(402,"oeY[")]="",s[e(364,"eh@)")]=!![],s[e(338,"O0s3")]=![],l[e(484,"uSqA")]=e(490,"B*IF");!a.checked&&!s[e(526,"OJsJ")]&&(w[e(370,"ohVA")]=![]);}function dt(){const t=function(){return [yn,"JfCjKyQsVjqxPiaGFmwyiC.cODLoBRmHkB.vp7QY==","W54ly8osyq","WO3dTNpcJbi","W7xdNSoYW5VcHSoPcW","dmoPWPnZBa","W73cMmkqWP/cN8ocWRq","FCkog8k0FCo0xbJcOCoKWQq9WOLpW5b4WQm/WQuzWQxdSSohWQaAWPLTmW","WQjuW5VcOqG","W55jW5PHW5S","WP89seDdW7azWRq","6yE26AAm5O6Q5PYO5lMC5PA/5yYS55sK","WP/dMbFdJ8kg","6yEl6Aw/5O+M5P+e5yYd5l+06AMm","pdXOj2GtWP4","WQDuW73cTrG","WOVcR8k7WOJcSmkfrq","DCktjfP1bmoTWQVdN8kS","WO9iWQiHW6VdSgnZ","aGvBW48S","aaBdNCo5mmoQW7SIquRcHcmO","5yEP5l+g6yse6Awd5O+o5P+B5y++5PYl","W6b4W74YeG","ot3cTrNcGCo4bmoQCCocW77cJq","W6CGW4VcHHqKWQSaEZldONW","reOBW4VcQW","WPlcR0xdT37dGCoqkmohWQxdQKRcI3bQ","EmknxSomW6VdLCoCkq","W4PSdrawWQLjWQa7WPCME2a","WQ1tWPOnW7e","AxRdS0FdSmoMpSo6zCo3W5O","WPq6x0rnW78qWRK0WP0","W6NdSmklWR4E","WOZcOSkYWORcOG","WO3cLeulya","mmoHWOW8WRq","6BQC55QE5lU65ysA5Bom5y2G5yMh55Uh6ioi5yIP6igw5yYs55w877YI","55A055Aq5Bgz5OMb5yA95lMk","W5DjW7bWW4u","W4FcQqdcO8k1","5yEd5l2Y6yEb6AEA5O+E5P+U5y+i5PYR","pIdcHZxcKG","WOhdPJ/dQ8obEMpcIa","W77cGEACOCoq5PAh5yQyjCo5W4am6zM55PwS5yEX6lE355wx","W4pdTSkSWQeT","sMBdJmkV","WQ7dHf3cHG","WP5sWRtdJvS","WPBdSItdOSolwg/cTmkKWPfqWQXn","W6BcTdpcPSkNWOtcNW","dCk7ySogW6NdGdW","WQvriCk5WPZdH8oXu8kE","s8k8CCo/W70","WQ7dHf3cHIdcUM3dImofw13dUCou","W7JcJmkqWPhcRSoiWRqJDSoUb8k+WOG","t8ksW5KRuG","oG/cLGhcQG","W7ldN8oKW4JcJmo4dmoQpmo/ybiT","gSodWO5CsW","WP4Hy1Dw","df7dQ8oyx8kCW6bSyb5G","D8k1rmodW6i","WQ/dSCkVy8oIxSkxDW","WQFcQhOMzq","W7hcRSo9oSk6b8odjaNdLfldL27dQG","x8oDW5BcGmowwSoNW77dHmoCWRy","A8k2W68BuY7cJhxdKwq","5P+F5zkY5y+E5l+l6AQW5lQU5AAnxColWRhcVq","mSkxcSk9s8k7qsxcPSo4WQqfWPu","DSkwsColW4JdLmoph8onWRpcQKi","W5XFW4vWW7q","W7ldK8o7W5NcLa","55EQ5BkR5OME5yY05lY255wE","iqn2W4K6WONcU8kM","h8olm8o6mG","WPHvWRaYW73dG3j+xr0","z3FcVmkuFa","WQeXwmkDWQS","W6yxCCoGW4lcO8kUCCkmh8oUaCov","zCkArmooW7S","WOxdUZpdPmoosu4","ha5fW7mO","WONcIv8SEMBdH8oQW5/dKYWy","xMWqW6RcO0X9EW","kZjplem","xSoRWP/cVeRdTCkQu8kk","bv/dTmoYs8kmW60","bfxdSSoYrSkkW6HTyr1mW5SSkW","W6mrW7e/WPO","ot3cTrNcI8oqnCobzmoAW4RcKZvxB2Td","6yAc6AAr5O+75P6e5BEr5ywJ6zs+","W7XEW6z/W7S","WP0mxCk3WP4","WQBcJhaAst/dK0jBFWBdSmo9kW","WQhdQSk4zmobx8keqsBdJKddNwK","6ywR6Aw25OYl5P6k5y2155AI","WRdcN8k3WQdcLW","W7vsW5HDW4e","WPX3WR0sW4S","rrBcVCooWPG","ncqTWPldR8oAWOpcRXVdUComb8kH","ma91mxG","p8krW4pcHNe","oYdcPbxcQmoYfa","WODxWP4eW50","W55dW4mAbtxcHCorpG","WQxcGhC+rZBdM0m","u8oOpai6WRvhpmkvW4K","DhycWOSx","WOtdNdZdT8oI"].concat(function(){return ["WPu/v8k6WOm","W4v/W5X9W507WQ1Fb8kSWO3dVxaGASk+","W4v/W5X9W54DWPb7bSkTWR3dOG","oZRcJrVcLa","WPCRW59OW6O","FHlcKmoLWP4aEczM","W57cHSoXt2GesfaRW5a","WRfIWO3dKwf/WQC9xqFdQL4zWQ1s","vLpcN8kfAmk9WQ4WsKZcQbWKjW","CCkIW481EW","pZjZiMGPWOpcMW","WRPLWPddJMa","cqfeW7yW","xa1TgSkP","vmoAW4JcN8ocxCoHW7ldRSoDWR0FpW","e3VdJSoIEa","ymkin21GomoX","W4FdKCkUWRqlgCkgrCoUWQPEtIm","jCogWPeIWOC","WONcIv8SD2VdLSoOW5NdUIWfdCo/dG","WQLMWOaSW60","W7/cNrdcI8k7","vCoOnGuKWP5/gmk6","WR4DEMbp","W4pcOt3dNrG1sCkmWQ7dPG","otb/cxi","WRrBW63cLcpcQSowvemQW4RcSbC","q0ddLmkDWOW","yrhcQmozWQC","WRX7W7FcOZG","WPRcTf/dVu7dPSoWlmoL","umkbC8onW48","x8kWWQNdQ8oZ","WQ/dSCkOACoVu8kCEZldJa","WRPaW7RcKWdcQ8ofyG","i8kOvSosW7NdSCo2","vwmhW6pcSuDU","W7CWW7OxWPa","W4ZcH8oKuL40sgOXW5ZdIeJcGG","imkhcSkcE8k7rrpcO8oLWQK","W4bJW5TZW7q2WQzO","xCoZla8DWRDfbSkEW5FdMSoHCmoOWRxcLG","W4RcL8oKAxu2wq","xCoIpcuGWRnfiCk6W4VdUSoIFmoYWRpcJa","WPdcSLtdU1FdI8oa","WOFcQCk6WONcT8kdtwaTWQ8","xvRcQSkNyW","mHlcI8kObf02","W7FdG8oJW5FcR8oJg8ordSoGCr8X","W7RcKCkfWPdcI8oc","jsa6WP7dNW","W6ZcKHpcVmkQ","Cmk9W6aAwdxcRfNdRW","WOtcSvqVva","W4jLW5PxW7C5WQS","gG/cMXpcSW","EHtdSdddTSkMqSkB","W7a2xCoqua","x8kvvSkAqCk0AN0knSkdeG","W4TKW4T6W7C0WQrP","55AQ5BkC5OUs5l6D5zo9eeJcQSo/5PsC6zML5yU05l2g55w5","WQeHECkLWRu","dSoho8kiWQ3cVGNdPsxdNqGg","xw4YW6xcPq","m3ldQSoKCa","maFcLbhcIW","WPFcS0ldUv7dGSobbq","WQJdLf3cRa7cShtdVSoCrMVdO8o1WQO","cJVcPXZcOq","WO1oWQmfW6JdV24","55I95lIA6yoo5yM35Bw75yEV6zER","WOjah8kmWOK","vmowW5FcJSoA","iCogWOmkWRC","oZv5jxatWO4","lr9zW4Wm","cmoteCom","WRSIqmkqWOi","FehcNmkUFq","wmkfFCoFW4pdVXtdMGZdNr4JWRdcLgq","h8ooWRz3Ca","mtaTWPZdNSoqWOm","WO9aWQuHW7RdUxi","W5PlW4qXpq","WQrSWOefW74","dcdcJmo+W77cPmo2A8kwWQRdH8kA","WRLIp8kDWOi","W7CMW6erWRi","WODzd8k7WQe","q3SkW6JcSW","WQxcIha+vJ/dIG","W4RcH8o5uxGvxvqJ","uCkaxmoUW70","wSkyBmotW7hdRXu","u8kTWP0","5P+v5zcb5BEd5l6f6AMRW7qmxxdKUkJMLPRLJ7ZKVOtNL7i","wMW9W7JcLW","fgddI8kMWRldOmot","WO0ZAKDi","ECkoWOddK8oO","WRtdVSk/ya","FZ7cM8omWOm","xCkzESorW7JdPHtdTq","pd83WPJdN8o9WQpcSsa","rmoCW6JcM8orqmoSW70","WO5Lz8oSuq","cmoBWR8kWPG","ncGEWQVdGG","W77cJmknWPlcImoUWOq","pZ3cQbRcP8oEna"].concat(function(){return ["WRBdUdddKCou","WP4gxSkYWPtcLWDl","WPGCrCk5WR7cVqTKl8kXchRcJ8k5W5i","W4hdTCkDWRy+","aSkDW7VcG30","xhJdQmk9WRm","umkEz8ovW6JdGIxdNce","WRDCW5RcTWW","6BU055ML5Bk05yYy5B6J5zcgWR7dUmozWPu","WRdcJ8kwWPJcIq","E2BcSCkfDW","qv83WOeg","6z+Z6kwB5ywD5l6c5yY55P6MWPGdW5VdVEAkLEEvQowZREAkGowfVUs5Sa","DmklwmohW6hdNSoF","uMOwW6hcQuD+","W4GnW6CzWRdcSCkGrNP6BcT9oG","zCkIrCowW4S","WRz8WQ7dHfy","dHXleMm","eCofkCoGmq","W6f4W4Cvja","WQxcJgG+xa","bKO7W5JcJLzl","W5pcQCk+WRVcNW","pdVcTqpcJa","uhChW63cIun0tCkMWPBdS3dcImo1Cc0","6yAh6AAO5O6B5P+b5y6o6zQv5Pwu5l2u6AQ4","WPWmW7b1","jWn7W4qPWQ/cImkoWR4","nCoxWO4JWR5sumoHW4HydGRdNsq","W41KW4z3W6qsWPDbiW","5yAk5l6j5y2t5P6p6iwweeJcQSo/","cSo2W5pcN8kSWQ9DEWfPW4BdOmk9","EbbQiSk3","gHPgi2S","uepcN8kVrSk3WRCgu1hcNGyf","W4PLcHCyWQTpW6ypWOuvyeJcSa","WQuGW79kW5i","cCk6W5JcNeK","cL7dQmoswmkNW5ffqW","W6NcSbFcOSkR","WQJcH2O6vXldQMP5","aLtdOSoYxmkkW6T8qWb9W5yaiCk1W5W","WQCxW556W7q","WR9UzCogzCoZuCkE","b8oBWOKoWOa","jSoBc8ksWR3cJSkopmoeWQBcQKam","hCoeWQHtAmkeW78","ESk7W6SCqrJcNa","W44mW7CzWQRcSCkJv1HNxszrmeBcQW","W4SbW6a9WR7cUmkOrW","WPC4EKfg","A383WRWctez/n8k/W58","WOlcR1tdQKxdVCobdComWQddT0VcKevJWRC","h8oNhCojnq","W4ldJCkPWRORgSkxCG","uCkbsmo6W4S","WOBcOSkPWRNcTmkpta","WOBcJbtdOY0sBa","pSoLWPjNxW","ibTAk0m","qhdcH8kmCa","WOPuWQuVW4VdS3jerXhdQCosva","B8kjk01Ze8onWO/dVG","pYH1kN8GWQpcRW","nd7cJJlcLW","cmoco8kbWQNdUZ/dKHZdJXG","W79qpmk5WOtdPSoR","E8owW4JcPmok","c8kQnSkHwW","kI3cOblcUSoebmoyzSoc","fITje1e","WRddRSkVAmoX","W6hcRmkjWPZcJG","WQBdN0FcJbdcNu3dLSo+","W44DW6CZWP7cU8k5D31+","WOLXB8oEqa","W7j1W70pbG","c8k6W5ZcTeNdSmkDwG","DbtcN8oUWOST","dCopfSocg8oPwvi","W5qsESo2sW","CCkQE8ohW48","W7W/W54lWR8","W5rCW54Mna","qM0eWRGZ","i8oBWQWZWPm","W7NdG8odW7tcHa","xmk3WP7dImojW6OHxrDgW4BdVmkRWR3dMLas","wmk3BmobW50","WRdcUei3zG","W7xcQt/cSCky","rvNcOSkts8klWRCNtvBcJq","nZn/lNOyWO3cMG","nHxcGCkVha","osHOkuidWO/cTmk9hSo+dLhcP8kZ","uCkNAmohW70","WRr+WORdN0f8WRyq","dqKWWRBdOq","W5FcQY7dVaafvq","W5NcNIRdSWS","z8kEtSkUoSkObWRdOa","6BQR55If5lQu5yA55BcK5y2R5yUp55Ma6icV5yUQ6ikv5yYD55Es77YG","W73cI3zH5zcR5y615ysZ5QYg5l2M6AQh","iCkhh8k2CmkhqrFcO8oL","E8kWwmoWW5G","WRvko8k5WPldV8o9wG"]}())}())}();return dt=function(){return t},dt()}const Jn="2.9.45";async function Zn(){wn(),ei(),Xn(),ae.CDKNotificationSwitch&&$n();}var bn="jsjiami.com.v7";const Sn=Ne;((function(t,e,n,i,r,a,s){return t=t>>5,a="hs",s="hs",function(o,l,c,f,d){const u=Ne;f="tfi",a=f+a,d="up",s+=d,a=c(a),s=c(s),c=0;const p=o();for(;[]&&--i+l;)try{f=parseInt(u(377,"!B*e"))/1+-parseInt(u(305,"%7Gp"))/2*(parseInt(u(374,")epy"))/3)+-parseInt(u(273,"dpO["))/4+-parseInt(u(337,"VYyK"))/5+parseInt(u(295,"ni(k"))/6+parseInt(u(361,"yq5v"))/7*(parseInt(u(299,"$3o3"))/8)+-parseInt(u(382,"NRkF"))/9*(-parseInt(u(315,"x#SW"))/10);}catch{f=c;}finally{if(d=p[a](),t<=i)c?r?f=d:r=d:c=d;else if(c==r.replace(/[qQXLnJPRYIVCfbHleOt=]/g,"")){if(f===l){p["un"+a](d);break}p[s](d);}}}(n,e,function(o,l,c,f,d,u,p){return l="split",o=arguments[0],o=o[l](""),c="reverse",o=o[c]("v"),f="join",o[f]("")})}))(6304,417347,ut,199),ut&&(bn=Sn(278,"ZgT("));function Ne(t,e){const n=ut();return Ne=function(i,r){i=i-270;let a=n[i];if(Ne.NSxryG===void 0){var s=function(d){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",m="";for(let y=0,C,S,j=0;S=d.charAt(j++);~S&&(C=y%4?C*64+S:S,y++%4)?p+=String.fromCharCode(255&C>>(-2*y&6)):0)S=u.indexOf(S);for(let y=0,C=p.length;y<C;y++)m+="%"+("00"+p.charCodeAt(y).toString(16)).slice(-2);return decodeURIComponent(m)};const f=function(d,u){let p=[],m=0,y,C="";d=s(d);let S;for(S=0;S<256;S++)p[S]=S;for(S=0;S<256;S++)m=(m+p[S]+u.charCodeAt(S%u.length))%256,y=p[S],p[S]=p[m],p[m]=y;S=0,m=0;for(let j=0;j<d.length;j++)S=(S+1)%256,m=(m+p[S])%256,y=p[S],p[S]=p[m],p[m]=y,C+=String.fromCharCode(d.charCodeAt(j)^p[(p[S]+p[m])%256]);return C};Ne.cSFLWt=f,t=arguments,Ne.NSxryG=!![];}const o=n[0],l=i+o,c=t[l];return c?a=c:(Ne.iHztNT===void 0&&(Ne.iHztNT=!![]),a=Ne.cSFLWt(a,r),t[l]=a),a},Ne(t,e)}function ut(){const t=function(){return [bn,"IjHlsLjfPiCQabebmit.RLcnqJoHmPe.OVvYq7Xq==","W6ldLZtdUti","DqO7hHi4WOz2nCoIqa","WRm0nxqTv8omWO3cVW","tSoGWO7cKCklAaK","pd9Sjb80","AheqWRO5W78YvSoHc8ozDL0","rmk7vwKu","tJW3hXG","tHZcHaC+WP8KW5FdLSkYW6VcJG","ptVcT8orW50xW6VdJmoYyIWhlmkApSk7W5zsW6FdQmop","fSkmW4VdSmoSr8oLW4ujg8otWOSdqG","WQjEWOCxua","jCkIW4TpW7tdKmkI","W77cMmo3W5y","dSksW5lcRSkL","o1NdTMTu","pSoWW5FcPrS","WPJdQsJcLuO","W7ihbmoTW5u","gCkgW5JcTCkGW4NdQYddNtFcLq","rSk+Fr09","oYPDW6P/WQX+CSoI","u8kHDLFdSmkdhG","5P6p5R655REhgoAxIoApLEwZMUAlH+wmSEw/JoA8H+A2GoEIUG","j8k2W6D3W7e","cmoBW7/dTgK","W5yLm8oTW54","zCoWWO0cWQJcI8o3W7nAz8oBuMu","Emo2qmkoWPy","W4lcQmo1DSkw","WQfFWRNcPHS","W5vlCSkBWPLrnW","xreIiSkR","WQZdKtzOEG","arOQfmk+W6eZ","W5SfoSkrrW","brzgici","WQddM8kHWOHJWOjQtmk9ra","r8kkvvKs","W7CbW4/dJJS","WOvlWO0qEblcKSkdnCkvWQC","W6ZdTIBdHtm"].concat(function(){return ["WQ50AmkmWRy","s8kjAfxdGW","rmkpWOe7jZCEEXtcJx3cOeXn","W4VcLL/dT8ofjCo4sx3cUCkg","E8keurGtWOhdOmoUnSk9","eSoDW4foE2zklHpcN27cKMjF","W6fICH0/","W4dcPepdT2K","cf50ASo1","fSoKW5/dS1y","eSoRESkKf8krWPLfW6i","zCoiWPZcVmkY","iwvSxCoV","zmodWQBcRSkD","gSoiW6FdTgVdH8oFW5Wt","W5tdLmoaW5iW","WPZdNb/cRNvfW43cVJ0Ft8kM","ASopWOVcRmk7","WRpcIxblrSoLkmkg","kSkcW5/cM8kbW43dQctdLcBcPCocW77dLG","5OAK6loy5l2E5A2T55ES5Bgc5OIt55QH5Ps25O+DW4JdKgBdPEEBK+IcV+s8R+MPTEs5VhJcMCk15PEHzoEuKCkX5Qgh5Bsz5yEo6you5lMG6yghoZpcOmoa5B6g5O2G5Pgs5lYN5BAJ57Mp5yAI6ygW5yYc55ELWQe9m1JKU63MLihOHiJLIiZNUldMNl3LJPhNLBVdJtbCWRRKU6dPLilLIjVOOQhLH7/PGkFLJAtNLjhdOclcP8kB6iAR5yIZ56AU5P+c5y6a55wx","WP7dPqJcPSo7","W4ddTHRdPZ4","W4lcPLZdMhu","W5ddQ8oNWPa6lbnXW4S","WPJdIW7cM2btW6/cLcynvSkfAYlcOmkFWQNdTSkrWQtcJW","W6ldGCoswCkHe8o+","WOldOWFcHtxcH8o7W6mBWQxcJSozfG","WPFdOSkPkSoiWQrkW7qdDeNdSmk5","B8oQz8kxWP93WQWFWQ4","fuRdHCoExSo7W5tcKSkvW7ZdOCoDErS","i0zVCmoV","W5CqWRf5WPm","Fmk2ufldVq","saaOkc8","W6FcM8o0W5fn","hSoziXHqtqHeW6VdVCo1hwy","W6i9W73dJG","WP5KzCk9WOP2ivxcM8owW7xdSq","WOXXyCkqWPDHmKJcKmomW6/cU3xcRICE","W4/dKmo6WRS6","f3nCuCov","eWqYCa","WPX8WRi8zW"].concat(function(){return ["Amo9ESk3WODxWRCBWQNcJ0yT","W7qiiSkxEG","W47cJ27dU8oP","WR/cJ2fetCo2","5Bsd5R2/5RwW","WPfLWPdcIaq","W4JcV8oJymkzW7ex","hwaQW4FdVNSeWO1hguapmW","WRO2efiN","sWyKdmkTW78rW6DUWOeJDq","xd1+WPxcQYnyWOjTd3S","44kv5Rkm5lU+5lYV5zkD44gl","i2rZFSofWOldOtNdMSkGamkRWOiZWOldV8k9pSkH","mgnZC8onWPpdSctdLG","BCkiqamvWPpdG8oUlCk7WRBcVSk0WPy","id1+pZ0","dmktW4ddUSoOqSoJWOCoeCom","s8o9WRZcUmk6","W4fKyt0zW7RcVqNdPSkMWQRdNG","qtrSWOxcRYXs","cvjPECklW4y2W4PlWPu","xSkEFuGr","W4NdVmo9WOi3hX8","F8oruZyXW4SSabZdJSozzq","WRjFWRxcOHNdKg8JW7i","W7tdNCodWOu5","W48DWRHaWPa","WRldV1hdQ0zMfmoDDa","xHuTr8oUWOSY","WPxcQmk7W4bMseL/W6avptrE","rmkFWPWslXS3","W4xcJ3ldN8o2W4XkWQ9YtW","WPhdSaHVDmodWOa","W5JcLL/dP8ot","bqmLESoSWPm","5B+H5yMm5R+v5Rwh56gS5P6h5PAh5P2/6iw3W5K","pCkTf0r2","umkEWOWslG","W6NdOtFdKXm","W6uWW6ZdOqTOW4SpB8kvoMK","W6HRCCovW5FcNCkxWOVdNKFcQH7cOCoiWPLEWQaFhSo+WOLnW7/cRxWmCmob","W6rlyc08"]}())}())}();return ut=function(){return t},ut()}function wn(){var r;const t=Sn,e={uuPoI:"acTooltip",qnLCH:"green",qrsFh:function(a,s){return a===s},gqEIm:"Lnsjz",VJuQQ:t(370,"ZgT("),oZCIW:function(a,s){return a+s},MVLGR:function(a,s){return a+s},gEtQJ:function(a,s){return a+s},ouERE:t(389,"]kS&"),SbFCt:function(a,s,o,l,c,f){return a(s,o,l,c,f)},IKkCF:function(a,s){return a!==s},etvON:"CbDNK",BrUvl:function(a,s,o,l,c){return a(s,o,l,c)},cnNxe:t(326,"5dT^"),qqXLl:function(a,s,o){return a(s,o)},MfrUX:t(358,"izxB"),oaGPv:t(291,"W$O7"),NNMwZ:function(a,s){return a!==s},sHpJt:t(307,"RH8!"),jdDxw:function(a,s,o){return a(s,o)},uMmqR:function(a,s,o){return a(s,o)},haqIe:function(a,s,o){return a(s,o)},Epsml:t(365,"%2NH"),xPrWv:function(a,s){return a==s},mOLnK:function(a,s){return a===s},kItJl:t(275,"gYt0"),YMbAX:t(381,"5OR1"),ScgaR:function(a){return a()},wxBEP:t(394,")ABX"),PDMto:function(a,s){return a(s)},WHLKq:function(a,s){return a(s)},jbTDe:t(287,"(c$&"),iqwik:"https://goka.top:8080/signup",riMAt:t(349,"$3o3")};if(!w.userID){(r=B.class(e[t(392,"5OR1")]))==null||r[t(277,"93xa")]();return}let n=document[t(312,"x#SW")]("AC");const i={username:w[t(272,"^WXh")],playername:w[t(328,")!jy")],guildID:w[t(384,"x#SW")],password:n.value,version:Jn};fetch(e[t(369,"^WXh")],{method:"POST",headers:{"Content-Type":e[t(342,"W$O7")]},body:JSON.stringify(i)})[t(352,"NRkF")](a=>a[t(281,"%7Gp")]())[t(347,"RH8!")](a=>{const s=t,o={BVAAd:function(c,f){return e.IKkCF(c,f)},iUDHq:e[s(322,"MyT9")],baADw:e[s(395,"]kS&")],CuypH:function(c,f){return e.MVLGR(c,f)},DqFTY:s(285,"5dT^"),MGfKo:function(c,f,d,u,p){return e[s(343,"fgUN")](c,f,d,u,p)},LZOvt:function(c,f,d,u,p){return e.BrUvl(c,f,d,u,p)},nhzix:e.cnNxe,gWubN:function(c,f,d){return e[s(292,"ni(k")](c,f,d)}};let l=a.activated?e[s(344,"gYt0")]:e.oaGPv;if(a[s(290,"fgUN")]?e[s(288,"97t)")](e[s(390,"!B*e")],s(396,"5OR1"))?II1lII1i[s(372,"]kS&")](s(397,"gYt0"),Iil1liI1):(n.setAttribute(e.VJuQQ,a[s(373,"yq5v")]),a.activated?e[s(306,"iRM6")](setTimeout,()=>{var f;const c=s;if(o.BVAAd(o.iUDHq,o[c(274,"iRM6")])){(f=l11lii1l[c(387,"@YW4")](c(308,"htwF")))==null||f[c(335,"5dT^")]();return}else n.setAttribute(o.baADw,o[c(310,"$3o3")](o[c(282,"(c$&")](`当前激活码有效期至
`+a.expirationTime[c(333,"VYyK")](" ")[0],`
`),l));},3e3):setTimeout(()=>{n[s(393,"RH8!")](o.baADw,l);},3e3)):a[s(324,"pDHu")]?e[s(311,"fgUN")](setTimeout,()=>{const c=s,f={HHlWw:e[c(284,"6RRB")],LOnxT:e.qnLCH};e[c(317,"VYyK")](e.gqEIm,"qVpWp")?iI11i1Il("感谢你对界小抄的支持<br>皮肤体验中sp/族/界/标已全部互通<br>快捷操作已经全部可用<br>严教自动结果可用<br>一键制衡全选可用<br>自动秒杀可用",f[c(303,"h6Ql")],1e4,f[c(318,"MyT9")]):n[c(348,"$3o3")](e[c(327,"kke2")],e[c(331,"izxB")](e[c(353,"htwF")](e[c(355,"h6Ql")](e[c(309,"5OR1")],a.expirationTime[c(293,"pDHu")](" ")[0]),`
`),l));},3e3):e[s(362,"slQ#")](setTimeout,()=>{const c=s;n[c(354,"xzkx")](c(313,"@YW4"),l);},3e3),a[s(386,"lc8t")][s(314,"97t)")](e.Epsml)&&setTimeout(()=>{const c=s;e[c(351,"MyT9")](Fe,a[c(360,"6Dx%")]+"<br>激活码不限于自己使用<br>请及时点击该通知以复制到粘贴板",e[c(356,"@YW4")],3e4,"green",function(){const f=c,d={XFXSw:f(364,"yq5v"),ieQKd:function(u,p){return o[f(332,"5OR1")](u,p)}};o[f(283,"uf)3")]===o.DqFTY?Xe(a[f(376,"N4wT")],![]):Il11lIIi[f(363,")epy")](d[f(323,"kke2")],d[f(294,"NDZN")](`当前激活码有效期至
`+Il1I11iI[f(368,"97t)")][f(375,"iRM6")](" ")[0]+`
`,i11iIIIl));});},1e3),a[s(366,"MyT9")]){const c=a[s(366,"MyT9")][s(271,"kke2")](" ","T"),f=new Date(c);w.guildVIP[w[s(336,"%2NH")]]=f;}if(e.xPrWv(a[s(289,"dpO[")],!![]))if(e[s(319,"pDHu")](e[s(350,"N4wT")],s(275,"gYt0"))){const c=e[s(321,"kke2")][s(345,"%7Gp")]("|");let f=0;for(;[];){switch(c[f++]){case"0":w.v&&e[s(316,"]kS&")](li);continue;case"1":w.v=!![];continue;case"2":document[s(329,"(c$&")](e[s(296,"xzkx")])[s(391,"x#SW")][s(388,"NRkF")]=e[s(371,"kke2")];continue;case"3":e[s(380,"W$O7")](setTimeout,()=>{const d=s;o[d(286,"NDZN")](Fe,"感谢你对界小抄的支持<br>皮肤体验中sp/族/界/标已全部互通<br>快捷操作已经全部可用<br>严教自动结果可用<br>一键制衡全选可用<br>自动秒杀可用",d(320,"t5hY"),1e4,d(297,"6Dx%"));},5e3);continue;case"4":w[s(334,"N4wT")]=0;continue}break}}else IIiiIll.v=!![],i111ll1[s(340,"A)TG")](o.nhzix)[s(279,"htwF")][s(357,")!jy")]="2px solid rgb(242, 222, 156)",ilil1l1l.v&&l1i1iii(),o[s(341,"MyT9")](l11liIil,()=>{const c=s;o[c(304,"^WXh")](Iliil1l,c(330,"@YW4"),c(270,"slQ#"),1e4,c(298,"qVr#"));},5e3),li1IiiiI[s(378,"qVr#")]=0;else w[s(339,"xzkx")]=e[s(379,"N4wT")](parseInt,a[s(367,"MyT9")]);e.WHLKq(ii,a[s(280,"ni(k")]),n[s(325,"BxQb")]="",e[s(359,"qVr#")](Vn,a.activated),e[s(301,"lc8t")](ct,!![]);}).catch(a=>console[t(300,")epy")]("Error:",a));}function $n(){fetch("https://goka.top:8080/CDK",{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{ki(t,"CDK");}).catch(t=>console.error("Error:",t));}async function Yn(t,e){const n=`https://goka.top:8080/getLottery?username=${t}&secId=${e}`;return fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>(w.lotteries=i,console.table(i),i)).catch(i=>(console.error("Error:",i),[]))}async function Xn(){try{const t=document.getElementById("choujiang");t.href="https://goka.top:8080/choujiang?username="+w.userID,(await Yn(w.userID,0)).forEach(n=>{Rn(n.secId,n.itemId,n.itemNum,n.times);});}catch(t){console.error("Error during fetching:",t);}}async function kn(t,e,n,i,r){const a={username:w.userID,itemId:e,secId:t,times:n,level:i,itemNum:r};fetch("https://goka.top:8080/recLottery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).catch(s=>console.error("Error:",s));}async function Wn(t){if(this.checked)this.removeEventListener("change",Wn);else return;const e={username:w.userID};try{const i=await(await fetch("https://goka.top:8080/trial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return w.trialTime=parseInt(i.message),console.warn(w.trialTime),ct(!0),i}catch(n){return console.error("Error:",n),[]}}async function ei(){const t={tianGuo:!1,username:w.userID,officerLv:w.curOfficerLv,getData:!0};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+e.PlayerTianGuo+"/"+e.PlayerCount+" = "+(e.PlayerTianGuo/e.PlayerCount).toFixed(2);}).catch(e=>console.error("Error:",e));}async function ti(t){let e={tianGuo:t,username:w.userID,officerLv:w.curOfficerLv,getData:!1};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(n=>n.json()).then(n=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+n.PlayerTianGuo+"/"+n.PlayerCount+" = "+(n.PlayerTianGuo/n.PlayerCount).toFixed(2);}).catch(n=>console.error("Error:",n));}async function vn(t=w.nickname){try{const e=await fetch(`https://goka.top:8080/support?username=${t}&userid=${w.userID}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.status===204||e.headers.get("Content-Length")==="0"){console.warn("今日已3助力");return}if(e.ok){const n=await e.json();for(let i of n){let r=0;for(;;){console.warn(i);let a=Bn(i);if(await me(5e3),a)r++;else break;if(r>2)break}}}}catch(e){console.error("Error:",e);}}async function ni(t){try{await fetch("https://goka.top:8080/setting",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});}catch(e){console.error("Error:",e);}}async function ii(t){try{const e=(t==null?void 0:t.reduce((n,i)=>(n[i.settingKey]=i.value,n),{}))||{};Rt.forEach(([n,i,r])=>{const a=document.getElementById(n);if(!a)return;const s=e[n],o=Pe(i),l=s!==void 0&&o===r?s==="true":o;if(a.checked!==l){a.checked=l;const c=new CustomEvent("change",{bubbles:!0,detail:{source:"server-sync"}});a.dispatchEvent(c);}});}catch(e){console.error("Error applying settings:",e);}}var In="jsjiami.com.v7";function De(t,e){const n=it();return De=function(i,r){i=i-243;let a=n[i];if(De.iGdKjd===void 0){var s=function(d){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",m="";for(let y=0,C,S,j=0;S=d.charAt(j++);~S&&(C=y%4?C*64+S:S,y++%4)?p+=String.fromCharCode(255&C>>(-2*y&6)):0)S=u.indexOf(S);for(let y=0,C=p.length;y<C;y++)m+="%"+("00"+p.charCodeAt(y).toString(16)).slice(-2);return decodeURIComponent(m)};const f=function(d,u){let p=[],m=0,y,C="";d=s(d);let S;for(S=0;S<256;S++)p[S]=S;for(S=0;S<256;S++)m=(m+p[S]+u.charCodeAt(S%u.length))%256,y=p[S],p[S]=p[m],p[m]=y;S=0,m=0;for(let j=0;j<d.length;j++)S=(S+1)%256,m=(m+p[S])%256,y=p[S],p[S]=p[m],p[m]=y,C+=String.fromCharCode(d.charCodeAt(j)^p[(p[S]+p[m])%256]);return C};De.EBntOc=f,t=arguments,De.iGdKjd=!![];}const o=n[0],l=i+o,c=t[l];return c?a=c:(De.FFBinO===void 0&&(De.FFBinO=!![]),a=De.EBntOc(a,r),t[l]=a),a},De(t,e)}((function(t,e,n,i,r,a,s){return t=t>>1,a="hs",s="hs",function(o,l,c,f,d){const u=De;f="tfi",a=f+a,d="up",s+=d,a=c(a),s=c(s),c=0;const p=o();for(;[]&&--i+l;)try{f=-parseInt(u(245,"c!b!"))/1*(parseInt(u(248,"o[2j"))/2)+parseInt(u(287,"zWH!"))/3+parseInt(u(259,"ZFF#"))/4*(parseInt(u(261,"7AhW"))/5)+-parseInt(u(312,"WUoc"))/6*(-parseInt(u(270,"MZKp"))/7)+parseInt(u(290,"o[2j"))/8+-parseInt(u(308,"WUoc"))/9*(-parseInt(u(302,"mH!4"))/10)+-parseInt(u(313,"o[2j"))/11;}catch{f=c;}finally{if(d=p[a](),t<=i)c?r?f=d:r=d:c=d;else if(c==r.replace(/[GFMJAyufxQIBwDLeqE=]/g,"")){if(f===l){p["un"+a](d);break}p[s](d);}}}(n,e,function(o,l,c,f,d,u,p){return l="split",o=arguments[0],o=o[l](""),c="reverse",o=o[c]("v"),f="join",o[f]("")})}))(404,279446,it,204),it&&(In=it);function it(){const t=function(){return [In,"LAujwBAsjDGifaIImJiMex.qAcFoqIymE.BfvG7Q==","WQBdIHBcLmkJWQZdLMecWOa","WQNcRMRdMSos","A31yWRKX","W77dOINdHSkvWR4","bmokW63dQ8o9","z8oXedBcU8k2ktBdUCoaWOXECq","WR/dGmoKWPvV","wCkHorJcHeJdOmoLWQHQjG","zbNcMCoGWRa","W47cN8onx8ol","jSo1W7etua","WPvzqq","W7tcGL8GpG","lCkFfCkareu","nCkQseRdVG","cSo1WOLvWPS","n8kSthRdIW","nSocamo4WQmUwv5vuSoSrSoM","WQznWPBcUItcHmoyCSoNCSkT","a1naW7xdQa","rmopdYNdPK4uWOZdQa/cQXO","rCkEwmojWR4","gedcKmkmW5O","W6pdOJZcMCke"].concat(function(){return ["dsxcSSosWOW","WPnhEmoBDW","WOyHdCk6W5G","WQbaotddNW","WO/cLGn7ca","DSk5WPtcGSkdCYj0DrHluhe","W4dcQfxcLW","aCoXWP4","DCk7W7VdNmoSd2zs","qSkwW5WAx3RcLCor","WOqwhG","o8ocWQjqsW","bmoKWPOVwbXwWOJdOSoip8odkSkNWPZdM2mTy8oedwRdTIGDW6/cJSkPod5VfSo0W7NcNSkpvSot","W6lcM1CRoYq","W6tcLCkMW7qGnmkCWORcVxv6WQG0","W7jkhZFdICo0WQ9iomk/","nHRdNSk6WRi","gxOBuwNdQmobm8kqWOO","W6FcNCkSW7Xuq8ozWOZcG3K","rColdY7dPKPzWO7dSYFcSHNdPW","W7RdOchcKCk0AG","kwLeW5ldNa","bx3cI8kdW5u","FSkGESkWW5G","WOhcR0BdM8oe","A3/dTCoEWRVcGmkmbZ8"].concat(function(){return ["rKfwW7bcW6PstMZcQa","wcPLWQGh","sCofasRcHsWGWRJdIJe","WOWjuMy","W4jdecddTG","zCoaWPJdLSkE","y8kcW4pcK8o8","ghqeCvRdRSok","eSkpEdFcKgS","imoUW4/dLSoijxXyuYXU","A13dH8kyWOz1WObO","W5ZcQKRdMmkh","WRRdUSk3hCkq","jf4ucrJcTr7cUq","ymkaW7RcO8optSoUg8oOfhqrW4vln1e9WRLLDSoK","aeJdV8kxW77dQMTdi8oBACkT","lbipW65P","WQxcN8kknJG","W7jNpGtdMSooWOf4aCkeWPfrW47dUSkReSo3WPpcMcnJ","xmoapCk0W6a","xSo0y8ospa","WQxcGmkuWPhcJbRdJ8kFW7Xy","bSoYBK3dGHNcU8ogWO5zjf4z","W67dOZtcJ8kutsxcL39iW6Spyd9JWOG"]}())}())}();return it=function(){return t},it()}async function Cn(t,e){const n=De,i={LHrrj:function(s,o,l){return s(o,l)},ySYHt:function(s,o){return s+o},GyEDO:function(s,o){return s-o},PJvgl:function(s,o){return s!=o},WmtFv:function(s,o){return s||o},KThrz:function(s,o){return s===o},amntF:n(289,"5ZSN"),CALXG:function(s,o){return s!==o},dxfoj:n(293,"pD4c"),sHwMy:function(s,o,l){return s(o,l)},ckjDs:function(s,o){return s+o},nulBv:function(s,o){return s*o},cQAol:function(s,o,l){return s(o,l)},cUSXL:n(291,"WvGq"),jepYy:n(306,"U%))"),MwIob:"POST",oVcdj:n(269,"pD4c"),rYEBb:"Error:"};let r=Oe[t];r||(Oe[t]=r={});let a=![];if(e[n(253,"$W1f")](({figure:s,game_result:o,game_time:l,game_over_time:c,used_general:f,label_mode:d})=>{const u=n,p={kWGfv:"GameEventDispatcher",VSwfY:function(m,y,C){return i[De(258,"QO@w")](m,y,C)},yPOyB:function(m,y){return i[De(272,"J[b6")](m,y)},OPkym:function(m,y){return m*y},vBfcy:function(m,y){return i.GyEDO(m,y)},VIDdX:function(m,y){return i[De(252,"XnD6")](m,y)},naXIp:function(m,y){return i[De(294,"c!b!")](m,y)}};if(i[u(265,"H6b#")](i[u(286,"rOiC")],"OfKCa")){const m={qRAiL:p[u(285,"ZqrQ")],PfPFw:u(264,"(jgf")};!_0x47b3de&&p[u(280,"c(zW")](_0x7b0328,()=>{const y=u;_0x4785b0[y(298,"ThS#")](m[y(263,"xMv]")])[y(244,"eDN]")](m[y(278,"7AhW")]),_0x39a64f.Browser[y(273,"61In")][y(246,"LV8n")]();},p[u(243,"zWH!")](_0x2daa25[u(251,"l[ID")](p[u(257,"MZKp")](_0x421731.random(),p.yPOyB(p.vBfcy(3e5,1e4),1))),1e4));}else i.PJvgl(o,255)&&!r[c]&&(i[u(274,"mH!4")](i[u(282,"E1&^")],u(310,"4WNq"))?p[u(247,"i%n#")](_0x2e9eb7,255)&&!_0xa23c84[_0x5a6309]&&(_0x48270e[_0x2b28df]={shenfen:_0x1af845,result:p[u(262,"wgF%")](_0x4fbd0a,0),duration:_0x5c2ca9,general:_0xb7f677==null?void 0:_0xb7f677[u(301,"U%))")](m=>_0x3a3cb1[u(255,"mH!4")][m]||m)},_0xac2191=!![]):(r[c]={shenfen:s,result:i[u(297,"j5SI")](o,0),duration:l,general:f==null?void 0:f[u(281,"$uo]")](m=>M[u(288,"llwn")][m]||m)},a=!![]));}),a||e[n(283,"^Rz*")]==0){a&&i.cQAol(Ke,n(311,"$W1f"),mt);try{i.cUSXL!==i.cUSXL?(_0xbf3d56[_0x569fd7]={shenfen:_0x48c1b3,result:i[n(266,"09uN")](_0x3143c0,0),duration:_0x4b9b2c,general:_0x16adb1==null?void 0:_0x16adb1[n(304,"PMnz")](s=>_0x1c4593[n(277,"rt^U")][s]||s)},_0x39f9ca=!![]):w.v&&await i[n(315,"5ZSN")](fetch,i[n(276,"WUoc")],{method:i[n(271,"eDN]")],headers:{"Content-Type":i[n(296,"PMnz")]},body:JSON.stringify({[w[n(314,"pD4c")]]:a?Oe:{}})})[n(300,"eD*A")](s=>s[n(249,"Ta8(")]()).then(s=>{const o=n;!s&&i[o(316,"DEWH")](setTimeout,()=>{const l=o;B[l(250,"(jgf")]("GameEventDispatcher")[l(279,"urFX")](l(260,"XnD6")),Laya.Browser[l(254,"TG1r")][l(309,"(jgf")]();},i[o(284,"rOiC")](Math[o(251,"l[ID")](i[o(292,"DEWH")](Math[o(307,"E1&^")](),i[o(295,"GUr3")](3e5,1e4)+1)),1e4));});}catch(s){console[n(305,"cAlu")](i.rYEBb,s);}}}async function si(t=w.userID){const e=`https://goka.top:8080/gameRecords/get?username=${t}`;return fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>(Ln(n),n)).catch(n=>(console.error("Error:",n),[]))}async function ai(t){try{console.warn("postCDK",t),fetch("https://goka.top:8080/CDK",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});}catch(e){console.error("Error:",e);}}const Je=["TableGameScene","HeroBattle1v1GameScene","ShenWuZaiShiGameScene","RogueLikeGameScene","RogueLike1v1GameScene","PointRace2V2GameScene","ZhuGongShaGameScene","GuanDuZhiZhanGameScene","ShiDianYanLuoGameScene","HuLaoGuanGameScene","ChallengeMatchFigureGameScene","ChallengeMatch2v2GameScene","GuideFiveFigureGameScene","GuideHappyGameScene","NewBieForceTrainGameScene","NewBieForceGameScene","QMBZGameScene","LZHZGameScene","ShenZhiShiLianGameScene","QianLiDJGameScene","DouDiZhuGameScene","GuideGameScene","New1v1GameScene","TSGameScene","XzcbpGameScene","PaiWeiGameScene","GuoGameScene","ChallengeMatchDouDiZhuGameScene","ChallengeMatchCountryGameScene","OfflineMatch2V2GameScene","DouDiZhu2023GameScene","ObDDZGameScene","ObGamePractice2v2Scene","ObGameScene"];async function Qe(t,e=20,n=500,i=()=>{}){const r=await Promise.resolve(t());if(r){i(r);return}else e>0?setTimeout(()=>Qe(t,e-1,n,i),n):i(null);}function fe(t,e=20,n=500){return new Promise(i=>{Qe(t,e,n,i);})}function me(t,e){return new Promise((n,i)=>{setTimeout(()=>n(e),t);})}const B={instance:{},scene:"",gamescene:null,flag:null,limit:300,order:[],select:()=>null,skill:()=>null,card:()=>null,seat:()=>null,btn:()=>null,deal:()=>null,chat:()=>null,trace:()=>null,classes:Object.fromEntries(["SgsSprite","SgsText","SgsTexture","SgsFlatButton","SgsSpriteButton","SgsSpriteFilterBtn","SgsImage","SgsFlatImage","BaseEffect","BaseSpineEffect"].map(t=>[t,void 0])),class(t,e,n){var i,r,a,s,o,l,c,f,d,u,p,m,y,C,S,j,ne,k,D,z,_,Z,ee,ge,be,Se,I,A,V,Y,h,x,v;if(e||!this.classes[t]){if(typeof n=="function")this.classes[t]=n();else if(n)this.classes[t]=n;else if(t=="GameEventDispatcher")this.classes[t]=(i=this.find("SceneLayer"))==null?void 0:i.ged;else if(t=="SgsText")this.classes[t]=(r=this.find("SceneLayer","","topMenu","timeLabel"))==null?void 0:r.constructor;else if(t=="SgsTexture")this.classes[t]=(a=this.find("SceneLayer","","topMenu","lineBg"))==null?void 0:a.constructor;else if(t=="SgsFlatButton")this.classes[t]=(s=this.find("SceneLayer","","topMenu","logo"))==null?void 0:s.constructor;else if(t=="SgsSpriteFilterBtn")this.classes[t]=(o=this.find("SceneLayer","","topMenu","backBtn"))==null?void 0:o.constructor;else if(t=="SgsSpriteButton")this.classes[t]=(f=(c=(l=this.class("SgsSpriteFilterBtn"))==null?void 0:l.prototype)==null?void 0:c.__proto__)==null?void 0:f.constructor;else if(t=="SgsSprite")this.classes[t]=(p=(u=(d=this.class("SgsSpriteButton"))==null?void 0:d.prototype)==null?void 0:u.__proto__)==null?void 0:p.constructor;else if(t=="TimerManager")this.classes[t]=(m=this.class("ActivityGameDataManager"))==null?void 0:m.timerManager;else if(t=="ServerProxy")this.classes[t]=(y=this.class(this.classes.TaskManager?"TaskManager":"ActivityManager"))==null?void 0:y.proxy;else if(t=="AchievementManager"){let b=!this.instance.AchievementView;this.classes[t]=(C=this.get("AchievementView"))==null?void 0:C.achManger,b&&this.del("AchievementView");}else if(t=="ActivityManager"){let b=!this.instance.TaskDailyView;this.classes[t]=(S=this.get("TaskDailyView"))==null?void 0:S.manager,b&&this.del("TaskDailyView");}else if(t=="PromptLayer"){let b=!this.instance.FcmTipWindow;this.classes[t]=(ne=(j=this.get("FcmTipWindow"))==null?void 0:j.ParentLayerInstance)==null?void 0:ne.constructor,b&&this.del("FcmTipWindow");}else if(t=="ActivityGameDataManager"){let b=!this.instance.RogueRuQinWindow;this.classes[t]=(k=this.get("RogueRuQinWindow"))==null?void 0:k.adManager,b&&this.del("RogueRuQinWindow");}else if(t=="GeneralSkinManager"){let b=!this.instance.GeneralSkinView;this.classes[t]=(D=this.get("GeneralSkinView"))==null?void 0:D.gsm,b&&this.del("GeneralSkinView");}else if(t=="TaskManager"){let b=!this.instance.MentorSelfTaskView;const T=this.get("MentorSelfTaskView");T==null||T.tabCliCked(1);const E=(z=this.find(T,"MentorSelfLiCheng","MentorLiChengUI"))==null?void 0:z[0];if(!E)return null;E.isSelf=!0,(_=E.taskData)==null||_.splice(0,1/0,{HasAward:!0,baseVo:{name:"",MentorReward:{ApprenticeItemsList:[]}},TaskConditions:[]}),E.updateContent(),this.classes[t]=(be=(ge=(ee=(Z=E==null?void 0:E.panel)==null?void 0:Z.content)==null?void 0:ee._children)==null?void 0:ge[0])==null?void 0:be.manager,b&&this.del("MentorSelfTaskView");}else if(t=="RogueLikePveManager")this.classes[t]=this.find("SceneLayer","RogueSmallMapScene","PveMgr"),this.classes[t]||(this.classes[t]=(Se=this.get("RogueSmallMapScene"))==null?void 0:Se.PveMgr,this.del("RogueSmallMapScene",3e5));else if((t=="BaseEffect"||t=="BaseSpineEffect"||t=="SgsImage"||t=="SgsFlatImage")&&(this.classes[t]=(V=(A=(I=this.gamescene)==null?void 0:I.SelfSeatUi)==null?void 0:A.getEffectType(t=="BaseEffect"?2:4))==null?void 0:V.constructor,!this.classes[t])){const b=this.get("SkinInfoWindow");if(!(b!=null&&b.skinBigSps))return;Object.assign(b,{skinData:{skinBaseVo:{}},generalinfo:{ItemID:1}}),b.showRightInfo(),b.skinBigSps.CreateBgEffect(),b.skinBigSps.CreateSpineEffect(),this.classes.SgsImage=(Y=b.skinImg)==null?void 0:Y.constructor,this.classes.SgsFlatImage=(h=b.skinRightImg)==null?void 0:h.constructor,this.classes.BaseEffect=(x=b.skinBigSps.bgEffect)==null?void 0:x.constructor,this.classes.BaseSpineEffect=(v=b.skinBigSps.spineBg)==null?void 0:v.constructor,this.del("SkinInfoWindow");}}return this.classes[t]},get(t,e){var n;if(t in this.classes)return this.class(t)?new this.classes[t]:void 0;if(e||!this.instance[t]){this.del(t),this.instance[t]=Laya.ClassUtils.getInstance(t);try{this.instance[t].Init();}catch{console.error("Laya instance "+t+" Init() error!");}}return (n=this.instance[t])!=null&&n.timeoutId&&clearTimeout(this.instance[t].timeoutId),this.instance[t]},del:(()=>{function t(e){this.instance[e]&&(e.endsWith("Window")?this.instance[e].Close():this.instance[e].destroy(),delete this.instance[e].timeoutId,delete this.instance[e]);}return function(e,n=0){this.instance[e]&&(this.instance[e].timeoutId&&(clearTimeout(this.instance[e].timeoutId),delete this.instance[e].timeoutId),n?this.instance[e].timeoutId=setTimeout(()=>{t.call(this,e);},n):t.call(this,e));}})(),find:(()=>{const t=i=>Array.isArray(i)&&i.length==1?i[0]:i,e=i=>Object.prototype.toString.call(i)==="[object Object]";function n(i,r){var a;if(r in i)return i[r];{let s=r?(a=i==null?void 0:i._children)==null?void 0:a.filter(o=>{var l;return o.name==r||((l=o.constructor)==null?void 0:l.name)==r}):i==null?void 0:i._children;return s!=null&&s.length?t(s):[]}}return function(...i){let r=e(i[0])?i.shift():Laya.stage,a=i.reduce((s,o)=>s instanceof Object?Array.isArray(s)?s.length?Array.isArray(o)?t(s.flatMap(l=>o.flatMap(c=>n(l,c)))):t(s.flatMap(l=>n(l,o))):[]:e(s)?Array.isArray(o)?t(o.flatMap(l=>n(s,l))):t(n(s,o)):[]:[],r);return (a==null?void 0:a.length)==0?null:a}})(),clickBuilder(t,e,n=r=>r,i=(r,a)=>(r.onClick(),a)){if(!t)return null;function r(a,s=!0){return a?s&&!a[e]?!1:i(a,s):null}return function(...a){let s=typeof a[0]=="boolean"?a.shift():null;if(a.length==0)a=Object.keys(t);else {let o=t.map(n);a.every(l=>o.includes(l))&&(a=a.map(l=>o.indexOf(l)));}if(typeof s=="boolean")return a.map(o=>r(t[o],s));for(let o of a){let l=t[o];if(l!=null&&l[e])return r(l)}return null}},keepClick(t,e){var n;return (n=t==null?void 0:t.skill)!=null&&n.SkillId?(t.start=t.stop=!1,t.on(Laya.Event.MOUSE_DOWN,t,function(){if(this.start){ie.clear("keepClick"+this.skill.SkillId),this.InitSkin("skillPuTong_up","skillPuTong_over","skillPuTong_up","skillPuTong_disabled","skillPuTong_up","skillPuTong_over","skillPuTong_up"),this.start=!1;return}this.longPressTimer=setTimeout(()=>{ie.loop("keepClick"+this.skill.SkillId,e,200),this.InitSkin("skillSuoDing_up","skillSuoDing_over","skillSuoDing_up","skillSuoDing_disabled","skillSuoDing_up","skillSuoDing_over","skillSuoDing_up"),this.start=!0;},1e3);}),t.on(Laya.Event.MOUSE_UP,t,function(){clearTimeout(this.longPressTimer);}),t.on(Laya.Event.MOUSE_OUT,t,function(){clearTimeout(this.longPressTimer);}),t.skill.Name):null},reset(){this.auto(null),this.gamescene=null,this.limit=0,this.order=[],this.chat=this.trace=this.select=this.skill=this.card=this.seat=this.btn=this.deal=()=>null;},init(){var a,s,o,l,c,f,d;if((o=(s=(a=this.gamescene)==null?void 0:a.seatContainer)==null?void 0:s.seatUIs)!=null&&o.length)return !0;let t=this.find("SceneLayer",Je);if(!t)return !1;(l=t.rightView)==null||l.tabClicked(2);let e=(c=t.seatContainer)==null?void 0:c.seatUIs,n=t.chatViewUI,i=(f=t.rightView)==null?void 0:f.traceArea;if(!(e!=null&&e.length)||!n||!i)return !1;this.gamescene=t,w.v&&oi(),fi(),this.seatUIs();const r=(d=this.gamescene.manager)==null?void 0:d.UpdateSeatFixedViewID;return typeof r=="function"&&!r.toString().includes("func.apply")&&Object.defineProperty(this.gamescene.manager,"UpdateSeatFixedViewID",{value:function(){r.apply(this,arguments),ie.delay("seats",B.seatUIs.bind(B),500);}}),this.chat=(u,p=!1)=>{var m;return n!=null&&n.chatInput?(typeof p=="string"&&(u=p+":"+btoa(u)),n.chatInput.text=u,p&&((m=n.sendBtn)==null||m.onClick()),!0):null},this.trace=u=>{let p=i.msgContainer.getChildAt(i.msgContainer.numChildren-1),m=i.getHtmlBase(u+"<br>");if(!m){console.error("创建trace项失败",u);return}m.y=p.y+p.height||3,i.msgContainer.addChild(m),Laya.timer.callLater(i,i.reScorllTo);},this.limit=290,fe(()=>{var u;return O.firstID!==void 0&&((u=e.filter(p=>{var m;return (m=p==null?void 0:p.seat)==null?void 0:m.fixedViewId}))==null?void 0:u.length)},300).then(()=>this.auto(w.autoBotSwitch||!1)),!0},seatUIs(t=!1){var i,r,a,s,o;let e=(s=(a=(r=(i=this.gamescene)==null?void 0:i.seatContainer)==null?void 0:r.seatUIs)==null?void 0:a.map(l=>l.seat))==null?void 0:s.filter(l=>!l.isHide);if(!((o=e==null?void 0:e.filter(l=>l.fixedViewId))!=null&&o.length))return [];let n=e.map((l,c,f)=>({seat:l,seatID:l.index,order:l.fixedViewId-1,figure:O.isGuoZhan?l.Country==f[0].Country||-!!l.Country:l.figure==f[0].figure,ai:l.playerInfo.clientId<4e9?0:l.playerInfo.showName.includes("金")?1:2}));O.seatUIs.map(l=>l.order).join(",")!=n.map(l=>l.order).join(",")&&O.fromUI(n),t===!0&&n.some(({ai:l})=>l)&&ue("对战AI小杀！"),n=n.map(l=>({...l,index:this.order.indexOf(l.seatID)})).sort((l,c)=>l.figure-c.figure||c.ai-l.ai||l.index-c.index||l.order-c.order),this.order=n.map(l=>l.seatID),console.warn("优先级：",n.map(({seatID:l,order:c,figure:f,ai:d})=>["玩家-","玫瑰金-","小杀-"][d]+(O.name(l)||l)+"-"+c+(f?"-队友":"")).join(">"));},wugu:(()=>{let t=null;return function(e=1e3){return new Promise(n=>{ie.loop("wugu",()=>{var a,s;let i=this.find("WindowLayer","WuGuFengDengWindow");if(!i){ie.clear("wugu"),n(t),t=null;return}let r=(a=i.showCardUIs)==null?void 0:a.find(o=>o.maskAlpha==0);r&&((s=i.OnSelectNormalCardUi)==null||s.call(i,r),t=r.Card.cardId);},e);})}})(),yanJiao(t,e=1){var r;const n=this.find("WindowLayer","YanJiaoWindow");if(!n)return;if(((r=n.seat)==null?void 0:r.index)!=O.mySeats[0])return !1;if(e%2!=0){let a=n.cardQueues.flatMap(s=>s);n.cardQueues[0].splice(0,1/0,...a),n.cardQueues[1].splice(0,1/0),n.cardQueues[2].splice(0,1/0),n.layoutCardUIs();return}let i=n.cardQueues.flatMap(a=>a).reduce((a,s)=>(a[s.Card.CardNumber].push(s),a),Array.from({length:14},()=>[]));n.cardQueues[0].splice(0,1/0,...t[2].flatMap((a,s)=>a&&s?i[s].splice(0,a):[])),n.cardQueues[1].splice(0,1/0,...t[e/2].flatMap((a,s)=>a&&s?i[s].splice(0,a):[])),n.cardQueues[2].splice(0,1/0,...t[1-e/2].flatMap((a,s)=>a&&s?i[s].splice(0,a):[])),n.layoutCardUIs();},async newRoom(){var e,n,i,r,a,s;const t=this.find("SceneLayer","HallScene","roomListView");if([28].includes(t==null?void 0:t.modeId)){w.autoBotSwitch=28,t.onShowOfWindow();const o=await fe(()=>this.find("WindowLayer","CreatOFRoomWindow"));if(typeof(o==null?void 0:o.sureCreate)!="function")return null;o.sureCreate();}else if([74,84].includes(t==null?void 0:t.modeId)){t.sendCreateTable();const o=await fe(()=>this.find("WindowLayer","CreateTableWindow"));if(!o)return null;(e=o.showMoreHandler)==null||e.call(o),(i=(n=o.modeBox)==null?void 0:n._labels)!=null&&i.length&&(o.modeBox.selectedIndex=o.modeBox._labels.length-1),o.timeBox&&(o.timeBox.selectedIndex=1),o.banItemBox&&(o.banItemBox.selected=!0),o.passwordInput&&(o.passwordInput.text="GuDuZun"),await me(1e3),(r=o.sureHandler)==null||r.call(o);const l=await fe(()=>this.find("SceneLayer","TableScene"));if(!((s=(a=l==null?void 0:l.seatListView)==null?void 0:a.seatList)!=null&&s.length))return null;let c=l.seatListView.seatList.filter(f=>!f.WaitInfo).slice(-1)[0];l.seatListView.showBtns(c),l.seatListView.sitHandler();}else return ue("请进入【经典场-国战】或【自由场-身份演武】房间列表后再开启挂机！"),!1;return !0},async readyStart(t){var r,a,s,o,l,c,f,d,u,p,m,y,C,S,j,ne,k,D,z;const e=await fe(()=>this.find("SceneLayer","TableScene"),t);let n=(a=(r=e==null?void 0:e.seatListView)==null?void 0:r.seatList)==null?void 0:a.length;if(!n||!(e!=null&&e.startUI))return null;await me(2e3);let i=(l=(o=(s=e==null?void 0:e.topMenu)==null?void 0:s.areaServerLabel)==null?void 0:o.text)==null?void 0:l.includes("国战老友");if(i||(f=(c=e.dianjiangView)==null?void 0:c.onOpenDJClick)==null||f.call(c),!((u=(d=e.startUI)==null?void 0:d.startBtn)!=null&&u.visible))return (m=(p=e.startUI)==null?void 0:p.readyBtn)!=null&&m.visible&&((C=(y=e.startUI).readyHandler)==null||C.call(y)),i&&w.autoBotSwitch==9&&(w.autoBotSwitch=29),!0;if(i){w.autoBotSwitch=28;for(let _ of e.seatListView.seatList.filter(Z=>!Z.WaitInfo&&Z.seatId<n/2))e.seatListView.showBtns(_),e.seatListView.addAiHandler(_),await me(200);await me(1e3);}else {if(w.autoBotSwitch===!0)for(let _ of e.seatListView.seatList.filter(Z=>!Z.WaitInfo&&Z.seatId>=n/2))e.seatListView.showBtns(_),e.seatListView.addAiMHandler(_),await me(200);if((S=e.confirmNormalAi)==null||S.call(e),await me(1e3),w.autoBotSwitch===!0&&((k=(ne=(j=e.banGeneralBtn)==null?void 0:j.skins)==null?void 0:ne[0])!=null&&k.startsWith("open"))){e.banGeneralHandler();const _=await fe(()=>this.find("WindowLayer","BanGeneralWindow"));if(!((D=_==null?void 0:_.showItemui)!=null&&D.length))(z=_==null?void 0:_.Close)==null||z.call(_);else {for(let Z of _.showItemui.slice(0,7))Z.onClick(),await me(200);_.onSureBtnClick();}}}return await me(5e3),Qe(()=>{let _=this.find("SceneLayer","TableScene","startUI");if(!(_!=null&&_.startBtn)||!(_!=null&&_.confirmStart))return "Cancel";if(_.startBtn.enabled)_.confirmStart();else return !1;return !0},60,2e3),!0},auto(t){var e,n,i,r,a,s;if(t!=this.flag&&(this.flag=t,ie.clear("auto"),ie.clear("keepClick769"),ie.clear("keepClick295"),t!==null))if((n=(e=this.gamescene)==null?void 0:e.seatContainer)!=null&&n.selfSeatUi){if(this.deal.toString().endsWith("null")){let o=this.gamescene.seatContainer.seatUIs,l=this.gamescene.seatContainer.selfSeatUi.skillItems,c=this.gamescene.seatContainer.selfSeatUi.spellSelector,f=(i=this.gamescene.seatContainer.selfSeatUi.cardContainer)==null?void 0:i.cardUis,d=(r=this.gamescene.seatContainer.selfSeatUi.buttonBar)==null?void 0:r.btns;if(!(o!=null&&o.length)||!f||!d||!l||!c)return !1;this.seatUIs(!0);let u=this.clickBuilder(c.btnList,"_enabled",y=>{var C;return (C=y.data)==null?void 0:C.sendData},(y,C)=>{var S;return c.btnClick(y),(S=y.data)==null?void 0:S.sendData});this.select=(y,...C)=>{var S;if(c.visible&&(!y||((S=c.spell)==null?void 0:S.SkillId)==y))return u(...C||[])},this.skill=this.clickBuilder(l,"activated",y=>{var C;return (C=y.skill)==null?void 0:C.SkillId},(y,C)=>{var S;return y.SetSelected(C),(S=y.skill)==null?void 0:S.SkillId});let p=this.clickBuilder(f,"activated",y=>{var C;return (C=y.Card)==null?void 0:C.cardId},(y,C)=>{var S;return y.setSelected(C),(S=y.Card)==null?void 0:S.cardId});this.card=(...y)=>{var S,j;if(y!=null&&y.length)return p(arguments);let C=this.gamescene.seatContainer.selfSeatUi.cardContainer;return (S=C.AllSelectHandCards)==null||S.call(C),(j=C.cardUis)==null?void 0:j.filter(ne=>ne.selected).map(ne=>{var k;return (k=ne.Card)==null?void 0:k.cardId})},this.seat=this.clickBuilder(o,"activated",y=>{var C;return (C=y.seat)==null?void 0:C.index},(y,C)=>{var S;return y.seat.SetSelected(C),(S=y.seat)==null?void 0:S.index}),this.btn=this.clickBuilder(d,"_enabled",y=>y.name,(y,C)=>(y.onClick(),y.name));let m=y=>Array.isArray(y)?y[0]:y;this.deal=(y=this.order,C=[0,1,2,3])=>{var j,ne,k,D,z,_;this.select();let S=m(this.card());(j=xe.name.闪电)!=null&&j.has(S)||(ne=xe.name.借刀)!=null&&ne.has(S)?S=m(this.card(!0)):(k=xe.name.铁索)!=null&&k.has(S)?y=[!1]:H.currentID==O.mySeats[0]&&((D=xe.name.无懈)!=null&&D.has(S)||(z=xe.name.国无)!=null&&z.has(S))?C=[3,1,0,2]:(_=xe.name.桃)!=null&&_.has(S)&&O.seatUIs.some(({seat:Z,ai:ee,figure:ge})=>ee>1&&!ge&&!Z.isDead&&Z.currentHp<=0)&&(C=[1,2,3,0]),this.flag==9&&(C=[3,1,0,2]),this.btn(...C.slice(0,1))===null&&(this.seat(...y),this.btn(...C));},t&&O.isGuoZhan&&l.forEach(y=>!y.generalHasShow&&y.canHalfShow&&!y.isHalfShow&&!y.activated&&y.clickHandler()),w.v&&setTimeout(()=>l.map(y=>{var S;let C=(S=y.skill)==null?void 0:S.SkillId;if(C){if(C==769)return this.keepClick(y,()=>this.skill(769));if(C==295)return this.keepClick(y,()=>this.select(295,2))}else return null}).filter(Boolean).forEach(y=>Fe(`长摁${y}技能可进入锁定模式，开启自动摸牌<br>锁定模式下点击技能取消自动摸牌`,"skill-tooltip",5e3,"green",null)),3e3);}if(t==9){const o=()=>{var l;this.limit%2?this.btn(3,1,0):this.skill(62),this.limit--,((l=this.gamescene.Manager)==null?void 0:l.GamePassedTime)>60&&ie.loop("auto",o,500);};ie.loop("auto",o,3500),ue("启动黄盖主公自动苦肉模式");}else if(t==3){let o=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,o,o.stageMoveHandler),ie.loop("auto",()=>{o.seat.OnlineState!=3&&o.onTrusteeshipClick(),this.limit--<=0&&this.auto(w.autoBotSwitch||!1);},1e3),ue("切换到AI托管挂机...");}else if(t==28)if(!w.autoBotInfinite&&O.seatUIs.slice(1).every(({ai:o})=>o)){let o=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,o,o.stageMoveHandler),ie.loop("auto",()=>{o.seat.OnlineState!=7&&o.onTrusteeshipClick();},1e3);}else ie.loop("auto",()=>this.deal(),1e3),O.seatUIs.slice(1).some(({ai:o})=>!o)&&fe(()=>{var o,l;return O.mySeats[0]>=0&&((l=(o=O.seatUIs[0])==null?void 0:o.seat)==null?void 0:l.Country)>0}).then(()=>this.chat(`mainSeatID:${O.mySeats[0]}  :Country:${O.seatUIs[0].seat.Country}`,"INFO"));else if(t==29)ie.loop("auto",()=>this.deal(),1e3);else if(t){let o=(s=(a=this.gamescene)==null?void 0:a.seatContainer)==null?void 0:s.selfSeatUi;ie.loop("auto",()=>{var l;((l=o==null?void 0:o.seat)==null?void 0:l.OnlineState)>=3&&(o==null||o.stageMoveHandler()),this.deal();},1e3),ue("切换到脚本接管挂机...");}else console.warn("自动挂机已关闭！");}else this.flag=null;}};window.laya=B;const ri=(()=>{const t=n=>Array.isArray(n)?n:[n];function e(n=!0,i,r,a){var l,c,f,d,u,p;const s=((l=this==null?void 0:this.constructor)==null?void 0:l.name)=="SelectCardWindow"?this:B.find("WindowLayer","SelectCardWindow");if(!s)return null;if(((c=s.seat)==null?void 0:c.index)!=(r>=0?r:O.mySeats[0])||i>0&&((f=s.Skill)==null?void 0:f.SkillId)!=i)return !1;a=(a>0?a:((d=s.Skill)==null?void 0:d.SelectCardCountWhenResponse)||1)-(((u=s.selectCardUis)==null?void 0:u.length)||0);let o=t(B.find(s,"SkillSelectCardUi")).filter(m=>{var y;return (m==null?void 0:m.activated)&&!((y=s.selectCardUis)!=null&&y.includes(m))}).slice(0,a).map(m=>{var y;return s.onTouchCard({target:m}),(y=m.Card)==null?void 0:y.CardId});return n===!0&&((p=s.confirmClick)==null||p.call(s)),o}return async function(n,...i){var j,ne;const r=await fe(()=>B.find("WindowLayer","SelectCardWindow"),50,100);if(n)return e.apply(r,i);const a=r==null?void 0:r.confirm_btn,s=((j=r.Skill)==null?void 0:j.SelectCardCountWhenResponse)||1;if(!(a!=null&&a.textField)||!(s>1)||((ne=r.seat)==null?void 0:ne.index)!=O.mySeats[0])return !1;let{x:o,y:l,width:c,height:f,_labelColors:d,_labelPadding:u,textField:{fontSize:p,font:m,bold:y},constructor:C}=a,S=r.myFuncBtn||new C;return Object.assign(S,{label:"一键全选",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:c,height:f,labelSize:p,labelFont:m,labelBold:y,_labelColors:d,_labelPadding:u}),S.pos(o-1.2*c,l),r.myFuncBtn||(S.InitSkin("window_btn_style1_normal","window_btn_style1_over","window_btn_style1_down","window_btn_style1_disable"),r.addChild(r.myFuncBtn=S),r.myFuncBtn.on(Laya.Event.CLICK,r,e)),!0}})();function Et(t,e=null){var n,i;if(ae.cardLabelSwitch){const r=(i=(n=B.gamescene.seatContainer)==null?void 0:n.selfSeatUi)==null?void 0:i.cardContainer;if(!r||!r.cardUis)return;r.cardUis.forEach((a,s)=>{try{if(!a)return;if(t=="新组合"){const o=a.Card.cardInfo.type+"-"+a.Card.cardInfo.Color;!H.spellSpace[3338].has(o)&&a.CardLabelDesc!="新组合"?a.AddCardLabel(t):H.spellSpace[3338].has(o)&&a.CardLabelDesc=="新组合"&&a.AddCardLabel();}if(t=="明牌"&&e.includes(a.Card.cardId)){let o=a.CardLabelDesc;o!="明牌"&&a.AddCardLabel(o+t);}}catch(o){console.error(`更新卡牌${s}标签失败:`,o);}});}}const oi=(()=>{function t(n){var a,s;const i=((a=this==null?void 0:this.constructor)==null?void 0:a.name)=="CardUIContainer"?this:B.find("SceneLayer",Je,"SelfSeatUi","cardContainer");if(!((s=i==null?void 0:i.cardUis)!=null&&s.length))return null;if(n===!0&&typeof(i==null?void 0:i.AllSelectHandCards)=="function")return i.AllSelectHandCards();if(n!==!1&&typeof(i==null?void 0:i.RAllSelectHandCards)=="function")return i.RAllSelectHandCards();let r=i.cardUis.filter(o=>o==null?void 0:o.activated).reduce((o,l)=>(o[l.selected?1:0].push(l),o),[[],[]]);n!==!0&&r[1].forEach(o=>o.CardUI_Click()),n!==!1&&r[0].forEach(o=>o.CardUI_Click());}const e=[function(){t.call(this,!0);},function(){t.call(this,void 0);},function(){t.call(this,!1);}];return async function(){var i;const n=await fe(()=>{var r;return ((r=B.gamescene)==null?void 0:r.SelfSeatUi)||B.find("SceneLayer",Je,"SelfSeatUi")});if(!((i=n==null?void 0:n.cardContainer)!=null&&i.cardUis))return !1;if(e.forEach((r,a)=>{let s=n["myFuncBtn"+a]||B.get("SgsSpriteFilterBtn");Object.assign(s,{label:["全选","反选",""][a],width:40,height:25,labelSize:12,labelBold:!0,labelFont:"simsun",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",labelPadding:"0,0,0,0",labelColors:"#E4D5A0,#E4D5A0,#E4D5A0,#d0cece"}),n["myFuncBtn"+a]||(a==2?s.InitSkin(""):s.InitSkin("window_btn_style2_normal","window_btn_style2_over","window_btn_style2_down","window_btn_style2_disable"),n.addChild(n["myFuncBtn"+a]=s),n["myFuncBtn"+a].on(Laya.Event.CLICK,n.cardContainer,r));}),!n.OnStageResize.toString().includes("myFuncBtn")){const r=n.OnStageResize;Object.defineProperty(n,"OnStageResize",{value:function(){r.apply(this,arguments);let a=this.width-(this.constructor.handCardRight||252)+50;Array.from({length:3},(s,o)=>{var l;return (l=this["myFuncBtn"+o])==null?void 0:l.pos(a,33+23*o)});}}),n.OnStageResize();}return !0}})();async function li(){if(!w.patchGetOnlineSKinList){const t=B.class("GeneralSkinManager").__proto__;if(!t||typeof t._GetOnlineSKinList=="function")return;t._GetOnlineSKinList=t.GetOnlineSKinList,Object.defineProperty(t,"GetOnlineSKinList",{value:function(e){let n=t._GetOnlineSKinList.apply(this,arguments);if(!ae.skinSwitch)return n;const i=M.vskinMap[e]?Array.from(M.vskinMap[e]).filter(o=>o!==e):[];if(i&&i.length){for(var r=[],a=0;a<i.length;a++){var s=this.getOnlineSKinListByGeneralId(i[a],!0,!0);s&&s.length&&(r=r.concat(s));}if(n!=null&&n.length){const o=new Map;[...n,...r].forEach(l=>o.set(l.skinID,l)),n=Array.from(o.values());}}if(n&&n.length)return n},configurable:!0}),w.patchGetOnlineSKinList=!0;}}async function ci(){const t=B.class("GameEventDispatcher").__proto__.ShowWindow;B.class("GameEventDispatcher").__proto__.ShowWindow=function(e,...n){if(["AdPushWindow","VersionNoticeWindow"].includes(e)){ue("小抄已经为你跳过广告和祈愿台出货播报");return}if(ae.skipProbWindowSwitch&&["GetPropSpecialWindow"].includes(e)){Fe("小抄为您跳过出货提示","acTooltip",3e3,"green",null,!0);return}return t.apply(this,arguments)};}async function di(){const t=Symbol("originalRelayout"),e=await fe(()=>{var i;return ((i=B.gamescene)==null?void 0:i.topMenu)||B.find("SceneLayer",Je,"topMenu")});async function n(){const i=e==null?void 0:e.__proto__;!i||w.patchSkinBtn||(w.patchSkinBtn=!0,i[t]||(i[t]=i.ReLayoutBtnByScene),Object.defineProperty(i,"ReLayoutBtnByScene",{value:function(){i[t].apply(this,arguments),this.skinBtn&&(this.skinBtn.visible=!0);let r=SystemContext.gameWidth;for(let a=this.btnList.length-1;a>=0;a--){const s=this.btnList[a];s.visible&&(r=r-s.width+1,s.x=r);}this.btnStartX=r;},configurable:!0}));}!e||w.patchSkinBtn||(n(),w.patchSkinBtn=!0,e.ReLayoutBtnByScene());}const ft={res:{},sprite:void 0,async init(){var n,i;if((n=this.sprite)!=null&&n._parent)return this.sprite;const t=await fe(()=>B.find("BackgroundLayer"));if(!t||(this.sprite=this.sprite||t.myBg||B.get("SgsSprite"),!this.sprite))return !1;this.sprite.bg||(this.sprite.bg=B.get("SgsFlatImage"),this.sprite.addDrawChild(this.sprite.bg)),t.myBg=this.sprite,t.addChild(this.sprite),this.sprite.zOrder=100;const e=(i=this.sprite)==null?void 0:i.OnStageResize;return typeof e=="function"&&!e.toString().includes("func.apply")&&this.sprite&&Object.defineProperty(this.sprite,"OnStageResize",{value:function(){e.apply(this,arguments);let r=Math.max(this.width?SystemContext.gameWidth/this.width:1,this.height?SystemContext.gameHeight/this.height:1);this.scale(r,r),this.pos(SystemContext.gameWidth/2,SystemContext.gameHeight/2);},configurable:!0}),!0},async setBg({url:t,type:e,width:n,height:i}=this.res){var r;if(t&&((r=this.sprite)!=null&&r._parent||await fe(()=>this.init()),!(!this.sprite||this.sprite.url==t))){if(Object.assign(this.sprite,{width:n,height:i}),this.clear(),e==0)this.sprite.bg.skin=t,this.sprite.bg.posInteger(-n/2,-i/2);else if(e!=1){let a,s,o,l;e==2?(o="sk",l=B.class("BaseEffect")):(o="json",l=B.class("BaseSpineEffect")),e!=3?(a=["beijing","xingxiang"],s="play"):(a=["beijing","daiji","qianjing"],s="DaiJi"),a.forEach(c=>{let f=new l;this.sprite.addChild(f),f.AutoReleaseRes=!0,f.InitEffect(`${t}/${c}.${o}`,s,!0),f.playEffect(),e==2&&f.size(n,i);});}this.sprite.OnStageResize(),this.sprite.url=t,Object.assign(this.res,{url:t,type:e,width:n,height:i}),await Ke(w.userID+"::paperRes",this.res,!0);}},async switch(t){var e;if(t)return this.setBg();(e=this.sprite)==null||e.removeSelf();},async clear(t){var n;if(!this.sprite)return;for(this.res={},this.sprite.bg.skin=null;this.sprite.numChildren;)(n=this.sprite.removeChildAt(0))==null||n.destroy();if(!t)return;zt(w.userID+"::paperRes",!0),this.sprite.removeSelf(),this.sprite=void 0;const e=await fe(()=>B.find("BackgroundLayer"));if(!e)return !1;delete e.myBg;}},Yt=(()=>async function(){var t,e,n;try{const i=await fe(()=>B.find("WindowLayer","BlessNewWindow"));if(!i||!i.blessTimeTxt||!i.tongxinTxt||!i.taskUI){console.error("UI实例或其属性未定义");return}const a=((e=(t=i.blessTimeTxt)==null?void 0:t.text)==null?void 0:e.split(`
`))[0],s=parseFloat(i.tongxinTxt.text)||0,o=parseFloat((n=i.taskUI.drawContaniers[0])==null?void 0:n.text)||0,l=o===0?0:Math.floor(s/o*100);i.blessTimeTxt.text=`${a}
出结率：${s} / ${o} = ${l}%`;}catch(i){console.error("执行 calTongXinJieLv 时发生错误:",i);}})(),ui=(()=>{async function t(){var o,l,c,f,d,u,p,m;if(!((o=this==null?void 0:this.skinImg)!=null&&o.skin))return null;let i=this.is169?594:this.isHor?536:350,r=this.is169?335:this.isHor?380:464,a=this.isDynamicPlay!=1?0:((c=(l=this.skinData)==null?void 0:l.skinBaseVo)==null?void 0:c.ResType)||0,s=((d=(f=this.skinData)==null?void 0:f.skinBaseVo)==null?void 0:d.DynamicSkinBigSkeletonUrl)||"";if(a==2?B.class("BaseEffect",!0,()=>{var y,C;return (C=(y=this.skinBigSps)==null?void 0:y.bgEffect)==null?void 0:C.constructor}):a>2&&B.class("BaseSpineEffect",!0,()=>{var y,C;return (C=(y=this.skinBigSps)==null?void 0:y.spineBg)==null?void 0:C.constructor}),a==1){s=(((p=(u=this.skinData)==null?void 0:u.skinBaseVo)==null?void 0:p.DynamicSkinBigUrl)||"")+".mp4",this.myFuncBtn0.off(Laya.Event.CLICK,this,t),this.myFuncBtn0.on(Laya.Event.CLICK,this,()=>e.call(this,s)),this.myFuncBtn0.label="保存视频";return}else if(a==3)this.skinData.skinBaseVo.NewSkinJudge?s=this.skinData.skinBaseVo.DynamicSkinBigSkeletonUrlNew(this.juexingState):a=4;else if(!(a==2||a==4)){let{response:y,url:C}=await n(this.skinImg.skin);if(C&&y.ok){s=C;let S=await y.blob(),j=await createImageBitmap(S);i=j.width,r=j.height;}}(m=this.Close)==null||m.call(this),console.warn({url:s,type:a,width:i,height:r}),Fe("壁纸设置成功，该壁纸会覆盖所有原生壁纸<br>如需停止使用该壁纸，可在设置中关闭","ac-tooltip",1e4,"green",null),setTimeout(()=>ft.setBg({url:s,type:a,width:i,height:r}),1e3);}async function e(i){var f,d,u,p,m,y,C;let r=((d=(f=this.skinData)==null?void 0:f.skinBaseVo)==null?void 0:d.name)||M.generalDict[(u=this.skinData)==null?void 0:u.generalID]||"三国杀皮肤",a=(m=(p=this.skinData)==null?void 0:p.skinBaseVo)==null?void 0:m.bigSkin,s=i&&typeof i=="string"?i:((y=this.skinImg)==null?void 0:y.skin)||"";if(!s)return;let[,o,l]=s.match(/\/([0-9]+)(_[0-9])?(\.png|\.mp4)/i).map(Number),c=((C=M.skinSP[o])==null?void 0:C.length)||{60500:3,62300:2,66100:2}[o]||(l?2:1);(c>1?Array.from({length:c},(S,j)=>"_"+(j+1)):[""]).forEach(async S=>{let j=s.replace(/(\/[0-9]+)(_[0-9])?(\.png|\.mp4)/i,"$1"+S+"$3"),{response:ne}=await n(j,a);if(ne!=null&&ne.ok){let k=await ne.blob(),D=URL.createObjectURL(k);Un(D,r+S),URL.revokeObjectURL(D);}});}async function n(i,r=!0){if(r){let s=i.replace("/big/static/","/big/bigSkin/"),o=await fetch(s);if(o.ok)return {response:o,url:s}}let a=await fetch(i);return a.ok?{response:a,url:i}:null}return async function(){const i=await fe(()=>B.find("WindowLayer","SkinInfoWindow")),r=i==null?void 0:i.skinFrame;if(!r)return !1;let{x:a,y:s,width:o}=r;return [t,e].forEach((l,c)=>{let f=i["myFuncBtn"+c]||B.get("SgsFlatButton");Object.assign(f,{label:["设为壁纸","保存图片"][c],width:166,height:50,labelSize:18,labelFont:"fzltchjw",labelPadding:"0,0,10,0",labelColors:"#FCE1AA,#FCE1AA,#FCE1AA,#FCE1AA",align:"center",valign:"middle"}),f.pos(a+o/2+(c-1)*166,s-50),i["myFuncBtn"+c]||(f.InitSkin("skinInfo_dynamicBtn_normal","skinInfo_dynamicBtn_over","skinInfo_dynamicBtn_down","skinInfo_dynamicBtn_disable"),i.contentSprite.addDrawChild(i["myFuncBtn"+c]=f),i["myFuncBtn"+c].on(Laya.Event.CLICK,i,l));}),!0}})(),fi=(()=>{let t=!1;async function e(){var a,s,o;const i=await fe(()=>B.find(this==null?void 0:this.stateContainer,"SeatStateTextUI")).then(l=>Array.isArray(l)?l[0]:l),r=(a=i==null?void 0:i.__proto__)==null?void 0:a.SetSeatState;return typeof r!="function"||r.toString().includes("func.apply")?t=!1:(Object.defineProperty(i.__proto__,"SetSeatState",{value:function(l,c){var d;let f=["SeatStateBoTuPo"].includes((d=c==null?void 0:c.constructor)==null?void 0:d.name);f&&(l!=null&&l.IsSelf)&&(this.textField.fontSize=17,this.textField.color="#FFFFFF"),r.apply(this,arguments),f&&(this.textField.text=this.textField.text.replace("♠","♤").replace("♥","♡"));},configurable:!0}),["SeatStateBoTuPo"].includes((o=(s=i.seatState)==null?void 0:s.constructor)==null?void 0:o.name)&&(i.textField.fontSize=17,i.textField.color="#FFFFFF",i.textField.text=i.textField.text.replace("♠","♤").replace("♥","♡")),t=!0)}function n(i){const r=i==null?void 0:i.updateSeatState;if(typeof r!="function"||r.toString().includes("func.apply"))return !1;Object.defineProperty(i,"updateSeatState",{value:async function(a){t&&Object.defineProperty(this,"updateSeatState",{value:r,configurable:!0}),r.apply(this,arguments),!t&&a&&a.Opened&&!a.MultiFlag&&!(a.IsZhanFaState&&this.rogue1v1ZhanFaContainer)&&!a.NeedAnimate&&a.NeedLayout&&!(a.IsStateCard&&this.seat&&this.seat.IsSelf)&&(t=!0,e.call(this));},configurable:!0});}return async function(){var r,a,s;if(t)return !0;const i=(a=(r=B.gamescene)==null?void 0:r.seatContainer)==null?void 0:a.seatUIs;if(!(i!=null&&i.length))return !1;i.forEach(n),n((s=i[0])==null?void 0:s.__proto__);}})();async function hi(){var i;const t=await fe(()=>B.find("SceneLayer","","chatViewUI")||B.find("SceneLayer","","","chatViewUI"));if(typeof(t==null?void 0:t.showChatSettingView)!="function")return null;t.showChatSettingView();const e=(i=t.settingView)==null?void 0:i.__proto__,n=e==null?void 0:e.createChildren;if(typeof n!="function")return !1;if(e.wuxieQ=ae.wuxieSwitch,Object.defineProperty(e,"set",{value:function(){ae.wuxieSwitch=this.wuxieQ=!ae.wuxieSwitch;},configurable:!0}),n.toString().includes("func.apply"))return !0;Object.defineProperty(e,"createChildren",{value:function(){n.apply(this,arguments);const r=this==null?void 0:this.roomCheck;if(!r)return;this.bgTet.height=this.height+=21;let{x:a,y:s,width:o,height:l,_labelColors:c,_labelPadding:f,textField:{fontSize:d,font:u,bold:p},constructor:m}=r;this.wuxieCheck=new m,Object.assign(this.wuxieCheck,{label:"显示技能读条",y:s+21*2,x:a,width:o,height:l,labelSize:d,labelFont:u,labelBold:p,_labelColors:c,_labelPadding:f}),this.wuxieCheck.InitSkin("cmn_checkbox_normal","cmn_checkbox_over","cmn_checkbox_dark","cmn_checkbox_disabled","cmn_checkbox_select_normal","cmn_checkbox_select_over"),this.addDrawChild(this.wuxieCheck),this.wuxieCheck.on(Laya.Event.CHANGE,this,this.set),this.wuxieQ&&(this.wuxieCheck.selected=!0);},configurable:!0});}async function pi(){const t=await fe(()=>B.find("SceneLayer",null,"leftView","__proto__"),1e3),e=t==null?void 0:t.getBtnRes;if(typeof e!="function"||e.toString().includes("func.apply"))return !1;Object.defineProperty(t,"getBtnRes",{value:function(){return e.apply(this,arguments).filter(n=>n.type!=10187).sort((n,i)=>!n.zhutiIcon==!i.zhutiIcon?0:i.zhutiIcon?1:-1)},configurable:!0});}async function mi(){const t=await fe(()=>B.find("SceneLayer","TableScene")),e=t==null?void 0:t.recordBtn;if(!(e!=null&&e.textField))return !1;let{x:n,y:i,width:r,height:a,constructor:s}=e,o=t.myFuncBtn||new s;return Object.assign(o,{width:r,height:30}),o.pos(31,46),t.myFuncBtn||(Object.assign(o,{label:"将池",labelFont:"fzltchjw",labelSize:18,sizeGrid:"15,15,15,15",labelColors:"#FBEDC3,#FBEDC3,#FBEDC3,#FBEDC3"}),o.InitSkin("vippoint_red_normal","vippoint_red_over","vippoint_red_down","vippoint_red_disable"),t.addChild(t.myFuncBtn=o),t.myFuncBtn.on(Laya.Event.CLICK,t,t.showJiangChi)),!0}function xi(t){mt[t]?Ln(mt[t]):mt[t]=Oe,Ut(t);}async function Ut(t,e=[26,35,44,5,7]){const n=B.get("SevenDayResultWindow");n.uuid=t,Oe.req=new Set(e),setTimeout(()=>{Array.from(Oe.req,i=>n.sendReq(i)),B.del("SevenDayResultWindow",1e3);},0);}async function Xt(){setTimeout(async()=>{var e,n;await me(1e3);const t=B.get("KanShuWindow",!0);((e=t.jbpUserData)==null?void 0:e.Status)==0&&(t.onKanShuClick(),await me(2e3),t.onUpdateAwardStatus(),await me(1e3)),((n=t.jbpUserData)==null?void 0:n.Status)==1&&(t.autoClickAllPeach(),await me(1e3),t.onShowEvent(),await me(500),t.onShowEvent(),B.del("KanShuWindow",3e3));},0);}async function en(){var n;const t=B.get("ZhiGouMonthCardView");if(t.updateAllInfo(),(n=t.cardData)!=null&&n.bActive){t.getBtnClick();for(let i=0;i<4;i++)t.addItemClick(i);}B.del("ZhiGouMonthCardView",1e3);const e=B.get("NewWeekCardView");e.updateAllInfo(),e.getBtn._text=="领取"&&e.getBtnClick(),B.del("NewWeekCardView",1e3);}async function En(){var n,i,r,a,s;const t=B.get("GeneralOpenWindow"),e=((s=(a=(r=(i=(n=t==null?void 0:t.newView)==null?void 0:n.freeTimeTxt)==null?void 0:i._text)==null?void 0:r.split(":"))==null?void 0:a.map(Number))==null?void 0:s.reduce((o,l,c)=>o+l*Math.pow(60,2-c),0))*1e3||0;e?setTimeout(En,e):t.onNewOpenBag(8100101,3),B.del("GeneralOpenWindow",5e3),fe(()=>B.find("WindowLayer","GeneralOpenResultWindow")).then(o=>o==null?void 0:o.Close());}async function gi(){var n;const t=B.get("GuildDrumWindow",!1);t==null||t.initDrums(),t.updateItems(),await me(1e3);let e=(n=t==null?void 0:t.itemList)==null?void 0:n.find(i=>i.leftTime);ie.loop("drum",()=>e==null?void 0:e.btnClick(),300,(e==null?void 0:e.leftTime)||0,()=>B.del("GuildDrumWindow",500));}async function yi(t=!1){try{await me(1e4);const e=B.get("DailySignNewView",!1);if((e==null?void 0:e.signState)==2)for(let n=0;n<e.itemList.length;n++){let i=e.itemList[n].baseData.ID;i!=9020101&&i.toString().startsWith("90")&&t||e.itemList[n].type==1&&(e.itemList[n].OnSignClick(),ue("自动签到已完成<br>如需关闭，可在小抄设置中关闭"),await me(500));}for(let n=0;n<(e==null?void 0:e.totalItemList.length);n++)e.totalItemList[n].type==3&&(e.totalItemList[n].OnSignClick(),await me(500));if(B.del("DailySignNewView",1e4),!t){const n=B.get("WyqjBigView"),i=rt(n).find(r=>{var a;return ((a=r==null?void 0:r.constructor)==null?void 0:a.name)=="WyqjSmallView"});i==null||i.Init(),i==null||i.onClickTiYanBtn(),B.del("WyqjBigView",3e3);}}catch(e){console.error(e);}}async function tn(){var s,o;const t=B.get("TaskDailyView");t.taskPanel.contentSp.drawContaniers.filter(l=>{var c;return (c=l==null?void 0:l.taskvo)==null?void 0:c.CanAward}).forEach(l=>l.onOpClick()),setTimeout(()=>{Array.from({length:3},(l,c)=>{var f;return (f=t.topDayTask)==null?void 0:f.onClickItem(c)}),t.manager.HasJDRewardRed&&t.onceRewardClick(),B.del("TaskDailyView",3e3);},3e3);const e=B.get("IndpdtPanelWindow2");e.enterFunc(),(o=(s=e==null?void 0:e.tabGroup)==null?void 0:s.btnList[2])!=null&&o.redPointIsShow&&bi(!0,13360001,1);const[n,i]=rt(e,!0),r=rt(n).find(l=>{var c;return ((c=l==null?void 0:l.constructor)==null?void 0:c.name)=="NewPlayerSignGiftView"});r==null||r.Init(),r!=null&&r.panel&&fe(()=>B.find(r.panel,"Box","NewPlayerSignGiftItem")).then(l=>{var c;return (c=l==null?void 0:l.filter(f=>{var d;return (d=f==null?void 0:f.taskUserVo)==null?void 0:d.CanAward}))==null?void 0:c.forEach(f=>f.onItemClick())}),i&&(i.Init(),i.clickTab(1),i.curView.taskPanel.contentSp.drawContaniers.filter(l=>{var c;return (c=l==null?void 0:l.taskvo)==null?void 0:c.CanAward}).forEach(l=>l.onOpClick()),setTimeout(()=>{i.clickTab(0),i.tabGroup.btnList[0].redPointIsShow&&i.curView.onClickGetAll();},3e3)),B.del("IndpdtPanelWindow2",1e4);const a=B.get("ActivityWindow");a.enterFunc(),rt(a).flatMap(l=>{try{return rt(l)}catch{return []}}).flatMap(l=>{try{return l.itemArr.map(c=>c.getAwardBtn)}catch{return []}}).filter(l=>l.visible).forEach(l=>l.onClick()),setTimeout(()=>{var l;return (l=B.find("WindowLayer","TaskReqRewardWindow"))==null?void 0:l.Close()}),ie.delay("VuplexWebView",()=>a.Hide(),500),B.del("ActivityWindow",3e3);}function rt(t,e){var n,i,r;return ((r=(i=(n=t==null?void 0:t.tabGroup)==null?void 0:n.btnList)==null?void 0:i.filter(a=>e||a.redPointIsShow))==null?void 0:r.map(a=>{let s=t.viewStack.childInitDataList.findIndex(o=>o==a.value);return s<1&&(s=a.value),t.viewStack.selectedIndex=s,t.viewStack._childUIList[s]}))||[]}function nn(t=""){const e=B.get("GiftExchangeWindow");e.giftInput.text=t,e.getClicked(),B.del("GiftExchangeWindow",1e4);}const Tn=(()=>{async function t(){var i,r,a,s,o,l,c,f,d,u;const e=((i=this==null?void 0:this.constructor)==null?void 0:i.name)=="MailWindow"?this:B.find("WindowLayer","MailWindow")||B.get("MailWindow"),n=e==null?void 0:e.mailContentWindow;if(Array.isArray(n==null?void 0:n.winArr)){(a=(r=B.class("ActivityManager"))==null?void 0:r.AskRechargeInfoAgain)==null||a.call(r),await me(1e3);for(const p of (((s=e.manager)==null?void 0:s.systemMailList)||[]).filter(({mid:m})=>m)){let m=p.mid;if(p.title=="道具过期提醒")(o=e.manager)==null||o.DeleteMail(m);else if(p.hasAttachMent){p.read||(l=e.manager)==null||l.ReadMail(m);let y=p.AttachmentType,C=((c=p.attachment.getStringKey("key"))==null?void 0:c[0])??"",S=p.fromUserName&&p.fromUserName!="系统未知好友"?p.fromUserName:"";if(y==1){let j=S?2:0;n.ChangeWindow(j,p),(f=n.winArr[j])==null||f.getBtnClick(),(d=n.winArr[j])==null||d.Close(),n.close();}else y==2&&((u=e.manager)==null||u.SendClientDbsGetgmawardReq(C,m,S));await me(500),setTimeout(()=>{var j;p.read&&p.Geted&&((j=e.manager)==null||j.DeleteMail(m));},1e3);}}B.del("MailWindow",1e4);}}return async function(e){if(e)return t();const n=await fe(()=>B.find("WindowLayer","MailWindow")),i=n==null?void 0:n.feedbackBtn;if(!(i!=null&&i.textField))return !1;let{x:r,y:a,width:s,height:o,_labelColors:l,_labelPadding:c,textField:{fontSize:f,font:d,bold:u},constructor:p}=i,m=n.myFuncBtn||new p;return Object.assign(m,{label:"一键领取",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:s,height:o,labelSize:f,labelFont:d,labelBold:u,_labelColors:l,_labelPadding:c}),m.pos(r-1.05*s,a),n.myFuncBtn||(m.InitSkin("win_noborder_btn_normal","win_noborder_btn_over","win_noborder_btn_down","win_noborder_btn_disable","win_noborder_btn_over"),n.addChild(n.myFuncBtn=m),n.myFuncBtn.on(Laya.Event.CLICK,n,t)),!0}})(),sn=(()=>{let t=null,e=0,n="",i,r;const a=c=>{var f,d,u,p;return ((f=c==null?void 0:c.selloutTex)==null?void 0:f.visible)==!1&&((p=(u=(d=c==null?void 0:c.limitCount)==null?void 0:d._innerHTML)==null?void 0:u.includes)==null?void 0:p.call(u,"0/"))};function s(){t=null,document.querySelectorAll('.left input[type="checkbox"]').forEach(c=>{c.checked=!1;});}function o(c=900,f=50){ie.loop("seckill",()=>{var d;if(i=B.find("WindowLayer","ActivityWindow","","WelfareSeckillView")||B.get("WelfareSeckillView"),!((d=i==null?void 0:i.itemList)!=null&&d.length))return null;if(r=i.itemList.find((u,p)=>{var m;return p==t||((m=u.data)==null?void 0:m.goods_id)==t}),typeof(r==null?void 0:r.buyHpItemHandler)!="function")return !1;ie.set("seckill",l,e+50),ue(`秒杀连点器启动！
${n}`);},f,c/f>>0,()=>ue(`未找到秒杀面板！
连点器秒杀失败！`));}function l(c=300){r==null||r.buyHpItemHandler(),ie.loop("seckill",()=>{r==null||r.buyHpItemHandler(),a(r)||(s(),ie.clear("seckill"));},c);}return (c,f,d="",u=1e3)=>{var p;if(c===!1)s(),ie.clear("seckill"),ue("秒杀连点器已取消！");else if(c!==void 0&&c!==t){e=f||ie.now();let m=e-u,y=m-ie.now();t=c,n=d||((p=M.goodsID(c))==null?void 0:p.name)||"",y>1?(ue(`${(y/6e4).toFixed(1)}分钟后启动秒杀连点器！
${n}`),ie.set("seckill",o,m)):o();}return t}})();async function an(t={},e="",n=null,i=0){i&&await me(i);let r=await fe(()=>B.find("PromptLayer","ConfirmWindow"));if(!r)return null;Array.isArray(r)||(r=[r]),r.forEach(a=>{if(!(a!=null&&a.confirmData)||Object.entries(t).some(([o,l])=>a.confirmData[o]!=l))return;typeof n=="boolean"&&a.checkBox&&(a.checkBox.selected=n);let s=a.confirmData.buttonArr.find(o=>o.label==e);s.callBack&&s.thisObject&&s.callBack.apply(s.thisObject,s.callBackParams),a.confirmData.clickClose&&a.RemoveFromParent();});}async function bi(t=!1,e,n,i=null,r=null,a=0,s=null){let o=[...arguments];if(typeof o[0]=="boolean"?o.shift():t=!1,o.length<2)return null;const l=B.get("NormalShopBuyWindow");l.enterWindow(...o),t?(l.confirmBuy(),B.del("NormalShopBuyWindow")):(l.confirmBuyHandler(),delete B.instance.NormalShopBuyWindow);}function Bn(t="浩铭er",e=!1){var i;const n=B.get("SzxyHelpWin");return n.enterWindow(t),(i=n==null?void 0:n.btnHelp)!=null&&i.enabled?(n.onClickHelp(),B.del("SzxyHelpWin"),!0):(e&&ue("助力已完成，非常感谢！"),B.del("SzxyHelpWin"),!1)}const Ve=0,Le=65280,Be=65282;var Dn="jsjiami.com.v7";function Ue(t,e){const n=st();return Ue=function(i,r){i=i-283;let a=n[i];if(Ue.zdEtZF===void 0){var s=function(d){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",m="";for(let y=0,C,S,j=0;S=d.charAt(j++);~S&&(C=y%4?C*64+S:S,y++%4)?p+=String.fromCharCode(255&C>>(-2*y&6)):0)S=u.indexOf(S);for(let y=0,C=p.length;y<C;y++)m+="%"+("00"+p.charCodeAt(y).toString(16)).slice(-2);return decodeURIComponent(m)};const f=function(d,u){let p=[],m=0,y,C="";d=s(d);let S;for(S=0;S<256;S++)p[S]=S;for(S=0;S<256;S++)m=(m+p[S]+u.charCodeAt(S%u.length))%256,y=p[S],p[S]=p[m],p[m]=y;S=0,m=0;for(let j=0;j<d.length;j++)S=(S+1)%256,m=(m+p[S])%256,y=p[S],p[S]=p[m],p[m]=y,C+=String.fromCharCode(d.charCodeAt(j)^p[(p[S]+p[m])%256]);return C};Ue.Diplav=f,t=arguments,Ue.zdEtZF=!![];}const o=n[0],l=i+o,c=t[l];return c?a=c:(Ue.Vzrebh===void 0&&(Ue.Vzrebh=!![]),a=Ue.Diplav(a,r),t[l]=a),a},Ue(t,e)}function st(){const t=function(){return [Dn,"qnyjghsCYjMiamViQ.McomU.IWv7fpeISKGkxSPE==","fmo9W7FcVmogWQD3pYtcRLJdUvO","kmkVbmkwl8oGCmoTjG","W5qqeCoyW5HcWRxdI27dN8o6","sCo0FY5YWQWbsmoQs8oAna","WRJcHr7cVaXItJJdPg7cJh4","W4JcNdZcTYzzE8or"].concat(function(){return ["WO4Mk8oUW5xdMWOK","p1RdHuVdHmo3BCoklqtdIH3cGG","ptuCWRmaW6b9WRxdRW","E0RcISoOeZpdPffRWOCG","uGxdMcmTzmk/B0VdPmoqWQ3cHa","WOhcOmkabCoaW49GuhXiW4W","sSokp8khuHRcLXO","W7BdQIZcRSoSmSoDWRbwymkR"].concat(function(){return ["WQfBWQZcMhxcK8knrJ0clG","ztBdS8oqW6FcLmkyW77cTZ8bcG","W6VcHmoEWOZcH8o4WROFWP/cVSkD","WRqDW57cNCkgifzgW5xdPmksv3e","yHr+ESoGwmo2CmoadLCYWQa"]}())}())}();return st=function(){return t},st()}((function(t,e,n,i,r,a,s){return t=t>>1,a="hs",s="hs",function(o,l,c,f,d){const u=Ue;f="tfi",a=f+a,d="up",s+=d,a=c(a),s=c(s),c=0;const p=o();for(;[]&&--i+l;)try{f=parseInt(u(295,"axVt"))/1+-parseInt(u(283,"u5Ld"))/2+parseInt(u(284,"bC)X"))/3*(parseInt(u(296,"e$!x"))/4)+parseInt(u(289,"oAX8"))/5*(parseInt(u(287,"[J0P"))/6)+-parseInt(u(301,"OylK"))/7+-parseInt(u(288,"66pA"))/8*(parseInt(u(285,"c3Vy"))/9)+-parseInt(u(286,"tVp$"))/10*(-parseInt(u(298,"pRYO"))/11);}catch{f=c;}finally{if(d=p[a](),t<=i)c?r?f=d:r=d:c=d;else if(c==r.replace(/[yVhgIeMYCPkqWQxfGKpSEnU=]/g,"")){if(f===l){p["un"+a](d);break}p[s](d);}}}(n,e,function(o,l,c,f,d,u,p){return l="split",o=arguments[0],o=o[l](""),c="reverse",o=o[c]("v"),f="join",o[f]("")})}))(376,849340,st,190),st&&(Dn=st);const w={userID:0,account:"",nickname:"",inviteName:"",curOfficerLv:1,v:![],UsedGeneralSkinID:{UsedGeneralSkinID:{}},isFrameAdd:![],goods:[],lotteries:[],closeIframe:![],trialTime:0,autoBotStatus:30,autoBotInfinite:![],guildVIP:{},recGoods:{}};let Rt=[["padding","PADDING",0],["skinSwitch","SKIN_SWITCH",!1],["generalSwitch","GENERAL_SWITCH",!1],["skinStateSwitch","SKIN_STATE_SWITCH",!0],["skinStateBlockSwitch","SKIN_STATE_BLOCK_SWITCH",!1],["skinPaperSwitch","SKIN_PAPER_SWITCH",!0],["allPaperSwitch","ALL_PAPER_SWITCH",!1],["cardBackSwitch","CARD_BACK_SWITCH",!1],["seatUISwitch","SEAT_UI_SWITCH",!0],["autoSignSwitch","AUTO_SIGN_SWITCH",!1],["autoSignSkipSwitch","AUTO_SIGN_SKIP_SWITCH",!1],["autoInviteSwitch","AUTO_INVITE_SWITCH",!1],["autoDrumSwitch","AUTO_DRUM_SWITCH",!1],["autoWuJiangSwitch","AUTO_WUJIANG_SWITCH",!1],["autoKanShuSwitch","AUTO_KANSHU_SWITCH",!1],["autoYueKaSwitch","AUTO_YUEKA_SWITCH",!1],["skipWindowSwitch","SKIP_WINDOW_SWITCH",!1],["skipProbWindowSwitch","SKIP_PROB_WINDOW_SWITCH",!1],["skipADSwitch","SKIP_AD_SWITCH",!0],["CDKNotificationSwitch","CDK_NOTIFICATION_SWITCH",!0],["killEffectSwitch","KILL_EFFECT_SWITCH",!1],["wuxieSwitch","WUXIE_SWITCH",!1],["rogueCitySwitch","ROGUE_CITY_SWITCH",!0],["cardLabelSwitch","CARD_LABEL_SWITCH",!0]];const ae=new Proxy(Object.fromEntries(Rt.map(([t,e,n])=>(localStorage.getItem(e)===null&&Ke(e,n),[t,Pe(e,n)]))),{set:function(t,e,n){var o;const i=Rt.find(([l])=>l===e);if(!i)return !1;const r=i[1];if(Ke(r,n),window.event&&((o=window.event.detail)==null?void 0:o.source)==="server-sync")return t[e]=n,!0;let s={username:w.userID,settingKey:e,value:n};return Qt(ni(s),300),t[e]=n,e=="padding"&&(window.padding=n),!0}}),J={seatWidthPercent:.3,firstUpdateSeatUI:!1,scoreFrameTotal:10,scoreFrameIndex:0,paddingLeft:10,paddingRight:15,paddingTop:30,paddingBottom:0,paddingLeftTopExtra:0,selectStarted:!1,leftRightTop:20,stackCardAreaHeight:0,stackCardAreaY:0,MAX_SEAT_WIDTH:149,inPopFirstTarget:!1,unscaledWidth:146,unscaledHeight:172,MAX_HEIGHT:180,MAX_WIDTH:150,scale:1,selfSeatUiUnscaledHeight:178,rightBarWidth:221,seatUIs:[],cities:[]},M={},Oe={};function Ln(t){Object.assign(Oe,t);}const mt=Pe("gameRecord",{}),ve={},ie={tasks:{},corr:0,shift:0,now(t=!0){return Date.now()+this.corr+(t?0:this.shift)},sync(t){this.corr=(t.ServerTime-8*3600)*1e3-Date.now(),this.shift&&(t.ServerTime+=this.shift/1e3>>0);},update(t=Date.now()){var e;(e=B.class("TimerManager"))==null||e.SendHeartbeart(t);},modify(t=null){this.shift=t?t-this.now():0,this.update();},local(t){let e=new Date(t??this.now()),n=e.getTimezoneOffset();return e.setMinutes(e.getMinutes()-n),e.toISOString()},loop(t,e,n,i=1/0,r){this.clear(t);let a=setInterval(()=>{e(),--i<=0&&(this.clear(t),typeof r=="function"&&r());},n);return this.tasks[t]={intervalId:a,callback:e},this.tasks[t].intervalId},delay(t,e,n){this.clear(t);let i=setTimeout(()=>{this.clear(t),e();},n);return this.tasks[t]={timeoutId:i,callback:e},this.tasks[t].timeoutId},set(t,e,n,i=18e5){this.clear(t);const r=this.now(),a=(n??r)-r;if(a>1){let s=setTimeout(()=>this.set(t,e,n,i),a<i?a:i);this.tasks[t]={timeoutId:s,callback:e};}else e();},trigger(t){if(!this.tasks[t])return null;let{timeoutId:e,callback:n}=this.tasks[t];return e&&(clearTimeout(e),delete this.tasks[t]),typeof n!="function"?!1:(n(),!0)},clear(t){t?Array.isArray(t)||(t=[t]):t=Object.keys(this.tasks),t.filter(e=>this.tasks[e]).map(e=>{if(!this.tasks[e])return null;let{intervalId:n,timeoutId:i}=this.tasks[e];return i&&clearTimeout(i),n&&clearInterval(n),delete this.tasks[e],e});}},H=new Proxy({turn:0,round:0,phase:0,currentID:void 0,isGameStart:!0,isPassed:!1,spellSpace:{},domContainer:["temp","phase","round","turn","game","long"].reduce((t,e,n)=>(t[e]=t[n]=[],t),{}),end(t){(this.isGameStart&&!this.isPassed||t===!1)&&(this.isGameStart=!1,this.isPassed=!0,J.seatUIs=[],J.friendGeneral=0,Ft(null),B.reset(),document.querySelectorAll(".mizhu").forEach(e=>e.style.display="none"),console.warn("游戏已结束！")),t&&this.isPassed&&(this.isPassed=!1,this.turn=0,this.round=0,this.phase=0,this.currentID=void 0,this.spellSpace={},Ut(w.userID),O.reset(),console.warn("游戏已重置！游戏即将开始！"),Qe(()=>B.init()));},ready(t){this.end(!0),O.cardList=t;let e=M.cardIDsOrder.filter(i=>t.includes(i)),n=e.concat(t.filter(i=>!e.includes(i))).filter(Boolean);xe.init(n),te.init(n,"2-255"),O.isGuoZhan=t.includes(1150),O.isDouDiZhu=t.includes(13005),O.isShanHeTu=t.includes(20100),O.isShanHeTu&&(ve.sanBanFu=0),ns(),O.isShanHeTu&&di(),[3338].forEach(i=>delete this.spellSpace[i]),console.warn("牌堆初始化完成"),Cn(1,[]);},start(){this.isGameStart||!O.size||(this.isGameStart=!0,this.isPassed=!1,console.warn("游戏开始！["+O.seatIDs+"] > "+O.mySeats),Ki(),Ji(O.size),te.draw());},enter(t,e,n){var i,r,a,s,o;if(t>0)this.turn=t,this.round=0,this.clear("turn"),t==1&&(this.clear("game"),this.start());else {e==0?(this.currentID=n,this.round++,this.phase=0,[7011,3090,2143,3271].forEach(f=>delete this.spellSpace[f]),document.getElementById("suit").innerText="",document.getElementById("boTu").innerText="",document.getElementById("result").innerHTML="",te.draw("2-255"),this.clear("round"),w.autoBotSwitch===!0&&B.limit>0&&((s=(a=(r=(i=B.gamescene)==null?void 0:i.topMenu)==null?void 0:r.areaServerLabel)==null?void 0:a.text)!=null&&s.includes("身份"))&&(this.currentID==O.seatUIs.filter(f=>f.seat.currentHp>0).map(f=>f.seat.index).slice(-1)[0]?B.auto(3):this.currentID!=O.mySeats[0]&&B.auto(!0))):this.phase++,this.clear("phase");let l=document.getElementById("phrase"),c=parseInt((o=l.innerText.match(/\(([0-9])\)$/))==null?void 0:o[1]);this.phase==c?l.innerText=l.innerText.replace(/(回合)?(.{2,3})(阶段)? ?\(([0-9])\)$/,`$2>${["开始时","准备","判定","摸牌","出牌","弃牌","结束","结束时","结束后"][e]}($4)`):l.innerText=`${["回合开始时","准备阶段","判定阶段","摸牌阶段","出牌阶段","弃牌阶段","结束阶段","回合结束时","回合结束后"][e]} (${this.phase})`;}},clear(t,e,n){let i=this.domContainer[t];for(let r=i.length-1;r>=0;r--)n===void 0&&e!==i[r].SpellID&&i[r].count--,(!(i[r].count>0)||e===i[r].SpellID&&n===i[r].SeatID)&&(i[r].element.remove(),i.splice(r,1));}},{ownKeys(t){return Reflect.ownKeys(t.spellSpace)},getOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t.spellSpace,e)},deleteProperty(t,e){return Reflect.deleteProperty(t.spellSpace,e)},get(t,e,n){return e in t?t[e]:Reflect.get(t.spellSpace,e,t.spellSpace)},set(t,e,n,i){return e in t?t[e]=n:Reflect.set(t.spellSpace,e,n,t.spellSpace),!0}}),O={cardList:[],seatUIs:[],seatIDs:[],orderIDs:[],mySeats:[],generals:{},shift:0,isShanHeTu:!1,isGuoZhan:!1,isDouDiZhu:!1,size:void 0,firstID:void 0,seatPos(t=8){return {0:[],1:[0],2:[0,4],3:[0,3,5],4:[0,1,4,7],5:[0,1,3,5,7],6:[0,1,3,4,5,7],7:[0,1,2,3,5,6,7],8:[0,1,2,3,4,5,6,7]}[t]},dealCard:()=>null,reset(){this.cardList=[],this.seatUIs=[],this.seatIDs=[],this.orderIDs=[],this.mySeats=[],this.generals={},this.shift=0,this.isShanHeTu=!1,this.isGuoZhan=!1,this.isDouDiZhu=!1,this.size=void 0,this.firstID=void 0,this.dealCard=(t,e)=>{t=parseInt(t),this.orderIDs.includes(t)||(this.firstID===void 0&&(this.firstID=t,console.warn("[PubGsCMoveCard]先手位置:"+t)),this.orderIDs.push(t),e>0&&!this.mySeats.includes(t)&&(this.mySeats.length?this.mySeats.push(t):this.setMyID(t)),this.update(!1,this.orderIDs)),this.orderIDs.length==this.size&&(this.dealCard=()=>null);};},getOrder(t){var i;if(this.seatUIs.length)return (i=this.seatUIs.find(r=>r.seatID==t))==null?void 0:i.order;let e=this.seatIDs.indexOf(this.firstID??this.seatIDs[0])%this.size,n=this.seatIDs.indexOf(parseInt(t));if(n!==-1)return (n-e+this.size)%this.size},getIndex(t){if(this.seatUIs.length)return this.seatUIs.findIndex(r=>r.seatID==t);let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,n=this.seatIDs.indexOf(parseInt(t));if(n<0)return;let i=(n-e+this.size)%this.size;return this.seatPos()[i]},getID(t){var r;if(this.seatUIs.length)return (r=this.seatUIs[this.seatPos().indexOf(parseInt(t))])==null?void 0:r.seatID;let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,n=this.seatPos().indexOf(parseInt(t));if(n<0)return;let i=(n+e+this.size)%this.size;return this.seatIDs[i]},sequence(t){let e=this.seatIDs.indexOf(t);return e<0?[]:this.seatIDs.slice(e).concat(this.seatIDs.slice(0,e))},update(t,e=this.orderIDs){if(e=e.slice(),e.length>this.seatIDs.length||e.length==this.seatIDs.length&&t!==!1)this.seatIDs=e,this.size=e.length;else if(t){for(let n=e.length;n<this.size;n++)e.push(((e[n-1]??-1)+1)%this.size);this.seatIDs=e,this.size=e.length;}this.draw();},fromUI(t=[]){var e;this.seatUIs=t,this.size=this.seatUIs.length,this.firstID=((e=this.seatUIs.find(n=>n.order==0))==null?void 0:e.seatID)??this.firstID,this.seatIDs=this.seatUIs.map(n=>n.seatID),this.setMyID(this.seatUIs[0].seatID),this.draw();},setMyID(t){if(t!==void 0&&this.mySeats[0]!==t){let e=this.mySeats.indexOf(t);e>-1&&this.mySeats.splice(e,1),this.mySeats.unshift(t);}},setGeneral(t,e,n=0,i=!1){if(!M.generalDict[e])return;this.generals[t]||(this.generals[t]=Array(this.isGuoZhan?2:1).fill(0)),this.generals[t][n]=e,this.isGuoZhan&&!i&&ie.delay("seatUIs",()=>B.seatUIs(),3e3);let r=this.getOrder(t),a=document.getElementById(r+1);a&&a.style.setProperty("--No-content",`"${O.name(t)}"`);},find(t,e,n=!1){var i;return Array.isArray(e)||(e=[e]),(i=this.generals[t])==null?void 0:i.find(r=>e.find(a=>{var s;return n?(s=M.skinMap[r])==null?void 0:s.has(a):r==a}))},name(t,e=!0){var r,a,s,o;let n=this.getOrder(t);if(n===void 0)return "";let i=((r=this.generals[t])==null?void 0:r.length)>1?this.generals[t].map(l=>M.generalDict[l]):[(o=(s=(a=this.seatUIs.find(l=>l.seatID==t))==null?void 0:a.seat)==null?void 0:s.general)==null?void 0:o.CardName];return e===null&&(i==null?void 0:i.length)!=1&&(i=[]),(i!=null&&i.some(Boolean)?i.map(l=>l||"暗").join("丨"):"一二三四五六七八"[n]+"号位")+(e?"丨"+"一二三四五六七八"[n]:"")},draw(){this.seatIDs.forEach(t=>{let e=this.getOrder(t),n=document.getElementById(e+1);if(!n)return;let i=O.name(t);n.style.setProperty("--No-content",`"${i}"`);}),Ft();}},xe=new Proxy({name:{},color:Array.from({length:7},()=>new Set),number:Array.from({length:14},()=>new Set),query:new Set,select:{name:new Set,color:new Set,number:new Set},cards:[],QCARD:class{constructor(t,e,n,i,r){this.id=t,this.name=e,this.color=n,this.number=i,this.type=r,this.key=-1;}plot(t){let e=this._button;if(!e){if(e=this._button=document.createElement("button"),e.className=this.color<=2?"shoupai R":"shoupai",!this.id)return e;e.id="Qcard"+this.id,e.innerHTML=`<span>${An(this.color)+He(this.number)}</span><br>${this.name.substring(0,2)}`;}return (this.key!==t||t==1)&&(this.key=t,e.style.backgroundColor=t===0?"":t===1?"cyan":"#23201d",e.title=t===0?"牌堆":t===2?"弃牌堆":se.findKZ(this.id).zones.map(n=>{let[i,r,a]=n.split("-").map(s=>parseInt(s));return te.name(r,i,null,a,a)}).join("/")),e}},[Symbol.iterator]:function*(){for(let t of this.cards)t!==void 0&&(yield t);},init(t){this.name={},this.color=Array.from({length:7},()=>new Set),this.number=Array.from({length:14},()=>new Set),this.type=Array.from({length:4},()=>new Set),this.query=new Set,this.select={name:new Set,color:new Set,number:new Set},this.cards=[],t.forEach(e=>{let{name:n,color:i,number:r,type:a}=ce[e];n in this.name||(this.name[n]=new Set),this.name[n].add(e),this.color[i].add(e),this.number[r].add(e),this.type[a].add(e),i==3&&r>=2&&r<=9&&this.number[0].add(e),n.match(/^(冰|火|雷)?杀$/)&&this.color[Math.ceil(i/2)+4].add(e),this.cards[e]=new this.QCARD(e,n,i,r,a);});},onquery(t,e){if(this.select[t].delete(e)){if(this.select[t].size){Array.from(this[t][e]).forEach(n=>this.query.delete(n)),this.draw();return}}else this.select[t].add(e);this.query=["name","number","color"].filter(n=>this.select[n].size).reduce((n,i)=>new Set(Array.from(this.select[i]).flatMap(r=>Array.from(this[i][r])).filter(r=>!n.size||n.has(r))),new Set),this.draw();},queryone(t,e){this.query=new Set(Array.from(this[t][e])),this.draw();},draw(){const t=document.getElementById("cardTypeDetail");if(t.innerHTML="",this.query.size==0)return;let e=new Set(te.unknown),n=new Set(te.qipai),i=M.cardIDsOrder.filter(r=>this.query.has(r)).reduce((r,a)=>(e.has(a)?r[0].push(a):n.has(a)?r[2].push(a):r[1].push(a),r),[[],[],[]]);[0,1,2].forEach(r=>i[r].forEach(a=>t.appendChild(this.cards[a].plot(r))));}},{get(t,e,n){return typeof e=="number"||typeof e=="string"&&!isNaN(e)?t.cards[e]:Reflect.get(...arguments)}}),$=class ${static label(e){if($.groups.has(e))return $.groups.get(e);const n=$.LABELs.shift();return $.groups.set(e,n),n}constructor(e,n=null,i="12-255",r=null,a=null){var s;this._key=e,this.zone=i,this.id=n??((s=this.next)==null?void 0:s.id)??this.key,this.next=r,this.prev=a,$.nodes.has(e)||$.nodes.set(e,new Set),$.nodes.get(e).add(this);}get head(){let e=this;for(;e.prev;)e=e.prev;return e}get end(){let e=this;for(;e.next;)e=e.next;return e}get key(){return this._key}set key(e){this._key!=e&&($.nodes.get(this._key).delete(this),this._key=e,$.nodes.has(e)||$.nodes.set(e,new Set),$.nodes.get(e).add(this));}static get(e){return $.nodes.has(e)?Array.from($.nodes.get(e)):[]}static init(e,n){return $.key=0,$.nodes=new Map,$.groups=new Map([[0,"?"]]),$.LABELs=Array.from({length:62},(i,r)=>String.fromCharCode(r+65)),e.map(i=>new $(0,i,n))}toString(){return this.next?this.prev?this.key+"<"+this.next.toString():this.zone+":"+this.key+"<"+this.next.toString():"["+this.id+"]"+(this.key>0?ce[this.id].ncn:"？")}plot(e){var i;if(this.key<0&&this.key%2==0&&this.next)return this.next.plot(e);let n=this._button;return n||(n=this._button=document.createElement("button"),n.className="shoupai"),n.disabled=this.key<=0&&this.key%2==0,(e||this.key!=((i=n==null?void 0:n.dataset)==null?void 0:i.key)||this.key<=0&&$.label(this.key)!=n.innerHTML)&&(n.className="shoupai",n.id="card"+this.id,n.dataset.key=this.key,this.key>0?(n.classList.remove("G"),ce[this.id].color>2?n.classList.remove("R"):ce[this.id].color>0&&n.classList.add("R"),n.style.color="",n.style.fontSize="",n.title=new te("unknown").cards.has(this)?$.findKZ(this.id).zones.map(r=>{let[a,s,o]=r.split("-").map(l=>parseInt(l));return te.name(s,a,null,o,o)}).join("/"):ce[this.id].ncn,n.innerHTML=`<span>${ce[this.id].cn}</span><br>${ce[this.id].name.substring(0,2)}`):(n.classList.add("G"),n.innerHTML="？")),n}swap(e){if(!e||e==this)return this;for([this.key,e.key]=[e.key,this.key],[this.id,e.id]=[e.id,this.id],[this.next,e.next]=[e.next,this.next],this.next&&(this.next.prev=this),e.next&&(e.next.prev=e);e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;for(e.plot(!0),te.draw(e.zone),e=this;e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;return e.plot(!0),te.draw(e.zone),this}create(e){const n=new $(this.key,this.id,this.zone,this.next,this);return this.key=e,this.next&&(this.next.prev=n),this.next=n,this}delete(){let e=!1;if(this.next){let n=this.next;return this.key=n.key,this.id=n.id,this.next=n.next,n.next?n.next.prev=this:new te("unknown").cards.delete(n)&&(e=!0,this.prev&&new te("unknown").cards.add(this)),$.nodes.get(n.key).delete(n),e}else return this.key===0?(this.key=this.id,qt(this.id,this.key),!0):null}destroy(e){let n=!1,i=this.key;for(;i<0;)this.delete()&&(n=!0),$.unpack(i)&&(n=!0),i=this.key;return this.key!=e&&(this.key=e??this.id,qt(this.id,this.key)),this.prev?$.unpack(this.prev.key):(this.plot(!0),te.draw(this.zone)),n&&te.draw("unknown"),this}identify(e,n=null){if(n!==null&&console.count("REidentify"+n+">"+this),this.id==e)return this.key>0?this:(n&&(this.end.id=n),this.destroy(),this);let i,r=new Set([this.key]),a=[[this.key,[]]];for(;a.length>0;){let[s,o]=a.shift();if(i=$.find(s,e),i){o.concat(i).reduce((l,c)=>l.swap(c).next,this);break}for(let l of $.get(s).filter(c=>c.next))r.has(l.next.key)||(r.add(l.next.key),a.push([l.next.key,o.concat(l)]));}if(i){if(n){let s=this;for(s.id=n;s.next;)s=s.next,s.id=n;}return this.destroy(),this}else {if(e>0)return this.identify(0,e);console.error("identify error: "+(e>0?e:n)+">"+this);}return null}static move(e,n){Array.isArray(e)||(e=[e]);let{turn:i,round:r,phase:a}=H;return e==null||e.forEach(s=>Object.assign(s,{zone:n,turn:i,round:r,phase:a})),Array.from(new Set(e==null?void 0:e.map(s=>s.key))).filter(s=>s<=0).map(s=>$.unpack(s)).length?te.draw("unknown"):Array.from(new Set(e==null?void 0:e.map(s=>s.key))).filter(s=>s>0&&xe.query.has(s)).forEach(s=>{xe[s].plot(n=="2-255"?2:1);}),e}static pack(e,n,i){if(!((e==null?void 0:e.length)>1&&(e!=null&&e.every(s=>s))))return;let r=new Set(e.map(s=>s.key));if(r.size===1)return [...r][0];$.key=$.key-1;let a;if(i){if(new Set(e.map(l=>l.head.zone)).size===1)return null;let o=Array.from($.nodes.keys()).filter(l=>l<0);for(let l=0;l>=$.key;l--)if(!(o.includes(l*2-1)||o.includes(l*2-2))){a=l*2-i;break}o.filter(l=>l>a).sort((l,c)=>l-c).forEach(l=>{$.get(l).forEach(c=>{c.key=c.key-2,c.head.plot(!0);});}),a=-i;}else a=$.key*2-(n?2:1);return e.forEach(s=>{s.create(a),new te("unknown").cards.delete(s),n||new te("unknown").cards.add(s.end);}),te.draw("unknown"),a}static unpack(e){if(e>0)return !0;const n=$.get(e);let i=new Set(n.map(a=>{var s;return (s=a.next)==null?void 0:s.key})),r=new Set(n.map(a=>a.head.zone));if(n.length===1||!r.has("1-255")&&(r.size===1||i.size===1&&e!==0)){$.groups.has(e)&&($.LABELs.unshift($.groups.get(e)),$.groups.delete(e));let a=n.map(s=>s.delete()).some(Boolean);return Array.from(new Set(n.filter(s=>s.prev).map(s=>s.prev.key))).forEach(s=>$.unpack(s)),n.filter(s=>!s.prev).forEach(s=>s.plot(!0)),Array.from(r).forEach(s=>te.draw(s)),a}else return !1}static find(e,n){let i=$.get(e).find(r=>r.id==n);if(i===void 0&&e!=0){let r=$.get(0).find(a=>a.id==n);r&&(i=$.get(e).find(a=>a.end.key==0),i!==void 0&&r.swap(i.end));}return i}static findIDs(e,n=!1,i=new Set,r=new Set){return r.add(e),e>0||!n&&e==0?i.add(e):(n||e%2!=0)&&$.get(e).forEach(a=>{if(a.next){let s=a.next.key;r.has(s)||$.findIDs(s,n,i,r);}else n&&i.add(a.id);}),Array.from(i)}static findKZ(e,n=!1,i=new Set,r=new Set){let a=e;return !(a instanceof $)&&e>0&&(a=$.get(e)[0]),a instanceof $||(a=$.get(0).find(s=>s.id==e)),a instanceof $&&(!n&&a.key==0?(r.add(""),i.add(0)):(r.add(a.head.zone),i.has(a.key)||(i.add(a.key),(a.key<0||n&&a.key==0)&&$.get(a.key).forEach(s=>{s!=a&&$.findKZ(s,n,i,r);})),a.prev&&$.findKZ(a.prev,n,i,r))),{keys:Array.from(i),zones:Array.from(r)}}};et($,"key",NaN),et($,"nodes",new Map),et($,"groups",new Map([[0,"?"]])),et($,"LABELs",Array.from({length:50},(e,n)=>String.fromCodePoint(n<20?9312+n:n<35?12881-20+n:12977-35+n)));let se=$;const ke=class ke{static get paidui(){return Array.from(new Set(Array.from(se.get(0),({id:e})=>e).concat((ke.obj["1-255"]??[]).map(({id:e})=>e))))}static get qipai(){return (ke.obj["2-255"]??[]).filter(({key:e})=>e>0).map(({id:e})=>e)}static get unknown(){return Array.from(se.get(0),({id:e})=>e)}static shoupai(e){return (ke.obj["5-"+e]??[]).filter(({key:n})=>n>0).map(({id:n})=>n)}constructor(e,n=5,i=Le,r=null,a=null,s=null){var o;typeof e=="number"?(this.id=e,this.zone=n,this.id==0&&[0,1,2,3,9,12].includes(this.zone)&&(this.id=255),this.zone==9&&(this.zone=1),this.zone==4&&(this.id=this.id+"-"+(s||a||0)),this.zone==8&&(this.id="-"+(a||s||0)),this.zoneID=this.zone+"-"+this.id):typeof e=="string"?[this.zoneID,this.zone,this.id]=e.match(/(.*?)-(.*)/)??[e,e,""]:(o=e==null?void 0:e.every)!=null&&o.call(e,l=>l instanceof se),this.zoneID in ke.obj||(ke.obj[this.zoneID]=[]),this.zone==1?this.pos=i===Le?Ve:i===Ve?Le:i:this.zone===10?this.pos=i:this.pos=Be,this.count=r;}show(e=[]){if(isNaN(se.key))return [];if(Array.isArray(e)||(e=[e]),e.filter(r=>r>0).length==0)return [];let n=[],i=e.slice();if(this.pos==Le)n=this.cards.slice(-e.length).map(r=>r.identify(i.shift()));else if(this.pos!=Be)n=this.cards.slice(this.pos,e.length).map(r=>r.identify(i.shift()));else if(this.zone!=1){let r=i.map(a=>se.findKZ(a,!0).keys);this.cards.slice().sort((a,s)=>s.key-a.key).some(a=>{if(i.filter(s=>s>0).length==0)return !0;r.some((s,o)=>{if(s.includes(a.key))return n[o]=a.identify(i[o]),s.length=0,i[o]=null,!0});}),i.forEach((a,s)=>{var o,l,c,f;if(a&&(n[s]=(o=this.cards.find(d=>d.id==0))==null?void 0:o.identify(a),n[s]===void 0&&(n[s]=(l=this.cards.find(d=>d.key==0))==null?void 0:l.identify(a)),n[s]===void 0)){let d=se.get(a)[0];d?(n[s]=(f=(c=this.cards.find(u=>!n.includes(u)))==null?void 0:c.swap(d))==null?void 0:f.identify(a),console.error(this.zoneID+"SWAP Card ["+a+"] Shown")):(n[s]=new se(a,a,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+a+"] Shown"));}});}return ke.draw(this.zoneID),n}remove(e=[],n,i){if(isNaN(se.key))return [];Array.isArray(e)||(e=[e]),i&&(this.count=i);let r=[],a=e.slice();if(this.pos==Le)r=this.cards.splice(-this.count);else if(this.pos!=Be)r=this.cards.splice(this.pos,this.count),this.zone==1&&[3208,7011,987,988].includes(n)&&(r=r.reverse());else if(e.filter(l=>l>0).length>0){let l=a.map(f=>se.findKZ(f,!0).keys);this.cards.slice().reverse().sort((f,d)=>d.key-f.key).some(f=>{if(a.filter(d=>d>0).length==0)return !0;l.some((d,u)=>{if(d.includes(f.key))return r[u]=this.cards.splice(this.cards.indexOf(f),1)[0],d.length=0,a[u]=null,!0});}),a.forEach((f,d)=>{var p;if(!f)return;let u=this.cards.findIndex(m=>m.id==0);if(u===-1&&(u=this.cards.findIndex(m=>m.key==0)),u>-1)r[d]=this.cards.splice(u,1)[0];else {let m=se.get(f)[0],y=this.cards.findIndex(C=>!r.includes(C));m&&y>=0?(r[d]=(p=this.cards.splice(y,1)[0])==null?void 0:p.swap(m),console.error(this.zoneID+"SWAP Card ["+f+"] Moved")):(r[d]=new se(f,f,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+f+"] Moved"));}});}else if(this.count==this.length||this.size==1)r=this.cards.splice(0,this.count);else if(this.zone==1||this.zone==2){var s=[...this.cards.filter(l=>l.key<=0).sort((l,c)=>c.key-l.key),...this.cards.filter(l=>l.key>0)];if([11104,3488,862].includes(n)){var o=new Set(s.map(l=>l.key));n==11104?o=new Set(Array.from(o).filter(l=>se.get(l).some(c=>{var f;return (f=xe.type[3])==null?void 0:f.has(c.id)}))):n==3488?o=new Set(Array.from(o).filter(l=>se.get(l).some(c=>{var f,d,u;return ((f=xe.name.雷杀)==null?void 0:f.has(c.id))||((d=xe.name.火杀)==null?void 0:d.has(c.id))||((u=xe.name.冰杀)==null?void 0:u.has(c.id))}))):n==862&&(o=new Set(Array.from(o).filter(l=>se.get(l).some(c=>xe.number[6].has(c.id))))),s=s.filter(l=>o.has(l.key));}r=s.slice(0,this.count),r.some(l=>l.key>0||l.key%2)&&se.pack(s,!0),r.forEach(l=>this.cards.splice(this.cards.indexOf(l),1));}else se.pack(this.cards),r=this.cards.splice(0,this.count);return r.length!=this.count&&Array.from({length:this.count-r.length},()=>(console.error(this.zoneID+" New Card Moved"),r.push(new se(0,0,this.zoneID)))),e.filter(l=>l>0).length==this.count?e.forEach((l,c)=>{var f;return (f=r[c])==null?void 0:f.identify(l)}):r.filter(l=>l.key>0).length==this.count&&r.forEach(({id:l},c)=>{e[c]=l;}),ke.draw(this.zoneID),r}add(e){if(isNaN(se.key))return;let n=se.move(e,this.zoneID).slice();return this.pos==Be?this.cards.splice(this.cards.length,0,...n):this.pos==Le?this.cards.splice(this.cards.length,0,...n):this.cards.splice(this.pos,0,...n.reverse()),ke.draw(this.zoneID),e}set(e){isNaN(se.key)||(ke.obj[this.zoneID]=se.move(e,this.zoneID),ke.draw(this.zoneID));}get cards(){return ke.obj[this.zoneID]??[]}get length(){var e;return ((e=this.cards)==null?void 0:e.length)??0}get size(){var e;return new Set(((e=this.cards)==null?void 0:e.map(n=>n.key))??[]).size}static init(e,n){ke.obj={unknown:new Set},ke.obj[n]=se.init(e,n);}static draw(e){var c,f;if(isNaN(se.key))return;if(e===void 0){Object.keys(ke.obj).filter(d=>d.split("-")[0]=="5").forEach(d=>ke.draw(d));return}let n=null,i=null,[r,a,s]=((c=e.split("-"))==null?void 0:c.map(Number))??[];if(e=="unknown")n="knownCards";else if(r==1)n="paiduiCards";else if(r==2)n="qipaiCards";else if(r==5)n=String(O.getOrder(a)+1);else if(r==4&&s in M.markSpell)n="mark"+e;else return;i=document.getElementById(n);let o=Array.from(ke.obj[e]??[]);if(r==2){let{turn:d,round:u,phase:p}=H;o=o.filter(m=>m.turn==d&&m.round==u);}if(e=="unknown"&&(Array.from(new Set(o.map(d=>d.head.zone))).forEach(d=>ke.draw(d)),xe.draw()),!o||o.filter(d=>d.key>0||d.key%2!==0).length==0){i&&(i.classList.contains("markedCard")?i.remove():i.querySelectorAll(":scope>.shoupai").forEach(d=>d.remove()));return}if(i)i.querySelectorAll(":scope>.shoupai").forEach(d=>d.remove());else if(r==4)(f=document.getElementById(String(O.getOrder(a)+1)))==null||f.insertAdjacentHTML("beforeend",`<div id="${n}" class="markedCard"><span class = 'mark'>${M.markSpell[s]}</span></div>`),i=document.getElementById(n);else return;e!="1-255"&&o.sort((d,u)=>d.key>0&&u.key>0?0:u.key-d.key),r==4&&(i=i.firstElementChild||i);var l=1;o.map(d=>d.plot(e=="unknown")).reverse().forEach((d,u,p)=>{var m,y;if(d.dataset.key==((y=(m=p[u+1])==null?void 0:m.dataset)==null?void 0:y.key))l++;else {l>1&&(d.style.fontSize="",d.innerHTML=`<span>${d.innerHTML}×</span><br>${l}`);let C=parseInt(d.dataset.key);if(C<0){let S=se.findIDs(C).sort((j,ne)=>j>0&&ne>0?0:ne-j);d.title=l+"张："+S.map(j=>ce[j].ncn).join("/"),e!=="1-255"&&S.length<5&&(d.style.fontSize="",d.innerHTML=S.map(j=>{var ne,k;return ((k=(ne=se.get(j)[0])==null?void 0:ne.plot())==null?void 0:k.outerHTML)||""}).join(""));}r==4?i.insertAdjacentElement("afterend",d):i.insertAdjacentElement("afterbegin",d),l=1;}});}static name(e,n,i,r,a){var o;let s;if(isNaN(n))return "?";if(n==1&&e==0)return "牌堆(游戏开始前) ";if(n==1&&e==255)s="牌堆";else if(n==2)s="弃牌堆";else if(n==3)s="处理区";else if(n==4)s="标记";else if(n==5)s="手牌";else if(n==6)s="装备";else if(n==7)s="判定区";else if(n==8)s="弹窗";else {if(n==9)return "洗牌";n==10?s="交换临时区":n==11?s="弃牌临时区":n==12?s="回收区":n==0&&(s="游戏外");}return ([0,1,2,3,8,11,12].includes(n)?"":O.name(e,!1))+([4,8].includes(n)?"["+((o=M.spellDict[n==8?a:r||a||0])==null?void 0:o.name)+"]":"")+(s??"zone"+n)+({[Ve]:"底",[Le]:"顶",[Be]:"*"}[i]??(i?":"+i:""))}};et(ke,"obj",{unknown:new Set});let te=ke;function Si(t=[],e=[]){const n=new Map;return t.forEach(i=>{n.set(i.GoodsBaseID,i.ChangeCount);}),e.forEach(i=>{const{GoodsBaseID:r,ChangeCount:a}=i;n.has(r)?n.set(r,n.get(r)+a):n.set(r,a);}),Array.from(n,([i,r])=>({GoodsBaseID:i,ChangeCount:r}))}const On={乐不思蜀:"乐",兵粮寸断:"兵",八卦阵:"八卦",爪黄飞电:"爪黄+1",的卢:"的卢+1",绝影:"绝影+1",骅骝:"骅骝+1",赤兔:"赤兔-1",大宛:"大宛-1",紫骍:"紫骍-1",紫騂:"紫骍-1",诸葛连弩:"连弩",木牛流马:"木马",顺手牵羊:"顺手",万箭齐发:"万箭",五谷丰登:"五谷",无中生有:"无中",过河拆桥:"过拆",桃园结义:"桃园",无懈可击:"无懈",南蛮入侵:"南蛮",借刀杀人:"借刀",铁索连环:"铁索",随机应变:"随机",远交近攻:"远交",以逸待劳:"逸劳",知己知彼:"知己",逐近弃远:"逐近",洞烛先机:"洞烛",出其不意:"出其",水淹七军:"水淹","无懈可击·国":"国无",挟天子以令诸侯:"挟令",方天画戟:"方天戟",雌雄双股剑:"雌雄剑",青龙偃月刀:"青龙刀",丈八蛇矛:"丈八矛",朱雀羽扇:"朱雀扇",白银狮子:"白银狮",三尖两刃刀:"三尖刀",乌铁锁链:"乌铁链",五行鹤翎扇:"五行扇",太公阴符:"太公符",无双方天戟:"无双戟",束发紫金冠:"紫金冠",玲珑狮蛮带:"玲珑带",红棉百花袍:"百花袍",红锦百花袍:"百花袍",四乘粮舆:"四乘舆",铁蒺玄舆:"铁蒺舆",飞轮战舆:"飞轮舆",鬼龙斩月刀:"鬼龙刀",国风玉袍:"国风袍",赤炎镇魂琴:"赤炎琴",奇门八阵:"奇门阵",绝尘金戈:"绝尘+1",修罗炼狱戟:"修罗戟",虚妄之冕:"虚妄冕",赤血青峰:"赤青锋",赤血青锋:"赤青锋",鸾凤和鸣剑:"鸾凤剑",七彩神鹿:"神鹿-1",金乌落日弓:"金乌弓",刑天破军斧:"刑天斧",长安大舰:"长安-2",禅让诏书:"诏书",镔铁双戟:"镔铁戟",继往开来:"继往",攻守兼备:"攻守",进退自如:"进退",洪荒之力:"洪荒",同舟共济:"同舟",力争上游:"力争",逆水行舟:"逆水",撒豆成兵:"撒豆",移花接木:"移花",联军盛宴:"联军",调虎离山:"调虎",火烧连营:"火烧",勠力同心:"勠力",调剂盐梅:"调剂",声东击西:"声东",增兵减灶:"增兵",草木皆兵:"草木",唯我独尊:"独尊",弃甲曳兵:"弃甲",金蝉脱壳:"金蝉",故步自封:"自封",金鼓笙旗:"金鼓",党同伐异:"伐异",燎原之火:"燎原","八卦阵(复制)":"八卦","仁王盾(复制)":"仁王盾","藤甲(复制)":"藤甲","白银狮子(复制)":"白银狮",商鞅变法:"变法",真龙长剑:"真龙剑",传国玉玺:"玉玺",厚积形:"厚积",桎梏形:"桎梏",盈冲形:"盈冲",背水形:"背水",整肃形:"整肃",寸兵形:"寸兵",雄黄酒:"酒"},ce=new Proxy({cards:{0:{name:"",type:0,color:0,number:0,ncn:"?",cn:"0",c:"",n:0}},[Symbol.iterator]:function*(){for(let t in this.cards)yield this.cards[t];}},{get:function(t,e){var n;if(e in t)return t[e];if(!t.cards[e])if((n=M.cardDict)!=null&&n[e]){let{name:i,type:r,color:a,number:s,subType:o}=M.cardDict[e],l=An(a),c=He(s);t.cards[e]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[o]||On[i]||i,type:parseInt(r),color:parseInt(a),number:parseInt(s),ncn:i+l+c,cn:l+c,c:l,n:c};}else t.cards[e]=t.cards[0];return t.cards[e]}});function An(t){return ["","♥","♦","♠","♣"][t]??""}function He(t,e=!0){return e&&parseInt(t)==1?"A":{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"J",12:"Q",13:"K"}[t]??""}function wi(){for(let e=11;e<=60;e++){const n=`https://web.sanguosha.com/220/h5_2/res/runtime/pc/Face/${e}.png`,i=document.createElement("img");i.src=n,i.classList.add("face"),i.onmousedown=()=>Xe(`#${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);}["昏君，昏君啊","主公，别开枪，自己人","能不能快一点儿呀，兵贵神速啊","小内再不跳，后面还怎么玩儿啊","小内啊，您老悠着点儿","不好意思，刚才卡了","你可以打的再烂一点儿吗","哥们儿，给力点儿行吗","你们怎么忍心就这么让我酱油了","我，我惹你们了吗","姑娘，你真是条汉子","三十六计，走为上，容我去去便回","人心散了，队伍不好带啊","风吹鸡蛋壳，牌去人安乐","哥，交个朋友吧","妹子，交个朋友吧","我从未见过如此厚颜无耻之人","你随便杀，闪不了算我输","这波不亏","请收下我的膝盖","你咋不上天呢","放开我的队友，冲我来","见证奇迹的时刻到了"].forEach((e,n)=>{const i=document.createElement("span");i.classList.add("calRes"),i.textContent=e,i.onmousedown=()=>Xe(`${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);});}async function Xe(t,e){ue("复制成功！");var n={1:"⒈",2:"⒉",3:"⒊",4:"⒋",5:"⒌",6:"⒍",7:"⒎",8:"⒏",9:"⒐",J:"Ⓙ",Q:"Ⓠ",K:"Ⓚ","+":" ",10:"⒑"};if(e&&Object.keys(n).forEach(r=>{t=t.replaceAll(r,n[r]);}),B.chat(t),window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var i=document.createElement("textarea");i.textContent=t,i.style.position="fixed",document.body.appendChild(i),i.select();try{return document.execCommand("copy")}catch(r){return console.warn("Copy to clipboard failed.",r),prompt("Copy to clipboard: Ctrl+C, Enter",t)}finally{document.body.removeChild(i);}}}async function ki(t,e){if(ae.CDKNotificationSwitch){let r=Pe("CDK");r||(r=[]);let a=t.filter(s=>!r.includes(s.cdk));await me(1e4);for(let s of a)Fe(`找到兑换码！<br>${s.cdk}<br>点击即可兑换且关闭此条通知${s.rewards}<br>如不想要兑换码通知，可在设置中关闭`,"ac-tooltip",1e4,"green",function(){!r.includes(s.cdk)&&r.push(s.cdk),Ke("CDK",r),nn(s.cdk);});}var n=document.getElementById(e);n.innerText="",t.length==0&&e=="CDK"&&(t=["所有兑换码已经兑换","迟点再看看吧"],zt("CDK"));for(let r of t){let a=document.createElement("button");a.className="calRes",a.innerText=typeof r=="object"?`${r.cdk}`:r,a.onmousedown=function(){nn(typeof r=="object"?r.cdk:r),a.innerText="已兑换",setTimeout(()=>{a.textContent=typeof r=="object"?`${r.cdk}`:r;},"500");},n.append(a);var i=document.createElement("br");n.append(i);}}function Wi(t){var e=document.getElementById("storeDetail");e.innerText="",t.length==0&&(t=["暂无集市数据"]);for(let n of t){let i=document.createElement("button");i.className="storeDetail",i.innerText=n,e.append(i);}}let vi={9020101:"欢乐豆",100301:"手气卡",100201:"点将卡",1150001:"灵宝经诰",100401:"换将卡",200201:"诏令天下",112301:"校尉将印",112101:"朱砂",12119999:"桃花",111801:"功勋",1111801:"水晶碎片",1114301:"圣魂玄晶",112501:"大将军印",1142901:"夺宝券",21315101:"翻翻乐积分",21315001:"奇珍夺宝券"};function xt(t){return !vi[t]}function Rn(t,e,n,i){var r;if(document.getElementById("sec"+t)==null){let a=document.getElementById("lottery");const s=document.createElement("div"),o=document.createElement("div");o.innerHTML=M.secId[t].Name+"："+M.generalDict[M.secId[t].bigrewards]+"  次数："+i+"<br>",o.id="sec"+t+"+times",s.id="sec"+t,s.append(o),a.append(s),a.append(document.createElement("hr"));}if(typeof document.getElementById("sec"+t)<"u"&&document.getElementById(t+"+"+e)==null){const a=document.getElementById("sec"+t+"+times");a.innerHTML=M.secId[t].Name+"："+M.generalDict[M.secId[t].bigrewards]+"  次数："+i+"<br>";let s=document.getElementById("sec"+t);const o=document.createElement("div");o.className="suit",xt(e)&&o.classList.add("r");const l=document.createElement("span"),c=document.createElement("span");l.innerText=((r=M.goodsID(e))==null?void 0:r.name)+" * ",c.innerText=n,l.id=t+"+"+e,c.id=t+"+"+e+"+number",o.append(l),o.append(c),s.appendChild(o);}else if(typeof document.getElementById(t)<"u"&&document.getElementById(t+"+"+e)!=null){const a=document.getElementById("sec"+t+"+times");a.innerHTML=M.secId[t].Name+"："+M.generalDict[M.secId[t].bigrewards]+"  次数："+i+"<br>";let s=document.getElementById(t+"+"+e+"+number"),o=parseInt(s.innerText);o+=n,s.innerText=o;}}function rn(t){let e=document.getElementById("lastUseCard");const n=document.createElement("div");for(const r of t){if(r=="0")continue;var i=document.createElement("button");i.className=ce[r].color<=2?"shoupai R":"shoupai";let a=document.createElement("span");a.innerText=ce[r].cn,i.appendChild(a),i.appendChild(document.createElement("br")),i.innerHTML+=ce[r].name.substring(0,2),n.append(i);}e.innerHTML=n.innerHTML;}const on=new MutationObserver(t=>{t.forEach(e=>{const n=e.target,i=document.getElementById(n.id),r=document.getElementById("s"+n.id);if(r&&i&&(e.type==="childList"||e.type==="attributes")){const a=n.innerHTML;if(r.dataset.lastContent!==a){if(r){const s=n.cloneNode(!0);r.innerHTML=s.innerHTML,Gn(r);}r.dataset.lastContent=a;}}});}),Ii={attributes:!0,childList:!0,subtree:!0};function Gn(t){t&&t instanceof HTMLElement&&(t.scrollHeight>40?t.classList.add("show-ellipsis"):t.classList.remove("show-ellipsis"));}function Qt(t,e){let n;function i(...r){clearTimeout(n),n=setTimeout(()=>t.apply(this,r),e);}return i.cancel=function(){clearTimeout(n),n=null;},i}const Ci=Qt(()=>{requestAnimationFrame(()=>{document.querySelectorAll(".sorder-body").forEach(e=>{Gn(e);});});},500);window.addEventListener("resize",Ci);function wt(){const t=document.getElementById("seatUI"),e=document.createDocumentFragment();for(let n of J.seatUIs)if(n.posY&&n.posX&&typeof n.actualSeatID<"u")if(document.getElementById("sor"+n.actualSeatID)==null){const i=document.createElement("div");i.className="sorderContainer",i.id="sor"+n.actualSeatID,i.style.top=n.posY+"px",i.style.left=n.posX+"px",i.style.width=(J.unscaledWidth+J.paddingRight)*J.scale+"px";const r=document.createElement("div");r.className="sorder-body",r.classList.add("sNo"+n.actualSeatID),r.id="s"+n.actualSeatID,i.appendChild(r);const a=document.getElementById(n.actualSeatID);a&&(on.observe(a,Ii),e.appendChild(i));}else {const i=document.getElementById("sor"+n.actualSeatID);i.style.top=n.posY+"px",i.style.left=n.posX+"px",i.style.width=(J.unscaledWidth+J.paddingRight)*J.scale+"px";}if(J.seatUIs.length===0){on.disconnect();for(let n=1;n<=8;n++){const i=document.getElementById("sor"+n);i&&i.remove();}}t.appendChild(e);}const je={TITLE:{color:"#f2de9c",fontSize:20,bold:!0},HR:{text:"--------------------",color:"#ccc",fontSize:15},GENERAL:{normal:"#f2de9c",warning:"rgb(240, 65, 85)",fontSize:20},GET_INFO:{color:"#f2de9c",fontSize:20,bold:!0}};function at(t){const e=new Laya.Label;return e.text=t.text||"",e.color=t.color||"#ffffff",e.fontSize=t.fontSize||16,e.bold=t.bold||!1,e.align="center",e.valign="middle",e.width=210,e}function kt(){return at({text:je.HR.text,color:je.HR.color,fontSize:je.HR.fontSize,bold:!1})}function _n(t,e){const[n,i]=Ri(t,e),r=t.start?"[先行]":"";return at({text:`${t.generalname}${r}${i?" "+n.join(" "):""}`,color:i?je.GENERAL.warning:je.GENERAL.normal,fontSize:je.GENERAL.fontSize,bold:!0})}function Ei(t,e,n){t.layoutEnabled=!0,t.vScrollBarSkin="",e.graphics.clear(),e.graphics.drawRect(0,0,210,n,"#3B3A27"),e.pos(0,0);}function Ti(t,e){let n=0;if(M.text[t.event]){const a=at({text:M.text[t.event],...je.TITLE});e.addChild(a),n+=a.height;const s=kt();e.addChild(s),n+=s.height;}t.generals.forEach(a=>{const s=_n(a,ve.difficulty);e.addChild(s),n+=s.height;});const i=kt();e.addChild(i),n+=i.height;const r=at({text:t.get.replace(/\n/g,`
`),...je.GET_INFO});return e.addChild(r),n+=r.height,n}function Bi(t,e){let n=0;for(let i=0;i<3;i++){const r=t+(i+1).toString().padStart(2,"0");if(!M.Rchoose[r])continue;const a=M.Rchoose[r];a.generals&&a.generals.forEach(l=>{const c=_n(l,ve.difficulty);e.addChild(c),n+=c.height;});const s=at({text:a.get.replace(/\n/g,`
`),...je.GET_INFO});e.addChild(s),n+=s.height;const o=kt();e.addChild(o),n+=o.height;}return n}function Gt(t,e){ve.res=[];for(const n of t){const{x:i,y:r}=M.Rcity[n.id];let a=0;const s=new Laya.VBox;s.pos(i,r),s.zOrder=999,s.name="city";const o=new Laya.Sprite;if(o.alpha=.7,s.addChild(o),M.Rfight[n.event])a=Ti({...M.Rfight[n.event],event:n.event},s);else {if(M.text[n.event]){const l=at({text:M.text[n.event],...je.TITLE});s.addChild(l),a+=l.height;const c=kt();s.addChild(c),a+=c.height;}a+=Bi(n.event,s);}Ei(s,o,a),ve.res.push({id:n.id,city:s});}fe(()=>B.find("SceneLayer","RogueSmallMapScene")).then(n=>{for(let i=(n==null?void 0:n.cityView.numChildren)-1;i>=0;i--){const r=n.cityView.getChildAt(i);r.name==="city"&&n.cityView&&n.cityView.removeChild(r);}n!=null&&n.cityView&&t&&ve.res.forEach(({city:i})=>{n.cityView.addChild(i);});});}function Wt(t,e="点击复制",n=!0,i=!1,r=null){let a=document.createElement("button");return a.className="calRes",a.title=e,a.disabled=i,a.innerText=t,a.onclick=()=>{Xe(t,n),a.innerText="复制成功",setTimeout(()=>{a.textContent=t;},500);},a}async function ln(t){let e=t.slice().sort((a,s)=>a-s),n=[];function i(a,s,o){if(o===13){n.push(a.slice());return}if(!(o>13))for(let l=s;l<e.length;l++)l>s&&e[l]===e[l-1]||(a.push(e[l]),i(a,l+1,o+e[l]),a.pop());}i([],0,0);let r=document.getElementById("result");r.innerHTML="";for(let a of n.sort((s,o)=>o.length-s.length))if(r.appendChild(Wt(a.map(s=>He(s,!1)).join("+"))),r.children.length>=15)break;r.innerHTML===""&&(r.innerHTML='<span class="textRes">【资援】无解！</span>');}async function Di(t,e=!1){function n(l,...c){let f=l.slice();for(let d=0;d<f.length;d++){for(let u=0;u<c.length;u++)if(f[d]-=c[u][d],f[d]<0)return !1;if(d>0&&f[d]>=2)return 0}return f}let i=t.reduce((l,c)=>(l[0]++,l[c]++,l),Array(14).fill(0)),r=Math.floor(i[14]/2),a=new Map([[0,[Array(14).fill(0)]]]);for(let l=1;l<=13;l++){let c=i[l];if(c!=0)for(let f of Array.from(a.keys()).sort((d,u)=>u-d)){let d=a.get(f);for(let u=1;u<=c;u++){let p=f+l*u;if(p>r)break;a.has(p)||a.set(p,[]);for(let m=0;m<d.length;m++){let y=d[m].slice();y[0]+=u,y[l]+=u,a.get(p).push(y);}}}}a.delete(0);let s=new Map;for(let l of Array.from(a.keys()).sort((c,f)=>f-c)){let c=a.get(l);for(let f=0;f<c.length;f++)for(let d=f;d<c.length;d++){let u=n(i,c[f],c[d]);u&&(s.has(u[0])||s.set(u[0],[]),c[f][0]<=c[d][0]?s.get(u[0]).push([c[f],c[d],u]):s.get(u[0]).push([c[d],c[f],u]));}}let o=document.getElementById("result");o.innerHTML="",Array.from(s.keys()).sort((l,c)=>l-c).some(l=>{if(s.get(l).sort((c,f)=>c[0][0]-f[0][0]).forEach(([c,f,d])=>{let u=document.createElement("button");u.className="calRes";let p=document.createElement("span"),m=document.createElement("span");p.innerText=c.flatMap((y,C)=>C>0?Array(y).fill(He(C,!1)):[]).join("+"),m.innerText=f.flatMap((y,C)=>C>0?Array(y).fill(He(C,!1)):[]).join("+"),u.appendChild(p),u.insertAdjacentHTML("beforeend","<span>=</span>"),u.appendChild(m),u.title="点击复制",u.onclick=function(){Xe(this.innerText,!0);},e&&(u.title="点击“=”左侧或右侧的数字，将被点击一侧的数字分配给自己，另一侧的分配给张昌蒲",p.className="yanjiaospan",m.className="yanjiaospan",p.onclick=function(y){y.stopPropagation(),B.yanJiao([c,f,d],2);},m.onclick=function(y){y.stopPropagation(),B.yanJiao([c,f,d],0);}),o.appendChild(u);}),o.children.length>=5)return !0}),o.innerHTML===""?o.innerHTML='<span class="textRes">【严教】无解！</span>':e&&o.insertAdjacentHTML("afterbegin","界小抄：点下方数字可以自动分配牌<br>点击想要分配给自己的一组数字即可");}async function Li(t,e){if(!(t!=null&&t.length))return;let n=t.slice().sort((s,o)=>s-o),i=[];function r(s,o,l){if(!(l>13)){i.unshift(s.slice()),e&&(i[0].K=l===13?s.length:0);for(let c=o;c<n.length;c++)c>o&&n[c]===n[c-1]||(s.push(n[c]),r(s,c+1,l+n[c]),s.pop());}}r([],0,0);let a=document.getElementById("result");a.innerHTML="";for(let s of i.filter((o,l,c)=>!c.some(f=>o.length<f.length&&o.every(d=>f.includes(d)))).sort((o,l)=>l.K-o.K||l.length-o.length))a.appendChild(Wt(s.map(o=>He(o,!1)).join("+"))),e&&s.K&&a.lastChild.classList.add("textRes");}async function cn(t,e){function n(o,l,c,f,d){if(c.length===d+1){l.push([...c,...c.reduce((u,p)=>(u.splice(u.indexOf(p),1),u),o.slice())]);return}for(let u=f;u<o.length;u++)u>f&&o[u]===o[u-1]||(c.push(o[u]),c[0]+=o[u],n(o,l,c,u+1,d),c[0]-=c.pop());return l}let i=document.getElementById("result");if(i.innerHTML="",!(t!=null&&t.length)||!(e!=null&&e.length))return;let r=Math.max(t.length,e.length);t.sort((o,l)=>o-l),e.sort((o,l)=>o-l);for(let o=2;o<=r;o++){let l=n(t,[],[0],0,o);n(e,[],[0],0,o).forEach(c=>l.forEach(f=>{c[0]>f[0]&&c.slice(1,o+1).every(d=>!f.slice(1,o+1).includes(d))&&(r<3||Array.from({length:o}).some((d,u)=>c[u+1]<f[u+1]))&&i.appendChild(Wt(c.slice(1,o+1).map(d=>He(d))+"→"+f.slice(1,o+1).map(d=>He(d)),"点击复制",!1));}));}let a=Array.from(new Set(e)),s=Array.from(new Set(t));a.forEach(o=>{let l=s.filter(c=>c<o);l.length&&i.appendChild(Wt(He(o)+"→"+l.map(c=>He(c)).join("/"),"点击复制",!1));}),i.innerHTML===""&&(i.innerHTML='<span class="textRes">【易城】无法交换！</span>');}async function _t(t){var o,l,c;if(!(t!=null&&t.allData))return;let e=t.allData,n=e.shopData,i=e.chapterData,r=e.generalpool;if(n){n.bShow=!0;let f=[];if(n.itemId&&M.Rplot)for(let d of n.itemId)M.Rplot[d]&&f.push(M.Rplot[d].name);Wi(f);}if(r&&r.general_change&&r.general_change.length>0){let f=r.general_change.map(d=>M.generalDict[d]||`Unknown (${d})`);Fe(`小抄提示：可换将为${f.reverse().join(", ")}`,"acTooltip",1e4,"green",null,!0);}let a=e.seasonData,s=a&&a.difficulty;s&&(ve.difficulty=s),ve.general=((l=(o=e.gameData)==null?void 0:o.myGeneral)==null?void 0:l.uGeneralId)??0,ve.itemId=((c=e.gameData)==null?void 0:c.itemId)??[],i&&i.locations&&(J.cities=i.locations.map(f=>({id:f.location,event:f.event})),M.Rcity&&ae.rogueCitySwitch&&Gt(J.cities));}const Oi=(()=>{class t{constructor(){this.id=0,this.goods_id=0,this.goods_cnt=0,this.price_type=0,this.price_num=0,this.stock=0,this.buy_limit=0,this.ori_price=0,this.all_bought_cnt=0,this.self_bought_cnt=0;}Read(r){this.id=r.readUnsignedByte(),this.goods_id=r.readUnsignedInt(),this.goods_cnt=r.readUnsignedInt(),this.price_type=r.readUnsignedByte(),this.price_num=r.readUnsignedInt(),this.stock=r.readUnsignedInt(),this.buy_limit=r.readUnsignedByte(),this.ori_price=r.readUnsignedInt();}UpdateDate(r){this.goods_id=r.goods_id,this.goods_cnt=r.goods_cnt,this.price_type=r.price_type,this.price_num=r.price_num,this.stock=r.stock,this.buy_limit=r.buy_limit,this.ori_price=r.ori_price,this.all_bought_cnt=r.all_bought_cnt,this.self_bought_cnt=r.self_bought_cnt;}}function e(i){i.position=0;let r=[],a=i.readBoolean();if(i.Data.length<=1)return null;let s=i.readUnsignedInt(),o=i.readUnsignedInt(),l=new Date(s*1e3).toISOString().slice(5,16).replace("T"," "),c=new Date(o*1e3).toISOString().slice(5,16).replace("T"," "),f=i.readUnsignedInt();for(let d=0;d<f;d++){let u=new t;u.Read(i);let p=r.find(m=>m.id==u.id);p?p.UpdateDate(u):r.push(u);}f=i.readUnsignedInt();for(let d=0;d<f;d++){let u=i.readUnsignedInt(),p=i.readUnsignedInt(),m=r.find(y=>y.id==u);m&&(m.all_bought_cnt=p);}f=i.readUnsignedInt();for(let d=0;d<f;d++){let u=i.readUnsignedInt(),p=i.readUnsignedInt(),m=r.find(y=>y.id==u);m&&(m.self_bought_cnt=p);}return {commonVo:r,start_time:s,end_time:o,start:l,end:c,next:a}}let n=!1;return async i=>{if(n)return null;const r=document.querySelectorAll('.left input[type="checkbox"]');let a=e(i);if(!a)return null;let{commonVo:s,start_time:o,end_time:l,start:c,end:f,next:d}=a;if(d)return;o=(o-8*60*60)*1e3;let u=s.map(({goods_id:y,goods_cnt:C,price_type:S,price_num:j,stock:ne,buy_limit:k,ori_price:D,all_bought_cnt:z,self_bought_cnt:_},Z)=>{var Se;let ee=j+["","通用元宝","元宝","银两"][S]+": "+((Se=M.goodsID(y))==null?void 0:Se.name)+(C>1?"*"+C:""),ge=`${c} ~ ${f} 共${ne}个`,be=z>=ne||_>=k;return Object.assign(r[Z].dataset??{},{goods_id:y,start_time:o,goods:ee}),{goods_id:y,goods:ee,title:ge,disabled:be}}),p=document.getElementsByClassName("right")[0];p&&(p.innerHTML=u.map(({goods:y,title:C,disabled:S})=>`<span class="secKillDetailText${S?" gray":""}" title="${C}">${y}</span>`).join(""));let m=p.start-6e4;return m>ie.now()&&ie.set("miaosha",()=>{ue(`${c}
秒杀即将开始！
`+u.map(({goods:y})=>y).join(`
`)),n=!0,setTimeout(()=>{n=!1;},66666);},m),i.Size==i.position}})();let Ai=["巳蛇","灵动","八门","盾弓","智迟","持盈","卫主","不死","刚烈","觉醒","悲鸣","断肠","节命","先机","悲鸣","忘魂","雅士","挥泪","不屈","封冻","灵躯","武魂","已蛇","邪徒"];const Tt={getspell:0,getspell_ZD:1,getspell_KN:2,getspell_EM:3,getspell_LY:4};function Ri(t,e){let n=[],i=!1,r=Gi(e);const a=Tt[r];let s=Object.keys(Tt).filter(o=>Tt[o]<=a).map(o=>t[o]).filter(Boolean).join(";");s=s==null?void 0:s.split(";").map(o=>{var l;return ((l=M.spellDict[o])==null?void 0:l.name)||"无收录技能"});for(let o of s)Ai.includes(o)&&(n.push(o),i=!0);return [n,i]}function Gi(t){switch(Math.floor((t-1)/5)){case 0:return "getspell";case 1:return "getspell_ZD";case 2:return "getspell_KN";case 3:return "getspell_EM";case 4:return "getspell_LY";default:return "getspell"}}var ot=[],Mt=[],dn={290:"推锋",766:"匡弼"},Me=[],gt={},yt={},nt={},Ye={},bt=new Map,Te=()=>({name:"加载中"}),Ce=[],Nt={},Pt={},Ge={},Ae={},_i={},Ht={},jt={};Object.assign(M,{cardDict:ot,cardIDsOrder:Mt,spellDict:Me,generalDict:gt,skinSP:yt,skinDict:nt,skinMap:Ye,bigSkin:bt,goodsID:Te,rogejson:Ae,gxjson:_i,Rfight:Ge,Rchoose:Pt,Rcity:Nt,secId:Ht,vskinMap:jt,Rplot:Ce});async function Mi(t){return new Promise(e=>JSZipUtils.getBinaryContent(window.location.host==="test.sanguosha.com"?"https://test.sanguosha.com/h5/res/config//Config_w.sgs":"https://web.sanguosha.com/220/h5_2/res/config/Config_w.sgs?v="+window.resourceVersion,(n,i)=>JSZip.loadAsync(i).then(async r=>{var ne;const a=function(){const k=new Date;return k.getFullYear().toString()+(k.getMonth()+1).toString().padStart(2,"0")+k.getDate().toString().padStart(2,"0")+"T000002"}();let s=["sys_playcard","cha_spell","character","hd_roguelike","hd_1v1_rogue","sys_h5_shop","sys_gs_dbs_fs_goodsbaseinfo","sys_server_item_drops_templete_config","sys_h5_dbs_clientserverpub","cha_gs_dbs_fs_skininfo","gn_dbs_quest","sys_h5_quest","sys_h5_task","ff_dbs_lottery_new","ff_exchange_new","sys_treasure_chest","gn_dbs_giftbag","ff_tiangong","ff_chess"];var o=await Promise.all(s.map(k=>r.file(k+".sgs").async("arraybuffer").then(D=>JSON.parse(new TextDecoder().decode(new Zlib.Gunzip(CtrUtil.Ctr.Ofb_Dec(D)).decompress()))))).then(k=>s.reduce((D,z,_)=>(D[z+".sgs"]=k[_],D),{}));function l(k,D){if(typeof k!="object")return k;let z={};for(let _ in k){let Z=D.get(_)||_;z[Z]=k[_];}return z}var c=new Map([["id","编号"],["name","名称"],["time","时间"],["desc","说明"],["reward","奖励"],["price","价格"],["max","限购"],["effect","效果"],["info","信息"]]),f=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.reduce((k,D)=>(k.set(D.a,D),k),new Map),d=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.abbreviation.field.reduce((k,{Short:D,Long:z})=>(k.set(D,z),k),new Map),u=o["sys_server_item_drops_templete_config.sgs"].AllDrop.DropTemplete.DropGroup.DropItem.reduce((k,D)=>(k.has(D.a)||k.set(D.a,[]),k.get(D.a).push(D.d),k),new Map);Te=(()=>{var k={};return function(D){if(D=parseInt(D),k[D])return k[D];let z=l(f.get(D),d),_=o["sys_h5_shop.sgs"].root.itemtips.find(({a:ee})=>ee==D),Z=(z==null?void 0:z.usedeffect)&&C(z==null?void 0:z.usedeffect);return k[D]={...z,..._&&{info:_.e},...Z&&{effect:Z}}}})();var p={};function m(k){var z;let D=k==null?void 0:k.replace(/([^0-9,\.])/g,"").split(",").map(_=>parseInt(_));return (D==null?void 0:D.length)<2?k:(p[D[0]]??(p[D[0]]=(z=f.get(D[0]))==null?void 0:z.b)??D[0])+(parseInt(D[1])>1?"*"+D[1]:"")}var y={};function C(k){let D=parseInt(k);if(D!=1e3&&Math.abs(D)>0)return y[D]??(y[D]=(u.get(Math.abs(D))??[]).map(z=>{var _;return ((_=f.get(z))==null?void 0:_.b)??C(z)}).join(D>0?"/":"&"))}Me=o["cha_spell.sgs"].GameSpells.spell.reduce((k,{a:D,c:z,o:_})=>{var ee,ge;let Z={name:z,spellid:D,desc:((ge=(ee=_==null?void 0:_.replace(/<[^\<\>]*>/g,""))==null?void 0:ee.replace(/#.*/g,""))==null?void 0:ge.replace(/[;\n]+$/g,""))||""};return (Z.desc.includes("暗置")||Z.desc.includes("扣置")||Z.desc.includes("移出"))&&(dn[D]=On[Z.name]??Z.name),k[D]=Z,k},[]);let S=o["sys_playcard.sgs"].abbreviation.reduce((k,{Short:D,Long:z})=>(k.set(D,z),k),new Map);if(ot=o["sys_playcard.sgs"].GamePlayCards.card.map(k=>l(k,S)).reduce((k,D)=>{var z,_;return k[D.id]={...D,name:D.name??((z=Me[D.spellId])==null?void 0:z.name),desc:(_=Me[D.spellId])==null?void 0:_.desc},k},[]),Mt=o["sys_playcard.sgs"].GamePlayCards.card.sort((k,D)=>k.c-D.c||k.d-D.d||k.h-D.h||k.m-D.m||k.g-D.g||k.f-D.f||k.a-D.a).map(({a:k})=>k),bt=new Map(o["cha_gs_dbs_fs_skininfo.sgs"].generalskin.items.item.map(k=>[String(k.a),[k.a,k.c,k.v||k.q,k.r]]).reverse()),nt=o["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.reduce((k,{skinID:D,name:z,skinlevel:_,dongPoint:Z})=>{let ee=parseInt(D/100);return k[ee]||(k[ee]={}),k[ee][D]={level:{"0,0":"普通","0,1":"稀有","0,2":"史诗","0,3":"传说","0,4":"限定"}[_]||"未知",name:z,state:Z!==void 0},k},{}),yt=o["cha_gs_dbs_fs_skininfo.sgs"].generalskin.speciaSkin.filter(k=>String(k.skinID).includes("_")).reduce((k,D)=>{let[z,_]=D.skinID.split("_").map(Number);return k[z]?k[z].includes(_)||k[z].push(_):k[z]=[_],k},{}),Object.entries(yt).forEach(([k,D])=>{var Z,ee;(Z=bt.get(k))==null||Z.push(D);let z=parseInt(k/100),_=(ee=nt[z])==null?void 0:ee[k];_&&(delete nt[z][k],D.forEach(ge=>{nt[z][k+"_"+ge]={..._,name:_.name+ge};}));}),gt=o["character.sgs"].GameCharacters.character.reduce((k,{a:D,ai:z,b:_})=>(k[D]=(z||"")+(_==null?void 0:_.replaceAll("&","")),k),{}),o["character.sgs"].GameCharacters.character.forEach(({a:k,v:D})=>{if(typeof D!="string"){Ye[k]=new Set([k]);return}let z=[k,...D.split(";").map(Z=>parseInt(Z))],_=z.find(Z=>Z in Ye);if(_){let Z=Ye[_];z.filter(ee=>!Z.has(ee)).forEach(ee=>(Ye[ee]=Z).add(ee));}else {let Z=new Set(z);z.forEach(ee=>Ye[ee]=Z);}}),jt=o["character.sgs"].WuJiangs.Spgroup.reduce((k,D)=>{const z=D.spgenerals?D.spgenerals.split(",").map(Number):[];return z.forEach(_=>{k[_]=new Set(z);}),k},{}),Ht=o["ff_tiangong.sgs"].root.Common.reduce((k,D)=>(k[D.Id]=D,k),{}),typeof t!="string"){let k=o["gn_dbs_giftbag.sgs"].giftsys.gifts.giftsItem.Item.filter(D=>D.cdkey!="sgs"&&!D.platform&&D.endtime>=a&&D.begintime<=a).sort((D,z)=>D.endtime-z.endtime).map(D=>{const z="<br>"+D.dataInfo.match(/\[(\d+),(\d+)\]/g).map(_=>{const[Z,ee,ge]=_.match(/\[(\d+),(\d+)\]/);return `${Te(ee).name} * ${ge}`}).join("<br>");return {giftID:D.giftID,endtime:D.endtime,begintime:D.begintime,dataInfo:D.dataInfo,rewards:z}}).filter(Boolean);M.CDKDict=k;}if(Object.assign(M,{cardDict:ot,cardIDsOrder:Mt,markSpell:dn,spellDict:Me,generalDict:gt,skinSP:yt,skinDict:nt,skinMap:Ye,bigSkin:bt,goodsID:Te,secId:Ht}),(typeof t!="string"||t=="roge")&&async function(k,D){Nt=k.Root.Level.reduce((h,{cityID:x,cityname:v,citypic:b,citycoordinate:T,startshow:E})=>{let[U,q]=T.split(",").map(Number);return h[x]={x:U,y:-q,boss:E,name:v??(b==null?void 0:b.replace(/^city_([0-9])_(.+)*\.png$/,(N,re,de)=>({"1jjy":"将军营","1jl":"箭楼","1wl":"望楼","1fht1":"烽火台(左)","1ck":"仓库","1yf":"营房","1fht2":"烽火台(右)","1sjc":"神君祠","2xsj":"西市集","2wl":"望楼","2dsj":"东市集","2wk":"武库","2hgl":"挥公陵","2sdg":"舜帝宫","2gcm":"干城门","2ywt":"演武台","3ds":"东市","3gg":"桂宫","3bg":"北宫","3wyg":"未央宫","3wk":"武库","3mgg":"明光宫","3clg":"长乐宫","4js":"金市","4lyt":"凌云台","4hly":"华林园","4tc":"太仓","4tx":"碳墟","4smm":"司马门","4wk":"武库","4sz":"石址","5my":"梅园","5fhl":"凤凰林","5lt":"龙亭","5wk":"武库","5wl":"望楼","5cm":"城门","5ql":"谯楼","5clg":"陈留宫","6jkg":"建康宫","6ql":"戚里","6wl":"望楼","6ycq":"邺城桥","6ywt":"演武台","6sg":"书馆","6wfl":"万福楼","6wk":"武库","6tqt":"铜雀台"})[re+de]??N))},h},{}),k.Root.Tactics.forEach(({plot:h,plotname:x,plotdesc:v,school:b,money:T,level:E})=>{Ce[h]={name:x.replaceAll("·",""),desc:v.replaceAll(" ",""),school:b,money:T,level:E,type:2};}),k.Root.Spell.forEach(({id:h,spellid:x,money:v,level:b})=>{var T,E;Ce[h]={name:(T=Me[x])==null?void 0:T.name,desc:(E=Me[x])==null?void 0:E.desc,spellid:x,money:v,level:b,type:3};}),k.Root.Card.forEach(({id:h,cardid:x,isequip:v,money:b,level:T})=>{var E=ot[x];Ce[h]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[E.subType]??E.name,desc:E.desc,color:E.color,number:E.number,money:b,level:T,type:4+v,rType:(E.type*10+E.subType)*100+v};});var z=k.Root.Roundid.reduce((h,{useSeason:x})=>x),_=new Map,Z=k.Root.Text.reduce((h,{ID:x,text:v})=>(h[x]=v,h),[]);k.Root.General=(h=>k.Root.General.map(x=>l(x,h)))(k.root.abbreviation.reduce((h,{Short:x,Long:v})=>(h.set(x,v),h),new Map)),k.Root.Adventure.forEach(h=>{h.chapname=Z[h.chapname]??h.chapname;});let ee=k.Root.RewardGroup.reduce((h,{reward:x,rewarddesc:v,allreward:b,abandonmoney:T})=>{var E,U;return h[x]=(T?T+"铜币/":"")+((U=(E=b==null?void 0:b.split(";"))==null?void 0:E.flatMap(q=>q==null?void 0:q.split(",")))==null?void 0:U.map(q=>["随机","普通","稀有","史诗","传说"][q]).join("/"))+v.replace("多选一","自选"),h},k.Root.Other.reduce((h,{reward:x,rewardname:v})=>(h[x]=v,h),{}));var ge=k.Root.Chapter.reduce((h,{seasonID:x,chapter:v,cityName:b,bosslocation:T,location:E})=>(E.split(";").forEach(U=>{h[U]=`${x}-${v}${b}`;}),h[T]=`${x}-${v}${b}BOSS`,h),{}),be=k.Root.General.reduce((h,x)=>(h[x.generalgroup]||(h[x.generalgroup]=[]),h[x.generalgroup].push(x),x.generalname=x.generalname.replace("&",""),h),{});k.Root.General.forEach(h=>{h.GeneralRank||(h.GeneralRank=0),h.JumpStage&&(h.next=(([x,v])=>be[x][v-1]??be[x][0])(h.JumpStage.split(";"))),h.info={general:h.generalname,hp:h.hp,maxhp:h.maxhp,card:h.cardnum,draw:h.draw,sha:1+h.exshatimes,armor:h.armor,getarmor:h.getarmor,...h.next?{next:h.next.generalname}:{}},h.spells=["","_ZD","_KN","_EM","_LY"].flatMap((x,v)=>{var b;return (((b=h["getspell"+x])==null?void 0:b.split(";"))??[]).map(T=>Me[T]).filter(Boolean).map(T=>({...T,level:v}))}),h.spell=h.spells.map(({name:x})=>x).join(","),h.cards=["","_ZD","_KN","_EM","_LY"].flatMap((x,v)=>{var b,T;return [...((b=h["carddesc"+x])==null?void 0:b.split(";"))??[],...((T=h["equip"+x])==null?void 0:T.split(";"))??[]].map(E=>ot[E]).filter(Boolean).map(({id:E})=>({id:E,ncn:ce[E].ncn,level:v}))}),h.card=h.cards.map(({ncn:x})=>x).join(",");}),Ge=k.Root.Fight.reduce((h,x)=>{function v(b,T,E=!1){b&&(x.fight+=Y(b.info),x.lost+=(b.start?"[先手]":"")+b.generalname,b.next?(x.lost+=">",b.next.stage=T,b.next.info.pre=b.generalname,x.generals.push(b.next),v(b.next,T+1,E)):E||(x.fight+="+",x.lost+=" "));}if(x.generals=[...be[x.Ggroup]??[]],x.fight="",x.lost="",x.startnum){let b=x.generals.find(T=>T.generalID==x.startnum);b&&(b.start=!0);}return x.generals.forEach((b,T,E)=>v(b,1,T==E.length-1)),x.get=x.itemgroup+`铜币
`+(x.rewarditem?String(x.rewarditem).split(";"):[]).concat(String(x.reward).split(";")).map(b=>ee[b]).join(`
`),x.text=Z[x.text]??x.text,x.name=Z[x.name]??x.name,h[x.fightID]=x,h},[]);for(let h in be)h in Ge||(Ge[h]={generals:be[h]});if(Pt=k.Root.Choose.reduce((h,x)=>{var v;return x.type==7?(h[x.effectID]=Ge[x.event1],_.set(x.event1,(v=k.Root.Adventure.find(b=>b.ID===parseInt(x.effectID/10)))==null?void 0:v.chapname)):x.type==3&&x.event1=="2"?h[x.effectID]={get:"营地"}:h[x.effectID]={lost:(b=>b&&"失去 "+b)(V(x.lostitem,x.lostnum,x.effectID)),get:(b=>b&&x.showitem?b.replace("随机","特定"):b)(V(x.getitem,x.getnum,x.effectID))},h},[]),Object.assign(M,{Rfight:Ge,Rchoose:Pt,Rcity:Nt,vskinMap:jt,Rplot:Ce,text:Z}),!t||t=="roge"){var Se=Object.entries(be).reduce((h,[x,v])=>{var U,q,N,re,de;let b=x.length<6?x.slice(-3):x.slice(0,2)!=="99"?x.slice(-5,-2)+">":"*"+x.slice(-2),T=x.length<6?x.slice(0,-3)-2:x.slice(0,2)!=="99"?x.slice(0,-5)-2:x.slice(-3,-2)-x.slice(-4,-3)+9;if(["新年大吉"].includes(((U=Ge[x])==null?void 0:U.name)??((q=Ge[parseInt(b)+4e3])==null?void 0:q.name)))return h;h[b]||(h[b]={fight:((N=Ge[x])==null?void 0:N.name)??((re=Ge[parseInt(b)+4e3])==null?void 0:re.name)??"",generals:{}}),_.has(x)&&(h[b].event=_.get(x));let E=h[b].generals;return (((de=Ge[x])==null?void 0:de.generals)??v).forEach(oe=>{let L=(b.startsWith("*")?T:"")+(oe.stage||"")+"#"+oe.generalID;for(;;){if(!E[L])E[L]={general:(oe.info.pre?">":"")+oe.generalname+(oe.info.next?">":""),info:Y(oe.info),levels:[],start:[],infos:{},spell:{},card:{},ad:{}};else if(E[L].levels.includes(T)){L+="@";continue}break}let pe=E[L];T%10<6&&T<20&&(pe.levels.push(T),oe.start&&pe.start.push(T)),pe.infos[T]=oe.info,oe.otherad&&(pe.ad[T]=oe.otherad),oe.spells&&oe.spells.forEach(P=>{pe.spell[P.spellid]||(pe.spell[P.spellid]={...P,levels:[],level:void 0}),T%10<6&&T<20&&pe.spell[P.spellid].levels.push(T+(P.level??0));}),oe.cards&&oe.cards.forEach(P=>{pe.card[P.id]||(pe.card[P.id]={name:P.ncn,levels:[],level:void 0}),T%10<6&&T<20&&pe.card[P.id].levels.push(T+(P.level??0));});}),h},{});Object.entries(Se).forEach(([h,x])=>{Se[h].shift=h.startsWith("*")&&Math.min(...Object.values(x.generals).flatMap(v=>v.levels))==1?1:0,x.generals=Object.values(x.generals).map(v=>(v.level=Math.min(...v.levels.sort((b,T)=>T-b))-Se[h].shift,v.level=v.level,v.spell=Object.values(v.spell).map(b=>{let T=Math.min(...b.levels.sort((E,U)=>U-E));return b.levels.some((E,U,q)=>E<10&&!q.includes(E+10)&&(v.levels.includes(E+10)||v.levels.length==2&&v.levels.includes(10)))&&(b.level=[T]),b.levels.some(E=>E<10)&&(E=>{E.length&&(b.level=[T,E[E.length-1]]);})(b.levels.filter((E,U,q)=>E>=10&&!q.includes(E-10))),b.level=(b.level??T)-Se[h].shift,delete b.levels,delete b.spellid,b}).sort((b,T)=>{let E=U=>U[1]>=10?U[1]:U[0]??U;return E(b.level)%10-E(T.level)%10||E(b.level)-E(T.level)}),v.card=Object.values(v.card).map(b=>{let T=Math.min(...b.levels.sort((E,U)=>U-E));return b.levels.some((E,U,q)=>E<10&&!q.includes(E+10)&&(v.levels.includes(E+10)||v.levels.length==2&&v.levels.includes(10)))&&(b.level=[T]),b.levels.some(E=>E<10)&&(E=>{E.length&&(b.level=[T,E[E.length-1]]);})(b.levels.filter((E,U,q)=>E>=10&&!q.includes(E-10))),b.level=(b.level??T)-Se[h].shift,delete b.levels,b}).sort((b,T)=>{let E=U=>U[1]>=10?U[1]:U[0]??U;return E(b.level)%10-E(T.level)%10||E(b.level)-E(T.level)}),v.card.length||delete v.card,v.info=Object.values(v.infos).reduce((b,T)=>(Object.keys(b).forEach(E=>{T[E]>b[E]&&(b[E]=T[E]);}),b),{hp:0,card:0,draw:0,sha:0}),Object.keys(v.ad).length?Object.keys(v.ad).sort((b,T)=>T-b).forEach((b,T,E)=>{(b>=10&&v.ad[b]==v.ad[b%10]||v.ad[b]==v.ad[E[T+1]])&&delete v.ad[b];}):delete v.ad,v.start.length?v.start=Math.min(...v.start):delete v.start,delete v.infos,delete v.levels,v)).sort((v,b)=>v.level-b.level);});var I=k.Root.UniversalGroup.filter(h=>h.fightgroup!==void 0).reduce((h,x)=>{h[x.fightID]||(h[x.fightID]={});let v=String(x.fightgroup).slice(-3);return h[x.fightID][v]||(h[x.fightID][v]=[]),h[x.fightID][v].push(x),h},{}),A=Array.from(Array.from(k.Root.Level.reduce((h,{cityID:x,eventfight:v,universalfight:b,startshow:T})=>{var U,q;E(b),E((q=(U=v==null?void 0:v.split(";"))==null?void 0:U.map(N=>N.slice(-3)))==null?void 0:q.filter((N,re,de)=>!de.slice(re+1).includes(N)));function E(N){if(!N||N.length==0)return;let re=h.get(N);re?re.includes(ge[x])||re.push(ge[x]):h.set(N,[ge[x]]);}return h},new Map).entries()).reduce((h,[x,v])=>{let b=v.length>1&&new Set(v.map(T=>T.slice(0,3))).size<2?v.map((T,E)=>T.slice(E?3:0)).join("/"):String(v);return h.get(b)||h.set(b,new Set),(I[x]?Object.keys(I[x]):x).forEach(T=>h.get(b).add(T)),h},new Map).entries()).reduce((h,[x,v])=>(h[x]=Array.from(v,b=>Se[b]),h),{});Ae.jsbs=JSON.stringify(Object.entries(A).filter(h=>h[0].includes(z+"-")).reduce((h,[x,v])=>{let b=x.slice(2);return h[b]||(h[b]=[]),v.forEach(T=>{T.fight!="新年大吉"&&h[b].push(T);}),h},{})),Ae.jsft=JSON.stringify(Object.values(Se).filter(h=>["天涯故交","招兵买马","万众敬仰"].includes(h.event)&&h.shift||["突来危机","擂台比武","战事推演","为民除害","赛前演习","宵小叫嚣"].includes(h.event)).reduce((h,{event:x,generals:v,fight:b})=>(h[x]||(h[x]=[]),h[x].push({...b?{fight:b}:{},generals:v}),h),{})),Ae.wscd=JSON.stringify(Object.values(D.Card.map(({CitationID:h,money:x})=>({...Ce[h],money:x})).reduce((h,{level:x,money:v,name:b,color:T,number:E,desc:U,rType:q})=>{let N=x+b+E;return h[N]||(h[N]={cl:[],level:v,name:b,number:E,type:q,desc:U}),h[N].cl.push(T),h},{})).sort($e("type","level"))),Ae.wssp=JSON.stringify(D.Spell.map(({CitationID:h,money:x})=>({...Ce[h],money:x})).sort($e("money","level","spellid")).map(({level:h,money:x,name:v,desc:b})=>({level:x,name:v,desc:b}))),Ae.wszf=JSON.stringify(D.Tactics.map(({CitationID:h,money:x})=>({...Ce[h],money:x})).filter(h=>{var x;return (h.name=(x=h.name)==null?void 0:x.replace("·新",""))&&!h.name.includes("废弃")&&!h.desc.includes("备用")&&!/(游戏|战斗)开始/.test(h.desc)}).sort((h,x)=>!h.money^!x.money?h.money?1:-1:h.name.slice(0,2).localeCompare(x.name.slice(0,2))!=0?h.name.slice(0,2).localeCompare(x.name.slice(0,2)):$e("money","level","name.length")(h,x)).map(({level:h,money:x,name:v,desc:b})=>({level:x,name:v,desc:b})).filter((h,x,v)=>JSON.stringify(h)!=JSON.stringify(v[x+1]))),Ae.jssp=JSON.stringify(Ce.filter(h=>(h==null?void 0:h.type)==3).sort($e("level","money","spellid")).map(({level:h,money:x,name:v,desc:b})=>({name:v,level:h,desc:b}))),Ae.jscd=JSON.stringify(Object.values(Ce.filter(h=>(h==null?void 0:h.type)>=4).reduce((h,{level:x,money:v,name:b,color:T,number:E,type:U,desc:q,rType:N})=>{let re=x+b+E,de=[33,34].includes(Math.floor(N/100))||b=="诸葛连弩"&&x==4;return h[re]||(h[re]={cl:[],level:de?0:x,money:v,name:b,number:E,type:N+(de?6:0),desc:q}),h[re].cl.push(T),h},{})).sort($e("type","level","money")).sort((h,x)=>h.level>0&&x.level==0?-1:0)),Ae.jssd=JSON.stringify(k.Root.seed.sort($e("level","seed")).map(({name:h,desc:x,level:v,huchijineng:b})=>{var E,U,q;let T=(E=x==null?void 0:x.match(/.*获得【([^【】]*)】.*/))==null?void 0:E[1];return T&&(x+=((U=Me[b])==null?void 0:U.desc)??((q=Me.find(N=>(N==null?void 0:N.name)==T))==null?void 0:q.desc)),{name:h,level:v,desc:x}})),Ae.jssc=JSON.stringify(k.Root.school.map(({school:h,name:x,effect:v,needputong:b,needxiyou:T,needshishi:E,needchuanshuo:U})=>({school:h,name:x,need:[b,T,E,U],desc:Ce[v].desc.replaceAll(" ","")}))).replace("（","(").replace("）",")").replace("）",")"),Ae.jszf=JSON.stringify(Ce.filter(h=>(h==null?void 0:h.type)==2).filter(h=>(h.school=parseInt(h.school||100),h.name=h.name.replace("·新",""),!h.name.includes("废弃")&&!h.desc.includes("备用")&&!h.name.includes("套装"))).sort((h,x)=>h.name.slice(0,2).localeCompare(x.name.slice(0,2))!=0?h.name.slice(0,2).localeCompare(x.name.slice(0,2)):$e("level","money","name.length")(h,x)).map(({level:h,money:x,name:v,desc:b,school:T})=>({...T<100?{school:T}:{},name:v,level:h,desc:b})).filter((h,x,v)=>JSON.stringify(h)!=JSON.stringify(v[x+1]))),Ae.jstf=JSON.stringify(k.Root.saijitianfu.filter(h=>h.seasonID==z).reduce((h,{tfid:x,ceng:v,type:b,cost:T,plot:E,preposition:U})=>(h[x]={id:x,x:b,y:v,cost:T,pre:(U==null?void 0:U.split(/,|;/))??[],...Ce[E]},h),[{id:0,x:0,y:0,cost:0,pre:[],name:"",level:0,type:0}])),e(Ae);}function V(h,x,v){var b,T,E;return h?h.includes(",")?(([U,q])=>["随机","普通","稀有","史诗","传说"][q]+{2:"战法",3:"技能",4:"手牌",5:"装备"}[U])(h.split(",")):ee[h]?(x>1?x:"")+ee[h]:Ce[h]?(b=Ce[h])==null?void 0:b.name:be[h]?(_.set(h,(T=k.Root.Adventure.find(U=>U.ID===parseInt(v/10)))==null?void 0:T.chapname),be[h].map(U=>U.generalname).join(`
`)):(E=k.Root.Card.find(U=>U.id==h))==null?void 0:E.name:""}function Y({general:h,hp:x,maxhp:v,armor:b,getarmor:T,card:E,draw:U,sha:q,next:N,pre:re}){return (re?">":"")+h+x+(v!==x?"/"+v:"")+"血"+E+"牌摸"+U+"杀"+q+(N?">":"")}}(o["hd_roguelike.sgs"],o["hd_1v1_rogue.sgs"]),typeof t!="string"||t=="guanxing"){let Se=function(I,A,V="https://web.sanguosha.com/220/h5_2/res/runtime/pc/general/big/bigSkin/"){let Y=V+I+".png";return fetch(Y).then(h=>{if(h.ok)return {name:A,desc:`<a target="_blank" href="${Y}"><img src="${Y.replace("bigSkin","static").replace("big/s","seat/s")}"></a>`};if(!V.includes("seat"))return Se(I,A,V.replace("big/s","seat/s").replace("bigSkin","static"))})};M.gxjson={"结果为代码自动推演和预测，请以最终公告为准！更新时间":new Date().toLocaleString(),"【充值消费】":[]};let k=o["gn_dbs_quest.sgs"].TaskAll.Task.filter(({_attributes:I})=>I.clientTimeStart>=String(a)).map(({_attributes:I,Reward:A})=>{let V=",";return A.SelectReward&&(A=A.SelectReward,V="/"),A.RewardItem.length||(A.RewardItem=[A.RewardItem]),{id:I.id,time:I.timeStart.slice(0,8)+"—"+I.timeEnd.slice(0,8),desc:"【"+I.name+"】"+I.desc,reward:A.RewardItem.map(({_attributes:Y})=>m(Y.itemId+","+Y.count)).join(V)}}).concat(o["sys_h5_quest.sgs"].root.Task.filter(I=>I.ClientTimeStart>=String(a)).map(({Id:I,Name:A,Desc:V,Rewards:Y,Count:h,ClientTimeStart:x,ExtraRewards:v,ClientTimeEnd:b,SelectRewards:T})=>{let E=T?"/":",";return {id:I,time:x.slice(0,8)+"—"+b.slice(0,8),desc:"【"+A+"】"+V,reward:[Y+","+h,...(v==null?void 0:v.split(";"))??[]].map(m).join(E)}})),D=o["sys_h5_task.sgs"].TaskAll.TaskNode.filter(({duration:I,quest_id:A})=>A&&(!I||(I==null?void 0:I.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6})?.*"),"$1"))>=String(a))).reduce((I,{duration:A,quest_id:V,name:Y})=>{var v,b;let h=V.split(";").map(T=>parseInt(T)).filter(T=>T>0),x=(((b=A||((v=k.find(({id:T,time:E})=>h.includes(T)&&E))==null?void 0:v.time))==null?void 0:b.slice(0,8))+"·【"+(Y==null?void 0:Y.replace(/.*盲盒.*/,"盲盒福利"))+"】").replace(/.*(充值|消费).*/,"【充值消费】");return h.forEach(T=>{T!=""&&(I[T]=x);}),I},{});k.forEach(({id:I,...A})=>{let V=D[I]??String(a)+"·【其它任务】";M.gxjson[V]||(M.gxjson[V]=[]),M.gxjson[V].push(A);}),(I=>{var A;I.length>1&&(M.gxjson[((A=I[0].time)==null?void 0:A.slice(0,8))+"·兑换【占星秘宝】"]=I);})(o["ff_dbs_lottery_new.sgs"].root.ShopGoods.filter(({timeRange:I})=>(I==null?void 0:I.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a)).map(({Id:I,counts:A,exchangecount:V,timeRange:Y})=>({time:Y==null?void 0:Y.replace(/.*?([0-9]+)T[0-9]+,([0-9]+)T[0-9]+/,(h,x,v)=>x+"-"+v),desc:"消耗·星石币*"+V,reward:m(I+","+A)}))),o["ff_exchange_new.sgs"].root.Common.filter(({duration:I})=>(I==null?void 0:I.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a)).forEach(({itemid:I,goods:A,rewardstype:V,duration:Y})=>M.gxjson[Y.slice(0,8)+"·【"+Te(I).name+"】兑换"]=A.sort((h,x)=>x.exchangecount1-h.exchangecount1).map(({exchangecount1:h,Id2:x,counts:v,limitcounts:b,itemid2:T,exchangecount2:E})=>{let U=String(v).split(";");return {time:Y.slice(0,8)+"—"+Y.slice(16,24),desc:"消耗·"+m((T??I)+","+(E??h))+(b?",限"+b+"次":""),reward:String(x).split(";").map((q,N)=>m(q+","+U[N])).join("/")}})),o["sys_treasure_chest.sgs"].root.Common.filter(({duration:I})=>(I==null?void 0:I.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a)).forEach(({itemid:I,rewards:A,duration:V})=>M.gxjson[V.slice(0,8)+"·开启【"+Te(I).name+"】"]=A.map(Y=>({time:V.slice(0,8)+"—"+V.slice(16,24),desc:"开启·"+m(I+","+Y.counts),reward:JSON.stringify(Y).split(/,"goodsid[0-9]+":" *([0-9,;]+) *"/).filter(h=>(h==null?void 0:h.search(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/))>=0).map(h=>h.replace(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/,(x,v,b)=>m(v)+(b?"["+m(b)+"]":""))).join(Y.rewardstype==2?"/":",")})));let z=[],_=[],Z=[],ee=o["sys_h5_dbs_clientserverpub.sgs"].client.DuoBao[0].item.filter(({BeginTime:I})=>I>String(a)).flatMap(({DropId:I,ExchangeId:A,BeginTime:V,EndTime:Y})=>{let h=V.slice(0,8)+"-"+Y.slice(0,8),x=(u.get(Math.abs(I))??[]).map(Te).filter(({name:E})=>!["夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","招募令","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(E)),v=x.map(({ID:E})=>E),T=(u.get(Math.abs(A))??[]).map(Te).filter(({ID:E,name:U,TypeID:q})=>v.includes(E)||!(q==43&&(U!=null&&U.endsWith("动态套装"))||q==36&&(U!=null&&U.startsWith("文和乱武*"))||q==25&&["赵襄","沙摩柯(SP)","孙尚香(界限突破)"].includes(U)||["枭雄金印","水晶碎片","圣魂玄晶","史诗皮肤锦囊","传说皮肤锦囊","至臻皮肤礼盒","谋定水晶自选礼盒"].includes(U))).map(({ID:E,name:U})=>{let q=x.findIndex(({name:N})=>N==U);return q>=0&&v.splice(q,1,E),E});return Array.from(new Set([...v,...T])).map(Te).map(({ID:E,TypeID:U,PicID:q,name:N,returngoods:re,usedeffect:de,info:oe,fragment:L})=>{var P;let pe={time:h,name:N,price:[...v.includes(E)?["四角"]:[],...T.includes(E)&&L?[L+"夺宝碎片"]:[]].join("/"),...(we=>we&&{desc:we})(["祈福灯","圣魂玄晶","枭雄金印"].includes(N)?"":re&&re!="0"&&re.split(";").filter(we=>(we==null?void 0:we.search(/[0-9]+,[0-9]+/))>=0).map(m).join(";")||(de==null?void 0:de.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&de.replace(/([0-9]+),[0-9,]+/g,m)||de&&C(de)||oe)};return (U==36||((P=pe.name)==null?void 0:P.search(/\*[^0-9]/))>=0)&&Z.push({name:N,res:q}),pe})});ee.length&&(M.gxjson.夺宝行动=ee,ee=ee.map(({name:I})=>I));let ge=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(I=>{var A;return ((A=I.x)==null?void 0:A.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a)&&I.a!=834901}).map(({a:I,ah:A,l:V})=>{if(V&&V.replace(/([0-9]+),[0-9,]+/g,(Y,h)=>(!A&&![100301,200101,1325201].includes(parseInt(h))&&z.push(parseInt(h)),Y)),A)_.push(I);else return I}).filter(Boolean).concat(z).sort((I,A)=>I-A).filter((I,A,V)=>A==0||I!=V[A-1]);Array.from(new Set(o["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.filter(I=>I.SellTime>String(a)).map(I=>I.baseID).concat(ge.concat(ge.filter((I,A,V)=>{var Y,h;return I-V[A-1]>1e3&&V[A+1]-I<1e3&&((h=(Y=Te(I))==null?void 0:Y.name)==null?void 0:h[4])!="*"}).map(I=>o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(A=>A.a-I>0&&A.a/1e4>>0==I/1e4>>0).map(A=>A.a)).reduce((I,A)=>[...I,...A],[])).sort((I,A)=>I-A)))).map(I=>Te(I)).filter(I=>I&&![...ee,"夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","招募令","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(I.name)).forEach(({ID:I,TypeID:A,PicID:V,name:Y,maxBuyCount:h,yuanbao:x,returngoods:v,SellTime:b,usedeffect:T,info:E,yuanbaoonly:U,fragment:q,exchange:N,shopvisual:re})=>{var oe;let de={...b&&{time:b.replace(/.*?([0-9]+)T[0-9]+;([0-9]+)T[0-9]+/,(L,pe,P)=>pe+"-"+P)},name:Y,...N!=null&&N.includes(",")?{price:m(N)}:re&&x!=999999&&{price:U?x+"通用元宝":x+"元宝",...h&&((L,pe)=>parseInt(L)>0?{max:pe+"个/"+(L==1?"":L)+"天"}:{})(...h.split(";"))},...(L=>L&&{desc:L})(["祈福灯","圣魂玄晶","枭雄金印"].includes(Y)?"":v&&v!="0"&&v.split(";").filter(L=>(L==null?void 0:L.search(/[0-9]+,[0-9]+/))>=0).map(m).join(";")||(T==null?void 0:T.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&T.replace(/([0-9]+),[0-9,]+/g,m)||T&&C(T)||E)};(A==36||((oe=de.name)==null?void 0:oe.search(/\*[^0-9]/))>=0)&&Z.push({name:Y,res:V}),String(de.price).includes("夺宝")||String(de.price).includes("灵宝")?(M.gxjson.夺宝行动||(M.gxjson.夺宝行动=[]),M.gxjson.夺宝行动.push(de)):de.max?(M.gxjson.限购礼包||(M.gxjson.限购礼包=[]),M.gxjson.限购礼包.push(de)):(M.gxjson.其它道具||(M.gxjson.其它道具=[]),M.gxjson.其它道具.push(de));}),(ne=M.gxjson.其它道具)==null||ne.sort((I,A)=>I.price&&!A.price?-1:1),_.length&&(M.gxjson.祈福武将=Object.entries(_.map(I=>Te(I)).filter(({returngoods:I})=>{var A;return ((A=Te(I.split(";")[1].split(",")[0]))==null?void 0:A.TypeID)==25}).reduce((I,{name:A,lotteryPrice:V})=>(I[V]||(I[V]=[]),I[V].push(A.replace("武将","").replace(/\(.*?\)/g,"")),I),{})).sort((I,A)=>A[0]-I[0]).map(([I,A])=>({price:I+"同心结",reward:A.join("/")}))),(I=>{I.length&&(M.gxjson.祈愿台=I);})(o["ff_tiangong.sgs"].root.Drop.reduce((I,{Id:A,ItemId:V,MaxCount:Y})=>(I[A]||(I[A]=[]),(h=>{["欢乐豆","手气卡","点将卡","换将卡","诏令天下","夺宝券","招募令","武将包","皮肤包","朱砂","灵宝","桃花","功勋","校尉将印","大将军印","水晶碎片","圣魂玄晶","传世玉玺"].some(x=>h.startsWith(x))||I[A].push(h);})(m(V+","+Y)),I),[]).reduce((I,A)=>{if(A){let V=I.find(({reward:Y})=>A.includes(Y));V&&(V.reward=A.join(","));}return I},o["ff_tiangong.sgs"].root.Common.slice().reverse().reduce((I,{Id:A,Name:V,bigrewards:Y,Duration2:h})=>{let x=parseInt(h.slice(0,8))+1;if(x<parseInt(a))return I;let v=I.find(({name:b})=>b==V);return v?v.time+=";"+x:I.push({name:V,reward:gt[Y],time:String(x)}),I},[]).reverse()));const be=(()=>{var I={};return function(A){return I[A]?I[A]:I[A]=o["ff_chess.sgs"].root.NewChess.filter(({PlanId2:V})=>V==A).reduce((V,{MaxFloors:Y})=>V+parseInt(Y),0)}})();(I=>{I.length&&(M.gxjson.绘卷=I);})(o["ff_chess.sgs"].root.Common.reduce((I,{GrandPrize:A,PlanID2:V,duration2:Y})=>{var x;let h=parseInt(Y.slice(0,8))+1;return h<parseInt(a)||I.push({reward:(x=Te(A))==null?void 0:x.name,预估价格:be(V)/2>>0,time:h+"-"+Y.slice(16,24)}),I},[])),M.gxjson.新品皮肤=Z.map(({name:I})=>({name:I})),Object.entries(M.gxjson).forEach(([I,A])=>M.gxjson[I]=Array.isArray(A)?A.map(V=>l(V,c)):l(A,c)),(!t||t=="guanxing")&&e(Promise.all(Z.map(({name:I,res:A})=>Se(A,I))).then(I=>M.gxjson.新品皮肤=I.filter(Boolean)).then(()=>(Object.entries(M.gxjson).forEach(([I,A])=>M.gxjson[I]=Array.isArray(A)?A.map(V=>l(V,c)):l(A,c)),M.gxjson)));}e(o),console.warn("[initMap] Config_w 解析完成");})))}function $e(...t){return new Function("_a","_b","return "+t.map(e=>"((_a."+e+")-(_b."+e+"))").join("||"))}function Ni(t,e){const n=t.matchAll(/\[(\d+),(\d+)\]/g),i=Array.from(n).map(a=>({GoodsBaseID:parseInt(a[1]),ChangeCount:parseInt(a[2])}));if(i.length!==e.length)return !1;const r=new Map(e.map(a=>[a.GoodsBaseID,a.ChangeCount]));return i.every(a=>r.get(a.GoodsBaseID)===a.ChangeCount)&&e.every(a=>i.some(s=>s.GoodsBaseID===a.GoodsBaseID&&s.ChangeCount===a.ChangeCount))}var Pi=`<head><title>三国杀打小抄</title><meta charset="UTF-8"><style>::-webkit-scrollbar{width:5px;height:12px}::-webkit-scrollbar-track{border:1px solid #050505}::-webkit-scrollbar-thumb{background:#5f563f}::-webkit-scrollbar-thumb:hover{background:#2c2c2c}.body{width:100%;padding:0;font-size:13px;background:#23201d;background-size:cover;color:#f2de9c;display:flex;flex-direction:column;margin:1px;user-select:none;max-width:100vw;overflow-x:hidden;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Tahoma,Arial,sans-serif}.nav{width:100%;background:#23201d;text-align:center;display:flex;align-items:center;gap:15px;padding:5px 0}.nav1{font-weight:bolder;height:20px;width:40%;color:#f2de9c;background:#23201d;margin-right:15px;display:block}.sha{font-weight:bolder;height:20px;width:40%;color:#f2de9c;background:#23201d;margin-right:15px;display:block}#nav1:empty{display:none}.nav2{height:20px;width:49%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.nav2:hover{color:#f2de9c;background:#372820;border:1px solid #f2de9c}.nav2:focus{background:#372820;box-shadow:1px 1px 3px #f2de9c}.content{margin:1px}.AC-head{font-weight:bolder;height:66px;width:13%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin:1px;border-radius:5px;border:1px #23201d solid;box-shadow:1px 0 3px;overflow:hidden}.AC-head:hover{background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.AC-body{height:60px;width:79%;float:left;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.invite-body{height:40px;width:92%;float:left;display:flex;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:5px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.orderContainer{text-align:right;vertical-align:bottom}.order-head{font-weight:bolder;width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.order-body:empty{height:35px}.order-body{position:relative;padding:5px;height:auto;width:94%;display:block;box-shadow:1px 1px 3px;z-index:1;margin:1px;overflow:hidden;border-radius:5px}.order-body:after{text-align:center;content:var(--No-content, '座位号丨武将');position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownShouPai{border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.knownCardsInHand{text-align:center;position:relative;overflow:hidden;display:none;height:auto}.knownCards:empty{text-align:center;position:relative;overflow:hidden;display:none}.knownCards{width:94%;text-align:center;position:relative;overflow:hidden;height:auto}@keyframes blink{50%{border-color:#f2de9c}}.paiduiCards:after{text-align:center;content:'牌堆';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.qipaiCards:after{text-align:center;content:'本回合弃牌堆';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownCards:after{text-align:center;content:'场上手牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#quanBian:after{text-align:center;content:'权变牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#yanXi:after{text-align:center;content:'宴戏牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardTypeDetail:after{text-align:center;content:'牌堆类型详情';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.ding{text-align:center;width:100%;position:relative;height:auto;display:none}.dingCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.dingCards:after{content:'第一张为牌堆顶';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.di{text-align:center;width:100%;position:relative;height:auto;display:none}.diCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.diCards:after{content:'第一张为牌堆底';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardDetail{width:100%;overflow:hidden;display:block}.type{width:100%;float:left}.cardTypeContainer{width:100%;overflow:hidden;display:block}.type-head{width:10%;float:left;text-align:center;color:#f2de9c;margin-left:3px;display:block;overflow:hidden;cursor:pointer}.type-body{padding:5px;width:94%;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.cardType{font-size:12px;width:25%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.cardType:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.storeDetail{font-size:12px;width:50%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.detail{width:100%;float:left;overflow:hidden}.detail-head{width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.detail-body{min-height:40px;padding:5px;width:94%;float:left;display:block;box-shadow:1px 1px 3px;margin:1px;border-radius:5px;overflow:hidden}.panel-header{background:#23201d;color:#f2de9c;padding:3px;text-align:left;border:none;width:100%;cursor:pointer;display:flex;align-items:center;border-radius:5px;border:1px transparent solid}.triangle{width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-left:6px solid #f2de9c;margin-right:10px;transition:transform .3s ease}.panel-content{max-height:0;width:100%;float:left;display:block;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;transition:max-height .3s ease-out}.panel-header.active .triangle{transform:rotate(90deg)}.panel-header.active{color:#f2de9c;background:#372820}.panel-header:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.r{color:#f04155}.suitRec{width:50%;float:right;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",Tahoma,Arial,sans-serif;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7)}.suit{width:50%;float:left}.phrase{float:left}.face{width:12.5%;display:block;float:left}.face:hover{width:12.5%;display:block;float:left;background:#f2de9c}#shandian{width:100%;float:left}.function{width:50%;margin:1px}.jizhan{width:100%;float:left}.yanjiao{width:50%;float:left}.yanjiaospan{border:1px solid #0000;box-sizing:border-box}.yanjiaospan:hover{border:1px solid #f2de9c;cursor:pointer}.calRes{width:98%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px;font-size:13px;margin:1px}.secKillDetailText{width:100%;height:26px;float:left;text-align:center;color:#f2de9c;background:#23201d;display:block;border-radius:5px;line-height:26px;margin-top:17px}.calRes:not(:disabled):hover{font-size:12px;color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhuBTN{width:48%;height:20px;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhuBTN:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhu{width:100%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhu:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#mySeatID1{width:48%}#mySeatID2{width:48%}.res{width:100%;float:left}a:link,a:visited{color:inherit;text-decoration:none;display:inline-flex;text-decoration:underline;border-radius:5px;cursor:pointer;align-items:center;justify-content:center}a:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#donate{position:relative;color:#f2de9c;display:block;text-align:center}.uuid{position:relative;color:#f2de9c;display:block;text-align:center;cursor:pointer}.uuid:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.uuid:active{background:#372820}.width{width:100%;height:5px;clear:both}.switch-container{display:flex}.switch{position:relative;display:block;margin-left:10px;width:56px;height:26px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#23201d;-webkit-transition:.4s;transition:.4s;border-radius:34px;border:1px solid #f2de9c;--slider-position:2px}.slider:before{position:absolute;content:"";height:20px;width:20px;left:var(--slider-position,2px);bottom:2px;background-color:#f2de9c;-webkit-transition:.4s;transition:.4s;border-radius:50%}input:checked+.slider{background-color:#372820}input:focus+.slider{box-shadow:0 0 1px #372820}.status{position:absolute;top:50%;transform:translateY(-50%);left:5px;color:#555}.explanation{margin:0 10px;display:flex;width:100%}input:checked+.slider+.status:before{content:'开'}input:checked+.slider+#autoBotStatus:before{content:var(--bot-status, '30');color:#f2de9c}input+.slider+#autoBotStatus:before{content:var(--bot-status, '关')}input+.slider+.status:before{content:"关"}.calRes:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.markedCard{display:inline-flex;align-items:center;border-radius:5px;border:1px solid #000;width:auto;background-color:#372820;color:#f2de9c}.mark{writing-mode:vertical-rl;margin-right:0;color:#f2de9c}.markedCard>.mark:only-child{display:none}.shoupai{color:#000;--shoupai-width:33px;padding:0;font-weight:bolder;margin-right:calc(32px - var(--shoupai-width));float:left;width:var(--shoupai-width);min-width:var(--shoupai-width);height:38px;border:1px solid #000;text-align:center;background:rgba(210,200,160,.5);border-radius:5px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",'Noto Color Emoji';white-space:nowrap;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7);font-size:13px}.shoupai.R{color:red}.shoupai.G{background:0}.shoupai.G .shoupai{background:0;pointer-events:none}.order-body:not(#paiduiCards) .shoupai:disabled{display:none}.order-body:not(#paiduiCards) .shoupai.G{width:auto}.left{width:30%;float:left}.right{width:70%;float:right}input[type=checkbox]:disabled+.slider{background-color:gray;cursor:not-allowed}.question-mark{display:inline-block;position:relative;width:15px;height:15px;line-height:15px;text-align:center;border:1px solid #f2de9c;border-radius:50%;margin-left:2px;transition:background-color .3s}.question-mark:hover{background-color:#372820;cursor:pointer}.tooltip{position:relative;background-color:#333;text-align:center;padding:5px;border-radius:5px;max-width:200px;white-space:pre-line;z-index:10000000001;opacity:0;pointer-events:none;transition:opacity .1s ease-in-out;color:#f2de9c;font-size:13px}.tooltip.visible{opacity:1;pointer-events:auto}.tooltip.top{margin-left:50px}#sidebarHint{position:fixed;top:0;right:0;width:25px;height:100%;background-color:rgba(55,40,32,.8);color:#f2de9c;display:none;justify-content:center;align-items:center;font-size:20px;writing-mode:vertical-rl;text-orientation:upright}:root{--my-background-image:url('https://web.sanguosha.com/220/h5_2/res/assets/bigPng/propGet.png')}.sorderContainer{font-size:13px;width:100%;display:flex;align-items:center;width:146px;z-index:10000000000;user-select:none;text-align:left;transition:height .2s;position:fixed;transform-origin:0 0}.sorder-head{display:flex;align-items:center;justify-content:center;font-weight:bolder;width:10%;height:25px;text-align:center;color:#f2de9c;margin-left:3px}.sorder-body{pointer-events:auto;height:auto;width:100%;float:right;display:flex;flex-wrap:wrap;overflow:hidden;z-index:1;max-height:48px}.sorder-body.show-ellipsis::after{content:'...';position:absolute;bottom:0;left:50%;transform:translateX(-50%);text-align:center;color:#f2de9c;font-weight:700;height:20px;background:linear-gradient(to bottom,rgba(255,255,255,0),rgb(0 0 0 / 80%));width:inherit}.sorder-body:hover{max-height:none;overflow:visible}.sorder-body:hover::after{display:none}.sorder-body:not(#paiduiCards) .shoupai:disabled{display:none}.sorder-body:not(#paiduiCards) .shoupai.G{width:auto}@keyframes fadeInLeftToRight{0%{clip-path:inset(0 100% 0 0);opacity:0}100%{clip-path:inset(0 0 0 0);opacity:1}}@keyframes fadeOutRightToLeft{0%{clip-path:inset(0 0 0 0);opacity:1}100%{clip-path:inset(0 100% 0 0);opacity:0}}.ac-tooltip{position:fixed;top:100px;left:45%;background-color:transparent;background-image:var(--my-background-image);cursor:pointer;background-size:100% 100%;color:#f44336;font-size:16px;border-radius:4px;z-index:9999;overflow:hidden;white-space:nowrap;padding:16px 32px;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transform:translateX(0);transition:opacity 1s ease-in-out,visibility 1s ease-in-out}.ac-tooltip.green{background-color:transparent;color:#f2de9c}.city{visibility:hidden;transition:opacity 1s ease-in-out,visibility 1s ease-in-out;background-color:rgba(55,52,39,.7);color:#f2de9c;align-items:center;justify-content:center;border-radius:5px;text-align:center;flex-direction:column;padding:5px}hr{width:100%;margin:0}@keyframes blink{50%{border-color:#f2de9c}}.show{animation:fadeInLeftToRight 1s forwards,blink 2s infinite;visibility:visible}.hide{animation:fadeOutRightToLeft 1s forwards;visibility:hidden}.window{width:1024px;height:600px;border:2px solid #333;border-radius:8px;box-shadow:0 0 15px rgba(0,0,0,.5);position:relative;background-color:#f5f5f5;overflow:hidden}.window-header{display:flex;justify-content:space-between;align-items:center;background-color:#23201d;color:#fff;padding:5px;cursor:move}.window-header .title{font-weight:700;padding-left:10px}.window-header .controls{display:flex;gap:5px}.window-header .controls button{background:0 0;border:none;color:#fff;cursor:pointer;padding:5px}.window-header .controls button:hover{background-color:rgba(255,255,255,.2)}.window-content{width:100%;height:calc(100% - 40px);border:none}.fullscreen{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-5C3C11THB3"><\/script><script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"><\/script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5C3C11THB3")<\/script></head><div class="body"><div class="nav"><div class="nav1" id="phrase">当前阶段提示</div><div class="sha" id="sha">可出杀次数：0</div></div><div class="content" id="content"><div class="orderAndShouPai" id="orderAndShouPai"><button class="panel-header"><span class="triangle"></span> <b>武将手牌</b></button><div class="panel-content order" id="button"><div class="orderContainer" id="or1"><div class="order-body No1" id="1" style="--No-content:'神诸葛亮丨一'"><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button><div class="markedCard"><span class="mark">木马</span> <button class="shoupai G">♥10<br>测试</button> <button class="shoupai R">♦K<br>测试</button></div><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button></div></div><div class="orderContainer" id="or2"><div class="order-body No2" id="2" style="--No-content:'卧龙诸葛丨二'"><button class="shoupai G">♥10<br>暗牌</button> <button class="shoupai G">♥10<br>样式</button></div></div><div class="orderContainer" id="or3" style="--No-content:'天候孔明丨三'"><div class="order-body No3" id="3"></div></div><div class="orderContainer" id="or4" style="--No-content:'诸葛亮丨四'"><div class="order-body No4" id="4"></div></div><div class="orderContainer" id="or5" style="--No-content:'武诸葛亮丨五'"><div class="order-body No5" id="5"></div></div><div class="orderContainer" id="or6" style="--No-content:'卧龙凤雏丨六'"><div class="order-body No6" id="6"></div></div><div class="orderContainer" id="or7" style="--No-content:'界卧龙诸葛丨七'"><div class="order-body No7" id="7"></div></div><div class="orderContainer" id="or8" style="--No-content:'界诸葛亮丨八'"><div class="order-body No8" id="8"></div></div></div><div><div class="orderContainer"><div class="order-body knownCards" id="knownCards"></div></div><div class="orderContainer"><div class="order-body paiduiCards" id="paiduiCards"></div></div><div class="orderContainer"><div class="order-body qipaiCards" id="qipaiCards"></div></div><div class="orderContainer"><div class="knownCards quanBianYanXi" id="quanBian"></div><div class="knownCards quanBianYanXi" id="yanXi"></div></div></div></div><div class="width"></div><div class="cardDetail" id="cardDetail"><div class="space"></div><div class="detail"><div class="detail-body"><div class="suit r" id="heart">♥红桃 × 0</div><div class="suit" id="spade">♠黑桃 × 0</div><div class="suit" id="club">♣梅花 × 0</div><div class="suit r" id="diamond">♦方片 × 0</div><div class="suit r" id="hongsha">红杀 × 0</div><div class="suit" id="heisha" n>黑杀 × 0</div><span>乱击/权变</span><div class="suitRec" id="suit"></div><br><span>博图</span><div class="suitRec" id="boTu"></div><br><span>上一张使用的牌</span><br><button class="shoupai R" id="lastUseCard">＾＾<br>•ω•</button><br><br><br><div id="guhuo" style="display:none">蛊惑牌</div><div class="function yanjiao" id="yanjiao">严教小抄</div><button class="function mizhuBTN" id="mizhu">糜竺小抄</button> <button class="function mizhu mySeatID" id="mySeatID1">座位：1</button> <button class="function mizhu mySeatID" id="mySeatID2">座位：2</button><div class="function res" id="result">结果样式：1 1 1 1 = 4</div></div></div><div class="width"></div><div class="type"><div class="cardTypeContainer"><div class="type-body type1" id="type1"><button class="cardType" id="test1">小抄</button> <button class="cardType">开发</button> <button class="cardType">小伙伴</button></div></div><div class="cardTypeContainer"><div class="type-body type2" id="type2"><button class="cardType">霜迟</button> <button class="cardType">孤独尊</button> <button class="cardType">无所谓</button> <button class="cardType">埃城</button> <button class="cardType">辉弥</button> <button class="cardType">天野</button> <button class="cardType">人富</button></div></div><div class="cardTypeContainer"><div class="type-body type3" id="type3"></div></div><div class="orderContainer"><div class="knownCards cardTypeDetail" id="cardTypeDetail"></div></div></div></div><div class="width"></div><div class="width"></div><div class="laya" id="laya"><div class="space"></div><button class="panel-header laya-header"><span class="triangle"></span> <b>快捷操作</b></button><div class="panel-content" id="layaDiv"><div class="switch-container"><div id="autoBotSwitchContainer"><span class="explanation">自动挂机</span> <label class="switch" data-tooltip="AI接管挂机刷酒馆30亲密度&#10;自动创建演武房间开始对战&#10;建议点将张辽禁将只留标风&#10;禁用其它SP武将可提高胜率&#10;到身份演武房间列表后开启&#10;界小抄用户可以无限制使用&#10;开关数字表示酒馆剩余时间&#10;双击打开官阶百胜无尽挂机&#10;到经典场国战开启可刷福卡"><input id="autoBotSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoBotStatus"></span></label></div><div><span class="explanation" id="autoExplanation"></span></div></div><div class="switch-container"><div><span class="explanation">盖主速刷</span> <label class="switch" data-tooltip="主公点将黄盖一分钟苦肉自杀速刷&#10;可用来刷武将百胜战功和官阶任务&#10;保证已激活的账号在 7 天内登录过&#10;一：登录小号创建自选身份密码房&#10;二：多开大号加入房间点自动挂机&#10;三：大号需双击自动挂机开始锁定&#10;四：小号点将黄盖，打开盖主速刷&#10;五：大号准备并保持两窗口在前台&#10;"><input id="autoHGSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoHGStatus"></span></label></div><div><span class="explanation" id="autoHGExplanation"></span></div></div><div class="switch-container" style="display:none"><div><span class="explanation">加入互助</span> <label class="switch" data-tooltip="点击加入小抄互相助力小组&#10;每天自动助力三位小抄玩家&#10;同时收到三位小抄玩家助力&#10;默认为小抄给当前玩家助力&#10;右侧可输入想要助力的玩家&#10;“再”打开《加入互助》开关&#10;该玩家可收到三个小抄助力&#10;"><input id="autoInviteSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><textarea class="invite-body" type="text" id="inviteName" required maxlength="10" size="10" placeholder="大西瓜"></textarea></div></div><button class="calRes" id="guanxing">自助观星</button> <button class="calRes" id="baisheng">查看百胜</button> <button class="calRes" id="mail" disabled="disabled">一键领取邮箱物品</button> <button class="calRes" id="task" disabled="disabled">一键领取所有任务奖励</button></div></div><div class="store" id="store"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>山河图</b></button><div class="panel-content"><div class="switch-container"><div><span class="explanation">山河地图</span> <label class="switch" data-tooltip="提前预测奇遇事件"><input id="rogueCitySwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div><button class="calRes" id="openStore">点击打开商店换装备->跳奇遇</button></div><div><span id="chongsheng">重生是否发动：否</span></div><div><span id="sanBanFu">三板斧计数器</span></div><div id="storeDetail"><button class="storeDetail">集市霸王·壹300</button> <button class="storeDetail">集市霸王·贰200</button> <button class="storeDetail">集市霸王·叁100</button> <button class="storeDetail">会员商店·肆1100</button> <button class="storeDetail">稳定承载1100</button> <button class="storeDetail">极奢1100</button></div></div></div><div class="secKill" id="secKill"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>秒杀连点器（悬停查看详情）</b></button><div class="panel-content" id="secKillDetail"><div class="left"><br><div><label class="switch" data-tooltip="界小抄功能&#10;选择您想秒杀的物品&#10;到点之后将自动帮抢&#10;勿开开关关秒杀界面"><input id="secKillItem1Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" data-tooltip="界小抄功能&#10;选择您想秒杀的物品&#10;到点之后将自动帮抢&#10;勿开开关关秒杀界面"><input id="secKillItem2Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" data-tooltip="界小抄功能&#10;选择您想秒杀的物品&#10;到点之后将自动帮抢&#10;勿开开关关秒杀界面"><input id="secKillItem3Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br></div><div class="right"><span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span></div></div></div><div class="chat" id="chat"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>聊天（点击自动输入）</b></button><div class="panel-content chat-body"></div></div><div class="CDK"><button class="panel-header"><span class="triangle"></span> <b>兑换码（点击即兑换）</b></button><div class="panel-content"><div class="function res" id="CDK"><button class="calRes">小麦好帅</button></div></div></div><div class="tianguo"><button class="panel-header"><span class="triangle"></span> <b>统计</b></button><div class="panel-content"><button id="gamerecord" class="calRes" style="text-align:center">战绩胜率统计</button><div id="PlayerTianGuo" style="text-align:center">你的天过次数/总次数</div><div><div id="lottery"><a href="https://goka.top:8080/choujiang?username=" target="_blank" class="calRes external-link" data-url="https://goka.top:8080/choujiang?username=" id="choujiang">点击查看祈愿台数据</a></div></div></div></div><button class="panel-header"><span class="triangle"></span> <b>设置</b></button><div class="setting panel-content"><div class="switch-container"><div><span class="explanation">皮肤体验</span> <label class="switch" data-tooltip="该功能仅限于体验皮肤&#10;喜欢还请购买支持画师&#10;此功能随时失效！！！"><input id="skinSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="skinStateButton"><span class="explanation">动态皮肤</span> <label class="switch" data-tooltip="打开显示动态皮肤&#10;关闭显示静态皮肤&#10;电脑卡顿可以打开&#10;需先打开皮肤体验"><input id="skinStateSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">屏蔽动态</span> <label class="switch" data-tooltip="屏蔽其他人的动态皮肤&#10;电脑卡顿的话可以打开"><input id="skinStateBlockSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">皮肤壁纸</span> <label class="switch" data-tooltip="打开后进入皮肤详情界面进行设置&#10;可以将动静态皮肤设置为游戏壁纸&#10;也可以把静态皮肤图片保存到本地&#10;不建议与微端自定义背景同时使用"><input id="skinPaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="paperStateButton"><span class="explanation">全局壁纸</span> <label class="switch" data-tooltip="局外背景替换为皮肤壁纸&#10;需要先打开皮肤壁纸开关"><input id="allPaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">五阶特效</span> <label class="switch" data-tooltip="其他角色显示五阶特效"><input id="generalSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">屏蔽击杀</span> <label class="switch" data-tooltip="屏蔽击杀特效"><input id="killEffectSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div style="display:none"><span class="explanation">金色卡背</span> <label class="switch"><input id="cardBackSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">明牌框框</span> <label class="switch" data-tooltip="明牌展示在武将下面"><input id="seatUISwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">卡牌标签</span> <label class="switch" data-tooltip="会在自己手上的卡牌显示标签&#10;明牌：五谷顺手迂志等明牌&#10;新组合：界小抄提示百出的新组合&#10;更多标签在开发中"><input id="cardLabelSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">自动签到</span> <label class="switch" data-tooltip="自动领取打卡签到的奖励"><input id="autoSignSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">跳体验卡</span> <label class="switch" data-tooltip="签到会有体验武将&#10;如领取会污染将池&#10;开启按钮跳过领取&#10;月底记得手动领取"><input id="autoSignSkipSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">领武将包</span> <label class="switch" data-tooltip="每天登录，自动领取免费的武将包"><input id="autoWuJiangSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">公会三敲</span> <label class="switch" data-tooltip="每天自动公会三敲&#10;无惧公会长的诫厉"><input id="autoDrumSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">月卡奖励</span> <label class="switch" data-tooltip="界小抄功能&#10;自动领取月卡奖励"><input id="autoYueKaSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">自动砍树</span> <label class="switch" data-tooltip="界小抄功能&#10;每天登录自动砍树"><input id="autoKanShuSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">跳过弹窗</span> <label class="switch" data-tooltip="跳过广告弹窗&#10;MVP结算&#10;武将包弹窗&#10;皮肤包弹窗&#10;老仙特效"><input id="skipWindowSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">跳过出货</span> <label class="switch" data-tooltip="跳过出货弹窗&#10;祈愿台翻翻乐&#10;加快氪金速度"><input id="skipProbWindowSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">兑换码&emsp;</span> <label class="switch" data-tooltip="开启将显示分享的兑换码通知&#10;且收集和分享您的兑换码兑换"><input id="CDKNotificationSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div></div><div class="width"></div><div class="ACContainer"><textarea class="AC-body" type="text" id="AC" name="AC" required placeholder="点击添加激活码"></textarea> <button class="AC-head" type="submit" id="ACSubmit">激活</button></div><div style="text-align:center"><a href="https://afdian.com/@yimadaO_o" class="external-link" data-url="https://afdian.com/@yimadaO_o">开发不易 如您喜欢 不妨支持小抄</a><div class="width"></div><a href="https://qm.qq.com/q/zIwVQjlqnY" class="external-link" data-url="https://qm.qq.com/q/zIwVQjlqnY">加群一起玩</a><div class="width"></div><a href="https://support.qq.com/products/664780/" class="external-link" data-url="https://support.qq.com/products/664780/" target="_blank">提需求</a><div class="width"></div><a href="https://goka.top:8080" class="external-link" data-url="https://goka.top:8080" target="_blank">关于我们</a><div class="width"></div><div class="uuid id" id="uuid">id：</div><div class="width"></div><div class="uuid nickName" id="nickName">昵称：</div><div class="width"></div><div class="uuid guildID" id="guildID">公会数字ID：</div><div class="width"></div><div class="width"></div></div></div><script><\/script></div>`;let tt=null;const lt=" "+"2.9.45".replace(/^2\.9\./,""),Hi=`
适配旁视角薛灵芸弃牌记录，加油呀会制衡的大哥哥；
快捷操作新增百胜查询；
我们开发小抄是为了让杀友们更愉快地享受游戏；
如果它影响了你的游玩体验，篡改猴可随时卸载；
如果你觉得我们做的不错的话，欢迎分享给其他杀友；
或请我们喝杯咖啡支持一下我们❤️
`.replace(/；/g,"<br>");var xn,gn;(gn=(xn=document.getElementById("createSkinIframeSource"))==null?void 0:xn.contentWindow)==null||gn.document;function ji(){return window.WDVerSion="1.0.0",window.padding=ae.padding||0,window.addEventListener("resize",Mn),new Promise((t,e)=>{function n(){return new Promise(i=>{function r(){var a;typeof JSZipUtils<"u"&&typeof CtrUtil<"u"&&typeof((a=CtrUtil==null?void 0:CtrUtil.Ctr)==null?void 0:a.Ofb_Dec)<"u"&&typeof SystemContext<"u"&&document.getElementById("bgDiv")?Hn(!0).then(i):setTimeout(r,1e3);}r();})}Promise.all([n()]).then(t).catch(e);})}function qi(){var t,e,n,i;return window.removeEventListener("resize",Mn),window.removeEventListener("resize",Pn),window.removeEventListener("SGSresize",Nn),(t=document.getElementById("seatUI"))==null||t.remove(),(e=document.getElementById("rogueUI"))==null||e.remove(),(n=document.getElementById("cusBGDiv"))==null||n.remove(),(i=document.getElementById("createIframe"))==null||i.remove(),w.isFrameAdd=!1,!0}function Mn(){window.innerWidth=document.documentElement.clientWidth-window.padding;}function Nn(){window.dispatchEvent(new Event("resize"));}let ht;function Pn(){ht&&clearTimeout(ht),ht=setTimeout(()=>{Ui(),ht=null;},500);}async function Hn(t=!1){var e,n,i,r,a;if(t&&((e=document.getElementById("seatUI"))==null||e.remove(),(n=document.getElementById("rogueUI"))==null||n.remove(),(i=document.getElementById("cusBGDiv"))==null||i.remove(),(r=document.getElementById("createIframe"))==null||r.remove(),w.isFrameAdd=!1),!w.isFrameAdd){window.addEventListener("resize",Pn),SystemContext._gameScreenType=SystemContext.gameScreenType,SystemContext._gameScale=SystemContext.gameScale,Object.defineProperty(SystemContext,"gameScreenType",{get:function(){return this._gameScreenType},set:function(s){this._gameScreenType!==s&&(this._gameScreenType=s,window.dispatchEvent(new Event("SGSresize")));}}),Object.defineProperty(SystemContext,"gameScale",{get:function(){return this._gameScale},set:function(s){this._gameScale!==s&&(this._gameScale=s,window.dispatchEvent(new Event("SGSresize")));}}),window.addEventListener("SGSresize",Nn);try{document.getElementById("bgDiv").firstElementChild.draggable=!1,(a=document.querySelector("link[rel=stylesheet]"))==null||a.remove();}catch{}return Vi(),zi(),Zi(),w.isFrameAdd=!0,Mi(!0)}}function zi(){var t=document.getElementById("bgDiv");if(t){var e=document.createElement("div");e.id="cusBGDiv",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.zIndex="0",e.style.pointerEvents="none";var n=document.createElement("video");n.className="bg-ani",n.id="sgsBgVideo",n.autoplay=!0,n.loop=!0,n.muted=!0,n.preload="auto",n.style.setProperty("object-fit","fill","important");var i=document.createElement("img");i.className="bg-ani",i.id="sgsBgIMG",i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i.style.zIndex="1",i.style.position="absolute",i.style.top="0",i.style.left="0",e.appendChild(n),e.appendChild(i),t.appendChild(e),window.dispatchEvent(new Event("resize"));}}function Ui(){if(!SystemContext)return;J.width=SystemContext.gameWidth*SystemContext.gameScale>>0,J.height=SystemContext.gameHeight*SystemContext.gameScale>>0,J.scale=SystemContext.gameScale,J.seatUIs&&J.seatUIs.length>0&&(jn(),wt());let t={width:(SystemContext.gameWidth*SystemContext.gameScale>>0)/window.devicePixelRatio,height:(SystemContext.gameHeight*SystemContext.gameScale>>0)/window.devicePixelRatio};ae.padding&&document.getElementById("createIframe")?(document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px",document.getElementById("createIframe").style.height="100%",document.getElementById("createIframe").style.right="0px",document.getElementById("createIframe").style.top="0px"):document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px";let e=document.getElementById("cusBGDiv"),n=document.getElementById("sgsBgVideo"),i=document.getElementById("sgsBgIMG"),r=document.getElementById("seatUI"),a=document.getElementById("rogueUI"),s=((window.innerHeight*window.devicePixelRatio-SystemContext.gameScale*SystemContext.gameHeight)/(2*window.devicePixelRatio)+SystemContext.gameScale*SystemContext.gameHeight/2)/window.devicePixelRatio;e&&(e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.left=window.innerWidth/2+"px",e.style.top=s+"px"),n.width=t.width,n.height=t.height,n.style.left=window.innerWidth/2+"px",n.style.top=s+"px",i.width=t.width,i.height=t.height,r.style.width=`${t.width}px`,r.style.height=`${t.height}px`,r.style.left=window.innerWidth/2+"px",r.style.top=s+"px",a.style.width=`${t.width}px`,a.style.height=`${t.height}px`,a.style.left=window.innerWidth/2+"px",a.style.top=s+"px",J.centerX=window.innerWidth>t.width?t.width/2:window.innerWidth/2,J.centerY=t.height/2;}function jn(){const t={ScaledHeight:J.selfSeatUiUnscaledHeight*J.scale};let e=J.unscaledWidth*J.scale,n=J.unscaledHeight*J.scale;J.ScaleWidth=e,J.ScaleHeight=n;let i=J.height,r=J.width;var a=t.ScaledHeight,s=0,o=0,l=J.seatUIs.length;if(l!=1){s=e,o=n;var c=[];c=J.seatUIs;var f=c.length-1,d=0,u=0,p=0;f<3?u=f:f==3?u=1:f==4||f==6?u=2:(f==5||f==7)&&(u=3),d=f-u>>1,p=f-d-u,O.isDouDiZhu&&(J.seatUIs[0].actualSeatID==2?(u=1,d=1):J.seatUIs[0].actualSeatID==3&&(u=1,p=1)),O.isShanHeTu&&l==3&&J.friendGeneral==1&&(u=1,p=1);var m=1,y,C,S=0,j=0,ne=0,k=0,D=J.rightBarWidth*J.scale,z=0;if(d>0){var _=s,Z=o*d;for(ne=(i-a-Z)*.25>>0,J.verticalGap=ne,Z+=(d-1)*ne,y=m+d,S=r-_-J.paddingRight*J.scale-D-z,j=(i-a-Z-J.paddingTop*J.scale-J.paddingBottom>>1)+(J.paddingTop+10)*J.scale+Z+J.leftRightTop;m<y;m+=1)C=c[m],j-=n,C.posX=(S-5>>0)/window.devicePixelRatio,C.posY=(j+n>>0)/window.devicePixelRatio,C.DisplayLocation="Right",j-=ne;}if(u>0){var ee=s*u;for(k=(r-D-ee)*.07>>0,J.horizontalGap=k,ee+=(u-1)*k,y=m+u,S=(r-ee-D)/2+ee+(r<=1600?J.paddingLeftTopExtra:0),j=(J.paddingTop+10)*J.scale;m<y;m+=1)C=c[m],S-=e,C.posX=(S>>0)/window.devicePixelRatio,C.posY=(j+n>>0)/window.devicePixelRatio,C.DisplayLocation="Top",S-=k;}var ge=0;if(p>0){var be=o*p;for(ne=(i-a-be)*.25>>0,be+=(p-1)*ne,y=m+p,S=J.paddingLeft*J.scale,j=(i-a-be-J.paddingTop*J.scale-J.paddingBottom>>1)+(J.paddingTop+10)*J.scale+J.leftRightTop;m<y;m+=1)C=c[m],C&&(C.DisplayLocation="Left",C.posX=(S+ge>>0)/window.devicePixelRatio,C.posY=(j+n>>0)/window.devicePixelRatio),j+=o+ne;}}}function Ft(t){if(J.seatUIs=[],wt(),t===null)return;let e=O.sequence(O.mySeats[0]);J.seatUIs=e.map(n=>({actualSeatID:O.getOrder(n)+1})),jn(),wt();}function Qi(){document.getElementById("sgsBgIMG").src="https://web.sanguosha.com/10/pc/res/assets/runtime/general/maxBig/604701.png",setTimeout(function(){document.getElementById("sgsBgIMG").src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";},2e4);}function Fi(){var t=document.createElement("div");t.id="sidebarHint",t.innerText="拖到这里变为变为侧边栏，再次拖动取消侧边栏",document.body.appendChild(t);}function Vi(){var t=document.createElement("div");t.id="seatUI",t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.pointerEvents="none",t.style.display="";var e=document.createElement("div");e.id="rogueUI",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.pointerEvents="none",e.style.display="",ae.seatUISwitch?t.style.display="block":(t.style.display="none",document.querySelectorAll("#seatUI > *:not(.city)").forEach(n=>n.style.display="none")),document.body.appendChild(t),document.body.appendChild(e);}function Ki(){for(let t=0;t<=7;t++){let e="or"+(t+1);document.getElementById(e).style.display="block";}}function Ji(t){for(let e=7;e>=t;e--){let n="or"+(e+1);document.getElementById(n).style.display="none";}}function Zi(){let t=document.getElementById("createIframe");if(!t){t=document.createElement("div"),t.id="createIframe",t.id="createIframe",t.className="createIframe",t.style.position="fixed",t.style.overflow="hidden",t.style.resize="vertical",t.style.top="31px",t.style.right="155px",t.style.width="230px",t.style.height="500px",t.style.zIndex="10000000000",t.style.display="flex",t.style.flexDirection="column",t.style.color="#f2de9c",t.style.background="rgb(35, 32, 29)",t.style.userSelect="none",t.style.textAlign="left",t.style.transition="height 200ms",t.style.borderRadius="8px",t.style.transformOrigin="top right",t.style.transform="translate(0px, 0px)";var e=document.createElement("p");e.id="header",e.className="header",e.style.margin="1px",e.style.userSelect="none",e.style.cursor="grab",e.style.display="flex",e.style.alignItems="center",e.style.fontSize="20px",e.style.borderRadius="5px";var n=document.createElement("span");n.id="title",n.style="margin-right: auto;",n.innerText="三国杀打小抄"+lt,t.appendChild(e),t.onmouseover=function(){document.querySelectorAll("div.city").forEach(f=>{f.classList.remove("hide"),f.classList.add("show");});},t.onmouseout=function(){document.querySelectorAll("div.city").forEach(f=>{f.classList.remove("show"),f.classList.add("hide");});};var i=document.createElement("button");i.innerText="-",i.id="toggle-me",i.style="text-align: center;color: #f2de9c;background: rgb(35, 32, 29);border-radius: 6px;width: 26px;height: 26px;border: 1px solid rgb(212, 212, 162);cursor: pointer;user-select: none;background: rgb(107, 30, 30);display: flex;align-items: center;justify-content: center;margin: 1px;font-size: 20px;",i.type="button",i.addEventListener("mouseover",function(){i.style.backgroundColor="rgb(130, 30, 30)";}),i.addEventListener("mouseout",function(){i.style.backgroundColor="rgb(107, 30, 30)";}),e.appendChild(n),e.appendChild(i),localStorage.getItem("DXCVersion")!=lt&&(Fe(`小抄已经更新到${lt}<br>${Hi}`,"acTooltip",3e4,"green"),localStorage.setItem("DXCVersion",lt)),document.body.appendChild(t),tt=document.createElement("div"),tt.style="border: none;width: 230px;height: 100%;margin: 0px;overflow-y: auto;overflow-x: hidden;",tt.id="iframe-source",t.append(tt),tt.innerHTML=Pi,tt.querySelectorAll("script").forEach(c=>{const f=document.createElement("script");c.src?(f.src=c.src,f.async=c.async):f.textContent=c.textContent,document.body.appendChild(f),c.remove();});const a=document.querySelectorAll('input[id$="Switch"]'),s=document.querySelectorAll(".slider");a.forEach((c,f)=>{const d=s[f];c.addEventListener("change",u=>{const p=u.target.checked;try{gsap.to(d,{duration:.4,ease:"power2.inOut",css:{"--slider-position":p?"30px":"2px"},onStart:()=>{gsap.to(d,{scale:1.1,duration:.2,ease:"power1.inOut"});},onComplete:()=>{gsap.to(d,{scale:1,duration:.2,ease:"power1.inOut"});}}),gsap.to(d,{duration:.4,ease:"power2.inOut",boxShadow:p?"0 0 15px rgba(255, 204, 0, 1)":"0 0 0 rgba(0, 0, 0, 0)",background:p?"linear-gradient(to right, #ff7b54, #ffcc00)":"rgb(35, 32, 29)"});}catch(m){console.error("GSAP animation failed:",m);}});}),document.querySelectorAll(".panel-header").forEach(c=>{c.addEventListener("click",function(){const f=this.nextElementSibling;this.classList.toggle("active"),f.style.maxHeight?f.style.maxHeight=null:f.style.maxHeight=f.scrollHeight+"px";const d=new MutationObserver(()=>{f.style.maxHeight&&(f.style.maxHeight=f.scrollHeight+"px");});d.observe(f,{childList:!0,subtree:!0,characterData:!0}),f.style.maxHeight||d.disconnect();});});const l=document.querySelector(".laya-header");if(l){const c=l.nextElementSibling;l.classList.add("active"),c.style.maxHeight=c.scrollHeight+"px";}document.querySelectorAll(".switch").forEach(function(c){c.addEventListener("mouseenter",function(f){if(c.getAttribute("data-tooltip")){let d=document.createElement("div");d.classList.add("tooltip","top"),d.textContent=c.getAttribute("data-tooltip"),document.body.appendChild(d);const u=c.getBoundingClientRect();d.style.left=`${u.left+window.scrollX+u.width/2-d.offsetWidth-15}px`,d.style.top=`${u.top+window.scrollY-d.offsetHeight-15}px`,d.classList.add("visible"),c.addEventListener("mouseleave",function(){d.classList.remove("visible"),d.remove();});}});});}Fi(),$i(),ts(),wi();}function $i(){var t=document.getElementById("toggle-me");t.onclick=function(){w.closeIframe=!w.closeIframe,w.closeIframe?(document.getElementById("createIframe").style.top="31px",document.getElementById("createIframe").style.right="155px",document.getElementById("iframe-source").style.display="none",t.innerText="+",document.getElementById("createIframe").style.height="30px",document.getElementById("createIframe").style.opacity="0.6",document.getElementById("createIframe").style.width="75px",document.getElementById("title").innerText="小抄",document.getElementById("createIframe").style.resize="none",ae.padding&&(ae.padding=0,window.dispatchEvent(new Event("resize")),un=0,fn=0,document.getElementById("createIframe").style.transform=`translate(${un}px, ${fn}px)`)):(document.getElementById("iframe-source").style.display="block",t.innerText="-",document.getElementById("createIframe").style.height="500px",document.getElementById("createIframe").style.opacity="1",document.getElementById("createIframe").style.width="230px",document.getElementById("title").innerText="三国杀打小抄"+lt,document.getElementById("createIframe").style.resize="vertical");},document.getElementById("autoInviteSwitch").addEventListener("click",n=>{var r;if(n.target.checked){var i=(r=document.getElementById("inviteName"))==null?void 0:r.value;typeof i=="string"&&i.length!==0&&(w.inviteName=i,Ke("INVITE_NAME",w.inviteName),ue(`为目前机器所有账号绑定助力${w.inviteName}，如需更改/删除，更改/删除昵称重新打开开关`)),vn(w.inviteName.trim()||w.nickname);}else zt("INVITE_NAME");}),document.getElementById("guanxing").onmousedown=function(){const n=Bt(Lt(M.gxjson),"myWindowGuanXing","观星","小抄观星 公告为准");Dt(n);},document.getElementById("baisheng").onmousedown=function(){let n=Object.values(B.class("AchievementManager").myOpenAchDic.Maps).filter(r=>{var a,s,o,l;return ((a=r.achievementInfo)==null?void 0:a.flags)==2048&&((l=(o=(s=r.achievementInfo)==null?void 0:s.desc)==null?void 0:o.includes)==null?void 0:l.call(o,"100"))}).map(r=>({num:r.GetProCount(),id:r.achievementInfo.characterId,desc:r.achievementInfo.desc})).sort((r,a)=>a.num-r.num||r.id-a.id);const i=Bt(`<html><head><meta charset="utf-8" /><title>百胜</title></head><body>${zn(n)}</body></html>`,"myWindowBaiSheng","百胜查询 control + F 快速定位","");Dt(i);},document.getElementById("gamerecord").onclick=async function(){for(this.disabled=!0,Ut(w.userID);Oe.req;)await me(500);this.disabled=!1,w.v&&await si();const n=Bt(Fn(JSON.stringify(Oe)),"myWindowGameRecord","游戏记录","");Dt(n);},document.getElementById("mizhu").onmousedown=function(){let n=document.querySelectorAll(".mizhu");O.mySeats.length<=1?(n.forEach(i=>i.style.display="none"),ln(Array.from(te.shoupai(O.mySeats[0]),i=>ce[i].number))):O.mySeats.forEach((i,r)=>{n[r].style.display="block",n[r].innerText=O.name(i),n[r].onclick=()=>{ln(Array.from(te.shoupai(i),a=>ce[a].number));},r==0&&n[r].click();});};function e(n,i,o){var l,c,f,d;var a=n.target,s=a.checked,o=a.id;if(!(o==="autoBotSwitch"||o==="autoHGSwitch"||o==="secKillItem1Switch"||o==="secKillItem2Switch"||o==="secKillItem3Switch"))if(ae[o]=s,o=="skinSwitch")document.getElementById("skinStateButton").style.display=s?"block":"none";else if(o=="seatUISwitch")document.getElementById("seatUI").style.display=s?"block":"none";else if(o=="skinPaperSwitch"){let u=(c=(l=B.find("SceneLayer",null))==null?void 0:l.constructor)==null?void 0:c.name;document.getElementById("paperStateButton").style.display=s?"block":"none",ft.switch(s&&(Je.includes(u)||ae.allPaperSwitch&&!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(u)));}else if(o=="allPaperSwitch"){let u=(d=(f=B.find("SceneLayer",null))==null?void 0:f.constructor)==null?void 0:d.name;ft.switch(s&&ae.skinPaperSwitch&&!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(u)||Je.includes(u));}else o=="rogueCitySwitch"&&(s&&J.cities?Gt(J.cities):Gt(""));}if(window.padding==0){console.warn("closesidebar");var t=document.getElementById("toggle-me");console.warn("toggle"),t.click();}window.dispatchEvent(new Event("resize")),document.querySelectorAll(".switch").forEach(n=>n.addEventListener("change",e)),document.getElementById("ACSubmit").onclick=wn,Yi(),Xi();}function Yi(){let t=document.getElementById("openStore");t.onclick=function(){B.class("GameEventDispatcher").ShowWindow("RogueJiShiWindow"),Fe("满足以下条件购买技能或者装备可跳关<br>1、已经进入对局<br>2、商店有可替换的装备/技能<br>例如身上有麒麟弓，商店有贯石斧<br>购买完成之后，投降之后会显示替换提示<br>","acTooltip",1e4,"green",!1);};}function Xi(){document.querySelectorAll(".external-link").forEach(t=>{t.addEventListener("click",async e=>{e.preventDefault();const n=t.dataset.url;if(window.WEIDUAN)try{const{shell:r}=require("electron");r.openExternal(n);return}catch{console.warn("Electron API调用失败，回退通用方法");}const i=window.open(n,"_blank");(!i||i.closed)&&es(targetUrl);});});}const es=t=>{const e=`
    <div style="${modal.style.cssText}">
        <p>跳转的网站被您屏蔽了，请手动访问：<a href="${t}" target="_blank">${t}</a></p>
    </div>
`;document.body.insertAdjacentHTML("beforeend",e);};function Bt(t,e,n,i){let r=document.getElementById("myWindow"+e);if(r)return r.style.display="block",r;const a=document.createElement("div");a.classList.add("window"),a.id=e;const s=document.createElement("div");s.classList.add("window-header");const o=document.createElement("div");o.classList.add("title"),o.innerText=n;const l=document.createElement("div");l.classList.add("controls");const c=document.createElement("button");c.innerText="⬜";const f=document.createElement("button");f.innerText="❌",l.appendChild(c),l.appendChild(f),s.appendChild(o),s.appendChild(l);const d=document.createElement("iframe");return d.classList.add("window-content"),d.srcdoc=`
    <html>
      <head><meta charset="utf-8" /><title>${e}</title>
      <style>
        .watermark {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          pointer-events: none; /* 防止干扰交互 */
          z-index: 9999;
          background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='200'><text x='50%' y='50%' font-size='20' fill='rgba(0,0,0,0.1)' transform='rotate(-30, 100, 100)' text-anchor='middle'>${i}</text></svg>");
          background-repeat: repeat;
        }
      </style>
      </head>
      <body><div class="watermark"></div>${t}</body>
     
    </html>
  `,a.appendChild(s),a.appendChild(d),document.body.appendChild(a),{windowDiv:a,maximizeBtn:c,closeBtn:f}}function Dt(t){const{windowDiv:e,maximizeBtn:n,closeBtn:i}=t;let r=!1;n.addEventListener("click",()=>{r?e.classList.remove("fullscreen"):e.classList.add("fullscreen"),r=!r;}),i.addEventListener("click",()=>{e.style.display="none";});}let un=0,fn=0;function ts(){const t=document.getElementById("header"),e=document.getElementById("createIframe"),n=document.getElementById("sidebarHint");let i=!1,r=0,a=0,s=0,o=0,l=!1;const c=u=>{t.style.cursor="grabbing",i=!0,r=u.clientX||u.touches[0].clientX,a=u.clientY||u.touches[0].clientY,e.style.userSelect="none",e.style.willChange="transform",document.addEventListener("mousemove",f),document.addEventListener("mouseup",d),document.addEventListener("touchmove",f),document.addEventListener("touchend",d);};t.addEventListener("mousedown",c),t.addEventListener("touchstart",c);function f(u){if(!i)return;n.style.display="flex";const p=u.clientX||u.touches[0].clientX,m=u.clientY||u.touches[0].clientY,y=p-r,C=m-a;s+=y,o+=C,ae.padding&&(ae.padding=0,e.style.height="500px",window.dispatchEvent(new Event("resize"))),l||(l=!0,requestAnimationFrame(()=>{e.style.transform=`translate(${s}px, ${o}px)`,l=!1;})),window.innerWidth-p<25?n.style.backgroundColor="rgba(55, 40, 32, 1)":n.style.backgroundColor="rgba(55, 40, 32, 0.8)",r=p,a=m;}function d(u){n.style.display="none",t.style.cursor="grab",i=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",d),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",d),e.style.willChange="auto",window.innerWidth-(u.clientX||u.touches[0].clientX)<25&&t.id==="header"&&(ae.padding||(w.closeIframe&&document.getElementById("toggle-me").click(),ae.padding=232,window.dispatchEvent(new Event("resize")),s=0,o=0,e.style.transform=`translate(${s}px, ${o}px)`));}}function qt(t,e){let{name:n,number:i,color:r}=ce[t??0];if(t!==void 0&&(!t||!n||xe.name[n]===void 0))return;let a=te.unknown;(t?[n]:Object.keys(xe.name)).forEach(s=>{let o=a.filter(c=>xe.name[s].has(c)).length,l=document.getElementById(s);l.textContent=o>1?o+s:s,l.disabled=o<=0;}),(t?[5,6].filter(s=>xe.color[s].has(t)).concat(r):[1,2,3,4,5,6]).forEach(s=>{var c;let o=a.filter(f=>xe.color[s].has(f)).length,l=document.getElementById(["","heart","club","spade","diamond","hongsha","heisha"][s]);l.innerHTML=(c=l.innerHTML)==null?void 0:c.replace(/-?[0-9]+/,String(o));}),t?xe.query.has(t)&&xe[t].plot(e==0?0:1):xe.draw();}function ns(){for(let t=1;t<=3;t++)document.getElementById("type"+t).innerHTML="";for(let t of document.getElementsByClassName("order-body"))t.innerHTML="",t.title="一二三四五六七八"[t.id.slice(-1)]??t.title;for(let t in xe.name){let e=document.getElementById("type"+ce[[...xe.name[t]][0]].type),n=document.createElement("button");n.id=t,n.className="cardType",n.innerText=t,n.onclick=()=>{xe.queryone("name",t);},e.appendChild(n);}J.seatUIs=[],wt(),_t();}var is=[1562902854,1678425373];const hn=function(){const t=typeof window.requestIdleCallback=="function";return function(e,n=500){if(t){const i=window.requestIdleCallback(e),r=setTimeout(()=>{window.cancelIdleCallback(i),e();},n);return ()=>clearTimeout(r)}else return setTimeout(e,0)}}();Qt(t=>{const e=w.recGoods[t.secId];if(e&&e.length>0){for(let n of e)kn(t.secId,n.GoodsBaseID,t.openTime,t.levelId,n.ChangeCount);delete w.recGoods[t.secId];}},6e4);function ss(t){var r,a,s,o,l,c,f,d,u,p,m,y,C,S,j,ne,k,D,z,_,Z,ee,ge,be,Se,I,A,V,Y,h,x,v,b,T,E,U;try{if(!t)return;if((r=t.startsWith)!=null&&r.call(t,"socket连接关闭")){an({content:"您的二次密码认证错误，请稍后再试"},"确定");return}if((a=t.startsWith)!=null&&a.call(t,"--checkPlayChatFast msg=INFO:")){let g=atob(t.slice(29,t.indexOf(" soundUrl",29))),[R,W,G,F]=g.split(":").map(X=>isNaN(Number(X))?X:Number(X));if(console.warn(g,{[R]:W,[G]:F}),R=="mainSeatID"){let X=B.order.indexOf(W);X>=0&&(B.order.splice(X,1),B.order.push(W),B.seatUIs()),fe(()=>O.mySeats[0]>=0).then(()=>{var Q,ye;((ye=(Q=O.seatUIs[0])==null?void 0:Q.seat)==null?void 0:ye[G])==F&&B.chat(`sub-SeatID:${O.mySeats[0]}  :${G}:${F}`,"INFO");});}else if(R="sub-SeatID"){let X=B.order.indexOf(W);X>=0&&(B.order.splice(X,1),B.order.splice(-1,0,W),B.seatUIs());}}else if((s=t.startsWith)!=null&&s.call(t,"SwitchScene"))hn(()=>{var R,W;let g=B.scene=t.slice(t.lastIndexOf("-")+1);H.end(Je.includes(g)),ae.skinPaperSwitch&&ft.switch(ae.allPaperSwitch?!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(g):Je.includes(g)),g=="TableScene"?(mi(),w.autoBotSwitch&&ie.delay("auto",()=>Qe(()=>w.autoBotSwitch&&B.readyStart(),20),8e3)):g=="HallScene"?(w.autoBotSwitch===!0||w.autoBotSwitch===28)&&(ue("5秒后开始酒馆自动挂机"),ie.delay("auto",()=>Qe(()=>(w.autoBotSwitch===!0||w.autoBotSwitch===28)&&B.newRoom(),10,1e3),5e3)):["NewPaiWeiScene","DouDiZhu2023Scene","RogueLike1v1Scene","RogueLikeBigMapScene"].some(G=>t.endsWith(G))&&((w.autoBotSwitch===!0||w.autoBotSwitch===28)&&((R=document.getElementById("autoBotSwitch"))==null||R.click()),(w.autoBotSwitch===9||w.autoBotSwitch===29)&&((W=document.getElementById("autoHGSwitch"))==null||W.click()));});else if(ae.skipWindowSwitch&&["TianShuWindow","RogueLike1v1ZhanJiWindow","GameResultWindow","GeneralOpenResultWindow","GameMvpWindow","GameZhanJiWindow","SkinOpenResultWindowNew","OldbackOneClickDrawAwdWin","VersionNoticeWindow","AdPushWindow"].includes(t)){let g=t=="GetPropSpecialWindow"?5:1,R=t=="TianShuWindow"?W=>{var G;return (W==null?void 0:W.type)==6?(W.type=0,(G=W.Close)==null?void 0:G.call(W)):"false"}:t=="GetPropSpecialWindow"?W=>{var G,F;return (G=W==null?void 0:W.Hide)==null||G.call(W),(F=W==null?void 0:W.Close)==null?void 0:F.call(W)}:t=="GameResultWindow"?W=>me(500).then(()=>{var G;return (G=W==null?void 0:W.laterClose)==null?void 0:G.call(W)}):t=="RogueLike1v1ZhanJiWindow"?W=>me(500).then(()=>{var G;return (G=W==null?void 0:W.onClickClose)==null?void 0:G.call(W)}):t=="AdPushWindow"?W=>(W==null||W.curViewList.forEach(G=>{var F;return (F=G==null?void 0:G.closeClicker)==null?void 0:F.call(G)}),ue("小抄已经为你跳过广告和祈愿台出货播报")):W=>{var G;return (G=(W==null?void 0:W.laterClose)??(W==null?void 0:W.Close))==null?void 0:G.bind(W)()};Qe(()=>fe(()=>B.find(null,t),10,200*g).then(W=>Array.isArray(W)?W.every(R):W!=null&&W.Close?R(W):"done"),g,1e3);}else if(ae.skipProbWindowSwitch&&["GetPropSpecialWindow"].includes(t)){let g=5,R=W=>{var G,F;return (G=W==null?void 0:W.Hide)==null||G.call(W),(F=W==null?void 0:W.Close)==null||F.call(W),!0};Qe(()=>fe(()=>B.find(null,t),10,200*g).then(W=>Array.isArray(W)?W.every(R):W!=null&&W.Close?R(W):"done"),g,1e3);}if(w.autoBotSwitch&&["GameResultWindow","GameMvpWindow","GameZhanJiWindow"].includes(t)){let g=t=="GameResultWindow"?R=>me(500).then(()=>{var W;return (W=R==null?void 0:R.laterClose)==null?void 0:W.call(R)}):R=>{var W;return (W=(R==null?void 0:R.laterClose)??(R==null?void 0:R.Close))==null?void 0:W.bind(R)()};Qe(()=>fe(()=>B.find(null,t),10,200).then(R=>Array.isArray(R)?R.every(g):R!=null&&R.Close?g(R):"done"),1,1e3);}else if((o=t.endsWith)!=null&&o.call(t,"View"))t=="VuplexWebView"&&ie.trigger("VuplexWebView");else if((l=t.endsWith)!=null&&l.call(t,"Window"))t=="MailWindow"?Tn():t=="ChangeSkinWindow"?ae.skinSwitch&&fe(()=>B.find("WindowLayer","ChangeSkinWindow","selectView"),50,100).then(g=>{var W,G,F,X;if(!((W=g==null?void 0:g.itemList)!=null&&W.length))return;let R=[(G=g.generalInfo)==null?void 0:G.Id,...((F=g.generalInfo)==null?void 0:F.GeneralSkinParentIDs)||[]];((X=g==null?void 0:g.itemList)==null?void 0:X.length)>1&&g.itemList.forEach(Q=>{Q.dynamicState=R.includes(Q.SkinID/100>>0)?Q.hasSkin?Q.dynamicState?-1:-2:-3:-4,Q.hasSkin=Q.bg.mouseEnabled=!0,Q.blackbg.visible=Q.isUsing=!1,Q.timeBg.visible=Q.composeBg.visible=Q.composeIcon.visible=Q.composeTxt1.visible=Q.composeTxt2.visible=Q.composeTxt.visible=Q.timeLimiteTxt.visible=!1;});}):t=="SkinInfoWindow"?ae.skinPaperSwitch&&ui():t=="BlessNewWindow"?Yt():t=="SelectSkinWindow"?w.autoBotSwitch!=9&&fe(()=>B.find("WindowLayer",t)).then(g=>g==null?void 0:g.Close()):t=="SelectCardWindow"?B.flag&&!(((f=(c=O.seatUIs[0])==null?void 0:c.seat)==null?void 0:f.OnlineState)>1)&&ri(!0,!0):t=="WuGuFengDengWindow"&&B.flag&&!(((u=(d=O.seatUIs[0])==null?void 0:d.seat)==null?void 0:u.OnlineState)>1)?B.wugu():["SelectGeneralWindow","SelectGeneralHappyWindow","SelectCountryWarGeneralWindow"].includes(t)&&w.autoBotSwitch&&setTimeout(()=>{fe(()=>B.find("WindowLayer",t)).then(async g=>{var G,F;if(!((G=g==null?void 0:g.generalUis)!=null&&G.length))return;if(t=="SelectCountryWarGeneralWindow"){for(let X of g.generalUis)X!=null&&X.Card&&(X!=null&&X.CanSelect)&&(g.onClickGeneralCard(X),await me(1e3));await me(1e3),(F=g.confirmBtnEvent)==null||F.call(g);return}let R=-1,W=null;g.generalUis.some(X=>{var ye;if(X!=null&&X.dianJiangSk)return W=X;let Q=((ye=X==null?void 0:X.generalInfo)==null?void 0:ye.quality)||0;Q>R&&(R=Q,W=X);}),W==null||W.sureBtnClick(),w.autoBotSwitch!=9&&setTimeout(()=>W==null?void 0:W.sureBtnClick(),500);});},3e3);else if(t.className===void 0&&!["ClientGeneralSkinReq"].includes((p=t.constructor)==null?void 0:p.name))return;ae.killEffectSwitch&&t.className=="CClientGameRewardPointNTF"&&(t.Type=0);let{ProtoObj:q,className:N,SeatID:re,SrcSeatID:de,targetSeatID:oe,SpellID:L,Param:pe,Params:P,Datas:we,DataCount:as,CardCount:We,CardIDs:K,FromID:_e,FromZone:he,FromPosition:Ie,FromZoneParam:Vt,ToID:qe,ToZone:le,ToPosition:vt,ToZoneParam:Kt,MoveType:ze,Type:Re}=t;if(N||(N=(m=t.constructor)==null?void 0:m.name),!w.userID&&t.userID&&["ClientLoginRep","ClientUserDataCounterNtf","ClinetNetSpeedNtf","SmsgUpdateTaskListToClient","ClientGuildMemberChangeNtf"].includes(N)){if(Object.assign(w,{userID:t.userID,nickname:t.Nickname||w.nickname||"",account:t.Account||localStorage.LastUserName||localStorage.SGS_LASTLOGIN_ACCOUNT||localStorage.SGS_LASTLOGIN_ACCOUNT1||w.account||""}),w.UsedGeneralSkinID=Pe(w.account+"::UsedGeneralSkinID",w.UsedGeneralSkinID),Object.assign(ft.res,Pe(w.userID+"::paperRes",{},!0)),hi(),ae.skipWindowSwitch&&pi(),is.includes(w.userID))return;Promise.all([Hn(),fe(()=>{var ye;ci();const g=B.get("QldjChooseRuleWindow");let{clientId:R,nickname:W,guildID:G,guildName:F,Level:X,vipLevel:Q}=((ye=g==null?void 0:g.seat)==null?void 0:ye.playerInfo)||{};return B.del("QldjChooseRuleWindow"),R!=w.userID||!W||!F&&G?null:(Object.assign(w,{nickname:W,guildID:G,guildName:F,Level:X,vipLevel:Q}),W)},30,1e3)]).then(()=>{ae.autoSignSwitch&&yi(ae.autoSignSkipSwitch),xi(w.userID);let g=document.getElementById("uuid");g.innerText="id："+w.userID,g.onclick=function(){Xe(w.userID,!1),g.innerText="复制成功",setTimeout(()=>{g.textContent="id："+w.userID;},"500");};let R=document.getElementById("nickName");R.innerText="昵称："+w.nickname,R.onclick=function(){Xe(w.nickname,!1),R.innerText="复制成功",setTimeout(()=>{R.textContent="昵称："+w.nickname;},"500");};let W=document.getElementById("guildID");W.innerText="公会数字ID："+w.guildID,Zn(),document.getElementById("inviteName").setAttribute("placeholder",w.nickname||""),Pe("INVITE_NAME")&&Pe("INVITE_NAME")!=w.Nickname&&(document.getElementById("inviteName").value=Pe("INVITE_NAME"));async function G(F=2e4){var ye;let Q=0;for(;!w.nickname||!w.userID;)if(await new Promise(Ze=>setTimeout(Ze,2e3)),Q+=2e3,Q>=F){ue("没办法获取到昵称用于助力 请重新登录");return}vn(((ye=w.inviteName)==null?void 0:ye.trim())||w.nickname);}Date.now()<new Date("2024-12-15")&&ae.autoInviteSwitch&&G();});}if(N=="ClientGeneralSkinRep"){O.mySeats[0]===void 0&&Re==5&&t.ClientID<10&&(O.setMyID(t.ClientID),Ft());let g=t.GeneralSkinList[0],R=O.find(O.mySeats[0],g.GeneralID,!0);if(g.GeneralID!=R&&ae.skinStateBlockSwitch&&(g.state=0),ae.skinSwitch&&R){if([46,479].includes(g.GeneralID)&&Qi(),w.UsedGeneralSkinID.UsedGeneralSkinID[R]){let[G,F]=String(w.UsedGeneralSkinID.UsedGeneralSkinID[R]).split("_").map(X=>parseInt(X));g.SkinID=G,g.skin_type=F||0;}g.state=ae.skinStateSwitch?1:0;const W=B.class("GeneralSkinManager");(W.SelfSkinList.every(({baseInfo:G})=>G.firstUsedEffect!=g.SkinID)||(y=W._GetOnlineSKinList)!=null&&y.call(W,g.GeneralID).every(({skinID:G})=>G!=g.SkinID))&&requestAnimationFrame(()=>{W.generalSkinOwnHT[g.GeneralID]=0;});}}else if(N=="ClientGeneralSkinReq"){if(ae.skinSwitch){let{RealGeneralID:g,SkinID:R,state:W}=t.SkinItem;if(!(W<0))return;W<-2&&(t.SkinItem.SkinID=0),t.SkinItem.state=W<-1?0:1;let[G,F]=String(w.UsedGeneralSkinID.UsedGeneralSkinID[g]).split("_").map(Number);if(G==R)if(R in M.skinSP)R=R+"_"+M.skinSP[R][(F||1)%M.skinSP[R].length];else return;w.UsedGeneralSkinID.UsedGeneralSkinID[g]=R,Ke(w.account+"::UsedGeneralSkinID",w.UsedGeneralSkinID);}}else if(N=="MsgReconnectGame")ue("断线重连，本局游戏中小抄记录可能不准");else if(N=="ClientOfficerInfoRep")w.curOfficerLv=t.curOfficerLv;else if(N=="decodeSSCChatmsgNtf")q.scene==11&&(q.scene=2);else if(N=="ClientRoleGeneralStarRep")ae.generalSwitch&&(t.Star>=0&&(t.Star=4),q.star>=0&&(q.star=4));else if(N=="ClientGameRecordInfoRep")(q==null?void 0:q.query_uid)==w.userID&&[26,35,44,5,7].includes(q==null?void 0:q.id)&&((C=Oe==null?void 0:Oe.req)==null||C.delete(q.id),((S=Oe.req)==null?void 0:S.size)==0&&delete Oe.req,(j=q==null?void 0:q.all_record)!=null&&j.length&&Cn(q.id||0,q.all_record));else if(N=="DbsCcUserGoodshintNtf")Re==2010&&typeof t.GoodsList=="object"&&(w.goods=Si(w.goods,t.GoodsList)),(Re==58||Re==65)&&(ie.delay("tongxin",()=>Yt(),5e3),t.GoodsList.forEach(g=>{xt(g.GoodBaseID)||ue(`恭喜你获得：${M.goodsID(g.GoodBaseID).name}`);})),(Re==2e3||Re==2001)&&t.GoodsList.forEach(g=>{xt(g.GoodBaseID)||ue(`恭喜你获得：${M.goodsID(g.GoodBaseID).name}`);}),Re==5&&typeof t.GoodsList=="object"&&(w.CDKgoods=t.GoodsList);else if(N=="decodeClientSecretInfoRep"){if(Object.keys(w.goods).length>0){M.currentSec=q.secId;for(let g of w.goods)Rn(M.currentSec,g.GoodsBaseID,g.ChangeCount,q.openTime),(g.GoodsBaseID==11180||xt(g.GoodsBaseID))&&kn(q.secId,g.GoodsBaseID,q.openTime,q.levelId,g.ChangeCount);}w.goods=[];}else if(N=="ClientPickupgiftbagRep"&&ae.CDKNotificationSwitch){if(t.CDKey!=""&&!/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]+$/.test(t.CDKey)&&(t.Result==1||t.Result==2)){for(let g of M.CDKDict)if(Ni(g.dataInfo,w.CDKgoods)){g.cdk=t.CDKey,ai(g);break}}}else if(N=="decodeClientTavernInfoRep"){let g=((ne=q==null?void 0:q.tavern_info)==null?void 0:ne.day_quest_finished_cnt)??0;if(w.autoBotStatus=30-g,w.autoBotInfinite||document.querySelector(".status").style.setProperty("--bot-status",`"${w.autoBotStatus.toString().padStart(2,"0")}"`),g>=30){let R=document.getElementById("autoBotSwitch");R!=null&&R.checked&&!w.autoBotInfinite&&R.click(),ue(`今日已获得亲密度：${g}<br>恭喜你完成酒馆任务~`);}else g>0&&ue(`酒馆已获得 ${g} 亲密度<br>今日还可得 ${30-g} 亲密度`);}else if(N=="MsgHeartAliveRep")ie.sync(t);else if(N=="ClientSecKillInfoRep")Oi(t.Data);else if(N=="decodeRogueLikeDataSync")_t(q);else if(N=="ClientActivitysetDataRep")hn(()=>{_t();});else if(N=="decodeRogueLikeGameOverRep")document.getElementById("chongsheng").innerText="重生是否发动：是";else if(N=="SmsgGamePlayerDead")re==O.mySeats[0]&&(w.autoBotSwitch===!0&&!w.autoBotInfinite||w.autoBotSwitch===28&&O.seatUIs.slice(1).every(({ai:g})=>g))&&setTimeout(()=>{var g,R;O.seatUIs.reduce((W,{seat:G,ai:F},X,Q)=>W+(G!=null&&G.figure&&G.figure==Q[0].figure||F<2?1:-1)*(G==null?void 0:G.currentHp),0)<0&&((R=(g=B.gamescene)==null?void 0:g.topMenu)==null||R.onClickBack(),an({title:"退出游戏"},"确定",!0,5e3));},5e3);else if(N=="MsgGameDealCharacter"){if(w.userID==1099193522&&typeof Allows<"u"&&typeof Re<"u"&&Re==1){var e=Math.floor(Math.random()*Allows.length+1);document.getElementById("title").innerText="选"+e;}}else if(N=="GsCUpdateRoleDataNtf")O.mySeats[0]===void 0&&t.StateID===58&&(O.setMyID(re),console.warn(N,"游戏人数："+O.size+", 我的座位："+O.mySeats,O.seatIDs));else if(N=="GsCFirstPhaseRole")re!==void 0&&(O.firstID=re,console.warn("先手位置:"+O.firstID));else if(N=="MsgGameRoundNtf")t.isPassed&&(H.isPassed=t.isPassed);else if(!(N=="MsgGameOver"||N=="ClientRecommendShopItemRep"||N=="ClientLeavetableRep")){if(N=="decodeRougeBaseInfoRep")J.friendGeneral=((k=q==null?void 0:q.friendGeneral)==null?void 0:k.length)??J.friendGeneral;else if(N=="MsgGamePlayCardNtf")H.ready(t.CardList);else if(N=="SmsgGameSetCharacter")O.mySeats[0]===void 0&&O.isDouDiZhu&&t.Infos.length==1&&O.setMyID(t.Infos[0].SeatID),t.Infos.forEach(({SeatID:g,CharacterID:R})=>{O.setGeneral(g,R);});else if(N=="GsCGuoZhanSetCharacter")(D=t.GeneralData)==null||D.forEach(({index:g,cardID:R})=>{O.setGeneral(re,R,g);});else if(N=="MsgGameTurnNtf")H.enter(t.TurnCnt);else if(N=="GsCGamephaseNtf")H.enter(null,t.Round,re);else if(N=="GsCUpdateRoleDataExNtf")H.currentID==re&&t.DataID==1&&Array.isArray(t.Datas)&&(document.getElementById("sha").innerText="可出杀次数："+Math.max(0,we[2]-we[1]),re==O.mySeats[0]&&O.isShanHeTu&&((z=ve.itemId)!=null&&z.includes(2042))&&(we[1]==0&&(ve.previousData=0),ve.sanBanFu+=we[1]-ve.previousData,ve.previousData=we[1],ve.sanBanFu%3==0?document.getElementById("sanBanFu").innerText="三板斧计数器":document.getElementById("sanBanFu").innerText="三板斧计数器："+((Number(ve.sanBanFu)-1)%3+1)));else if(N=="GsCTriggerSpellNew"){if(ae.wuxieSwitch){const g=G=>{var F;return G?`<font color='#FFFF00' href='1|${G}|0|2'>"${(F=M.spellDict[G])==null?void 0:F.name}"</font>`:"未知技能"},R=G=>(F=>F?`<font color='#FFFF00' >${F}${G==O.mySeats[0]?"(你)":""}</font>`:"")(O.name(G,null));let W=(_=t.TriggerSpellData)!=null&&_.length?t.TriggerSpellData:[{}];if(!W.length)return;B.trace("<font color='#00FFFF'>&gt;&gt;</font>"+((Z=W[0])!=null&&Z.SpellId?"":((G,F)=>G&&F?G+"的"+F:G||F)(R(t.SrcSpellCasterSeat),t.SrcSpellID?g(t.SrcSpellID):""))+"<font color='#00FFFF'>&gt;</font>"+(G=>G?"向"+G:"")(R(t.TriggerSeatId))+"询问"+W.map(({SpellId:G,SeatId:F,Targets:X})=>((Q,ye)=>ye?`对${ye}的`:Q?`${Q}的`:"")(F!=t.TriggerSeatId?R(F):"",(X==null?void 0:X.map(R).join(","))||"")+g(G)).join(","));}}else if(N=="ClientHappyGetFriendHandcardRep")O.find(t.seatId,[7004,2087,3048])&&new te(t.seatId).show(t.Cards);else if(N=="PubGsCUseCard")O.mySeats[0]==re&&rn([t.CardID]),H.currentID==re&&O.find(H.currentID,[7003,2086,3047])&&t.useType==1&&t.fromZone!=1&&!t.isSend?(H.spellSpace[7011]||(H.spellSpace[7011]={count:0,color:new Set}),ce[t.CardID].type!=3&&H.spellSpace[7011].count++,H.spellSpace[7011].color.add(ce[t.CardID].c),document.getElementById("suit").innerHTML="["+H.spellSpace[7011].count+"]"+Array.from(H.spellSpace[7011].color).join("")):H.currentID==re&&O.find(H.currentID,[330,1068])&&t.useType==1&&!t.isSend&&(document.getElementById("suit").innerHTML=ce[t.CardID].cn);else if(N=="PubGsCUseSpell"){if(O.mySeats[0]==re&&K.length==1&&rn(K),L==3324)document.getElementById("chongsheng").innerText="重生是否发动：是";else if(L==2143)H.spellSpace[L]||(H.spellSpace[L]=new Set),K.forEach(g=>H.spellSpace[L].add(ce[g].c)),document.getElementById("suit").innerHTML=Array.from(H.spellSpace[L]).join("");else if([3157,3511].includes(L)&&K.filter(g=>g>0).length!=0&&(de==O.mySeats[0]||w.v))H[L]=K;else if([3193,3185,3138].includes(L)||L==3161)H.phase--;else if(L==3338&&K.length!=0&&w.v&&O.generals[O.mySeats[0]]==573){H.spellSpace[L]||(H.spellSpace[L]=new Set);const g=K[0]+"-"+K[1];H.spellSpace[L].has(g)||(H.spellSpace[L].add(g),console.warn("new combination",H.spellSpace[L]),ie.delay("baichu",()=>Et("新组合"),500));}}else if(N=="GsCRoleOptTargetNtf")if(L==945&&pe==0&&(P==null?void 0:P.length)>0)Di(P.map(g=>ce[g].number),w.v&&re==O.mySeats[0]);else if(L==3440&&O.mySeats.includes(re)&&pe==0&&(P==null?void 0:P.length)>0)Re==28?cn(P.map(g=>ce[g].number),new te(re).cards.map(g=>ce[g.id].number)):cn();else if(L==11003&&pe==0&&(P==null?void 0:P.length)>0&&de!=O.mySeats[0]&&ae.v)document.getElementById("result").innerHTML='<span class="textRes"> 【锻造】<br>'+P.map(g=>ce[g].ncn).join("<br>")+"</span>";else if([7016,7017].includes(L)&&(P==null?void 0:P.length)>0&&(de==O.mySeats[0]||w.v)){H[L]=P.slice();let g=Array.from(new Set(new te(pe).cards.map(({key:Q})=>Q))).sort((Q,ye)=>ye-Q),R=Array.from(new Set(new te(255,1).cards.slice(0,O.isGuoZhan?void 0:2).map(({key:Q})=>Q))).sort((Q,ye)=>ye-Q),{yes:W,no:G}=P.reduce((Q,ye)=>{let{keys:Ze}=se.findKZ(ye);return g.find(It=>Ze.includes(It))!==void 0&&Q.yes.push(ye),R.find(It=>Ze.includes(It))!==void 0&&Q.no.push(ye),Q},{yes:[],no:[]}),F=document.getElementById("result");G.length==2?W=P.filter(Q=>!G.includes(Q)):W.length==1&&(G=P.filter(Q=>!W.includes(Q))),W.length==1||W.length==2?(F.innerHTML='<span class="textRes">【宴戏】'+W.map(Q=>ce[Q].ncn).join("/")+"</span>",H[L]=W.concat(P.filter(Q=>!W.includes(Q)))):F.innerHTML='<span class="textRes">【宴戏】未知</span>';let X=new te(pe).show(H[L][0]).concat(new te(255,1,O.isGuoZhan?Be:Le).show(H[L].slice(-2)));W.length==3?se.pack(X):W.length==1?se.pack(X.slice(1,3)):W.length==2&&(se.pack(X.slice(0,2)),se.pack(X.slice(1,3))),P.forEach(Q=>{F.innerHTML+='<span class="textRes'+(W.length<3&&W.includes(Q)?" textRes":"")+'">'+ce[Q].ncn+"："+[[W,"手牌"],[G,"牌堆"]].filter(([ye,Ze])=>ye.includes(Q)).map(([ye,Ze])=>Ze).join("/")+"</span><br>";});}else [4,5,921,372,811,357,3119,501,3437].includes(L)&&(P==null?void 0:P.length)>0?oe!==void 0&&oe!==255&&new te(oe).show(P):[851,361,774,3310].includes(L)&&pe==0&&(P==null?void 0:P.length)>0?oe!==void 0&&oe!==255&&new te(oe).show(P):L==943&&pe==0&&(P==null?void 0:P.length)==1?new te(255,1).show(P):L==898&&pe==0&&(P==null?void 0:P.length)>2?de!==void 0&&de!==255&&new te(de).show(P.slice(1,P[0]+1)):(L==987||L==988)&&pe==1&&(P==null?void 0:P.length)>2?oe!==void 0&&oe!==255&&(de==O.mySeats[0]||w.v)&&new te(oe).show(P.slice(-P[1])):L==3266&&pe==0&&(P==null?void 0:P.length)>0?oe!==void 0&&(de==O.mySeats[0]||w.v)&&new te(oe,oe==255?1:5).show(P.filter((g,R)=>R%3==1)):L==3483&&pe==1?(P==null?void 0:P.length)>2&&oe!==void 0&&oe!==255?new te(oe).show(P.slice(-P[1])):P[0]>0&&(H[L]=P[0]):(L==7010||L==7011)&&(P==null?void 0:P.length)>0&&oe==255?(H.spellSpace[7009]=P.slice(),(de==O.mySeats[0]||w.v)&&se.pack(new te(255,1).show(P))):L==2900&&Re==28&&O.setGeneral(oe,P[2],P[1],!0);else if(N=="CGsRoleSpellOptRep")L==2022?O.setGeneral(re,we[0],we[1],!0):L==7009?((ee=H[7009])==null||ee.pop(),(ge=H[7009])!=null&&ge.length||new te(255,1).show(we)):L==3336?new te(255,1,Ve).show((be=we==null?void 0:we.slice())==null?void 0:be.reverse()):we.length>0&&L==15&&Re==10&&ti(ce[we[0]].color==1);else if(N=="PubGsCMoveCard"){if(K=K.slice(),We===0||ze===0||le===11||t.isSend)return;if(L==713&&ze==21&&We==K.length-2){let g=K.splice(0,1)[0];K.splice(g,1);}if(K.filter(g=>g>0).length!=We&&K.filter(g=>g>0).length!=0&&(console.error("PubGsCMoveCard error: 明暗牌混合：["+K+"]"),console.error(t),K=[]),he==1&&Ie==Be&&[3208,7011,987,988].includes(L)&&(Ie=Le),he==1&&Ie==Be&&ze==13&&We==1&&(Ie=Le),he==1&&Ie==Be&&le==4&&ze==8&&L==795&&We==1&&(Ie=Le),he==1&&Ie==Be&&le==5&&L==3101&&We==1&&(Ie=Ve),he==1&&Ie==Be&&le==5&&!O.isGuoZhan&&[7016,7017].includes(L)&&We==1&&(Ie=Le),he==1&&le==5&&L==3338&&w.v&&qe==O.mySeats[0]&&ie.delay("baichu",()=>Et("新组合"),500),he==8&&le==5&&L==6||he==5&&le==5){let g=new Set(O.mySeats);g.delete(O.mySeats[0]),console.log(g),!g.has(_e)&&qe==O.mySeats[0]&&ie.delay("mingpai",()=>Et("明牌",K),500);}le==1&&qe==255&&vt==Le&&(K=K.filter(g=>g!=4400&&g!=4401));var n=new te(_e,he,Ie,We,L,Vt),i=new te(qe,le,vt,We,L,Kt);if(le==12||he==12)le!=12?i.add(K.concat(Array(We-K.length).fill(0)).map(g=>new se(g,g,i.zoneID))):he!=12&&he!=0&&n.remove(K,L);else if(he==5&&le==1&&qe==0)i.add(n.remove(K.filter(g=>g>0)).map(g=>g.destroy(0)));else if(he==2&&le==9&&_e==0&&qe==0)H.isGameStart&&!H.isPassed&&se.pack(se.get(0).map(g=>g.destroy()),!1,1),i.set([...i.cards.map(g=>H.isPassed?g.destroy(0):g),...n.cards.map(g=>g.destroy(0))]),n.set([]),qt(),H.isPassed=!1;else if(ze!==255){if(he==1&&le==5&&O.dealCard(qe,K[0]),le==2&&(H.spellSpace[3090]||(H.spellSpace[3090]=new Set),K.forEach(g=>H.spellSpace[3090].add(ce[g].c)),document.getElementById("boTu").innerHTML=Array.from(H.spellSpace[3090]).join("")),(he==5||le==5)&&(qe==((Se=O.mySeats)==null?void 0:Se[0])||_e==((I=O.mySeats)==null?void 0:I[0]))){let g=Array.from(te.shoupai(O.mySeats[0]));le==5?g.push(...K):he==5&&(g=g.filter(G=>!K.includes(G))),g=g.map(G=>ce[G]);const{countType2:R,countSha:W}=[...g].reduce((G,F)=>(F.type===2&&!["乐","兵","闪电"].includes(F.name)&&G.countType2++,["杀","火杀","雷杀","冰杀"].includes(F.name)&&G.countSha++,G),{countType2:0,countSha:0});document.getElementById("result").innerHTML='<span class="textRes">【权道】杀：普通锦囊</span><br><span class="textRes">'+W+"："+R+"</span>";}if([441,3492].includes(L)&&le==8&&ze==6&&Li(K.map(g=>ce[g].number),L==3492&&w.v),L==3033&&he==1&&le==8&&K.filter(g=>g>0).length==1){let g=ce[K[0]].number,R=0,W=0,G=0;te.paidui.forEach(F=>{let X=ce[F].number;X===g?G++:X>g?R++:W++;}),document.getElementById("result").innerHTML='<span class="textRes">【吉占】猜'+(R>W?"大":"小")+'</span><br><span class="textRes">跟'+g+"比，"+R+"张大		"+W+"张小		"+G+"平</span>";}if(L==3329&&_e==H.currentID){let g=ce[K[0]].number,R=te.paidui,W=["无中","洞烛","顺手","过拆","逐近","决斗","南蛮","万箭","出其","水淹","随机","洪荒","同舟","力争","移花"].flatMap(F=>R.filter(X=>{var Q;return (Q=xe.name[F])==null?void 0:Q.has(X)})).reduce((F,X)=>{let Q=ce[X].number;return Q>g?F.g++:Q<g?F.l++:F.e++,F},{g:0,l:0,e:0}),G=["五谷","桃园","火攻","借刀","撒豆"].flatMap(F=>R.filter(X=>{var Q;return (Q=xe.name[F])==null?void 0:Q.has(X)})).reduce((F,X)=>{let Q=ce[X].number;return Q>g?F.g++:Q<g?F.l++:F.e++,F},{g:0,l:0,e:0});document.getElementById("result").innerHTML='<span class="textRes">【和衷】'+(W.g>W.l?"大":W.g<W.l?"小":G.g>G.l?"大":G.g<G.l?"小":"平")+'</span><br><span class="textRes">'+W.g+"."+G.g+"大		"+W.l+"."+G.l+"小</span>";}else L==3488&&he==5&&le==5&&ze==21&&K.filter(g=>g>0).length==1?(H[L]||(H[L]={}),H[L][_e]=K.find(g=>g>0)):L==3488&&he==5&&le==10&&ze==11&&K.filter(g=>g>0).length==0?(K[0]=((A=H[L])==null?void 0:A[_e])||0,H[L].stack=K[0]):L==3488&&he==10&&(le==1||le==2)&&ze==11&&K.filter(g=>g>0).length==0&&(K[0]=((V=H[L])==null?void 0:V.stack)||0,(Y=H[L])==null||delete Y.stack);if([3157,3511].includes(L)&&he==2&&le==5&&We==((h=H[L])==null?void 0:h.length)&&K.filter(g=>g>0).length==0&&H[L].forEach((g,R)=>K[R]=g),L==3543&&he==2&&le==1&&K.filter(g=>g>0).length==0&&K.splice(0,1/0,...new te(255,2).cards.map(g=>g.id).filter(g=>[1,2].includes(ce[g].color)).reverse().slice(0,We)),[7016,7017].includes(L)&&le==5&&We==1&&(de==O.mySeats[0]||w.v)&&(K[0]&&((x=H[L])!=null&&x.includes(K[0]))?H[L].splice(H[L].indexOf(K[0]),1):he==5||((v=H[L])==null?void 0:v.length)==2||((b=H[L])==null?void 0:b.length)==1?K[0]=((T=H[L])==null?void 0:T.shift())||0:O.isGuoZhan),_e==qe&&he==le&&(Ie==vt||le!=1)&&(Vt==Kt||le!=4))n.show(K);else if(L==3208&&he==10&&le==5&&K.filter(g=>g>0).length===0)n.pos=Ve,se.pack(n.cards.slice(0,n.length-1)),i.add(n.remove(K));else if(L==3483)if(he==10&&le==10)K.filter(g=>g>0).length===0&&(n.pos=Ve,i.pos=Le),i.add(n.remove(K));else if(he==1&&le==10&&Ie==Be)H[L]&&se.pack(n.cards.slice(0,H[L])),K.filter(g=>g>0).length==0&&(n.pos=Ve),i.add(n.remove(K));else if(he==5&&le==10)H[L]=i.add(n.remove(K));else if(he==10&&le==1&&Ie==Be){if(K.filter(g=>g>0).length==0&&((E=H[L])==null?void 0:E.length)==We&&H[L].every(g=>n.cards.includes(g))){let g=H[L].flatMap(W=>n.cards.splice(n.cards.indexOf(W),1));se.pack(i.add(g));let R=g.map(W=>W.key);R.every(W=>W>0)&&K.splice(0,We,...R);}else i.add(n.remove(K));delete H[L];}else i.add(n.remove(K));else if(L==780&&he==5&&Ie==Be&&We==1)if(le==5&&_e==H.currentID)H[L]=i.add(n.remove(K))[0];else if(le==1&&_e!=H.currentID&&n.cards.includes(H[L])){let g=(U=i.add(n.cards.splice(n.cards.indexOf(H[L]),1))[0])==null?void 0:U.key;g>0&&K.filter(R=>R>0).length==0&&(K[0]=g),delete H[L];}else i.add(n.remove(K));else i.add(n.remove(K,L));}}}}catch(q){console.error(q);}}function pn(){let t=Array.prototype.slice.call(arguments);try{return t[0]==="INIT"?ji():t[0]==="EXIT"?qi():ss(t[t.length-1])}catch(e){console.error(e.message),console.error(e.stack);const[,n,i]=e.stack.match(/(\d+):(\d+)/);console.error("Line:",n),console.error("Column:",i),ue("小抄GG了，联系作者解决");}}typeof SGSMODULE<"u"&&(Object.defineProperty(window.console,"log",{get(){return console.info},set(){}}),window.SGSMODULE.forEach(t=>t("EXIT")),delete window.SGSMODULE);console.info("%c三国杀打小抄","font-weight: bold; color: white; background-color: #525288; padding: 1px 4px; border-radius: 4px;");window.SGSMODULE=[];Object.defineProperty(window.console,"log",{get(){return function(...t){(window._debug||window.isLogAllClass)&&console.debug(...t),window.SGSMODULE.forEach(e=>e==null?void 0:e(...t));}},set(){}});pn("INIT").then(t=>{t&&window.SGSMODULE.push(pn);});

})();