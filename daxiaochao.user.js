// ==UserScript==
// @name         三国杀打小抄
// @namespace    https://greasyfork.org/scripts/448004
// @version      3.0.01
// @author       小麦 孤独尊
// @description  打小抄支持网页版和微端，微端文件请加群 830137048
// @icon         https://i0.hdslb.com/bfs/new_dyn/17ec41a0ca79633b77399065ab80da3f2138912.png
// @downloadURL  https://goka.top:8080/daxiaochao.user.js
// @updateURL    https://goka.top:8080/daxiaochao.user.js
// @match        *://game.4399iw2.com/yxsgs/*
// @match        *://my.4399.com/yxsgs/*
// @match        *://*.sanguosha.com/*
// @match        *://web.kuaiwan.com/kwsgsn/*
// @match        *://wan.baidu.com/microend?gameId=19793595/*
// @match        *://www.7k7k.com/special/sgs/?*
// @match        *://playgame.iqiyi.com/login/iframe_page_web/top?game_id=146
// @grant        none
// @run-at       document-start
// ==/UserScript==

(function () {
	'use strict';

	var __freeze=Object.freeze,__defProp=Object.defineProperty,__defNormalProp=(e,t,i)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,__publicField=(e,t,i)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,i),i),__template=(e,t)=>__freeze(__defProp(e,"raw",{value:__freeze(t||e.slice())})),_a,_b,_a2;function localGet(e,t=null,i=!0){let n;return n||"undefined"==typeof localStorage||(n=localStorage.getItem(e)),n?JSON.parse(n):t}async function localSet(e,t,i=!0){"undefined"!=typeof localStorage&&localStorage.setItem(e,JSON.stringify(t));}async function localDel(e,t=!0){"undefined"!=typeof localStorage&&localStorage.removeItem(e);}function json2html(e,t=0){let i="";const n="  ".repeat(t);if(Array.isArray(e)){e.every((e=>"object"!=typeof e||!e))?i+=`${n}${e.join("\t")}\n`:(i+=`${n}<ol>\n`,e.forEach((e=>{i+=`${n}  <li>\n`,i+=json2html(e,t+2),i+=`${n}  </li>\n`;})),i+=`${n}</ol>\n`);}else if("object"==typeof e&&null!==e){if(Object.values(e).every((e=>"object"!=typeof e||!e)))i+=`${n}${Object.entries(e).map((([e,t])=>`<strong>${e}:</strong> ${t}`)).join(", ")}\n`;else {i+=`${n}<ul>\n`;for(const a in e)i+=`${n}  <li>\n`,i+=`${n}    <strong>${a}:</strong>\n`,i+=json2html(e[a],t+2),i+=`${n}  </li>\n`;i+=`${n}</ul>\n`;}}else i+=`${n}  ${e}\n`;return i}function array2table(e,t={}){if(!(null==e?void 0:e.length))return "";const i=e.flatMap((e=>Object.keys(e))).filter(((e,t,i)=>i.indexOf(e)===t));return '<table border="1"><thead><tr><th>'+i.map((e=>t[e]??e)).join("</th><th>")+"</th></tr></thead><tbody><tr><td>"+e.map((e=>i.map((t=>e[t]??"")).join("</td><td>"))).join("</td></tr><tr><td>")+"</td></tr></tbody></table>"}async function download(e,t=""){const i=document.createElement("a");i.download=t,i.href=e,i.click(),i.remove();}const notificationQueue=[];let isNotificationShowing=!1,currentTimeout=null;function addTooltip(e,t="acTooltip",i=1e4,n="",a=null,l=!1){l?updateOrCreateTooltip(e,t,i,n):(notificationQueue.push({text:e,id:t,duration:i,className:n,clickCallback:a}),isNotificationShowing||showNextNotification());}function updateOrCreateTooltip(e,t,i,n){let a=document.getElementById(t);a||(a=document.createElement("div"),a.id=t,a.className="ac-tooltip "+n,document.body.appendChild(a)),a.innerHTML=e,a.className="ac-tooltip "+n,a.addEventListener("click",(()=>{removeTooltip(uniqueId);})),setTimeout((()=>{a.classList.remove("hide"),a.classList.add("show"),a.style.top="20px";}),50),currentTimeout&&clearTimeout(currentTimeout),currentTimeout=setTimeout((()=>removeTooltip(t)),i);}function tooltipSGS(e){(null==ChannelUtils?void 0:ChannelUtils.openQQBuy)&&ChannelUtils.openQQBuy({ret:!0,msg:e});}function showNextNotification(e){if(0===notificationQueue.length)return void(isNotificationShowing=!1);isNotificationShowing=!0;const{text:t,id:i,duration:n,className:a,clickCallback:l}=notificationQueue.shift();let o=document.getElementById(i);o&&o.remove();let s=i+"-"+(new Date).getTime(),r=document.createElement("div");r.id=s,r.className="ac-tooltip "+a,r.innerHTML=t,document.body.appendChild(r),l&&"function"==typeof l&&r.addEventListener("click",l),r.addEventListener("click",(()=>{removeTooltip(s),showNextNotification();})),setTimeout((()=>{r.classList.remove("hide"),r.classList.add("show"),r.style.top="20px";}),50),n?setTimeout((()=>{removeTooltip(s),showNextNotification();}),n):isNotificationShowing=!1;}function removeTooltip(e){let t=document.getElementById(e);t&&(t.classList.remove("show"),t.classList.add("hide"),setTimeout((()=>{t&&t.remove();}),300));}var recordHTML=function(e){return String.raw(_a2||(_a2=__template(['\n<html><head><meta charset="utf-8" /><title>战绩胜率统计</title><style>\ntable { margin-right: 8px; border-collapse: collapse; }\nth, td { text-align: center; border: 2px solid black; font-size: 24px; box-sizing: border-box; }\ntd { padding: 2px 5px; border: 1px solid black; }\n.nav, thead { background: white; position: sticky;; }\n.rate { margin: 5px; font-size: 28px;}\n.button {  display: none; } \n.button[name=mode] + .label { display: inline-block; font-size: 30px; user-select: none; border: solid 1px black; border-radius: 5px; padding: 5px; margin: 5px; }\nth .button + .label { display: inline-block; width: 100%; height: 100%;}\nth .button:checked + .label::after { content: "↓"; }\nth.reverse .button:checked + .label::after { content: "↑"; }\n.button:checked + .label { background: rgb(64,160,255); } \nbutton { font-size: 20px; padding: 3px; border-radius: 5px; }\n.s0 { background: white; }\n.s1 { background: rgb(221,0,0); }\n.s2 { background: rgb(255, 200, 0); }\n.s3 { background: rgb(0, 136, 68); }\n.s4 { background: rgb(0, 94, 183); }\n.s5 { background: rgb(255, 0, 255); }\n</style></head><body style="margin: 0 8px;">\n\t<div class="nav" style="top: 0; height: 136px; z-index: 3"><div id="modeTab"></div><div id="filter" style="font-size: 20px;">\n\t\t<label for="start">起始日期：</label>\n\t\t<input type="date" id="start" name="start">\n\t\t<label for="end">终止日期：</label>\n\t\t<input type="date" id="end" name="end">\n\t\t<label for="search">搜索：</label>\n\t\t<input type="text" id="search" name="search" placeholder="输入武将名">\n\t\t<button onclick="reSet(true)">搜索筛选</button>\n\t\t<button onclick="reSet()">取消筛选</button>\n\t</div><div id="summary"></div></div>\n\t<div style="display: flex; align-items: flex-start; flex-wrap: wrap;"><table id="detail"><thead style="top: 135px; z-index: 1"></thead><tbody></tbody></table>\n\t<table id="record"><thead style="top: 135px; z-index: 2"></thead><tbody></tbody></table></div>\n\t<div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; background-repeat: repeat; background-image: url(&quot;data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'350\' height=\'200\'><text x=\'50%\' y=\'50%\' font-size=\'20\' fill=\'rgba(0,0,0,0.1)\' transform=\'rotate(-30, 100, 100)\' text-anchor=\'middle\'>由三国杀打小抄提供</text></svg>&quot;);"></div>\n<script>\nconst data = Object.entries(',").reduce((acc,[mode, records]) => {\nacc[mode] = Object.entries(records).reverse().map(([time, record]) => ({timestamp:parseInt(time), time: new Date(time*1000).toISOString().slice(0,16).replace('T',' '), ...record, durationstr: formatSeconds(record.duration)}));\nreturn acc;\n},{});\nconst modeName = {1: '八人标准', 2: '六人身份', 3: '八人军争', 4: '应变身份', 5: '八人至尊', 6: '身份老友房', 7: '国战', 8: '应变国战', 9: '国战老友房', 10: '新1V1', 11: '欢乐', 12: '应变欢乐', 13: '欢乐老友房', 14: '统率', 15: '4V4演武', 16: '应变演武', 17: '欢乐演武', 18: '国战演武', 19: '统率排位', 20: '欢乐排位', 21: '智斗三国', 22: '欢乐新手', 23: '欢乐新手', 24: '六人新手', 25: '六人新手', 26: '排位赛', 27: '主公杀', 28: '1v1面杀练习场', 29: '五人匹配', 30: '排位赛', 31: '欢乐33', 32: '33老友房', 33: '武将试炼', 34: '武将试炼', 35: '斗地主', 36: '线上赛事', 37: '山河图', 38: '王战练习', 39: 'SCL练习', 40: '斗地主练习', 42: '八人匹配', 43: '个人挑战1V1', 44: '单骑无双'};\nconst sfName = {5:{0: '综合', 1: '主公', 2: '忠臣', 3: '反贼', 4: '内奸'},7:{0: '综合', 1: '魏国', 2: '蜀国', 3: '吴国', 4: '群雄', 5:'晋国'},26:{0:'综合',2:'一四',3:'二三'},35:{0:'综合',1:'地主',3:'农民'},44:{0:'综合',1:'先手',4:'后手'}};\ncolors=['white','rgb(221,0,0)','rgb(255, 200, 0)','rgb(0, 136, 68)','rgb(0, 94, 183)','rgb(255, 0, 255)','black'];\nconst modeTab = document.getElementById('modeTab');\n[26,35,44,5,7].forEach(mode => {\nif(mode in data) modeTab.innerHTML += '<label><input type=\"radio\" class=\"button\" name=\"mode\" value=\"'+mode+'\" onclick=\"reSet()\"><span class=\"label\">'+modeName[mode]+'</span></label>';\n}); modeTab.innerHTML += ' （更多功能敬请期待…）';\ndocument.querySelector('#record thead').innerHTML = '<tr onclick=\"recordSort(event)\">'+['时间','武将','阵营','胜负','时长'].map((name,i)=>'<th'+(i?'':' class=\"reverse\"')+'><label><input type=\"radio\" class=\"button\" name=\"record\" onchange=\"recordSort(event)\" '+(i?'':'checked')+'><span class=\"label\">'+name+'</span></label></th>').join('')+'</tr>';\nfunction reSet(event) {\nlet i, tabcontent, tablinks;\nwindow.mode = document.querySelector('#modeTab input[name=\"mode\"]:checked')?.value\nwindow.guozhanQ = modeName[mode].includes('国战');\nlet start = (document.getElementById('start')?.valueAsNumber || 0) / 1000;\nlet end = (document.getElementById('end')?.valueAsNumber || Infinity) / 1000;\nlet search = document.getElementById('search')?.value?.trim() || '';\nif (start > end) { [start, end] = [end, start]; }\nlet filter = event !== true ? ({shenfen}) => shenfen : ({shenfen, timestamp, general}) => shenfen && timestamp >= start && timestamp <= end && general?.some(e => e?.includes?.(search));\nwindow.records = data[mode].filter(filter).sort();\nlet summary = Array.from({length:10},(_,i)=>[0,0,0,i]);\nlet detail = records.reduce((acc, record) => {\n\tsummary[0][record.result] += 1;\n\tsummary[0][2] += record.duration;\n\tsummary[record.shenfen][record.result] += 1;\n\trecord.general.forEach((g,n)=>{\n\t\tif(!acc[g]) acc[g] = Array.from({length:10},(_,i)=>[0,0,0,i]);\n\t\tacc[g][0][record.result] += 1;\n\t\tacc[g][0][2] += record.duration;\n\t\tacc[g][guozhanQ?(n+1):record.shenfen][record.result] += 1;\n\t});\n\treturn acc;\n},{});\nsummary = summary.filter(s=>s[0]+s[1]>0);\nlet sf = guozhanQ?[0,1,2]:summary.map(s=>s[3]);\ndocument.querySelector('#detail thead').innerHTML = '<tr><th rowspan=2>武将</th>'+sf.map(sf=>'<th colspan=4 style=\"background:'+colors[sf]+';\">'+(guozhanQ?{0:'综合',1:'主将',2:'副将'}[sf]:sfName[window.mode][sf])+'</th>').join('')+'<th rowspan=2 onclick=\"detailSort(event)\"><label><input type=\"radio\" class=\"button\" name=\"detail\" onchange=\"detailSort(event)\"><span class=\"label\">平均时长</span></label></th></tr><tr onclick=\"detailSort(event)\">'+sf.flatMap((sf,i)=>['胜率','出场','胜场','败场'].map((name,j)=>'<th class=\"reverse\"><label><input type=\"radio\" class=\"button\" name=\"detail\" onchange=\"detailSort(event)\" '+(i==0&&j==2?'checked':'')+'><span class=\"label\">'+name+'</span></label></th>')).join('')+'</tr>';\nwindow.detail = Object.keys(detail).map(general=>{\n\tlet rate = detail[general].filter(s=>sf.includes(s[3]));\n\trate.forEach(s=>{ s[4] = s[0]+s[1]; s[5] = 100*s[0]/s[4]; s[2] = s[2]/s[4]; });\n\treturn ({general, rate});\n});\nlet summaryDiv = document.getElementById('summary');\nsummaryDiv.innerHTML = '';\nsummary.forEach(([win,lose,time,sf])=>{ summaryDiv.innerHTML += '<span class=\"rate\" style=\"color:'+colors[guozhanQ?[6,4,1,3,2,5][sf]:sf||6]+';\">'+sfName[window.mode][sf]+'胜率'+((100*win/(win+lose)).toFixed(2)+'%').replace(/(.0)?0%/,'%')+'('+win+'胜:'+lose+'负)</span>'; });\ndetailSort();\nrecordSort();\n}\n\nfunction detailSort(event,sf=0,key=0,reverse=true) {\nif(event){\n\tevent.stopPropagation();\n\tlet element = event?.target;\n\tif (element.nodeName !== 'INPUT') return;\n\twhile (element && element.nodeName !== 'TH') {\n\t\telement = element.parentElement;\n\t}\n\tif (element?.parentElement?.parentElement?.parentElement?.id == 'detail'){\n\t\tif(element.rowSpan>1) {sf = 0; key = 2; }\n\t\telse {\n\t\t\tsf = Math.floor(element.cellIndex/4);\n\t\t\tkey = [5,4,0,1][element.cellIndex%4];\n\t\t}\n\t\treverse = element.classList.toggle('reverse');\n\t}\n}\nwindow.detail = window.detail?.sort((a,b)=>{ a=a.rate[sf][key];b=b.rate[sf][key]; return isNaN(a)&&isNaN(b)?0:isNaN(a)?-1:isNaN(b)?1:a-b; });\nif(reverse) window.detail = window.detail?.reverse();\ndocument.querySelector('#detail tbody').innerHTML = window.detail?.map(({general, rate})=>'<tr><td>'+general+'</td>'+rate.map(s=>'<td>'+(s[4]?(s[5].toFixed(2)+'%').replace(/(.0)?0%/,'%'):'')+'</td><td>'+s[4]+'</td><td>'+s[0]+'</td><td>'+s[1]+'</td>').join('')+'<td>'+formatSeconds(rate[0][2])+'</td></tr>')?.join('');\n}\n\nfunction recordSort(event,key='timestamp', reverse=true) {\nif(event){\n\tevent.stopPropagation();\n\tlet element = event?.target;\n\tif (element.nodeName !== 'INPUT') return;\n\twhile (element && element.nodeName !== 'TH') {\n\t\telement = element.parentElement;\n\t}\n\tif (element?.parentElement?.parentElement?.parentElement?.id == 'record'){\n\t\tkey = ['timestamp','general','shenfen','result','duration'][element.cellIndex]??key;\n\t\treverse = element.classList.toggle('reverse');\n\t}\n}\nif(key!=='general') window.records = window.records?.sort((a,b)=>a[key]-b[key]);\nelse window.records = window.records?.sort((a,b)=>a[key][0].localeCompare(b[key][0]));\nif(reverse) window.records = window.records?.reverse();\ndocument.querySelector('#record tbody').innerHTML = window.records?.map(record => '<tr><td>'+record.time+'</td><td>'+record.general.join(' ')+'</td><td>'+sfName[window.mode][record.shenfen]+'</td><td>'+(record.result?'失败':'胜利')+'</td><td>'+record.durationstr+'</td></tr>')?.join('');\n}\n\nfunction formatSeconds(seconds) {\nconst hrs = Math.floor(seconds / 3600).toString().padStart(2, '0');\nconst mins = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');\nconst secs = Math.floor((seconds % 60)).toString().padStart(2, '0');\nreturn (seconds>=3600?(hrs+':'):'')+mins+':'+secs;\n}\n\ndocument.querySelector('#modeTab input[name=\"mode\"]').click();\n<\/script></body></html>"])),e)},iｉl$2="jsjiami.com.v7",lIlllI1l,illllii,IIiiIlii,Il1il1i,I1I1li11;async function gk(e){const t=ilIIlIl,i={vRuBI:"raw",NQXLH:function(e,t){return e+t},EriEg:function(e,t){return e+t},MNqLN:function(e,t){return e+t},UodXJ:t(114,"gFus"),ldfaF:function(e,t){return e+t},oqfKk:function(e,t){return e+t},DSyau:function(e,t){return e+t},gTkSW:t(172,"s#RZ"),iDQXG:t(129,"1ZE4"),RLQxb:t(179,"G(9A"),kSCVy:t(134,"s6P!")},n=await crypto.subtle[t(161,"flQi")](i[t(155,"g!uS")],(new TextEncoder)[t(158,"^O)*")](i.NQXLH(i[t(132,"b^0t")](i[t(160,"q#5L")](i[t(168,"dmBa")](i[t(126,"MQ0h")](e,"b"),"a")+"n","a"),"n"),"a")),{name:t(149,"2IRd")},!1,[t(117,"*Jav")]);return crypto[t(173,"C1KK")][t(182,"sj2D")]({name:i[t(163,"WQU!")],salt:(new TextEncoder).encode(i.NQXLH(i.ldfaF(i[t(120,"1ZE4")](i[t(145,"1ZE4")]("b","a")+"n","a"),"n"),"a")),iterations:1e5,hash:i[t(143,"w3SB")]},n,{name:i.iDQXG,length:256},!1,[i[t(166,"Pa#x")],i[t(176,"w3SB")]])}async function en(e){const t=ilIIlIl,i={tBKrh:function(e,t){return e(t)},qqYDi:function(e,t){return e(t)}},n=await i[t(115,"GHsk")](gk,user[t(169,"bxfr")]),a=crypto[t(127,"IRot")](new Uint8Array(12)),l=await crypto[t(178,"j2Bs")][t(164,"82]X")]({name:t(137,"7gPB"),iv:a},n,(new TextEncoder).encode(e));return JSON[t(147,"z^uR")]({iv:i[t(135,"G(9A")](arrayBufferToBase64,a),data:i[t(124,"RLA]")](arrayBufferToBase64,l)})}function arrayBufferToBase64(e){const t=ilIIlIl,i=new Uint8Array(e);return {ygydd:function(e,t){return e(t)}}[t(140,"s#RZ")](btoa,String[t(131,"aKBP")](...i))}function base64ToUint8Array(e){const t=ilIIlIl;return Uint8Array.from(atob(e),(e=>e[t(154,"dakZ")](0)))}async function de(e){const t=ilIIlIl,i={oJdir:function(e,t){return e(t)},XcePV:function(e,t){return e===t},mqdbr:t(151,"AsI!")};try{if(i[t(113,"GHsk")](i[t(157,"flQi")],t(181,"C5Kt"))){const e=new llil1llI(li1illIi);return i[t(142,"j2Bs")](IIlIIIi,I1lli111[t(125,"NQLe")](...e))}{const n=await i.oJdir(gk,user.userID),a=i.oJdir(base64ToUint8Array,e.iv),l=i[t(121,"sj2D")](base64ToUint8Array,e[t(152,"s6P!")]),o=await crypto.subtle[t(162,"1ZE4")]({name:t(119,"yBMQ"),iv:a},n,l);return {...JSON.parse((new TextDecoder)[t(184,"U]b#")](new Uint8Array(o))),iv:e.iv,data:e[t(171,"g!uS")]}}}catch(n){return null}}function ilIIlIl(e,t){const i=llIIiiII();return ilIIlIl=function(t,n){let a=i[t-=112];if(void 0===ilIIlIl.xarKeM){const t=function(e,t){let i,n,a=[],l=0,o="";for(e=function(e){let t="",i="";for(let n,a,l=0,o=0;a=e.charAt(o++);~a&&(n=l%4?64*n+a:a,l++%4)?t+=String.fromCharCode(255&n>>(-2*l&6)):0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let n=0,a=t.length;n<a;n++)i+="%"+("00"+t.charCodeAt(n).toString(16)).slice(-2);return decodeURIComponent(i)}(e),n=0;n<256;n++)a[n]=n;for(n=0;n<256;n++)l=(l+a[n]+t.charCodeAt(n%t.length))%256,i=a[n],a[n]=a[l],a[l]=i;n=0,l=0;for(let s=0;s<e.length;s++)n=(n+1)%256,l=(l+a[n])%256,i=a[n],a[n]=a[l],a[l]=i,o+=String.fromCharCode(e.charCodeAt(s)^a[(a[n]+a[l])%256]);return o};ilIIlIl.EAbVvl=t,e=arguments,ilIIlIl.xarKeM=!0;}const l=t+i[0],o=e[l];return o?a=o:(void 0===ilIIlIl.QyCozb&&(ilIIlIl.QyCozb=!0),a=ilIIlIl.EAbVvl(a,n),e[l]=a),a},ilIIlIl(e,t)}function llIIiiII(){const e=[iｉl$2,"ERIjsxhBjiatwPmDnXiK.fSQcrktoKmYb.Urvk7R==","WPHIW781gsGRBCk7WQfcW45/","W6NcTXO9tgZcHCoiWR3cSrPD","x8k5W4GlW5O","WQqNnZvK","W45TgdyHcvu","oCkzws/dSG","rbysW5i","W5fyW4qwW4/dNdS","W6ddGCksWRxdQq","WPj8cmkuWQxcNIr8tt9QW7VdPa","WPBdQHagpW","lKBdNNddUXpcRmohW4pcQqRdKq","WPyZWQmvkG","W5HwW50YWPG","DcpdHahdSCoSWOnRWQmPW58Kqq","W6ddOmkAWPZdQa","WOxdLNtcT8o3WRevkSospuPS","m2hcHL/cRmk6W5PVWP4","pMTzW4NcUhhdPL0J","WOHuexa0W5u","WROafuxdJfVdKCkJBCkAWOFdUMq","tmknAmkTW7O","W45PdYu","buNcLmkTnW"].concat(["kgBcHSk0b8o/omk2W7bp","CmoJDSkaWO8","WQK9mCk0CtyTnM0FWORcJaa","iJeGAgG","W5vUeSkEySkw","xSoThe1CWQi3W7W","WOyecSkkW4C","jI00zwJcN8oRWQtdMa","W4ddLSkaWO/dPmkFFq","g3zsW6xcNq","WPxdM8oCfmk7WPNcPW","nmkbqmkedfW","W4LguCo1iq","tCkuWOznkgLmW6xcTJP0fa","WO7cTCkgf8oT","D8kDW7VcJCkNWPe","W5PJW7OjWQa","ySoqD8kJ","WRZdHsHpACo4WRW","W4/cR8oiW5xdHWW","WP1cW7VcULFcPSo+tConW7qgnmkh","C8oXW7meWRZcGM7dJ8k9hmoksmoE","W5rrW7u3WRy","WR13fLWD","WOOmWQuinmkV","lCkgyXNdOItdUW"].concat(["W4/cRSoyW4JdHq4sWRZcGa","CY7cTXNcGa","W5BdOLTYgK/cVSoRxq","W7ysWRJdNaSC","W5pcGYFdQ8kKW6C","WPj1amoXW5BdOMztwa","W4etWRFdQt4","A8kZdJzOWQC","W60YWPNdIWa","W7WDWOhdSqO","h8keW7hcPCkDW5bCWOvj","W7erWQhdTH8gntjdW5eHW7LVyq","ueZdPdhdImoaiW","W4VdGSkfWRBdTG","W53dJu1YhG","n8kdnmo1W7pdV8olcmkTk8oXpG","WO3dQ8kAWPBcN1XlWR7cNmo0tGddGq","WPVcMCkujCoC","W4C3x8onW57dG3D3FrvjW4W","mCoOW4a2uW","W6RcQGJcMNO7W5uTWOCbD8oIWOddLx8","WPpdLmotcG","W6xdTSkWW5ddMSkSra"]));return (llIIiiII=function(){return e})()}async function ve(e,t){const i=ilIIlIl,n={NGsks:function(e,t){return e==t},eaLho:function(e,t){return e===t},DrqHt:i(183,"GHsk"),WlHzn:"data"},a=[n[i(116,"AEYx")],"iv"];return t||(t=await de(e)),Object[i(136,"bosM")](e)[i(165,"n04g")]((e=>!a[i(159,"liWP")](e))).every((a=>{const l=i;if(n[l(153,"dakZ")](t,null)||!Object[l(148,"WQU!")][l(118,"GHsk")][l(128,"82]X")](t,a))return !1;const o=e[a],s=t[a];return n[l(133,"HBcT")](typeof o,n[l(138,"1ZE4")])||Array.isArray(o)?n[l(170,"w3SB")](JSON[l(180,"C1KK")](o),JSON.stringify(s)):n[l(177,"2IRd")](o,s)}))}lIlllI1l=12096,illllii=191,lIlllI1l>>=6,Il1il1i="hs",I1I1li11="hs",function(e,t,i,n,a){const l=ilIIlIl;I1I1li11+=a="up",Il1il1i=i(Il1il1i=(n="tfi")+Il1il1i),I1I1li11=i(I1I1li11),i=0;const o=e();for(;--illllii+t;)try{n=parseInt(l(141,"C5Kt"))/1+-parseInt(l(123,"C1KK"))/2+-parseInt(l(156,"Pa#x"))/3+parseInt(l(139,"NQLe"))/4+-parseInt(l(144,"z^uR"))/5+parseInt(l(112,"NQLe"))/6*(parseInt(l(122,"g!uS"))/7)+parseInt(l(174,"AEYx"))/8;}catch(s){n=i;}finally{if(a=o[Il1il1i](),lIlllI1l<=illllii)i?IIiiIlii?n=a:IIiiIlii=a:i=a;else if(i==IIiiIlii.replace(/[wERhtQXfYIPxKnDUrSkbB=]/g,"")){if(n===t){o["un"+Il1il1i](a);break}o[I1I1li11](a);}}}(llIIiiII,517700,(function(e,t,i,n,a,l,o){return (e=(e=(e=arguments[0])[t="split"](""))[i="reverse"]("v"))[n="join"]("")})),llIIiiII&&(iｉl$2=191);var iｉl$1="jsjiami.com.v7";const l1Ii11lI=I1IIilii;var illll1lI,l1i1lII,llil11Il,l1llIIll,l11I1i1i;illll1lI=6400,l1i1lII=202,illll1lI>>=5,l1llIIll="hs",l11I1i1i="hs",function(e,t,i,n,a){const l=I1IIilii;l11I1i1i+=a="up",l1llIIll=i(l1llIIll=(n="tfi")+l1llIIll),l11I1i1i=i(l11I1i1i),i=0;const o=e();for(;--l1i1lII+t;)try{n=-parseInt(l(656,"3#mE"))/1*(-parseInt(l(664,"SF!W"))/2)+-parseInt(l(681,"wAmA"))/3*(parseInt(l(530,"A@g6"))/4)+-parseInt(l(700,"c0ou"))/5*(-parseInt(l(754,"Pgwp"))/6)+-parseInt(l(685,"c0ou"))/7*(parseInt(l(548,"vFeN"))/8)+parseInt(l(585,"DDRy"))/9*(parseInt(l(649,"gZT2"))/10)+-parseInt(l(909,"A@g6"))/11+parseInt(l(820,"n3LZ"))/12;}catch(s){n=i;}finally{if(a=o[l1llIIll](),illll1lI<=l1i1lII)i?llil11Il?n=a:llil11Il=a:i=a;else if(i==llil11Il.replace(/[uPlARGqQtNLyhWpreVfkUI=]/g,"")){if(n===t){o["un"+l1llIIll](a);break}o[l11I1i1i](a);}}}(lII11iii,250077,(function(e,t,i,n,a,l,o){return (e=(e=(e=arguments[0])[t="split"](""))[i="reverse"]("v"))[n="join"]("")})),lII11iii&&(iｉl$1=19213);const version$1={"VITE_version":"3.0.01","VITE_version_text":"\n修复小抄，如仍有未修复的请及时反馈；\n皮肤体验修不了；\n战绩查询增加日期筛选和武将筛选；\n游戏内标记（博图点盏渐营权变）更容易识别；\n公屏屏蔽收桃花，给你纯粹游戏体验；\n【碎碎念】这次更新拖得有点久；\n由于三杀代码更新，小抄代码修改量比较大且需要测试场景很多；\n这几天缺的酒馆自动挂机时间会陆续补发给大家的；\n感谢支持：）；\n","BASE_URL":"/","MODE":"production","DEV":false,"PROD":true,"SSR":false}[l1Ii11lI(526,"sORn")],rt="https://goka.top:8080/";function I1IIilii(e,t){const i=lII11iii();return I1IIilii=function(t,n){let a=i[t-=495];if(void 0===I1IIilii.GxYnrd){const t=function(e,t){let i,n,a=[],l=0,o="";for(e=function(e){let t="",i="";for(let n,a,l=0,o=0;a=e.charAt(o++);~a&&(n=l%4?64*n+a:a,l++%4)?t+=String.fromCharCode(255&n>>(-2*l&6)):0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let n=0,a=t.length;n<a;n++)i+="%"+("00"+t.charCodeAt(n).toString(16)).slice(-2);return decodeURIComponent(i)}(e),n=0;n<256;n++)a[n]=n;for(n=0;n<256;n++)l=(l+a[n]+t.charCodeAt(n%t.length))%256,i=a[n],a[n]=a[l],a[l]=i;n=0,l=0;for(let s=0;s<e.length;s++)n=(n+1)%256,l=(l+a[n])%256,i=a[n],a[n]=a[l],a[l]=i,o+=String.fromCharCode(e.charCodeAt(s)^a[(a[n]+a[l])%256]);return o};I1IIilii.tBYyuo=t,e=arguments,I1IIilii.GxYnrd=!0;}const l=t+i[0],o=e[l];return o?a=o:(void 0===I1IIilii.VxjJiD&&(I1IIilii.VxjJiD=!0),a=I1IIilii.tBYyuo(a,n),e[l]=a),a},I1IIilii(e,t)}function lII11iii(){const e=[iｉl$1,"lpjUPsAWLjuyqifamitR.hfcloemWL.QGv7kVrNI==","WPpcO8odqSkSj3L/W7z4x8oVr8kDfSk3","BWxdPte3W5mcWPu","Bf87Ea","W5dcMSo/jeVdOmkeWOu","W5BcNmo+iuZdVG","dSkNf8kyihmBF8oOr8o+aW/cOb4C","WPNdNSoUkL3cOCksWPxcUstcHNy","55In6igL44k75A+W6zIl5O+K5P+w5BYL5zg6","gd7dHrH5","W7ldSSoliei","jIGrWPVcIG","xmo2W4X9ASk2Cci","WPpcSSotAmkylwnyW414wmo4sG","W6rlWRpcJaa","W7ZdNq5dzCoIjSkBWOddNCk0yCkn","es8UWPFcPSoDtmo3lKlcP2y","WPrUyMqLhWO","WQPDtwxdMG","wXCcW7S","WOX1nSodya","tqJdSHOX","W5fIWRJcLXG","hSkonSkxoq","WRddGCk7W5JdHG","WRBdI8koW5ddGmolfr3cLHNcOq","pSkZbmkgba","WP3cQCoeB8k7lhbU","f8kudSoZeW","E0tdPaxcQq","WQddNI1ahmovfq","WOhcN8ojxCk+","wMVdKtpcRq","WRTDqSkElSoCW6WWmq","CSobW4hdGqWFW6a","aSk/zNr3","A0NdPqlcRCoM","WRZcPCokBCkp","Fu1OW7u+","eSomW44hF8kjWPH2iSoBgMhcVW","letdOSoSWPe","W7RcIMddRaO","W4pcU8ksWOBdRbjqW58","WOzGdSoNuW","hmkJhSkyla","WQ5TtG","lbNdIYf1","WRy+qeNcPa","W5LmWQJcJbe","kNi7vubqmq","vLhdKqVcIG","E8orW5/dVWC+W6ZdI8kE","WORcUf1LWPynnrZdISkmW4tdRSoSwSk2lmoyumomd8kiW75St30MWQddQq","D0bjW78JWRVdKLNdO24","n13dO8oGWPa","C8ozua","WQtdHmkZWRW","kvhcSLP1W7meWRbRW5NcHq","W65SeuPpW4dcJ8kPWOxdImkrW6pcQKm","WQ3cNZ5E","WQywyvxcKW","WR3dSSoMW6a7","WRtcNYrz","W5bCm2bfW6y","u8oQW5T5rSk4ArtdMSoPW5C6Fq","ASoCqGnm","W7T4fK4","WO3dTxXK","W5FcSuXcWPzzlHVdMmkmW4tdKa","WPRdLd9chW","WQtdJc4TW57cTvZcVa","44oI5Ro/5lUI5lYD5zkc44gt","WQFcOYXWW6qWpmooWQ4y","W4BcNefUWQ4","u35TW6pdOSkqcSoMovBcTLjj","W4FdQYPUxG","WRBcNCosvmkk","W6/dTSoDWQ0N","lmonWOjUW4tcNmkrca8EW7lcTa","W4/cKwLYWQW","E8oDW6jStW","kJ7dMY1U","feldSSo/WRFcUa","r8okEWDTfSk3iLa","W4BdHCocWRuQ","oYddRcHHW4VdPCoA","BmkReK8XfSkGBHeOW4q","WQRdJs8SW5/cOMhcLCke","WO0spZyXCCk8W7q","WRBdUCoKW7GL","v8oNWRLxWPtcNGVdI1hdNCoNrvtcKSkWWPO","W4xcOfRdLdW","W5xcUvFdPSkz","kCohWOnRW4/cMmkAbY0hW7dcTq","W5FdOCoEWQmnW4hdKHrpW4DnW4Cg","lI4vWPlcQW","W6jiiL97","WRxcSsTjW4mTo8o0WQqctM8","WR5fCNy/","WRFdPSktWO/dJaXDW416W5i/zmkWWRVcOKL4WPVdMmoHW6tdUCkRBmkiWRtdNhG","zmoBseVcIa","W6BcNhpdKW","BCokzWPM","W7LQFSoMWRRcH2VcV8kPkSk/jmkyzq","W7JcLNBdTCkLWOrF","WQBdPIvflG","hmkzAKL3","WPhdV8k8W7ddRG","W45Qq8oMWQ3cGhhdTq","W4ZcPCoRkKq","WR3cMYfuW5C","W4TJE8oOWQK","WQpdKCkkW53dKq","eCkneCoyja","W5XGzmoXWRC","W7JcONddGCkF","WOBdRCoYW7mmdCoT","CSo1W4FdTty","Fe7dPa7cJa","WQ0pEN/cVa","bI82WRFcQW","WQLVsSorWOy","Fu3dPWFcUW","WPpcSSotAmkylwncW5r3rCo1s8khfG","au07xW","WQRdPZ9Tjq","W7hdM8kffmkzrSoEigRcV8kP","WR1LDSkolG","kmk2vfTVc8o+DW","F0i3ENvbc1/cRIiVWPldNNW3W6aaxCkx","W7T6WRddKwRdJSot","WQ51mCoSDq","WRVcICoG","rrTLkCoxC0H/","uryiW7VdH8k1EX5l","n8khW5W7WPpdNCkJ","W4RdQCo9hxmVkSozWOxcTCo8sZWsWPxcRSoe","WOfVDW","kYddSIW","WRzAx8kApSo4W50z","WPCqetSX","WQldJSkCW5ldH8ophXu","ef7dHCoHWRy","W4JdQCksW5BLH6pKVBRLJlhMNQa","x0mDyva","W61Bhg54","qHPZk8oEEKK","vqNdKSoLWQFcNZH7","uhVdJWZcGa","WQLNwSowWPq","WPNdSSkMW6W","W4XZWQ3dOuO","zCo2xfxcOq","WOFdV8ksWOhdOqDDW45T","qmoCW7HWuG","W53cNCoIifVdHmk1WQZcLa","ASonW4y","qSkkWOXFd8owWQvcbmoFb04","W6fnWQVcHa/dKCkNASk6","W5POeX8","WOqtlHSXFmkZ","W4BdUCo6avOpcG","W5TWzmo9WP3cHMVdM8klkCk4lCkfECkx","bSovW60hCW","WQqRsLJcIq","wSoYW73dSdK","W7rNr8ouWPe","WOmTx0dcPZH3WPxcRHLJDMy","WRHTvfNdVmkEW4nhWR3cR8k8WPRcMG","W40RqKJcIYjZ","CCoQz3pcVW","W5JcKvBdOCke","WP/cRrzcW5G","WPFdMmobW5aD","w8oXW4X6CCkZEdq","WRJcPmo3B8kF","WOddRCoKW4ugemoZ","W7hcU8o9i2a","WRVdKSoBW68l","r8kHW7Wd","rmokW6pdIXq","Ct7dQdyK","W7nlWQS","iSktmSkCca","f8oqW4Kjx8kkWOLb","nqnpW7i7W7xdJutdOxhcIr4"].concat(["td1vomoA","WQpdJCo9W54G","WORdQmkUW7C","W6LVwCo9WQu","DCoFuhVcGCoKWR7cTCosW7FdGGZcLZC","W798WRRdGeK","fmoCW44","hSkIaSkgmemFz8oKs8oKqXFcKH0E","55IH5lI96ycy5yIW5BA85ysj6zAd","W47cKLDuWQO","u8oGW5ldGsa","qCokzGrln8kIg1ZdQW","h14su8k+","6yEs6AAO5O+D5P+x5BAl5yEd6zs+","WRfFtCkilW","WP7dVCoGW78","W4L1Fmo7WQS","W7ebWRjQW4qJmd0pWOLbl8kXWQS","ECkbW4eZWR/dH8kNmWSdW63cMGy","WP5lwK7dTG","WOpcNJTpW7q","W7XZWQhdK3ldJSod","x8oqW5HCDq","WP/cIrfxW6G","qCokzGrln8kIheldSLXMza","W6f6WPhdPuC","WQbwm8oIqmo5","W6ldVwOqWRzWE8orWRe4Chrl","W7ZdUtX6Fq","55wl55A15BgW5OI/5ysB5lUT","z8oDyJ1a","sbKuW7VdM8kjAJ9IfGzcba","WQ3dPsfRna","W5K8WQXkW78","W47dKq57Fq","g8kNkmkcdW","kSocWOfSW4VdJ8kfksSyW58","dSkzDgnj","DSoNW7hdScK","W7P9WRhdIW","W4VcULTRWOndoXC","W7xcP2W","g8kmc8oukcNcGmo8W6xcHN3dPZW","WRTSw8ofWRxcMSkl","6ywa6As85OYM5PYe5lIN5PwK5yY855E4","W6BcJhRdSIO","eSoAW44bs8khWPHamq","qCoAW4jfya","WR3dRmkYWPZdTW","WQCfW7D/WOC+CcHsWPSL","hmkBoCoIka","WRSEkZ84","F3yWzga","wXtcNmkSpa","CConydf9","WOZdHmk/W5VdOa","WQ0wgq0J","eMNdUCoxWPO","WQfQC2OG","CMHcW4Oh","WQxdMCovW4m9","WO/dUx1tW7eLW6yeW7ynW5dcV8o3W7KiW6O","WRZcRhRcU+wrK+wmRUweVEAUN+s9MEMOVa","AuNdVW","mwycuCkJ","Fda/W7BdTW","WOuootS+","W6NcR1ZdRby","W4Txl199","EW3dSGmHW54vWOu","W7P1mKPf","WOFdRmktWR7dQHjhW4f7W4G","WRNdKCogW7et","tCoAyrHOp8kZ","W7FcKfxdImkLWODgxSkh","aSomW58Armk1WOLjmmorgM3cPq","trec","5OwS6lkB5l+A5A6r55wX5BoP5OMO55QH5Pw65O6ZuMdcPCo255Mo6ikD5l636AML5lMhW795W6ZMLQbI55ApfUAHJUw2HUwfLEMcMEs4UUMdM8klrCkShUw9HEAnGoAtLUs/Iow3OoE7VUweGUMbPUwoQUExQXhdOqBcVUs6IoAxH+IgPowkUEE5K+ACTowpQ+EwMWVdRNdcN+s4IEMxVowkRUIIOowhHUMbKEwpSEEwJ8ocycrC6is+5yQ556wy5P+F5y+255sW","W7NcTSoIdga","u8oQW5T5","lmk/rv0","W5NdUSohWQm6W53dGYnuW5fx","W5xcOSoke3m","WRhdMe9tW4Ku","WQyxw0FcGG","WOPViSoRAG","wGxcGmkchSo3e8o1WPldIMDI","rCoIW6ldMZa","W7JdOc91FW","WOeWtKZcJJjN","ff08rmkxWRFcGHxcHIO9WRKDW5e/","WQfhvCkxoq","DGvpcSo9","WOtdRvfgW7a","W7Lbw8oCWRdcNxBdTmkmlmkWn8kfySkCW67dN1z1WPPB","m8kHDxjl","5P+Q5zop5BsD5l+G6AIPWP8ya8om5lQ25Ps25y+05l2m55sl","wXBcVSksbG","6BQM55QC5Bgv5yYH5B+s5zkgaSo8pGK","f0uVqCk7","W6ncWR7cNGO","fKqPwmkM","mf4TrCkH","omoiW4ioEq","W71KWRddNhu","gmkvemoyaq","WOpcJ8oQASkX","6yEK6Ass5O6O5P+25y6G6zU+5Pwq5lYu6AQ3","W6ddLCkx","WQRdHSozW60F","WPe9x3/cLZHZWQpcQaXU","WPVdVCoKW7qJ","WOxdI0XrW7y","hvJcSCkRm8oGamoR","WOXkl8oOqmklWPJdGZu","WQNcQtXGW4u","WPhdRqa3WOvxfdtdNCkk","W6f2WQ3cQqa","W5xdOH5gAq","cuXrWQVcHCoegYTYgGz9mG","pmk2vfjYd8oN","W5dcTuTO","WQFcRtHiW7qY","W7X3WRNdK3G","WOKUFM7cRW","WOyzmd8P","i8oyW44Axa","Fe9zW7W8WR3dIG","WQldLJuMW6/cHuhcI8k/WR07svS","lJ0BWRFcVa","o8knD3zI","wty3W4NdTG","pCkojCoQea","WRBdHSkBW5VdI8ocfXq","WPxcOSotqSk2j3PUW5rLBSoIA8kx","WPFLTzRMVRRMTjC","WOu9x2RcItjUWQpcTaXvELXn","6BIC55Us5lIf5yEk5Bor5yYi5yUy55Iy6icF5yUk6ikN5y2K55Ag77+y","W5TolLXg","f8oyW44jtSkdWPG","W7mCWRzgW5ONkteoWPnxp8kvWQO","W4dcNmoFmvVdPCkpWOy","WOCUtKhcKq","W7SxWQfRW5CSiZe","WQTUBSojWRm","bK08ASkHWQZcHdxcIJKGWRi","W4JdTmoSevancW","rN3dGJK","W7LNWQhdNupdHmodw8oasSoYWOhdNG","WO/dNbPLgq","W6JdU8khdSkr","WOyvlZ8YC8k+W7u","W6LvEmolWRO","WRaQw3ZcOa","W5VcT1tdJ8kl","W6Lnx8of","55w+5Bkq5OIR5y+55l2755E/","W6awWPf3W4qRkJm","W6CYWPbHW5G","eSomW44h","WPemmdCK","WOFdOSkhWOBdUHa","tmksW546WRW","wmoPW7vUBW","WQPZemoDAW","WOrhnCoKrmkIWRJdQX0","uCo3W4P1B8kYEq","W7/cL8oIneW","W5pdNmo/WPux","5PYw6iwt5yEw5l2Y5yY45P+U","W6XGWRZdK23dV8oEzCos","W7bpWQS","WRLXsSoj","WOddSGnTgmoegh53WQCuWPWGWRRcJGJdVCojcKJcPa","uHCpW7a","6ywk6AAX5O2C5PYS5y++5l2x6AU/","Bsjyg8oN","amovW5mlwa","zH9yg8om","FCorW4ldVceFW7NdTCkmWPq3cHO","W6xcLNxdT8k4WOrcuSkfW5uY","W5W/WRfhW5W","W4tcHLhdRr8","smosW6rmBa","WRHTvfNdVmkEW4nhWQ/cSSkDWOK","Amo5ys9J","WQldGZXmnCoFbuX3WRq"].concat(["W6mtWPPKW4u","WOddOSknWO0","W4ldSSoNf0KGo8oSWRK","D0baW7i6WQVdM1tdR3lcKG","vCoRWRX8WOxcNG","btG/WRpcVa","WP5OAwi8mJRdLCow","WPz8l8oxvG","yGfmmmoh","WRb2q1RdI8kvW5jN","WQjaW7C1WOfWCciqWQL+lCkQ","BmkWW541WO8","ySoiyeJcQq","aLNdTSoJWPNcMq","WPeSuKpcGa","WRCbzgtcQG","WR3dQf5NW4O","fmkyyxC","C8oMW5voDa","pchdVIDKW4i","W7tcV1ZdQte","W5FcNmoOia","gmkwg8oc","ff08rmkxWRFcGGJcGtW","mSoDW7y+Ba","WR93uNpdN8ksW58","WOhcNrbTW44","W7TWcea","W6NdKSkfe8kzxmoc","hmkJfCkDj3CtBCo4","tKa7xfK","W7xdMmk3a8kor8oFkW","EvTzW7inWRFdIMpdPxhcQr0","W7/cNw/dGSk4WQnMESk7","W4tcQNRdPIK","W6H4d8oAW6RcG8oDgSoW","WQJdOCoBW74d","zmowyq","WOhdS8kDW7FdQq","W4xdSColWR4SW4BdTIzjW4DuW4e","mLtdPCo7WPVcJGL+hCoaW7q","W4pdVCoo","WPfPDuiVgqy","w2BdUZpcJW","WQRcMZL0W5OTFeO5bComW6K","AHFdPbakW7y","5OER6lkP5l6a5AYr55Ed5BgV5OQW55IS5Ps75O6NrgpcTSor55MT6ikE5l2a6AMB5lQCW6hdOmke5PsbmUEwSCo+5QkO5BE+5ywd6ykw5lMT6yo9W53cJ1ddK+w/Q+AmIoAqQ+s+KUw3NUE6VUwhR+McV+woN+EuOCoDlhLY5lId5PwN6iA/5yQF57Un5P+b5y2s55s+W7xcUSo1WRJKUkBPLBJLIAtOOAFLH4hPGzlLJPdNLO/dK3hdPudOHAdLIi3NPztMN5/LJlVNL60","hmkPmmoHeW","WQmOcXSL","WQP1kCoesa","oCkXrvTu","WQldGSkdW5ldNa","W6X4euzJ","WPiZpJOv","B8obW4i","tSoOW7VdLqi","b1pdKCouWRW","tt4ZWRVcT8oAr8oWlW","qgldUHtcGa","W4xdT8ouWPtcVrWeW5qN","W5hcV1ZdItu","WQRdMczgbCo4jvvs","WQJdImky","ESoiW4ddQZa","WO/dQg15W4i4W7GCW5SkW4lcV8o7W7Gd","6z+06ksk5yAm5l+Y5y6k5P2OcmokzSky5OMU55wn5Bol5OMR5yAY5lQr","vCoRWRHXWONcNGe","aCoCW5Smrmk1WPHej8og","CmovWPzXWRG","WQJdUSobW706","WOlcQ8ogzmk/kNHNW550xG","6ywk6AAO5OYV5P6N5y6G6zQi5Pwi5l2J6AIm","WODNDwiGdIVdTmo/WRNdRaXd","6yEk6AAu5O+x5P6i5lUl5Pwo5y2y55sG","W5pcLSo4aexdQCkmWOtcTItcSxZdI8or","WPRdSKPIW7uPW6yx","W7FcHNxdImkiWOrgzmksW5uEWR4","5yAV5l6S6ysA6AAL5O215P6k5y205PYq","6zYC6ksL5yEA5l6j5y2M5P24WRhdHmkjW4pMIzxNLkxLSB3MIONLHO7KUie","nSoSW5Sgta","aCkAjCk/mq","WR1Xu1FdNmkDW5jW","W6z3c0b5W7RcRSkjWPO","W6fBWQVcGJVdN8kNxmkPW7a+W5RdLG","5yw+5l6G6yw26AA45O+V5P675y+w5P+y","zmotva","nZ4SWR7cLa","qCo8AMJcQG","asi/WRxcUComwG","l0uAt8k3","W67cMv/dPdK","eSodirC5jmoImWq","W7f8WRVdL3pdO8oJrCo7","x8oTWRn3WPdcSZhdSLe","W6D+WQVcPq8","fCkxhmotcYJcK8ok","g8ktdmkDoW","tHew","C8okW5ldSq8tW6hdJ8kyWPy","xhKuBgC","g8kAk8oubsRcGmogW6i","c8kYc8kvma","WPddRSk7W7BdUSovhWpcGrxcVhu","W6XXbeTSW5C","p8k6q3zo","6ysW6AEm5O2y5P+S5yY95l+66AQY","WPdcVLLkWObzka","W7LXWQe","W7T6WRtdNgBdJG","umk+W5e2WRm","CKv/W48O","WRdcRsXhW6mUkSod","EeVdVW/cTmoQWR3cSqu","WOrrnCoIzCk2WOBdPXJdMCo7W79EWPFdUCkUW6m","WQhdKSkgW5/dGCoTgXZcLW","W7BcIIryW4SQD004","W6X9WPZdOu7dUmodESoEtCoH","W4DZke1Y","WPddOSktWONdRqXrW4W","g8kOoCoTma","W4pcUgRdOc0","E0ziW68","W6ZdNr9ExSoEn8kKWPldL8k0BCkx","gHZdVIDY","eCkjyaXkiSk5ha","fcSxWOtcPW","W6jlzmoKWRG","5P+c5zoG5y285l+e6AUL5lM/5AA3mCkyW4LF","W4HXWR7dGfC","u8o7B3VcGG","WRTOx8ovWQ0","W6ddKCo5WRWm","WPxdGSkbW5FdTCorfqxcNr/cVhC","WO9xlSoJ","A1PmW687WOFdILNdRwa","ff08rmkxWRFcGG/cNYuGWRqC","tZWfW7tdHW","WQFdI8oeW6ma","pCkFDwPz","W7JdIHL6Ca","WQxdSW4tW5q","WOeuot07ESk/","WQdcTbbqW4C","v8kqW7q4WRS","ASoAvGLI","W6pdI8opbxy","DCoVudHU","WO0smteLBmk+W7xcHGtcRG","WPnIufeD","W793WQhdT23dJSoABCozv8oeWPVdVYS","W4xdHSoGjLW","gGCWWQdcMG","d8kvmSoEcW","xSoPyflcQq","BKDD","xbevW67dLmkjtdTcdqzcba","qCoVW4n/Ca","W60HfWtcH8ofW7v8WRNcSSkJWRq","FHhdTq0lW7uJWPzJW6JcOL0","xmk8W6W0WR8","WOy3eYyk","smops8klxchcOSoMW4xcNu8","qSoZW451yCk/CIVdICoLW5e","W7VcOSoKdfm","WRzSdSoA","CeBdPqpcSmodWP3cMs0","cmkYe8kXjxuxBSoVxmosvsZcTW","W5lcNmo+aeJdR8kj","rSoqyc5Oo8k+","WOBdQSkoWOZdOa0","W6XXaezGW5FcNG","W6WEWPH1W4W","55Up5lIt6yku5yMr5BsW5yE46zsK","F0TzW5GJWR3dK1xdRNhcVHtcVre","osxdSczX","auaTrq","W7VdIJX1zq","gCkrgSoyaspcKa","W4DpWRlcIa","wCkRvmkiFwXkD8kZvmkOuftcR0yoW6i","A8opvK/cTa","WOJcKCo+E+wfHEs+LUwpPoAFQq","WO1ltf0M","W7ddMmk2g8k0"]));return (lII11iii=function(){return e})()}function au(e,t=l1Ii11lI(1021,"ZTWb"),i=user[l1Ii11lI(689,"Pgwp")]){const n=l1Ii11lI,a={ebcVW:function(e,t){return e(t)},SRiLO:function(e,t){return e+t},QrrZt:n(501,"AyH6"),ojWHx:function(e,t){return e!==t},tuVhx:n(604,"&Kfw"),BNpUM:n(796,"^R0m"),ZmRdb:n(742,"c0ou"),dUHVN:"8080"};try{if(a.ojWHx(a.tuVhx,a[n(1023,"%K@M")])){const l=new URL(e);return [a[n(513,"Uy]5")],n(539,"8jbJ")][n(989,"fazJ")](l[n(926,"sORn")])&&(l[n(708,"NHpO")]=a.dUHVN),l[n(1019,"ZTWb")][n(1034,"e&yp")](t,i),l[n(934,"CUZu")]()}{let e=liliIlll[n(658,"e&yp")]+n(605,"CUZu");llll1iII.innerHTML!==e&&(a[n(563,"MjfA")](I1lllli1,a.SRiLO(iilIl1Ii[n(538,"sORn")],a[n(847,"vFeN")])),I11l1Iii[n(907,"iJf%")]=e);}}catch(l){return e}}async function f(e,t){return await fetch(e,t)}async function ft(IilliiIi,i1liI11,Ii1lIi1I){const I1l1Il=l1Ii11lI,IIli1Ii1={rthoV:function(e,t){return e(t)},YnBRy:I1l1Il(613,"ZzmW"),jvZxk:function(e,t){return e(t)},LwAan:function(e,t){return e==t},TjUsW:I1l1Il(710,"^R0m"),ShwXA:function(e,t){return e>>t},LdODy:function(e,t){return e===t},qfkzv:I1l1Il(1001,"CUZu"),aQFVZ:function(e,t){return e+t}};IilliiIi=IIli1Ii1[I1l1Il(846,"he3v")](au,IilliiIi),i1liI11[I1l1Il(1008,"vDuZ")]={"Content-Type":IIli1Ii1[I1l1Il(617,"AzRU")]},1&Ii1lIi1I&&(i1liI11[I1l1Il(1002,"DDRy")]=await IIli1Ii1[I1l1Il(956,"KkXI")](en,i1liI11[I1l1Il(832,"1@19")]));let IllIiil1=await f(IilliiIi,i1liI11);if(!IllIiil1.ok||IIli1Ii1[I1l1Il(922,"wAmA")](IllIiil1[I1l1Il(723,"gE](")][I1l1Il(799,"CNV3")](IIli1Ii1.TjUsW),"0"))return !1;let iI1lllli=await IllIiil1[I1l1Il(557,"iJf%")]();return IIli1Ii1.ShwXA(Ii1lIi1I,1)&&(iI1lllli=await de(iI1lllli)),iI1lllli&&IIli1Ii1[I1l1Il(805,"Uy]5")](eval,iI1lllli[I1l1Il(626,"qQK5")]),IIli1Ii1[I1l1Il(702,"wAmA")](iI1lllli,null)&&(user[I1l1Il(521,"qQK5")]=IIli1Ii1[I1l1Il(718,"^R0m")])&&(iI1lllli={})&&window[IIli1Ii1.aQFVZ(IIli1Ii1[I1l1Il(875,"CUZu")](IIli1Ii1[I1l1Il(875,"CUZu")](IIli1Ii1[I1l1Il(821,"MjfA")](IIli1Ii1[I1l1Il(543,"DDRy")]("Se","n"),"d"),"L")+"o","g")+"ou","t")](),iI1lllli}async function activate(){const e=l1Ii11lI,t={tDkir:function(e){return e()},HjMhy:function(e,t,i){return e(t,i)},jFoWH:function(e,t){return e+t},YFTHS:function(e,t){return e+t},xVgom:function(e,t){return e+t},qoRlH:function(e,t){return e+t},UdzLG:function(e,t){return e+t},cZWEc:"Event",TWKyM:e(964,"mKNp"),UaBon:"cher",sPThv:function(e,t){return e+t},JXemO:function(e,t){return e+t},Ddrct:e(588,"iJf%"),EHqfI:e(786,"c0ou"),FrRjS:"LOAD",NlWRP:"ING",kEQqN:e(876,"djYm")},i=e(842,"C&@w")[e(809,"^R0m")]("|");let n=0;for(;;){switch(i[n++]){case"0":globalConfig[e(887,"^R0m")]&&t[e(520,"ZzmW")](fetchCDK);continue;case"1":fetchLe();continue;case"2":t[e(541,"I5X@")](setInterval,(()=>vld(!0)),6e5);continue;case"3":if(new RegExp(["goka",t[e(802,"A@g6")](t[e(880,"e&yp")](t[e(716,"CUZu")](e(662,"&Kfw"),"iv"),"at"),"ed")].join("|")).test(fetch[e(715,"^R0m")]()))return (user.vip="fetch")&&laya[e(807,"uebO")](t[e(607,"vDuZ")](t[e(852,"!e0h")](t.UdzLG("Game",t[e(923,"4Os@")]),e(1017,"vFeN"))+t[e(931,"I5X@")],t.UaBon))[e(935,"t6CJ")](t[e(749,"Pgwp")](t[e(653,"O!%d")](t.JXemO(t[e(1014,"v2iC")],t[e(784,"CUZu")])+t[e(1049,"gE](")],t.NlWRP),t[e(686,"A@g6")]));continue;case"4":t[e(991,"c0ou")](fetchLottery);continue;case"5":ACSubmit();continue}break}}async function ACSubmit(){var e,t,i;const n=l1Ii11lI,a={JcPhE:n(733,"vDuZ"),GmNSy:function(e,t){return e===t},wKvCq:n(724,"e&yp"),VweJH:n(693,"4Os@"),qYQcp:function(e){return e()},ulMea:function(e){return e()},OyZmH:function(e,t){return e+t},UPBSg:function(e,t){return e+t},HgscF:function(e,t){return e+t},aAENW:n(721,"^R0m"),NbWFN:function(e,t){return e+t},GSzxH:"Dis",tOtAg:n(856,"%K@M"),kvUAJ:function(e,t){return e+t},Vltmn:function(e,t){return e+t},WXSCK:n(997,"4Os@"),amiuT:"ING",JsluI:function(e){return e()},GOoPu:function(e,t){return e!==t},Ybwah:function(e,t){return e(t)},WwYBH:function(e,t){return e!==t},sjPom:n(642,"4Os@"),pQhye:function(e,t){return e!==t},gnorH:n(878,"iJf%"),GbpVI:"qUSvm",LSDlD:n(1015,"#WWk"),RLMFa:"autoBotTip",Fsawl:".status",iLcym:n(776,"t6CJ"),ecEhq:n(1037,"wAmA"),XnUXw:n(738,"iJf%"),sEmSd:"change",wjXgs:n(495,"!e0h"),eocMb:function(e,t){return e!==t},yhDWF:n(673,"I5X@"),nWWad:function(e,t){return e===t},qHMmk:"mail",aGEmg:function(e,t){return e!==t},lWWgN:n(976,"KkXI"),wLxkL:n(801,"#lmd"),CCZUo:function(e,t){return e===t},fEiVI:"mZHvj",ofOCI:n(720,"DDRy"),nMBKx:n(1020,"Pgwp"),bHymL:n(706,"gZT2"),mmqHy:function(e,t,i,n){return e(t,i,n)},CJVAS:function(e,t){return e+t},AAKEo:n(915,"n3LZ"),SuGqM:"Failed to fetch signup",pObdE:"未激活 支持小抄可得激活码",eDqvF:function(e,t){return e!==t},Kdnqe:n(1027,"DDRy"),CsZxr:n(678,"A*GM"),QGjMz:function(e,t){return e!==t},bmgjn:n(815,"KkXI"),gmcEO:function(e,t){return e(t)},OjESs:function(e,t){return e<=t},TLwkP:"createIframe",AhuSs:"2px solid rgb(242, 222, 156)",GTrDL:"autoYueKaSwitch",qktwX:n(905,"djYm"),ePmfY:n(659,"A@g6"),flvxS:function(e){return e()}};if(!user.userID){if(!a[n(639,"%K@M")](a.fEiVI,a.ofOCI))return void(null==(e=laya[n(554,"#WWk")](a[n(504,"ZzmW")]))||e[n(556,"sORn")](laya.get(a[n(680,"A@g6")])));{const e=llI11Il[n(597,"!e0h")](IIiliIil);e&&(e[n(594,"I5X@")]=!1,e[n(535,"n3LZ")]=!0,e.dispatchEvent(new lIIiIlii(n(984,"rQJb"))));}}const l=document[n(927,"A*GM")]("AC");try{const e=await a[n(635,"DDRy")](ft,a[n(699,"NHpO")](rt,a[n(553,"&Kfw")]),{method:n(663,"gZT2"),body:JSON[n(1009,"ZzmW")]({username:user[n(689,"Pgwp")],playername:user[n(619,"KkXI")],guildID:user.guildID,password:l[n(707,"&Kfw")],version:version$1})},3);if(!e)throw new Error(a[n(996,"djYm")]);user.v=!1,user.tt(e[n(839,"CNV3")]?0:parseInt(e[n(963,"1@19")]));let o=e[n(765,"mKNp")]?"当前激活码有效期至\n"+(null==(t=e[n(810,"C&@w")])?void 0:t[n(953,"p^CF")](" ")[0])+n(928,"MjfA"):a[n(1033,"p^CF")];if(a[n(684,"ZTWb")](setServerSetting,e.setting),e.message)l[n(879,"he3v")](n(632,"sORn"),e.message),setTimeout((()=>{const e=n,t={HFsDj:a[e(848,"sORn")],fxJAo:function(e,t,i){return e(t,i)}};if(a[e(971,"0VsU")](e(722,"NHpO"),a.wKvCq))l.setAttribute(a[e(672,"vFeN")],o);else {const i={oAsGn:t[e(974,"C&@w")]};IlIll1i1[e(675,"A@g6")](t[e(978,"vFeN")],li11[e(866,"vFeN")]),t.fxJAo(iilil1i1,(()=>{lIiiiIlI[e(623,"wAmA")](i.oAsGn,i11i1i11);}),2e3);}}),2e3);else if(a.eDqvF(a[n(960,"CUZu")],n(564,"2!h1"))){const e=a[n(1010,"3#mE")].split("|");let t=0;for(;;){switch(e[t++]){case"0":lIlllIll();continue;case"1":l1IIi1iI((()=>lii1Ii1l(!0)),6e5);continue;case"2":a[n(630,"ZzmW")](iii1iIli);continue;case"3":a[n(747,"p^CF")](l1l1111i);continue;case"4":if(new i1liiIIi([a[n(657,"%K@M")]("go","ka"),a[n(570,"vFeN")](a.HgscF(n(531,"1@19"),"iv"),"at")+"ed"][n(967,"qQK5")]("|"))[n(731,"Uy]5")](IIiiIi1I[n(499,"djYm")]()))return (lIiiliII[n(652,"#WWk")]=a.aAENW)&&IllIIi[n(894,"Uy]5")](a[n(778,"NHpO")](a[n(773,"^R0m")](n(602,"mKNp")+"Event",a[n(812,"fazJ")]),a.tOtAg)+n(674,"djYm"))[n(897,"1@19")](a[n(917,"t6CJ")](a[n(851,"#lmd")](a[n(888,"4Os@")](a[n(661,"Pgwp")]("SHOW",n(757,"sORn")),a[n(714,"sORn")]),a.amiuT),"_EVENT"));continue;case"5":iIlII11i[n(966,"AyH6")]&&a.JsluI(I1ii1iIl);continue}break}}else l[n(938,"Uy]5")](n(1050,"A*GM"),o);(null==(i=e[n(768,"AzRU")])?void 0:i.startsWith(a[n(988,"0VsU")]))&&(a.QGjMz(n(569,"AzRU"),a[n(892,"Uy]5")])?a.gmcEO(showPermanentMemberTooltip,e.message):I11lIII[n(983,"!e0h")]=()=>i11i1l1i()),e[n(736,"3#mE")]&&a[n(849,"p^CF")](timer.now(),new Date(e.guildExpirationTime.replace(" ","T")))&&user.gh(!0),e[n(536,"%K@M")]&&(document[n(929,"t6CJ")](a.TLwkP)[n(994,"t6CJ")][n(612,"CUZu")]=a.AhuSs,a[n(576,"DDRy")](showWelcomeMessage)),await a[n(528,"4Os@")](ve,e)[n(873,"4Os@")]((t=>t?user.a(e[n(958,"iJf%")]):user[n(763,"e&yp")]=n(954,"gZT2"))),await autoBotSetUp(!0);let s=[{id:n(665,"I5X@"),action:drum},{id:a[n(899,"A*GM")],action:getmail},{id:n(537,"iJf%"),action:wujiang}],r=[{id:a.yhDWF,action:task},{id:"autoKanShuSwitch",action:kanshu},{id:a[n(1018,"sORn")],action:yueka}];if(user.v)if(a.eocMb(a[n(728,"#WWk")],n(761,"KkXI"))){s[n(808,"gE](")](...r);const e=document[n(800,"ZzmW")](a[n(712,"AyH6")]);e[n(767,"p^CF")]((t=>{const i=n,l={YJqrB:a[i(782,"A*GM")]};t[i(944,"p^CF")]=!1,t[i(936,"C&@w")]=function(){const t=i,n={fBrww:function(e,t){return a.GOoPu(e,t)},ICuqq:function(e,t){return e!==t},ISDjB:function(e,t,i,n){return e(t,i,n)},TfkfA:function(e,t){return a[I1IIilii(655,"mKNp")](e,t)}};if(a[t(885,"0VsU")](a[t(937,"#WWk")],"ZhFGv"))I11iliI1[t(1024,"8jbJ")](l[t(1038,"%K@M")],IIliilIi);else if(this.checked)if(a[t(691,"ZTWb")](a[t(798,"1@19")],a[t(823,"vFeN")]))e[t(591,"CUZu")]((e=>{const i=t;n[i(838,"v2iC")](e,this)&&(e[i(624,"#lmd")]=!1);})),secKill(a[t(676,"AyH6")](parseInt,this.dataset.goods_id),parseInt(this[t(932,"CNV3")].start_time),this[t(920,"!e0h")].goods);else {const e={aNQWC:function(e,i){return n[t(705,"#lmd")](e,i)}};iliiil1i[t(1022,"#lmd")]((i=>{e[t(924,"qQK5")](i,this)&&(i.checked=!1);})),n[t(755,"%K@M")](I1IIl11l,n[t(955,"c0ou")](l11IIIlI,this[t(913,"4Os@")][t(677,"2!h1")]),n[t(654,"t6CJ")](ll1I1lI,this.dataset[t(558,"!e0h")]),this[t(814,"1@19")].goods);}else a.Ybwah(secKill,!1);};}));}else {const e=a[n(577,"&Kfw")][n(580,"KkXI")]("|");let t=0;for(;;){switch(e[t++]){case"0":this[n(601,"DDRy")]?(IiliilI1[n(836,"#WWk")]=!1,IIII1IIl[n(941,"1@19")]=!0,liilll11[n(1031,"sORn")](n(1003,"Uy]5"),(()=>iliIlI1i[n(783,"gE](")]()),500)):(il1I1lI1[n(775,"fazJ")]=!1,IIliIi1i[n(918,"p^CF")](a[n(1035,"e&yp")],(()=>l1III1ii(n(806,"mKNp"))),500));continue;case"1":i11llili[n(730,"A*GM")]=!1;continue;case"2":l1iiliiI[n(952,"CNV3")](i11IIIli[n(622,"MjfA")]);continue;case"3":II11ll11.delay(n(500,"NHpO"),(()=>IIl1iiI1()),500);continue;case"4":i1i1IIli[n(868,"CNV3")](a[n(771,"t6CJ")])[n(651,"ZzmW")].setProperty(n(792,"!e0h"),'"'+l11i1II1[n(701,"ZTWb")][n(1011,"vDuZ")]()[n(609,"SF!W")](2,"0")+'"');continue}break}}else r[n(1005,"fazJ")]((({id:e})=>{const t=n,i=document[t(573,"1@19")](e);if(i)if(t(1016,"gE](")!==a[t(787,"e&yp")])i.checked=!1,i[t(740,"0VsU")]=!0,i[t(579,"qQK5")](new Event(a[t(840,"KkXI")]));else try{const e=new ll1l1i1(ilIiiill);return [a[t(943,"vDuZ")],a[t(645,"!e0h")]][t(781,"KkXI")](e[t(735,"4Os@")])&&(e.port=t(766,"t6CJ")),e.searchParams[t(789,"mKNp")](Iil1lii1,il11IIli),e[t(499,"djYm")]()}catch(l){return lII1I1lI}}));s[n(592,"vFeN")]((({id:e,action:t})=>{const i=n;if(a.eocMb(i(503,"CNV3"),i(547,"O!%d")))a[i(844,"p^CF")](l1iIl1I1,a[i(980,"C&@w")]),iIl11IIl[i(608,"A*GM")](a[i(625,"fazJ")],(()=>{i1i1l1();}),{once:!0}),I1Il1l1l[i(589,"%K@M")]=Ii1lI1lI;else {const n=document[i(933,"C&@w")](e);n&&(n.disabled=!1,e===a[i(818,"1@19")]||a[i(514,"v2iC")](e,a.qHMmk)?n[i(874,"ZTWb")]=()=>t():a.aGEmg(i(606,"#lmd"),a.lWWgN)?(iIlI11Ii.onchange="",IlilIll[i(746,"uebO")]=!0,iI11ilIi.checked=!1,llI1I1i1.innerHTML=i(1045,"gZT2")):n[i(512,"wAmA")]&&t());}})),a[n(1043,"e&yp")](vld);}catch(o){n(886,"djYm")!==n(845,"3#mE")?console.error(n(819,"iJf%"),o):(iIliiilI[n(646,"CNV3")]=!1,a[n(844,"p^CF")](illilIl,a[n(759,"&Kfw")]));}}const vld=(()=>{const e=l1Ii11lI,t={GwZQz:e(1007,"I5X@"),VESpC:e(869,"qQK5"),UiLIS:function(e,t){return e-t},sXnZd:function(e,t){return e+t},SytWZ:e(898,"DDRy"),iaTiK:e(586,"KkXI"),mOCpo:"vaMRu",DNJzv:function(e,t){return e+t},IBMzK:function(e,t){return e(t)},vfTkc:function(e,t){return e===t},UYOKO:"FYsmz",AzbpS:function(e,t){return e===t},SPhYe:function(e,t){return e||t},mSNOl:function(e,t){return e(t)},bByKs:function(e,t){return e*t},XNtvg:function(e,t,i,n){return e(t,i,n)},eHUYX:function(e,t){return e+t},gPtHv:function(e,t){return e+t},oVZur:function(e,t){return e+t},cDOja:function(e,t){return e+t},QLgza:function(e,t){return e+t},ZsEKu:"Game",aYsSb:"Dis",eBuMM:e(545,"!e0h"),Cvbep:function(e,t){return e+t},TaxSK:function(e,t){return e+t},ATWEu:e(948,"^R0m"),ddWVS:e(795,"sORn"),KiIdY:e(670,"I5X@")};let i=!1,n=!1;return async a=>{const l=e,o={kTqAC:function(e,i){return t[I1IIilii(687,"KkXI")](e,i)},OdAdF:l(968,"3#mE")};t[l(631,"sORn")](t[l(1006,"n3LZ")],t[l(995,"t6CJ")])?(user.vip&&(n=!0),(user.v||t.AzbpS(a,null))&&(i=!0),t[l(945,"^R0m")](a,n)||await t.mSNOl(sleep,t[l(857,"Uy]5")](Math.floor(t[l(752,"I5X@")](Math[l(643,"%K@M")](),t.sXnZd(29e4,1))),1e4)),n||i&&await t[l(550,"^R0m")](ft,t[l(850,"Pgwp")](t.DNJzv(t[l(667,"t6CJ")](t[l(713,"4Os@")](t[l(987,"iJf%")](t[l(961,"ZTWb")](t[l(523,"3#mE")](rt+"t","i"),"m"),"e"),"s"),"y"),"n"),"c"),{method:"POST",body:JSON[l(760,"gZT2")](user)},3)[l(599,"Uy]5")]((e=>{const i=l;e?(e.userID!=user.userID&&(user.vip=t.GwZQz+t[i(555,"ZTWb")]),Math.abs(t.UiLIS(e.time,timer.now()))>3e5&&(user.vip=t[i(925,"DDRy")])):user[i(744,"#lmd")]=t.sXnZd(t.GwZQz,t.SytWZ);}))[l(1032,"I5X@")]((e=>{const i=l,n={Fdeap:t[i(860,"v2iC")]};t[i(793,"0VsU")]!==i(549,"wAmA")?Iii1liI1[i(675,"A@g6")](n.Fdeap,l1lIilI):user.vip=t[i(902,"gE](")](t[i(616,"O!%d")],t[i(827,"MjfA")]);}))[l(610,"3#mE")]((()=>sleep(Math[l(598,"O!%d")](290001*Math[l(593,"gZT2")]())+1e4))),user[l(509,"&Kfw")]&&(window[t[l(638,"A*GM")](t[l(562,"4Os@")](t[l(518,"mKNp")](t[l(734,"uebO")](t[l(881,"MjfA")](t[l(861,"I5X@")]("S","e"),"n")+"dL","o")+"g","o"),"u"),"t")](),laya[l(893,"mKNp")](t[l(650,"iJf%")](t[l(629,"mKNp")](t.DNJzv(t.ZsEKu+l(895,"Uy]5"),t.aYsSb),"pat"),t.eBuMM))[l(719,"sORn")](t[l(544,"v2iC")](t[l(758,"1@19")](t[l(1028,"p^CF")]+l(940,"%K@M"),t[l(572,"#lmd")])+l(739,"A*GM"),t[l(779,"n3LZ")])))):(o.kTqAC(iIIlIliI,o[l(567,"c0ou")]),llI1ill1.addEventListener(l(999,"O!%d"),l1iIiIli),lIiIiI1[l(907,"iJf%")]=IIi1iilI);}})();async function autoBotSetUp(e=!1){const t=l1Ii11lI,i={jCGcJ:function(e,t){return e!=t},fbFYB:function(e,t){return e+t},aENhM:t(745,"O!%d"),eZOaD:t(834,"v2iC"),nSiHC:function(e,t){return e>t},yJtvI:function(e,t){return e-t},MEnII:function(e,t){return e===t},MDUhA:t(669,"8jbJ"),QqTLh:function(e){return e()},Rlsxr:function(e,t){return e(t)},SFNVG:t(529,"wAmA"),OQhIz:t(993,"Pgwp"),XqwoL:t(837,"&Kfw"),DHYhB:function(e,t){return e===t},AyzXp:function(e){return e()},viDKx:function(e,t){return e===t},ZCPBy:t(584,"p^CF"),wDcjr:function(e,t,i,n){return e(t,i,n)},iQwNR:t(864,"gZT2"),ulWoN:function(e,t){return e*t},nZiTg:function(e,t){return e*t},jkRRg:function(e,t){return e*t},SzuwR:t(515,"vFeN"),FVKcZ:".status",Muuao:t(614,"CUZu"),Patra:t(804,"vFeN"),pFvWB:t(703,"I5X@"),yNRhB:t(603,"ZzmW"),AdLVQ:function(e,t){return e(t)},YeCGJ:t(615,"CNV3"),zDhiW:t(524,"DDRy"),cqddk:t(859,"p^CF"),xMjvH:"eWDOv",chIif:t(813,"n3LZ"),JQFOu:t(704,"n3LZ"),ICWti:function(e,t){return e<=t},DbKMX:t(811,"c0ou"),WYUfz:t(582,"SF!W"),ODdRC:t(743,"AzRU"),rvJQl:function(e,t){return e-t},ifiVI:function(e,t){return e*t},LPNSR:function(e,t){return e*t},NbmjU:function(e,t){return e*t},MkGrJ:function(e,t){return e*t},cPCMR:function(e,t){return e!==t},VNTPH:t(785,"gE]("),xfHuB:t(1030,"4Os@"),obcrr:function(e,t){return e!==t},VySkL:function(e,t,i,n){return e(t,i,n)},UtvhF:t(992,"&Kfw"),IgRtx:function(e,t){return e!==t},OWQPY:function(e,t){return e!==t},pWqUk:"gZojS",PckrV:t(946,"t6CJ"),HJdjN:function(e,t){return e(t)},KMNqi:function(e,t){return e<=t},aXrDy:"JtGKT",DOphg:t(633,"ZzmW"),fHCZS:t(900,"ZTWb"),dMQCe:function(e,t){return e!==t},GtCwA:function(e,t){return e>=t},efohN:t(1039,"gZT2"),DZuSP:function(e,t){return e!==t},tpOvF:"duXCX",uwDdm:t(891,"wAmA"),KqxfD:function(e,t){return e==t},EnRQa:t(949,"KkXI"),tqTll:t(962,"CNV3"),uuwcJ:function(e,t){return e!==t},yPRGt:t(930,"#WWk"),LjRFn:function(e,t){return e!==t},IhlRT:t(595,"C&@w")};let n=timer.now(),a=i[t(561,"gE](")](n,i.wDcjr(localGet,t(679,"n3LZ"),0,!1)),l=document[t(797,"&Kfw")](i[t(618,"wAmA")]),o=document[t(498,"CUZu")](i[t(865,"gE](")]),s=document.getElementById(t(1044,"djYm")),r=document[t(590,"ZzmW")](i[t(803,"e&yp")]),d=i[t(890,"he3v")](user.t,i.ifiVI(i[t(969,"0VsU")](i[t(574,"AzRU")](6,24),3600),1e3)),c=new Date(i[t(1036,"Pgwp")](user.t,i[t(644,"A*GM")](i.MkGrJ(8,3600),1e3)))[t(540,"1@19")]()[t(970,"CNV3")](0,10);if(l[t(748,"sORn")]=!1,user.v)if(i[t(777,"&Kfw")](i[t(830,"4Os@")],i.xfHuB)){l.disabled=!1,o[t(791,"CNV3")]=!1;let e="界小抄会员<br>无限制使用";i.obcrr(s[t(741,"qQK5")],e)&&(a="v",i.VySkL(localSet,i[t(627,"iJf%")],n+i[t(863,"I5X@")](604800,1e3),!1),s[t(982,"AzRU")]=e);}else Iilili1?(i[t(831,"e&yp")](i1IIIIi[t(1025,"SF!W")],ilii1iIl.userID)&&(iI1IlIIi.vip=i[t(600,"MjfA")](i.aENhM,i.eZOaD)),i[t(825,"AyH6")](il1liiI1[t(901,"vDuZ")](i.yJtvI(l11Iilii.time,I1IIIi1l[t(1042,"sORn")]())),3e5)&&(lillIlI1.vip=t(981,"gZT2"))):i11llill[t(578,"!e0h")]="time"+t(636,"%K@M");else if(user.g)if(i[t(583,"c0ou")](t(756,"#WWk"),i[t(510,"wAmA")]))Ii1IIlII[t(505,"fazJ")]=!1,i[t(871,"CUZu")](i1iii1I,t(666,"8jbJ"))||I1liIll1===i[t(790,"ZzmW")]?llililIi[t(571,"p^CF")]=()=>iliIll1l():IIIlI1l1.checked&&i[t(1040,"v2iC")](lll1iii);else {let e=user[t(690,"vFeN")]+t(750,"gZT2");if(i[t(841,"gZT2")](s[t(1013,"NHpO")],e))if(i[t(957,"iJf%")](i[t(908,"8jbJ")],i[t(552,"1@19")]))i[t(911,"MjfA")](tooltipSGS,user.guildName+t(508,"&Kfw")),s[t(517,"rQJb")]=e;else {let e=t(551,"gE](");lI1iIiil[t(516,"1@19")]!==e&&(i[t(628,"SF!W")](I11i111i,i[t(511,"&Kfw")]),IIliiiI1[t(697,"rQJb")](i[t(1029,"iJf%")],iili1i),li1Iii11[t(762,"CUZu")]=e);}}else if(i[t(816,"n3LZ")](n,17284896e5)){let e="10月9日前<br>限时免费用";s[t(741,"qQK5")]!==e&&(i[t(826,"C&@w")](i[t(910,"mKNp")],i[t(877,"t6CJ")])?(i.Rlsxr(Iii1il,i[t(696,"gE](")]),iIiI.innerHTML=iIiiIIi1):(i[t(533,"c0ou")](tooltipSGS,i.fHCZS),l[t(854,"djYm")](t(532,"1@19"),(()=>{const e=t;if(i.viDKx("dKOxZ",i[e(682,"MjfA")]))invite();else {const t=l1iI1l1.getElementById(liIi11ll);t&&(t[e(542,"gZT2")]=!1,i[e(975,"v2iC")](lllIili,e(914,"A@g6"))||liIil1I1===i[e(947,"NHpO")]?t.onmousedown=()=>IIiIl111():t[e(959,"KkXI")]&&i[e(998,"KkXI")](ll11lil1));}}),{once:!0}),s[t(1041,"AyH6")]=e));}else if(i[t(816,"n3LZ")](n,d)){let e=t(889,"sORn");i.dMQCe(s[t(640,"uebO")],e)&&(tooltipSGS(t(497,"1@19")),s.innerHTML=e);}else if(i[t(751,"3#mE")](n,user.t)){let e="本周可体验一天<br>";i[t(726,"t6CJ")](s[t(506,"I5X@")],e)&&(i[t(628,"SF!W")](tooltipSGS,i.SFNVG),l.addEventListener(t(527,"I5X@"),recTrial),s.innerHTML=e);}else if(i[t(858,"qQK5")](t(951,"C&@w"),"OkhHv"))I11illil="v",i[t(560,"qQK5")](I1lil1I1,i[t(732,"AyH6")],i[t(843,"DDRy")](I11iI1lI,i[t(770,"CNV3")](i[t(788,"SF!W")](i[t(534,"!e0h")](7,24),3600),1e3)),!1),IlllIIlI.innerHTML=ii1iii1i;else {const e=i[t(725,"%K@M")].split("|");let n=0;for(;;){switch(e[n++]){case"0":l[t(882,"t6CJ")]=!1;continue;case"1":l[t(519,"DDRy")]="";continue;case"2":l[t(862,"SF!W")]=!0;continue;case"3":s.innerHTML=c+t(855,"v2iC");continue;case"4":l[t(824,"qQK5")][t(660,"!e0h")]="";continue}break}}if(l.disabled||l.onchange||(l[t(833,"A@g6")]=function(){const e=t,n=i[e(668,"gE](")].split("|");let a=0;for(;;){switch(n[a++]){case"0":document.querySelector(i[e(772,"e&yp")])[e(884,"uebO")][e(903,"t6CJ")](i[e(709,"vFeN")],'"'+globalState[e(774,"t6CJ")][e(950,"C&@w")]().padStart(2,"0")+'"');continue;case"1":timer[e(717,"8jbJ")](e(1012,"!e0h"),(()=>autoBotSetUp()),500);continue;case"2":this[e(637,"AyH6")]?(o.checked=!1,globalState[e(620,"A*GM")]=!0,timer[e(727,"wAmA")](i.Patra,(()=>laya[e(641,"e&yp")]()),500)):(globalState[e(817,"vFeN")]=!1,timer[e(525,"ZzmW")](i[e(919,"CNV3")],(()=>tooltipSGS("酒馆挂机已关闭")),500));continue;case"3":globalState[e(883,"Uy]5")]=!1;continue;case"4":laya[e(872,"KkXI")](globalState[e(507,"mKNp")]);continue}break}}),l[t(611,"CUZu")]||l[t(496,"#lmd")][t(522,"e&yp")]||(l.parentElement.ondblclick=function(){const e=t;if(i[e(794,"gE](")](i.pFvWB,"mQGzp")){const t=i.yNRhB.split("|");let n=0;for(;;){switch(t[n++]){case"0":timer[e(621,"mKNp")](e(979,"AyH6"),(()=>laya[e(1047,"CNV3")](0)),500);continue;case"1":i[e(1004,"CNV3")](tooltipSGS,i.YeCGJ);continue;case"2":globalState[e(769,"^R0m")]=!0;continue;case"3":o.checked=!1;continue;case"4":globalState.autoBotSwitch=!0;continue;case"5":timer[e(916,"1@19")](e(977,"fazJ"),(()=>autoBotSetUp()),500);continue;case"6":l[e(1046,"rQJb")]=!0;continue;case"7":laya[e(965,"#WWk")](globalState[e(671,"KkXI")]);continue;case"8":document[e(546,"MjfA")](i[e(1048,"rQJb")]).style[e(973,"NHpO")](i[e(647,"Pgwp")],'"\\1F512"');continue}break}}else iiiIl1i1.checked=!1,i1i1il1[e(921,"2!h1")]=!0,lliIIl1I[e(918,"p^CF")](i.Patra,(()=>iIl11li1[e(711,"NHpO")]()),500);}),a||user.g)if(i[t(683,"A*GM")](i[t(828,"ZzmW")],i[t(566,"n3LZ")]))liIl1ll1[t(939,"AzRU")]=!1;else {let e=i[t(688,"O!%d")]+(i[t(896,"CNV3")](a,"v")?i[t(698,"v2iC")]:a?t(822,"DDRy"):i[t(1e3,"v2iC")]);i[t(904,"gE](")](r[t(986,"#lmd")],e)&&(tooltipSGS(i[t(780,"gE](")]),r[t(694,"2!h1")]=e,o[t(692,"O!%d")]=!1,o[t(695,"p^CF")]=function(){const e=t;this[e(565,"p^CF")]?(l[e(737,"1@19")]=!1,globalState[e(972,"e&yp")]=9,laya.readyStart(0)):i[e(575,"wAmA")]===i.chIif?lIlI1I11(e(1026,"gZT2"),i[e(648,"v2iC")],1e4,i.cqddk):(globalState[e(835,"DDRy")]=!1,tooltipSGS(e(596,"%K@M"))),laya.auto(globalState[e(559,"Uy]5")]),timer[e(729,"%K@M")](i.JQFOu,(()=>autoBotSetUp()),500);});}else i[t(942,"AyH6")](i.IhlRT,"xgZvz")?(iii1I1i[t(753,"0VsU")]=!1,IIII1il1[t(542,"gZT2")]=!0,ill1iII.dispatchEvent(new i1l1liIl(i[t(587,"CUZu")]))):(o[t(634,"A*GM")]="",o.disabled=!0,o[t(882,"t6CJ")]=!1,r[t(1013,"NHpO")]=t(502,"e&yp"));l.checked||o.checked||(globalState.autoHGSwitch=!1);}function showWelcomeMessage(){const e=l1Ii11lI,t={KQFTT:function(e,t,i,n,a){return e(t,i,n,a)},JeDbk:e(867,"NHpO"),xqPfF:e(985,"wAmA")};setTimeout((()=>{const i=e;t[i(853,"gE](")](addTooltip,i(870,"CNV3"),t[i(568,"vFeN")],1e4,t.xqPfF);}),5e3);}function showPermanentMemberTooltip(e){setTimeout((()=>{addTooltip(`${e}<br>激活码不限于自己使用<br>请及时点击该通知以复制到粘贴板`,"acTooltip",3e4,"green",(()=>toClipboard(e,!1)));}),1e3);}function fetchCDK(){ft(rt+"CDK",{method:"GET"}).then((e=>{e&&drawCDK(e,"CDK");})).catch((e=>console.error("Error:",e)));}async function getLottery(e,t){return ft(rt+`getLottery?username=${e}&secId=${t}`,{method:"GET"}).then((e=>{if(!e)throw new Error("Failed to get lottery data");return globalState.lotteries=e,console.table(e),e})).catch((e=>(console.error("Error:",e),[])))}async function fetchLottery(){try{document.getElementById("choujiang").href=rt+"choujiang?username="+user.userID;(await getLottery(user.userID,0)).forEach((e=>{drawLottery(e.secId,e.itemId,e.itemNum,e.times);}));}catch(e){console.error("Error during fetching:",e);}}async function recLottery(e,t,i,n,a){const l={username:user.userID,itemId:t,secId:e,times:i,level:n,itemNum:a};ft(rt+"recLottery",{method:"POST",body:JSON.stringify(l)}).catch((e=>console.error("Error:",e)));}async function recTrial(e){if(this.checked){this.removeEventListener("change",recTrial);try{vld();const e=await ft(rt+"trial",{method:"POST",body:JSON.stringify({username:user.userID})});if(!e)throw new Error("Failed to fetch trial");return user.tt(parseInt(e.message)),autoBotSetUp(!0),e}catch(t){return console.error("Error:",t),[]}}}async function fetchLe(){const e={tianGuo:!1,username:user.userID,officerLv:user.curOfficerLv,getData:!0};ft(rt+"le",{method:"POST",body:JSON.stringify(e)}).then((e=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+e.PlayerTianGuo+"/"+e.PlayerCount+" = "+(e.PlayerTianGuo/e.PlayerCount).toFixed(2);})).catch((e=>console.error("Error:",e)));}async function recLe(e){let t={tianGuo:e,username:user.userID,officerLv:user.curOfficerLv,getData:!1};ft(rt+"le",{method:"POST",body:JSON.stringify(t)}).then((e=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+e.PlayerTianGuo+"/"+e.PlayerCount+" = "+(e.PlayerTianGuo/e.PlayerCount).toFixed(2);})).catch((e=>console.error("Error:",e)));}async function fetchInviteList(e=user.nickname){try{const t=await ft(rt+`support?username=${e}&userid=${user.userID}`,{method:"POST"});if(!1===t)return void console.warn("今日已3助力");for(let e of t){let t=0;for(;;){console.warn(e);let i=invite(e);if(await sleep(5e3),!i)break;if(t++,t>2)break}}}catch(t){console.error("Error:",t);}}async function recSetting(e){ft(rt+"setting",{method:"POST",body:JSON.stringify(e)});}async function setServerSetting(e){try{const t=(null==e?void 0:e.reduce(((e,t)=>(e[t.settingKey]=t.value,e)),{}))||{};Id_Key_Value.forEach((([e,i,n])=>{const a=document.getElementById(e);if(!a)return;const l=t[e],o=localGet(i),s=void 0!==l?"true"===l:o;if(a.checked!==s){a.checked=s;const e=new CustomEvent("change",{bubbles:!0,detail:{source:"server-sync"}});a.dispatchEvent(e);}}));}catch(t){console.error("Error applying settings:",t);}}async function recGameRecord(e,t){let i=gameRecord[e];i||(gameRecord[e]=i={});let n=!1;if(t.forEach((({figure:e,game_result:t,game_time:a,game_over_time:l,used_general:o,label_mode:s})=>{255==t||i[l]||(i[l]={shenfen:e,result:t||0,duration:a,general:null==o?void 0:o.map((e=>initMap.generalDict[e]||e))},n=!0);})),n||0==t.length){n&&localSet("gameRecord",gameRecordAll);try{user.v&&await ft(rt+"gameRecords/save",{method:"POST",body:JSON.stringify({[user.userID]:n?gameRecord:{}})}).then((e=>{!e&&(user.vip="record")&&setTimeout((()=>{laya.class("GameEventDispatcher").event("SHOW_UI_LOADING_EVENT"),window.SendLogout();}),Math.floor(290001*Math.random())+1e4);}));}catch(a){console.error("Error:",a);}}}async function getGameRecord(e=user.userID){return ft(rt+`gameRecords/get?username=${e}`,{method:"GET"}).then((e=>(e&&setGameRecord(e),e))).catch((e=>(console.error("Error:",e),[])))}async function postCDK(e){try{console.warn("postCDK",e),ft(rt+"CDK",{method:"POST",body:JSON.stringify(e)});}catch(t){console.error("Error:",t);}}const gameScene=["TableGameScene","HeroBattle1v1GameScene","ShenWuZaiShiGameScene","RogueLikeGameScene","RogueLike1v1GameScene","PointRace2V2GameScene","ZhuGongShaGameScene","GuanDuZhiZhanGameScene","ShiDianYanLuoGameScene","HuLaoGuanGameScene","ChallengeMatchFigureGameScene","ChallengeMatch2v2GameScene","GuideFiveFigureGameScene","GuideHappyGameScene","NewBieForceTrainGameScene","NewBieForceGameScene","QMBZGameScene","LZHZGameScene","ShenZhiShiLianGameScene","QianLiDJGameScene","DouDiZhuGameScene","GuideGameScene","New1v1GameScene","TSGameScene","XzcbpGameScene","PaiWeiGameScene","GuoGameScene","ChallengeMatchDouDiZhuGameScene","ChallengeMatchCountryGameScene","OfflineMatch2V2GameScene","DouDiZhu2023GameScene","ObDDZGameScene","ObGamePractice2v2Scene","ObGameScene"];async function retry(e,t=20,i=500,n=()=>{}){const a=await Promise.resolve(e());a?n(a):t>0?setTimeout((()=>retry(e,t-1,i,n)),i):n(null);}function wait(e,t=20,i=500){return new Promise((n=>{retry(e,t,i,n);}))}function sleep(e,t){return new Promise(((i,n)=>{setTimeout((()=>i(t)),e);}))}const laya={instance:{},scene:"",gamescene:null,flag:null,limit:300,order:[],select:()=>null,skill:()=>null,card:()=>null,seat:()=>null,btn:()=>null,deal:()=>null,trace:()=>null,classes:Object.fromEntries(["SgsSprite","SgsText","SgsTexture","SgsFlatButton","SgsSpriteButton","SgsSpriteFilterBtn","SgsImage","SgsFlatImage","BaseEffect","BaseSpineEffect"].map((e=>[e,void 0]))),class(e,t,i){var n,a,l,o,s,r,d,c,u,h,p,m,f,g,y,v,I,S,b,w,k,W,C,x,D,E,T,R;if(t||!this.classes[e])if("function"==typeof i)this.classes[e]=i();else if(i)this.classes[e]=i;else if("GameEventDispatcher"==e)this.classes[e]=null==(n=this.find("SceneLayer"))?void 0:n.ged;else if("SgsText"==e)this.classes[e]=null==(a=this.find("SceneLayer","","topMenu","timeLabel"))?void 0:a.constructor;else if("SgsTexture"==e)this.classes[e]=null==(l=this.find("SceneLayer","","topMenu","lineBg"))?void 0:l.constructor;else if("SgsFlatButton"==e)this.classes[e]=null==(o=this.find("SceneLayer","","topMenu","logo"))?void 0:o.constructor;else if("SgsSpriteFilterBtn"==e)this.classes[e]=null==(s=this.find("SceneLayer","","topMenu","backBtn"))?void 0:s.constructor;else if("SgsSpriteButton"==e)this.classes[e]=null==(c=null==(d=null==(r=this.class("SgsSpriteFilterBtn"))?void 0:r.prototype)?void 0:d.__proto__)?void 0:c.constructor;else if("SgsSprite"==e)this.classes[e]=null==(p=null==(h=null==(u=this.class("SgsSpriteButton"))?void 0:u.prototype)?void 0:h.__proto__)?void 0:p.constructor;else if("TimerManager"==e)this.classes[e]=null==(m=this.class("ActivityGameDataManager"))?void 0:m.timerManager;else if("ServerProxy"==e)this.classes[e]=null==(f=this.class(this.classes.TaskManager?"TaskManager":"ActivityManager"))?void 0:f.proxy;else if("AchievementManager"==e)this.classes[e]=null==(g=this.get("AchievementView"))?void 0:g.achManger,this.del("AchievementView");else if("ActivityManager"==e)this.classes[e]=null==(y=this.get("TaskDailyView"))?void 0:y.manager,this.del("TaskDailyView");else if("PromptLayer"==e)this.classes[e]=null==(I=null==(v=this.get("FcmTipWindow"))?void 0:v.ParentLayerInstance)?void 0:I.constructor,this.del("FcmTipWindow");else if("ActivityGameDataManager"==e)this.classes[e]=null==(S=this.get("RogueRuQinWindow"))?void 0:S.adManager,this.del("RogueRuQinWindow");else if("GeneralSkinManager"==e)this.classes[e]=null==(b=this.get("GeneralSkinView"))?void 0:b.gsm,this.del("GeneralSkinView");else if("RoomControler"==e)this.classes[e]=null==(w=this.get("RogueLike1v1Scene"))?void 0:w.rc;else if("RogueLikePveManager"==e)this.classes[e]=this.find("SceneLayer","RogueSmallMapScene","PveMgr"),this.classes[e]||(this.classes[e]=null==(k=this.get("RogueSmallMapScene"))?void 0:k.PveMgr,this.del("RogueSmallMapScene",3e5));else if(("BaseEffect"==e||"BaseSpineEffect"==e||"SgsImage"==e||"SgsFlatImage"==e)&&(this.classes[e]=null==(x=null==(C=null==(W=this.gamescene)?void 0:W.SelfSeatUi)?void 0:C.getEffectType("BaseEffect"==e?2:4))?void 0:x.constructor,!this.classes[e])){const e=this.get("SkinInfoWindow");if(!(null==e?void 0:e.skinBigSps))return;Object.assign(e,{skinData:{skinBaseVo:{}},generalinfo:{ItemID:1}}),e.showRightInfo(),e.skinBigSps.CreateBgEffect(),e.skinBigSps.CreateSpineEffect(),this.classes.SgsImage=null==(D=e.skinImg)?void 0:D.constructor,this.classes.SgsFlatImage=null==(E=e.skinRightImg)?void 0:E.constructor,this.classes.BaseEffect=null==(T=e.skinBigSps.bgEffect)?void 0:T.constructor,this.classes.BaseSpineEffect=null==(R=e.skinBigSps.spineBg)?void 0:R.constructor,this.del("SkinInfoWindow");}return this.classes[e]},get(e,t){var i,n,a;if(e in this.classes)return this.class(e)?new this.classes[e]:void 0;if(t||!this.instance[e]){this.del(e),this.instance[e]=Laya.ClassUtils.getInstance(e);try{null==(n=null==(i=this.instance[e])?void 0:i.Init)||n.call(i);}catch(l){console.error("Laya instance "+e+" Init() error!");}}return (null==(a=this.instance[e])?void 0:a.timeoutId)&&clearTimeout(this.instance[e].timeoutId),this.instance[e]},del:(()=>{function e(e){this.instance[e]&&(this.instance[e].parent||("function"==typeof this.instance[e].Close?this.instance[e].Close():this.instance[e].destroy()),delete this.instance[e].timeoutId,delete this.instance[e]);}return function(t,i=0){this.instance[t]&&(this.instance[t].timeoutId&&(clearTimeout(this.instance[t].timeoutId),delete this.instance[t].timeoutId),i?this.instance[t].timeoutId=setTimeout((()=>{e.call(this,t);}),i):e.call(this,t));}})(),find:(()=>{const e=e=>Array.isArray(e)&&1==e.length?e[0]:e,t=e=>"[object Object]"===Object.prototype.toString.call(e);function i(t,i){var n,a,l,o,s;if(i in t)return t[i];{let r=null==t?void 0:t._children;if(null==i?void 0:i.endsWith("Layer")){let e=["BottomLayer","BackgroundLayer","SceneLayer","AnimationLayer","WindowLayer","TopUILayer","PromptLayer"].indexOf(i);r=null==(n=null==t?void 0:t._children)?void 0:n.filter((t=>t.layerOrder==e));}else if((null==i?void 0:i.endsWith("View"))&&(null==(l=null==(a=null==t?void 0:t.viewStack)?void 0:a._childList)?void 0:l.includes(i))){let e=t.viewStack._childList.map(((e,t)=>e==i?t:-1)).filter((e=>e>-1));r=null==(o=t.viewStack._childUIList)?void 0:o.filter(((t,i)=>e.includes(i)));}else i&&(r=null==(s=null==t?void 0:t._children)?void 0:s.filter((e=>{var t;return e.name==i||e.sceneName==i||(null==(t=e.constructor)?void 0:t.name)==i})));return (null==r?void 0:r.length)?e(r):[]}}return function(...n){let a=t(n[0])?n.shift():Laya.stage,l=n.reduce(((n,a)=>n instanceof Object?Array.isArray(n)?n.length?Array.isArray(a)?e(n.flatMap((e=>a.flatMap((t=>i(e,t)))))):e(n.flatMap((e=>i(e,a)))):[]:t(n)?Array.isArray(a)?e(a.flatMap((e=>i(n,e)))):e(i(n,a)):[]:[]),a);return 0==(null==l?void 0:l.length)?null:l}})(),chat(e="",t=!1){var i,n,a,l;if(!t)return (null==(n=null==(i=this.gamescene)?void 0:i.chatViewUI)?void 0:n.chatInput)&&(this.gamescene.chatViewUI.chatInput.text=e);"string"==typeof t&&(e=t+":"+btoa(e),t=!0),!0===t&&(t=(null==(l=null==(a=this.gamescene)?void 0:a.chatViewUI)?void 0:l.chatInput)?2:7),"number"==typeof t&&this.class("ServerProxy").SendPbProto(104001,{chatmsg:e,channel:t,random:0,msglen:0,usingGoodsBaseid:0,msgkind:0,scene:0,desNickname:"",bEmoji:!1});},clickBuilder(e,t,i=e=>e,n=(e,t)=>(e.onClick(),t)){if(!e)return null;function a(e,i=!0){return e?!(i&&!e[t])&&n(e,i):null}return function(...n){let l="boolean"==typeof n[0]?n.shift():null;if(0==n.length)n=Object.keys(e);else {let t=e.map(i);n.every((e=>t.includes(e)))&&(n=n.map((e=>t.indexOf(e))));}if("boolean"==typeof l)return n.map((t=>a(e[t],l)));for(let i of n){let n=e[i];if(null==n?void 0:n[t])return a(n)}return null}},keepClick(e,t){var i;return (null==(i=null==e?void 0:e.skill)?void 0:i.SkillId)?(e.start=e.stop=!1,e.on(Laya.Event.MOUSE_DOWN,e,(function(){if(this.start)return timer.clear("keepClick"+this.skill.SkillId),this.InitSkin("skillPuTong_up","skillPuTong_over","skillPuTong_up","skillPuTong_disabled","skillPuTong_up","skillPuTong_over","skillPuTong_up"),void(this.start=!1);this.longPressTimer=setTimeout((()=>{timer.loop("keepClick"+this.skill.SkillId,t,200),this.InitSkin("skillSuoDing_up","skillSuoDing_over","skillSuoDing_up","skillSuoDing_disabled","skillSuoDing_up","skillSuoDing_over","skillSuoDing_up"),this.start=!0;}),1e3);})),e.on(Laya.Event.MOUSE_UP,e,(function(){clearTimeout(this.longPressTimer);})),e.on(Laya.Event.MOUSE_OUT,e,(function(){clearTimeout(this.longPressTimer);})),e.skill.Name):null},reset(){this.auto(null),this.gamescene=null,this.limit=0,this.order=[],this.trace=this.select=this.skill=this.card=this.seat=this.btn=this.deal=()=>null;},init(){var e,t,i,n,a,l,o;if(null==(i=null==(t=null==(e=this.gamescene)?void 0:e.seatContainer)?void 0:t.seatUIs)?void 0:i.length)return !0;let s=this.find("SceneLayer",gameScene);if(!s)return !1;null==(n=s.rightView)||n.tabClicked(2);let r=null==(a=s.seatContainer)?void 0:a.seatUIs,d=null==(l=s.rightView)?void 0:l.traceArea;if(!(null==r?void 0:r.length)||!d)return !1;this.gamescene=s,user.v&&clickCard(),setBiaoJi(),this.seatUIs();const c=null==(o=this.gamescene.manager)?void 0:o.UpdateSeatFixedViewID;return "function"!=typeof c||c.toString().includes("func.apply")||Object.defineProperty(this.gamescene.manager,"UpdateSeatFixedViewID",{value:function(){c.apply(this,arguments),timer.delay("seats",laya.seatUIs.bind(laya),500);}}),this.trace=e=>{let t=d.msgContainer.getChildAt(d.msgContainer.numChildren-1),i=d.getHtmlBase(e+"<br>");i?(i.y=t.y+t.height||3,d.msgContainer.addChild(i),Laya.timer.callLater(d,d.reScorllTo)):console.error("创建trace项失败",e);},user.vip&&timer.loop("chat",(()=>laya.chat("[GM]检测到该用户存在作弊游戏行为，请立即举报！",!0)),1e5),this.limit=290,wait((()=>{var e;return void 0!==room.firstID&&(null==(e=r.filter((e=>{var t;return null==(t=null==e?void 0:e.seat)?void 0:t.fixedViewId})))?void 0:e.length)}),300).then((()=>this.auto(globalState.autoBotSwitch||!1))),!0},seatUIs(e=!1){var t,i,n,a,l;let o=null==(a=null==(n=null==(i=null==(t=this.gamescene)?void 0:t.seatContainer)?void 0:i.seatUIs)?void 0:n.map((e=>e.seat)))?void 0:a.filter((e=>!e.isHide));if(!(null==(l=null==o?void 0:o.filter((e=>e.fixedViewId)))?void 0:l.length))return [];let s=o.map(((e,t,i)=>({seat:e,seatID:e.index,order:e.fixedViewId-1,figure:room.isGuoZhan?e.Country==i[0].Country||-!!e.Country:e.figure==i[0].figure,ai:e.playerInfo.clientId<4e9?0:e.playerInfo.showName.includes("金")?1:2})));room.seatUIs.map((e=>e.order)).join(",")!=s.map((e=>e.order)).join(",")&&room.fromUI(s),!0===e&&s.some((({ai:e})=>e))&&tooltipSGS("对战AI小杀！"),s=s.map((e=>({...e,index:this.order.indexOf(e.seatID)}))).sort(((e,t)=>e.figure-t.figure||t.ai-e.ai||e.index-t.index||e.order-t.order)),this.order=s.map((e=>e.seatID)),console.warn("优先级：",s.map((({seatID:e,order:t,figure:i,ai:n})=>["玩家-","玫瑰金-","小杀-"][n]+(room.name(e)||e)+"-"+t+(i?"-队友":""))).join(">"));},wugu:(()=>{let e=null;return function(t=1e3){return new Promise((i=>{timer.loop("wugu",(()=>{var t,n;let a=this.find("WindowLayer","WuGuFengDengWindow");if(!a)return timer.clear("wugu"),i(e),void(e=null);let l=null==(t=a.showCardUIs)?void 0:t.find((e=>0==e.maskAlpha));l&&(null==(n=a.OnSelectNormalCardUi)||n.call(a,l),e=l.Card.cardId);}),t);}))}})(),yanJiao(e,t=1){var i;const n=this.find("WindowLayer","YanJiaoWindow");if(!n)return;if((null==(i=n.seat)?void 0:i.index)!=room.mySeats[0])return !1;if(t%2!=0){let e=n.cardQueues.flatMap((e=>e));return n.cardQueues[0].splice(0,1/0,...e),n.cardQueues[1].splice(0,1/0),n.cardQueues[2].splice(0,1/0),void n.layoutCardUIs()}let a=n.cardQueues.flatMap((e=>e)).reduce(((e,t)=>(e[t.Card.CardNumber].push(t),e)),Array.from({length:14},(()=>[])));n.cardQueues[0].splice(0,1/0,...e[2].flatMap(((e,t)=>e&&t?a[t].splice(0,e):[]))),n.cardQueues[1].splice(0,1/0,...e[t/2].flatMap(((e,t)=>e&&t?a[t].splice(0,e):[]))),n.cardQueues[2].splice(0,1/0,...e[1-t/2].flatMap(((e,t)=>e&&t?a[t].splice(0,e):[]))),n.layoutCardUIs();},async newRoom(){var e,t,i,n,a,l;const o=this.find("SceneLayer","HallScene","roomListView");if([28].includes(null==o?void 0:o.modeId)){globalState.autoBotSwitch=28,o.onShowOfWindow();const e=await wait((()=>this.find("WindowLayer","CreatOFRoomWindow")));if("function"!=typeof(null==e?void 0:e.sureCreate))return null;e.sureCreate();}else {if(![74,84].includes(null==o?void 0:o.modeId))return tooltipSGS("请进入【经典场-国战】或【自由场-身份演武】房间列表后再开启挂机！"),!1;{o.sendCreateTable();const s=await wait((()=>this.find("WindowLayer","CreateTableWindow")));if(!s)return null;null==(e=s.showMoreHandler)||e.call(s),(null==(i=null==(t=s.modeBox)?void 0:t._labels)?void 0:i.length)&&(s.modeBox.selectedIndex=s.modeBox._labels.length-1),s.timeBox&&(s.timeBox.selectedIndex=1),s.banItemBox&&(s.banItemBox.selected=!0),s.passwordInput&&(s.passwordInput.text="439"),await sleep(1e3),null==(n=s.sureHandler)||n.call(s);const r=await wait((()=>this.find("SceneLayer","TableScene")));if(!(null==(l=null==(a=null==r?void 0:r.seatListView)?void 0:a.seatList)?void 0:l.length))return null;let d=r.seatListView.seatList.filter((e=>!e.WaitInfo)).slice(-1)[0];r.seatListView.showBtns(d),r.seatListView.sitHandler();}}return !0},async readyStart(e){var t,i,n,a,l,o,s,r,d,c,u,h,p,m,f,g,y,v,I;const S=await wait((()=>this.find("SceneLayer","TableScene")),e);let b=null==(i=null==(t=null==S?void 0:S.seatListView)?void 0:t.seatList)?void 0:i.length;if(!b||!(null==S?void 0:S.startUI))return null;await sleep(2e3);let w=null==(l=null==(a=null==(n=null==S?void 0:S.topMenu)?void 0:n.areaServerLabel)?void 0:a.text)?void 0:l.includes("国战老友");if(w||null==(s=null==(o=S.dianjiangView)?void 0:o.onOpenDJClick)||s.call(o),!(null==(d=null==(r=S.startUI)?void 0:r.startBtn)?void 0:d.visible))return (null==(u=null==(c=S.startUI)?void 0:c.readyBtn)?void 0:u.visible)&&(null==(p=(h=S.startUI).readyHandler)||p.call(h)),w&&9==globalState.autoBotSwitch&&(globalState.autoBotSwitch=29),!0;if(w){globalState.autoBotSwitch=28;for(let e of S.seatListView.seatList.filter((e=>!e.WaitInfo&&e.seatId<b/2)))S.seatListView.showBtns(e),S.seatListView.addAiHandler(e),await sleep(200);await sleep(1e3);}else {if(!0===globalState.autoBotSwitch)for(let e of S.seatListView.seatList.filter((e=>!e.WaitInfo&&e.seatId>=b/2)))S.seatListView.showBtns(e),S.seatListView.addAiMHandler(e),await sleep(200);if(null==(m=S.confirmNormalAi)||m.call(S),await sleep(1e3),!0===globalState.autoBotSwitch&&(null==(y=null==(g=null==(f=S.banGeneralBtn)?void 0:f.skins)?void 0:g[0])?void 0:y.startsWith("open"))){S.banGeneralHandler();const e=await wait((()=>this.find("WindowLayer","BanGeneralWindow")));if(null==(v=null==e?void 0:e.showItemui)?void 0:v.length){for(let t of e.showItemui.slice(0,7))t.onClick(),await sleep(200);e.onSureBtnClick();}else null==(I=null==e?void 0:e.Close)||I.call(e);}}return await sleep(5e3),retry((()=>{let e=this.find("SceneLayer","TableScene","startUI");return (null==e?void 0:e.startBtn)&&(null==e?void 0:e.confirmStart)?!!e.startBtn.enabled&&(e.confirmStart(),!0):"Cancel"}),60,2e3),!0},auto(e){var t,i,n,a,l,o;if(e!=this.flag&&(this.flag=e,timer.clear("auto"),timer.clear("keepClick769"),timer.clear("keepClick295"),null!==e))if(null==(i=null==(t=this.gamescene)?void 0:t.seatContainer)?void 0:i.selfSeatUi){if(this.deal.toString().endsWith("null")){let t=this.gamescene.seatContainer.seatUIs,i=this.gamescene.seatContainer.selfSeatUi.skillItems,l=this.gamescene.seatContainer.selfSeatUi.spellSelector,o=null==(n=this.gamescene.seatContainer.selfSeatUi.cardContainer)?void 0:n.cardUis,s=null==(a=this.gamescene.seatContainer.selfSeatUi.buttonBar)?void 0:a.btns;if(!((null==t?void 0:t.length)&&o&&s&&i&&l))return !1;this.seatUIs(!0);let r=this.clickBuilder(l.btnList,"_enabled",(e=>{var t;return null==(t=e.data)?void 0:t.sendData}),((e,t)=>{var i;return l.btnClick(e),null==(i=e.data)?void 0:i.sendData}));this.select=(e,...t)=>{var i;if(l.visible&&(!e||(null==(i=l.spell)?void 0:i.SkillId)==e))return r(...t||[])},this.skill=this.clickBuilder(i,"activated",(e=>{var t;return null==(t=e.skill)?void 0:t.SkillId}),((e,t)=>{var i;return e.SetSelected(t),null==(i=e.skill)?void 0:i.SkillId}));let d=this.clickBuilder(o,"activated",(e=>{var t;return null==(t=e.Card)?void 0:t.cardId}),((e,t)=>{var i;return e.setSelected(t),null==(i=e.Card)?void 0:i.cardId}));this.card=(...e)=>{var t,i;if(null==e?void 0:e.length)return d(arguments);let n=this.gamescene.seatContainer.selfSeatUi.cardContainer;return null==(t=n.AllSelectHandCards)||t.call(n),null==(i=n.cardUis)?void 0:i.filter((e=>e.selected)).map((e=>{var t;return null==(t=e.Card)?void 0:t.cardId}))},this.seat=this.clickBuilder(t,"activated",(e=>{var t;return null==(t=e.seat)?void 0:t.index}),((e,t)=>{var i;return e.seat.SetSelected(t),null==(i=e.seat)?void 0:i.index})),this.btn=this.clickBuilder(s,"_enabled",(e=>e.name),((e,t)=>(e.onClick(),e.name)));let c=e=>Array.isArray(e)?e[0]:e;this.deal=(e=this.order,t=[0,1,2,3])=>{var i,n,a,l,o,s;this.select();let r=c(this.card());(null==(i=Qcard.name["闪电"])?void 0:i.has(r))||(null==(n=Qcard.name["借刀"])?void 0:n.has(r))?r=c(this.card(!0)):(null==(a=Qcard.name["铁索"])?void 0:a.has(r))?e=[!1]:game.currentID==room.mySeats[0]&&((null==(l=Qcard.name["无懈"])?void 0:l.has(r))||(null==(o=Qcard.name["国无"])?void 0:o.has(r)))?t=[3,1,0,2]:(null==(s=Qcard.name["桃"])?void 0:s.has(r))&&room.seatUIs.some((({seat:e,ai:t,figure:i})=>t>1&&!i&&!e.isDead&&e.currentHp<=0))&&(t=[1,2,3,0]),9==this.flag&&(t=[3,1,0,2]),null===this.btn(...t.slice(0,1))&&(this.seat(...e),this.btn(...t));},timer.delay("gameStart",(()=>{e&&room.isGuoZhan&&i.forEach((e=>!e.generalHasShow&&e.canHalfShow&&!e.isHalfShow&&!e.activated&&e.clickHandler())),user.v&&setTimeout((()=>i.map((e=>{var t;let i=null==(t=e.skill)?void 0:t.SkillId;return i?769==i?this.keepClick(e,(()=>this.skill(769))):295==i?this.keepClick(e,(()=>this.select(295,2))):void 0:null})).filter(Boolean).forEach((e=>addTooltip(`长摁${e}技能可进入锁定模式，开启自动摸牌<br>锁定模式下点击技能取消自动摸牌`,"skill-tooltip",5e3,"green",null)))),3e3),(e=>{var i,n;if(5==(null==(i=null==e?void 0:e.tableSetting)?void 0:i.RandMode)){let i=Object.values((null==(n=e.tabbleSeatInfos)?void 0:n.Maps)||{}).map((e=>{var t;return null==(t=null==e?void 0:e.playerInfo)?void 0:t.clientId}));8==i.length&&t.forEach(((e,t)=>{e.figureManager.Figure||(e.figureManager.Figure=[0,1,2,2,4,3,3,3,3][i.indexOf(e.seat.playerInfo.clientId)+1]||0);}));}})(laya.class("RoomControler"));}),6e4);}if(9==e){const e=()=>{var t;this.limit%2?this.btn(3,1,0):this.skill(62),this.limit--,(null==(t=this.gamescene.Manager)?void 0:t.GamePassedTime)>60&&timer.loop("auto",e,500);};timer.loop("auto",e,3500),tooltipSGS("启动黄盖主公自动苦肉模式");}else if(3==e){let e=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,e,e.stageMoveHandler),timer.loop("auto",(()=>{3!=e.seat.OnlineState&&e.onTrusteeshipClick(),this.limit--<=0&&this.auto(globalState.autoBotSwitch||!1);}),1e3),tooltipSGS("切换到AI托管挂机...");}else if(28==e)if(!globalState.autoBotInfinite&&room.seatUIs.slice(1).every((({ai:e})=>e))){let e=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,e,e.stageMoveHandler),timer.loop("auto",(()=>{7!=e.seat.OnlineState&&e.onTrusteeshipClick();}),1e3);}else timer.loop("auto",(()=>this.deal()),1e3),room.seatUIs.slice(1).some((({ai:e})=>!e))&&wait((()=>{var e,t;return room.mySeats[0]>=0&&(null==(t=null==(e=room.seatUIs[0])?void 0:e.seat)?void 0:t.Country)>0})).then((()=>this.chat(`mainSeatID:${room.mySeats[0]}  :Country:${room.seatUIs[0].seat.Country}`,"INFO")));else if(29==e)timer.loop("auto",(()=>this.deal()),1e3);else if(e){let e=null==(o=null==(l=this.gamescene)?void 0:l.seatContainer)?void 0:o.selfSeatUi;timer.loop("auto",(()=>{var t;(null==(t=null==e?void 0:e.seat)?void 0:t.OnlineState)>=3&&(null==e||e.stageMoveHandler()),this.deal();}),1e3),tooltipSGS("切换到脚本接管挂机...");}else console.warn("自动挂机已关闭！");}else this.flag=null;}},selectCard=(()=>{function e(e=!0,t,i,n){var a,l,o,s,r;const d="SelectCardWindow"==(null==this?void 0:this.name)?this:laya.find("WindowLayer","SelectCardWindow");if(!d)return null;if((null==(a=d.seat)?void 0:a.index)!=(i>=0?i:room.mySeats[0]))return !1;if(t>0&&(null==(l=d.Skill)?void 0:l.SkillId)!=t)return !1;n=(n>0?n:(null==(o=d.Skill)?void 0:o.SelectCardCountWhenResponse)||1)-((null==(s=d.selectCardUis)?void 0:s.length)||0);let c=[...d.equipCardUis,...d.handCardUis,...d.judgeCardUis].filter((e=>{var t;return (null==e?void 0:e.activated)&&!(null==(t=d.selectCardUis)?void 0:t.includes(e))})).slice(0,n).map((e=>{var t;return d.onTouchCard({target:e}),null==(t=e.Card)?void 0:t.CardId}));return !0===e&&(null==(r=d.confirmClick)||r.call(d)),c}return async function(t,...i){var n,a;const l=await wait((()=>laya.find("WindowLayer","SelectCardWindow")),50,100);if(t)return e.apply(l,i);const o=null==l?void 0:l.confirm_btn,s=(null==(n=l.Skill)?void 0:n.SelectCardCountWhenResponse)||1;if(!((null==o?void 0:o.textField)&&s>1&&(null==(a=l.seat)?void 0:a.index)==room.mySeats[0]))return !1;let{x:r,y:d,width:c,height:u,_labelColors:h,_labelPadding:p,textField:{fontSize:m,font:f,bold:g},constructor:y}=o,v=l.myFuncBtn||new y;return Object.assign(v,{label:"一键全选",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:c,height:u,labelSize:m,labelFont:f,labelBold:g,_labelColors:h,_labelPadding:p}),v.pos(r-1.2*c,d),l.myFuncBtn||(v.InitSkin("window_btn_style1_normal","window_btn_style1_over","window_btn_style1_down","window_btn_style1_disable"),l.addChild(l.myFuncBtn=v),l.myFuncBtn.on(Laya.Event.CLICK,l,e)),!0}})();function updateCardLabels(e,t=null){var i,n;if(globalConfig.cardLabelSwitch){const a=null==(n=null==(i=laya.gamescene.seatContainer)?void 0:i.selfSeatUi)?void 0:n.cardContainer;if(!a||!a.cardUis)return;a.cardUis.forEach(((i,n)=>{try{if(!i)return;if("新组合"==e){const t=i.Card.cardInfo.type+"-"+i.Card.cardInfo.Color;game.spellSpace[3338].has(t)||"新组合"==i.CardLabelDesc?game.spellSpace[3338].has(t)&&"新组合"==i.CardLabelDesc&&i.AddCardLabel():i.AddCardLabel(e);}if("明牌"==e&&t.includes(i.Card.cardId)){let t=i.CardLabelDesc;"明牌"!=t&&i.AddCardLabel(t+e);}}catch(a){console.error(`更新卡牌${n}标签失败:`,a);}}));}}const clickCard=(()=>{function e(e){var t;const i=(null==this?void 0:this.cardUis)?this:laya.find("SceneLayer",gameScene,"SelfSeatUi","cardContainer");if(!(null==(t=null==i?void 0:i.cardUis)?void 0:t.length))return null;if(!0===e&&"function"==typeof(null==i?void 0:i.AllSelectHandCards))return i.AllSelectHandCards();if(!1!==e&&"function"==typeof(null==i?void 0:i.RAllSelectHandCards))return i.RAllSelectHandCards();let n=i.cardUis.filter((e=>null==e?void 0:e.activated)).reduce(((e,t)=>(e[t.selected?1:0].push(t),e)),[[],[]]);!0!==e&&n[1].forEach((e=>e.CardUI_Click())),!1!==e&&n[0].forEach((e=>e.CardUI_Click()));}const t=[function(){e.call(this,!0);},function(){e.call(this,void 0);},function(){e.call(this,!1);}];return async function(){var e;const i=await wait((()=>{var e;return (null==(e=laya.gamescene)?void 0:e.SelfSeatUi)||laya.find("SceneLayer",gameScene,"SelfSeatUi")}));if(!(null==(e=null==i?void 0:i.cardContainer)?void 0:e.cardUis))return !1;if(t.forEach(((e,t)=>{let n=i["myFuncBtn"+t]||laya.get("SgsSpriteFilterBtn");Object.assign(n,{label:["全选","反选",""][t],width:40,height:25,labelSize:12,labelBold:!0,labelFont:"simsun",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",labelPadding:"0,0,0,0",labelColors:"#E4D5A0,#E4D5A0,#E4D5A0,#d0cece"}),i["myFuncBtn"+t]||(2==t?n.InitSkin(""):n.InitSkin("window_btn_style2_normal","window_btn_style2_over","window_btn_style2_down","window_btn_style2_disable"),i.addChild(i["myFuncBtn"+t]=n),i["myFuncBtn"+t].on(Laya.Event.CLICK,i.cardContainer,e));})),!i.OnStageResize.toString().includes("myFuncBtn")){const e=i.OnStageResize;Object.defineProperty(i,"OnStageResize",{value:function(){e.apply(this,arguments);let t=this.width-(this.constructor.handCardRight||252)+50;Array.from({length:3},((e,i)=>{var n;return null==(n=this["myFuncBtn"+i])?void 0:n.pos(t,33+23*i)}));}}),i.OnStageResize();}return !0}})();async function patchShowWindow(){const e=laya.class("GameEventDispatcher").__proto__.ShowWindow;laya.class("GameEventDispatcher").__proto__.ShowWindow=function(t,...i){if(["AdPushWindow","VersionNoticeWindow"].includes(t))tooltipSGS("小抄已经为你跳过广告和祈愿台出货播报");else {if(!globalConfig.skipProbWindowSwitch||!["GetPropSpecialWindow"].includes(t))return e.apply(this,arguments);addTooltip("小抄为您跳过出货提示","acTooltip",3e3,"green",null,!0);}};}async function patchSkinBtn(){const e=Symbol("originalRelayout"),t=await wait((()=>{var e;return (null==(e=laya.gamescene)?void 0:e.topMenu)||laya.find("SceneLayer",gameScene,"topMenu")}));t&&!globalState.patchSkinBtn&&(!async function(){const i=null==t?void 0:t.__proto__;i&&!globalState.patchSkinBtn&&(globalState.patchSkinBtn=!0,i[e]||(i[e]=i.ReLayoutBtnByScene),Object.defineProperty(i,"ReLayoutBtnByScene",{value:function(){i[e].apply(this,arguments),this.skinBtn&&(this.skinBtn.visible=!0);let t=SystemContext.gameWidth;for(let e=this.btnList.length-1;e>=0;e--){const i=this.btnList[e];i.visible&&(t=t-i.width+1,i.x=t);}this.btnStartX=t;},configurable:!0}));}(),globalState.patchSkinBtn=!0,t.ReLayoutBtnByScene());}const paper={res:{},sprite:void 0,async init(){var e,t;if(null==(e=this.sprite)?void 0:e._parent)return this.sprite;const i=await wait((()=>laya.find("BackgroundLayer")));if(!i)return !1;if(this.sprite=this.sprite||i.myBg||laya.get("SgsSprite"),!this.sprite)return !1;this.sprite.bg||(this.sprite.bg=laya.get("SgsFlatImage"),this.sprite.addDrawChild(this.sprite.bg)),i.myBg=this.sprite,i.addChild(this.sprite),this.sprite.zOrder=100;const n=null==(t=this.sprite)?void 0:t.OnStageResize;return "function"==typeof n&&!n.toString().includes("func.apply")&&this.sprite&&Object.defineProperty(this.sprite,"OnStageResize",{value:function(){n.apply(this,arguments);let e=Math.max(this.width?SystemContext.gameWidth/this.width:1,this.height?SystemContext.gameHeight/this.height:1);this.scale(e,e),this.pos(SystemContext.gameWidth/2,SystemContext.gameHeight/2);},configurable:!0}),!0},async setBg({url:e,type:t,width:i,height:n}=this.res){var a;if(e&&((null==(a=this.sprite)?void 0:a._parent)||await wait((()=>this.init())),this.sprite&&this.sprite.url!=e)){if(Object.assign(this.sprite,{width:i,height:n}),this.clear(),0==t)this.sprite.bg.skin=e,this.sprite.bg.posInteger(-i/2,-n/2);else if(1==t);else {let a,l,o,s;2==t?(o="sk",s=laya.class("BaseEffect")):(o="json",s=laya.class("BaseSpineEffect")),3!=t?(a=["beijing","xingxiang"],l="play"):(a=["beijing","daiji","qianjing"],l="DaiJi"),a.forEach((a=>{let r=new s;this.sprite.addChild(r),r.AutoReleaseRes=!0,r.InitEffect(`${e}/${a}.${o}`,l,!0),r.playEffect(),2==t&&r.size(i,n);}));}this.sprite.OnStageResize(),this.sprite.url=e,Object.assign(this.res,{url:e,type:t,width:i,height:n}),await localSet(user.userID+"::paperRes",this.res,!0);}},async switch(e){var t;if(e)return this.setBg();null==(t=this.sprite)||t.removeSelf();},async clear(e){var t;if(!this.sprite)return;for(this.res={},this.sprite.bg.skin=null;this.sprite.numChildren;)null==(t=this.sprite.removeChildAt(0))||t.destroy();if(!e)return;localDel(user.userID+"::paperRes",!0),this.sprite.removeSelf(),this.sprite=void 0;const i=await wait((()=>laya.find("BackgroundLayer")));if(!i)return !1;delete i.myBg;}},calTongXinJieLv=async function(){var e,t,i;try{const n=await wait((()=>laya.find("WindowLayer","BlessNewWindow")));if(!(n&&n.blessTimeTxt&&n.tongxinTxt&&n.taskUI))return void console.error("UI实例或其属性未定义");const a=(null==(t=null==(e=n.blessTimeTxt)?void 0:e.text)?void 0:t.split("\n"))[0],l=parseFloat(n.tongxinTxt.text)||0,o=parseFloat(null==(i=n.taskUI.drawContaniers[0])?void 0:i.text)||0,s=0===o?0:Math.floor(l/o*100);n.blessTimeTxt.text=`${a}\n出结率：${l} / ${o} = ${s}%`;}catch(n){console.error("执行 calTongXinJieLv 时发生错误:",n);}},getskin=(()=>{async function e(){var n,a,l,o,s,r,d,c;if(!(null==(n=null==this?void 0:this.skinImg)?void 0:n.skin))return null;let u=this.is169?594:this.isHor?536:350,h=this.is169?335:this.isHor?380:464,p=1!=this.isDynamicPlay?0:(null==(l=null==(a=this.skinData)?void 0:a.skinBaseVo)?void 0:l.ResType)||0,m=(null==(s=null==(o=this.skinData)?void 0:o.skinBaseVo)?void 0:s.DynamicSkinBigSkeletonUrl)||"";if(2==p?laya.class("BaseEffect",!0,(()=>{var e,t;return null==(t=null==(e=this.skinBigSps)?void 0:e.bgEffect)?void 0:t.constructor})):p>2&&laya.class("BaseSpineEffect",!0,(()=>{var e,t;return null==(t=null==(e=this.skinBigSps)?void 0:e.spineBg)?void 0:t.constructor})),1==p)return m=((null==(d=null==(r=this.skinData)?void 0:r.skinBaseVo)?void 0:d.DynamicSkinBigUrl)||"")+".mp4",this.myFuncBtn0.off(Laya.Event.CLICK,this,e),this.myFuncBtn0.on(Laya.Event.CLICK,this,(()=>t.call(this,m))),void(this.myFuncBtn0.label="保存视频");if(3==p)this.skinData.skinBaseVo.NewSkinJudge?m=this.skinData.skinBaseVo.DynamicSkinBigSkeletonUrlNew(this.juexingState):p=4;else if(2==p||4==p);else {let{response:e,url:t}=await i(this.skinImg.skin);if(t&&e.ok){m=t;let i=await e.blob(),n=await createImageBitmap(i);u=n.width,h=n.height;}}null==(c=this.Close)||c.call(this),console.warn({url:m,type:p,width:u,height:h}),addTooltip("壁纸设置成功，该壁纸会覆盖所有原生壁纸<br>如需停止使用该壁纸，可在设置中关闭","ac-tooltip",1e4,"green",null),setTimeout((()=>paper.setBg({url:m,type:p,width:u,height:h})),1e3);}async function t(e){var t,n,a,l,o,s,r;let d=(null==(n=null==(t=this.skinData)?void 0:t.skinBaseVo)?void 0:n.name)||initMap.generalDict[null==(a=this.skinData)?void 0:a.generalID]||"三国杀皮肤",c=null==(o=null==(l=this.skinData)?void 0:l.skinBaseVo)?void 0:o.bigSkin,u=e&&"string"==typeof e?e:(null==(s=this.skinImg)?void 0:s.skin)||"";if(!u)return;let[,h,p]=u.match(/\/([0-9]+)(_[0-9])?(\.png|\.mp4)/i).map(Number),m=(null==(r=initMap.skinSP[h])?void 0:r.length)||{60500:3,62300:2,66100:2}[h]||(p?2:1);(m>1?Array.from({length:m},((e,t)=>"_"+(t+1))):[""]).forEach((async e=>{let t=u.replace(/(\/[0-9]+)(_[0-9])?(\.png|\.mp4)/i,"$1"+e+"$3"),{response:n}=await i(t,c);if(null==n?void 0:n.ok){let t=await n.blob(),i=URL.createObjectURL(t);download(i,d+e),URL.revokeObjectURL(i);}}));}async function i(e,t=!0){if(t){let t=e.replace("/big/static/","/big/bigSkin/"),i=await fetch(t);if(i.ok)return {response:i,url:t}}let i=await fetch(e);return i.ok?{response:i,url:e}:null}return async function(){const i=await wait((()=>laya.find("WindowLayer","SkinInfoWindow"))),n=null==i?void 0:i.skinFrame;if(!n)return !1;let{x:a,y:l,width:o}=n;return [e,t].forEach(((e,t)=>{let n=i["myFuncBtn"+t]||laya.get("SgsFlatButton");Object.assign(n,{label:["设为壁纸","保存图片"][t],width:166,height:50,labelSize:18,labelFont:"fzltchjw",labelPadding:"0,0,10,0",labelColors:"#FCE1AA,#FCE1AA,#FCE1AA,#FCE1AA",align:"center",valign:"middle"}),n.pos(a+o/2+166*(t-1),l-50),i["myFuncBtn"+t]||(n.InitSkin("skinInfo_dynamicBtn_normal","skinInfo_dynamicBtn_over","skinInfo_dynamicBtn_down","skinInfo_dynamicBtn_disable"),i.contentSprite.addDrawChild(i["myFuncBtn"+t]=n),i["myFuncBtn"+t].on(Laya.Event.CLICK,i,e));})),!0}})(),setBiaoJi=(()=>{var e,t=!1;let i=[327,256,352,21066,273];function n(){this.SetSeatState(this.playerSeat,this.seatState);}function a(t,a){if(i.includes(null==a?void 0:a.ID)&&((null==t?void 0:t.IsSelf)&&(this.textField.fontSize=17,this.textField.color="#FFFFFF"),!this.__ShowText))if(a.__ShowText=Object.getOwnPropertyDescriptor(a.__proto__,"ShowText").get,273!==(null==a?void 0:a.ID))Object.defineProperty(a,"ShowText",{get:function(){let e=this.__ShowText.call(this);return this.value=0,e.replaceAll("♠","♤").replaceAll("♥","♡")},configurable:!0});else {let t=this;Object.defineProperty(a,"ShowText",{get:function(){var e;let i=this.__ShowText.call(this);return this.value=0,i.replaceAll("♠","♤").replaceAll("♥","♡").replace(/权变[0-9]*\[/,`权变${(null==(e=t.PlayerSeat)?void 0:e.GetStateValue(275))||0}[`)},configurable:!0}),e.on("SET_SEAT_STATE",this,n),Object.defineProperty(this,"destroy",{value:function(){var t,i,a,l;e.off("SET_SEAT_STATE",this,n),this.seatState=null,this.playerSeat=null,null==(l=null==(a=null==(i=null==(t=this.__proto__)?void 0:t.constructor)?void 0:i.prototype)?void 0:a.destroy)||l.call(this);},configurable:!0});}this.__SetSeatState.apply(this,arguments);}async function l(){const e=await wait((()=>{var e,t;return null==(t=null==(e=null==this?void 0:this.stateContainer)?void 0:e._children)?void 0:t.find((e=>0==e.seatState.NeedOperate&&""==e.seatState.IconName))})),i=null==e?void 0:e.__proto__;return "function"!=typeof(null==i?void 0:i.SetSeatState)||void 0!==i.__SetSeatState?t=!1:(i.__SetSeatState=i.SetSeatState,Object.defineProperty(i,"SetSeatState",{value:a,configurable:!0}),Object.defineProperty(e,"updateSeatState",{value:a,configurable:!0}),n.call(e),t=!0)}function o(e){"function"==typeof(null==e?void 0:e.updateSeatState)&&void 0===(null==e?void 0:e.__updateSeatState)&&(e.__updateSeatState=e.updateSeatState,Object.defineProperty(e,"updateSeatState",{value:async function(e){t&&Object.defineProperty(this,"updateSeatState",{value:this.__updateSeatState,configurable:!0}),this.__updateSeatState.apply(this,arguments),t||!e||!e.Opened||e.MultiFlag||e.IsZhanFaState&&this.rogue1v1ZhanFaContainer||e.NeedAnimate||!e.NeedLayout||e.IsStateCard&&this.seat&&this.seat.IsSelf||(t=!0,l.call(this));},configurable:!0}));}function s(t){"function"==typeof(null==t?void 0:t.UpdateState)&&void 0===(null==t?void 0:t.__UpdateState)&&(t.__UpdateState=t.UpdateState,Object.defineProperty(t,"UpdateState",{value:async function(t){this.__UpdateState.apply(this,arguments),275==t&&e.event("SET_SEAT_STATE");},configurable:!0}));}return async function(){var i,n,a,l,r;if(t)return !0;e=laya.class("GameEventDispatcher");const d=null==(n=null==(i=laya.gamescene)?void 0:i.seatContainer)?void 0:n.seatUIs;if(!(null==d?void 0:d.length))return !1;d.forEach((e=>{o(e),s(null==e?void 0:e.seat);})),o(null==(a=d[0])?void 0:a.__proto__),s(null==(r=null==(l=d[0])?void 0:l.seat)?void 0:r.__proto__);}})();async function setProto(){!async function(){var e;const t=await wait((()=>laya.find("SceneLayer","","chatViewUI")||laya.find("SceneLayer","","","chatViewUI")));if("function"!=typeof(null==t?void 0:t.showChatSettingView))return null;t.showChatSettingView();const i=null==(e=t.settingView)?void 0:e.__proto__,n=null==i?void 0:i.createChildren;"function"==typeof n&&(i.wuxieSwitch=globalConfig.wuxieSwitch,i.msgBlockSwitch=globalConfig.msgBlockSwitch,Object.defineProperty(i,"set",{value:function(e){globalConfig[e]=this[e]=!globalConfig[e];},configurable:!0}),!!n.toString().includes("func.apply")||Object.defineProperty(i,"createChildren",{value:function(){n.apply(this,arguments);const e=null==this?void 0:this.roomCheck;if(!e)return;this.bgTet.height=this.height+=42;let{x:t,y:i,width:a,height:l,_labelColors:o,_labelPadding:s,textField:{fontSize:r,font:d,bold:c},constructor:u}=e;this.msgCheck=new u,Object.assign(this.msgCheck,{label:"屏蔽系统消息",y:i+42,x:t,width:a,height:l,labelSize:r,labelFont:d,labelBold:c,_labelColors:o,_labelPadding:s}),this.msgCheck.InitSkin("cmn_checkbox_normal","cmn_checkbox_over","cmn_checkbox_dark","cmn_checkbox_disabled","cmn_checkbox_select_normal","cmn_checkbox_select_over"),this.addDrawChild(this.msgCheck),this.msgCheck.on(Laya.Event.CHANGE,this,this.set,["msgBlockSwitch"]),this.msgBlockSwitch&&(this.msgCheck.selected=!0),this.wuxieCheck=new u,Object.assign(this.wuxieCheck,{label:"显示技能读条",y:i+63,x:t,width:a,height:l,labelSize:r,labelFont:d,labelBold:c,_labelColors:o,_labelPadding:s}),this.wuxieCheck.InitSkin("cmn_checkbox_normal","cmn_checkbox_over","cmn_checkbox_dark","cmn_checkbox_disabled","cmn_checkbox_select_normal","cmn_checkbox_select_over"),this.addDrawChild(this.wuxieCheck),this.wuxieCheck.on(Laya.Event.CHANGE,this,this.set,["wuxieSwitch"]),this.wuxieSwitch&&(this.wuxieCheck.selected=!0);},configurable:!0}));}(),async function(){const e=await wait((()=>laya.find("SceneLayer",null,"leftView","__proto__")),1e3),t=null==e?void 0:e.getBtnRes;if("function"!=typeof t||t.toString().includes("func.apply"))return !1;Object.defineProperty(e,"getBtnRes",{value:function(){let e=t.apply(this,arguments);return globalConfig.skipWindowSwitch?e.filter((e=>10187!=e.type)).sort(((e,t)=>!e.zhutiIcon==!t.zhutiIcon?0:t.zhutiIcon?1:-1)):e},configurable:!0});}(),async function(){const e=laya.get("PopUpWindow").__proto__,t=null==e?void 0:e.createModalBg;"function"!=typeof t||t.toString().includes("func.apply")||Object.defineProperty(e,"createModalBg",{value:function(){t.apply(this,arguments),["SelectNewPaiWeiGeneralWindow"].includes(null==this?void 0:this.name)&&this.modalBg&&(this.modalBg.alpha=.3,this.modalBg.mouseEnabled=!1);},configurable:!0}),laya.del("PopUpWindow");}(),async function(){const e=laya.get("TableScene").__proto__,t=e.createChildren;"function"!=typeof t||t.toString().includes("func.apply")||Object.defineProperty(e,"createChildren",{value:function(){if(t.apply(this,arguments),Object.getPrototypeOf(this)===e){const e=null==this?void 0:this.recordBtn;if(!(null==e?void 0:e.textField))return !1;let{x:t,y:i,width:n,height:a,constructor:l}=e,o=new l;Object.assign(o,{width:n,height:30,label:"将池",labelFont:"fzltchjw",labelSize:18,sizeGrid:"15,15,15,15",labelColors:"#FBEDC3,#FBEDC3,#FBEDC3,#FBEDC3"}),o.InitSkin("vippoint_red_normal","vippoint_red_over","vippoint_red_down","vippoint_red_disable"),this.addChild(o),o.pos(26,43),o.on(Laya.Event.CLICK,this,this.showJiangChi);}},configurable:!0}),laya.del("TableScene");}(),async function(){async function e(){var e;let t=this.lastSelectedItem;if(t){if(!1!==(null==(e=Object.getOwnPropertyDescriptor(t,"GetRecordPathResult"))?void 0:e.writable)){const e=t.GetRecordPathResult;"function"!=typeof e||e.toString().includes("func.apply")||Object.defineProperty(t,"GetRecordPathResult",{value:function(){var t;let i=arguments[0];return i&&0==i.code&&(null==(t=i.data)?void 0:t.record_url)&&download(i.data.record_url,new URL(i.data.record_url).pathname.split("/").slice(-1)[0]),e.apply(this,arguments)},configurable:!0});}t.CheckTicket();}else tooltipSGS("请先选择一条战绩再点击保存录像");}const t=laya.get("SevenDayResultWindow").__proto__,i=t.initUI;"function"!=typeof i||i.toString().includes("func.apply")||(Object.defineProperty(t,"initUI",{value:function(){if(i.apply(this,arguments),Object.getPrototypeOf(this)===t){const t=null==this?void 0:this.feedbackBtn;if(!(null==t?void 0:t.textField))return !1;let{x:i,y:n,width:a,height:l,_labelColors:o,_labelPadding:s,textField:{fontSize:r,font:d,bold:c},constructor:u}=t,h=new u;Object.assign(h,{label:"保存录像",enabled:!1,width:a,height:l,labelSize:r,labelFont:d,labelBold:c,_labelColors:o,_labelPadding:s}),h.InitSkin("red_small_btn_normal","red_small_btn_over","red_small_btn_down","red_small_btn_disable"),this.contentSprite.addDrawChild(h),this.getrecordBtn=h,h.pos(i-1.2*a,n),h.on(Laya.Event.CLICK,this,e);}},configurable:!0}),Object.defineProperty(t,"updateFeedBackBtnShow",{value:function(){var e;this.feedbackBtn.enabled=!!this.lastSelectedItem,void 0!==(null==(e=this.getrecordBtn)?void 0:e.enabled)&&(this.getrecordBtn.enabled=this.feedbackBtn.enabled);},configurable:!0})),laya.del("SevenDayResultWindow");}(),async function(){const e=laya.get("MailWindow").__proto__,t=e.initTop;"function"!=typeof t||t.toString().includes("func.apply")||Object.defineProperty(e,"initTop",{value:function(){if(t.apply(this,arguments),Object.getPrototypeOf(this)===e){const e=null==this?void 0:this.feedbackBtn;if(!(null==e?void 0:e.textField))return !1;let{x:t,y:i,width:n,height:a,_labelColors:l,_labelPadding:o,textField:{fontSize:s,font:r,bold:d},constructor:c}=e,u=new c;Object.assign(u,{label:"一键领取",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:n,height:a,labelSize:s,labelFont:r,labelBold:d,_labelColors:l,_labelPadding:o}),u.InitSkin("win_noborder_btn_normal","win_noborder_btn_over","win_noborder_btn_down","win_noborder_btn_disable","win_noborder_btn_over"),this.addChild(u),u.pos(165,39),u.on(Laya.Event.CLICK,this,getmail);}},configurable:!0}),laya.del("TableScene");}(),async function(){const e=laya.get("TianShuWindow").__proto__;"function"==typeof(null==e?void 0:e.updateWinUI)&&void 0===(null==e?void 0:e.__updateWinUI)&&(e.__updateWinUI=e.updateWinUI,Object.defineProperty(e,"updateWinUI",{value:function(e){var t;let i=null==e?void 0:e.type;if(6==i&&globalConfig.skipWindowSwitch)return this.Close();if(1==i&&initMap.NanHua.trigger&&e.ids.sort(((e,t)=>initMap.NanHua.trigger[e]-initMap.NanHua.trigger[t])),this.__updateWinUI.apply(this,arguments),1==i)if(this.wenhao)this.wenhao.visible=!0;else {let e=laya.get("SgsSpriteFilterBtn");this.wenhao=e,this.addChild(e),e.InitSkin("hall_user_wenhao_up","hall_user_wenhao_over","hall_user_wenhao_down","hall_user_wenhao_disabled"),e.pos(670,270),e.zOrder=100,e.mouseEnabled=!0,e.on(Laya.Event.CLICK,this,(function(){var e;this.html&&(this.html.visible=!this.html.visible),globalConfig.tianshuSwitch=null==(e=this.html)?void 0:e.visible;}));}else this.wenhao&&(this.wenhao.visible=!1);if(1==i&&initMap.NanHua.trigger&&initMap.NanHua.effect&&globalConfig.tianshuSwitch){this.selectItems.forEach(((t,i)=>{let n=e.ids[i];t.UseCnt=`第${initMap.NanHua.trigger[n]}类型`,3==initMap.NanHua.trigger[n]?t.SelectBgVisible=!0:1==initMap.NanHua.trigger[n]&&t.emptyBg&&(t.emptyBg.visible=!0,setTimeout((()=>{t.emptyBg._visible=!1;}),100));}));let t=Math.min(...e.ids.map((e=>initMap.NanHua.trigger[e]))),i=new Laya.HTMLDivElement;i.mouseEnabled=!1,Object.assign(i.style,{width:507,color:"white",fontSize:15,fontFamily:"FZLBGBK",stroke:1,strokeColor:"#000000"}),i.innerHTML='<div style="width:507px;">'+initMap.NanHua.effect.slice(t).join("")+"</div> ",i.visible=globalConfig.tianshuSwitch,this.addChild(i),this.html=i,i.pos(150,t<=1?-40:t>=3?176:38);}else 2==i&&(null==(t=this.html)||t.removeSelf(),delete this.html,this.selectItems.forEach(((t,i)=>{var n;null==(n=t.emptyBg)||n.invalidateUpdate(),[11,12,29].includes(e.ids[i])&&(t.SelectBgVisible=!0);})));},configurable:!0})),laya.del("TianShuWindow");}();}function login(e){gameRecordAll[e]?setGameRecord(gameRecordAll[e]):gameRecordAll[e]=gameRecord,getseven(e);}async function getseven(e,t=[26,35,44,5,7]){const i=laya.get("SevenDayResultWindow");i.uuid=e,gameRecord.req=new Set(t),setTimeout((()=>{Array.from(gameRecord.req,(e=>i.sendReq(e))),laya.del("SevenDayResultWindow",1e3);}),0);}async function kanshu(){setTimeout((async()=>{var e,t;await sleep(1e3);const i=laya.get("KanShuWindow",!0);0==(null==(e=i.jbpUserData)?void 0:e.Status)&&(i.onKanShuClick(),await sleep(2e3),i.onUpdateAwardStatus(),await sleep(1e3)),1==(null==(t=i.jbpUserData)?void 0:t.Status)&&(i.autoClickAllPeach(),await sleep(1e3),i.onShowEvent(),await sleep(500),i.onShowEvent(),laya.del("KanShuWindow",3e3));}),0);}async function yueka(){var e;const t=laya.get("ZhiGouMonthCardView");if(t.updateAllInfo(),null==(e=t.cardData)?void 0:e.bActive){t.getBtnClick();for(let e=0;e<4;e++)t.addItemClick(e);}laya.del("ZhiGouMonthCardView",1e3);const i=laya.get("NewWeekCardView");i.updateAllInfo(),"领取"==i.getBtn._text&&i.getBtnClick(),laya.del("NewWeekCardView",1e3);}async function wujiang(){var e,t,i,n,a;const l=laya.get("GeneralOpenWindow"),o=1e3*(null==(a=null==(n=null==(i=null==(t=null==(e=null==l?void 0:l.newView)?void 0:e.freeTimeTxt)?void 0:t._text)?void 0:i.split(":"))?void 0:n.map(Number))?void 0:a.reduce(((e,t,i)=>e+t*Math.pow(60,2-i)),0))||0;o?setTimeout(wujiang,o):l.onNewOpenBag(8100101,3),laya.del("GeneralOpenWindow",5e3),wait((()=>laya.find("WindowLayer","GeneralOpenResultWindow"))).then((e=>null==e?void 0:e.Close()));}async function drum(){var e;const t=laya.get("GuildDrumWindow",!1);null==t||t.initDrums(),t.updateItems(),await sleep(1e3);let i=null==(e=null==t?void 0:t.itemList)?void 0:e.find((e=>e.leftTime));timer.loop("drum",(()=>null==i?void 0:i.btnClick()),300,(null==i?void 0:i.leftTime)||0,(()=>laya.del("GuildDrumWindow",500)));}async function autoSign(e=!1){try{await sleep(1e4);const t=laya.get("DailySignNewView",!1);if(2==(null==t?void 0:t.signState))for(let i=0;i<t.itemList.length;i++){let n=t.itemList[i].baseData.ID;9020101!=n&&n.toString().startsWith("90")&&e||1==t.itemList[i].type&&(t.itemList[i].OnSignClick(),tooltipSGS("自动签到已完成<br>如需关闭，可在小抄设置中关闭"),await sleep(500));}for(let e=0;e<(null==t?void 0:t.totalItemList.length);e++)3==t.totalItemList[e].type&&(t.totalItemList[e].OnSignClick(),await sleep(500));if(laya.del("DailySignNewView",1e4),!e){const e=redUI(laya.get("WyqjBigView"),"WyqjSmallView")[0];null==e||e.Init(),null==e||e.onClickTiYanBtn(),laya.del("WyqjBigView",3e3);}}catch(t){console.error(t);}}async function task(){const e=laya.get("TaskDailyView");e.taskPanel.contentSp.drawContaniers.filter((e=>{var t;return null==(t=null==e?void 0:e.taskvo)?void 0:t.CanAward})).forEach((e=>e.onOpClick())),setTimeout((()=>{Array.from({length:3},((t,i)=>{var n;return null==(n=e.topDayTask)?void 0:n.onClickItem(i)})),e.manager.HasJDRewardRed&&e.onceRewardClick(),laya.del("TaskDailyView",3e3);}),3e3);const t=laya.get("IndpdtPanelWindow2");t.enterFunc();const i=i=redUI(redUI(t,"CommonExchangeView")[0],"NewPlayerSignGiftView")[0];null==i||i.Init();const n=redUI(t,"NewFuLiBattlePassTabView")[0];(null==i?void 0:i.panel)&&wait((()=>laya.find(i.panel,"Box",""))).then((e=>{var t;return null==(t=null==e?void 0:e.filter((e=>{var t;return null==(t=null==e?void 0:e.taskUserVo)?void 0:t.CanAward})))?void 0:t.forEach((e=>e.onItemClick()))})),n&&(n.Init(),n.clickTab(1),n.curView.taskPanel.contentSp.drawContaniers.filter((e=>{var t;return null==(t=null==e?void 0:e.taskvo)?void 0:t.CanAward})).forEach((e=>e.onOpClick())),setTimeout((()=>{n.clickTab(0),n.tabGroup.btnList[0].redPointIsShow&&n.curView.onClickGetAll();}),3e3)),laya.del("IndpdtPanelWindow2",1e4);const a=laya.get("ActivityWindow");a.enterFunc(),redUI(a).flatMap((e=>{try{return redUI(e)}catch{return []}})).flatMap((e=>{try{return e.itemArr.map((e=>e.getAwardBtn))}catch{return []}})).filter((e=>e.visible)).forEach((e=>e.onClick())),setTimeout((()=>{var e;return null==(e=laya.find("WindowLayer","TaskReqRewardWindow"))?void 0:e.Close()})),timer.delay("VuplexWebView",(()=>a.Hide()),500),laya.del("ActivityWindow",3e3);}function redUI(e,t=!1){var i,n,a,l,o;return (null==(o=null==(l=null==(a=null==(n=null==(i=null==e?void 0:e.tabGroup)?void 0:i.btnList)?void 0:n.filter((e=>t||e.redPointIsShow)))?void 0:a.map((t=>{let i=e.viewStack.childInitDataList.findIndex((e=>e==t.value));return i<1&&(i=t.value),e.viewStack.selectedIndex=i,i})))?void 0:l.filter((i=>"boolean"==typeof t||e.viewStack._childList[i]==t)))?void 0:o.map((t=>e.viewStack._childUIList[t])))||[]}function getgift(e=""){const t=laya.get("GiftExchangeWindow");t.giftInput.text=e,t.getClicked(),laya.del("GiftExchangeWindow",1e4);}async function getmail(){var e,t,i,n,a,l,o,s,r;const d="MailWindow"==(null==this?void 0:this.name)?this:laya.find("WindowLayer","MailWindow")||laya.get("MailWindow"),c=null==d?void 0:d.mailContentWindow;if(Array.isArray(null==c?void 0:c.winArr)){null==(t=null==(e=laya.class("ActivityManager"))?void 0:e.AskRechargeInfoAgain)||t.call(e),await sleep(1e3);for(const e of ((null==(i=d.manager)?void 0:i.systemMailList)||[]).filter((({mid:e})=>e))){let t=e.mid;if("道具过期提醒"==e.title||"不良游戏行为警告"==e.title)null==(n=d.manager)||n.DeleteMail(t);else if(e.hasAttachMent){e.read||null==(a=d.manager)||a.ReadMail(t);let i=e.AttachmentType,n=(null==(l=e.attachment.getStringKey("key"))?void 0:l[0])??"",u=e.fromUserName&&"系统未知好友"!=e.fromUserName?e.fromUserName:"";if(1==i){let t=u?2:0;c.ChangeWindow(t,e),null==(o=c.winArr[t])||o.getBtnClick(),null==(s=c.winArr[t])||s.Close(),c.close();}else 2==i&&(null==(r=d.manager)||r.SendClientDbsGetgmawardReq(n,t,u));await sleep(500),setTimeout((()=>{var i;e.read&&e.Geted&&(null==(i=d.manager)||i.DeleteMail(t));}),1e3);}}laya.del("MailWindow",1e4);}}const secKill=(()=>{let e,t,i=null,n=0,a="";function l(){i=null,document.querySelectorAll('.left input[type="checkbox"]').forEach((e=>{e.checked=!1;}));}function o(l=900,o=50){timer.loop("seckill",(()=>{var l;return e=laya.find("WindowLayer","ActivityWindow","WelfareSeckillView")||laya.get("WelfareSeckillView"),(null==(l=null==e?void 0:e.itemList)?void 0:l.length)?(t=e.itemList.find(((e,t)=>{var n;return t==i||(null==(n=e.data)?void 0:n.goods_id)==i})),"function"==typeof(null==t?void 0:t.buyHpItemHandler)&&(timer.set("seckill",s,n+50),void tooltipSGS(`秒杀连点器启动！\n${a}`))):null}),o,l/o|0,(()=>tooltipSGS("未找到秒杀面板！\n连点器秒杀失败！")));}function s(e=300){null==t||t.buyHpItemHandler(),timer.loop("seckill",(()=>{var e,i,n,a,o;null==t||t.buyHpItemHandler(),0==(null==(i=null==(e=t)?void 0:e.selloutTex)?void 0:i.visible)&&(null==(o=null==(a=null==(n=null==e?void 0:e.limitCount)?void 0:n._innerHTML)?void 0:a.includes)?void 0:o.call(a,"0/"))||(l(),timer.clear("seckill"));}),e);}return (e,t,s="",r=1e3)=>{var d;if(!1===e)l(),timer.clear("seckill"),tooltipSGS("秒杀连点器已取消！");else if(void 0!==e&&e!==i){n=t||timer.now();let l=n-r,c=l-timer.now();i=e,a=s||(null==(d=initMap.goodsID(e))?void 0:d.name)||"",c>1?(tooltipSGS(`${(c/6e4).toFixed(1)}分钟后启动秒杀连点器！\n${a}`),timer.set("seckill",o,l)):o();}return i}})();async function confirm(e={},t="",i=null,n=0){n&&await sleep(n);let a=await wait((()=>laya.find("PromptLayer","ConfirmWindow")));if(!a)return null;Array.isArray(a)||(a=[a]),a.forEach((n=>{if(!(null==n?void 0:n.confirmData))return;if(Object.entries(e).some((([e,t])=>n.confirmData[e]!=t)))return;"boolean"==typeof i&&n.checkBox&&(n.checkBox.selected=i);let a=n.confirmData.buttonArr.find((e=>e.label==t));a.callBack&&a.thisObject&&a.callBack.apply(a.thisObject,a.callBackParams),n.confirmData.clickClose&&n.RemoveFromParent();}));}function invite(e="浩铭er",t=!1){var i;const n=laya.get("SzxyHelpWin");return n.enterWindow(e),(null==(i=null==n?void 0:n.btnHelp)?void 0:i.enabled)?(n.onClickHelp(),laya.del("SzxyHelpWin"),!0):(t&&tooltipSGS("助力已完成，非常感谢！"),laya.del("SzxyHelpWin"),!1)}const DI=0,DING=65280,RAND=65282,globalState={inviteName:"",UsedGeneralSkinID:{UsedGeneralSkinID:{}},goods:[],lotteries:[],closeIframe:!1,autoBotStatus:30,autoBotInfinite:!1,recGoods:{}};let Id_Key_Value=[["padding","PADDING",0],["skinSwitch","SKIN_SWITCH",!1],["generalSwitch","GENERAL_SWITCH",!1],["skinStateSwitch","SKIN_STATE_SWITCH",!0],["skinStateBlockSwitch","SKIN_STATE_BLOCK_SWITCH",!1],["skinPaperSwitch","SKIN_PAPER_SWITCH",!0],["allPaperSwitch","ALL_PAPER_SWITCH",!1],["cardBackSwitch","CARD_BACK_SWITCH",!1],["seatUISwitch","SEAT_UI_SWITCH",!0],["autoSignSwitch","AUTO_SIGN_SWITCH",!1],["autoSignSkipSwitch","AUTO_SIGN_SKIP_SWITCH",!1],["autoInviteSwitch","AUTO_INVITE_SWITCH",!1],["autoDrumSwitch","AUTO_DRUM_SWITCH",!1],["autoWuJiangSwitch","AUTO_WUJIANG_SWITCH",!1],["autoKanShuSwitch","AUTO_KANSHU_SWITCH",!1],["autoYueKaSwitch","AUTO_YUEKA_SWITCH",!1],["skipWindowSwitch","SKIP_WINDOW_SWITCH",!1],["skipProbWindowSwitch","SKIP_PROB_WINDOW_SWITCH",!1],["skipADSwitch","SKIP_AD_SWITCH",!0],["CDKNotificationSwitch","CDK_NOTIFICATION_SWITCH",!0],["killEffectSwitch","KILL_EFFECT_SWITCH",!1],["wuxieSwitch","WUXIE_SWITCH",!1],["msgBlockSwitch","MSG_BLOCK_SWITCH",!1],["rogueCitySwitch","ROGUE_CITY_SWITCH",!0],["cardLabelSwitch","CARD_LABEL_SWITCH",!0],["tianshuSwitch","TIANSHU_SWITCH",!0]];const globalConfig=new Proxy(Object.fromEntries(Id_Key_Value.map((([e,t,i])=>(null===localStorage.getItem(t)&&localSet(t,i),[e,localGet(t,i)])))),{set:function(e,t,i){var n;const a=Id_Key_Value.find((([e])=>e===t));if(!a)return !1;localSet(a[1],i);if(window.event&&"server-sync"===(null==(n=window.event.detail)?void 0:n.source))return e[t]=i,!0;return debounce(recSetting({username:user.userID,settingKey:t,value:i}),300),e[t]=i,"padding"==t&&(window.padding=i),!0}}),UI={seatWidthPercent:.3,firstUpdateSeatUI:!1,scoreFrameTotal:10,scoreFrameIndex:0,paddingLeft:10,paddingRight:15,paddingTop:30,paddingBottom:0,paddingLeftTopExtra:0,selectStarted:!1,leftRightTop:20,stackCardAreaHeight:0,stackCardAreaY:0,MAX_SEAT_WIDTH:149,inPopFirstTarget:!1,unscaledWidth:146,unscaledHeight:172,MAX_HEIGHT:180,MAX_WIDTH:150,scale:1,selfSeatUiUnscaledHeight:178,rightBarWidth:221,seatUIs:[],cities:[]};var iｉl="jsjiami.com.v7",liiIIIIl,l1IIlIi,i1Iiii1I,li1II11i,lIIl1ill;liiIIIIl=3040,l1IIlIi=192,liiIIIIl>>=4,li1II11i="hs",lIIl1ill="hs",function(e,t,i,n,a){const l=ilIlIii;lIIl1ill+=a="up",li1II11i=i(li1II11i=(n="tfi")+li1II11i),lIIl1ill=i(lIIl1ill),i=0;const o=e();for(;--l1IIlIi+t;)try{n=-parseInt(l(313,"Ryi@"))/1+parseInt(l(315,"(]Ln"))/2*(-parseInt(l(325,"wdbD"))/3)+parseInt(l(321,"wx0F"))/4+-parseInt(l(304,"IoNl"))/5+parseInt(l(314,"btYu"))/6*(-parseInt(l(320,"u*[R"))/7)+-parseInt(l(319,"R!Ft"))/8+parseInt(l(323,"hX#["))/9;}catch(s){n=i;}finally{if(a=o[li1II11i](),liiIIIIl<=l1IIlIi)i?i1Iiii1I?n=a:i1Iiii1I=a:i=a;else if(i==i1Iiii1I.replace(/[VSOyqrwIKgtuPlxdBNfF=]/g,"")){if(n===t){o["un"+li1II11i](a);break}o[lIIl1ill](a);}}}(llliilli,315205,(function(e,t,i,n,a,l,o){return (e=(e=(e=arguments[0])[t="split"](""))[i="reverse"]("v"))[n="join"]("")})),llliilli&&(iｉl=18446);const user=new Proxy({},{get(e,t,i){const n=ilIlIii,a={HzWUy:function(e,t){return e==t},dSlDb:n(308,"rqLZ"),fIMSx:function(e,t){return e==t},iizfj:function(e,t){return e==t}};return a[n(306,"!&8x")](t,a.dSlDb)?()=>e:a[n(312,"IoNl")](t,"gh")?t=>Reflect[n(307,"5j0K")](e,"g",t,i):a[n(305,"wx0F")](t,"tt")?t=>Reflect[n(311,"03jS")](e,"t",t,i):a[n(317,"^vgh")](t,"a")?t=>Reflect[n(310,"GGm@")](e,"v",t,i):Reflect.get(e,t,i)},set:(e,t,i,n)=>(["v","g","t"][ilIlIii(316,"vq2m")](t)&&(t+="ip"),Reflect.set(e,t,i,n),!0)});function ilIlIii(e,t){const i=llliilli();return ilIlIii=function(t,n){let a=i[t-=302];if(void 0===ilIlIii.qaFHOx){const t=function(e,t){let i,n,a=[],l=0,o="";for(e=function(e){let t="",i="";for(let n,a,l=0,o=0;a=e.charAt(o++);~a&&(n=l%4?64*n+a:a,l++%4)?t+=String.fromCharCode(255&n>>(-2*l&6)):0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let n=0,a=t.length;n<a;n++)i+="%"+("00"+t.charCodeAt(n).toString(16)).slice(-2);return decodeURIComponent(i)}(e),n=0;n<256;n++)a[n]=n;for(n=0;n<256;n++)l=(l+a[n]+t.charCodeAt(n%t.length))%256,i=a[n],a[n]=a[l],a[l]=i;n=0,l=0;for(let s=0;s<e.length;s++)n=(n+1)%256,l=(l+a[n])%256,i=a[n],a[n]=a[l],a[l]=i,o+=String.fromCharCode(e.charCodeAt(s)^a[(a[n]+a[l])%256]);return o};ilIlIii.zFFeTn=t,e=arguments,ilIlIii.qaFHOx=!0;}const l=t+i[0],o=e[l];return o?a=o:(void 0===ilIlIii.dCdfeE&&(ilIlIii.dCdfeE=!0),a=ilIlIii.zFFeTn(a,n),e[l]=a),a},ilIlIii(e,t)}function llliilli(){const e=[iｉl,"VjSsKjtiwaymBrif.Pdlcfom.Fvlu7dIOxqgNBIq==","WRexhG","aqZcRCoBhxe","raxcN8omcexdNq","c0FcGG","WPdcT8kp","i8kpwbNdKW","ymkHk1HRsSkFWOPodg4"].concat(["WRaaW4rswmk6W5ddNu4","W5DrFSoFWP1GEq","W7VcTCkQkL5OvLa","WPi5WOFdG2S","C8kczSkEufaPr8oc","jWHYW5tdSbnrWP/cQCoyr1D4","W53cTM0pcZFcMmk9sI1n","qCodFd3dGcldG8oXW7hcNSkngfa","r2pdHmkvDHxcSYtcQJyJgSka"].concat(["dbXldmoMW6FcN8kxWQddMCoDbhDb","WQaLg8oXl3hcRSksW6uGf8oou8km","W7RcVWVcGwpcUSo2WRVcI8owsurN","W6b+s8kcgtz3cmoaf8oQgr8","xcavhJWKBejaxSoyC2y","Dmo2lxJcNKPeFuCNgSosWPK","gCkEnM3cMq","W5hdT3xcHSoV"]));return (llliilli=function(){return e})()}const initMap={},gameRecord={};function setGameRecord(e){Object.assign(gameRecord,e);}const gameRecordAll=localGet("gameRecord",{}),rogueMap={},timer={tasks:{},corr:0,shift:0,now(e=!0){return Date.now()+this.corr+(e?0:this.shift)},sync(e){this.corr=1e3*(e.ServerTime-28800)-Date.now(),this.shift&&(e.ServerTime+=this.shift/1e3|0);},update(e=Date.now()){var t;null==(t=laya.class("TimerManager"))||t.SendHeartbeart(e);},modify(e=null){this.shift=e?e-this.now():0,this.update();},local(e){let t=new Date(e??this.now()),i=t.getTimezoneOffset();return t.setMinutes(t.getMinutes()-i),t.toISOString()},loop(e,t,i,n=1/0,a){this.clear(e);let l=setInterval((()=>{t(),--n<=0&&(this.clear(e),"function"==typeof a&&a());}),i);return this.tasks[e]={intervalId:l,callback:t},this.tasks[e].intervalId},delay(e,t,i){this.clear(e);let n=setTimeout((()=>{this.clear(e),t();}),i);return this.tasks[e]={timeoutId:n,callback:t},this.tasks[e].timeoutId},set(e,t,i,n=18e5){this.clear(e);const a=this.now(),l=(i??a)-a;if(l>1){let a=setTimeout((()=>this.set(e,t,i,n)),l<n?l:n);this.tasks[e]={timeoutId:a,callback:t};}else t();},trigger(e){if(!this.tasks[e])return null;let{timeoutId:t,callback:i}=this.tasks[e];return t&&(clearTimeout(t),delete this.tasks[e]),"function"==typeof i&&(i(),!0)},clear(e){e?Array.isArray(e)||(e=[e]):e=Object.keys(this.tasks),e.filter((e=>this.tasks[e])).map((e=>{if(!this.tasks[e])return null;let{intervalId:t,timeoutId:i}=this.tasks[e];return i&&clearTimeout(i),t&&clearInterval(t),delete this.tasks[e],e}));}},game=new Proxy({turn:0,round:0,phase:0,currentID:void 0,isGameStart:!0,isPassed:!1,spellSpace:{},domContainer:["temp","phase","round","turn","game","long"].reduce(((e,t,i)=>(e[t]=e[i]=[],e)),{}),end(e){(this.isGameStart&&!this.isPassed||!1===e)&&(this.isGameStart=!1,this.isPassed=!0,UI.seatUIs=[],UI.friendGeneral=0,getSeatUIs(null),laya.reset(),document.querySelectorAll(".mizhu").forEach((e=>e.style.display="none")),console.warn("游戏已结束！"),timer.clear("gameStart")),e&&this.isPassed&&(this.isPassed=!1,this.turn=0,this.round=0,this.phase=0,this.currentID=void 0,this.spellSpace={},getseven(user.userID),room.reset(),console.warn("游戏已重置！游戏即将开始！"),retry((()=>laya.init())));},ready(e){this.end(!0),room.cardList=e;let t=initMap.cardIDsOrder.filter((t=>e.includes(t))),i=t.concat(e.filter((e=>!t.includes(e)))).filter(Boolean);Qcard.init(i),Zone.init(i,"2-255"),room.isGuoZhan=e.includes(1150),room.isDouDiZhu=e.includes(13005),room.isShanHeTu=e.includes(20100),room.isShanHeTu&&(rogueMap.sanBanFu=0),domInit(),room.isShanHeTu&&patchSkinBtn(),[3338].forEach((e=>delete this.spellSpace[e])),console.warn("牌堆初始化完成"),recGameRecord(1,[]);},start(){!this.isGameStart&&room.size&&(this.isGameStart=!0,this.isPassed=!1,console.warn("游戏开始！["+room.seatIDs+"] > "+room.mySeats),timer.trigger("gameStart"),resetOrderContainer(),hideOrderContainer(room.size),Zone.draw());},enter(e,t,i){var n,a,l,o,s;if(e>0)this.turn=e,this.round=0,this.clear("turn"),1==e&&(this.clear("game"),this.start());else {0==t?(this.currentID=i,this.round++,this.phase=0,[7011,3090,2143,3271].forEach((e=>delete this.spellSpace[e])),document.getElementById("suit").innerText="",document.getElementById("boTu").innerText="",document.getElementById("result").innerHTML="",Zone.draw("2-255"),this.clear("round"),!0===globalState.autoBotSwitch&&laya.limit>0&&(null==(o=null==(l=null==(a=null==(n=laya.gamescene)?void 0:n.topMenu)?void 0:a.areaServerLabel)?void 0:l.text)?void 0:o.includes("身份"))&&(this.currentID==room.seatUIs.filter((e=>e.seat.currentHp>0)).map((e=>e.seat.index)).slice(-1)[0]?laya.auto(3):this.currentID!=room.mySeats[0]&&laya.auto(!0))):this.phase++,this.clear("phase");let e=document.getElementById("phrase"),r=parseInt(null==(s=e.innerText.match(/\(([0-9])\)$/))?void 0:s[1]);this.phase==r?e.innerText=e.innerText.replace(/(回合)?(.{2,3})(阶段)? ?\(([0-9])\)$/,`$2>${["开始时","准备","判定","摸牌","出牌","弃牌","结束","结束时","结束后"][t]}($4)`):e.innerText=`${["回合开始时","准备阶段","判定阶段","摸牌阶段","出牌阶段","弃牌阶段","结束阶段","回合结束时","回合结束后"][t]} (${this.phase})`;}},clear(e,t,i){let n=this.domContainer[e];for(let a=n.length-1;a>=0;a--)void 0===i&&t!==n[a].SpellID&&n[a].count--,n[a].count>0&&(t!==n[a].SpellID||i!==n[a].SeatID)||(n[a].element.remove(),n.splice(a,1));}},{ownKeys:e=>Reflect.ownKeys(e.spellSpace),getOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e.spellSpace,t),deleteProperty:(e,t)=>Reflect.deleteProperty(e.spellSpace,t),get:(e,t,i)=>t in e?e[t]:Reflect.get(e.spellSpace,t,e.spellSpace),set:(e,t,i,n)=>(t in e?e[t]=i:Reflect.set(e.spellSpace,t,i,e.spellSpace),!0)}),room={cardList:[],seatUIs:[],seatIDs:[],orderIDs:[],mySeats:[],generals:{},shift:0,isShanHeTu:!1,isGuoZhan:!1,isDouDiZhu:!1,size:void 0,firstID:void 0,seatPos:(e=8)=>({0:[],1:[0],2:[0,4],3:[0,3,5],4:[0,1,4,7],5:[0,1,3,5,7],6:[0,1,3,4,5,7],7:[0,1,2,3,5,6,7],8:[0,1,2,3,4,5,6,7]}[e]),dealCard:()=>null,reset(){this.cardList=[],this.seatUIs=[],this.seatIDs=[],this.orderIDs=[],this.mySeats=[],this.generals={},this.shift=0,this.isShanHeTu=!1,this.isGuoZhan=!1,this.isDouDiZhu=!1,this.size=void 0,this.firstID=void 0,this.dealCard=(e,t)=>{e=parseInt(e),this.orderIDs.includes(e)||(void 0===this.firstID&&(this.firstID=e,console.warn("[PubGsCMoveCard]先手位置:"+e)),this.orderIDs.push(e),t>0&&!this.mySeats.includes(e)&&(this.mySeats.length?this.mySeats.push(e):this.setMyID(e)),this.update(!1,this.orderIDs)),this.orderIDs.length==this.size&&(this.dealCard=()=>null);};},getOrder(e){var t;if(this.seatUIs.length)return null==(t=this.seatUIs.find((t=>t.seatID==e)))?void 0:t.order;let i=this.seatIDs.indexOf(this.firstID??this.seatIDs[0])%this.size,n=this.seatIDs.indexOf(parseInt(e));return -1!==n?(n-i+this.size)%this.size:void 0},getIndex(e){if(this.seatUIs.length)return this.seatUIs.findIndex((t=>t.seatID==e));let t=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,i=this.seatIDs.indexOf(parseInt(e));if(i<0)return;let n=(i-t+this.size)%this.size;return this.seatPos()[n]},getID(e){var t;if(this.seatUIs.length)return null==(t=this.seatUIs[this.seatPos().indexOf(parseInt(e))])?void 0:t.seatID;let i=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,n=this.seatPos().indexOf(parseInt(e));if(n<0)return;let a=(n+i+this.size)%this.size;return this.seatIDs[a]},sequence(e){let t=this.seatIDs.indexOf(e);return t<0?[]:this.seatIDs.slice(t).concat(this.seatIDs.slice(0,t))},update(e,t=this.orderIDs){if((t=t.slice()).length>this.seatIDs.length||t.length==this.seatIDs.length&&!1!==e)this.seatIDs=t,this.size=t.length;else if(e){for(let e=t.length;e<this.size;e++)t.push(((t[e-1]??-1)+1)%this.size);this.seatIDs=t,this.size=t.length;}this.draw();},fromUI(e=[]){var t;this.seatUIs=e,this.size=this.seatUIs.length,this.firstID=(null==(t=this.seatUIs.find((e=>0==e.order)))?void 0:t.seatID)??this.firstID,this.seatIDs=this.seatUIs.map((e=>e.seatID)),this.setMyID(this.seatUIs[0].seatID),this.draw();},setMyID(e){if(void 0!==e&&this.mySeats[0]!==e){let t=this.mySeats.indexOf(e);t>-1&&this.mySeats.splice(t,1),this.mySeats.unshift(e);}},setGeneral(e,t,i=0,n=!1){if(!initMap.generalDict[t])return;this.generals[e]||(this.generals[e]=Array(this.isGuoZhan?2:1).fill(0)),this.generals[e][i]=t,this.isGuoZhan&&!n&&timer.delay("seatUIs",(()=>laya.seatUIs()),3e3);let a=this.getOrder(e),l=document.getElementById(a+1);l&&l.style.setProperty("--No-content",`"${room.name(e)}"`);},find(e,t,i=!1){var n;return Array.isArray(t)||(t=[t]),null==(n=this.generals[e])?void 0:n.find((e=>t.find((t=>{var n;return i?null==(n=initMap.skinMap[e])?void 0:n.has(t):e==t}))))},name(e,t=!0){var i,n,a,l;let o=this.getOrder(e);if(void 0===o)return "";let s=(null==(i=this.generals[e])?void 0:i.length)>1?this.generals[e].map((e=>initMap.generalDict[e])):[null==(l=null==(a=null==(n=this.seatUIs.find((t=>t.seatID==e)))?void 0:n.seat)?void 0:a.general)?void 0:l.CardName];return null===t&&1!=(null==s?void 0:s.length)&&(s=[]),((null==s?void 0:s.some(Boolean))?s.map((e=>e||"暗")).join("丨"):"一二三四五六七八"[o]+"号位")+(t?"丨"+"一二三四五六七八"[o]:"")},draw(){this.seatIDs.forEach((e=>{let t=this.getOrder(e),i=document.getElementById(t+1);if(!i)return;let n=room.name(e);i.style.setProperty("--No-content",`"${n}"`);})),getSeatUIs();}},Qcard=new Proxy({name:{},color:Array.from({length:7},(()=>new Set)),number:Array.from({length:14},(()=>new Set)),query:new Set,select:{name:new Set,color:new Set,number:new Set},cards:[],QCARD:class{constructor(e,t,i,n,a){this.id=e,this.name=t,this.color=i,this.number=n,this.type=a,this.key=-1;}plot(e){let t=this._button;if(!t){if(t=this._button=document.createElement("button"),t.className=this.color<=2?"shoupai R":"shoupai",!this.id)return t;t.id="Qcard"+this.id,t.innerHTML=`<span>${n2C(this.color)+n2N(this.number)}</span><br>${this.name.substring(0,2)}`;}return this.key===e&&1!=e||(this.key=e,t.style.backgroundColor=0===e?"":1===e?"cyan":"#23201d",t.title=0===e?"牌堆":2===e?"弃牌堆":Card.findKZ(this.id).zones.map((e=>{let[t,i,n]=e.split("-").map((e=>parseInt(e)));return Zone.name(i,t,null,n,n)})).join("/")),t}},[Symbol.iterator]:function*(){for(let e of this.cards)void 0!==e&&(yield e);},init(e){this.name={},this.color=Array.from({length:7},(()=>new Set)),this.number=Array.from({length:14},(()=>new Set)),this.type=Array.from({length:4},(()=>new Set)),this.query=new Set,this.select={name:new Set,color:new Set,number:new Set},this.cards=[],e.forEach((e=>{let{name:t,color:i,number:n,type:a}=allCard[e];t in this.name||(this.name[t]=new Set),this.name[t].add(e),this.color[i].add(e),this.number[n].add(e),this.type[a].add(e),3==i&&n>=2&&n<=9&&this.number[0].add(e),t.match(/^(冰|火|雷)?杀$/)&&this.color[Math.ceil(i/2)+4].add(e),this.cards[e]=new this.QCARD(e,t,i,n,a);}));},onquery(e,t){if(this.select[e].delete(t)){if(this.select[e].size)return Array.from(this[e][t]).forEach((e=>this.query.delete(e))),void this.draw()}else this.select[e].add(t);this.query=["name","number","color"].filter((e=>this.select[e].size)).reduce(((e,t)=>new Set(Array.from(this.select[t]).flatMap((e=>Array.from(this[t][e]))).filter((t=>!e.size||e.has(t))))),new Set),this.draw();},queryone(e,t){this.query=new Set(Array.from(this[e][t])),this.draw();},draw(){const e=document.getElementById("cardTypeDetail");if(e.innerHTML="",0==this.query.size)return;let t=new Set(Zone.unknown),i=new Set(Zone.qipai),n=initMap.cardIDsOrder.filter((e=>this.query.has(e))).reduce(((e,n)=>(t.has(n)?e[0].push(n):i.has(n)?e[2].push(n):e[1].push(n),e)),[[],[],[]]);[0,1,2].forEach((t=>n[t].forEach((i=>e.appendChild(this.cards[i].plot(t))))));}},{get(e,t,i){return "number"==typeof t||"string"==typeof t&&!isNaN(t)?e.cards[t]:Reflect.get(...arguments)}}),_Card=class e{static label(t){if(e.groups.has(t))return e.groups.get(t);const i=e.LABELs.shift();return e.groups.set(t,i),i}constructor(t,i=null,n="12-255",a=null,l=null){var o;this._key=t,this.zone=n,this.id=i??(null==(o=this.next)?void 0:o.id)??this.key,this.next=a,this.prev=l,e.nodes.has(t)||e.nodes.set(t,new Set),e.nodes.get(t).add(this);}get head(){let e=this;for(;e.prev;)e=e.prev;return e}get end(){let e=this;for(;e.next;)e=e.next;return e}get key(){return this._key}set key(t){this._key!=t&&(e.nodes.get(this._key).delete(this),this._key=t,e.nodes.has(t)||e.nodes.set(t,new Set),e.nodes.get(t).add(this));}static get(t){return e.nodes.has(t)?Array.from(e.nodes.get(t)):[]}static init(t,i){return e.key=0,e.nodes=new Map,e.groups=new Map([[0,"?"]]),e.LABELs=Array.from({length:62},((e,t)=>String.fromCharCode(t+65))),t.map((t=>new e(0,t,i)))}toString(){return this.next?this.prev?this.key+"<"+this.next.toString():this.zone+":"+this.key+"<"+this.next.toString():"["+this.id+"]"+(this.key>0?allCard[this.id].ncn:"？")}plot(t){var i;if(this.key<0&&this.key%2==0&&this.next)return this.next.plot(t);let n=this._button;return n||(n=this._button=document.createElement("button"),n.className="shoupai"),n.disabled=this.key<=0&&this.key%2==0,(t||this.key!=(null==(i=null==n?void 0:n.dataset)?void 0:i.key)||this.key<=0&&e.label(this.key)!=n.innerHTML)&&(n.className="shoupai",n.id="card"+this.id,n.dataset.key=this.key,this.key>0?(n.classList.remove("G"),allCard[this.id].color>2?n.classList.remove("R"):allCard[this.id].color>0&&n.classList.add("R"),n.style.color="",n.style.fontSize="",n.title=new Zone("unknown").cards.has(this)?e.findKZ(this.id).zones.map((e=>{let[t,i,n]=e.split("-").map((e=>parseInt(e)));return Zone.name(i,t,null,n,n)})).join("/"):allCard[this.id].ncn,n.innerHTML=`<span>${allCard[this.id].cn}</span><br>${allCard[this.id].name.substring(0,2)}`):(n.classList.add("G"),n.innerHTML="？")),n}swap(e){if(!e||e==this)return this;for([this.key,e.key]=[e.key,this.key],[this.id,e.id]=[e.id,this.id],[this.next,e.next]=[e.next,this.next],this.next&&(this.next.prev=this),e.next&&(e.next.prev=e);e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;for(e.plot(!0),Zone.draw(e.zone),e=this;e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;return e.plot(!0),Zone.draw(e.zone),this}create(t){const i=new e(this.key,this.id,this.zone,this.next,this);return this.key=t,this.next&&(this.next.prev=i),this.next=i,this}delete(){let t=!1;if(this.next){let i=this.next;return this.key=i.key,this.id=i.id,this.next=i.next,i.next?i.next.prev=this:new Zone("unknown").cards.delete(i)&&(t=!0,this.prev&&new Zone("unknown").cards.add(this)),e.nodes.get(i.key).delete(i),t}return 0===this.key?(this.key=this.id,counter(this.id,this.key),!0):null}destroy(t){let i=!1,n=this.key;for(;n<0;)this.delete()&&(i=!0),e.unpack(n)&&(i=!0),n=this.key;return this.key!=t&&(this.key=t??this.id,counter(this.id,this.key)),this.prev?e.unpack(this.prev.key):(this.plot(!0),Zone.draw(this.zone)),i&&Zone.draw("unknown"),this}identify(t,i=null){if(null!==i&&console.count("REidentify"+i+">"+this),this.id==t)return this.key>0||(i&&(this.end.id=i),this.destroy()),this;let n,a=new Set([this.key]),l=[[this.key,[]]];for(;l.length>0;){let[i,o]=l.shift();if(n=e.find(i,t),n){o.concat(n).reduce(((e,t)=>e.swap(t).next),this);break}for(let t of e.get(i).filter((e=>e.next)))a.has(t.next.key)||(a.add(t.next.key),l.push([t.next.key,o.concat(t)]));}if(n){if(i){let e=this;for(e.id=i;e.next;)e=e.next,e.id=i;}return this.destroy(),this}return t>0?this.identify(0,t):(console.error("identify error: "+(t>0?t:i)+">"+this),null)}static move(t,i){Array.isArray(t)||(t=[t]);let{turn:n,round:a,phase:l}=game;return null==t||t.forEach((e=>Object.assign(e,{zone:i,turn:n,round:a,phase:l}))),Array.from(new Set(null==t?void 0:t.map((e=>e.key)))).filter((e=>e<=0)).map((t=>e.unpack(t))).length?Zone.draw("unknown"):Array.from(new Set(null==t?void 0:t.map((e=>e.key)))).filter((e=>e>0&&Qcard.query.has(e))).forEach((e=>{Qcard[e].plot("2-255"==i?2:1);})),t}static pack(t,i,n){if(!((null==t?void 0:t.length)>1&&(null==t?void 0:t.every((e=>e)))))return;let a,l=new Set(t.map((e=>e.key)));if(1===l.size)return [...l][0];if(e.key=e.key-1,n){if(1===new Set(t.map((e=>e.head.zone))).size)return null;let i=Array.from(e.nodes.keys()).filter((e=>e<0));for(let t=0;t>=e.key;t--)if(!i.includes(2*t-1)&&!i.includes(2*t-2)){a=2*t-n;break}i.filter((e=>e>a)).sort(((e,t)=>e-t)).forEach((t=>{e.get(t).forEach((e=>{e.key=e.key-2,e.head.plot(!0);}));})),a=-n;}else a=2*e.key-(i?2:1);return t.forEach((e=>{e.create(a),new Zone("unknown").cards.delete(e),i||new Zone("unknown").cards.add(e.end);})),Zone.draw("unknown"),a}static unpack(t){if(t>0)return !0;const i=e.get(t);let n=new Set(i.map((e=>{var t;return null==(t=e.next)?void 0:t.key}))),a=new Set(i.map((e=>e.head.zone)));if(1===i.length||!a.has("1-255")&&(1===a.size||1===n.size&&0!==t)){e.groups.has(t)&&(e.LABELs.unshift(e.groups.get(t)),e.groups.delete(t));let n=i.map((e=>e.delete())).some(Boolean);return Array.from(new Set(i.filter((e=>e.prev)).map((e=>e.prev.key)))).forEach((t=>e.unpack(t))),i.filter((e=>!e.prev)).forEach((e=>e.plot(!0))),Array.from(a).forEach((e=>Zone.draw(e))),n}return !1}static find(t,i){let n=e.get(t).find((e=>e.id==i));if(void 0===n&&0!=t){let a=e.get(0).find((e=>e.id==i));a&&(n=e.get(t).find((e=>0==e.end.key)),void 0!==n&&a.swap(n.end));}return n}static findIDs(t,i=!1,n=new Set,a=new Set){return a.add(t),t>0||!i&&0==t?n.add(t):(i||t%2!=0)&&e.get(t).forEach((t=>{if(t.next){let l=t.next.key;a.has(l)||e.findIDs(l,i,n,a);}else i&&n.add(t.id);})),Array.from(n)}static findKZ(t,i=!1,n=new Set,a=new Set){let l=t;return !(l instanceof e)&&t>0&&(l=e.get(t)[0]),l instanceof e||(l=e.get(0).find((e=>e.id==t))),l instanceof e&&(i||0!=l.key?(a.add(l.head.zone),n.has(l.key)||(n.add(l.key),(l.key<0||i&&0==l.key)&&e.get(l.key).forEach((t=>{t!=l&&e.findKZ(t,i,n,a);}))),l.prev&&e.findKZ(l.prev,i,n,a)):(a.add(""),n.add(0))),{keys:Array.from(n),zones:Array.from(a)}}};__publicField(_Card,"key",NaN),__publicField(_Card,"nodes",new Map),__publicField(_Card,"groups",new Map([[0,"?"]])),__publicField(_Card,"LABELs",Array.from({length:50},((e,t)=>String.fromCodePoint(t<20?9312+t:t<35?12861+t:12942+t))));let Card=_Card;const _Zone=class e{static get paidui(){return Array.from(new Set(Array.from(Card.get(0),(({id:e})=>e)).concat((e.obj["1-255"]??[]).map((({id:e})=>e)))))}static get qipai(){return (e.obj["2-255"]??[]).filter((({key:e})=>e>0)).map((({id:e})=>e))}static get unknown(){return Array.from(Card.get(0),(({id:e})=>e))}static shoupai(t){return (e.obj["5-"+t]??[]).filter((({key:e})=>e>0)).map((({id:e})=>e))}constructor(t,i=5,n=DING,a=null,l=null,o=null){var s;"number"==typeof t?(this.id=t,this.zone=i,0==this.id&&[0,1,2,3,9,12].includes(this.zone)&&(this.id=255),9==this.zone&&(this.zone=1),4==this.zone&&(this.id=this.id+"-"+(o||l||0)),8==this.zone&&(this.id="-"+(l||o||0)),this.zoneID=this.zone+"-"+this.id):"string"==typeof t?[this.zoneID,this.zone,this.id]=t.match(/(.*?)-(.*)/)??[t,t,""]:null==(s=null==t?void 0:t.every)||s.call(t,(e=>e instanceof Card)),this.zoneID in e.obj||(e.obj[this.zoneID]=[]),1==this.zone?this.pos=n===DING?DI:n===DI?DING:n:10===this.zone?this.pos=n:this.pos=RAND,this.count=a;}show(t=[]){if(isNaN(Card.key))return [];if(Array.isArray(t)||(t=[t]),0==t.filter((e=>e>0)).length)return [];let i=[],n=t.slice();if(this.pos==DING)i=this.cards.slice(-t.length).map((e=>e.identify(n.shift())));else if(this.pos!=RAND)i=this.cards.slice(this.pos,t.length).map((e=>e.identify(n.shift())));else if(1!=this.zone){let e=n.map((e=>Card.findKZ(e,!0).keys));this.cards.slice().sort(((e,t)=>t.key-e.key)).some((t=>{if(0==n.filter((e=>e>0)).length)return !0;e.some(((e,a)=>{if(e.includes(t.key))return i[a]=t.identify(n[a]),e.length=0,n[a]=null,!0}));})),n.forEach(((e,t)=>{var n,a,l,o;if(e&&(i[t]=null==(n=this.cards.find((e=>0==e.id)))?void 0:n.identify(e),void 0===i[t]&&(i[t]=null==(a=this.cards.find((e=>0==e.key)))?void 0:a.identify(e)),void 0===i[t])){let n=Card.get(e)[0];n?(i[t]=null==(o=null==(l=this.cards.find((e=>!i.includes(e))))?void 0:l.swap(n))?void 0:o.identify(e),console.error(this.zoneID+"SWAP Card ["+e+"] Shown")):(i[t]=new Card(e,e,this.zoneID),12!=this.zone&&console.error(this.zoneID+" No Card ["+e+"] Shown"));}}));}return e.draw(this.zoneID),i}remove(t=[],i,n){if(isNaN(Card.key))return [];Array.isArray(t)||(t=[t]),n&&(this.count=n);let a=[],l=t.slice();if(this.pos==DING)a=this.cards.splice(-this.count);else if(this.pos!=RAND)a=this.cards.splice(this.pos,this.count),1==this.zone&&[3208,7011,987,988].includes(i)&&(a=a.reverse());else if(t.filter((e=>e>0)).length>0){let e=l.map((e=>Card.findKZ(e,!0).keys));this.cards.slice().reverse().sort(((e,t)=>t.key-e.key)).some((t=>{if(0==l.filter((e=>e>0)).length)return !0;e.some(((e,i)=>{if(e.includes(t.key))return a[i]=this.cards.splice(this.cards.indexOf(t),1)[0],e.length=0,l[i]=null,!0}));})),l.forEach(((e,t)=>{var i;if(!e)return;let n=this.cards.findIndex((e=>0==e.id));if(-1===n&&(n=this.cards.findIndex((e=>0==e.key))),n>-1)a[t]=this.cards.splice(n,1)[0];else {let n=Card.get(e)[0],l=this.cards.findIndex((e=>!a.includes(e)));n&&l>=0?(a[t]=null==(i=this.cards.splice(l,1)[0])?void 0:i.swap(n),console.error(this.zoneID+"SWAP Card ["+e+"] Moved")):(a[t]=new Card(e,e,this.zoneID),12!=this.zone&&console.error(this.zoneID+" No Card ["+e+"] Moved"));}}));}else if(this.count==this.length||1==this.size)a=this.cards.splice(0,this.count);else if(1==this.zone||2==this.zone){var o=[...this.cards.filter((e=>e.key<=0)).sort(((e,t)=>t.key-e.key)),...this.cards.filter((e=>e.key>0))];if([11104,3488,862].includes(i)){var s=new Set(o.map((e=>e.key)));11104==i?s=new Set(Array.from(s).filter((e=>Card.get(e).some((e=>{var t;return null==(t=Qcard.type[3])?void 0:t.has(e.id)}))))):3488==i?s=new Set(Array.from(s).filter((e=>Card.get(e).some((e=>{var t,i,n;return (null==(t=Qcard.name["雷杀"])?void 0:t.has(e.id))||(null==(i=Qcard.name["火杀"])?void 0:i.has(e.id))||(null==(n=Qcard.name["冰杀"])?void 0:n.has(e.id))}))))):862==i&&(s=new Set(Array.from(s).filter((e=>Card.get(e).some((e=>Qcard.number[6].has(e.id))))))),o=o.filter((e=>s.has(e.key)));}a=o.slice(0,this.count),a.some((e=>e.key>0||e.key%2))&&Card.pack(o,!0),a.forEach((e=>this.cards.splice(this.cards.indexOf(e),1)));}else Card.pack(this.cards),a=this.cards.splice(0,this.count);return a.length!=this.count&&Array.from({length:this.count-a.length},(()=>(console.error(this.zoneID+" New Card Moved"),a.push(new Card(0,0,this.zoneID))))),t.filter((e=>e>0)).length==this.count?t.forEach(((e,t)=>{var i;return null==(i=a[t])?void 0:i.identify(e)})):a.filter((e=>e.key>0)).length==this.count&&a.forEach((({id:e},i)=>{t[i]=e;})),e.draw(this.zoneID),a}add(t){if(isNaN(Card.key))return;let i=Card.move(t,this.zoneID).slice();return this.pos==RAND||this.pos==DING?this.cards.splice(this.cards.length,0,...i):this.cards.splice(this.pos,0,...i.reverse()),e.draw(this.zoneID),t}set(t){isNaN(Card.key)||(e.obj[this.zoneID]=Card.move(t,this.zoneID),e.draw(this.zoneID));}get cards(){return e.obj[this.zoneID]??[]}get length(){var e;return (null==(e=this.cards)?void 0:e.length)??0}get size(){var e;return new Set((null==(e=this.cards)?void 0:e.map((e=>e.key)))??[]).size}static init(t,i){e.obj={unknown:new Set},e.obj[i]=Card.init(t,i);}static draw(t){var i,n;if(isNaN(Card.key))return;if(void 0===t)return void Object.keys(e.obj).filter((e=>"5"==e.split("-")[0])).forEach((t=>e.draw(t)));let a=null,l=null,[o,s,r]=(null==(i=t.split("-"))?void 0:i.map(Number))??[];if("unknown"==t)a="knownCards";else if(1==o)a="paiduiCards";else if(2==o)a="qipaiCards";else if(5==o)a=String(room.getOrder(s)+1);else {if(4!=o||!(r in initMap.markSpell))return;a="mark"+t;}l=document.getElementById(a);let d=Array.from(e.obj[t]??[]);if(2==o){let{turn:e,round:t,phase:i}=game;d=d.filter((i=>i.turn==e&&i.round==t));}if("unknown"==t&&(Array.from(new Set(d.map((e=>e.head.zone)))).forEach((t=>e.draw(t))),Qcard.draw()),d&&0!=d.filter((e=>e.key>0||e.key%2!=0)).length){if(l)l.querySelectorAll(":scope>.shoupai").forEach((e=>e.remove()));else {if(4!=o)return;null==(n=document.getElementById(String(room.getOrder(s)+1)))||n.insertAdjacentHTML("beforeend",`<div id="${a}" class="markedCard"><span class = 'mark'>${initMap.markSpell[r]}</span></div>`),l=document.getElementById(a);}"1-255"!=t&&d.sort(((e,t)=>e.key>0&&t.key>0?0:t.key-e.key)),4==o&&(l=l.firstElementChild||l);var c=1;d.map((e=>e.plot("unknown"==t))).reverse().forEach(((e,i,n)=>{var a,s;if(e.dataset.key==(null==(s=null==(a=n[i+1])?void 0:a.dataset)?void 0:s.key))c++;else {c>1&&(e.style.fontSize="",e.innerHTML=`<span>${e.innerHTML}×</span><br>${c}`);let i=parseInt(e.dataset.key);if(i<0){let n=Card.findIDs(i).sort(((e,t)=>e>0&&t>0?0:t-e));e.title=c+"张："+n.map((e=>allCard[e].ncn)).join("/"),"1-255"!==t&&n.length<5&&(e.style.fontSize="",e.innerHTML=n.map((e=>{var t,i;return (null==(i=null==(t=Card.get(e)[0])?void 0:t.plot())?void 0:i.outerHTML)||""})).join(""));}4==o?l.insertAdjacentElement("afterend",e):l.insertAdjacentElement("afterbegin",e),c=1;}}));}else l&&(l.classList.contains("markedCard")?l.remove():l.querySelectorAll(":scope>.shoupai").forEach((e=>e.remove())));}static name(e,t,i,n,a){var l;let o;if(isNaN(t))return "?";if(1==t&&0==e)return "牌堆(游戏开始前) ";if(1==t&&255==e)o="牌堆";else if(2==t)o="弃牌堆";else if(3==t)o="处理区";else if(4==t)o="标记";else if(5==t)o="手牌";else if(6==t)o="装备";else if(7==t)o="判定区";else if(8==t)o="弹窗";else {if(9==t)return "洗牌";10==t?o="交换临时区":11==t?o="弃牌临时区":12==t?o="回收区":0==t&&(o="游戏外");}return ([0,1,2,3,8,11,12].includes(t)?"":room.name(e,!1))+([4,8].includes(t)?"["+(null==(l=initMap.spellDict[8==t?a:n||a||0])?void 0:l.name)+"]":"")+(o??"zone"+t)+({[DI]:"底",[DING]:"顶",[RAND]:"*"}[i]??(i?":"+i:""))}};__publicField(_Zone,"obj",{unknown:new Set});let Zone=_Zone;function mergeGoodsList(e=[],t=[]){const i=new Map;return e.forEach((e=>{i.set(e.GoodsBaseID,e.ChangeCount);})),t.forEach((e=>{const{GoodsBaseID:t,ChangeCount:n}=e;i.has(t)?i.set(t,i.get(t)+n):i.set(t,n);})),Array.from(i,(([e,t])=>({GoodsBaseID:e,ChangeCount:t})))}const shortName={"乐不思蜀":"乐","兵粮寸断":"兵","八卦阵":"八卦","爪黄飞电":"爪黄+1","的卢":"的卢+1","绝影":"绝影+1","骅骝":"骅骝+1","赤兔":"赤兔-1","大宛":"大宛-1","紫骍":"紫骍-1","紫騂":"紫骍-1","诸葛连弩":"连弩","木牛流马":"木马","顺手牵羊":"顺手","万箭齐发":"万箭","五谷丰登":"五谷","无中生有":"无中","过河拆桥":"过拆","桃园结义":"桃园","无懈可击":"无懈","南蛮入侵":"南蛮","借刀杀人":"借刀","铁索连环":"铁索","随机应变":"随机","远交近攻":"远交","以逸待劳":"逸劳","知己知彼":"知己","逐近弃远":"逐近","洞烛先机":"洞烛","出其不意":"出其","水淹七军":"水淹","无懈可击·国":"国无","挟天子以令诸侯":"挟令","方天画戟":"方天戟","雌雄双股剑":"雌雄剑","青龙偃月刀":"青龙刀","丈八蛇矛":"丈八矛","朱雀羽扇":"朱雀扇","白银狮子":"白银狮","三尖两刃刀":"三尖刀","乌铁锁链":"乌铁链","五行鹤翎扇":"五行扇","太公阴符":"太公符","无双方天戟":"无双戟","束发紫金冠":"紫金冠","玲珑狮蛮带":"玲珑带","红棉百花袍":"百花袍","红锦百花袍":"百花袍","四乘粮舆":"四乘舆","铁蒺玄舆":"铁蒺舆","飞轮战舆":"飞轮舆","鬼龙斩月刀":"鬼龙刀","国风玉袍":"国风袍","赤炎镇魂琴":"赤炎琴","奇门八阵":"奇门阵","绝尘金戈":"绝尘+1","修罗炼狱戟":"修罗戟","虚妄之冕":"虚妄冕","赤血青峰":"赤青锋","赤血青锋":"赤青锋","鸾凤和鸣剑":"鸾凤剑","七彩神鹿":"神鹿-1","金乌落日弓":"金乌弓","刑天破军斧":"刑天斧","长安大舰":"长安-2","禅让诏书":"诏书","镔铁双戟":"镔铁戟","继往开来":"继往","攻守兼备":"攻守","进退自如":"进退","洪荒之力":"洪荒","同舟共济":"同舟","力争上游":"力争","逆水行舟":"逆水","撒豆成兵":"撒豆","移花接木":"移花","联军盛宴":"联军","调虎离山":"调虎","火烧连营":"火烧","勠力同心":"勠力","调剂盐梅":"调剂","声东击西":"声东","增兵减灶":"增兵","草木皆兵":"草木","唯我独尊":"独尊","弃甲曳兵":"弃甲","金蝉脱壳":"金蝉","故步自封":"自封","金鼓笙旗":"金鼓","党同伐异":"伐异","燎原之火":"燎原","八卦阵(复制)":"八卦","仁王盾(复制)":"仁王盾","藤甲(复制)":"藤甲","白银狮子(复制)":"白银狮","商鞅变法":"变法","真龙长剑":"真龙剑","传国玉玺":"玉玺","厚积形":"厚积","桎梏形":"桎梏","盈冲形":"盈冲","背水形":"背水","整肃形":"整肃","寸兵形":"寸兵","雄黄酒":"酒"},allCard=new Proxy({cards:{0:{name:"",type:0,color:0,number:0,ncn:"?",cn:"0",c:"",n:0}},[Symbol.iterator]:function*(){for(let e in this.cards)yield this.cards[e];}},{get:function(e,t){var i;if(t in e)return e[t];if(!e.cards[t])if(null==(i=initMap.cardDict)?void 0:i[t]){let{name:i,type:n,color:a,number:l,subType:o}=initMap.cardDict[t],s=n2C(a),r=n2N(l);e.cards[t]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[o]||shortName[i]||i,type:parseInt(n),color:parseInt(a),number:parseInt(l),ncn:i+s+r,cn:s+r,c:s,n:r};}else e.cards[t]=e.cards[0];return e.cards[t]}});function n2C(e){return ["","♥","♦","♠","♣"][e]??""}function n2N(e,t=!0){return t&&1==parseInt(e)?"A":{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"J",12:"Q",13:"K"}[e]??""}function drawChatFace(){for(let e=11;e<=60;e++){const t=`https://web.sanguosha.com/220/h5_2/res/runtime/pc/Face/${e}.png`,i=document.createElement("img");i.src=t,i.classList.add("face"),i.onmousedown=()=>toClipboard(`#${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);}["昏君，昏君啊","主公，别开枪，自己人","能不能快一点儿呀，兵贵神速啊","小内再不跳，后面还怎么玩儿啊","小内啊，您老悠着点儿","不好意思，刚才卡了","你可以打的再烂一点儿吗","哥们儿，给力点儿行吗","你们怎么忍心就这么让我酱油了","我，我惹你们了吗","姑娘，你真是条汉子","三十六计，走为上，容我去去便回","人心散了，队伍不好带啊","风吹鸡蛋壳，牌去人安乐","哥，交个朋友吧","妹子，交个朋友吧","我从未见过如此厚颜无耻之人","你随便杀，闪不了算我输","这波不亏","请收下我的膝盖","你咋不上天呢","放开我的队友，冲我来","见证奇迹的时刻到了"].forEach(((e,t)=>{const i=document.createElement("span");i.classList.add("calRes"),i.textContent=e,i.onmousedown=()=>toClipboard(`${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);}));}async function toClipboard(e,t){tooltipSGS("复制成功！");var i={1:"⒈",2:"⒉",3:"⒊",4:"⒋",5:"⒌",6:"⒍",7:"⒎",8:"⒏",9:"⒐",J:"Ⓙ",Q:"Ⓠ",K:"Ⓚ","+":" ",10:"⒑"};if(t&&Object.keys(i).forEach((t=>{e=e.replaceAll(t,i[t]);})),laya.chat(e),window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch(a){return console.warn("Copy to clipboard failed.",a),prompt("Copy to clipboard: Ctrl+C, Enter",e)}finally{document.body.removeChild(n);}}}async function drawCDK(e,t){if(globalConfig.CDKNotificationSwitch){let t=localGet("CDK");t||(t=[]);let i=e.filter((e=>!t.includes(e.cdk)));await sleep(1e4);for(let e of i)addTooltip(`找到兑换码！<br>${e.cdk}<br>点击即可兑换且关闭此条通知${e.rewards}<br>如不想要兑换码通知，可在设置中关闭`,"ac-tooltip",1e4,"green",(function(){!t.includes(e.cdk)&&t.push(e.cdk),localSet("CDK",t),getgift(e.cdk);}));}var i=document.getElementById(t);i.innerText="",0==e.length&&"CDK"==t&&(e=["所有兑换码已经兑换","迟点再看看吧"],localDel("CDK"));for(let a of e){let e=document.createElement("button");e.className="calRes",e.innerText="object"==typeof a?`${a.cdk}`:a,e.onmousedown=function(){getgift("object"==typeof a?a.cdk:a),e.innerText="已兑换",setTimeout((()=>{e.textContent="object"==typeof a?`${a.cdk}`:a;}),"500");},i.append(e);var n=document.createElement("br");i.append(n);}}function drawStore(e){var t=document.getElementById("storeDetail");t.innerText="",0==e.length&&(e=["暂无集市数据"]);for(let i of e){let e=document.createElement("button");e.className="storeDetail",e.innerText=i,t.append(e);}}let pre={9020101:"欢乐豆",100301:"手气卡",100201:"点将卡",1150001:"灵宝经诰",100401:"换将卡",200201:"诏令天下",112301:"校尉将印",112101:"朱砂",12119999:"桃花",111801:"功勋",1111801:"水晶碎片",1114301:"圣魂玄晶",112501:"大将军印",1142901:"夺宝券",21315101:"翻翻乐积分",21315001:"奇珍夺宝券"};function lotteryFilter(e){return !pre[e]}function drawLottery(e,t,i,n){var a;if(null==document.getElementById("sec"+e)){let t=document.getElementById("lottery");const i=document.createElement("div"),a=document.createElement("div");a.innerHTML=initMap.secId[e].Name+"："+initMap.generalDict[initMap.secId[e].bigrewards]+"  次数："+n+"<br>",a.id="sec"+e+"+times",i.id="sec"+e,i.append(a),t.append(i),t.append(document.createElement("hr"));}if(void 0!==document.getElementById("sec"+e)&&null==document.getElementById(e+"+"+t)){document.getElementById("sec"+e+"+times").innerHTML=initMap.secId[e].Name+"："+initMap.generalDict[initMap.secId[e].bigrewards]+"  次数："+n+"<br>";let l=document.getElementById("sec"+e);const o=document.createElement("div");o.className="suit",lotteryFilter(t)&&o.classList.add("r");const s=document.createElement("span"),r=document.createElement("span");s.innerText=(null==(a=initMap.goodsID(t))?void 0:a.name)+" * ",r.innerText=i,s.id=e+"+"+t,r.id=e+"+"+t+"+number",o.append(s),o.append(r),l.appendChild(o);}else if(void 0!==document.getElementById(e)&&null!=document.getElementById(e+"+"+t)){document.getElementById("sec"+e+"+times").innerHTML=initMap.secId[e].Name+"："+initMap.generalDict[initMap.secId[e].bigrewards]+"  次数："+n+"<br>";let a=document.getElementById(e+"+"+t+"+number"),l=parseInt(a.innerText);l+=i,a.innerText=l;}}function drawCard(e){let t=document.getElementById("lastUseCard");const i=document.createElement("div");for(const a of e){if("0"==a)continue;var n=document.createElement("button");n.className=allCard[a].color<=2?"shoupai R":"shoupai";let e=document.createElement("span");e.innerText=allCard[a].cn,n.appendChild(e),n.appendChild(document.createElement("br")),n.innerHTML+=allCard[a].name.substring(0,2),i.append(n);}t.innerHTML=i.innerHTML;}const observer=new MutationObserver((e=>{e.forEach((e=>{const t=e.target,i=document.getElementById(t.id),n=document.getElementById("s"+t.id);if(n&&i&&("childList"===e.type||"attributes"===e.type)){const e=t.innerHTML;if(n.dataset.lastContent!==e){if(n){const e=t.cloneNode(!0);n.innerHTML=e.innerHTML,checkOverflow(n);}n.dataset.lastContent=e;}}}));})),config={attributes:!0,childList:!0,subtree:!0};function checkOverflow(e){e&&e instanceof HTMLElement&&(e.scrollHeight>40?e.classList.add("show-ellipsis"):e.classList.remove("show-ellipsis"));}function debounce(e,t){let i;function n(...n){clearTimeout(i),i=setTimeout((()=>e.apply(this,n)),t);}return n.cancel=function(){clearTimeout(i),i=null;},n}const optimizedResizeHandler=debounce((()=>{requestAnimationFrame((()=>{document.querySelectorAll(".sorder-body").forEach((e=>{checkOverflow(e);}));}));}),500);function drawSeatUIs(){const e=document.getElementById("seatUI"),t=document.createDocumentFragment();for(let i of UI.seatUIs)if(i.posY&&i.posX&&void 0!==i.actualSeatID)if(null==document.getElementById("sor"+i.actualSeatID)){const e=document.createElement("div");e.className="sorderContainer",e.id="sor"+i.actualSeatID,e.style.top=i.posY+"px",e.style.left=i.posX+"px",e.style.width=(UI.unscaledWidth+UI.paddingRight)*UI.scale+"px";const n=document.createElement("div");n.className="sorder-body",n.classList.add("sNo"+i.actualSeatID),n.id="s"+i.actualSeatID,e.appendChild(n);const a=document.getElementById(i.actualSeatID);a&&(observer.observe(a,config),t.appendChild(e));}else {const e=document.getElementById("sor"+i.actualSeatID);e.style.top=i.posY+"px",e.style.left=i.posX+"px",e.style.width=(UI.unscaledWidth+UI.paddingRight)*UI.scale+"px";}if(0===UI.seatUIs.length){observer.disconnect();for(let e=1;e<=8;e++){const t=document.getElementById("sor"+e);t&&t.remove();}}e.appendChild(t);}window.addEventListener("resize",optimizedResizeHandler);const STYLES={TITLE:{color:"#f2de9c",fontSize:20,bold:!0},HR:{text:"--------------------",color:"#ccc",fontSize:15},GENERAL:{normal:"#f2de9c",warning:"rgb(240, 65, 85)",fontSize:20},GET_INFO:{color:"#f2de9c",fontSize:20,bold:!0}};function createLabel(e){const t=new Laya.Label;return t.text=e.text||"",t.color=e.color||"#ffffff",t.fontSize=e.fontSize||16,t.bold=e.bold||!1,t.align="center",t.valign="middle",t.width=210,t}function createHrLine(){return createLabel({text:STYLES.HR.text,color:STYLES.HR.color,fontSize:STYLES.HR.fontSize,bold:!1})}function createGeneralLabel(e,t){const[i,n]=highlightedSkill(e,t),a=e.start?"[先行]":"";return createLabel({text:`${e.generalname}${a}${n?" "+i.join(" "):""}`,color:n?STYLES.GENERAL.warning:STYLES.GENERAL.normal,fontSize:STYLES.GENERAL.fontSize,bold:!0})}function setupCityContainer(e,t,i){e.layoutEnabled=!0,e.vScrollBarSkin="",t.graphics.clear(),t.graphics.drawRect(0,0,210,i,"#3B3A27"),t.pos(0,0);}function processFightEvent(e,t){let i=0;if(initMap.text[e.event]){const n=createLabel({text:initMap.text[e.event],...STYLES.TITLE});t.addChild(n),i+=n.height;const a=createHrLine();t.addChild(a),i+=a.height;}e.generals.forEach((e=>{const n=createGeneralLabel(e,rogueMap.difficulty);t.addChild(n),i+=n.height;}));const n=createHrLine();t.addChild(n),i+=n.height;const a=createLabel({text:e.get.replace(/\n/g,"\n"),...STYLES.GET_INFO});return t.addChild(a),i+=a.height,i}function processChooseEvent(e,t){let i=0;for(let n=0;n<3;n++){const a=e+(n+1).toString().padStart(2,"0");if(!initMap.Rchoose[a])continue;const l=initMap.Rchoose[a];l.generals&&l.generals.forEach((e=>{const n=createGeneralLabel(e,rogueMap.difficulty);t.addChild(n),i+=n.height;}));const o=createLabel({text:l.get.replace(/\n/g,"\n"),...STYLES.GET_INFO});t.addChild(o),i+=o.height;const s=createHrLine();t.addChild(s),i+=s.height;}return i}function drawCitiesUI(e,t){rogueMap.res=[];for(const i of e){const{x:e,y:t}=initMap.Rcity[i.id];let n=0;const a=new Laya.VBox;a.pos(e,t),a.zOrder=999,a.name="city";const l=new Laya.Sprite;if(l.alpha=.7,a.addChild(l),initMap.Rfight[i.event])n=processFightEvent({...initMap.Rfight[i.event],event:i.event},a);else {if(initMap.text[i.event]){const e=createLabel({text:initMap.text[i.event],...STYLES.TITLE});a.addChild(e),n+=e.height;const t=createHrLine();a.addChild(t),n+=t.height;}n+=processChooseEvent(i.event,a);}setupCityContainer(a,l,n),rogueMap.res.push({id:i.id,city:a});}wait((()=>laya.find("SceneLayer","RogueSmallMapScene"))).then((t=>{for(let e=(null==t?void 0:t.cityView.numChildren)-1;e>=0;e--){const i=t.cityView.getChildAt(e);"city"===i.name&&t.cityView&&t.cityView.removeChild(i);}(null==t?void 0:t.cityView)&&e&&rogueMap.res.forEach((({city:e})=>{t.cityView.addChild(e);}));}));}function buttonRes(e,t="点击复制",i=!0,n=!1,a=null){let l=document.createElement("button");return l.className="calRes",l.title=t,l.disabled=n,l.innerText=e,l.onclick=()=>{toClipboard(e,i),l.innerText="复制成功",setTimeout((()=>{l.textContent=e;}),500);},l}async function drawMiZhu(e){let t=e.slice().sort(((e,t)=>e-t)),i=[];!function e(n,a,l){if(13!==l){if(!(l>13))for(let i=a;i<t.length;i++)i>a&&t[i]===t[i-1]||(n.push(t[i]),e(n,i+1,l+t[i]),n.pop());}else i.push(n.slice());}([],0,0);let n=document.getElementById("result");n.innerHTML="";for(let a of i.sort(((e,t)=>t.length-e.length)))if(n.appendChild(buttonRes(a.map((e=>n2N(e,!1))).join("+"))),n.children.length>=15)break;""===n.innerHTML&&(n.innerHTML='<span class="textRes">【资援】无解！</span>');}async function drawYanJiao(e,t=!1){function i(e,...t){let i=e.slice();for(let n=0;n<i.length;n++){for(let e=0;e<t.length;e++)if(i[n]-=t[e][n],i[n]<0)return !1;if(n>0&&i[n]>=2)return 0}return i}let n=e.reduce(((e,t)=>(e[0]++,e[t]++,e)),Array(14).fill(0)),a=Math.floor(n[14]/2),l=new Map([[0,[Array(14).fill(0)]]]);for(let r=1;r<=13;r++){let e=n[r];if(0!=e)for(let t of Array.from(l.keys()).sort(((e,t)=>t-e))){let i=l.get(t);for(let n=1;n<=e;n++){let e=t+r*n;if(e>a)break;l.has(e)||l.set(e,[]);for(let t=0;t<i.length;t++){let a=i[t].slice();a[0]+=n,a[r]+=n,l.get(e).push(a);}}}}l.delete(0);let o=new Map;for(let r of Array.from(l.keys()).sort(((e,t)=>t-e))){let e=l.get(r);for(let t=0;t<e.length;t++)for(let a=t;a<e.length;a++){let l=i(n,e[t],e[a]);l&&(o.has(l[0])||o.set(l[0],[]),e[t][0]<=e[a][0]?o.get(l[0]).push([e[t],e[a],l]):o.get(l[0]).push([e[a],e[t],l]));}}let s=document.getElementById("result");s.innerHTML="",Array.from(o.keys()).sort(((e,t)=>e-t)).some((e=>{if(o.get(e).sort(((e,t)=>e[0][0]-t[0][0])).forEach((([e,i,n])=>{let a=document.createElement("button");a.className="calRes";let l=document.createElement("span"),o=document.createElement("span");l.innerText=e.flatMap(((e,t)=>t>0?Array(e).fill(n2N(t,!1)):[])).join("+"),o.innerText=i.flatMap(((e,t)=>t>0?Array(e).fill(n2N(t,!1)):[])).join("+"),a.appendChild(l),a.insertAdjacentHTML("beforeend","<span>=</span>"),a.appendChild(o),a.title="点击复制",a.onclick=function(){toClipboard(this.innerText,!0);},t&&(a.title="点击“=”左侧或右侧的数字，将被点击一侧的数字分配给自己，另一侧的分配给张昌蒲",l.className="yanjiaospan",o.className="yanjiaospan",l.onclick=function(t){t.stopPropagation(),laya.yanJiao([e,i,n],2);},o.onclick=function(t){t.stopPropagation(),laya.yanJiao([e,i,n],0);}),s.appendChild(a);})),s.children.length>=5)return !0})),""===s.innerHTML?s.innerHTML='<span class="textRes">【严教】无解！</span>':t&&s.insertAdjacentHTML("afterbegin","界小抄：点下方数字可以自动分配牌<br>点击想要分配给自己的一组数字即可");}async function drawChengXiang(e,t){if(!(null==e?void 0:e.length))return;let i=e.slice().sort(((e,t)=>e-t)),n=[];!function e(a,l,o){if(!(o>13)){n.unshift(a.slice()),t&&(n[0].K=13===o?a.length:0);for(let t=l;t<i.length;t++)t>l&&i[t]===i[t-1]||(a.push(i[t]),e(a,t+1,o+i[t]),a.pop());}}([],0,0);let a=document.getElementById("result");a.innerHTML="";for(let l of n.filter(((e,t,i)=>!i.some((t=>e.length<t.length&&e.every((e=>t.includes(e))))))).sort(((e,t)=>t.K-e.K||t.length-e.length)))a.appendChild(buttonRes(l.map((e=>n2N(e,!1))).join("+"))),t&&l.K&&a.lastChild.classList.add("textRes");}async function drawYiCheng(e,t){function i(e,t,n,a,l){if(n.length!==l+1){for(let o=a;o<e.length;o++)o>a&&e[o]===e[o-1]||(n.push(e[o]),n[0]+=e[o],i(e,t,n,o+1,l),n[0]-=n.pop());return t}t.push([...n,...n.reduce(((e,t)=>(e.splice(e.indexOf(t),1),e)),e.slice())]);}let n=document.getElementById("result");if(n.innerHTML="",!(null==e?void 0:e.length)||!(null==t?void 0:t.length))return;let a=Math.max(e.length,t.length);e.sort(((e,t)=>e-t)),t.sort(((e,t)=>e-t));for(let s=2;s<=a;s++){let l=i(e,[],[0],0,s);i(t,[],[0],0,s).forEach((e=>l.forEach((t=>{e[0]>t[0]&&e.slice(1,s+1).every((e=>!t.slice(1,s+1).includes(e)))&&(a<3||Array.from({length:s}).some(((i,n)=>e[n+1]<t[n+1])))&&n.appendChild(buttonRes(e.slice(1,s+1).map((e=>n2N(e)))+"→"+t.slice(1,s+1).map((e=>n2N(e))),"点击复制",!1));}))));}let l=Array.from(new Set(t)),o=Array.from(new Set(e));l.forEach((e=>{let t=o.filter((t=>t<e));t.length&&n.appendChild(buttonRes(n2N(e)+"→"+t.map((e=>n2N(e))).join("/"),"点击复制",!1));})),""===n.innerHTML&&(n.innerHTML='<span class="textRes">【易城】无法交换！</span>');}async function drawRogueLike(e){var t,i,n;if(!(null==e?void 0:e.allData))return;let a=e.allData,l=a.shopData,o=a.chapterData,s=a.generalpool;if(l){l.bShow=!0;let e=[];if(l.itemId&&initMap.Rplot)for(let t of l.itemId)initMap.Rplot[t]&&e.push(initMap.Rplot[t].name);drawStore(e);}if(s&&s.general_change&&s.general_change.length>0){addTooltip(`小抄提示：可换将为${s.general_change.map((e=>initMap.generalDict[e]||`Unknown (${e})`)).reverse().join(", ")}`,"acTooltip",1e4,"green",null,!0);}let r=a.seasonData,d=r&&r.difficulty;d&&(rogueMap.difficulty=d),rogueMap.general=(null==(i=null==(t=a.gameData)?void 0:t.myGeneral)?void 0:i.uGeneralId)??0,rogueMap.itemId=(null==(n=a.gameData)?void 0:n.itemId)??[],o&&o.locations&&(UI.cities=o.locations.map((e=>({id:e.location,event:e.event}))),initMap.Rcity&&globalConfig.rogueCitySwitch&&drawCitiesUI(UI.cities));}const drawMiaoSha=(()=>{class e{constructor(){this.id=0,this.goods_id=0,this.goods_cnt=0,this.price_type=0,this.price_num=0,this.stock=0,this.buy_limit=0,this.ori_price=0,this.all_bought_cnt=0,this.self_bought_cnt=0;}Read(e){this.id=e.readUnsignedByte(),this.goods_id=e.readUnsignedInt(),this.goods_cnt=e.readUnsignedInt(),this.price_type=e.readUnsignedByte(),this.price_num=e.readUnsignedInt(),this.stock=e.readUnsignedInt(),this.buy_limit=e.readUnsignedByte(),this.ori_price=e.readUnsignedInt();}UpdateDate(e){this.goods_id=e.goods_id,this.goods_cnt=e.goods_cnt,this.price_type=e.price_type,this.price_num=e.price_num,this.stock=e.stock,this.buy_limit=e.buy_limit,this.ori_price=e.ori_price,this.all_bought_cnt=e.all_bought_cnt,this.self_bought_cnt=e.self_bought_cnt;}}let t=!1;return async i=>{if(t)return null;const n=document.querySelectorAll('.left input[type="checkbox"]');let a=function(t){t.position=0;let i=[],n=t.readBoolean();if(t.Data.length<=1)return null;let a=t.readUnsignedInt(),l=t.readUnsignedInt(),o=new Date(1e3*a).toISOString().slice(5,16).replace("T"," "),s=new Date(1e3*l).toISOString().slice(5,16).replace("T"," "),r=t.readUnsignedInt();for(let d=0;d<r;d++){let n=new e;n.Read(t);let a=i.find((e=>e.id==n.id));a?a.UpdateDate(n):i.push(n);}r=t.readUnsignedInt();for(let e=0;e<r;e++){let e=t.readUnsignedInt(),n=t.readUnsignedInt(),a=i.find((t=>t.id==e));a&&(a.all_bought_cnt=n);}r=t.readUnsignedInt();for(let e=0;e<r;e++){let e=t.readUnsignedInt(),n=t.readUnsignedInt(),a=i.find((t=>t.id==e));a&&(a.self_bought_cnt=n);}return {commonVo:i,start_time:a,end_time:l,start:o,end:s,next:n}}(i);if(!a)return null;let{commonVo:l,start_time:o,end_time:s,start:r,end:d,next:c}=a;if(c)return;o=1e3*(o-28800);let u=l.map((({goods_id:e,goods_cnt:t,price_type:i,price_num:a,stock:l,buy_limit:s,ori_price:c,all_bought_cnt:u,self_bought_cnt:h},p)=>{var m;let f=a+["","通用元宝","元宝","银两"][i]+": "+(null==(m=initMap.goodsID(e))?void 0:m.name)+(t>1?"*"+t:""),g=`${r} ~ ${d} 共${l}个`,y=u>=l||h>=s;return Object.assign(n[p].dataset??{},{goods_id:e,start_time:o,goods:f}),{goods_id:e,goods:f,title:g,disabled:y}})),h=document.getElementsByClassName("right")[0];h&&(h.innerHTML=u.map((({goods:e,title:t,disabled:i})=>`<span class="secKillDetailText${i?" gray":""}" title="${t}">${e}</span>`)).join(""));let p=h.start-6e4;return p>timer.now()&&timer.set("miaosha",(()=>{tooltipSGS(`${r}\n秒杀即将开始！\n`+u.map((({goods:e})=>e)).join("\n")),t=!0,setTimeout((()=>{t=!1;}),66666);}),p),i.Size==i.position}})();let spellList=["巳蛇","灵动","八门","盾弓","智迟","持盈","卫主","不死","刚烈","觉醒","悲鸣","断肠","节命","先机","悲鸣","忘魂","雅士","挥泪","不屈","封冻","灵躯","武魂","已蛇","邪徒"];const spellPriority={getspell:0,getspell_ZD:1,getspell_KN:2,getspell_EM:3,getspell_LY:4};function highlightedSkill(e,t){let i=[],n=!1,a=getSpellDifficulty(t);const l=spellPriority[a];let o=Object.keys(spellPriority).filter((e=>spellPriority[e]<=l)).map((t=>e[t])).filter(Boolean).join(";");o=null==o?void 0:o.split(";").map((e=>{var t;return (null==(t=initMap.spellDict[e])?void 0:t.name)||"无收录技能"}));for(let s of o)spellList.includes(s)&&(i.push(s),n=!0);return [i,n]}function getSpellDifficulty(e){switch(Math.floor((e-1)/5)){case 0:default:return "getspell";case 1:return "getspell_ZD";case 2:return "getspell_KN";case 3:return "getspell_EM";case 4:return "getspell_LY"}}var cardDict=[],cardIDsOrder=[],markSpell={290:"推锋",766:"匡弼"},spellDict=[],generalDict={},skinSP={},skinDict={},skinMap={},bigSkin=new Map,goodsID=()=>({name:"加载中"}),NanHua={},Rplot=[],Rcity={},Rchoose={},Rfight={},rogejson={},gxjson={},secId={},vskinMap={};async function loadConfig_w(e){return new Promise((t=>JSZipUtils.getBinaryContent("test.sanguosha.com"===window.location.host?"https://test.sanguosha.com/h5/res/config//Config_w.sgs":"https://web.sanguosha.com/220/h5_2/res/config/Config_w.sgs?v="+window.resourceVersion,((i,n)=>JSZip.loadAsync(n).then((async i=>{var n;const a=function(){const e=new Date;return e.getFullYear().toString()+(e.getMonth()+1).toString().padStart(2,"0")+e.getDate().toString().padStart(2,"0")+"T000002"}();let l=["sys_playcard","cha_spell","character","hd_roguelike","hd_1v1_rogue","sys_h5_shop","sys_gs_dbs_fs_goodsbaseinfo","sys_server_item_drops_templete_config","sys_h5_dbs_clientserverpub","cha_gs_dbs_fs_skininfo","gn_dbs_quest","sys_h5_quest","sys_h5_task","ff_dbs_lottery_new","ff_exchange_new","sys_treasure_chest","gn_dbs_giftbag","ff_tiangong","ff_chess","cha_spellextend"];var o=await Promise.all(l.map((e=>i.file(e+".sgs").async("arraybuffer").then((e=>JSON.parse((new TextDecoder).decode(new Zlib.Gunzip(CtrUtil.Ctr.Ofb_Dec(e)).decompress()))))))).then((e=>l.reduce(((t,i,n)=>(t[i+".sgs"]=e[n],t)),{})));function s(e,t){if("object"!=typeof e)return e;let i={};for(let n in e){i[t.get(n)||n]=e[n];}return i}var r,d=new Map([["id","编号"],["name","名称"],["time","时间"],["desc","说明"],["reward","奖励"],["price","价格"],["max","限购"],["effect","效果"],["info","信息"]]),c=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.reduce(((e,t)=>(124==t.e&&(t.b="动态水晶-"+t.b),e.set(t.a,t),e)),new Map),u=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.abbreviation.field.reduce(((e,{Short:t,Long:i})=>(e.set(t,i),e)),new Map),h=o["sys_server_item_drops_templete_config.sgs"].AllDrop.DropTemplete.DropGroup.DropItem.reduce(((e,t)=>(e.has(t.a)||e.set(t.a,[]),e.get(t.a).push(t.d),e)),new Map);r={},goodsID=function(e){if(e=parseInt(e),r[e])return r[e];let t=s(c.get(e),u),i=o["sys_h5_shop.sgs"].root.itemtips.find((({a:t})=>t==e)),n=(null==t?void 0:t.usedeffect)&&g(null==t?void 0:t.usedeffect);return r[e]={...t,...i&&{info:i.e},...n&&{effect:n}}};var p={};function m(e){var t;let i=null==e?void 0:e.replace(/([^0-9,\.])/g,"").split(",").map((e=>parseInt(e)));return (null==i?void 0:i.length)<2?e:(p[i[0]]??(p[i[0]]=null==(t=c.get(i[0]))?void 0:t.b)??i[0])+(parseInt(i[1])>1?"*"+i[1]:"")}var f={};function g(e){let t=parseInt(e);if(1e3!=t&&Math.abs(t)>0)return f[t]??(f[t]=(h.get(Math.abs(t))??[]).map((e=>{var t;return (null==(t=c.get(e))?void 0:t.b)??g(e)})).join(t>0?"/":"&"))}spellDict=o["cha_spell.sgs"].GameSpells.spell.reduce(((e,{a:t,c:i,o:n})=>{var a,l;let o={name:i,spellid:t,desc:(null==(l=null==(a=null==n?void 0:n.replace(/<[^\<\>]*>/g,""))?void 0:a.replace(/#.*/g,""))?void 0:l.replace(/[;\n]+$/g,""))||""};return (o.desc.includes("暗置")||o.desc.includes("扣置")||o.desc.includes("移出"))&&(markSpell[t]=shortName[o.name]??o.name),e[t]=o,e}),[]);let y=o["sys_playcard.sgs"].abbreviation.reduce(((e,{Short:t,Long:i})=>(e.set(t,i),e)),new Map);if(cardDict=o["sys_playcard.sgs"].GamePlayCards.card.map((e=>s(e,y))).reduce(((e,t)=>{var i,n;return e[t.id]={...t,name:t.name??(null==(i=spellDict[t.spellId])?void 0:i.name),desc:null==(n=spellDict[t.spellId])?void 0:n.desc},e}),[]),cardIDsOrder=o["sys_playcard.sgs"].GamePlayCards.card.sort(((e,t)=>e.c-t.c||e.d-t.d||e.h-t.h||e.m-t.m||e.g-t.g||e.f-t.f||e.a-t.a)).map((({a:e})=>e)),bigSkin=new Map(o["cha_gs_dbs_fs_skininfo.sgs"].generalskin.items.item.map((e=>[String(e.a),[e.a,e.c,e.v||e.q,e.r]])).reverse()),skinDict=o["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.reduce(((e,{skinID:t,name:i,skinlevel:n,dongPoint:a})=>{let l=parseInt(t/100);return e[l]||(e[l]={}),e[l][t]={level:{"0,0":"普通","0,1":"稀有","0,2":"史诗","0,3":"传说","0,4":"限定"}[n]||"未知",name:i,state:void 0!==a},e}),{}),skinSP=o["cha_gs_dbs_fs_skininfo.sgs"].generalskin.speciaSkin.filter((e=>String(e.skinID).includes("_"))).reduce(((e,t)=>{let[i,n]=t.skinID.split("_").map(Number);return e[i]?e[i].includes(n)||e[i].push(n):e[i]=[n],e}),{}),Object.entries(skinSP).forEach((([e,t])=>{var i,n;null==(i=bigSkin.get(e))||i.push(t);let a=parseInt(e/100),l=null==(n=skinDict[a])?void 0:n[e];l&&(delete skinDict[a][e],t.forEach((t=>{skinDict[a][e+"_"+t]={...l,name:l.name+t};})));})),generalDict=o["character.sgs"].GameCharacters.character.reduce(((e,{a:t,ai:i,b:n})=>(e[t]=(i||"")+(null==n?void 0:n.replaceAll("&","")),e)),{}),o["character.sgs"].GameCharacters.character.forEach((({a:e,v:t})=>{if("string"!=typeof t)return void(skinMap[e]=new Set([e]));let i=[e,...t.split(";").map((e=>parseInt(e)))],n=i.find((e=>e in skinMap));if(n){let e=skinMap[n];i.filter((t=>!e.has(t))).forEach((t=>(skinMap[t]=e).add(t)));}else {let e=new Set(i);i.forEach((t=>skinMap[t]=e));}})),vskinMap=o["character.sgs"].WuJiangs.Spgroup.reduce(((e,t)=>{const i=t.spgenerals?t.spgenerals.split(",").map(Number):[];return i.forEach((t=>{e[t]=new Set(i);})),e}),{}),secId=o["ff_tiangong.sgs"].root.Common.reduce(((e,t)=>(e[t.Id]=t,e)),{}),"string"!=typeof e){let e=o["gn_dbs_giftbag.sgs"].giftsys.gifts.giftsItem.Item.filter((e=>"sgs"!=e.cdkey&&!e.platform&&e.endtime>=a&&e.begintime<=a)).sort(((e,t)=>e.endtime-t.endtime)).map((e=>{const t="<br>"+e.dataInfo.match(/\[(\d+),(\d+)\]/g).map((e=>{const[t,i,n]=e.match(/\[(\d+),(\d+)\]/);return `${goodsID(i).name} * ${n}`})).join("<br>");return {giftID:e.giftID,endtime:e.endtime,begintime:e.begintime,dataInfo:e.dataInfo,rewards:t}})).filter(Boolean);initMap.CDKDict=e;}if(NanHua={trigger:Object.fromEntries(o["cha_spellextend.sgs"].NHtrigger.map((e=>[e.triggerID,e.triggerType]))),effect:o["cha_spellextend.sgs"].NHeffect.map((e=>({type:e.effectType,desc:e.desc.replace(/^你可以?(.*?)。?$/,"$1")}))).sort(((e,t)=>e.type-t.type||e.desc.length-t.desc.length)).reduce(((e,t,i,n)=>{let a=n[i-1];return t.type!=(null==a?void 0:a.type)&&(t.desc+=`<span style="color: rgba(0,0,0,0);stroke:none;">${Array(13-t.desc.length).fill("～").join("")}</span><span style="color: rgba(255,255,0,1);">第${t.type}类型</span>`),t.desc.length<16&&(null==a?void 0:a.desc)&&(a.desc.endsWith("</span>")||a.desc.length<16)?t.desc=a.desc+=`<span style="color: rgba(0,0,0,0);stroke:none;">${Array(a.desc.length>16?4:20-a.desc.length).fill("～").join("")}</span>`+t.desc:e.push(t),e}),[]).reduce(((e,{type:t,desc:i},n,a)=>{var l;return t!=(null==(l=a[n-1])?void 0:l.type)&&(e[t]='<div style="height: 3px;"></div>'),e[t]+=`<div style="width:507px; height:auto; background-color: rgba(${["","0,83,255","83,255,0","255,100,0"][t]},0.7);">${i}</div>`,e}),[])},Object.assign(initMap,{cardDict:cardDict,cardIDsOrder:cardIDsOrder,markSpell:markSpell,spellDict:spellDict,generalDict:generalDict,skinSP:skinSP,skinDict:skinDict,skinMap:skinMap,bigSkin:bigSkin,goodsID:goodsID,NanHua:NanHua,secId:secId}),"string"==typeof e&&"roge"!=e||async function(i,n){Rcity=i.Root.Level.reduce(((e,{cityID:t,cityname:i,citypic:n,citycoordinate:a,startshow:l})=>{let[o,s]=a.split(",").map(Number);return e[t]={x:o,y:-s,boss:l,name:i??(null==n?void 0:n.replace(/^city_([0-9])_(.+)*\.png$/,((e,t,i)=>({"1jjy":"将军营","1jl":"箭楼","1wl":"望楼","1fht1":"烽火台(左)","1ck":"仓库","1yf":"营房","1fht2":"烽火台(右)","1sjc":"神君祠","2xsj":"西市集","2wl":"望楼","2dsj":"东市集","2wk":"武库","2hgl":"挥公陵","2sdg":"舜帝宫","2gcm":"干城门","2ywt":"演武台","3ds":"东市","3gg":"桂宫","3bg":"北宫","3wyg":"未央宫","3wk":"武库","3mgg":"明光宫","3clg":"长乐宫","4js":"金市","4lyt":"凌云台","4hly":"华林园","4tc":"太仓","4tx":"碳墟","4smm":"司马门","4wk":"武库","4sz":"石址","5my":"梅园","5fhl":"凤凰林","5lt":"龙亭","5wk":"武库","5wl":"望楼","5cm":"城门","5ql":"谯楼","5clg":"陈留宫","6jkg":"建康宫","6ql":"戚里","6wl":"望楼","6ycq":"邺城桥","6ywt":"演武台","6sg":"书馆","6wfl":"万福楼","6wk":"武库","6tqt":"铜雀台"}[t+i]??e))))},e}),{}),i.Root.Tactics.forEach((({plot:e,plotname:t,plotdesc:i,school:n,money:a,level:l})=>{Rplot[e]={name:t.replaceAll("·",""),desc:i.replaceAll(" ",""),school:n,money:a,level:l,type:2};})),i.Root.Spell.forEach((({id:e,spellid:t,money:i,level:n})=>{var a,l;Rplot[e]={name:null==(a=spellDict[t])?void 0:a.name,desc:null==(l=spellDict[t])?void 0:l.desc,spellid:t,money:i,level:n,type:3};})),i.Root.Card.forEach((({id:e,cardid:t,isequip:i,money:n,level:a})=>{var l=cardDict[t];Rplot[e]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[l.subType]??l.name,desc:l.desc,color:l.color,number:l.number,money:n,level:a,type:4+i,rType:100*(10*l.type+l.subType)+i};}));var a,l=i.Root.Roundid.reduce(((e,{useSeason:t})=>t)),o=new Map,r=i.Root.Text.reduce(((e,{ID:t,text:i})=>(e[t]=i,e)),[]);i.Root.General=(a=i.root.abbreviation.reduce(((e,{Short:t,Long:i})=>(e.set(t,i),e)),new Map),i.Root.General.map((e=>s(e,a)))),i.Root.Adventure.forEach((e=>{e.chapname=r[e.chapname]??e.chapname;}));let d=i.Root.RewardGroup.reduce(((e,{reward:t,rewarddesc:i,allreward:n,abandonmoney:a})=>{var l,o;return e[t]=(a?a+"铜币/":"")+(null==(o=null==(l=null==n?void 0:n.split(";"))?void 0:l.flatMap((e=>null==e?void 0:e.split(","))))?void 0:o.map((e=>["随机","普通","稀有","史诗","传说"][e])).join("/"))+i.replace("多选一","自选"),e}),i.Root.Other.reduce(((e,{reward:t,rewardname:i})=>(e[t]=i,e)),{}));var c=i.Root.Chapter.reduce(((e,{seasonID:t,chapter:i,cityName:n,bosslocation:a,location:l})=>(l.split(";").forEach((a=>{e[a]=`${t}-${i}${n}`;})),e[a]=`${t}-${i}${n}BOSS`,e)),{}),u=i.Root.General.reduce(((e,t)=>(e[t.generalgroup]||(e[t.generalgroup]=[]),e[t.generalgroup].push(t),t.generalname=t.generalname.replace("&",""),e)),{});i.Root.General.forEach((e=>{e.GeneralRank||(e.GeneralRank=0),e.JumpStage&&(e.next=(([e,t])=>u[e][t-1]??u[e][0])(e.JumpStage.split(";"))),e.info={general:e.generalname,hp:e.hp,maxhp:e.maxhp,card:e.cardnum,draw:e.draw,sha:1+e.exshatimes,armor:e.armor,getarmor:e.getarmor,...e.next?{next:e.next.generalname}:{}},e.spells=["","_ZD","_KN","_EM","_LY"].flatMap(((t,i)=>{var n;return ((null==(n=e["getspell"+t])?void 0:n.split(";"))??[]).map((e=>spellDict[e])).filter(Boolean).map((e=>({...e,level:i})))})),e.spell=e.spells.map((({name:e})=>e)).join(","),e.cards=["","_ZD","_KN","_EM","_LY"].flatMap(((t,i)=>{var n,a;return [...(null==(n=e["carddesc"+t])?void 0:n.split(";"))??[],...(null==(a=e["equip"+t])?void 0:a.split(";"))??[]].map((e=>cardDict[e])).filter(Boolean).map((({id:e})=>({id:e,ncn:allCard[e].ncn,level:i})))})),e.card=e.cards.map((({ncn:e})=>e)).join(",");})),Rfight=i.Root.Fight.reduce(((e,t)=>{function i(e,n,a=!1){e&&(t.fight+=g(e.info),t.lost+=(e.start?"[先手]":"")+e.generalname,e.next?(t.lost+=">",e.next.stage=n,e.next.info.pre=e.generalname,t.generals.push(e.next),i(e.next,n+1,a)):a||(t.fight+="+",t.lost+=" "));}if(t.generals=[...u[t.Ggroup]??[]],t.fight="",t.lost="",t.startnum){let e=t.generals.find((e=>e.generalID==t.startnum));e&&(e.start=!0);}return t.generals.forEach(((e,t,n)=>i(e,1,t==n.length-1))),t.get=t.itemgroup+"铜币\n"+(t.rewarditem?String(t.rewarditem).split(";"):[]).concat(String(t.reward).split(";")).map((e=>d[e])).join("\n"),t.text=r[t.text]??t.text,t.name=r[t.name]??t.name,e[t.fightID]=t,e}),[]);for(let e in u)e in Rfight||(Rfight[e]={generals:u[e]});if(Rchoose=i.Root.Choose.reduce(((e,t)=>{var n,a,l;return 7==t.type?(e[t.effectID]=Rfight[t.event1],o.set(t.event1,null==(n=i.Root.Adventure.find((e=>e.ID===parseInt(t.effectID/10))))?void 0:n.chapname)):3==t.type&&"2"==t.event1?e[t.effectID]={get:"营地"}:e[t.effectID]={lost:(l=f(t.lostitem,t.lostnum,t.effectID),l?"失去 "+l:l),get:(a=f(t.getitem,t.getnum,t.effectID),a&&t.showitem?a.replace("随机","特定"):a)},e}),[]),Object.assign(initMap,{Rfight:Rfight,Rchoose:Rchoose,Rcity:Rcity,vskinMap:vskinMap,Rplot:Rplot,text:r}),!e||"roge"==e){var h=Object.entries(u).reduce(((e,[t,i])=>{var n,a,l,s,r;let d=t.length<6?t.slice(-3):"99"!==t.slice(0,2)?t.slice(-5,-2)+">":"*"+t.slice(-2),c=t.length<6?t.slice(0,-3)-2:"99"!==t.slice(0,2)?t.slice(0,-5)-2:t.slice(-3,-2)-t.slice(-4,-3)+9;if(["新年大吉"].includes((null==(n=Rfight[t])?void 0:n.name)??(null==(a=Rfight[parseInt(d)+4e3])?void 0:a.name)))return e;e[d]||(e[d]={fight:(null==(l=Rfight[t])?void 0:l.name)??(null==(s=Rfight[parseInt(d)+4e3])?void 0:s.name)??"",generals:{}}),o.has(t)&&(e[d].event=o.get(t));let u=e[d].generals;return ((null==(r=Rfight[t])?void 0:r.generals)??i).forEach((e=>{let t=(d.startsWith("*")?c:"")+(e.stage||"")+"#"+e.generalID;for(;;){if(u[t]){if(u[t].levels.includes(c)){t+="@";continue}}else u[t]={general:(e.info.pre?">":"")+e.generalname+(e.info.next?">":""),info:g(e.info),levels:[],start:[],infos:{},spell:{},card:{},ad:{}};break}let i=u[t];c%10<6&&c<20&&(i.levels.push(c),e.start&&i.start.push(c)),i.infos[c]=e.info,e.otherad&&(i.ad[c]=e.otherad),e.spells&&e.spells.forEach((e=>{i.spell[e.spellid]||(i.spell[e.spellid]={...e,levels:[],level:void 0}),c%10<6&&c<20&&i.spell[e.spellid].levels.push(c+(e.level??0));})),e.cards&&e.cards.forEach((e=>{i.card[e.id]||(i.card[e.id]={name:e.ncn,levels:[],level:void 0}),c%10<6&&c<20&&i.card[e.id].levels.push(c+(e.level??0));}));})),e}),{});Object.entries(h).forEach((([e,t])=>{h[e].shift=e.startsWith("*")&&1==Math.min(...Object.values(t.generals).flatMap((e=>e.levels)))?1:0,t.generals=Object.values(t.generals).map((t=>(t.level=Math.min(...t.levels.sort(((e,t)=>t-e)))-h[e].shift,t.level=t.level,t.spell=Object.values(t.spell).map((i=>{let n=Math.min(...i.levels.sort(((e,t)=>t-e)));var a;return i.levels.some(((e,i,n)=>e<10&&!n.includes(e+10)&&(t.levels.includes(e+10)||2==t.levels.length&&t.levels.includes(10))))&&(i.level=[n]),i.levels.some((e=>e<10))&&((a=i.levels.filter(((e,t,i)=>e>=10&&!i.includes(e-10)))).length&&(i.level=[n,a[a.length-1]])),i.level=(i.level??n)-h[e].shift,delete i.levels,delete i.spellid,i})).sort(((e,t)=>{let i=e=>e[1]>=10?e[1]:e[0]??e;return i(e.level)%10-i(t.level)%10||i(e.level)-i(t.level)})),t.card=Object.values(t.card).map((i=>{let n=Math.min(...i.levels.sort(((e,t)=>t-e)));var a;return i.levels.some(((e,i,n)=>e<10&&!n.includes(e+10)&&(t.levels.includes(e+10)||2==t.levels.length&&t.levels.includes(10))))&&(i.level=[n]),i.levels.some((e=>e<10))&&((a=i.levels.filter(((e,t,i)=>e>=10&&!i.includes(e-10)))).length&&(i.level=[n,a[a.length-1]])),i.level=(i.level??n)-h[e].shift,delete i.levels,i})).sort(((e,t)=>{let i=e=>e[1]>=10?e[1]:e[0]??e;return i(e.level)%10-i(t.level)%10||i(e.level)-i(t.level)})),t.card.length||delete t.card,t.info=Object.values(t.infos).reduce(((e,t)=>(Object.keys(e).forEach((i=>{t[i]>e[i]&&(e[i]=t[i]);})),e)),{hp:0,card:0,draw:0,sha:0}),Object.keys(t.ad).length?Object.keys(t.ad).sort(((e,t)=>t-e)).forEach(((e,i,n)=>{(e>=10&&t.ad[e]==t.ad[e%10]||t.ad[e]==t.ad[n[i+1]])&&delete t.ad[e];})):delete t.ad,t.start.length?t.start=Math.min(...t.start):delete t.start,delete t.infos,delete t.levels,t))).sort(((e,t)=>e.level-t.level));}));var p=i.Root.UniversalGroup.filter((e=>void 0!==e.fightgroup)).reduce(((e,t)=>{e[t.fightID]||(e[t.fightID]={});let i=String(t.fightgroup).slice(-3);return e[t.fightID][i]||(e[t.fightID][i]=[]),e[t.fightID][i].push(t),e}),{}),m=Array.from(Array.from(i.Root.Level.reduce(((e,{cityID:t,eventfight:i,universalfight:n,startshow:a})=>{var l,o;function s(i){if(!i||0==i.length)return;let n=e.get(i);n?n.includes(c[t])||n.push(c[t]):e.set(i,[c[t]]);}return s(n),s(null==(o=null==(l=null==i?void 0:i.split(";"))?void 0:l.map((e=>e.slice(-3))))?void 0:o.filter(((e,t,i)=>!i.slice(t+1).includes(e)))),e}),new Map).entries()).reduce(((e,[t,i])=>{let n=i.length>1&&new Set(i.map((e=>e.slice(0,3)))).size<2?i.map(((e,t)=>e.slice(t?3:0))).join("/"):String(i);return e.get(n)||e.set(n,new Set),(p[t]?Object.keys(p[t]):t).forEach((t=>e.get(n).add(t))),e}),new Map).entries()).reduce(((e,[t,i])=>(e[t]=Array.from(i,(e=>h[e])),e)),{});rogejson.jsbs=JSON.stringify(Object.entries(m).filter((e=>e[0].includes(l+"-"))).reduce(((e,[t,i])=>{let n=t.slice(2);return e[n]||(e[n]=[]),i.forEach((t=>{"新年大吉"!=t.fight&&e[n].push(t);})),e}),{})),rogejson.jsft=JSON.stringify(Object.values(h).filter((e=>["天涯故交","招兵买马","万众敬仰"].includes(e.event)&&e.shift||["突来危机","擂台比武","战事推演","为民除害","赛前演习","宵小叫嚣"].includes(e.event))).reduce(((e,{event:t,generals:i,fight:n})=>(e[t]||(e[t]=[]),e[t].push({...n?{fight:n}:{},generals:i}),e)),{})),rogejson.wscd=JSON.stringify(Object.values(n.Card.map((({CitationID:e,money:t})=>({...Rplot[e],money:t}))).reduce(((e,{level:t,money:i,name:n,color:a,number:l,desc:o,rType:s})=>{let r=t+n+l;return e[r]||(e[r]={cl:[],level:i,name:n,number:l,type:s,desc:o}),e[r].cl.push(a),e}),{})).sort(msort("type","level"))),rogejson.wssp=JSON.stringify(n.Spell.map((({CitationID:e,money:t})=>({...Rplot[e],money:t}))).sort(msort("money","level","spellid")).map((({level:e,money:t,name:i,desc:n})=>({level:t,name:i,desc:n})))),rogejson.wszf=JSON.stringify(n.Tactics.map((({CitationID:e,money:t})=>({...Rplot[e],money:t}))).filter((e=>{var t;return (e.name=null==(t=e.name)?void 0:t.replace("·新",""))&&!e.name.includes("废弃")&&!e.desc.includes("备用")&&!/(游戏|战斗)开始/.test(e.desc)})).sort(((e,t)=>!e.money^!t.money?e.money?1:-1:0!=e.name.slice(0,2).localeCompare(t.name.slice(0,2))?e.name.slice(0,2).localeCompare(t.name.slice(0,2)):msort("money","level","name.length")(e,t))).map((({level:e,money:t,name:i,desc:n})=>({level:t,name:i,desc:n}))).filter(((e,t,i)=>JSON.stringify(e)!=JSON.stringify(i[t+1])))),rogejson.jssp=JSON.stringify(Rplot.filter((e=>3==(null==e?void 0:e.type))).sort(msort("level","money","spellid")).map((({level:e,money:t,name:i,desc:n})=>({name:i,level:e,desc:n})))),rogejson.jscd=JSON.stringify(Object.values(Rplot.filter((e=>(null==e?void 0:e.type)>=4)).reduce(((e,{level:t,money:i,name:n,color:a,number:l,type:o,desc:s,rType:r})=>{let d=t+n+l,c=[33,34].includes(Math.floor(r/100))||"诸葛连弩"==n&&4==t;return e[d]||(e[d]={cl:[],level:c?0:t,money:i,name:n,number:l,type:r+(c?6:0),desc:s}),e[d].cl.push(a),e}),{})).sort(msort("type","level","money")).sort(((e,t)=>e.level>0&&0==t.level?-1:0))),rogejson.jssd=JSON.stringify(i.Root.seed.sort(msort("level","seed")).map((({name:e,desc:t,level:i,huchijineng:n})=>{var a,l,o;let s=null==(a=null==t?void 0:t.match(/.*获得【([^【】]*)】.*/))?void 0:a[1];return s&&(t+=(null==(l=spellDict[n])?void 0:l.desc)??(null==(o=spellDict.find((e=>(null==e?void 0:e.name)==s)))?void 0:o.desc)),{name:e,level:i,desc:t}}))),rogejson.jssc=JSON.stringify(i.Root.school.map((({school:e,name:t,effect:i,needputong:n,needxiyou:a,needshishi:l,needchuanshuo:o})=>({school:e,name:t,need:[n,a,l,o],desc:Rplot[i].desc.replaceAll(" ","")})))).replace("（","(").replace("）",")").replace("）",")"),rogejson.jszf=JSON.stringify(Rplot.filter((e=>2==(null==e?void 0:e.type))).filter((e=>(e.school=parseInt(e.school||100),e.name=e.name.replace("·新",""),!e.name.includes("废弃")&&!e.desc.includes("备用")&&!e.name.includes("套装")))).sort(((e,t)=>0!=e.name.slice(0,2).localeCompare(t.name.slice(0,2))?e.name.slice(0,2).localeCompare(t.name.slice(0,2)):msort("level","money","name.length")(e,t))).map((({level:e,money:t,name:i,desc:n,school:a})=>({...a<100?{school:a}:{},name:i,level:e,desc:n}))).filter(((e,t,i)=>JSON.stringify(e)!=JSON.stringify(i[t+1])))),rogejson.jstf=JSON.stringify(i.Root.saijitianfu.filter((e=>e.seasonID==l)).reduce(((e,{tfid:t,ceng:i,type:n,cost:a,plot:l,preposition:o})=>(e[t]={id:t,x:n,y:i,cost:a,pre:(null==o?void 0:o.split(/,|;/))??[],...Rplot[l]},e)),[{id:0,x:0,y:0,cost:0,pre:[],name:"",level:0,type:0}])),t(rogejson);}function f(e,t,n){var a,l,s;return e?e.includes(",")?(([e,t])=>["随机","普通","稀有","史诗","传说"][t]+{2:"战法",3:"技能",4:"手牌",5:"装备"}[e])(e.split(",")):d[e]?(t>1?t:"")+d[e]:Rplot[e]?null==(a=Rplot[e])?void 0:a.name:u[e]?(o.set(e,null==(l=i.Root.Adventure.find((e=>e.ID===parseInt(n/10))))?void 0:l.chapname),u[e].map((e=>e.generalname)).join("\n")):null==(s=i.Root.Card.find((t=>t.id==e)))?void 0:s.name:""}function g({general:e,hp:t,maxhp:i,armor:n,getarmor:a,card:l,draw:o,sha:s,next:r,pre:d}){return (d?">":"")+e+t+(i!==t?"/"+i:"")+"血"+l+"牌摸"+o+"杀"+s+(r?">":"")}}(o["hd_roguelike.sgs"],o["hd_1v1_rogue.sgs"]),"string"!=typeof e||"guanxing"==e){let i=function(e,t,n="https://web.sanguosha.com/220/h5_2/res/runtime/pc/general/big/bigSkin/"){let a=n+e+".png";return fetch(a).then((l=>l.ok?{name:t,desc:`<a target="_blank" href="${a}"><img src="${a.replace("bigSkin","static").replace("big/s","seat/s")}"></a>`}:n.includes("seat")?void 0:i(e,t,n.replace("big/s","seat/s").replace("bigSkin","static"))))};initMap.gxjson={"结果为代码自动推演和预测，请以最终公告为准！更新时间":(new Date).toLocaleString(),"【充值消费】":[]};let l=o["gn_dbs_quest.sgs"].TaskAll.Task.filter((({_attributes:e})=>e.clientTimeStart>=String(a))).map((({_attributes:e,Reward:t})=>{let i=",";return t.SelectReward&&(t=t.SelectReward,i="/"),t.RewardItem.length||(t.RewardItem=[t.RewardItem]),{id:e.id,time:e.timeStart.slice(0,8)+"—"+e.timeEnd.slice(0,8),desc:"【"+e.name+"】"+e.desc,reward:t.RewardItem.map((({_attributes:e})=>m(e.itemId+","+e.count))).join(i)}})).concat(o["sys_h5_quest.sgs"].root.Task.filter((e=>e.ClientTimeStart>=String(a))).map((({Id:e,Name:t,Desc:i,Rewards:n,Count:a,ClientTimeStart:l,ExtraRewards:o,ClientTimeEnd:s,SelectRewards:r})=>{let d=r?"/":",";return {id:e,time:l.slice(0,8)+"—"+s.slice(0,8),desc:"【"+t+"】"+i,reward:[n+","+a,...(null==o?void 0:o.split(";"))??[]].map(m).join(d)}}))),r=o["sys_h5_task.sgs"].TaskAll.TaskNode.filter((({duration:e,quest_id:t})=>t&&(!e||(null==e?void 0:e.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6})?.*"),"$1"))>=String(a)))).reduce(((e,{duration:t,quest_id:i,name:n})=>{var a,o;let s=i.split(";").map((e=>parseInt(e))).filter((e=>e>0)),r=((null==(o=t||(null==(a=l.find((({id:e,time:t})=>s.includes(e)&&t)))?void 0:a.time))?void 0:o.slice(0,8))+"·【"+(null==n?void 0:n.replace(/.*盲盒.*/,"盲盒福利"))+"】").replace(/.*(充值|消费).*/,"【充值消费】");return s.forEach((t=>{""!=t&&(e[t]=r);})),e}),{});l.forEach((({id:e,...t})=>{let i=r[e]??String(a)+"·【其它任务】";initMap.gxjson[i]||(initMap.gxjson[i]=[]),initMap.gxjson[i].push(t);})),(b=o["ff_dbs_lottery_new.sgs"].root.ShopGoods.filter((({timeRange:e})=>(null==e?void 0:e.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a))).map((({Id:e,counts:t,exchangecount:i,timeRange:n})=>({time:null==n?void 0:n.replace(/.*?([0-9]+)T[0-9]+,([0-9]+)T[0-9]+/,((e,t,i)=>t+"-"+i)),desc:"消耗·星石币*"+i,reward:m(e+","+t)})))).length>1&&(initMap.gxjson[(null==(w=b[0].time)?void 0:w.slice(0,8))+"·兑换【占星秘宝】"]=b),o["ff_exchange_new.sgs"].root.Common.filter((({duration:e})=>(null==e?void 0:e.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a))).forEach((({itemid:e,goods:t,rewardstype:i,duration:n})=>initMap.gxjson[n.slice(0,8)+"·【"+goodsID(e).name+"】兑换"]=t.sort(((e,t)=>t.exchangecount1-e.exchangecount1)).map((({exchangecount1:t,Id2:i,counts:a,limitcounts:l,itemid2:o,exchangecount2:s})=>{let r=String(a).split(";");return {time:n.slice(0,8)+"—"+n.slice(16,24),desc:"消耗·"+m((o??e)+","+(s??t))+(l?",限"+l+"次":""),reward:String(i).split(";").map(((e,t)=>m(e+","+r[t]))).join("/")}})))),o["sys_treasure_chest.sgs"].root.Common.filter((({duration:e})=>(null==e?void 0:e.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a))).forEach((({itemid:e,rewards:t,duration:i})=>initMap.gxjson[i.slice(0,8)+"·开启【"+goodsID(e).name+"】"]=t.map((t=>({time:i.slice(0,8)+"—"+i.slice(16,24),desc:"开启·"+m(e+","+t.counts),reward:JSON.stringify(t).split(/,"goodsid[0-9]+":" *([0-9,;]+) *"/).filter((e=>(null==e?void 0:e.search(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/))>=0)).map((e=>e.replace(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/,((e,t,i)=>m(t)+(i?"["+m(i)+"]":""))))).join(2==t.rewardstype?"/":",")})))));let c=[],u=[],p=[],f=o["sys_h5_dbs_clientserverpub.sgs"].client.DuoBao[0].item.filter((({BeginTime:e})=>e>String(a))).flatMap((({DropId:e,ExchangeId:t,BeginTime:i,EndTime:n})=>{let a=i.slice(0,8)+"-"+n.slice(0,8),l=(h.get(Math.abs(e))??[]).map(goodsID).filter((({name:e})=>!["夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","招募令","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(e))),o=l.map((({ID:e})=>e)),s=(h.get(Math.abs(t))??[]).map(goodsID).filter((({ID:e,name:t,TypeID:i})=>o.includes(e)||!(43==i&&(null==t?void 0:t.endsWith("动态套装"))||36==i&&(null==t?void 0:t.startsWith("文和乱武*"))||25==i&&["赵襄","沙摩柯(SP)","孙尚香(界限突破)"].includes(t)||["枭雄金印","水晶碎片","圣魂玄晶","史诗皮肤锦囊","传说皮肤锦囊","至臻皮肤礼盒","谋定水晶自选礼盒"].includes(t)))).map((({ID:e,name:t})=>{let i=l.findIndex((({name:e})=>e==t));return i>=0&&o.splice(i,1,e),e}));return Array.from(new Set([...o,...s])).map(goodsID).map((({ID:e,TypeID:t,PicID:i,name:n,returngoods:l,usedeffect:r,info:d,fragment:c})=>{var u;let h={time:a,name:n,price:[...o.includes(e)?["四角"]:[],...s.includes(e)&&c?[c+"夺宝碎片"]:[]].join("/"),...(f=["祈福灯","圣魂玄晶","枭雄金印"].includes(n)?"":l&&"0"!=l&&l.split(";").filter((e=>(null==e?void 0:e.search(/[0-9]+,[0-9]+/))>=0)).map(m).join(";")||(null==r?void 0:r.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&r.replace(/([0-9]+),[0-9,]+/g,m)||r&&g(r)||d,f&&{desc:f})};var f;return (36==t||(null==(u=h.name)?void 0:u.search(/\*[^0-9]/))>=0)&&p.push({name:n,res:i}),h}))}));f.length&&(initMap.gxjson["夺宝行动"]=f,f=f.map((({name:e})=>e)));let y=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter((e=>{var t;return (null==(t=e.x)?void 0:t.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a)&&834901!=e.a})).map((({a:e,ah:t,l:i})=>{if(i&&i.replace(/([0-9]+),[0-9,]+/g,((e,i)=>(t||[100301,200101,1325201].includes(parseInt(i))||c.push(parseInt(i)),e))),!t)return e;u.push(e);})).filter(Boolean).concat(c).sort(((e,t)=>e-t)).filter(((e,t,i)=>0==t||e!=i[t-1]));Array.from(new Set(o["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.filter((e=>e.SellTime>String(a))).map((e=>e.baseID)).concat(y.concat(y.filter(((e,t,i)=>{var n,a;return e-i[t-1]>1e3&&i[t+1]-e<1e3&&"*"!=(null==(a=null==(n=goodsID(e))?void 0:n.name)?void 0:a[4])})).map((e=>o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter((t=>t.a-e>0&&(t.a/1e4|0)==(e/1e4|0))).map((e=>e.a)))).reduce(((e,t)=>[...e,...t]),[])).sort(((e,t)=>e-t))))).map((e=>goodsID(e))).filter((e=>e&&![...f,"夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","招募令","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(e.name))).forEach((({ID:e,TypeID:t,PicID:i,name:n,maxBuyCount:a,yuanbao:l,returngoods:o,SellTime:s,usedeffect:r,info:d,yuanbaoonly:c,fragment:u,exchange:h,shopvisual:f})=>{var y;let v={...s&&{time:s.replace(/.*?([0-9]+)T[0-9]+;([0-9]+)T[0-9]+/,((e,t,i)=>t+"-"+i))},name:n,...(null==h?void 0:h.includes(","))?{price:m(h)}:f&&999999!=l&&{price:c?l+"通用元宝":l+"元宝",...a&&((e,t)=>parseInt(e)>0?{max:t+"个/"+(1==e?"":e)+"天"}:{})(...a.split(";"))},...(I=["祈福灯","圣魂玄晶","枭雄金印"].includes(n)?"":o&&"0"!=o&&o.split(";").filter((e=>(null==e?void 0:e.search(/[0-9]+,[0-9]+/))>=0)).map(m).join(";")||(null==r?void 0:r.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&r.replace(/([0-9]+),[0-9,]+/g,m)||r&&g(r)||d,I&&{desc:I})};var I;(36==t||(null==(y=v.name)?void 0:y.search(/\*[^0-9]/))>=0)&&p.push({name:n,res:i}),String(v.price).includes("夺宝")||String(v.price).includes("灵宝")?(initMap.gxjson["夺宝行动"]||(initMap.gxjson["夺宝行动"]=[]),initMap.gxjson["夺宝行动"].push(v)):v.max?(initMap.gxjson["限购礼包"]||(initMap.gxjson["限购礼包"]=[]),initMap.gxjson["限购礼包"].push(v)):(initMap.gxjson["其它道具"]||(initMap.gxjson["其它道具"]=[]),initMap.gxjson["其它道具"].push(v));})),null==(n=initMap.gxjson["其它道具"])||n.sort(((e,t)=>e.price&&!t.price?-1:1)),u.length&&(initMap.gxjson["祈福武将"]=Object.entries(u.map((e=>goodsID(e))).filter((({returngoods:e})=>{var t;return 25==(null==(t=goodsID(e.split(";")[1].split(",")[0]))?void 0:t.TypeID)})).reduce(((e,{name:t,lotteryPrice:i})=>(e[i]||(e[i]=[]),e[i].push(t.replace("武将","").replace(/\(.*?\)/g,"")),e)),{})).sort(((e,t)=>t[0]-e[0])).map((([e,t])=>({price:e+"同心结",reward:t.join("/")})))),(S=o["ff_tiangong.sgs"].root.Drop.reduce(((e,{Id:t,ItemId:i,MaxCount:n})=>{var a;return e[t]||(e[t]=[]),a=m(i+","+n),["欢乐豆","手气卡","点将卡","换将卡","诏令天下","夺宝券","招募令","武将包","皮肤包","朱砂","灵宝","桃花","功勋","校尉将印","大将军印","水晶碎片","圣魂玄晶","传世玉玺"].some((e=>a.startsWith(e)))||e[t].push(a),e}),[]).reduce(((e,t)=>{if(t){let i=e.find((({reward:e})=>t.includes(e)));i&&(i.reward=t.join(","));}return e}),o["ff_tiangong.sgs"].root.Common.slice().reverse().reduce(((e,{Id:t,Name:i,bigrewards:n,Duration2:l})=>{let o=parseInt(l.slice(0,8))+1;if(o<parseInt(a))return e;let s=e.find((({name:e})=>e==i));return s?s.time+=";"+o:e.push({name:i,reward:generalDict[n],time:String(o)}),e}),[]).reverse())).length&&(initMap.gxjson["祈愿台"]=S);const k=(I={},function(e){return I[e]?I[e]:I[e]=o["ff_chess.sgs"].root.NewChess.filter((({PlanId2:t})=>t==e)).reduce(((e,{MaxFloors:t})=>e+parseInt(t)),0)});v=o["ff_chess.sgs"].root.Common.reduce(((e,{GrandPrize:t,PlanID2:i,duration2:n})=>{var l;let o=parseInt(n.slice(0,8))+1;return o<parseInt(a)||e.push({reward:null==(l=goodsID(t))?void 0:l.name,"预估价格":k(i)/2|0,time:o+"-"+n.slice(16,24)}),e}),[]),v.length&&(initMap.gxjson["绘卷"]=v),initMap.gxjson["新品皮肤"]=p.map((({name:e})=>({name:e}))),Object.entries(initMap.gxjson).forEach((([e,t])=>initMap.gxjson[e]=Array.isArray(t)?t.map((e=>s(e,d))):s(t,d))),e&&"guanxing"!=e||t(Promise.all(p.map((({name:e,res:t})=>i(t,e)))).then((e=>initMap.gxjson["新品皮肤"]=e.filter(Boolean))).then((()=>(Object.entries(initMap.gxjson).forEach((([e,t])=>initMap.gxjson[e]=Array.isArray(t)?t.map((e=>s(e,d))):s(t,d))),initMap.gxjson))));}var v,I,S,b,w;t(o),console.warn("[initMap] Config_w 解析完成");}))))))}function msort(...e){return new Function("_a","_b","return "+e.map((e=>"((_a."+e+")-(_b."+e+"))")).join("||"))}function isDataMatched(e,t){const i=e.matchAll(/\[(\d+),(\d+)\]/g),n=Array.from(i).map((e=>({GoodsBaseID:parseInt(e[1]),ChangeCount:parseInt(e[2])})));if(n.length!==t.length)return !1;const a=new Map(t.map((e=>[e.GoodsBaseID,e.ChangeCount])));return n.every((e=>a.get(e.GoodsBaseID)===e.ChangeCount))&&t.every((e=>n.some((t=>t.GoodsBaseID===e.GoodsBaseID&&t.ChangeCount===e.ChangeCount))))}Object.assign(initMap,{cardDict:cardDict,cardIDsOrder:cardIDsOrder,spellDict:spellDict,generalDict:generalDict,skinSP:skinSP,skinDict:skinDict,skinMap:skinMap,bigSkin:bigSkin,goodsID:goodsID,rogejson:rogejson,gxjson:gxjson,Rfight:Rfight,Rchoose:Rchoose,Rcity:Rcity,secId:secId,vskinMap:vskinMap,Rplot:Rplot});var variable='<head><title>三国杀打小抄</title><meta charset="UTF-8"><style>::-webkit-scrollbar{width:5px;height:12px}::-webkit-scrollbar-track{border:1px solid #050505}::-webkit-scrollbar-thumb{background:#5f563f}::-webkit-scrollbar-thumb:hover{background:#2c2c2c}.body{width:100%;padding:0;font-size:13px;background:#23201d;background-size:cover;color:#f2de9c;display:flex;flex-direction:column;margin:1px;user-select:none;max-width:100vw;overflow-x:hidden;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Tahoma,Arial,sans-serif}.nav{width:100%;background:#23201d;text-align:center;display:flex;align-items:center;gap:15px;padding:5px 0}.nav1{font-weight:bolder;height:20px;width:40%;color:#f2de9c;background:#23201d;margin-right:15px;display:block}.sha{font-weight:bolder;height:20px;width:40%;color:#f2de9c;background:#23201d;margin-right:15px;display:block}#nav1:empty{display:none}.nav2{height:20px;width:49%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.nav2:hover{color:#f2de9c;background:#372820;border:1px solid #f2de9c}.nav2:focus{background:#372820;box-shadow:1px 1px 3px #f2de9c}.content{margin:1px}.AC-head{font-weight:bolder;height:66px;width:13%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin:1px;border-radius:5px;border:1px #23201d solid;box-shadow:1px 0 3px;overflow:hidden}.AC-head:hover{background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.AC-body{height:60px;width:79%;float:left;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.invite-body{height:40px;width:92%;float:left;display:flex;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:5px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.orderContainer{text-align:right;vertical-align:bottom}.order-head{font-weight:bolder;width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.order-body:empty{height:35px}.order-body{position:relative;padding:5px;height:auto;width:94%;display:block;box-shadow:1px 1px 3px;z-index:1;margin:1px;overflow:hidden;border-radius:5px}.order-body:after{text-align:center;content:var(--No-content, \'座位号丨武将\');position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px \'Arial Black\';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownShouPai{border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.knownCardsInHand{text-align:center;position:relative;overflow:hidden;display:none;height:auto}.knownCards:empty{text-align:center;position:relative;overflow:hidden;display:none}.knownCards{width:94%;text-align:center;position:relative;overflow:hidden;height:auto}@keyframes blink{50%{border-color:#f2de9c}}.paiduiCards:after{text-align:center;content:\'牌堆\';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px \'Arial Black\';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.qipaiCards:after{text-align:center;content:\'本回合弃牌堆\';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px \'Arial Black\';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownCards:after{text-align:center;content:\'场上手牌\';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px \'Arial Black\';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#quanBian:after{text-align:center;content:\'权变牌\';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px \'Arial Black\';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#yanXi:after{text-align:center;content:\'宴戏牌\';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px \'Arial Black\';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardTypeDetail:after{text-align:center;content:\'牌堆类型详情\';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px \'Arial Black\';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.ding{text-align:center;width:100%;position:relative;height:auto;display:none}.dingCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.dingCards:after{content:\'第一张为牌堆顶\';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px \'Arial Black\';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.di{text-align:center;width:100%;position:relative;height:auto;display:none}.diCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.diCards:after{content:\'第一张为牌堆底\';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px \'Arial Black\';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardDetail{width:100%;overflow:hidden;display:block}.type{width:100%;float:left}.cardTypeContainer{width:100%;overflow:hidden;display:block}.type-head{width:10%;float:left;text-align:center;color:#f2de9c;margin-left:3px;display:block;overflow:hidden;cursor:pointer}.type-body{padding:5px;width:94%;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.cardType{font-size:12px;width:25%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.cardType:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.storeDetail{font-size:12px;width:50%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.detail{width:100%;float:left;overflow:hidden}.detail-head{width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.detail-body{min-height:40px;padding:5px;width:94%;float:left;display:block;box-shadow:1px 1px 3px;margin:1px;border-radius:5px;overflow:hidden}.panel-header{background:#23201d;color:#f2de9c;padding:3px;text-align:left;border:none;width:100%;cursor:pointer;display:flex;align-items:center;border-radius:5px;border:1px transparent solid}.triangle{width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-left:6px solid #f2de9c;margin-right:10px;transition:transform .3s ease}.panel-content{max-height:0;width:100%;float:left;display:block;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;transition:max-height .3s ease-out}.panel-header.active .triangle{transform:rotate(90deg)}.panel-header.active{color:#f2de9c;background:#372820}.panel-header:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.r{color:#f04155}.suitRec{width:50%;float:right;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",Tahoma,Arial,sans-serif;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7)}.suit{width:50%;float:left}.phrase{float:left}.face{width:12.5%;display:block;float:left}.face:hover{width:12.5%;display:block;float:left;background:#f2de9c}#shandian{width:100%;float:left}.function{width:50%;margin:1px}.jizhan{width:100%;float:left}.yanjiao{width:50%;float:left}.yanjiaospan{border:1px solid #0000;box-sizing:border-box}.yanjiaospan:hover{border:1px solid #f2de9c;cursor:pointer}.calRes{width:98%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px;font-size:13px;margin:1px}.secKillDetailText{width:100%;height:26px;float:left;text-align:center;color:#f2de9c;background:#23201d;display:block;border-radius:5px;line-height:26px;margin-top:17px}.calRes:not(:disabled):hover{font-size:12px;color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhuBTN{width:48%;height:20px;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhuBTN:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhu{width:100%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhu:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#mySeatID1{width:48%}#mySeatID2{width:48%}.res{width:100%;float:left}a:link,a:visited{color:inherit;text-decoration:none;display:inline-flex;text-decoration:underline;border-radius:5px;cursor:pointer;align-items:center;justify-content:center}a:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#donate{position:relative;color:#f2de9c;display:block;text-align:center}.uuid{position:relative;color:#f2de9c;display:block;text-align:center;cursor:pointer}.uuid:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.uuid:active{background:#372820}.width{width:100%;height:5px;clear:both}.switch-container{display:flex}.switch{position:relative;display:block;margin-left:10px;width:56px;height:26px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#23201d;-webkit-transition:.4s;transition:.4s;border-radius:34px;border:1px solid #f2de9c;--slider-position:2px}.slider:before{position:absolute;content:"";height:20px;width:20px;left:var(--slider-position,2px);bottom:2px;background-color:#f2de9c;-webkit-transition:.4s;transition:.4s;border-radius:50%}input:checked+.slider{background-color:#372820}input:focus+.slider{box-shadow:0 0 1px #372820}.status{position:absolute;top:50%;transform:translateY(-50%);left:5px;color:#555}.explanation{margin:0 10px;display:flex;width:100%}input:checked+.slider+.status:before{content:\'开\'}input:checked+.slider+#autoBotStatus:before{content:var(--bot-status, \'30\');color:#f2de9c}input+.slider+#autoBotStatus:before{content:var(--bot-status, \'关\')}input+.slider+.status:before{content:"关"}.calRes:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.markedCard{display:inline-flex;align-items:center;border-radius:5px;border:1px solid #000;width:auto;background-color:#372820;color:#f2de9c}.mark{writing-mode:vertical-rl;margin-right:0;color:#f2de9c}.markedCard>.mark:only-child{display:none}.shoupai{color:#000;--shoupai-width:33px;padding:0;font-weight:bolder;margin-right:calc(32px - var(--shoupai-width));float:left;width:var(--shoupai-width);min-width:var(--shoupai-width);height:38px;border:1px solid #000;text-align:center;background:rgba(210,200,160,.5);border-radius:5px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",\'Noto Color Emoji\';white-space:nowrap;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7);font-size:13px}.shoupai.R{color:red}.shoupai.G{background:0}.shoupai.G .shoupai{background:0;pointer-events:none}.order-body:not(#paiduiCards) .shoupai:disabled{display:none}.order-body:not(#paiduiCards) .shoupai.G{width:auto}.left{width:30%;float:left}.right{width:70%;float:right}input[type=checkbox]:disabled+.slider{background-color:gray;cursor:not-allowed}.question-mark{display:inline-block;position:relative;width:15px;height:15px;line-height:15px;text-align:center;border:1px solid #f2de9c;border-radius:50%;margin-left:2px;transition:background-color .3s}.question-mark:hover{background-color:#372820;cursor:pointer}.tooltip{position:relative;background-color:#333;text-align:center;padding:5px;border-radius:5px;max-width:200px;white-space:pre-line;z-index:10000000001;opacity:0;pointer-events:none;transition:opacity .1s ease-in-out;color:#f2de9c;font-size:13px}.tooltip.visible{opacity:1;pointer-events:auto}.tooltip.top{margin-left:50px}#sidebarHint{position:fixed;top:0;right:0;width:25px;height:100%;background-color:rgba(55,40,32,.8);color:#f2de9c;display:none;justify-content:center;align-items:center;font-size:20px;writing-mode:vertical-rl;text-orientation:upright}:root{--my-background-image:url(\'https://web.sanguosha.com/220/h5_2/res/assets/bigPng/propGet.png\')}.sorderContainer{font-size:13px;width:100%;display:flex;align-items:center;width:146px;z-index:10000000000;user-select:none;text-align:left;transition:height .2s;position:fixed;transform-origin:0 0}.sorder-head{display:flex;align-items:center;justify-content:center;font-weight:bolder;width:10%;height:25px;text-align:center;color:#f2de9c;margin-left:3px}.sorder-body{pointer-events:auto;height:auto;width:100%;float:right;display:flex;flex-wrap:wrap;overflow:hidden;z-index:1;max-height:48px}.sorder-body.show-ellipsis::after{content:\'...\';position:absolute;bottom:0;left:50%;transform:translateX(-50%);text-align:center;color:#f2de9c;font-weight:700;height:20px;background:linear-gradient(to bottom,rgba(255,255,255,0),rgb(0 0 0 / 80%));width:inherit}.sorder-body:hover{max-height:none;overflow:visible}.sorder-body:hover::after{display:none}.sorder-body:not(#paiduiCards) .shoupai:disabled{display:none}.sorder-body:not(#paiduiCards) .shoupai.G{width:auto}@keyframes fadeInLeftToRight{0%{clip-path:inset(0 100% 0 0);opacity:0}100%{clip-path:inset(0 0 0 0);opacity:1}}@keyframes fadeOutRightToLeft{0%{clip-path:inset(0 0 0 0);opacity:1}100%{clip-path:inset(0 100% 0 0);opacity:0}}.ac-tooltip{position:fixed;top:100px;left:45%;background-color:transparent;background-image:var(--my-background-image);cursor:pointer;background-size:100% 100%;color:#f44336;font-size:16px;border-radius:4px;z-index:9999;overflow:hidden;white-space:nowrap;padding:16px 32px;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transform:translateX(0);transition:opacity 1s ease-in-out,visibility 1s ease-in-out}.ac-tooltip.green{background-color:transparent;color:#f2de9c}.city{visibility:hidden;transition:opacity 1s ease-in-out,visibility 1s ease-in-out;background-color:rgba(55,52,39,.7);color:#f2de9c;align-items:center;justify-content:center;border-radius:5px;text-align:center;flex-direction:column;padding:5px}hr{width:100%;margin:0}@keyframes blink{50%{border-color:#f2de9c}}.show{animation:fadeInLeftToRight 1s forwards,blink 2s infinite;visibility:visible}.hide{animation:fadeOutRightToLeft 1s forwards;visibility:hidden}.window{width:1024px;height:600px;border:2px solid #333;border-radius:8px;box-shadow:0 0 15px rgba(0,0,0,.5);position:relative;background-color:#f5f5f5;overflow:hidden}.window-header{display:flex;justify-content:space-between;align-items:center;background-color:#23201d;color:#fff;padding:5px;cursor:move}.window-header .title{font-weight:700;padding-left:10px}.window-header .controls{display:flex;gap:5px}.window-header .controls button{background:0 0;border:none;color:#fff;cursor:pointer;padding:5px}.window-header .controls button:hover{background-color:rgba(255,255,255,.2)}.window-content{width:100%;height:calc(100% - 40px);border:none}.fullscreen{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-5C3C11THB3"><\/script><script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"><\/script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5C3C11THB3")<\/script></head><div class="body"><div class="nav"><div class="nav1" id="phrase">当前阶段提示</div><div class="sha" id="sha">可出杀次数：0</div></div><div class="content" id="content"><div class="orderAndShouPai" id="orderAndShouPai"><button class="panel-header"><span class="triangle"></span> <b>武将手牌</b></button><div class="panel-content order" id="button"><div class="orderContainer" id="or1"><div class="order-body No1" id="1" style="--No-content:\'神诸葛亮丨一\'"><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button><div class="markedCard"><span class="mark">木马</span> <button class="shoupai G">♥10<br>测试</button> <button class="shoupai R">♦K<br>测试</button></div><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button></div></div><div class="orderContainer" id="or2"><div class="order-body No2" id="2" style="--No-content:\'卧龙诸葛丨二\'"><button class="shoupai G">♥10<br>暗牌</button> <button class="shoupai G">♥10<br>样式</button></div></div><div class="orderContainer" id="or3" style="--No-content:\'天候孔明丨三\'"><div class="order-body No3" id="3"></div></div><div class="orderContainer" id="or4" style="--No-content:\'诸葛亮丨四\'"><div class="order-body No4" id="4"></div></div><div class="orderContainer" id="or5" style="--No-content:\'武诸葛亮丨五\'"><div class="order-body No5" id="5"></div></div><div class="orderContainer" id="or6" style="--No-content:\'卧龙凤雏丨六\'"><div class="order-body No6" id="6"></div></div><div class="orderContainer" id="or7" style="--No-content:\'界卧龙诸葛丨七\'"><div class="order-body No7" id="7"></div></div><div class="orderContainer" id="or8" style="--No-content:\'界诸葛亮丨八\'"><div class="order-body No8" id="8"></div></div></div><div><div class="orderContainer"><div class="order-body knownCards" id="knownCards"></div></div><div class="orderContainer"><div class="order-body paiduiCards" id="paiduiCards"></div></div><div class="orderContainer"><div class="order-body qipaiCards" id="qipaiCards"></div></div><div class="orderContainer"><div class="knownCards quanBianYanXi" id="quanBian"></div><div class="knownCards quanBianYanXi" id="yanXi"></div></div></div></div><div class="width"></div><div class="cardDetail" id="cardDetail"><div class="space"></div><div class="detail"><div class="detail-body"><div class="suit r" id="heart">♥红桃 × 0</div><div class="suit" id="spade">♠黑桃 × 0</div><div class="suit" id="club">♣梅花 × 0</div><div class="suit r" id="diamond">♦方片 × 0</div><div class="suit r" id="hongsha">红杀 × 0</div><div class="suit" id="heisha" n>黑杀 × 0</div><span>乱击/权变</span><div class="suitRec" id="suit"></div><br><span>博图</span><div class="suitRec" id="boTu"></div><br><span>上一张使用的牌</span><br><button class="shoupai R" id="lastUseCard">＾＾<br>•ω•</button><br><br><br><div id="guhuo" style="display:none">蛊惑牌</div><div class="function yanjiao" id="yanjiao">严教小抄</div><button class="function mizhuBTN" id="mizhu">糜竺小抄</button> <button class="function mizhu mySeatID" id="mySeatID1">座位：1</button> <button class="function mizhu mySeatID" id="mySeatID2">座位：2</button><div class="function res" id="result">结果样式：1 1 1 1 = 4</div></div></div><div class="width"></div><div class="type"><div class="cardTypeContainer"><div class="type-body type1" id="type1"><button class="cardType" id="test1">小抄</button> <button class="cardType">开发</button> <button class="cardType">小伙伴</button></div></div><div class="cardTypeContainer"><div class="type-body type2" id="type2"><button class="cardType">霜迟</button> <button class="cardType">孤独尊</button> <button class="cardType">无所谓</button> <button class="cardType">埃城</button> <button class="cardType">辉神</button> <button class="cardType">人富</button></div></div><div class="cardTypeContainer"><div class="type-body type3" id="type3"></div></div><div class="orderContainer"><div class="knownCards cardTypeDetail" id="cardTypeDetail"></div></div></div></div><div class="width"></div><div class="width"></div><div class="laya" id="laya"><div class="space"></div><button class="panel-header laya-header"><span class="triangle"></span> <b>快捷操作</b></button><div class="panel-content" id="layaDiv"><div class="switch-container"><div id="autoBotSwitchContainer"><span class="explanation">自动挂机</span> <label class="switch" data-tooltip="AI接管挂机刷酒馆30亲密度&#10;自动创建演武房间开始对战&#10;建议点将张辽禁将只留标风&#10;禁用其它SP武将可提高胜率&#10;到身份演武房间列表后开启&#10;界小抄用户可以无限制使用&#10;开关数字表示酒馆剩余时间&#10;双击打开官阶百胜无尽挂机&#10;到经典场国战开启可刷福卡"><input id="autoBotSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoBotStatus"></span></label></div><div><span class="explanation" id="autoExplanation"></span></div></div><div class="switch-container"><div><span class="explanation">盖主速刷</span> <label class="switch" data-tooltip="主公点将黄盖一分钟苦肉自杀速刷&#10;可用来刷武将百胜战功和官阶任务&#10;保证已激活的账号在 7 天内登录过&#10;一：登录小号创建自选身份密码房&#10;二：多开大号加入房间点自动挂机&#10;三：大号需双击自动挂机开始锁定&#10;四：小号点将黄盖，打开盖主速刷&#10;五：大号准备并保持两窗口在前台&#10;"><input id="autoHGSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoHGStatus"></span></label></div><div><span class="explanation" id="autoHGExplanation"></span></div></div><div class="switch-container" style="display:none"><div><span class="explanation">加入互助</span> <label class="switch" data-tooltip="点击加入小抄互相助力小组&#10;每天自动助力三位小抄玩家&#10;同时收到三位小抄玩家助力&#10;默认为小抄给当前玩家助力&#10;右侧可输入想要助力的玩家&#10;“再”打开《加入互助》开关&#10;该玩家可收到三个小抄助力&#10;"><input id="autoInviteSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><textarea class="invite-body" type="text" id="inviteName" required maxlength="10" size="10" placeholder="大西瓜"></textarea></div></div><button class="calRes" id="guanxing">自助观星</button> <button class="calRes" id="mail" disabled="disabled">一键领取邮箱物品</button> <button class="calRes" id="task" disabled="disabled">一键领取所有任务奖励</button></div></div><div class="store" id="store"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>山河图</b></button><div class="panel-content"><div class="switch-container"><div><span class="explanation">山河地图</span> <label class="switch" data-tooltip="提前预测奇遇事件"><input id="rogueCitySwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div><button class="calRes" id="openStore">点击打开商店换装备->跳奇遇</button></div><div><span id="chongsheng">重生是否发动：否</span></div><div><span id="sanBanFu">三板斧计数器</span></div><div id="storeDetail"><button class="storeDetail">集市霸王·壹300</button> <button class="storeDetail">集市霸王·贰200</button> <button class="storeDetail">集市霸王·叁100</button> <button class="storeDetail">会员商店·肆1100</button> <button class="storeDetail">稳定承载1100</button> <button class="storeDetail">极奢1100</button></div></div></div><div class="secKill" id="secKill"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>秒杀连点器（悬停查看详情）</b></button><div class="panel-content" id="secKillDetail"><div class="left"><br><div><label class="switch" data-tooltip="界小抄功能&#10;选择您想秒杀的物品&#10;到点之后将自动帮抢&#10;勿开开关关秒杀界面"><input id="secKillItem1Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" data-tooltip="界小抄功能&#10;选择您想秒杀的物品&#10;到点之后将自动帮抢&#10;勿开开关关秒杀界面"><input id="secKillItem2Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" data-tooltip="界小抄功能&#10;选择您想秒杀的物品&#10;到点之后将自动帮抢&#10;勿开开关关秒杀界面"><input id="secKillItem3Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br></div><div class="right"><span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span></div></div></div><div class="chat" id="chat"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>聊天（点击自动输入）</b></button><div class="panel-content chat-body"></div></div><div class="CDK"><button class="panel-header"><span class="triangle"></span> <b>兑换码（点击即兑换）</b></button><div class="panel-content"><div class="function res" id="CDK"><button class="calRes">小麦好帅</button></div></div></div><div class="tianguo"><button class="panel-header"><span class="triangle"></span> <b>统计</b></button><div class="panel-content"><button id="gamerecord" class="calRes" style="text-align:center">战绩胜率统计</button> <button id="baisheng" class="calRes" style="text-align:center">百胜战功统计</button><div id="PlayerTianGuo" style="text-align:center">你的天过次数/总次数</div><div><div id="lottery"><a href="https://goka.top:8080/choujiang?username=" target="_blank" class="calRes external-link" data-url="https://goka.top:8080/choujiang?username=" id="choujiang">点击查看祈愿台数据</a></div></div></div></div><button class="panel-header"><span class="triangle"></span> <b>设置</b></button><div class="setting panel-content"><div class="switch-container"><div><span class="explanation">屏蔽动态</span> <label class="switch" data-tooltip="屏蔽其他人的动态皮肤&#10;电脑卡顿的话可以打开"><input id="skinStateBlockSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">皮肤壁纸</span> <label class="switch" data-tooltip="打开后进入皮肤详情界面进行设置&#10;可以将动静态皮肤设置为游戏壁纸&#10;也可以把静态皮肤图片保存到本地&#10;不建议与微端自定义背景同时使用"><input id="skinPaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="paperStateButton"><span class="explanation">全局壁纸</span> <label class="switch" data-tooltip="局外背景替换为皮肤壁纸&#10;需要先打开皮肤壁纸开关"><input id="allPaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">五阶特效</span> <label class="switch" data-tooltip="其他角色显示五阶特效"><input id="generalSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">屏蔽击杀</span> <label class="switch" data-tooltip="屏蔽击杀特效"><input id="killEffectSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div style="display:none"><span class="explanation">金色卡背</span> <label class="switch"><input id="cardBackSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">明牌框框</span> <label class="switch" data-tooltip="明牌展示在武将下面"><input id="seatUISwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">卡牌标签</span> <label class="switch" data-tooltip="会在自己手上的卡牌显示标签&#10;明牌：五谷顺手迂志等明牌&#10;新组合：界小抄提示百出的新组合&#10;更多标签在开发中"><input id="cardLabelSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">自动签到</span> <label class="switch" data-tooltip="自动领取打卡签到的奖励"><input id="autoSignSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">跳体验卡</span> <label class="switch" data-tooltip="签到会有体验武将&#10;如领取会污染将池&#10;开启按钮跳过领取&#10;月底记得手动领取"><input id="autoSignSkipSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">领武将包</span> <label class="switch" data-tooltip="每天登录，自动领取免费的武将包"><input id="autoWuJiangSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">公会三敲</span> <label class="switch" data-tooltip="每天自动公会三敲&#10;无惧公会长的诫厉"><input id="autoDrumSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">月卡奖励</span> <label class="switch" data-tooltip="界小抄功能&#10;自动领取月卡奖励"><input id="autoYueKaSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">自动砍树</span> <label class="switch" data-tooltip="界小抄功能&#10;每天登录自动砍树"><input id="autoKanShuSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">跳过弹窗</span> <label class="switch" data-tooltip="跳过广告弹窗&#10;MVP结算&#10;武将包弹窗&#10;皮肤包弹窗&#10;老仙特效"><input id="skipWindowSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">跳过出货</span> <label class="switch" data-tooltip="跳过出货弹窗&#10;祈愿台翻翻乐&#10;加快氪金速度"><input id="skipProbWindowSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">兑换码&emsp;</span> <label class="switch" data-tooltip="开启将显示分享的兑换码通知&#10;且收集和分享您的兑换码兑换"><input id="CDKNotificationSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">天书小抄</span> <label class="switch" data-tooltip="发动天书在时机点增加类型标注&#10;以及提醒该类型后续发动的效果"><input id="tianshuSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div></div><div class="width"></div><div class="ACContainer"><textarea class="AC-body" type="text" id="AC" name="AC" required placeholder="点击添加激活码"></textarea> <button class="AC-head" type="submit" id="ACSubmit">激活</button></div><div style="text-align:center"><a href="https://afdian.com/@yimadaO_o" class="external-link" data-url="https://afdian.com/@yimadaO_o">开发不易 如您喜欢 不妨支持小抄</a><div class="width"></div><a href="https://qm.qq.com/q/zR8xy0INl6" class="external-link" data-url="https://qm.qq.com/q/zIwVQjlqnY">加群一起玩</a><div class="width"></div><a href="https://support.qq.com/products/664780/" class="external-link" data-url="https://support.qq.com/products/664780/" target="_blank">提需求</a><div class="width"></div><a href="https://goka.top:8080" class="external-link" data-url="https://goka.top:8080" target="_blank">关于我们</a><div class="width"></div><div class="uuid id" id="uuid">id：</div><div class="width"></div><div class="uuid nickName" id="nickName">昵称：</div><div class="width"></div><div class="uuid guildID" id="guildID">公会数字ID：</div><div class="width"></div><div class="width"></div></div></div><script><\/script></div>';let iframe=null;const version=" "+"3.0.01".replace(/^2\.9\./,""),versionText="\n修复小抄，如仍有未修复的请及时反馈；\n皮肤体验修不了；\n战绩查询增加日期筛选和武将筛选；\n游戏内标记（博图点盏渐营权变）更容易识别；\n公屏屏蔽收桃花，给你纯粹游戏体验；\n【碎碎念】这次更新拖得有点久；\n由于三杀代码更新，小抄代码修改量比较大且需要测试场景很多；\n这几天缺的酒馆自动挂机时间会陆续补发给大家的；\n感谢支持：）；\n".replace(/；/g,"<br>");function Init(){return window.WDVerSion="1.0.0",window.padding=globalConfig.padding||0,window.addEventListener("resize",resize),new Promise(((e,t)=>{Promise.all([new Promise((e=>{!function t(){var i;"undefined"!=typeof JSZipUtils&&"undefined"!=typeof CtrUtil&&void 0!==(null==(i=null==CtrUtil?void 0:CtrUtil.Ctr)?void 0:i.Ofb_Dec)&&"undefined"!=typeof SystemContext&&document.getElementById("bgDiv")?initFrame(!0).then(e):setTimeout(t,1e3);}();}))]).then(e).catch(t);}))}function Exit(){var e,t,i,n;return window.removeEventListener("resize",resize),window.removeEventListener("resize",scheduleSetGameSize),window.removeEventListener("SGSresize",SGSresize),null==(e=document.getElementById("seatUI"))||e.remove(),null==(t=document.getElementById("rogueUI"))||t.remove(),null==(i=document.getElementById("cusBGDiv"))||i.remove(),null==(n=document.getElementById("createIframe"))||n.remove(),globalState.isFrameAdd=!1,!0}function resize(){window.innerWidth=document.documentElement.clientWidth-window.padding;}function SGSresize(){window.dispatchEvent(new Event("resize"));}let updateTimeout;function scheduleSetGameSize(){updateTimeout&&clearTimeout(updateTimeout),updateTimeout=setTimeout((()=>{setGameSize(),updateTimeout=null;}),500);}async function initFrame(e=!1){var t,i,n,a,l;if(e&&(null==(t=document.getElementById("seatUI"))||t.remove(),null==(i=document.getElementById("rogueUI"))||i.remove(),null==(n=document.getElementById("cusBGDiv"))||n.remove(),null==(a=document.getElementById("createIframe"))||a.remove(),globalState.isFrameAdd=!1),!globalState.isFrameAdd){window.addEventListener("resize",scheduleSetGameSize),SystemContext._gameScreenType=SystemContext.gameScreenType,SystemContext._gameScale=SystemContext.gameScale,Object.defineProperty(SystemContext,"gameScreenType",{get:function(){return this._gameScreenType},set:function(e){this._gameScreenType!==e&&(this._gameScreenType=e,window.dispatchEvent(new Event("SGSresize")));}}),Object.defineProperty(SystemContext,"gameScale",{get:function(){return this._gameScale},set:function(e){this._gameScale!==e&&(this._gameScale=e,window.dispatchEvent(new Event("SGSresize")));}}),window.addEventListener("SGSresize",SGSresize);try{document.getElementById("bgDiv").firstElementChild.draggable=!1,null==(l=document.querySelector("link[rel=stylesheet]"))||l.remove();}catch{}return addSeatUI(),addDynamicBG(),addFrame(),globalState.isFrameAdd=!0,loadConfig_w(!0)}}function addDynamicBG(){var e=document.getElementById("bgDiv");if(e){var t=document.createElement("div");t.id="cusBGDiv",t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.zIndex="0",t.style.pointerEvents="none";var i=document.createElement("video");i.className="bg-ani",i.id="sgsBgVideo",i.autoplay=!0,i.loop=!0,i.muted=!0,i.preload="auto",i.style.setProperty("object-fit","fill","important");var n=document.createElement("img");n.className="bg-ani",n.id="sgsBgIMG",n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.style.zIndex="1",n.style.position="absolute",n.style.top="0",n.style.left="0",t.appendChild(i),t.appendChild(n),e.appendChild(t),window.dispatchEvent(new Event("resize"));}}function setGameSize(){if(!SystemContext)return;UI.width=SystemContext.gameWidth*SystemContext.gameScale|0,UI.height=SystemContext.gameHeight*SystemContext.gameScale|0,UI.scale=SystemContext.gameScale,UI.seatUIs&&UI.seatUIs.length>0&&(getSeatUiPos(),drawSeatUIs());let e={width:(SystemContext.gameWidth*SystemContext.gameScale|0)/window.devicePixelRatio,height:(SystemContext.gameHeight*SystemContext.gameScale|0)/window.devicePixelRatio};globalConfig.padding&&document.getElementById("createIframe")?(document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px",document.getElementById("createIframe").style.height="100%",document.getElementById("createIframe").style.right="0px",document.getElementById("createIframe").style.top="0px"):document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px";let t=document.getElementById("cusBGDiv"),i=document.getElementById("sgsBgVideo"),n=document.getElementById("sgsBgIMG"),a=document.getElementById("seatUI"),l=document.getElementById("rogueUI"),o=((window.innerHeight*window.devicePixelRatio-SystemContext.gameScale*SystemContext.gameHeight)/(2*window.devicePixelRatio)+SystemContext.gameScale*SystemContext.gameHeight/2)/window.devicePixelRatio;t&&(t.style.width=`${e.width}px`,t.style.height=`${e.height}px`,t.style.left=window.innerWidth/2+"px",t.style.top=o+"px"),i.width=e.width,i.height=e.height,i.style.left=window.innerWidth/2+"px",i.style.top=o+"px",n.width=e.width,n.height=e.height,a.style.width=`${e.width}px`,a.style.height=`${e.height}px`,a.style.left=window.innerWidth/2+"px",a.style.top=o+"px",l.style.width=`${e.width}px`,l.style.height=`${e.height}px`,l.style.left=window.innerWidth/2+"px",l.style.top=o+"px",UI.centerX=window.innerWidth>e.width?e.width/2:window.innerWidth/2,UI.centerY=e.height/2;}function getSeatUiPos(){const e={ScaledHeight:UI.selfSeatUiUnscaledHeight*UI.scale};let t=UI.unscaledWidth*UI.scale,i=UI.unscaledHeight*UI.scale;UI.ScaleWidth=t,UI.ScaleHeight=i;let n=UI.height,a=UI.width;var l,o,s=e.ScaledHeight,r=UI.seatUIs.length;if(1!=r){l=t,o=i;var d,c=(d=UI.seatUIs).length-1,u=0,h=0,p=0;c<3?h=c:3==c?h=1:4==c||6==c?h=2:5!=c&&7!=c||(h=3),p=c-(u=c-h>>1)-h,room.isDouDiZhu&&(2==UI.seatUIs[0].actualSeatID?(h=1,u=1):3==UI.seatUIs[0].actualSeatID&&(h=1,p=1)),room.isShanHeTu&&3==r&&1==UI.friendGeneral&&(h=1,p=1);var m,f,g=1,y=0,v=0,I=0,S=0,b=UI.rightBarWidth*UI.scale;if(u>0){var w=l,k=o*u;for(I=.25*(n-s-k)|0,UI.verticalGap=I,k+=(u-1)*I,m=g+u,y=a-w-UI.paddingRight*UI.scale-b-0,v=(n-s-k-UI.paddingTop*UI.scale-UI.paddingBottom>>1)+(UI.paddingTop+10)*UI.scale+k+UI.leftRightTop;g<m;g+=1)v-=i,(f=d[g]).posX=(y-5|0)/window.devicePixelRatio,f.posY=(v+i|0)/window.devicePixelRatio,f.DisplayLocation="Right",v-=I;}if(h>0){var W=l*h;for(S=.07*(a-b-W)|0,UI.horizontalGap=S,m=g+h,y=(a-(W+=(h-1)*S)-b)/2+W+(a<=1600?UI.paddingLeftTopExtra:0),v=(UI.paddingTop+10)*UI.scale;g<m;g+=1)y-=t,(f=d[g]).posX=(y|0)/window.devicePixelRatio,f.posY=(v+i|0)/window.devicePixelRatio,f.DisplayLocation="Top",y-=S;}if(p>0){var C=o*p;for(C+=(p-1)*(I=.25*(n-s-C)|0),m=g+p,y=UI.paddingLeft*UI.scale,v=(n-s-C-UI.paddingTop*UI.scale-UI.paddingBottom>>1)+(UI.paddingTop+10)*UI.scale+UI.leftRightTop;g<m;g+=1)(f=d[g])&&(f.DisplayLocation="Left",f.posX=(y+0|0)/window.devicePixelRatio,f.posY=(v+i|0)/window.devicePixelRatio),v+=o+I;}}}function getSeatUIs(e){if(UI.seatUIs=[],drawSeatUIs(),null===e)return;let t=room.sequence(room.mySeats[0]);UI.seatUIs=t.map((e=>({actualSeatID:room.getOrder(e)+1}))),getSeatUiPos(),drawSeatUIs();}function addDragHint(){var e=document.createElement("div");e.id="sidebarHint",e.innerText="拖到这里变为变为侧边栏，再次拖动取消侧边栏",document.body.appendChild(e);}function addSeatUI(){var e=document.createElement("div");e.id="seatUI",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.pointerEvents="none",e.style.display="";var t=document.createElement("div");t.id="rogueUI",t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.pointerEvents="none",t.style.display="",globalConfig.seatUISwitch?e.style.display="block":(e.style.display="none",document.querySelectorAll("#seatUI > *:not(.city)").forEach((e=>e.style.display="none"))),document.body.appendChild(e),document.body.appendChild(t);}function resetOrderContainer(){for(let e=0;e<=7;e++){let t="or"+(e+1);document.getElementById(t).style.display="block";}}function hideOrderContainer(e){for(let t=7;t>=e;t--){let e="or"+(t+1);document.getElementById(e).style.display="none";}}function addFrame(){let e=document.getElementById("createIframe");if(!e){e=document.createElement("div"),e.id="createIframe",e.id="createIframe",e.className="createIframe",e.style.position="fixed",e.style.overflow="hidden",e.style.resize="vertical",e.style.top="31px",e.style.right="155px",e.style.width="230px",e.style.height="500px",e.style.zIndex="10000000000",e.style.display="flex",e.style.flexDirection="column",e.style.color="#f2de9c",e.style.background="rgb(35, 32, 29)",e.style.userSelect="none",e.style.textAlign="left",e.style.transition="height 200ms",e.style.borderRadius="8px",e.style.transformOrigin="top right",e.style.transform="translate(0px, 0px)";var t=document.createElement("p");t.id="header",t.className="header",t.style.margin="1px",t.style.userSelect="none",t.style.cursor="grab",t.style.display="flex",t.style.alignItems="center",t.style.fontSize="20px",t.style.borderRadius="5px";var i=document.createElement("span");i.id="title",i.style="margin-right: auto;",i.innerText="三国杀打小抄"+version,e.appendChild(t),e.onmouseover=function(){document.querySelectorAll("div.city").forEach((e=>{e.classList.remove("hide"),e.classList.add("show");}));},e.onmouseout=function(){document.querySelectorAll("div.city").forEach((e=>{e.classList.remove("show"),e.classList.add("hide");}));};var n=document.createElement("button");n.innerText="-",n.id="toggle-me",n.style="text-align: center;color: #f2de9c;background: rgb(35, 32, 29);border-radius: 6px;width: 26px;height: 26px;border: 1px solid rgb(212, 212, 162);cursor: pointer;user-select: none;background: rgb(107, 30, 30);display: flex;align-items: center;justify-content: center;margin: 1px;font-size: 20px;",n.type="button",n.addEventListener("mouseover",(function(){n.style.backgroundColor="rgb(130, 30, 30)";})),n.addEventListener("mouseout",(function(){n.style.backgroundColor="rgb(107, 30, 30)";})),t.appendChild(i),t.appendChild(n),localStorage.getItem("DXCVersion")!=version&&(addTooltip(`小抄已经更新到${version}<br>${versionText}`,"acTooltip",3e4,"green"),localStorage.setItem("DXCVersion",version)),document.body.appendChild(e),iframe=document.createElement("div"),iframe.style="border: none;width: 230px;height: 100%;margin: 0px;overflow-y: auto;overflow-x: hidden;",iframe.id="iframe-source",e.append(iframe),iframe.innerHTML=variable;iframe.querySelectorAll("script").forEach((e=>{const t=document.createElement("script");e.src?(t.src=e.src,t.async=e.async):t.textContent=e.textContent,document.body.appendChild(t),e.remove();}));const a=document.querySelectorAll('input[id$="Switch"]'),l=document.querySelectorAll(".slider");a.forEach(((e,t)=>{const i=l[t];e.addEventListener("change",(e=>{const t=e.target.checked;try{gsap.to(i,{duration:.4,ease:"power2.inOut",css:{"--slider-position":t?"30px":"2px"},onStart:()=>{gsap.to(i,{scale:1.1,duration:.2,ease:"power1.inOut"});},onComplete:()=>{gsap.to(i,{scale:1,duration:.2,ease:"power1.inOut"});}}),gsap.to(i,{duration:.4,ease:"power2.inOut",boxShadow:t?"0 0 15px rgba(255, 204, 0, 1)":"0 0 0 rgba(0, 0, 0, 0)",background:t?"linear-gradient(to right, #ff7b54, #ffcc00)":"rgb(35, 32, 29)"});}catch(n){console.error("GSAP animation failed:",n);}}));}));document.querySelectorAll(".panel-header").forEach((e=>{e.addEventListener("click",(function(){const e=this.nextElementSibling;this.classList.toggle("active"),e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=e.scrollHeight+"px";const t=new MutationObserver((()=>{e.style.maxHeight&&(e.style.maxHeight=e.scrollHeight+"px");}));t.observe(e,{childList:!0,subtree:!0,characterData:!0}),e.style.maxHeight||t.disconnect();}));}));const o=document.querySelector(".laya-header");if(o){const e=o.nextElementSibling;o.classList.add("active"),e.style.maxHeight=e.scrollHeight+"px";}document.querySelectorAll(".switch").forEach((function(e){e.addEventListener("mouseenter",(function(t){if(e.getAttribute("data-tooltip")){let t=document.createElement("div");t.classList.add("tooltip","top"),t.textContent=e.getAttribute("data-tooltip"),document.body.appendChild(t);const i=e.getBoundingClientRect();t.style.left=i.left+window.scrollX+i.width/2-t.offsetWidth-15+"px",t.style.top=i.top+window.scrollY-t.offsetHeight-15+"px",t.classList.add("visible"),e.addEventListener("mouseleave",(function(){t.classList.remove("visible"),t.remove();}));}}));}));}addDragHint(),buttonClick(),initDragElement(),drawChatFace();}function buttonClick(){function e(e,t,i){var n,a,l=e.target,o=l.checked;if("autoBotSwitch"!==(i=l.id)&&"autoHGSwitch"!==i&&"secKillItem1Switch"!==i&&"secKillItem2Switch"!==i&&"secKillItem3Switch"!==i)if(globalConfig[i]=o,"skinSwitch"==i)document.getElementById("skinStateButton").style.display=o?"block":"none";else if("seatUISwitch"==i)document.getElementById("seatUI").style.display=o?"block":"none";else if("skinPaperSwitch"==i){let e=null==(n=laya.find("SceneLayer",null))?void 0:n.sceneName;document.getElementById("paperStateButton").style.display=o?"block":"none",paper.switch(o&&(gameScene.includes(e)||globalConfig.allPaperSwitch&&!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(e)));}else if("allPaperSwitch"==i){let e=null==(a=laya.find("SceneLayer",null))?void 0:a.sceneName;paper.switch(o&&globalConfig.skinPaperSwitch&&!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(e)||gameScene.includes(e));}else "rogueCitySwitch"==i&&(o&&UI.cities?drawCitiesUI(UI.cities):drawCitiesUI(""));else vld(null);}if((t=document.getElementById("toggle-me")).onclick=function(){globalState.closeIframe=!globalState.closeIframe,globalState.closeIframe?(document.getElementById("createIframe").style.top="31px",document.getElementById("createIframe").style.right="155px",document.getElementById("iframe-source").style.display="none",t.innerText="+",document.getElementById("createIframe").style.height="30px",document.getElementById("createIframe").style.opacity="0.6",document.getElementById("createIframe").style.width="75px",document.getElementById("title").innerText="小抄",document.getElementById("createIframe").style.resize="none",globalConfig.padding&&(globalConfig.padding=0,window.dispatchEvent(new Event("resize")),translateX=0,translateY=0,document.getElementById("createIframe").style.transform=`translate(${translateX}px, ${translateY}px)`)):(document.getElementById("iframe-source").style.display="block",t.innerText="-",document.getElementById("createIframe").style.height="500px",document.getElementById("createIframe").style.opacity="1",document.getElementById("createIframe").style.width="230px",document.getElementById("title").innerText="三国杀打小抄"+version,document.getElementById("createIframe").style.resize="vertical");},document.getElementById("autoInviteSwitch").addEventListener("click",(e=>{var t;if(e.target.checked){var i=null==(t=document.getElementById("inviteName"))?void 0:t.value;"string"==typeof i&&0!==i.length&&(globalState.inviteName=i,localSet("INVITE_NAME",globalState.inviteName),tooltipSGS(`为目前机器所有账号绑定助力${globalState.inviteName}，如需更改/删除，更改/删除昵称重新打开开关`)),fetchInviteList(globalState.inviteName.trim()||user.nickname);}else localDel("INVITE_NAME");})),document.getElementById("guanxing").onclick=function(){attachWindowEvents(createWindow(json2html(initMap.gxjson),"myWindowGuanXing","观星","小抄观星 公告为准"));},document.getElementById("baisheng").onclick=function(){attachWindowEvents(createWindow(`<html><head><meta charset="utf-8" /><title>百胜</title></head><body>${array2table(Object.values(laya.class("AchievementManager").myOpenAchDic.Maps).filter((e=>{var t,i,n,a;return 2048==(null==(t=e.achievementInfo)?void 0:t.flags)&&(null==(a=null==(n=null==(i=e.achievementInfo)?void 0:i.Desc)?void 0:n.includes)?void 0:a.call(n,"100"))})).map((e=>({num:e.GetProCount(),id:e.achievementInfo.characterId,desc:e.achievementInfo.Desc,time:e.finishTime||1/0}))).sort(((e,t)=>t.num-e.num||e.time-t.time||e.id-t.id)).map((({num:e,id:t,desc:i,time:n},a)=>({i:a+1,num:e,g:initMap.generalDict[t]??t,desc:i,time:n!=1/0?new Date(1e3*n).toLocaleDateString():""}))),{i:"顺序",num:"进度",g:"武将",desc:"条件",time:"完成时间"})}</body></html>`,"myWindowBaiSheng","百胜查询 control + F 快速定位",""));},document.getElementById("gamerecord").onclick=async function(){for(this.disabled=!0,getseven(user.userID);gameRecord.req;)await sleep(500);this.disabled=!1,user.v&&await getGameRecord();attachWindowEvents(createWindow(recordHTML(JSON.stringify(gameRecord)),"myWindowGameRecord","游戏记录",""));},document.getElementById("mizhu").onmousedown=function(){let e=document.querySelectorAll(".mizhu");room.mySeats.length<=1?(e.forEach((e=>e.style.display="none")),drawMiZhu(Array.from(Zone.shoupai(room.mySeats[0]),(e=>allCard[e].number)))):room.mySeats.forEach(((t,i)=>{e[i].style.display="block",e[i].innerText=room.name(t),e[i].onclick=()=>{drawMiZhu(Array.from(Zone.shoupai(t),(e=>allCard[e].number)));},0==i&&e[i].click();}));},0==window.padding){console.warn("closesidebar");var t=document.getElementById("toggle-me");console.warn("toggle"),t.click();}window.dispatchEvent(new Event("resize")),document.querySelectorAll(".switch").forEach((t=>t.addEventListener("change",e))),document.getElementById("ACSubmit").onclick=()=>debounce(ACSubmit,300)(),skipChapter(),openExternalLink();}function skipChapter(){document.getElementById("openStore").onclick=function(){laya.class("GameEventDispatcher").ShowWindow("RogueJiShiWindow"),addTooltip("满足以下条件购买技能或者装备可跳关<br>1、已经进入对局<br>2、商店有可替换的装备/技能<br>例如身上有麒麟弓，商店有贯石斧<br>购买完成之后，投降之后会显示替换提示<br>","acTooltip",1e4,"green",!1);};}function openExternalLink(){document.querySelectorAll(".external-link").forEach((e=>{e.addEventListener("click",(async t=>{t.preventDefault();const i=e.dataset.url;if(window.WEIDUAN)try{const{shell:e}=require("electron");return void e.openExternal(i)}catch(a){console.warn("Electron API调用失败，回退通用方法");}const n=window.open(i,"_blank");n&&!n.closed||showManualLink(targetUrl);}));}));}null==(_b=null==(_a=document.getElementById("createSkinIframeSource"))?void 0:_a.contentWindow)||_b.document;const showManualLink=e=>{const t=`\n    <div style="${modal.style.cssText}">\n        <p>跳转的网站被您屏蔽了，请手动访问：<a href="${e}" target="_blank">${e}</a></p>\n    </div>\n`;document.body.insertAdjacentHTML("beforeend",t);};function createWindow(e,t,i,n){let a=document.getElementById("myWindow"+t);if(a)return a.style.display="block",a;const l=document.createElement("div");l.classList.add("window"),l.id=t;const o=document.createElement("div");o.classList.add("window-header");const s=document.createElement("div");s.classList.add("title"),s.innerText=i;const r=document.createElement("div");r.classList.add("controls");const d=document.createElement("button");d.innerText="⬜";const c=document.createElement("button");c.innerText="❌",r.appendChild(d),r.appendChild(c),o.appendChild(s),o.appendChild(r);const u=document.createElement("iframe");return u.classList.add("window-content"),u.srcdoc=`\n    <html>\n      <head><meta charset="utf-8" /><title>${t}</title>\n      <style>\n        .watermark {\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          pointer-events: none; /* 防止干扰交互 */\n          z-index: 9999;\n          background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='200'><text x='50%' y='50%' font-size='20' fill='rgba(0,0,0,0.1)' transform='rotate(-30, 100, 100)' text-anchor='middle'>${n}</text></svg>");\n          background-repeat: repeat;\n        }\n      </style>\n      </head>\n      <body><div class="watermark"></div>${e}</body>\n     \n    </html>\n  `,l.appendChild(o),l.appendChild(u),document.body.appendChild(l),{windowDiv:l,maximizeBtn:d,closeBtn:c}}function attachWindowEvents(e){const{windowDiv:t,maximizeBtn:i,closeBtn:n}=e;let a=!1;i.addEventListener("click",(()=>{a?t.classList.remove("fullscreen"):t.classList.add("fullscreen"),a=!a;})),n.addEventListener("click",(()=>{t.style.display="none";}));}let translateX=0,translateY=0;function initDragElement(){const e=document.getElementById("header"),t=document.getElementById("createIframe"),i=document.getElementById("sidebarHint");let n=!1,a=0,l=0,o=0,s=0,r=!1;const d=i=>{e.style.cursor="grabbing",n=!0,a=i.clientX||i.touches[0].clientX,l=i.clientY||i.touches[0].clientY,t.style.userSelect="none",t.style.willChange="transform",document.addEventListener("mousemove",c),document.addEventListener("mouseup",u),document.addEventListener("touchmove",c),document.addEventListener("touchend",u);};function c(e){if(!n)return;i.style.display="flex";const d=e.clientX||e.touches[0].clientX,c=e.clientY||e.touches[0].clientY;o+=d-a,s+=c-l,globalConfig.padding&&(globalConfig.padding=0,t.style.height="500px",window.dispatchEvent(new Event("resize"))),r||(r=!0,requestAnimationFrame((()=>{t.style.transform=`translate(${o}px, ${s}px)`,r=!1;}))),window.innerWidth-d<25?i.style.backgroundColor="rgba(55, 40, 32, 1)":i.style.backgroundColor="rgba(55, 40, 32, 0.8)",a=d,l=c;}function u(a){if(i.style.display="none",e.style.cursor="grab",n=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",u),t.style.willChange="auto",window.innerWidth-(a.clientX||a.touches[0].clientX)<25&&"header"===e.id&&!globalConfig.padding){if(globalState.closeIframe){document.getElementById("toggle-me").click();}globalConfig.padding=232,window.dispatchEvent(new Event("resize")),o=0,s=0,t.style.transform=`translate(${o}px, ${s}px)`;}}e.addEventListener("mousedown",d),e.addEventListener("touchstart",d);}function counter(e,t){let{name:i,number:n,color:a}=allCard[e??0];if(!(void 0===e||e&&i&&void 0!==Qcard.name[i]))return;let l=Zone.unknown;(e?[i]:Object.keys(Qcard.name)).forEach((e=>{let t=l.filter((t=>Qcard.name[e].has(t))).length,i=document.getElementById(e);i.textContent=t>1?t+e:e,i.disabled=t<=0;})),(e?[5,6].filter((t=>Qcard.color[t].has(e))).concat(a):[1,2,3,4,5,6]).forEach((e=>{var t;let i=l.filter((t=>Qcard.color[e].has(t))).length,n=document.getElementById(["","heart","club","spade","diamond","hongsha","heisha"][e]);n.innerHTML=null==(t=n.innerHTML)?void 0:t.replace(/-?[0-9]+/,String(i));})),e?Qcard.query.has(e)&&Qcard[e].plot(0==t?0:1):Qcard.draw();}function domInit(){for(let e=1;e<=3;e++)document.getElementById("type"+e).innerHTML="";for(let e of document.getElementsByClassName("order-body"))e.innerHTML="",e.title="一二三四五六七八"[e.id.slice(-1)]??e.title;for(let e in Qcard.name){let t=document.getElementById("type"+allCard[[...Qcard.name[e]][0]].type),i=document.createElement("button");i.id=e,i.className="cardType",i.innerText=e,i.onclick=()=>{Qcard.queryone("name",e);},t.appendChild(i);}UI.seatUIs=[],drawSeatUIs(),drawRogueLike();}var blacklist=[1562902854,1678425373];const idleCallback=function(){const e="function"==typeof window.requestIdleCallback;return function(t,i=500){if(e){const e=window.requestIdleCallback(t),n=setTimeout((()=>{window.cancelIdleCallback(e),t();}),i);return ()=>clearTimeout(n)}return setTimeout(t,0)}}();function logic(e){var t,i,n,a,l,o,s,r,d,c,u,h,p,m,f,g,y,v,I,S,b,w,k,W,C,x,D,E,T,R,_,L,O,B,N,A,M,G,P;try{if(!e)return;if(null==(t=e.startsWith)?void 0:t.call(e,"socket连接关闭"))return void confirm({content:"您的二次密码认证错误，请稍后再试"},"确定");if(null==(i=e.startsWith)?void 0:i.call(e,"SwitchScene"))idleCallback((()=>{var t,i;let n=laya.scene=e.slice(e.lastIndexOf("-")+1);game.end(gameScene.includes(n)),globalConfig.skinPaperSwitch&&paper.switch(globalConfig.allPaperSwitch?!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(n):gameScene.includes(n)),"TableScene"==n?globalState.autoBotSwitch&&timer.delay("auto",(()=>retry((()=>globalState.autoBotSwitch&&laya.readyStart()),20)),8e3):"HallScene"==n?!0!==globalState.autoBotSwitch&&28!==globalState.autoBotSwitch||(tooltipSGS("5秒后开始酒馆自动挂机"),timer.delay("auto",(()=>retry((()=>(!0===globalState.autoBotSwitch||28===globalState.autoBotSwitch)&&laya.newRoom()),10,1e3)),5e3)):["NewPaiWeiScene","DouDiZhu2023Scene","RogueLike1v1Scene","RogueLikeBigMapScene"].some((t=>e.endsWith(t)))&&(!0!==globalState.autoBotSwitch&&28!==globalState.autoBotSwitch||null==(t=document.getElementById("autoBotSwitch"))||t.click(),9!==globalState.autoBotSwitch&&29!==globalState.autoBotSwitch||null==(i=document.getElementById("autoHGSwitch"))||i.click());}));else if(globalConfig.skipWindowSwitch&&["RogueLike1v1ZhanJiWindow","GameResultWindow","GeneralOpenResultWindow","GameMvpWindow","GameZhanJiWindow","SkinOpenResultWindowNew","OldbackOneClickDrawAwdWin","VersionNoticeWindow","AdPushWindow"].includes(e)){let t="GetPropSpecialWindow"==e?5:1,i="GetPropSpecialWindow"==e?e=>{var t,i;return null==(t=null==e?void 0:e.Hide)||t.call(e),null==(i=null==e?void 0:e.Close)?void 0:i.call(e)}:"GameResultWindow"==e?e=>sleep(500).then((()=>{var t;return null==(t=null==e?void 0:e.laterClose)?void 0:t.call(e)})):"RogueLike1v1ZhanJiWindow"==e?e=>sleep(500).then((()=>{var t;return null==(t=null==e?void 0:e.onClickClose)?void 0:t.call(e)})):"AdPushWindow"==e?e=>(null==e||e.curViewList.forEach((e=>{var t;return null==(t=null==e?void 0:e.closeClicker)?void 0:t.call(e)})),tooltipSGS("小抄已经为你跳过广告和祈愿台出货播报")):e=>{var t;return null==(t=(null==e?void 0:e.laterClose)??(null==e?void 0:e.Close))?void 0:t.bind(e)()};retry((()=>wait((()=>laya.find(null,e)),10,200*t).then((e=>Array.isArray(e)?e.every(i):(null==e?void 0:e.Close)?i(e):"done"))),t,1e3);}else if(globalConfig.skipProbWindowSwitch&&["GetPropSpecialWindow"].includes(e)){let t=5,i=e=>{var t,i;return null==(t=null==e?void 0:e.Hide)||t.call(e),null==(i=null==e?void 0:e.Close)||i.call(e),!0};retry((()=>wait((()=>laya.find(null,e)),10,200*t).then((e=>Array.isArray(e)?e.every(i):(null==e?void 0:e.Close)?i(e):"done"))),t,1e3);}if(globalState.autoBotSwitch&&["GameResultWindow","GameMvpWindow","GameZhanJiWindow"].includes(e)){let t="GameResultWindow"==e?e=>sleep(500).then((()=>{var t;return null==(t=null==e?void 0:e.laterClose)?void 0:t.call(e)})):e=>{var t;return null==(t=(null==e?void 0:e.laterClose)??(null==e?void 0:e.Close))?void 0:t.bind(e)()};retry((()=>wait((()=>laya.find(null,e)),10,200).then((e=>Array.isArray(e)?e.every(t):(null==e?void 0:e.Close)?t(e):"done"))),1,1e3);}else if(null==(n=e.endsWith)?void 0:n.call(e,"View"))"VuplexWebView"==e&&timer.trigger("VuplexWebView");else if(null==(a=e.endsWith)?void 0:a.call(e,"Window"))"SkinInfoWindow"==e?globalConfig.skinPaperSwitch&&getskin():"BlessNewWindow"==e?calTongXinJieLv():"SelectSkinWindow"==e?9!=globalState.autoBotSwitch&&wait((()=>laya.find("WindowLayer",e))).then((e=>null==e?void 0:e.Close())):"SelectCardWindow"==e?!laya.flag||(null==(o=null==(l=room.seatUIs[0])?void 0:l.seat)?void 0:o.OnlineState)>1||selectCard(!0,!0):"WuGuFengDengWindow"!=e||!laya.flag||(null==(r=null==(s=room.seatUIs[0])?void 0:s.seat)?void 0:r.OnlineState)>1?["SelectGeneralWindow","SelectGeneralHappyWindow","SelectCountryWarGeneralWindow"].includes(e)&&globalState.autoBotSwitch&&setTimeout((()=>{wait((()=>laya.find("WindowLayer",e))).then((async t=>{var i,n;if(!(null==(i=null==t?void 0:t.generalUis)?void 0:i.length))return;if("SelectCountryWarGeneralWindow"==e){for(let e of t.generalUis)(null==e?void 0:e.Card)&&(null==e?void 0:e.CanSelect)&&(t.onClickGeneralCard(e),await sleep(1e3));return await sleep(1e3),void(null==(n=t.confirmBtnEvent)||n.call(t))}let a=-1,l=null;t.generalUis.some((e=>{var t;if(null==e?void 0:e.dianJiangSk)return l=e;let i=(null==(t=null==e?void 0:e.generalInfo)?void 0:t.quality)||0;i>a&&(a=i,l=e);})),null==l||l.sureBtnClick(),9!=globalState.autoBotSwitch&&setTimeout((()=>null==l?void 0:l.sureBtnClick()),500);}));}),3e3):laya.wugu();else if(void 0===e.className&&void 0===e.ClassName)return;globalConfig.killEffectSwitch&&"CClientGameRewardPointNTF"==e.className&&(e.Type=0);let{ProtoObj:z,ClassName:F,SeatID:K,SrcSeatID:q,targetSeatID:Q,SpellID:Z,Param:V,Params:J,Datas:X,DataCount:Y,CardCount:$,CardIDs:ee,FromID:te,FromZone:ie,FromPosition:ne,FromZoneParam:ae,ToID:le,ToZone:oe,ToPosition:se,ToZoneParam:re,MoveType:de,Type:ce}=e;if(F||(F=e.className||e.toString()),e.userID&&e.userID!=user.userID&&["ClientLoginRep","ClientUserDataCounterNtf","ClinetNetSpeedNtf","SmsgUpdateTaskListToClient","ClientGuildMemberChangeNtf"].includes(F)){if(Object.assign(user,{userID:e.userID,nickname:e.Nickname||user.nickname||"",account:e.Account||localStorage.LastUserName||localStorage.SGS_LASTLOGIN_ACCOUNT||localStorage.SGS_LASTLOGIN_ACCOUNT1||user.account||""}),globalState.UsedGeneralSkinID=localGet(user.account+"::UsedGeneralSkinID",globalState.UsedGeneralSkinID),Object.assign(paper.res,localGet(user.userID+"::paperRes",{},!0)),setProto(),blacklist.includes(user.userID))return;Promise.all([initFrame(),wait((()=>{var e;patchShowWindow();const t=laya.get("QldjChooseRuleWindow");let{clientId:i,nickname:n,guildID:a,guildName:l,Level:o,vipLevel:s}=(null==(e=null==t?void 0:t.seat)?void 0:e.playerInfo)||{};return laya.del("QldjChooseRuleWindow"),i!=user.userID||!n||!l&&a?null:(Object.assign(user,{nickname:n,guildID:a,guildName:l,Level:o,vipLevel:s}),n)}),30,1e3)]).then((()=>{globalConfig.autoSignSwitch&&autoSign(globalConfig.autoSignSkipSwitch),login(user.userID);let e=document.getElementById("uuid");e.innerText="id："+user.userID,e.onclick=function(){toClipboard(user.userID,!1),e.innerText="复制成功",setTimeout((()=>{e.textContent="id："+user.userID;}),"500");};let t=document.getElementById("nickName");t.innerText="昵称："+user.nickname,t.onclick=function(){toClipboard(user.nickname,!1),t.innerText="复制成功",setTimeout((()=>{t.textContent="昵称："+user.nickname;}),"500");},document.getElementById("guildID").innerText="公会数字ID："+user.guildID,activate(),document.getElementById("inviteName").setAttribute("placeholder",user.nickname||""),localGet("INVITE_NAME")&&localGet("INVITE_NAME")!=user.nickname&&(document.getElementById("inviteName").value=localGet("INVITE_NAME")),Date.now()<new Date("2024-12-15")&&globalConfig.autoInviteSwitch&&async function(e=2e4){var t;let i=0;for(;!user.nickname||!user.userID;)if(await new Promise((e=>setTimeout(e,2e3))),i+=2e3,i>=e)return void tooltipSGS("没办法获取到昵称用于助力 请重新登录");fetchInviteList((null==(t=globalState.inviteName)?void 0:t.trim())||user.nickname);}();}));}if("ClientGeneralSkinRep"==F){void 0===room.mySeats[0]&&5==ce&&e.ClientID<10&&(room.setMyID(e.ClientID),getSeatUIs());let t=e.GeneralSkinList[0],i=room.find(room.mySeats[0],t.GeneralID,!0);t.GeneralID!=i&&globalConfig.skinStateBlockSwitch&&(t.state=0);}else if("ClientGeneralSkinReq"==F)globalConfig.skinSwitch;else if("MsgReconnectGame"==F)tooltipSGS("断线重连，本局游戏中小抄记录可能不准");else if("ClientOfficerInfoRep"==F)user.curOfficerLv=e.curOfficerLv;else if("decodeSSCChatmsgNtf"==F){if(11==z.scene&&(z.scene=2),globalConfig.msgBlockSwitch&&((null==(d=null==z?void 0:z.chatMsg)?void 0:d.startsWith("oldback@"))||26==(null==z?void 0:z.MsgType))&&delete e.data.protoObj,globalConfig.msgBlockSwitch&&7==z.Channel&&[/收.*桃/,"桃花","鲜花","出的"].some((e=>{var t;return e instanceof RegExp?e.test(null==z?void 0:z.chatMsg):null==(t=null==z?void 0:z.chatMsg)?void 0:t.includes(e)}))&&delete e.data.protoObj,user.vip&&((null==(c=null==z?void 0:z.chatMsg)?void 0:c.startsWith("[GM]"))||(null==z?void 0:z.SpokerMan)!=user.nickname&&[2,10,13].includes(null==z?void 0:z.Channel))&&delete e.data.protoObj,null==(u=null==z?void 0:z.chatMsg)?void 0:u.startsWith("INFO:")){let t=atob(z.chatMsg.slice(5));delete e.data.protoObj;let[i,n,a,l]=t.split(":").map((e=>isNaN(Number(e))?e:Number(e)));if(console.warn(t,{[i]:n,[a]:l}),"mainSeatID"==i){let e=laya.order.indexOf(n);e>=0&&(laya.order.splice(e,1),laya.order.push(n),laya.seatUIs()),wait((()=>room.mySeats[0]>=0)).then((()=>{var e,t;(null==(t=null==(e=room.seatUIs[0])?void 0:e.seat)?void 0:t[a])==l&&laya.chat(`sub-SeatID:${room.mySeats[0]}  :${a}:${l}`,"INFO");}));}else if(i="sub-SeatID"){let e=laya.order.indexOf(n);e>=0&&(laya.order.splice(e,1),laya.order.splice(-1,0,n),laya.seatUIs());}}}else if("ClientRoleGeneralStarRep"==F)globalConfig.generalSwitch&&(e.Star>=0&&(e.Star=4),z.star>=0&&(z.star=4));else if("ClientGameRecordInfoRep"==F)(null==z?void 0:z.query_uid)==user.userID&&[26,35,44,5,7].includes(null==z?void 0:z.id)&&(null==(h=null==gameRecord?void 0:gameRecord.req)||h.delete(z.id),0==(null==(p=gameRecord.req)?void 0:p.size)&&delete gameRecord.req,(null==(m=null==z?void 0:z.all_record)?void 0:m.length)&&recGameRecord(z.id||0,z.all_record));else if("DbsCcUserGoodshintNtf"==F)2010==ce&&"object"==typeof e.GoodsList&&(globalState.goods=mergeGoodsList(globalState.goods,e.GoodsList)),58!=ce&&65!=ce||(timer.delay("tongxin",(()=>calTongXinJieLv()),1e3),e.GoodsList.forEach((e=>{lotteryFilter(e.GoodBaseID)||tooltipSGS(`恭喜你获得：${initMap.goodsID(e.GoodBaseID).name}`);}))),2e3!=ce&&2001!=ce||e.GoodsList.forEach((e=>{lotteryFilter(e.GoodBaseID)||tooltipSGS(`恭喜你获得：${initMap.goodsID(e.GoodBaseID).name}`);})),5==ce&&"object"==typeof e.GoodsList&&(globalState.CDKgoods=e.GoodsList);else if("decodeClientSecretInfoRep"==F){if(Object.keys(globalState.goods).length>0){initMap.currentSec=z.secId;for(let e of globalState.goods)drawLottery(initMap.currentSec,e.GoodsBaseID,e.ChangeCount,z.openTime),(11180==e.GoodsBaseID||lotteryFilter(e.GoodsBaseID))&&recLottery(z.secId,e.GoodsBaseID,z.openTime,z.levelId,e.ChangeCount);}globalState.goods=[];}else if("ClientPickupgiftbagRep"==F&&globalConfig.CDKNotificationSwitch){if(""!=e.CDKey&&!/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]+$/.test(e.CDKey)&&(1==e.Result||2==e.Result))for(let t of initMap.CDKDict)if(isDataMatched(t.dataInfo,globalState.CDKgoods)){t.cdk=e.CDKey,postCDK(t);break}}else if("decodeClientTavernInfoRep"==F){let e=(null==(f=null==z?void 0:z.tavern_info)?void 0:f.day_quest_finished_cnt)??0;if(globalState.autoBotStatus=30-e,globalState.autoBotInfinite||document.querySelector(".status").style.setProperty("--bot-status",`"${globalState.autoBotStatus.toString().padStart(2,"0")}"`),e>=30){let t=document.getElementById("autoBotSwitch");(null==t?void 0:t.checked)&&!globalState.autoBotInfinite&&t.click(),tooltipSGS(`今日已获得亲密度：${e}<br>恭喜你完成酒馆任务~`);}else e>0&&tooltipSGS(`酒馆已获得 ${e} 亲密度<br>今日还可得 ${30-e} 亲密度`);}else if("MsgHeartAliveRep"==F)timer.sync(e);else if("ClientSecKillInfoRep"==F)drawMiaoSha(e.Data);else if("decodeRogueLikeDataSync"==F)drawRogueLike(z);else if("ClientActivitysetDataRep"==F)idleCallback((()=>{drawRogueLike();}));else if("decodeRogueLikeGameOverRep"==F)document.getElementById("chongsheng").innerText="重生是否发动：是";else if("SmsgGamePlayerDead"==F)K==room.mySeats[0]&&(!0===globalState.autoBotSwitch&&!globalState.autoBotInfinite||28===globalState.autoBotSwitch&&room.seatUIs.slice(1).every((({ai:e})=>e)))&&setTimeout((()=>{var e,t;room.seatUIs.reduce(((e,{seat:t,ai:i,figure:n})=>e+(n||i<2?1:-1)*(null==t?void 0:t.currentHp)),0)<0&&(null==(t=null==(e=laya.gamescene)?void 0:e.topMenu)||t.onClickBack(),confirm({title:"退出游戏"},"确定",!0,5e3));}),5e3);else if("MsgGameDealCharacter"==F){if(1099193522==user.userID&&"undefined"!=typeof Allows&&void 0!==ce&&1==ce){var U=Math.floor(Math.random()*Allows.length+1);document.getElementById("title").innerText="选"+U;}}else if("GsCUpdateRoleDataNtf"==F)void 0===room.mySeats[0]&&58===e.StateID&&(room.setMyID(K),console.warn(F,"游戏人数："+room.size+", 我的座位："+room.mySeats,room.seatIDs));else if("GsCFirstPhaseRole"==F)void 0!==K&&(room.firstID=K,console.warn("先手位置:"+room.firstID));else if("MsgGameRoundNtf"==F)e.isPassed&&(game.isPassed=e.isPassed);else if("MsgGameOver"==F||"ClientRecommendShopItemRep"==F||"ClientLeavetableRep"==F);else if("decodeRougeBaseInfoRep"==F)UI.friendGeneral=(null==(g=null==z?void 0:z.friendGeneral)?void 0:g.length)??UI.friendGeneral;else if("MsgGamePlayCardNtf"==F)game.ready(e.CardList);else if("SmsgGameSetCharacter"==F)void 0===room.mySeats[0]&&room.isDouDiZhu&&1==e.Infos.length&&room.setMyID(e.Infos[0].SeatID),e.Infos.forEach((({SeatID:e,CharacterID:t})=>{room.setGeneral(e,t);}));else if("GsCGuoZhanSetCharacter"==F)null==(y=e.GeneralData)||y.forEach((({index:e,cardID:t})=>{room.setGeneral(K,t,e);}));else if("MsgGameTurnNtf"==F)game.enter(e.TurnCnt);else if("GsCGamephaseNtf"==F)game.enter(null,e.Round,K);else if("GsCUpdateRoleDataExNtf"==F)game.currentID==K&&1==e.DataID&&Array.isArray(e.Datas)&&(document.getElementById("sha").innerText="可出杀次数："+Math.max(0,X[2]-X[1]),K==room.mySeats[0]&&room.isShanHeTu&&(null==(v=rogueMap.itemId)?void 0:v.includes(2042))&&(0==X[1]&&(rogueMap.previousData=0),rogueMap.sanBanFu+=X[1]-rogueMap.previousData,rogueMap.previousData=X[1],rogueMap.sanBanFu%3==0?document.getElementById("sanBanFu").innerText="三板斧计数器":document.getElementById("sanBanFu").innerText="三板斧计数器："+((Number(rogueMap.sanBanFu)-1)%3+1)));else if("GsCTriggerSpellNew"==F){if(globalConfig.wuxieSwitch){const t=e=>{var t;return e?`<font color='#FFFF00' href='1|${e}|0|2'>"${null==(t=initMap.spellDict[e])?void 0:t.name}"</font>`:"未知技能"},i=e=>{return (t=room.name(e,null))?`<font color='#FFFF00' >${t}${e==room.mySeats[0]?"(你)":""}</font>`:"";var t;};let n=(null==(I=e.TriggerSpellData)?void 0:I.length)?e.TriggerSpellData:[{}];if(!n.length)return;laya.trace("<font color='#00FFFF'>&gt;&gt;</font>"+((null==(S=n[0])?void 0:S.SpellId)?"":(G=i(e.SrcSpellCasterSeat),P=e.SrcSpellID?t(e.SrcSpellID):"",G&&P?G+"的"+P:G||P))+"<font color='#00FFFF'>&gt;</font>"+(e=>e?"向"+e:"")(i(e.TriggerSeatId))+"询问"+n.map((({SpellId:n,SeatId:a,Targets:l})=>((e,t)=>t?`对${t}的`:e?`${e}的`:"")(a!=e.TriggerSeatId?i(a):"",(null==l?void 0:l.map(i).join(","))||"")+t(n))).join(","));}if(3269==(null==(w=null==(b=e.TriggerSpellData)?void 0:b[0])?void 0:w.SpellId)&&e.TriggerSeatId==room.mySeats[0]){let t=e.TriggerSeatId,i=0,n=0;new Zone(t,5).cards.concat(new Zone(t,6).cards).forEach((e=>{let t=card[e.id].color;1===t||2===t?i++:(3===t||4===t)&&n++;})),document.getElementById("result").innerHTML='<span class="textRes">【双雄】'+(i>n?"弃 黑":i<n?"弃 红":"平")+'</span><br><span class="textRes">'+i+"红\t\t"+n+"黑</span>";}}else if("ClientHappyGetFriendHandcardRep"==F)room.find(e.seatId,[7004,2087,3048])&&new Zone(e.seatId).show(e.Cards);else if("PubGsCUseCard"==F)room.mySeats[0]==K&&drawCard([e.CardID]),game.currentID==K&&room.find(game.currentID,[7003,2086,3047])&&1==e.useType&&1!=e.fromZone&&!e.isSend?(game.spellSpace[7011]||(game.spellSpace[7011]={count:0,color:new Set}),3!=allCard[e.CardID].type&&game.spellSpace[7011].count++,game.spellSpace[7011].color.add(allCard[e.CardID].c),document.getElementById("suit").innerHTML="["+game.spellSpace[7011].count+"]"+Array.from(game.spellSpace[7011].color).join("")):game.currentID==K&&room.find(game.currentID,[330,1068])&&1==e.useType&&!e.isSend&&(document.getElementById("suit").innerHTML=allCard[e.CardID].cn);else if("PubGsCUseSpell"==F){if(room.mySeats[0]==K&&1==ee.length&&drawCard(ee),3324==Z)document.getElementById("chongsheng").innerText="重生是否发动：是";else if(2143==Z)game.spellSpace[Z]||(game.spellSpace[Z]=new Set),ee.forEach((e=>game.spellSpace[Z].add(allCard[e].c))),document.getElementById("suit").innerHTML=Array.from(game.spellSpace[Z]).join("");else if([3157,3511].includes(Z)&&0!=ee.filter((e=>e>0)).length&&(q==room.mySeats[0]||user.v))game[Z]=ee;else if([3193,3185,3138].includes(Z)||3161==Z)game.phase--;else if(3338==Z&&0!=ee.length&&user.v&&573==room.generals[room.mySeats[0]]){game.spellSpace[Z]||(game.spellSpace[Z]=new Set);const e=ee[0]+"-"+ee[1];game.spellSpace[Z].has(e)||(game.spellSpace[Z].add(e),console.warn("new combination",game.spellSpace[Z]),timer.delay("baichu",(()=>updateCardLabels("新组合")),500));}}else if("GsCRoleOptTargetNtf"==F)if(945==Z&&0==V&&(null==J?void 0:J.length)>0)drawYanJiao(J.map((e=>allCard[e].number)),user.v&&K==room.mySeats[0]);else if(3440==Z&&room.mySeats.includes(K)&&0==V&&(null==J?void 0:J.length)>0)28==ce?drawYiCheng(J.map((e=>allCard[e].number)),new Zone(K).cards.map((e=>allCard[e.id].number))):drawYiCheng();else if(11003==Z&&0==V&&(null==J?void 0:J.length)>0&&q!=room.mySeats[0]&&globalConfig.v)document.getElementById("result").innerHTML='<span class="textRes"> 【锻造】<br>'+J.map((e=>allCard[e].ncn)).join("<br>")+"</span>";else if([7016,7017].includes(Z)&&(null==J?void 0:J.length)>0&&(q==room.mySeats[0]||user.v)){game[Z]=J.slice();let e=Array.from(new Set(new Zone(V).cards.map((({key:e})=>e)))).sort(((e,t)=>t-e)),t=Array.from(new Set(new Zone(255,1).cards.slice(0,room.isGuoZhan?void 0:2).map((({key:e})=>e)))).sort(((e,t)=>t-e)),{yes:i,no:n}=J.reduce(((i,n)=>{let{keys:a}=Card.findKZ(n);return void 0!==e.find((e=>a.includes(e)))&&i.yes.push(n),void 0!==t.find((e=>a.includes(e)))&&i.no.push(n),i}),{yes:[],no:[]}),a=document.getElementById("result");2==n.length?i=J.filter((e=>!n.includes(e))):1==i.length&&(n=J.filter((e=>!i.includes(e)))),1==i.length||2==i.length?(a.innerHTML='<span class="textRes">【宴戏】'+i.map((e=>allCard[e].ncn)).join("/")+"</span>",game[Z]=i.concat(J.filter((e=>!i.includes(e))))):a.innerHTML='<span class="textRes">【宴戏】未知</span>';let l=new Zone(V).show(game[Z][0]).concat(new Zone(255,1,room.isGuoZhan?RAND:DING).show(game[Z].slice(-2)));3==i.length?Card.pack(l):1==i.length?Card.pack(l.slice(1,3)):2==i.length&&(Card.pack(l.slice(0,2)),Card.pack(l.slice(1,3))),J.forEach((e=>{a.innerHTML+='<span class="textRes'+(i.length<3&&i.includes(e)?" textRes":"")+'">'+allCard[e].ncn+"："+[[i,"手牌"],[n,"牌堆"]].filter((([t,i])=>t.includes(e))).map((([e,t])=>t)).join("/")+"</span><br>";}));}else [4,5,921,372,811,357,3119,501,3437].includes(Z)&&(null==J?void 0:J.length)>0||[851,361,774,3310].includes(Z)&&0==V&&(null==J?void 0:J.length)>0?void 0!==Q&&255!==Q&&new Zone(Q).show(J):943==Z&&0==V&&1==(null==J?void 0:J.length)?new Zone(255,1).show(J):898==Z&&0==V&&(null==J?void 0:J.length)>2?void 0!==q&&255!==q&&new Zone(q).show(J.slice(1,J[0]+1)):(987==Z||988==Z)&&1==V&&(null==J?void 0:J.length)>2?void 0===Q||255===Q||q!=room.mySeats[0]&&!user.v||new Zone(Q).show(J.slice(-J[1])):3266==Z&&0==V&&(null==J?void 0:J.length)>0?void 0===Q||q!=room.mySeats[0]&&!user.v||new Zone(Q,255==Q?1:5).show(J.filter(((e,t)=>t%3==1))):3483==Z&&1==V?(null==J?void 0:J.length)>2&&void 0!==Q&&255!==Q?new Zone(Q).show(J.slice(-J[1])):J[0]>0&&(game[Z]=J[0]):(7010==Z||7011==Z)&&(null==J?void 0:J.length)>0&&255==Q?(game.spellSpace[7009]=J.slice(),(q==room.mySeats[0]||user.v)&&Card.pack(new Zone(255,1).show(J))):2900==Z&&28==ce&&room.setGeneral(Q,J[2],J[1],!0);else if("CGsRoleSpellOptRep"==F)2022==Z?room.setGeneral(K,X[0],X[1],!0):7009==Z?(null==(k=game[7009])||k.pop(),(null==(W=game[7009])?void 0:W.length)||new Zone(255,1).show(X)):3336==Z?new Zone(255,1,DI).show(null==(C=null==X?void 0:X.slice())?void 0:C.reverse()):X.length>0&&15==Z&&10==ce&&recLe(1==allCard[X[0]].color);else if("PubGsCMoveCard"==F){if(ee=ee.slice(),0===$||0===de||11===oe||e.isSend)return;if(713==Z&&21==de&&$==ee.length-2){let e=ee.splice(0,1)[0];ee.splice(e,1);}if(ee.filter((e=>e>0)).length!=$&&0!=ee.filter((e=>e>0)).length&&(console.error("PubGsCMoveCard error: 明暗牌混合：["+ee+"]"),console.error(e),ee=[]),1==ie&&ne==RAND&&[3208,7011,987,988].includes(Z)&&(ne=DING),1==ie&&ne==RAND&&13==de&&1==$&&(ne=DING),1==ie&&ne==RAND&&4==oe&&8==de&&795==Z&&1==$&&(ne=DING),1==ie&&ne==RAND&&5==oe&&3101==Z&&1==$&&(ne=DI),1==ie&&ne==RAND&&5==oe&&!room.isGuoZhan&&[7016,7017].includes(Z)&&1==$&&(ne=DING),1==ie&&5==oe&&3338==Z&&user.v&&le==room.mySeats[0]&&timer.delay("baichu",(()=>updateCardLabels("新组合")),500),8==ie&&5==oe&&6==Z||5==ie&&5==oe){let e=new Set(room.mySeats);e.delete(room.mySeats[0]),console.log(e),e.has(te)||le!=room.mySeats[0]||timer.delay("mingpai",(()=>updateCardLabels("明牌",ee)),500);}1==oe&&255==le&&se==DING&&(ee=ee.filter((e=>4400!=e&&4401!=e)));var j=new Zone(te,ie,ne,$,Z,ae),H=new Zone(le,oe,se,$,Z,re);if(12==oe||12==ie)12!=oe?H.add(ee.concat(Array($-ee.length).fill(0)).map((e=>new Card(e,e,H.zoneID)))):12!=ie&&0!=ie&&j.remove(ee,Z);else if(5==ie&&1==oe&&0==le)H.add(j.remove(ee.filter((e=>e>0))).map((e=>e.destroy(0))));else if(2==ie&&9==oe&&0==te&&0==le)game.isGameStart&&!game.isPassed&&Card.pack(Card.get(0).map((e=>e.destroy())),!1,1),H.set([...H.cards.map((e=>game.isPassed?e.destroy(0):e)),...j.cards.map((e=>e.destroy(0)))]),j.set([]),counter(),game.isPassed=!1;else if(255!==de){if(1==ie&&5==oe&&room.dealCard(le,ee[0]),2==oe&&(game.spellSpace[3090]||(game.spellSpace[3090]=new Set),ee.forEach((e=>game.spellSpace[3090].add(allCard[e].c))),document.getElementById("boTu").innerHTML=Array.from(game.spellSpace[3090]).join("")),!(5!=ie&&5!=oe||le!=(null==(x=room.mySeats)?void 0:x[0])&&te!=(null==(D=room.mySeats)?void 0:D[0]))){let e=Array.from(Zone.shoupai(room.mySeats[0]));5==oe?e.push(...ee):5==ie&&(e=e.filter((e=>!ee.includes(e)))),e=e.map((e=>allCard[e]));const{countType2:t,countSha:i}=[...e].reduce(((e,t)=>(2!==t.type||["乐","兵","闪电"].includes(t.name)||e.countType2++,["杀","火杀","雷杀","冰杀"].includes(t.name)&&e.countSha++,e)),{countType2:0,countSha:0});document.getElementById("result").innerHTML='<span class="textRes">【权道】杀：普通锦囊</span><br><span class="textRes">'+i+"："+t+"</span>";}if([441,3492].includes(Z)&&8==oe&&6==de&&drawChengXiang(ee.map((e=>allCard[e].number)),3492==Z&&user.v),3033==Z&&1==ie&&8==oe&&1==ee.filter((e=>e>0)).length){let e=allCard[ee[0]].number,t=0,i=0,n=0;Zone.paidui.forEach((a=>{let l=allCard[a].number;l===e?n++:l>e?t++:i++;})),document.getElementById("result").innerHTML='<span class="textRes">【吉占】猜'+(t>i?"大":"小")+'</span><br><span class="textRes">跟'+e+"比，"+t+"张大\t\t"+i+"张小\t\t"+n+"平</span>";}if(3329==Z&&te==game.currentID){let e=allCard[ee[0]].number,t=Zone.paidui,i=["无中","洞烛","顺手","过拆","逐近","决斗","南蛮","万箭","出其","水淹","随机","洪荒","同舟","力争","移花"].flatMap((e=>t.filter((t=>{var i;return null==(i=Qcard.name[e])?void 0:i.has(t)})))).reduce(((t,i)=>{let n=allCard[i].number;return n>e?t.g++:n<e?t.l++:t.e++,t}),{g:0,l:0,e:0}),n=["五谷","桃园","火攻","借刀","撒豆"].flatMap((e=>t.filter((t=>{var i;return null==(i=Qcard.name[e])?void 0:i.has(t)})))).reduce(((t,i)=>{let n=allCard[i].number;return n>e?t.g++:n<e?t.l++:t.e++,t}),{g:0,l:0,e:0});document.getElementById("result").innerHTML='<span class="textRes">【和衷】'+(i.g>i.l?"大":i.g<i.l?"小":n.g>n.l?"大":n.g<n.l?"小":"平")+'</span><br><span class="textRes">'+i.g+"."+n.g+"大\t\t"+i.l+"."+n.l+"小</span>";}else 3488==Z&&5==ie&&5==oe&&21==de&&1==ee.filter((e=>e>0)).length?(game[Z]||(game[Z]={}),game[Z][te]=ee.find((e=>e>0))):3488==Z&&5==ie&&10==oe&&11==de&&0==ee.filter((e=>e>0)).length?(ee[0]=(null==(E=game[Z])?void 0:E[te])||0,game[Z].stack=ee[0]):3488!=Z||10!=ie||1!=oe&&2!=oe||11!=de||0!=ee.filter((e=>e>0)).length||(ee[0]=(null==(T=game[Z])?void 0:T.stack)||0,null==(R=game[Z])||delete R.stack);if([3157,3511].includes(Z)&&2==ie&&5==oe&&$==(null==(_=game[Z])?void 0:_.length)&&0==ee.filter((e=>e>0)).length&&game[Z].forEach(((e,t)=>ee[t]=e)),3543==Z&&2==ie&&1==oe&&0==ee.filter((e=>e>0)).length&&ee.splice(0,1/0,...new Zone(255,2).cards.map((e=>e.id)).filter((e=>[1,2].includes(allCard[e].color))).reverse().slice(0,$)),[7016,7017].includes(Z)&&5==oe&&1==$&&(q==room.mySeats[0]||user.v)&&(ee[0]&&(null==(L=game[Z])?void 0:L.includes(ee[0]))?game[Z].splice(game[Z].indexOf(ee[0]),1):5==ie||2==(null==(O=game[Z])?void 0:O.length)||1==(null==(B=game[Z])?void 0:B.length)?ee[0]=(null==(N=game[Z])?void 0:N.shift())||0:room.isGuoZhan),te!=le||ie!=oe||ne!=se&&1==oe||ae!=re&&4==oe)if(3208==Z&&10==ie&&5==oe&&0===ee.filter((e=>e>0)).length)j.pos=DI,Card.pack(j.cards.slice(0,j.length-1)),H.add(j.remove(ee));else if(3483==Z)if(10==ie&&10==oe)0===ee.filter((e=>e>0)).length&&(j.pos=DI,H.pos=DING),H.add(j.remove(ee));else if(1==ie&&10==oe&&ne==RAND)game[Z]&&Card.pack(j.cards.slice(0,game[Z])),0==ee.filter((e=>e>0)).length&&(j.pos=DI),H.add(j.remove(ee));else if(5==ie&&10==oe)game[Z]=H.add(j.remove(ee));else if(10==ie&&1==oe&&ne==RAND){if(0==ee.filter((e=>e>0)).length&&(null==(A=game[Z])?void 0:A.length)==$&&game[Z].every((e=>j.cards.includes(e)))){let e=game[Z].flatMap((e=>j.cards.splice(j.cards.indexOf(e),1)));Card.pack(H.add(e));let t=e.map((e=>e.key));t.every((e=>e>0))&&ee.splice(0,$,...t);}else H.add(j.remove(ee));delete game[Z];}else H.add(j.remove(ee));else if(780==Z&&5==ie&&ne==RAND&&1==$)if(5==oe&&te==game.currentID)game[Z]=H.add(j.remove(ee))[0];else if(1==oe&&te!=game.currentID&&j.cards.includes(game[Z])){let e=null==(M=H.add(j.cards.splice(j.cards.indexOf(game[Z]),1))[0])?void 0:M.key;e>0&&0==ee.filter((e=>e>0)).length&&(ee[0]=e),delete game[Z];}else H.add(j.remove(ee));else H.add(j.remove(ee,Z));else j.show(ee);}}}catch(z){console.error(z);}}function main(){let e=Array.prototype.slice.call(arguments);try{return "INIT"===e[0]?Init():"EXIT"===e[0]?Exit():logic(e[e.length-1])}catch(t){console.error(t.message),console.error(t.stack);const[,e,i]=t.stack.match(/(\d+):(\d+)/);console.error("Line:",e),console.error("Column:",i),tooltipSGS("小抄GG了，联系作者解决");}}debounce((e=>{const t=globalState.recGoods[e.secId];if(t&&t.length>0){for(let i of t)recLottery(e.secId,i.GoodsBaseID,e.openTime,e.levelId,i.ChangeCount);delete globalState.recGoods[e.secId];}}),6e4),"undefined"!=typeof SGSMODULE&&(Object.defineProperty(window.console,"log",{get:()=>console.info,set(){}}),window.SGSMODULE.forEach((e=>e("EXIT"))),delete window.SGSMODULE),console.info("%c三国杀打小抄","font-weight: bold; color: white; background-color: #525288; padding: 1px 4px; border-radius: 4px;"),window.SGSMODULE=[],Object.defineProperty(window.console,"log",{get:()=>function(...e){(window._debug||window.isLogAllClass)&&console.debug(...e),window.SGSMODULE.forEach((t=>null==t?void 0:t(...e)));},set(){}}),main("INIT").then((e=>{e&&window.SGSMODULE.push(main);}));

})();