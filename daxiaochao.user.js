// ==UserScript==
// @name         三国杀打小抄
// @namespace    https://greasyfork.org/scripts/448004
// @version      2.9.41.1
// @author       小麦 孤独尊
// @description  打小抄支持网页版和微端，微端文件请加群 830137048
// @icon         https://i0.hdslb.com/bfs/new_dyn/17ec41a0ca79633b77399065ab80da3f2138912.png
// @match        *://game.4399iw2.com/yxsgs/*
// @match        *://my.4399.com/yxsgs/*
// @match        *://*.sanguosha.com/*
// @match        *://web.kuaiwan.com/kwsgsn/*
// @match        *://wan.baidu.com/microend?gameId=19793595/*
// @match        *://www.7k7k.com/special/sgs/?*
// @grant        none
// @run-at       document-start
// ==/UserScript==

(function () {
  'use strict';

  var qt=Object.freeze,Qt=Object.defineProperty;var On=(t,e,n)=>e in t?Qt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ye=(t,e,n)=>(On(t,typeof e!="symbol"?e+"":e,n),n);var Kt=(t,e)=>qt(Qt(t,"raw",{value:qt(e||t.slice())}));function Oe(t,e=null,n=!0){let i;return !i&&typeof localStorage<"u"&&(i=localStorage.getItem(t)),i?JSON.parse(i):e}async function Xe(t,e,n=!0){typeof localStorage<"u"&&localStorage.setItem(t,JSON.stringify(e));}async function _t(t,e=!0){typeof localStorage<"u"&&localStorage.removeItem(t);}function kt(t,e=0){let n="";const i="  ".repeat(e);if(Array.isArray(t))t.every(s=>typeof s!="object"||!s)?n+=`${i}${t.join("	")}
`:(n+=`${i}<ol>
`,t.forEach(s=>{n+=`${i}  <li>
`,n+=kt(s,e+2),n+=`${i}  </li>
`;}),n+=`${i}</ol>
`);else if(typeof t=="object"&&t!==null)if(Object.values(t).every(s=>typeof s!="object"||!s))n+=`${i}${Object.entries(t).map(([s,r])=>`<strong>${s}:</strong> ${r}`).join(", ")}
`;else {n+=`${i}<ul>
`;for(const s in t)n+=`${i}  <li>
`,n+=`${i}    <strong>${s}:</strong>
`,n+=kt(t[s],e+2),n+=`${i}  </li>
`;n+=`${i}</ul>
`;}else n+=`${i}  ${t}
`;return n}async function Nn(t,e=""){const n=document.createElement("a");n.download=e,n.href=t,n.click(),n.remove();}const vt=[];let ut=!1,wt=null;function ze(t,e="acTooltip",n=1e4,i="",a=null,s=!1){s?Pn(t,e,n,i):(vt.push({text:t,id:e,duration:n,className:i,clickCallback:a}),ut||Wt());}function Pn(t,e,n,i){let a=document.getElementById(e);a||(a=document.createElement("div"),a.id=e,a.className="ac-tooltip "+i,document.body.appendChild(a)),a.innerHTML=t,a.className="ac-tooltip "+i,a.addEventListener("click",()=>{gt(uniqueId);}),setTimeout(()=>{a.classList.remove("hide"),a.classList.add("show"),a.style.top="20px";},50),wt&&clearTimeout(wt),wt=setTimeout(()=>gt(e),n);}function de(t){if(ChannelUtils!=null&&ChannelUtils.openQQBuy){ChannelUtils.openQQBuy({ret:!0,msg:t});return}}function Wt(t){if(vt.length===0){ut=!1;return}ut=!0;const{text:e,id:n,duration:i,className:a,clickCallback:s}=vt.shift();let r=document.getElementById(n);r&&r.remove();let o=n+"-"+new Date().getTime(),c=document.createElement("div");c.id=o,c.className="ac-tooltip "+a,c.innerHTML=e,document.body.appendChild(c),s&&typeof s=="function"&&c.addEventListener("click",s),c.addEventListener("click",()=>{gt(o),Wt();}),setTimeout(()=>{c.classList.remove("hide"),c.classList.add("show"),c.style.top="20px";},50),i?setTimeout(()=>{gt(o),Wt();},i):ut=!1;}function gt(t){let e=document.getElementById(t);e&&(e.classList.remove("show"),e.classList.add("hide"),setTimeout(()=>{e&&e.remove();},300));}var hn,Mn=function(t){return String.raw(hn||(hn=Kt([`
<html><head><meta charset="utf-8" /><title>战绩胜率统计</title><style>
table { margin-right: 8px; border-collapse: collapse; }
th, td { text-align: center; border: 1px solid black; font-size: 24px; box-sizing: border-box; }
td { padding: 2px 5px; }
.nav, thead { background: white; position: sticky;; }
.rate { margin: 5px; font-size: 28px;}
.button {  display: none; } 
.button[name=mode] ~ .label { display: inline-block; font-size: 30px; user-select: none; border: solid 1px black; border-radius: 5px; padding: 5px; margin: 5px; }
th .button ~ .label { display: inline-block; width: 100%; height: 100%;}
th .button:checked ~ .label::after { content: "↓"; }
th.reverse .button:checked ~ .label::after { content: "↑"; }
.button:checked ~ .label { background: rgb(64,160,255); } 
.s0 { background: white; }
.s1 { background: rgb(221,0,0); }
.s2 { background: rgb(255, 200, 0); }
.s3 { background: rgb(0, 136, 68); }
.s4 { background: rgb(0, 94, 183); }
.s5 { background: rgb(255, 0, 255); }
</style></head><body style="margin: 0 8px;">
<div class="nav" style="top: 0; height: 136px; z-index: 3"><div id="modeTab"></div><div id="summary"></div></div>
<div style="display: flex; align-items: flex-start; flex-wrap: wrap;"><table id="detail"><thead style="top: 135px; z-index: 1"></thead><tbody></tbody></table>
<table id="record"><thead style="top: 135px; z-index: 2"></thead><tbody></tbody></table></div>

<script>
const data = Object.entries(`,`).reduce((acc,[mode, records]) => {
acc[mode] = Object.entries(records).reverse().map(([time, record]) => ({timestamp:parseInt(time), time: new Date(time*1000).toISOString().slice(0,16).replace('T',' '), ...record, durationstr: formatSeconds(record.duration)}));
return acc;
},{});
const modeName = {1: '八人标准', 2: '六人身份', 3: '八人军争', 4: '应变身份', 5: '八人至尊', 6: '身份老友房', 7: '国战', 8: '应变国战', 9: '国战老友房', 10: '新1V1', 11: '欢乐', 12: '应变欢乐', 13: '欢乐老友房', 14: '统率', 15: '4V4演武', 16: '应变演武', 17: '欢乐演武', 18: '国战演武', 19: '统率排位', 20: '欢乐排位', 21: '智斗三国', 22: '欢乐新手', 23: '欢乐新手', 24: '六人新手', 25: '六人新手', 26: '排位赛', 27: '主公杀', 28: '1v1面杀练习场', 29: '五人匹配', 30: '排位赛', 31: '欢乐33', 32: '33老友房', 33: '武将试炼', 34: '武将试炼', 35: '斗地主', 36: '线上赛事', 37: '山河图', 38: '王战练习', 39: 'SCL练习', 40: '斗地主练习', 42: '八人匹配', 43: '个人挑战1V1', 44: '单骑无双'};
const sfName = {5:{0: '综合', 1: '主公', 2: '忠臣', 3: '反贼', 4: '内奸'},7:{0: '综合', 1: '魏国', 2: '蜀国', 3: '吴国', 4: '群雄', 5:'晋国'},26:{0:'综合',2:'先手',3:'后手'},35:{0:'综合',1:'地主',3:'农民'},44:{0:'综合',1:'先手',4:'后手'}};
colors=['white','rgb(221,0,0)','rgb(255, 200, 0)','rgb(0, 136, 68)','rgb(0, 94, 183)','rgb(255, 0, 255)','black'];
const modeTab = document.getElementById('modeTab');
[26,35,44,5,7].forEach(mode => {
if(mode in data) modeTab.innerHTML += '<label><input type="radio" class="button" name="mode" value="'+mode+'" onclick="reSet()"><span class="label">'+modeName[mode]+'</span></label>';
}); modeTab.innerHTML += ' （更多功能敬请期待…）';
document.querySelector('#record thead').innerHTML = '<tr onclick="recordSort(event)">'+['时间','武将','身份','胜负','时长'].map((name,i)=>'<th'+(i?'':' class="reverse"')+'><label><input type="radio" class="button" name="record" onchange="recordSort(event)" '+(i?'':'checked')+'><span class="label">'+name+'</span></label></th>').join('')+'</tr>';
function reSet() {
var i, tabcontent, tablinks;
window.mode = document.querySelector('#modeTab input[name="mode"]:checked')?.value
window.guozhanQ = modeName[mode].includes('国战');
window.records = data[mode].filter(record => record.shenfen).sort();
let summary = Array.from({length:10},(_,i)=>[0,0,0,i]);
let detail = records.reduce((acc, record) => {
    summary[0][record.result] += 1;
    summary[0][2] += record.duration;
    summary[record.shenfen][record.result] += 1;
    record.general.forEach((g,n)=>{
        if(!acc[g]) acc[g] = Array.from({length:10},(_,i)=>[0,0,0,i]);
        acc[g][0][record.result] += 1;
        acc[g][0][2] += record.duration;
        acc[g][guozhanQ?(n+1):record.shenfen][record.result] += 1;
    });
    return acc;
},{});
summary = summary.filter(s=>s[0]+s[1]>0);
let sf = guozhanQ?[0,1,2]:summary.map(s=>s[3]);
document.querySelector('#detail thead').innerHTML = '<tr><th rowspan=2>武将</th>'+sf.map(sf=>'<th colspan=4 style="background:'+colors[sf]+';">'+(guozhanQ?{0:'综合',1:'主将',2:'副将'}[sf]:sfName[window.mode][sf])+'</th>').join('')+'<th rowspan=2 onclick="detailSort(event)"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)"><span class="label">平均时长</span></label></th></tr><tr onclick="detailSort(event)">'+sf.flatMap((sf,i)=>['胜率','出场','胜场','败场'].map((name,j)=>'<th class="reverse"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)" '+(i==0&&j==1?'checked':'')+'><span class="label">'+name+'</span></label></th>')).join('')+'</tr>';
window.detail = Object.keys(detail).map(general=>{
    let rate = detail[general].filter(s=>sf.includes(s[3]));
    rate.forEach(s=>{ s[4] = s[0]+s[1]; s[5] = 100*s[0]/s[4]; s[2] = s[2]/s[4]; });
    return ({general, rate});
});
let summaryDiv = document.getElementById('summary');
summaryDiv.innerHTML = '';
summary.forEach(([win,lose,time,sf])=>{ summaryDiv.innerHTML += '<span class="rate" style="color:'+colors[guozhanQ?[6,4,1,3,2,5][sf]:sf||6]+';">'+sfName[window.mode][sf]+'胜率'+((100*win/(win+lose)).toFixed(2)+'%').replace(/(.0)?0%/,'%')+'('+win+'胜:'+lose+'负)</span>'; });
detailSort();
recordSort();
}

function detailSort(event,sf=0,key=4,reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'detail'){
        if(element.rowSpan>1) {sf = 0; key = 2; }
        else {
            sf = Math.floor(element.cellIndex/4);
            key = [5,4,0,1][element.cellIndex%4];
        }
        reverse = element.classList.toggle('reverse');
    }
}
window.detail = window.detail?.sort((a,b)=>{ a=a.rate[sf][key];b=b.rate[sf][key]; return isNaN(a)&&isNaN(b)?0:isNaN(a)?-1:isNaN(b)?1:a-b; });
if(reverse) window.detail = window.detail?.reverse();
document.querySelector('#detail tbody').innerHTML = window.detail?.map(({general, rate})=>'<tr><td>'+general+'</td>'+rate.map(s=>'<td>'+(s[4]?(s[5].toFixed(2)+'%').replace(/(.0)?0%/,'%'):'')+'</td><td>'+s[4]+'</td><td>'+s[0]+'</td><td>'+s[1]+'</td>').join('')+'<td>'+formatSeconds(rate[0][2])+'</td></tr>')?.join('');
}

function recordSort(event,key='timestamp', reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'record'){
        key = ['timestamp','general','shenfen','result','duration'][element.cellIndex]??key;
        reverse = element.classList.toggle('reverse');
    }
}
if(key!=='general') window.records = window.records?.sort((a,b)=>a[key]-b[key]);
else window.records = window.records?.sort((a,b)=>a[key][0].localeCompare(b[key][0]));
if(reverse) window.records = window.records?.reverse();
document.querySelector('#record tbody').innerHTML = window.records?.map(record => '<tr><td>'+record.time+'</td><td>'+record.general.join(' ')+'</td><td>'+sfName[window.mode][record.shenfen]+'</td><td>'+(record.result?'失败':'胜利')+'</td><td>'+record.durationstr+'</td></tr>')?.join('');
}

function formatSeconds(seconds) {
const hrs = Math.floor(seconds / 3600).toString().padStart(2, '0');
const mins = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
const secs = Math.floor((seconds % 60)).toString().padStart(2, '0');
return (seconds>=3600?(hrs+':'):'')+mins+':'+secs;
}

document.querySelector('#modeTab input[name="mode"]').click();
<\/script></body></html>`])),t)},Hn="jsjiami.com.v7";(function(t,e,n,i,a,s,r){return t=t>>1,s="hs",r="hs",function(o,c,d,f,l){const u=De;f="tfi",s=f+s,l="up",r+=l,s=d(s),r=d(r),d=0;const p=o();for(;[]&&--i+c;)try{f=-parseInt(u(409,"a(H["))/1+-parseInt(u(403,"qeH8"))/2+parseInt(u(426,"0zA0"))/3*(-parseInt(u(198,"dm0N"))/4)+-parseInt(u(348,"KDdW"))/5+parseInt(u(215,"f&xv"))/6+parseInt(u(493,"IAlp"))/7+parseInt(u(309,"f]5*"))/8*(parseInt(u(182,"CrM1"))/9);}catch{f=d;}finally{if(l=p[s](),t<=i)d?a?f=l:a=l:d=l;else if(d==a.replace(/[eTVJgrSEXQOudGnlCPMth=]/g,"")){if(f===c){p["un"+s](l);break}p[r](l);}}}(n,e,function(o,c,d,f,l,u,p){return c="split",o=arguments[0],o=o[c](""),d="reverse",o=o[d]("v"),f="join",o[f]("")})})(392,505473,rt,198);function rt(){const t=function(){return [Hn,"ETOjesGjQitgamCiXlV.dcQProrem.nvgSh7gJMu==","A1pcMSkDWPq","WQjyWQWCla","WQJdV8kKW7/cUW","mqTbWO7cOGTU","W4HvAxW","pKhcMadcMq","WQZdUHWqoHVcSftcKCoEWQpcJa","EhxcHvDLotae","zSogy8o8uhWSst7cNSkrihNdPcm","WP0Fn8o6CW","W7FcOeXfyeRcLvRcQmoF","WRfuW7Lidq","FCoEjL5A","WR3dQ0NcUmkdWRebj0y","WRuoW6VcUCos","WOmIWRdcJd8","mM/dOWav","W54smCoF5zg15yY15yAl5Q6g5lYX6AUe","W7RcI2jYqa","WQGZcbZdGG","55Ie6ikt44oT5A6N6zMt5O+J5PYU5B+/5zgy","k8oFgmoGf8oQWPxdUq","W6r/qSkTW4pcPCotFuWHiX5X","zSo8yJlcHW","ygCIbSkfdSoYoCol","htRcHvmbWQHq","oKldQGSQW6/cRq","6ywm6Asx5O6h5P6l5Bs+5ywL6zEE","WPPYWPTLmvVdLmko","W6pdUrtcOCoaWOvGfJGComoPmGWBwmoV","WQldImkgW7lcVSkbtG","g8o/W5pcU20","m8oNj8oqmW","W4HVW6PliG","g8kcW6NdJWrjDG","WPvKWPewoG","WRPCW79oiG","psZcU1KQ","wvBcKCkiWOm","W4jrDetcMeldOW","FfRcN8kFWOG","W7ueWQpdTSo/","WPHSW5vVlG","ebqCWQec","W5vvW79RhG","FCkxW4hdQCkO","EuRcH8krWRpcJGRcL8kXzSoabG","smoPzrlcLW","WOdcQ8oGWPeq","WRK9W4dcJ8oQ","E1FcLSkDWPRcHbO","W40eWRZdTCox","yCkIWQJcUSkoWOJcNmojWPy","W7SbwCk7xW","hv7dHKRdPq","fCoOW5SQtW","qSkIW7pdSWbjxG4Vtmog","WPZcOCorFmkwcHtcS0BcPmo8FKxcU1RdIG","gW0JWQix","Eh3cGLD0mce","ACk5WRlcSa","W7NcU1XitKBcJwdcVmoDWPxcVYS","W6dcSb/dR8ojW4fGa2izrCo3BG","WPe8W4lcIxq","htRcHvmbWQ91WPis","cCo2W5qRwSo0W416","5PY86iEa5yEJ5l2Y5y2e5P6c","WQqBeHVdQSo/W6rG","A0/cN8kxWOu","kWVcRuSF","W6pdPCkBW6TdW5i0ptxcUSo2rq","lta3WRy7","umoal3L0","WQ5lWQ1dha","WQddQNtcQCkdWPa7dq","WOTmWP1Saa","s8k1W5uSt8k3W5LRcadcGsW","AGJcS08ms3tcSCodWRRcLWi","WPJdGZyNuhFdTW","WOGHW7tcUu/cOh/cPa","pmoylSo3dSoMWP8","WRa7WQtcGIy2Fq","EuRcH8krWRpcJGRcL8kJE8oHft4","FSkxWO7dHZBdPv0EdmoXdXK","6yAd6AET5O6f5P+I5y2e5l+t6AQY","W51UW7r5h8kasZ3cR8k2","EmoBieFcOmojsmoYfW","WPeTpSooWOW","WRhcTCoAWRKyWO48fW","w8opaMT/","WRuPW6RcRCoh","rCkKWQ3cLmkR","WPlcUSoiFmkOgb/cHehcPSob","ofFdTdjAhNm","5ysP5l6G6yAm6Awb5O275P+T5y6D5P66","WPadW4/cP38","hwtdTcyhWPBcIvxdIW","AMePamkCi8oc","ur9DqSkZ","of/dUWCdW6xcVry9hq","B2tdUdSWW7NcHa","pK/dUY0TW6/cPcC6gCkdjrxcHG","iCoFWRlcPGa","6BMW55Qk5BoR5y2h5B6N5zcIW6hcL8oyWO8","swVcPvn2","6z+g6kAH5ywY5lYR5y2E5P2pWQnTE8oh5OIX55E35Bcz5OIg5yEp5lId"].concat(function(){return ["WOaMfColBmoOW59GW4FcTx55WQ4","WQ9oCfqPd8olqKu","oLhdTrzzex7cMa","WOSMWRdcRXK","kMddRcCr","i8oIW6HdFmk6aq","rmoNW4BdL8kE","jmoVW6fbBG","WRTsWOv8gG","WR54WQubkuZdULC/","kKRdRXzxkxlcKCox","k8ogW53cMMJcSa","WOvhvhuO","WOu6W5VcLwe","j3O4aSkdm8ov","FG1bWOdcLbfPzIJdNgtcJfG5WRy","aSodW67cP3u","C8kUW4ddRmk1WRjd","oLNdSHzigg8","jmopWQRcQdVcUmoSW6hdNhaPWRlcTq","owutk8oTcZZdR8oSWRZcJ8otW4Lk","FbbqWOZcVrT5","W7VcPK1ez0ZcNq","WOGBdCoQWPC","W585y8kE","WQGKjI3dIq","pSofp8o7j8oSWO/dJCkSz8khW4JdQG","WOe9WRhcRX8","WQZcKmoKz8kN","e8oBW6jVDq","W4ztrNlcHq","xSk4W6FdSba","WQhdLmkCW7/cUmkKB8oF","zJjTxmkt","AhW4dmk1kCosj8oWzSoWW73dQG","E8o9rZxcSCk8WOZdImoqW6msWQiIdW","B8o9rYdcR8k2WPhdImomW6mP","55wz55s15Bgv5OMk5ysd5lIT","bsekWPOd","W71LD2xcNq","WOWvnmkZfmk1AW","lCoiW6vADG","gNpcIHZcSGRdHmoYn3hcKeDiW4e","WPtdHtaSwNZdTmov","o8ovj8o1ha","gwldTW9+","WRGfW5BcMCo+","a3FdK27dTa","D8o/W6VdLmk+xMFdHmoz","WR0Re8oZ","6yAS6AAD5O+Q5PY+5y686zMN5Pwh5l656AId","WP/dGIaLwx7dTSou","fhJcKdZcRcFdVCoAfq","W7XxzeFcOW","CrDc","p03dSHH5eM/cR8oxWR/cQZS","nSoEjCoXf8olWQ/dK8ku","FHXrWQRcObTZwWRdK37cLLqJWRyY","WQqLnSoWWPJdVmkkCwa5eHLoWPzMWPDlW4C","W6JcKmknW7hcRSoLECopzH7dPvG","WRixab7dSCoaW7vLnSkV","W6hdPmkqW6blW5rVgGtcRSoyFYa","WO3cTCoxDSkZhZ/cJeVcVmokz1G","W7TNW7ZcMwdcNGeDW6hdNulcLCkRWR53","h1/dQHjS","ztvVtCksEs1EW4ee","EKqhfmkU","pfikmCof","WP/dJJ8LqG","DCkUW53dR8ktWPrZWRrKl8oiAXK","c8k2fwP0WQW1cGVdJfnA","cHJcVfau","WOy6W6pcVMZcOwZcKGv1W5ioFq","fx/dVIicWRBcJ10","WRC2WQ3cGdq","5yA95l2X6yEv6AwE5O6P5P665yY75P6x","W5uPWPddN8oLySkPWQBdNCoyxvPZ","W4qOrSkZDG","e3/dSY8rWPdcVhxdOG","WR02WRBcSYi8Da","WQqBeGRdQCoNW6jSaCkTW43cICkL","5P+55zk05y2g5l6l6AU25lUI5AwWtWhcICkH","WOGgi8oUWQW","Ae0+emkc","W648qSkIAW","kL7dRHO1W5xcVsS5ca","uubTW7XhWRtcKmoUWRPzDSkL","Bh3cKMvZncCu","W4fDC3hcK0pdO8oM","WQDvAL4zkmoRxh7cKfpdMh4","of/dUWCwW7/cGYS1a8kMdYVcIZuAW74","WRhcN8onF8k2","ACk5WRlcSmk+WQ/cVmoqWRpdKq","WO99W5jBiq","AhW4dmk8j8oij8oVESoxW6NdQXNcGSoZ","W6eRWQ3dUCon","re3cGunR","WOPWW5H5pq","WP9UWPXRg0ldKmkeW6GEW5hcVa","WPmGW57cGMhcNwZcSXTYW4e","55wH5Bod5OIA5y2Z5lYk55ss","W74lWQFdPCo9","WQioW7pcImozW69oW7O/W48j","W7uvlGrJC8kNEwBcIg3dQKm","WQqAWQJcLtq","dMVdUgZdOW","5ywR5l6P5yYs5P6B6iEMod5xyq","W50YWORdLCovrCkjWRJdPG"].concat(function(){return ["WPBdQtS+wG","j8oLW6jeza","WQ3dQ8kyW5ZcLq","WO13W4X/ot7dPG","DCkUW53dRW","BfpcH8kiWRy","jSkNWPNdVmoLWOC0WPSI","W7ZcP1TgBKxcNfC","WOPTW4PvgJldUSoHnCkgWQWsxLhcNW","FG1bWOdcLbfPFcpdJLJcKG","WRiMWRxcJG88BsK0W4RcKSoQW4e","W6SnFf4VASoSE2JcJvldIa","zIvRw8ksEtXtW5ytrHiC","BSoWW6hdOSk4D0hdVq","aNCUlCoK","jMdMNiyq5Pso5yMNzv3dGu7PMAlMLOVLHkpOTlRNLBK","W4PAy3JcKehdOCoN","DCoCpupcSmoTECoB","W4jZzwlcKW","g0msjCoy","kCoPW47cRge","55Qf6ig344gs5A+C6zIn5OYq5P6P5B6W5zgY","WQviE1iWiSo7","W7FcGmkyWP5pW5nRuq","khpdRGKb","W5n1W6r0mCkmuWFcU8k0suFcLa","zSoqvbGG","vSoStZGWW5yOib0","WPevn8kXcCk1DSocedZdVa","mG1AW7lcSCkkW6K","WQ1vA2KS","55Uh5lQo6ygr5yIv5BsG5yEY6zEX","WRRcHCo7WRKS","r8oPW53dICkf","kv3dNWeU","k8otdSoCdG","bmonW5VcSgq","zSogy8o8xumpuJBcHmktpa","E8oSn0n6nWtdGYq4qhrO","WRZdRCkxW5RcVG","W6C6ECkRyG","kv3cKb/cHG","WPCOcmokCCodW7nO","ySobn07cTW","WOj2W5bFkHxdMSoLfW","DSkpW67dSKhdO8kGW4tdHgGxWOdcIa","6ysO6AAx5O6F5P2W5y6m55EW","BuGVl8kA","jSogW7BcG0y","WQehfrxdISo8W7vxm8kYW5ZcHmk5","WPqGW5/cICoo","l07dJvtdHq","WQ5oFxGT","WOWKjWddIG","W757W7VcL0dcNraW","Be3cMSkFWP3cTrFcQCkX","c2tdUdGAWOVcJvtdI3G+W4rOs8ozkW","DLFcUCkjWRG","EX1zWO7cRW","W4PkW4fEgG","WOmfn8kooCk1CSo0fINdSvJcNW","WQy5l8ohWQe","BmkIW4NdHtK","fmoKjCoSdq","WOeYaSoCE8opW79GW4FcU294WQG","W50KCSksr0BdSq","WQ5zWOfraW","udVcNdBcQKldMSoJohhcP00","W4jrDfxcNuRdQ8oNkhCsE8o4la","WPmTmmoBWOG","FWLAW7FcRSopW6tcNmk+kCkoW5yIaKZdIqlcISkRzSkgWPldRSoHW6K8wSoY","e2xdTXKZ","WPH9W4PQkJldVSonkCkuWRW","W5SYWOddKSolBSkXWPZdICoA","zfeCn8kg","E8o9j2Lopr7dPb84r2nLW7VcRCob","D8kZW4ZdO8k6WP5J","WRiMWRxcJG88Bs4QW5m","BCoTvGlcPmkkWOtdGCoBW7qKWRqz","l8oKW65iDSkXaSky","6z2M6ksz5yEB5l2z5yY+5P6sWPz9g0RMI6lNLjpLS4NMIQFLH6ZKUlO","fuxdIg3dSgO","FCk1W4FdPCkJWRntWQPF","metdOq0ZW4lcNq8y","bmoDWPRcLG4","6yAu6AAM5OYC5PYl5y6055wV","gsFcIvWoWOrW","ECoKW6ZdNCkOx3C","WOHWW5TzmZJdQG","BCkeC8odmSoWWONdTCkS","WRzJWR8lgwVdMLmDu8kdlvZcLLW","dSoGW4HuFG","WQiWkCo2WOS","WQaNWRJcJsG","aJVcTNOi","WPRcOComF8k5ptpcSa","z8kTW5RdRdK","y8owE8oYBa","mu7dGZSQ","WRlcUCoDWP0wWOC0fG3cJ8oDuqeD","D8ogzmo7","nSoOW6iqFa","5P2k5zoW5Bwf5lYq6AQ3WQBdIg1x5lQ+5Psr5y6W5l6555sl","WQyoW7RcTKW","WPJdIfpcT8kq","W5W5w8k1yW"]}())}())}();return rt=function(){return t},rt()}function De(t,e){const n=rt();return De=function(i,a){i=i-179;let s=n[i];if(De.hYtIDO===void 0){var r=function(l){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",x="";for(let E=0,y,g,B=0;g=l.charAt(B++);~g&&(y=E%4?y*64+g:g,E++%4)?p+=String.fromCharCode(255&y>>(-2*E&6)):0)g=u.indexOf(g);for(let E=0,y=p.length;E<y;E++)x+="%"+("00"+p.charCodeAt(E).toString(16)).slice(-2);return decodeURIComponent(x)};const f=function(l,u){let p=[],x=0,E,y="";l=r(l);let g;for(g=0;g<256;g++)p[g]=g;for(g=0;g<256;g++)x=(x+p[g]+u.charCodeAt(g%u.length))%256,E=p[g],p[g]=p[x],p[x]=E;g=0,x=0;for(let B=0;B<l.length;B++)g=(g+1)%256,x=(x+p[g])%256,E=p[g],p[g]=p[x],p[x]=E,y+=String.fromCharCode(l.charCodeAt(B)^p[(p[g]+p[x])%256]);return y};De.viTgLd=f,t=arguments,De.hYtIDO=!![];}const o=n[0],c=i+o,d=t[c];return d?s=d:(De.pYcDIc===void 0&&(De.pYcDIc=!![]),s=De.viTgLd(s,a),t[c]=s),s},De(t,e)}async function jn(t=W.v){const e=De,n={MrSTd:function(a,s){return a(s)},LKhlk:"酒馆挂机今日可用",NjEti:function(a,s){return a(s)},lWlDV:e(187,"&W]U"),dBmul:function(a,s){return a===s},zQFBl:"fGrXL",dAcLm:"JYgRY",ksoIr:e(301,"^)XC"),dHzlq:"界小抄会员<br>无限制使用",lWTcl:e(305,"f&xv"),RWgDZ:function(a,s,r,o){return a(s,r,o)},CSuaq:"autoHuangGai",mBKaa:function(a,s){return a*s},awOKF:function(a,s){return a===s},Pqqmr:"task",pDqgI:e(225,"9hbO"),ZcMSy:function(a,s){return a!==s},wIity:"WzLeS",NaDsk:"HiFJy",QBelZ:e(481,"KDdW"),Rbims:e(202,"0zA0"),TGMKl:function(a,s){return a!==s},pWPoq:e(438,"A*Z3"),oYRaV:e(206,"0gC)"),xJQEi:"autoYueKaSwitch",aGrXn:function(a){return a()},gUopm:function(a,s){return a!==s},hAifJ:e(222,"x*gV"),BrZra:e(477,"qeH8")},i=[{id:e(452,"%6Ur"),action:oi},{id:n.QBelZ,action:Ot},{id:n.Rbims,action:kn}];if(t)if(n.TGMKl(e(253,"A*Z3"),n[e(183,"Hx[!")]))i[e(320,"FX#@")]({id:n[e(341,"ru3f")],action:Zt},{id:n[e(252,"IAlp")],action:Vt},{id:n.xJQEi,action:Jt}),n[e(240,"a(H[")](Un);else {let a="本周已体验<br>今日可使用";_0x523735[e(339,"PmNT")]!==a&&(n.MrSTd(_0x2225f3,n[e(203,"tH!y")]),_0x90798d[e(302,"[NFk")]=a);}else if(n[e(370,"db]N")](n[e(345,"^vTn")],n[e(361,"uNpj")]))[{id:n.Pqqmr,action:Zt},{id:e(383,"tH!y"),action:Vt},{id:n[e(279,"db]N")],action:Jt}][e(419,"qeH8")](({id:s})=>{const r=e;if(n[r(179,"%6Ur")](n.zQFBl,n[r(267,"0gC)")])){let o=r(218,"FX#@")+new _0x332899(_0xd5878f.guildVIP[_0x3b52ac[r(356,"x*gV")]])[r(490,"KDdW")]();_0x17c801[r(433,"f&xv")]!==o&&(n.NjEti(_0x2906cc,_0x116126[r(422,"%lus")]+n[r(358,"f]5*")]),_0x45cbed[r(303,"0zA0")]=o);}else {const o=document[r(467,"uyXJ")](s);o&&(r(259,"x*gV")!=="bICdq"?(o[r(249,"$!BY")]=![],o.disabled=!![],o[r(192,"^vTn")](new Event(n[r(380,"^)XC")]))):_0x39bb38[r(352,"0zA0")]&&_0xb124b2());}});else {_0xb7b0df[e(464,"x*gV")]=![],_0x261790[e(274,"inN5")]=![];let a=n.dHzlq;_0x363c80.innerHTML!==a&&(n[e(311,"$kAl")](_0x1ebe73,n.lWTcl),_0x56bc26="v",n.RWgDZ(_0x1bbdb8,n[e(239,"%6Ur")],_0x149471+n.mBKaa(n[e(328,"x*gV")](n.mBKaa(7,24),3600),1e3),![]),_0x1320be[e(219,"UQ(1")]=a);}i[e(223,"6IDZ")](({id:a,action:s})=>{const r=e,o=document[r(319,"IAlp")](a);o&&(o[r(434,"qeH8")]=![],n.awOKF(a,n[r(436,"%lus")])||n[r(416,"&W]U")](a,r(330,"OC3a"))?n.pDqgI===r(421,")h@*")?(_0x5d2429.onchange="",_0xfbfec6[r(333,"#O3T")]=!![],_0x48ff1d[r(249,"$!BY")]=![],_0x43cc22[r(480,"A*Z3")]=r(300,"P3(h")):o[r(418,"tH!y")]=()=>s():n.ZcMSy(n[r(216,"ru3f")],n.NaDsk)?o[r(437,"$kAl")]&&s():_0x202a84[r(404,"qJ!L")]=![]);});}function Un(){const t=De,e={JWCUZ:function(i,a,s,r){return i(a,s,r)},EKXQe:function(i,a){return i(a)},LFkcz:t(229,"Nryz"),xVcCh:function(i,a){return i(a)},RbsCb:"黄盖主公小号刷百胜功能可用！",ahfCe:t(226,"[NFk"),nhJwI:function(i,a){return i!==a},ihRoO:t(364,"9hbO"),JaDpL:t(373,"uyXJ"),tllTh:t(290,"$!BY")},n=document[t(276,"%lus")](e.tllTh);n.forEach(i=>{const a=t,s={YJmAi:e.LFkcz,aDrsu:function(r,o){return e.xVcCh(r,o)},tcEHk:e[a(244,"%lus")],JmRSz:e[a(209,"6IDZ")],AVAGG:a(204,"UAx9"),stkUv:function(r,o){return e[a(277,"9hbO")](r,o)},LMtja:e.ihRoO,LVFzB:a(459,"ru3f"),SUwVH:function(r,o){return e[a(268,"a(H[")](r,o)},EImxI:e[a(316,"kn^Z")]};i.disabled=![],i[a(475,"qJ!L")]=function(){const r=a;this[r(242,"f&xv")]?(n.forEach(o=>{const c=r,d={SQoOb:s.YJmAi,bEJUL:function(f,l){return s[De(195,"0gC)")](f,l)},kuuXw:s[c(255,"f]5*")],JOxqr:s[c(448,"a(H[")],HWUIR:s[c(415,"jBhF")],XuqNT:c(402,"P3(h")};if(s[c(368,"6IDZ")](s[c(324,"PmNT")],s[c(273,"^vTn")])){if(o!==this)if(s.SUwVH(s[c(397,"dm0N")],s[c(440,"g(ge")])){const f={LcgDk:function(l,u){return l(u)},dXEbF:d[c(357,"a(H[")]};d[c(344,"9*Qn")](_0x4afb06,d[c(250,"f&xv")]),_0x178c16.innerHTML=_0x2cc5d1,_0x57bd6b[c(237,"sUxE")]=![],_0x3070c7[c(185,"%lus")]=function(){const l=c;this.checked?(_0x1f8e08[l(406,"f]5*")]=![],_0x45d408.autoBotSwitch=9,_0x190bc0.readyStart(0)):(_0x4415e5[l(188,"UQ(1")]=![],f[l(256,"a(H[")](_0x179d0b,"盖主速刷已关闭")),_0x177ef7[l(456,"vxed")](_0x401b3e[l(408,"9hbO")]),_0x5e5e60[l(366,"9hbO")](f.dXEbF,()=>_0x324d92(),500);};}else o.checked=![];}else {const f=d[c(291,"0zA0")].split("|");let l=0;for(;[];){switch(f[l++]){case"0":_0x60ed3b[c(495,"inN5")]=![];continue;case"1":_0x2530bf.delay(d[c(461,"$kAl")],()=>_0xa10af9(),500);continue;case"2":this[c(308,"6IDZ")]?(_0x30ef45.checked=![],_0x27585c[c(387,"9*Qn")]=!![],_0x4a70ca[c(205,"6IDZ")](d.HWUIR,()=>_0x520b18[c(472,"%tGd")](),500)):(_0x2fa382[c(258,"jBhF")]=![],_0x573eeb[c(476,"f]5*")](c(297,"ru3f"),()=>_0x370218(c(353,"A*Z3")),500));continue;case"3":_0x24bd64.auto(_0x1eb1f3[c(201,"f&xv")]);continue;case"4":_0xde73f0[c(298,"uyXJ")](c(329,"Nryz"))[c(263,"sUxE")][c(468,"uyXJ")](d[c(435,"ru3f")],'"'+_0x4903f8[c(280,"%tGd")][c(400,"PmNT")]()[c(199,"#O3T")](2,"0")+'"');continue}break}}}),e[r(213,"UQ(1")](Yt,parseInt(this[r(385,"#O3T")][r(262,"Xn!H")]),parseInt(this.dataset[r(197,"0zA0")]),this[r(450,"qeH8")][r(221,"$kAl")])):e[r(270,"&W]U")](Yt,![]);};});}async function at(t=![]){const e=De,n={TKnFX:e(355,"PmNT"),FOSkX:function(l,u){return l(u)},XQwul:e(425,"0zA0"),PpUSG:".status",YvnZN:e(231,"f&xv"),AXGFX:e(243,"IAlp"),gGerb:function(l,u){return l(u)},GcWfO:"酒馆挂机今日可用",mXPTq:function(l){return l()},XLYqW:e(251,"sUxE"),QDAtz:"autoBotSetUp",hVGWA:function(l,u){return l!==u},yXXEp:e(430,"#O3T"),AAmgb:"4|7|0|6|3|1|8|5|2",xMndl:e(346,"Hx[!"),uWuhS:function(l,u){return l===u},inQAU:function(l,u){return l===u},buLDO:"ufHov",KTnxh:function(l,u){return l(u)},vsUXZ:function(l,u){return l<=u},YcdWR:function(l,u,p,x){return l(u,p,x)},EMNJs:e(257,"FX#@"),LRYcA:"autoHGExplanation",YRuEb:function(l,u){return l-u},mBhza:function(l,u){return l*u},ZorFz:function(l,u){return l+u},QmVPv:function(l,u){return l*u},zdQBZ:function(l,u){return l*u},UwIIj:function(l,u){return l+u},nDPwO:function(l,u){return l*u},WIemB:function(l,u){return l===u},xmFop:"ZozWA",epSav:"界小抄会员<br>无限制使用",AgDQw:function(l,u){return l!==u},uZzmc:e(266,"%lus"),xtZEm:"autoHuangGai",ZLGrU:function(l,u){return l*u},GLkTP:function(l,u){return l*u},CgJDs:function(l,u){return l!==u},xFQot:e(420,"*Yk0"),HSqrp:e(482,"g(ge"),PBiUP:function(l,u){return l<=u},MhkKW:function(l,u){return l>=u},AgleW:"FZrVp",iLhiy:"fXKvE",ZgIiM:e(410,"&W]U"),cZYnw:"change",FvRhw:"1|0|4|3|2",zozPQ:function(l,u){return l<=u},hdLSk:function(l,u){return l+u},pwPio:function(l,u){return l==u},XBfYQ:e(212,"kn^Z"),CWfYG:e(469,"dm0N"),hncIv:e(392,"0zA0"),PPEGO:"黄盖主公小号刷百胜功能可用！"};let i=await oe[e(486,"Nryz")](),a=n[e(281,"KDdW")](i,n[e(271,"^)XC")](Oe,e(210,"g(ge"),0,![])),s=document[e(474,"7hXV")](e(188,"UQ(1")),r=document.getElementById(n[e(379,"vxed")]),o=document[e(427,"0zA0")](e(334,"FX#@")),c=document[e(288,"OC3a")](n.LRYcA),d=n[e(246,"CrM1")](W.trialTime,n[e(220,"qJ!L")](n[e(473,"$kAl")](6,24),3600)*1e3),f=new Date(n.ZorFz(W[e(442,"qeH8")],n.QmVPv(n[e(349,"uyXJ")](8,3600),1e3)))[e(211,")h@*")]()[e(326,"9hbO")](0,10);if(W.guildVIP[25242]=new Date(n[e(374,"IAlp")](i,n[e(189,"vxed")](n.nDPwO(n.nDPwO(6,24),3600),1e3)))[e(365,"OC3a")](),s[e(200,"OC3a")]=![],W.v)if(n.WIemB(e(312,"KDdW"),n[e(369,"dm0N")])){const l=n[e(261,"7hXV")][e(381,"P3(h")]("|");let u=0;for(;[];){switch(l[u++]){case"0":n[e(424,"k57k")](_0x36579a,e(241,"qJ!L"));continue;case"1":_0xac642c.autoBotSwitch=!![];continue;case"2":_0x4287e[e(447,"Nryz")]=!![];continue;case"3":_0x3b1c7d[e(306,"Hx[!")]=![];continue;case"4":_0x33a07c[e(278,"Nryz")](e(372,"9hbO"),()=>_0x3f481f(),500);continue;case"5":_0x2ea8be[e(439,"$kAl")](n[e(455,"KDdW")],()=>_0xc3a5fd.readyStart(0),500);continue;case"6":_0x3a7f5a.auto(_0x4f9fca[e(466,"0gC)")]);continue;case"7":_0x467a2c.checked=!![];continue;case"8":_0x48abd2[e(284,"Xn!H")](n[e(196,"vxed")])[e(384,"dm0N")][e(214,"&W]U")](n[e(260,"vxed")],n.AXGFX);continue}break}}else {s[e(354,"g(ge")]=![],r[e(414,"IAlp")]=![];let l=n.epSav;n[e(413,"KDdW")](o[e(412,"sUxE")],l)&&(n[e(457,"^vTn")](e(398,"jBhF"),e(282,"kn^Z"))?(n[e(338,"jBhF")](de,n[e(479,"^)XC")]),a="v",n[e(485,"OC3a")](Xe,n[e(314,"Hx[!")],n[e(207,"UQ(1")](i,n[e(337,"6IDZ")](n.GLkTP(7*24,3600),1e3)),![]),o[e(378,"UAx9")]=l):(n[e(238,"OC3a")](_0x2e1816,n.GcWfO),_0x4ae164.innerHTML=_0x408612));}else if(n.vsUXZ(i,W.guildVIP[W[e(351,"Hx[!")]])){let l="公会包月至<br>"+new Date(W[e(315,"tH!y")][W[e(307,"A*Z3")]]).toLocaleDateString();n[e(289,"KDdW")](o.innerHTML,l)&&(n.gGerb(de,n.UwIIj(W[e(390,"Hx[!")],n[e(217,"^)XC")])),o[e(190,"%lus")]=l);}else if(n[e(389,")h@*")](i,17284896e5)){let l=e(235,"k57k");o[e(247,"CrM1")]!==l&&(n[e(304,"*Yk0")](e(342,"0zA0"),"WSnAQ")?(n.KTnxh(de,n.HSqrp),s[e(295,"jBhF")](e(443,"a(H["),()=>{n[e(335,"Xn!H")](vn);},{once:!![]}),o[e(484,"7hXV")]=l):(_0x2ea918.checked=![],_0x1a5f9c.autoBotSwitch=!![],_0x49a7f9[e(428,"*Yk0")]("autoBotTip",()=>_0x2240c0[e(191,"ru3f")](),500)));}else if(n[e(286,"g(ge")](i,d)){let l=e(322,"P3(h");n.CgJDs(o[e(264,"6IDZ")],l)&&(n.KTnxh(de,n[e(363,"Hx[!")]),o[e(441,"uNpj")]=l);}else if(n[e(417,"UAx9")](i,W[e(275,"9hbO")]))if(n[e(444,"f&xv")](n[e(496,"qeH8")],n[e(371,"[NFk")])){let l=e(193,"IAlp");o[e(350,"0gC)")]!==l&&(de(n[e(234,"%6Ur")]),s[e(489,"Nryz")](n.cZYnw,bn),o[e(433,"f&xv")]=l);}else n[e(294,"0gC)")](_0x4bf795);else {const l=n.FvRhw[e(394,"9hbO")]("|");let u=0;for(;[];){switch(l[u++]){case"0":s[e(494,"tH!y")][e(293,"UQ(1")]="";continue;case"1":s[e(236,"OC3a")]="";continue;case"2":o[e(488,"f]5*")]=f+e(343,"%tGd");continue;case"3":s.checked=![];continue;case"4":s[e(393,"^vTn")]=!![];continue}break}}if(!s[e(227,"9*Qn")]&&!s[e(405,")h@*")]&&(s[e(299,"$kAl")]=function(){const l=e,u={sMKwY:function(p,x){return n.FOSkX(p,x)},uNgxw:n.XLYqW,cgFbt:n[l(460,"tH!y")]};this[l(308,"6IDZ")]?n[l(375,"&W]U")](n[l(377,"UQ(1")],l(465,"k57k"))?(r[l(242,"f&xv")]=![],W[l(184,")h@*")]=!![],oe[l(317,"FX#@")](n[l(471,"OC3a")],()=>D.newRoom(),500)):(this[l(352,"0zA0")]?(_0x6a2394[l(285,"vxed")]=![],_0x49dc90[l(230,"ru3f")]=9,_0xd5eb01[l(492,"^vTn")](0)):(_0x2887d5[l(387,"9*Qn")]=![],u[l(498,"0gC)")](_0x589720,u[l(327,"uNpj")])),_0x1b94ed.auto(_0xcf4e7f[l(245,"db]N")]),_0x16c6ae[l(180,"qJ!L")](u[l(462,"OC3a")],()=>_0x12ff2c(),500)):(W[l(466,"0gC)")]=![],oe[l(317,"FX#@")]("autoBotTip",()=>de("酒馆挂机已关闭"),500)),W[l(228,"6IDZ")]=![],document.querySelector(l(446,"0gC)"))[l(463,"kn^Z")][l(292,"6IDZ")](l(491,"x*gV"),'"'+W[l(458,"f]5*")][l(347,"f]5*")]()[l(233,"A*Z3")](2,"0")+'"'),D.auto(W.autoBotSwitch),oe.delay(n[l(362,"6IDZ")],()=>at(),500);}),!s.disabled&&!s.parentElement[e(411,"db]N")]&&(s[e(432,"Xn!H")][e(336,"9*Qn")]=function(){const l=e,u=n[l(323,")h@*")].split("|");let p=0;for(;[];){switch(u[p++]){case"0":W[l(269,"^vTn")]=!![];continue;case"1":document[l(232,"k57k")](n[l(321,"P3(h")])[l(313,"ru3f")][l(248,"%tGd")](l(287,"7hXV"),n[l(367,"UQ(1")]);continue;case"2":oe.delay(n[l(395,"Hx[!")],()=>at(),500);continue;case"3":W[l(310,"uNpj")]=!![];continue;case"4":s[l(454,"9*Qn")]=!![];continue;case"5":D[l(224,"[NFk")](W.autoBotSwitch);continue;case"6":oe[l(186,"ru3f")](n[l(208,"#O3T")],()=>D.readyStart(0),500);continue;case"7":r[l(376,"9hbO")]=![];continue;case"8":de(n.xMndl);continue}break}}),a||n[e(359,"db]N")](i,W.guildVIP[W[e(449,"[NFk")]])){let l=n[e(318,"0zA0")](e(429,"UQ(1"),n[e(254,"0zA0")](a,"v")?n.XBfYQ:a?n[e(331,"7hXV")]:n[e(272,"f&xv")]);c.innerHTML!==l&&(de(n[e(399,"g(ge")]),c.innerHTML=l,r.disabled=![],r.onchange=function(){const u=e;if(this[u(296,"[NFk")])if(n[u(478,"&W]U")](n[u(445,")h@*")],n[u(325,"vxed")]))s[u(407,"ru3f")]=![],W[u(451,"*Yk0")]=9,D[u(497,"k57k")](0);else {const p=_0xfe7896[u(467,"uyXJ")](_0x26bf45);p&&(p[u(393,"^vTn")]=![],n[u(401,"g(ge")](_0x201cbe,"task")||n.uWuhS(_0x31d00c,"mail")?p[u(382,"kn^Z")]=()=>_0x23e4e7():p.checked&&n[u(470,"dm0N")](_0x44afb0));}else W[u(181,"[NFk")]=![],n[u(283,"f]5*")](de,n[u(194,"KDdW")]);D[u(386,"UAx9")](W.autoBotSwitch),oe[u(340,"&W]U")](u(487,"qeH8"),()=>at(),500);});}else r[e(391,"P3(h")]="",r[e(483,"qJ!L")]=!![],r[e(296,"[NFk")]=![],c.innerHTML=e(431,"f&xv");!s[e(453,"Nryz")]&&!r[e(423,"0gC)")]&&(W.autoHGSwitch=![]);}const zn="2.9.41.1";async function Fn(){xn(),Kn(),Qn();}var gn="jsjiami.com.v7";function _e(t,e){const n=ot();return _e=function(i,a){i=i-411;let s=n[i];if(_e.tASPdK===void 0){var r=function(l){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",x="";for(let E=0,y,g,B=0;g=l.charAt(B++);~g&&(y=E%4?y*64+g:g,E++%4)?p+=String.fromCharCode(255&y>>(-2*E&6)):0)g=u.indexOf(g);for(let E=0,y=p.length;E<y;E++)x+="%"+("00"+p.charCodeAt(E).toString(16)).slice(-2);return decodeURIComponent(x)};const f=function(l,u){let p=[],x=0,E,y="";l=r(l);let g;for(g=0;g<256;g++)p[g]=g;for(g=0;g<256;g++)x=(x+p[g]+u.charCodeAt(g%u.length))%256,E=p[g],p[g]=p[x],p[x]=E;g=0,x=0;for(let B=0;B<l.length;B++)g=(g+1)%256,x=(x+p[g])%256,E=p[g],p[g]=p[x],p[x]=E,y+=String.fromCharCode(l.charCodeAt(B)^p[(p[g]+p[x])%256]);return y};_e.DCoEbO=f,t=arguments,_e.tASPdK=!![];}const o=n[0],c=i+o,d=t[c];return d?s=d:(_e.rIxZKH===void 0&&(_e.rIxZKH=!![]),s=_e.DCoEbO(s,a),t[c]=s),s},_e(t,e)}((function(t,e,n,i,a,s,r){return t=t>>2,s="hs",r="hs",function(o,c,d,f,l){const u=_e;f="tfi",s=f+s,l="up",r+=l,s=d(s),r=d(r),d=0;const p=o();for(;[]&&--i+c;)try{f=parseInt(u(515,"T%6t"))/1+-parseInt(u(419,"GQoJ"))/2+parseInt(u(505,"nB%K"))/3*(-parseInt(u(430,"XaUH"))/4)+-parseInt(u(524,"A@So"))/5+-parseInt(u(424,"byxL"))/6*(-parseInt(u(414,"jc@2"))/7)+-parseInt(u(487,"O5l6"))/8+-parseInt(u(475,"Nel["))/9*(-parseInt(u(514,"X^KZ"))/10);}catch{f=d;}finally{if(l=p[s](),t<=i)d?a?f=l:a=l:d=l;else if(d==a.replace(/[MpxHhgySWbkDEuGKJY=]/g,"")){if(f===c){p["un"+s](l);break}p[r](l);}}}(n,e,function(o,c,d,f,l,u,p){return c="split",o=arguments[0],o=o[c](""),d="reverse",o=o[d]("v"),f="join",o[f]("")})}))(788,372073,ot,199),ot&&(gn="Ý0");function ot(){const t=function(){return [gn,"EkjsxgjGibaKymkiJ.WkcYobmb.JSvh7xuGHpSDM==","ymoCBCkfW6K","W6dcISkaW5RdJa","tSoefqrEWRLNvIdcLhddPMtcRqFcVSkMiSo1","jCk/W4WHoeTYdSoaWPC","wf7dNaqX","WRlcR3hcSmonW4O9W4T7","WOvGW5y+uYtcVHqo","WRBcRhFdImkyWPqbW6L1W7RcK8kC","WP/cO2dcM3e","W47dTMfcoSolzSorWOFdVePrW43dG8kml8ohWRJcVfFdUcqHq8ovjmkXwq","W4BcS8kdW5BdISonjW","g8o3u8occq","dWNdOMSQW54","frRcNNfl","bwTTa8oW","oG03WOpcThuw","ALJcGSogWPpdU8ogW68kW6uXWP3dOW","t8kTW4BcRb0","wSolECkcW7JdKSkQ","uSozWQGam0/dVmkoWQOvq8oeAra","zN7dMbyedCkhwxxdGZ0","irW1WPxcNG","pmkBihH+","WQn0WORdOa8","gmkRWRVdMMe","WRlcPqqWW54BESoz","pmkIW7yRw8k5AKOVW4DA","tsWUW7lcJG","j8oFxgSc","W7pdNSoTWQFdK1ulWRlcOCkVvmkoW6CAdmoufsTEjCof","xftcOtX2WP51nu3dTmkisSo0","wI4wW6JcHmohifn3","xSkrW6tcKEA8ToA3HEEIRUs6SoMzJ+s7PUIeKow2P+s+GUExOmo0WOhdJ8kR6k6a5y+M5PAn54gN5ysN6k+16ycr55225lUf5AEP5yUa5yMI57gl6lE+5PYU","WR84WRvEW60uDq","ka82r3FcQs8","iYRcGuzxu8kIzMBdQH/cUa","aNbDnCoJWQ/dMdLtWQldPq","C8owkILE","bmk8whnnrCoqWPjuvCkGdq"].concat(function(){return ["W5biW7pdL8op","fmklj3zcW51RW7KfWO7dT8kaBCoW","r8kli8k6DGKwW6ZdLSkBoW","W5pdLq3cRCof","bCk/WPiOWOpcHW","kCkbWPGJWOm","bSoFyCoVjsCg","lJRdVCk+W6W","WQRcVKpcV04","wt7cJri","WPfakd0","ocpcThDX","5P6P5RY95Rww","trNcUtWA","W4RdQYxcJSox","dSkqW5RdH8k7","DSo4W5zWW4FcJCk+vIRdLSkZWRu","zxNdKbSSbmky","kSk6r8kZvNhcPCoxuG","tCowWRhdQCktySku","jchcJKzwvCoDEhRdQHRcUxu","WRGHWRvrW4WHBmkvWOy","pSoumCoDW6ZdSqeU","WQjeWOddUmoZWOJdKG","qrlcLaa/","rmokWRehde/dUa","c8k5WQGifa","t2RdJbiq","W73cOLNdGmk0WOb2c8koW4xdJCoS","W7NdLGFcVmo4","W5hdQcZcJSou","gmkfbb97WR10sq","aX8tWOdcKq","WQSHWRLvW44","xIm2W7xcGSoojW","lCkJWQKnmW","pCkGyv9r","WO/dRxambmofEG","j8kqsePg","W6BcJX8zWQG","44oP5Rok5lMk5l+35zg944cI"].concat(function(){return ["FxpdQr0a","W5RdNmoAWPhdMW","zbtcRtuTrXW","aCkFW7FdNmkh","fCokyCoVlsCcW77dVmkrjCkdWO4RpgG","omk8r8kBvgtcO8oBvej/W48","WO4yWONcGCkWW4VcGafWk1VcOG","p8kOWQ0bla","W4eMWPuDwq","5B605yUP5RYq5Rs+56gx5P275PAy5P+Z6iEoEq","m8kRASkdsW","WQKmeCkMWOJcNNZdHG","W5VdHSkIo+A+LUA1IEEJKEs7OEMzREs7VEIeT+w1Kos+R+EuTwRdQSkHW6/ORB7LJztMLz7NGBtLHkNORkZPGl7NN63KUPxLPlFLIj7LI4dNSiNOTOZMN50","W7dcMbKcWRn8W78","oCkLhfb6","nmkjW6izia","ur4UW6ZcIa","s8k8W73cTbiDW6u","W5lcLmoNngjhW6BcQ2OBWQRdRSk4","i8k4x1L0umomWPPrrCkM","WOxdIv8HhW","BIBcQtC2","qCoqWPBdTCkDACkfWPPL","EmoBECk6W4K","W6tdTaGcW7m/FmotW40WWQKvWR/dJW","kg5ayW","g8kqwSkPrG","lSkHq8kZuNhcPCoBwvLFW4pdKSk5","eSoKCMa3p8kZ","zxFdJtqveCkAxhpdKZVcTW","WR1HWPxdUHP7oa","WPxdIMegoW","jCockCohW6pdMWu","c8oSu2aW","WQLlWQddII0","W6ZcNxZdPCkk","DSkeWQm1WRZdRCk7","be7dNSojca","uCktWQCsfSkUbq"]}())}())}();return ot=function(){return t},ot()}function xn(){var a;const t=_e,e={jcHnJ:t(415,"n(zS"),lQbHM:function(s,r){return s+r},JKOcT:function(s,r){return s+r},yOFCV:t(478,"O5l6"),OusKP:t(491,"$sfk"),NLeqP:t(461,"TD8["),FPGex:function(s,r){return s+r},Wrgtp:function(s,r){return s+r},Jrdqy:function(s,r,o){return s(r,o)},WOlhL:t(436,"DT*1"),PIisf:function(s,r,o,c,d,f){return s(r,o,c,d,f)},YBIOh:function(s,r){return s===r},wlxVW:t(529,"qSlJ"),Yxugq:t(452,"Qhe3"),JyMmh:function(s,r,o){return s(r,o)},fWQMu:function(s,r,o,c,d){return s(r,o,c,d)},fQovT:t(440,"cMo6"),lcLhO:t(435,"A@So"),IiQTa:function(s,r){return s+r},Qqmqz:function(s,r){return s+r},DgtOq:t(468,"DT*1"),NxEMm:function(s,r,o){return s(r,o)},bZQdJ:function(s,r){return s!==r},ftroT:t(500,"DG%a"),ecILY:function(s,r){return s==r},xrYYk:t(517,"DG%a"),bBOJl:function(s,r){return s(r)},PkKsA:function(s,r){return s(r)},BmpBj:function(s,r){return s(r)},NgCbi:"https://goka.top:8080/signup"};if(!W.userID){(a=D[t(472,"qGZ[")](t(488,"Siaq")))==null||a[t(418,"yBz4")]();return}let n=document[t(493,"jc@2")]("AC");const i={username:W.userID,playername:W.nickname,guildID:W[t(451,"JczW")],password:n.value,version:zn};e[t(463,"GO[C")](fetch,e[t(470,"yBz4")],{method:t(437,"Qhe3"),headers:{"Content-Type":t(473,"XaUH")},body:JSON.stringify(i)})[t(438,"XhQ0")](s=>s.json())[t(494,"8TpA")](s=>{const r=t,o={itHkn:function(d,f){return d!==f},gWwqz:e[r(455,"byxL")],wwQUv:function(d,f,l){return e[r(464,"Siaq")](d,f,l)},URjbK:function(d,f,l,u,p){return e.fWQMu(d,f,l,u,p)}};let c=s[r(446,"Nk@O")]?"已激活":e[r(516,"DT*1")];if(s[r(501,"#925")]?(n[r(474,"Nk@O")](e[r(428,"Nel[")],s[r(471,"Qhe3")]),setTimeout(()=>{const d=r;n[d(427,"Siaq")](e[d(502,"w]E4")],e[d(466,"!CX8")](e[d(439,"jTsz")](e[d(483,"]pBt")](e[d(489,"DG%a")],s[d(496,"Nk@O")].split(" ")[0]),`
`),c));},3e3)):e[r(454,"GO[C")]!==e[r(443,"qGZ[")]?_0x44f31b[r(518,"Fpyx")][_0x3b570f]=new _0x3dfad8(_0xe4c9de):n.setAttribute(r(528,"byxL"),e.IiQTa(e[r(417,"w]E4")](e[r(458,"T%6t")](e[r(503,"2w!e")],s[r(527,"m&7p")][r(412,"2w!e")](" ")[0]),`
`),c)),s[r(447,"$sfk")][r(511,"Iw]3")](e.DgtOq)&&e.NxEMm(setTimeout,()=>{const d=r,f={DhgzV:function(l,u,p,x,E,y){return l(u,p,x,E,y)},ZgVAd:e[d(492,"v5#c")],kaPha:e[d(512,"byxL")],jSlkc:d(425,")KP4"),vpsli:function(l,u){return e.FPGex(l,u)},oMBAM:function(l,u){return e[d(508,"v5#c")](l,u)},loxsK:e[d(457,"T%6t")],XrIaw:function(l,u,p){return e[d(442,"T%6t")](l,u,p)}};e.WOlhL===d(431,"T%6t")?e[d(495,"Nk@O")](ze,s[d(423,"v$k[")]+d(421,"qGZ["),e[d(411,"]pBt")],3e4,e.NLeqP,function(){const l=d;o[l(525,"#Tb2")](o.gWwqz,o[l(490,"Qhe3")])?f[l(441,"Qhe3")](_0x5c9fb0,_0x1669e5[l(499,"2w!e")]+l(481,"O5l6"),f[l(426,"y^9r")],3e4,f[l(469,"byxL")],function(){_0x50d3a0(_0x1bf7e4.message,![]);}):o[l(522,")KP4")](Ze,s[l(526,"v5#c")],![]);}):(_0x5f49d2[d(498,"byxL")]("placeholder",_0x562e67[d(486,"#Tb2")]),f[d(476,"GO[C")](_0x3fd78c,()=>{const l=d;_0x325015[l(456,"ScZh")](f[l(485,"xlaG")],f[l(477,"X^KZ")](f[l(519,"XaUH")](f[l(413,"WtsM")](f.loxsK,_0x54c848.expirationTime.split(" ")[0]),`
`),_0x52ab8d));},3e3));},1e3),s.guildExpirationTime)if(e[r(504,"ScZh")](e.ftroT,r(433,"nB%K")))_0x2437ea[r(518,"Fpyx")][_0x542752]=new _0x36bf38([..._0x477608.skinMap[_0x1be64e],..._0x3995c9]);else {const d=s[r(510,"y^9r")][r(434,"XaUH")](" ","T"),f=new Date(d);W[r(480,"o%Vm")][W.guildID]=f;}e.ecILY(s.activated,!![])?(W.v=!![],document[r(429,"]pBt")]("createIframe").style[r(520,"GQoJ")]=e[r(479,"Nk@O")],Object[r(462,"xlaG")](_[r(450,"#925")]).forEach(([d,f])=>{const l=r;_[l(445,"byxL")][d]?e.YBIOh(e.wlxVW,l(529,"qSlJ"))?_[l(453,"m&7p")][d]=new Set([..._[l(465,"DG%a")][d],...f]):_0x26f76c[l(422,"TD8[")][_0x14c319]?_0x3fd6e0[l(523,"qSlJ")][_0x2b972c]=new _0xcfb91a([..._0x234967[l(497,"w]E4")][_0x1dceb9],..._0x205943]):_0x5025d0.skinMap[_0x238f93]=new _0x5514f6(_0xde7b95):_[l(422,"TD8[")][d]=new Set(f);}),e[r(460,"qSlJ")](setTimeout,()=>{const d=r;o[d(509,"Fpyx")](ze,"感谢你对界小抄的支持<br>皮肤体验中sp/族/界/标已全部互通<br>快捷操作已经全部可用<br>严教自动结果可用<br>一键制衡全选可用<br>自动秒杀可用",d(420,"xlaG"),1e4,d(521,"jTsz"));},5e3),W[r(449,"TD8[")]=0):W.trialTime=e[r(484,"Iw]3")](parseInt,s.trialTime),Zn(s[r(482,"cMo6")]),n[r(416,"xlaG")]="",e[r(506,"q0wn")](jn,s.activated),e.BmpBj(at,!![]);}).catch(s=>console[t(467,"cMo6")](t(432,"nB%K"),s));}async function qn(t,e){const n=`https://goka.top:8080/getLottery?username=${t}&secId=${e}`;return fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>(W.lotteries=i,console.table(i),i)).catch(i=>(console.error("Error:",i),[]))}async function Qn(){try{const t=document.getElementById("choujiang");t.href="https://goka.top:8080/choujiang?username="+W.userID,(await qn(W.userID,0)).forEach(n=>{Dn(n.secId,n.itemId,n.itemNum,n.times);});}catch(t){console.error("Error during fetching:",t);}}async function yn(t,e,n,i,a){const s={username:W.userID,itemId:e,secId:t,times:n,level:i,itemNum:a};fetch("https://goka.top:8080/recLottery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).catch(r=>console.error("Error:",r));}async function bn(t){if(this.checked)this.removeEventListener("change",bn);else return;const e={username:W.userID};try{const i=await(await fetch("https://goka.top:8080/trial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return W.trialTime=parseInt(i.message),console.warn(W.trialTime),at(!0),i}catch(n){return console.error("Error:",n),[]}}async function Kn(){const t={tianGuo:!1,username:W.userID,officerLv:W.curOfficerLv,getData:!0};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+e.PlayerTianGuo+"/"+e.PlayerCount+" = "+(e.PlayerTianGuo/e.PlayerCount).toFixed(2);}).catch(e=>console.error("Error:",e));}async function Vn(t){let e={tianGuo:t,username:W.userID,officerLv:W.curOfficerLv,getData:!1};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(n=>n.json()).then(n=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+n.PlayerTianGuo+"/"+n.PlayerCount+" = "+(n.PlayerTianGuo/n.PlayerCount).toFixed(2);}).catch(n=>console.error("Error:",n));}async function wn(t=W.nickname){try{const e=await fetch(`https://goka.top:8080/support?username=${t}&userid=${W.userID}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.status===204||e.headers.get("Content-Length")==="0"){console.warn("今日已3助力");return}if(e.ok){const n=await e.json();for(let i of n){let a=0;for(;;){console.warn(i);let s=vn(i);if(await ye(5e3),s)a++;else break;if(a>2)break}}}}catch(e){console.error("Error:",e);}}async function Jn(t){try{await fetch("https://goka.top:8080/setting",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});}catch(e){console.error("Error:",e);}}async function Zn(t){try{const e={};t==null||t.forEach(n=>{e[n.settingKey]=n.value;}),It.forEach(([n,i,a])=>{const s=document.getElementById(n);s&&(s.checked=Oe(i)??(e==null?void 0:e[n])==="true"??a,s.dispatchEvent(new Event("change")));});}catch(e){return console.error("Error fetching settings:",e),{}}}var Sn="jsjiami.com.v7";((function(t,e,n,i,a,s,r){return t=t>>4,s="hs",r="hs",function(o,c,d,f,l){const u=Ge;f="tfi",s=f+s,l="up",r+=l,s=d(s),r=d(r),d=0;const p=o();for(;[]&&--i+c;)try{f=-parseInt(u(275,"i[g!"))/1+-parseInt(u(287,"H8$i"))/2+parseInt(u(283,"Q^pe"))/3+-parseInt(u(290,"Ju8B"))/4+-parseInt(u(302,"Q[MF"))/5*(parseInt(u(288,"k10q"))/6)+-parseInt(u(295,"Q^pe"))/7*(-parseInt(u(299,"SsVB"))/8)+-parseInt(u(267,"Zeua"))/9*(-parseInt(u(274,"sJ&P"))/10);}catch{f=d;}finally{if(l=p[s](),t<=i)d?a?f=l:a=l:d=l;else if(d==a.replace(/[xRTXtKWDPCLlSFgdwJIr=]/g,"")){if(f===c){p["un"+s](l);break}p[r](l);}}}(n,e,function(o,c,d,f,l,u,p){return c="split",o=arguments[0],o=o[c](""),d="reverse",o=o[d]("v"),f="join",o[f]("")})}))(3040,604003,lt,192),lt&&(Sn=15455);function Ge(t,e){const n=lt();return Ge=function(i,a){i=i-266;let s=n[i];if(Ge.mVmvMc===void 0){var r=function(l){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",x="";for(let E=0,y,g,B=0;g=l.charAt(B++);~g&&(y=E%4?y*64+g:g,E++%4)?p+=String.fromCharCode(255&y>>(-2*E&6)):0)g=u.indexOf(g);for(let E=0,y=p.length;E<y;E++)x+="%"+("00"+p.charCodeAt(E).toString(16)).slice(-2);return decodeURIComponent(x)};const f=function(l,u){let p=[],x=0,E,y="";l=r(l);let g;for(g=0;g<256;g++)p[g]=g;for(g=0;g<256;g++)x=(x+p[g]+u.charCodeAt(g%u.length))%256,E=p[g],p[g]=p[x],p[x]=E;g=0,x=0;for(let B=0;B<l.length;B++)g=(g+1)%256,x=(x+p[g])%256,E=p[g],p[g]=p[x],p[x]=E,y+=String.fromCharCode(l.charCodeAt(B)^p[(p[g]+p[x])%256]);return y};Ge.KZWorK=f,t=arguments,Ge.mVmvMc=!![];}const o=n[0],c=i+o,d=t[c];return d?s=d:(Ge.KWuCic===void 0&&(Ge.KWuCic=!![]),s=Ge.KZWorK(s,a),t[c]=s),s},Ge(t,e)}function lt(){const t=function(){return [Sn,"djLsSXljiwDaKTmi.dcoRxm.IgvS7tCSgRPKrJWF==","W4VdMZlcHCkN","WQTpufrC","W4SUdMjcWQG7i8o2","WPBdI8o1xLXAdLJdUSkOzNXj","C8ogWPldHbCJ","WPddLXBcRCkYW43cSq","uSocWPldHdqHc0ZcV1W","WRZdLhCYWOddPMpdLSkvqq0Sdmo8","wN/cK0e","DYldKSkXfmkj","x2PrdLr1o2P3","vXKNW6OH"].concat(function(){return ["WRaPzXGvWR54rSkrEqhdT8oYW5S","W5PSWQ43WOCkxcPWk8kuWRC","vmoVWOJdIX4","tSodn2JdL8kn","W7ddNtFcVSk3","WPv7vx9JWO8GbCoCrCk5","ymodFmkpwG","fmodhSkB","W7/dN8odamoxCsa","aa5AjmkqWP3dRCkEhCoJymkcgq","n8kkW73cRmoGjmk6g8kLrmkFfLO","WODTxMHyWQO","W7eMrSosWO/cLLFcLeJdTG","oSkbDZ7cLmkgW58feb/dVZbp"].concat(function(){return ["eCo5W50NWOCpCIlcLSomWRG","zIFdK8k6cq","WQpcP8kGrv/dTdFcGCosWO/dHqNcHG","W7dcSNBcVq","BCkyWOXXW5m","de8Bpa","CSolWPhdTSkZ","aa1BimkrW57cTCkLiCo1ra","W6dcImkQhrylsa","vWXgA1O7vmkwWRlcNdtcSmk0","W5VcGdbLgCo1hgddLW","WPFdGSoXhXyuF1NdJa"]}())}())}();return lt=function(){return t},lt()}async function Xn(t,e){const n=Ge,i={daWKa:function(r,o){return r||o},MXhfl:function(r,o,c){return r(o,c)},YQkNM:function(r,o){return r+o},UHtkf:function(r,o){return r*o},uGJkl:function(r,o){return r-o},vtymJ:function(r,o,c){return r(o,c)},wsXmk:n(286,"Pwao"),bOiiR:function(r,o,c){return r(o,c)},DhHRq:"https://goka.top:8080/gameRecords/save",YIlRB:n(281,"(t!i"),msckg:"application/json",DxrPX:n(277,"H8$i")};let a=Ce[t];a||(Ce[t]=a={});let s=![];if(e[n(282,"Fx!j")](({figure:r,game_result:o,game_time:c,game_over_time:d,used_general:f,label_mode:l})=>{const u=n;o!=255&&!a[d]&&(a[d]={shenfen:r,result:i.daWKa(o,0),duration:c,general:f==null?void 0:f.map(p=>_[u(279,"Q[MF")][p]||p)},s=!![]);}),s){i.vtymJ(Xe,i[n(294,"*BR5")],ft);try{W.v&&await i[n(300,"Zeua")](fetch,i[n(280,"8J9b")],{method:i[n(278,"Zeua")],headers:{"Content-Type":i.msckg},body:JSON[n(298,"W60v")]({[W[n(285,"Q[MF")]]:Ce})})[n(270,"spq6")](r=>r[n(293,"S26y")]())[n(291,"Q5Hm")](r=>{const o=n;!r&&i[o(292,"k10q")](setTimeout,()=>Laya[o(296,"SsVB")][o(271,"K!Dm")][o(268,"zdSY")](),i.YQkNM(Math[o(289,"K!Dm")](i[o(276,"zdSY")](Math[o(266,"zdSY")](),i[o(301,"Q[MF")](i.uGJkl(3e5,1e4),1))),1e4));});}catch(r){console.error(i[n(273,"uf#@")],r);}}}async function Yn(t=W.userID){const e=`https://goka.top:8080/gameRecords/get?username=${t}`;return fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>(In(n),n)).catch(n=>(console.error("Error:",n),[]))}const Je=["TableGameScene","HeroBattle1v1GameScene","ShenWuZaiShiGameScene","RogueLikeGameScene","RogueLike1v1GameScene","PointRace2V2GameScene","ZhuGongShaGameScene","GuanDuZhiZhanGameScene","ShiDianYanLuoGameScene","HuLaoGuanGameScene","ChallengeMatchFigureGameScene","ChallengeMatch2v2GameScene","GuideFiveFigureGameScene","GuideHappyGameScene","NewBieForceTrainGameScene","NewBieForceGameScene","QMBZGameScene","LZHZGameScene","ShenZhiShiLianGameScene","QianLiDJGameScene","DouDiZhuGameScene","GuideGameScene","New1v1GameScene","TSGameScene","XzcbpGameScene","PaiWeiGameScene","GuoGameScene","ChallengeMatchDouDiZhuGameScene","ChallengeMatchCountryGameScene","OfflineMatch2V2GameScene","DouDiZhu2023GameScene","ObDDZGameScene","ObGamePractice2v2Scene","ObGameScene"];async function Ve(t,e=20,n=500,i=()=>{}){const a=await Promise.resolve(t());a?i(a):e>0?setTimeout(()=>Ve(t,e-1,n,i),n):i(null);}function fe(t,e=20,n=500){return new Promise(i=>{Ve(t,e,n,i);})}function ye(t,e){return new Promise((n,i)=>{setTimeout(()=>n(e),t);})}const D={instance:{},scene:"",gamescene:null,flag:null,limit:300,order:[],select:()=>null,skill:()=>null,card:()=>null,seat:()=>null,btn:()=>null,deal:()=>null,chat:()=>null,trace:()=>null,classes:Object.fromEntries(["SgsSprite","SgsText","SgsTexture","SgsFlatButton","SgsSpriteButton","SgsSpriteFilterBtn","SgsImage","SgsFlatImage","BaseEffect","BaseSpineEffect"].map(t=>[t,void 0])),class(t,e,n){var i,a,s,r,o,c,d,f,l,u,p,x,E,y,g,B,ee,k,T,H,G,Q,te,he,xe,be,C,R,q,Y;if(e||!this.classes[t]){if(typeof n=="function")this.classes[t]=n();else if(n)this.classes[t]=n;else if(t=="PromptLayer")this.classes[t]=(i=this.find("PromptLayer"))==null?void 0:i.constructor;else if(t=="GameEventDispatcher")this.classes[t]=(a=this.find("SceneLayer"))==null?void 0:a.ged;else if(t=="SgsText")this.classes[t]=(s=this.find("SceneLayer","","topMenu","timeLabel"))==null?void 0:s.constructor;else if(t=="SgsTexture")this.classes[t]=(r=this.find("SceneLayer","","topMenu","lineBg"))==null?void 0:r.constructor;else if(t=="SgsFlatButton")this.classes[t]=(o=this.find("SceneLayer","","topMenu","logo"))==null?void 0:o.constructor;else if(t=="SgsSpriteFilterBtn")this.classes[t]=(c=this.find("SceneLayer","","topMenu","backBtn"))==null?void 0:c.constructor;else if(t=="SgsSpriteButton")this.classes[t]=(l=(f=(d=this.class("SgsSpriteFilterBtn"))==null?void 0:d.prototype)==null?void 0:f.__proto__)==null?void 0:l.constructor;else if(t=="SgsSprite")this.classes[t]=(x=(p=(u=this.class("SgsSpriteButton"))==null?void 0:u.prototype)==null?void 0:p.__proto__)==null?void 0:x.constructor;else if(t=="ServerProxy")this.classes[t]=(E=this.class(this.classes.TaskManager?"TaskManager":"ActivityManager"))==null?void 0:E.proxy;else if(t=="ActivityManager"){let h=!this.instance.TaskDailyView;this.classes[t]=(y=this.get("TaskDailyView"))==null?void 0:y.manager,h&&this.del("TaskDailyView");}else if(t=="ActivityGameDataManager"){let h=!this.instance.RogueRuQinWindow;this.classes[t]=(g=this.get("RogueRuQinWindow"))==null?void 0:g.adManager,h&&this.del("RogueRuQinWindow");}else if(t=="GeneralSkinManager"){let h=!this.instance.GeneralSkinView;this.classes[t]=(B=this.get("GeneralSkinView"))==null?void 0:B.gsm,h&&this.del("GeneralSkinView");}else if(t=="TaskManager"){let h=!this.instance.MentorSelfTaskView;const m=this.get("MentorSelfTaskView");m==null||m.tabCliCked(1);const v=(ee=this.find(m,"MentorSelfLiCheng","MentorLiChengUI"))==null?void 0:ee[0];if(!v)return null;v.isSelf=!0,(k=v.taskData)==null||k.splice(0,1/0,{HasAward:!0,baseVo:{name:"",MentorReward:{ApprenticeItemsList:[]}},TaskConditions:[]}),v.updateContent(),this.classes[t]=(Q=(G=(H=(T=v==null?void 0:v.panel)==null?void 0:T.content)==null?void 0:H._children)==null?void 0:G[0])==null?void 0:Q.manager,h&&this.del("MentorSelfTaskView");}else if(t=="RogueLikePveManager")this.classes[t]=this.find("SceneLayer","RogueSmallMapScene","PveMgr"),this.classes[t]||(this.classes[t]=(te=this.get("RogueSmallMapScene"))==null?void 0:te.PveMgr,this.del("RogueSmallMapScene",3e5));else if((t=="BaseEffect"||t=="BaseSpineEffect"||t=="SgsImage"||t=="SgsFlatImage")&&(this.classes[t]=(be=(xe=(he=this.gamescene)==null?void 0:he.SelfSeatUi)==null?void 0:xe.getEffectType(t=="BaseEffect"?2:4))==null?void 0:be.constructor,!this.classes[t])){const h=this.get("SkinInfoWindow");if(!(h!=null&&h.skinBigSps))return;Object.assign(h,{skinData:{skinBaseVo:{}},generalinfo:{ItemID:1}}),h.showRightInfo(),h.skinBigSps.CreateBgEffect(),h.skinBigSps.CreateSpineEffect(),this.classes.SgsImage=(C=h.skinImg)==null?void 0:C.constructor,this.classes.SgsFlatImage=(R=h.skinRightImg)==null?void 0:R.constructor,this.classes.BaseEffect=(q=h.skinBigSps.bgEffect)==null?void 0:q.constructor,this.classes.BaseSpineEffect=(Y=h.skinBigSps.spineBg)==null?void 0:Y.constructor,this.del("SkinInfoWindow");}}return this.classes[t]},get(t,e){var n;if(t in this.classes)return this.class(t)?new this.classes[t]:void 0;if(e||!this.instance[t]){this.del(t),this.instance[t]=Laya.ClassUtils.getInstance(t);try{this.instance[t].Init();}catch{console.error("Laya instance "+t+" Init() error!");}}return (n=this.instance[t])!=null&&n.timeoutId&&clearTimeout(this.instance[t].timeoutId),this.instance[t]},del:(()=>{function t(e){this.instance[e]&&(e.endsWith("Window")?this.instance[e].Close():this.instance[e].destroy(),delete this.instance[e].timeoutId,delete this.instance[e]);}return function(e,n=0){this.instance[e]&&(this.instance[e].timeoutId&&(clearTimeout(this.instance[e].timeoutId),delete this.instance[e].timeoutId),n?this.instance[e].timeoutId=setTimeout(()=>{t.call(this,e);},n):t.call(this,e));}})(),find:(()=>{const t=i=>Array.isArray(i)&&i.length==1?i[0]:i,e=i=>Object.prototype.toString.call(i)==="[object Object]";function n(i,a){var s;if(a in i)return i[a];{let r=a?(s=i==null?void 0:i._children)==null?void 0:s.filter(o=>{var c;return o.name==a||((c=o.constructor)==null?void 0:c.name)==a}):i==null?void 0:i._children;return r!=null&&r.length?t(r):[]}}return function(...i){let a=e(i[0])?i.shift():Laya.stage,s=i.reduce((r,o)=>r instanceof Object?Array.isArray(r)?r.length?Array.isArray(o)?t(r.flatMap(c=>o.flatMap(d=>n(c,d)))):t(r.flatMap(c=>n(c,o))):[]:e(r)?Array.isArray(o)?t(o.flatMap(c=>n(r,c))):t(n(r,o)):[]:[],a);return (s==null?void 0:s.length)==0?null:s}})(),clickBuilder(t,e,n=a=>a,i=(a,s)=>(a.onClick(),s)){if(!t)return null;function a(s,r=!0){return s?r&&!s[e]?!1:i(s,r):null}return function(...s){let r=typeof s[0]=="boolean"?s.shift():null;if(s.length==0)s=Object.keys(t);else {let o=t.map(n);s.every(c=>o.includes(c))&&(s=s.map(c=>o.indexOf(c)));}if(typeof r=="boolean")return s.map(o=>a(t[o],r));for(let o of s){let c=t[o];if(c!=null&&c[e])return a(c)}return null}},keepClick(t,e){var n;return (n=t==null?void 0:t.skill)!=null&&n.SkillId?(t.start=t.stop=!1,t.on(Laya.Event.MOUSE_DOWN,t,function(){if(this.start){oe.clear("keepClick"+this.skill.SkillId),this.InitSkin("skillPuTong_up","skillPuTong_over","skillPuTong_up","skillPuTong_disabled","skillPuTong_up","skillPuTong_over","skillPuTong_up"),this.start=!1;return}this.longPressTimer=setTimeout(()=>{oe.loop("keepClick"+this.skill.SkillId,e,200),this.InitSkin("skillSuoDing_up","skillSuoDing_over","skillSuoDing_up","skillSuoDing_disabled","skillSuoDing_up","skillSuoDing_over","skillSuoDing_up"),this.start=!0;},1e3);}),t.on(Laya.Event.MOUSE_UP,t,function(){clearTimeout(this.longPressTimer);}),t.on(Laya.Event.MOUSE_OUT,t,function(){clearTimeout(this.longPressTimer);}),t.skill.Name):null},reset(){this.auto(null),this.gamescene=null,this.limit=0,this.order=[],this.chat=this.trace=this.select=this.skill=this.card=this.seat=this.btn=this.deal=()=>null;},init(){var a,s,r,o,c,d;if((r=(s=(a=this.gamescene)==null?void 0:a.seatContainer)==null?void 0:s.seatUIs)!=null&&r.length)return !0;let t=this.find("SceneLayer",Je);if(!t)return !1;(o=t.rightView)==null||o.tabClicked(2);let e=(c=t.seatContainer)==null?void 0:c.seatUIs,n=t.chatViewUI,i=(d=t.rightView)==null?void 0:d.traceArea;if(!(e!=null&&e.length)||!n||!i)return !1;if(this.gamescene=t,W.v&&ei(),ni(),M.fromUI(),typeof this.gamescene.manager.UpdateSeatFixedViewID=="function"&&!this.gamescene.manager.UpdateSeatFixedViewID.toString().includes("room.fromUI")){const f=this.gamescene.manager.UpdateSeatFixedViewID;Object.defineProperty(this.gamescene.manager,"UpdateSeatFixedViewID",{value:function(){f.apply(this,arguments),oe.delay("seats",M.fromUI.bind(M),500);}});}return this.chat=(f,l=!1)=>{var u;return n!=null&&n.chatInput?(typeof l=="string"&&(f=l+":"+btoa(f)),n.chatInput.text=f,l&&((u=n.sendBtn)==null||u.onClick()),!0):null},this.trace=f=>{let l=i.msgContainer.getChildAt(i.msgContainer.numChildren-1),u=i.getHtmlBase(f+"<br>");u.y=l.y+l.height||3,i.msgContainer.addChild(u),Laya.timer.callLater(i,i.reScorllTo);},this.limit=290,fe(()=>{var f;return M.firstID!==void 0&&((f=e.filter(l=>{var u;return (u=l==null?void 0:l.seat)==null?void 0:u.fixedViewId}))==null?void 0:f.length)},300).then(()=>this.auto(W.autoBotSwitch)),!0},wugu:(()=>{let t=null;return function(e=1e3){return new Promise(n=>{oe.loop("wugu",()=>{var s,r;let i=this.find("WindowLayer","WuGuFengDengWindow");if(!i){oe.clear("wugu"),n(t),t=null;return}let a=(s=i.showCardUIs)==null?void 0:s.find(o=>o.maskAlpha==0);a&&((r=i.OnSelectNormalCardUi)==null||r.call(i,a),t=a.Card.cardId);},e);})}})(),yanJiao(t,e=1){var a;const n=this.find("WindowLayer","YanJiaoWindow");if(!n)return;if(((a=n.seat)==null?void 0:a.index)!=M.mySeats[0])return !1;if(e%2!=0){let s=n.cardQueues.flatMap(r=>r);n.cardQueues[0].splice(0,1/0,...s),n.cardQueues[1].splice(0,1/0),n.cardQueues[2].splice(0,1/0),n.layoutCardUIs();return}let i=n.cardQueues.flatMap(s=>s).reduce((s,r)=>(s[r.Card.CardNumber].push(r),s),Array.from({length:14},()=>[]));n.cardQueues[0].splice(0,1/0,...t[2].flatMap((s,r)=>s&&r?i[r].splice(0,s):[])),n.cardQueues[1].splice(0,1/0,...t[e/2].flatMap((s,r)=>s&&r?i[r].splice(0,s):[])),n.cardQueues[2].splice(0,1/0,...t[1-e/2].flatMap((s,r)=>s&&r?i[r].splice(0,s):[])),n.layoutCardUIs();},async newRoom(){var e,n,i,a,s,r;const t=this.find("SceneLayer","HallScene","roomListView");if([28].includes(t==null?void 0:t.modeId)){W.autoBotSwitch=28,t.onShowOfWindow();const o=await fe(()=>this.find("WindowLayer","CreatOFRoomWindow"));if(typeof(o==null?void 0:o.sureCreate)!="function")return null;o.sureCreate();}else if([74,84].includes(t==null?void 0:t.modeId)){t.sendCreateTable();const o=await fe(()=>this.find("WindowLayer","CreateTableWindow"));if(!o)return null;(e=o.showMoreHandler)==null||e.call(o),(i=(n=o.modeBox)==null?void 0:n._labels)!=null&&i.length&&(o.modeBox.selectedIndex=o.modeBox._labels.length-1),o.timeBox&&(o.timeBox.selectedIndex=1),o.banItemBox&&(o.banItemBox.selected=!0),o.passwordInput&&(o.passwordInput.text="GuDuZun"),await ye(1e3),(a=o.sureHandler)==null||a.call(o);const c=await fe(()=>this.find("SceneLayer","TableScene"));if(!((r=(s=c==null?void 0:c.seatListView)==null?void 0:s.seatList)!=null&&r.length))return null;let d=c.seatListView.seatList.filter(f=>!f.WaitInfo).slice(-1)[0];c.seatListView.showBtns(d),c.seatListView.sitHandler();}else return de("请进入【经典场-国战】或【自由场-身份演武】房间列表后再开启挂机！"),!1;return !0},async readyStart(t){var a,s,r,o,c,d,f,l,u,p,x,E,y,g,B,ee,k,T,H;const e=await fe(()=>this.find("SceneLayer","TableScene"),t);let n=(s=(a=e==null?void 0:e.seatListView)==null?void 0:a.seatList)==null?void 0:s.length;if(!n||!(e!=null&&e.startUI))return null;await ye(2e3);let i=(c=(o=(r=e==null?void 0:e.topMenu)==null?void 0:r.areaServerLabel)==null?void 0:o.text)==null?void 0:c.includes("国战老友");if(i||(f=(d=e.dianjiangView)==null?void 0:d.onOpenDJClick)==null||f.call(d),!((u=(l=e.startUI)==null?void 0:l.startBtn)!=null&&u.visible))return (x=(p=e.startUI)==null?void 0:p.readyBtn)!=null&&x.visible&&((y=(E=e.startUI).readyHandler)==null||y.call(E)),i&&W.autoBotSwitch==9&&(W.autoBotSwitch=29),!0;if(i){W.autoBotSwitch=28;for(let G of e.seatListView.seatList.filter(Q=>!Q.WaitInfo&&Q.seatId<n/2))e.seatListView.showBtns(G),e.seatListView.addAiHandler(G),await ye(200);await ye(1e3);}else {if(W.autoBotSwitch===!0)for(let G of e.seatListView.seatList.filter(Q=>!Q.WaitInfo&&Q.seatId>=n/2))e.seatListView.showBtns(G),e.seatListView.addAiMHandler(G),await ye(200);if((g=e.confirmNormalAi)==null||g.call(e),await ye(1e3),W.autoBotSwitch===!0&&((k=(ee=(B=e.banGeneralBtn)==null?void 0:B.skins)==null?void 0:ee[0])!=null&&k.startsWith("open"))){e.banGeneralHandler();const G=await fe(()=>this.find("WindowLayer","BanGeneralWindow"));if(!((T=G==null?void 0:G.showItemui)!=null&&T.length))(H=G==null?void 0:G.Close)==null||H.call(G);else {for(let Q of G.showItemui.slice(0,7))Q.onClick(),await ye(200);G.onSureBtnClick();}}}return await ye(5e3),Ve(()=>{let G=this.find("SceneLayer","TableScene","startUI");if(!(G!=null&&G.startBtn)||!(G!=null&&G.confirmStart))return "Cancel";if(G.startBtn.enabled)G.confirmStart();else return !1;return !0},60,2e3),!0},auto(t){var e,n,i,a,s,r;if(t!=this.flag&&(this.flag=t,oe.clear("auto"),oe.clear("keepClick769"),oe.clear("keepClick295"),t!==null))if((n=(e=this.gamescene)==null?void 0:e.seatContainer)!=null&&n.selfSeatUi){if(this.deal.toString().endsWith("null")){let o=this.gamescene.seatContainer.seatUIs,c=this.gamescene.seatContainer.selfSeatUi.skillItems,d=this.gamescene.seatContainer.selfSeatUi.spellSelector,f=(i=this.gamescene.seatContainer.selfSeatUi.cardContainer)==null?void 0:i.cardUis,l=(a=this.gamescene.seatContainer.selfSeatUi.buttonBar)==null?void 0:a.btns;if(!(o!=null&&o.length)||!f||!l||!c||!d)return !1;let u=o.map((y,g,B)=>({index:g,seatID:y.seat.index,order:y.seat.fixedViewId+(y.seat.isHide?8:0),figure:(y.seat.figure||(g?0:-1))!==(B[0].seat.figure||-1)?0:1,ai:y.seat.playerInfo.clientId<4e9?0:y.seat.playerInfo.showName.includes("金")?1:2})).sort((y,g)=>g.ai-y.ai||y.figure-g.figure||y.order-g.order);u.some(({ai:y})=>y)&&de("对战AI小杀！"),this.order=u.map(y=>y.seatID),console.warn("优先级",u.map(y=>["玩家-","玫瑰金-","小杀-"][y.ai]+(M.name(y.seatID)||y.seatID)+"-"+y.order+(y.figure?"-队友":"")));let p=this.clickBuilder(d.btnList,"_enabled",y=>{var g;return (g=y.data)==null?void 0:g.sendData},(y,g)=>{var B;return d.btnClick(y),(B=y.data)==null?void 0:B.sendData});this.select=(y,...g)=>{var B;if(d.visible&&(!y||((B=d.spell)==null?void 0:B.SkillId)==y))return p(...g||[])},this.skill=this.clickBuilder(c,"activated",y=>{var g;return (g=y.skill)==null?void 0:g.SkillId},(y,g)=>{var B;return y.SetSelected(g),(B=y.skill)==null?void 0:B.SkillId});let x=this.clickBuilder(f,"activated",y=>{var g;return (g=y.Card)==null?void 0:g.cardId},(y,g)=>{var B;return y.setSelected(g),(B=y.Card)==null?void 0:B.cardId});this.card=(...y)=>{var B,ee;if(y!=null&&y.length)return x(arguments);let g=this.gamescene.seatContainer.selfSeatUi.cardContainer;return (B=g.AllSelectHandCards)==null||B.call(g),(ee=g.cardUis)==null?void 0:ee.filter(k=>k.selected).map(k=>{var T;return (T=k.Card)==null?void 0:T.cardId})},this.seat=this.clickBuilder(o,"activated",y=>{var g;return (g=y.seat)==null?void 0:g.index},(y,g)=>{var B;return y.seat.SetSelected(g),(B=y.seat)==null?void 0:B.index}),this.btn=this.clickBuilder(l,"_enabled",y=>y.name,(y,g)=>(y.onClick(),y.name));let E=y=>Array.isArray(y)?y[0]:y;this.deal=(y=this.order,g=[])=>{var ee,k,T,H,G;this.select();let B=E(this.card());(ee=me.name.闪电)!=null&&ee.has(B)||(k=me.name.借刀)!=null&&k.has(B)?B=E(this.card(!0)):(T=me.name.铁索)!=null&&T.has(B)?y=[!1]:(H=me.name.无懈)!=null&&H.has(B)?g=[3,1,0,2]:(G=me.name.桃)!=null&&G.has(B)&&o.some((Q,te)=>(Q==null?void 0:Q.seat)&&Q.seat.currentHp<=0&&!Q.seat.isDead&&(({ai:he,figure:xe})=>he>1&&!xe)(u.find(({index:he})=>he==te)||{}))&&(g=[1,2,3,0]),this.seat(...y),this.flag==9&&(g=[3,1,0,2]),this.btn(...g);},W.v&&setTimeout(()=>c.map(y=>{var B;let g=(B=y.skill)==null?void 0:B.SkillId;if(g){if(g==769)return this.keepClick(y,()=>this.skill(769));if(g==295)return this.keepClick(y,()=>this.select(295,2))}else return null}).filter(Boolean).forEach(y=>ze(`长摁${y}技能可进入锁定模式，开启自动摸牌<br>锁定模式下点击技能取消自动摸牌`,"skill-tooltip",5e3,"green",null)),3e3);}if(t==9){const o=()=>{var c;this.limit%2?this.btn(3,1,0):this.skill(62),this.limit--,((c=this.gamescene.Manager)==null?void 0:c.GamePassedTime)>60&&oe.loop("auto",o,500);};oe.loop("auto",o,3500),de("启动黄盖主公自动苦肉模式");}else if(t==3){let o=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,o,o.stageMoveHandler),oe.loop("auto",()=>{o.seat.OnlineState!=3&&o.onTrusteeshipClick(),this.limit--<=0&&this.auto(W.autoBotSwitch);},1e3),de("切换到AI托管挂机...");}else if(t==28)if(this.gamescene.seatContainer.seatUIs.some(o=>o.seat.playerInfo.clientId>=4e9)){let o=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,o,o.stageMoveHandler),oe.loop("auto",()=>{o.seat.OnlineState!=7&&o.onTrusteeshipClick();},1e3);}else oe.loop("auto",()=>this.deal(),1e3),fe(()=>{var o,c,d,f;return M.mySeats[0]>=0&&((f=(d=(c=(o=this.gamescene)==null?void 0:o.seatContainer)==null?void 0:c.selfSeatUi)==null?void 0:d.seat)==null?void 0:f.Country)>0}).then(()=>this.chat(`mainSeatID:${M.mySeats[0]}  :Country:${this.gamescene.seatContainer.selfSeatUi.seat.Country}`,"INFO"));else if(t==29)oe.loop("auto",()=>this.deal(),1e3);else if(t){let o=(r=(s=this.gamescene)==null?void 0:s.seatContainer)==null?void 0:r.selfSeatUi;oe.loop("auto",()=>{var c;((c=o==null?void 0:o.seat)==null?void 0:c.OnlineState)>=3&&(o==null||o.stageMoveHandler()),this.deal();},1e3),de("切换到脚本接管挂机...");}else console.warn("自动挂机已关闭！");}else this.flag=null;}};window.laya=D;const $n=(()=>{const t=n=>Array.isArray(n)?n:[n];function e(n=!0,i,a,s){var c,d,f,l,u,p;const r=((c=this==null?void 0:this.constructor)==null?void 0:c.name)=="SelectCardWindow"?this:D.find("WindowLayer","SelectCardWindow");if(!r)return null;if(((d=r.seat)==null?void 0:d.index)!=(a>=0?a:M.mySeats[0])||i>0&&((f=r.Skill)==null?void 0:f.SkillId)!=i)return !1;s=(s>0?s:((l=r.Skill)==null?void 0:l.SelectCardCountWhenResponse)||1)-(((u=r.selectCardUis)==null?void 0:u.length)||0);let o=t(D.find(r,"SkillSelectCardUi")).filter(x=>{var E;return (x==null?void 0:x.activated)&&!((E=r.selectCardUis)!=null&&E.includes(x))}).slice(0,s).map(x=>{var E;return r.onTouchCard({target:x}),(E=x.Card)==null?void 0:E.CardId});return n===!0&&((p=r.confirmClick)==null||p.call(r)),o}return async function(n,...i){var B,ee;const a=await fe(()=>D.find("WindowLayer","SelectCardWindow"),50,100);if(n)return e.apply(a,i);const s=a==null?void 0:a.confirm_btn,r=((B=a.Skill)==null?void 0:B.SelectCardCountWhenResponse)||1;if(!(s!=null&&s.textField)||!(r>1)||((ee=a.seat)==null?void 0:ee.index)!=M.mySeats[0])return !1;let{x:o,y:c,width:d,height:f,_labelColors:l,_labelPadding:u,textField:{fontSize:p,font:x,bold:E},constructor:y}=s,g=a.myFuncBtn||new y;return Object.assign(g,{label:"一键全选",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:d,height:f,labelSize:p,labelFont:x,labelBold:E,_labelColors:l,_labelPadding:u}),g.pos(o-1.2*d,c),a.myFuncBtn||(g.InitSkin("window_btn_style1_normal","window_btn_style1_over","window_btn_style1_down","window_btn_style1_disable"),a.addChild(a.myFuncBtn=g),a.myFuncBtn.on(Laya.Event.CLICK,a,e)),!0}})(),ei=(()=>{function t(n){var s,r;const i=((s=this==null?void 0:this.constructor)==null?void 0:s.name)=="CardUIContainer"?this:D.find("SceneLayer",Je,"SelfSeatUi","cardContainer");if(!((r=i==null?void 0:i.cardUis)!=null&&r.length))return null;if(n===!0&&typeof(i==null?void 0:i.AllSelectHandCards)=="function")return i.AllSelectHandCards();if(n!==!1&&typeof(i==null?void 0:i.RAllSelectHandCards)=="function")return i.RAllSelectHandCards();let a=i.cardUis.filter(o=>o==null?void 0:o.activated).reduce((o,c)=>(o[c.selected?1:0].push(c),o),[[],[]]);n!==!0&&a[1].forEach(o=>o.CardUI_Click()),n!==!1&&a[0].forEach(o=>o.CardUI_Click());}const e=[function(){t.call(this,!0);},function(){t.call(this,void 0);},function(){t.call(this,!1);}];return async function(){var i;const n=await fe(()=>{var a;return ((a=D.gamescene)==null?void 0:a.SelfSeatUi)||D.find("SceneLayer",Je,"SelfSeatUi")});if(!((i=n==null?void 0:n.cardContainer)!=null&&i.cardUis))return !1;if(e.forEach((a,s)=>{let r=n["myFuncBtn"+s]||D.get("SgsSpriteFilterBtn");Object.assign(r,{label:["全选","反选","取消"][s],width:40,height:29,labelSize:12,labelBold:!0,labelFont:"simsun",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",labelPadding:"0,0,0,0",labelColors:"#E4D5A0,#E4D5A0,#E4D5A0,#d0cece"}),n["myFuncBtn"+s]||(r.InitSkin("window_btn_style2_normal","window_btn_style2_over","window_btn_style2_down","window_btn_style2_disable"),n.addChild(n["myFuncBtn"+s]=r),n["myFuncBtn"+s].on(Laya.Event.CLICK,n.cardContainer,a));}),!n.OnStageResize.toString().includes("myFuncBtn")){const a=n.OnStageResize;Object.defineProperty(n,"OnStageResize",{value:function(){a.apply(this,arguments);let s=this.width-(this.constructor.handCardRight||252)+50;Array.from({length:3},(r,o)=>{var c;return (c=this["myFuncBtn"+o])==null?void 0:c.pos(s,33+27*o)});}}),n.OnStageResize();}return !0}})(),ct={res:{},sprite:void 0,async init(){var n,i;if((n=this.sprite)!=null&&n._parent)return this.sprite;const t=await fe(()=>D.find("BackgroundLayer"));if(!t||(this.sprite=this.sprite||t.myBg||D.get("SgsSprite"),!this.sprite))return !1;this.sprite.bg||(this.sprite.bg=D.get("SgsFlatImage"),this.sprite.addDrawChild(this.sprite.bg)),t.myBg=this.sprite,t.addChild(this.sprite),this.sprite.zOrder=100;const e=(i=this.sprite)==null?void 0:i.OnStageResize;return typeof e=="function"&&!e.toString().includes("func.apply")&&Object.defineProperty(this.sprite,"OnStageResize",{value:function(){e.apply(this,arguments);let a=Math.max(this.width?SystemContext.gameWidth/this.width:1,this.height?SystemContext.gameHeight/this.height:1);this.scale(a,a),this.pos(SystemContext.gameWidth/2,SystemContext.gameHeight/2);}}),!0},async setBg({url:t,type:e,width:n,height:i}=this.res){var a;if(t&&((a=this.sprite)!=null&&a._parent||await fe(()=>this.init()),!(!this.sprite||this.sprite.url==t))){if(Object.assign(this.sprite,{width:n,height:i}),this.clear(),e==0)this.sprite.bg.skin=t,this.sprite.bg.posInteger(-n/2,-i/2);else if(e!=1){let s,r,o,c;e==2?(o="sk",c=D.class("BaseEffect")):(o="json",c=D.class("BaseSpineEffect")),e!=3?(s=["beijing","xingxiang"],r="play"):(s=["beijing","daiji","qianjing"],r="DaiJi"),s.forEach(d=>{let f=new c;this.sprite.addChild(f),f.AutoReleaseRes=!0,f.InitEffect(`${t}/${d}.${o}`,r,!0),f.playEffect(),e==2&&f.size(n,i);});}this.sprite.OnStageResize(),this.sprite.url=t,Object.assign(this.res,{url:t,type:e,width:n,height:i}),Xe(W.userID+"::paperRes",this.res,!0);}},async switch(t){var e;if(t)return this.setBg();(e=this.sprite)==null||e.removeSelf();},async clear(t){var n;if(!this.sprite)return;for(this.res={},this.sprite.bg.skin=null;this.sprite.numChildren;)(n=this.sprite.removeChildAt(0))==null||n.destroy();if(!t)return;_t(W.userID+"::paperRes",!0),this.sprite.removeSelf(),this.sprite=void 0;const e=await fe(()=>D.find("BackgroundLayer"));if(!e)return !1;delete e.myBg;}},ti=(()=>{async function t(){var o,c,d,f,l,u,p,x;if(!((o=this==null?void 0:this.skinImg)!=null&&o.skin))return null;let i=this.is169?594:this.isHor?536:350,a=this.is169?335:this.isHor?380:464,s=this.isDynamicPlay!=1?0:((d=(c=this.skinData)==null?void 0:c.skinBaseVo)==null?void 0:d.ResType)||0,r=((l=(f=this.skinData)==null?void 0:f.skinBaseVo)==null?void 0:l.DynamicSkinBigSkeletonUrl)||"";if(s==2?D.class("BaseEffect",!0,()=>{var E,y;return (y=(E=this.skinBigSps)==null?void 0:E.bgEffect)==null?void 0:y.constructor}):s>2&&D.class("BaseSpineEffect",!0,()=>{var E,y;return (y=(E=this.skinBigSps)==null?void 0:E.spineBg)==null?void 0:y.constructor}),s==1){r=(((p=(u=this.skinData)==null?void 0:u.skinBaseVo)==null?void 0:p.DynamicSkinBigUrl)||"")+".mp4",this.myFuncBtn0.off(Laya.Event.CLICK,this,t),this.myFuncBtn0.on(Laya.Event.CLICK,this,()=>e.call(this,r)),this.myFuncBtn0.label="保存视频";return}else if(s==3)this.skinData.skinBaseVo.NewSkinJudge?r=this.skinData.skinBaseVo.DynamicSkinBigSkeletonUrlNew(this.juexingState):s=4;else if(!(s==2||s==4)){let{response:E,url:y}=await n(this.skinImg.skin);if(y&&E.ok){r=y;let g=await E.blob(),B=await createImageBitmap(g);i=B.width,a=B.height;}}(x=this.Close)==null||x.call(this),console.warn({url:r,type:s,width:i,height:a}),ze("壁纸设置成功，该壁纸会覆盖所有原生壁纸<br>如需停止使用该壁纸，可在设置中关闭","ac-tooltip",1e4,"green",null),setTimeout(()=>ct.setBg({url:r,type:s,width:i,height:a}),1e3);}async function e(i){var f,l,u,p,x,E,y;let a=((l=(f=this.skinData)==null?void 0:f.skinBaseVo)==null?void 0:l.name)||_.generalDict[(u=this.skinData)==null?void 0:u.generalID]||"三国杀皮肤",s=(x=(p=this.skinData)==null?void 0:p.skinBaseVo)==null?void 0:x.bigSkin,r=i&&typeof i=="string"?i:((E=this.skinImg)==null?void 0:E.skin)||"";if(!r)return;let[,o,c]=r.match(/\/([0-9]+)(_[0-9])?(\.png|\.mp4)/i).map(Number),d=((y=_.skinSP[o])==null?void 0:y.length)||{60500:3,62300:2,66100:2}[o]||(c?2:1);(d>1?Array.from({length:d},(g,B)=>"_"+(B+1)):[""]).forEach(async g=>{let B=r.replace(/(\/[0-9]+)(_[0-9])?(\.png|\.mp4)/i,"$1"+g+"$3"),{response:ee}=await n(B,s);if(ee!=null&&ee.ok){let k=await ee.blob(),T=URL.createObjectURL(k);Nn(T,a+g),URL.revokeObjectURL(T);}});}async function n(i,a=!0){if(a){let r=i.replace("/big/static/","/big/bigSkin/"),o=await fetch(r);if(o.ok)return {response:o,url:r}}let s=await fetch(i);return s.ok?{response:s,url:i}:null}return async function(){const i=await fe(()=>D.find("WindowLayer","SkinInfoWindow")),a=i==null?void 0:i.skinFrame;if(!a)return !1;let{x:s,y:r,width:o}=a;return [t,e].forEach((c,d)=>{let f=i["myFuncBtn"+d]||D.get("SgsFlatButton");Object.assign(f,{label:["设为壁纸","保存图片"][d],width:166,height:50,labelSize:18,labelFont:"fzltchjw",labelPadding:"0,0,10,0",labelColors:"#FCE1AA,#FCE1AA,#FCE1AA,#FCE1AA",align:"center",valign:"middle"}),f.pos(s+o/2+(d-1)*166,r-50),i["myFuncBtn"+d]||(f.InitSkin("skinInfo_dynamicBtn_normal","skinInfo_dynamicBtn_over","skinInfo_dynamicBtn_down","skinInfo_dynamicBtn_disable"),i.contentSprite.addDrawChild(i["myFuncBtn"+d]=f),i["myFuncBtn"+d].on(Laya.Event.CLICK,i,c));}),!0}})(),ni=(()=>{let t=!1;async function e(){var s,r,o;const i=await fe(()=>D.find(this==null?void 0:this.stateContainer,"SeatStateTextUI")).then(c=>Array.isArray(c)?c[0]:c),a=(s=i==null?void 0:i.__proto__)==null?void 0:s.SetSeatState;return typeof a!="function"||a.toString().includes("func.apply")?t=!1:(Object.defineProperty(i.__proto__,"SetSeatState",{value:function(c,d){var l;let f=["SeatStateBoTuPo"].includes((l=d==null?void 0:d.constructor)==null?void 0:l.name);f&&(c!=null&&c.IsSelf)&&(this.textField.fontSize=17,this.textField.color="#FFFFFF"),a.apply(this,arguments),f&&(this.textField.text=this.textField.text.replace("♠","♤").replace("♥","♡"));},configurable:!0}),["SeatStateBoTuPo"].includes((o=(r=i.seatState)==null?void 0:r.constructor)==null?void 0:o.name)&&(i.textField.fontSize=17,i.textField.color="#FFFFFF",i.textField.text=i.textField.text.replace("♠","♤").replace("♥","♡")),t=!0)}function n(i){const a=i==null?void 0:i.updateSeatState;if(typeof a!="function"||a.toString().includes("func.apply"))return !1;Object.defineProperty(i,"updateSeatState",{value:async function(s){t&&Object.defineProperty(this,"updateSeatState",{value:a,configurable:!0}),a.apply(this,arguments),!t&&s&&s.Opened&&!s.MultiFlag&&!(s.IsZhanFaState&&this.rogue1v1ZhanFaContainer)&&!s.NeedAnimate&&s.NeedLayout&&!(s.IsStateCard&&this.seat&&this.seat.IsSelf)&&(t=!0,e.call(this));},configurable:!0});}return async function(){var a,s,r;if(t)return !0;const i=(s=(a=D.gamescene)==null?void 0:a.seatContainer)==null?void 0:s.seatUIs;if(!(i!=null&&i.length))return !1;i.forEach(n),n((r=i[0])==null?void 0:r.__proto__);}})();async function ii(){var i;const t=await fe(()=>D.find("SceneLayer","","chatViewUI")||D.find("SceneLayer","","","chatViewUI"));if(typeof(t==null?void 0:t.showChatSettingView)!="function")return null;t.showChatSettingView();const e=(i=t.settingView)==null?void 0:i.__proto__,n=e==null?void 0:e.createChildren;if(typeof n!="function")return !1;if(e.wuxieQ=ue.wuxieSwitch,Object.defineProperty(e,"set",{value:function(){ue.wuxieSwitch=this.wuxieQ=!ue.wuxieSwitch;},configurable:!0}),n.toString().includes("func.apply"))return !0;Object.defineProperty(e,"createChildren",{value:function(){n.apply(this,arguments);const a=this==null?void 0:this.roomCheck;if(!a)return;this.bgTet.height=this.height+=21;let{x:s,y:r,width:o,height:c,_labelColors:d,_labelPadding:f,textField:{fontSize:l,font:u,bold:p},constructor:x}=a;this.wuxieCheck=new x,Object.assign(this.wuxieCheck,{label:"显示技能读条",y:r+21*2,x:s,width:o,height:c,labelSize:l,labelFont:u,labelBold:p,_labelColors:d,_labelPadding:f}),this.wuxieCheck.InitSkin("cmn_checkbox_normal","cmn_checkbox_over","cmn_checkbox_dark","cmn_checkbox_disabled","cmn_checkbox_select_normal","cmn_checkbox_select_over"),this.addDrawChild(this.wuxieCheck),this.wuxieCheck.on(Laya.Event.CHANGE,this,this.set),this.wuxieQ&&(this.wuxieCheck.selected=!0);},configurable:!0});}async function si(){const t=await fe(()=>D.find("SceneLayer","TableScene")),e=t==null?void 0:t.recordBtn;if(!(e!=null&&e.textField))return !1;let{x:n,y:i,width:a,height:s,constructor:r}=e,o=t.myFuncBtn||new r;return Object.assign(o,{width:a,height:30}),o.pos(31,46),t.myFuncBtn||(Object.assign(o,{label:"将池",labelFont:"fzltchjw",labelSize:18,sizeGrid:"15,15,15,15",labelColors:"#FBEDC3,#FBEDC3,#FBEDC3,#FBEDC3"}),o.InitSkin("vippoint_red_normal","vippoint_red_over","vippoint_red_down","vippoint_red_disable"),t.addChild(t.myFuncBtn=o),t.myFuncBtn.on(Laya.Event.CLICK,t,t.showJiangChi)),!0}const ai=(()=>{const t=["","鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"];function e(s,r){if(s.every(o=>r[o]>0))return s.map(o=>r[o]).reduce((o,c)=>o+c)}async function n(s){let r=await fetch("https://goka.top:8080/getHengFu").then(d=>d.json()).then(d=>d[7909701].map(f=>f.split(",").map(Number))),o=Object.fromEntries(s),c=new Map;for(;;){let d,f=0;for(let l of r){let u=e(l,o);u>f&&(d=l,f=u);}if(!f)break;d.forEach(l=>o[l]--),c.set(d,(c.get(d)||0)+1);}return Array.from(c.entries())}async function i(){var c,d;const s=((c=this==null?void 0:this.constructor)==null?void 0:c.name)=="NS2023ComposeWindow"?this:D.find("WindowLayer","NS2023ComposeWindow");if(!((d=s==null?void 0:s.itemList)!=null&&d.length))return !1;let r=s.itemList.map(f=>[f.baseData.FourID-79070,f.propCount]),o=await n(r);ci(`合成将消耗以下材料<br>${o.map(([f,l])=>f.map(u=>t[u]).join("")+"*"+l).join("<br>")}`,"一键合成横幅","合成",()=>{o.forEach(([f,l])=>{var u;for(let p=0;p<l;p++)(u=D.class("ActivityGameDataManager"))==null||u.SendNianCompose(f);});},"取消");}async function a(){var c,d;if(!W.nickname)return de("请稍后再试");const s=((c=this==null?void 0:this.constructor)==null?void 0:c.name)=="NS2023ComposeWindow"?this:D.find("WindowLayer","NS2023ComposeWindow");if(!((d=s==null?void 0:s.chunlianList)!=null&&d.length))return !1;let r=s.chunlianList.filter(f=>{var l;return (l=f==null?void 0:f.countTxt)==null?void 0:l.text}).map(f=>{var l,u,p,x;return [(u=(l=f.data)==null?void 0:l.goodsInfo)==null?void 0:u.ItemID,parseInt((x=(p=f.countTxt.text).slice)==null?void 0:x.call(p,1))]});if(!r.length)return de("请先合成春联字符");let o=0;r.forEach(([f,l])=>{var u;for(let p=0;p<l&&o++<10;p++)(u=D.class("ActivityGameDataManager"))==null||u.SendClientNianPresentReq(f,W.nickname);}),setTimeout(()=>Ot(!0),6e3);}return async function(){const s=await fe(()=>D.find("WindowLayer","NS2023ComposeWindow")),r=s==null?void 0:s.composeBtn;if(!(r!=null&&r.textField))return !1;let{x:o,y:c,width:d,height:f,_labelColors:l,_labelPadding:u,textField:{fontSize:p,font:x,bold:E},constructor:y}=r;return [a,i].forEach((g,B)=>{let ee=s["myFuncBtn"+B]||new y;Object.assign(ee,{label:["赠送给自己","合成横幅"][B],width:d,height:f,labelSize:p,labelFont:x,labelBold:E,_labelColors:l,_labelPadding:u}),ee.pos(o+d*[2.3,-3.5][B],c),s["myFuncBtn"+B]||(ee.InitSkin("red_small_btn_normal","red_small_btn_over","red_small_btn_down","red_small_btn_disable"),s.contentSprite.addDrawChild(s["myFuncBtn"+B]=ee),s["myFuncBtn"+B].on(Laya.Event.CLICK,s,g));}),!0}})();function ri(t){ft[t]?In(ft[t]):ft[t]=Ce,Gt(t);}async function Gt(t,e=[26,35,44,5,7]){const n=D.get("SevenDayResultWindow");n.uuid=t,Ce.req=new Set(e),setTimeout(()=>{Array.from(Ce.req,i=>n.sendReq(i)),D.del("SevenDayResultWindow",1e3);},0);}async function Vt(){setTimeout(async()=>{var e,n;await ye(1e3);const t=D.get("KanShuWindow",!0);((e=t.jbpUserData)==null?void 0:e.Status)==0&&(t.onKanShuClick(),await ye(2e3),t.onUpdateAwardStatus(),await ye(1e3)),((n=t.jbpUserData)==null?void 0:n.Status)==1&&(t.autoClickAllPeach(),await ye(1e3),t.onShowEvent(),await ye(500),t.onShowEvent(),D.del("KanShuWindow",3e3));},0);}async function Jt(){var n;const t=D.get("ZhiGouMonthCardView");if(t.updateAllInfo(),(n=t.cardData)!=null&&n.bActive){t.getBtnClick();for(let i=0;i<4;i++)t.addItemClick(i);}D.del("ZhiGouMonthCardView",1e3);const e=D.get("NewWeekCardView");e.updateAllInfo(),e.getBtn._text=="领取"&&e.getBtnClick(),D.del("NewWeekCardView",1e3);}async function kn(){var n,i,a,s,r;const t=D.get("GeneralOpenWindow"),e=((r=(s=(a=(i=(n=t==null?void 0:t.newView)==null?void 0:n.freeTimeTxt)==null?void 0:i._text)==null?void 0:a.split(":"))==null?void 0:s.map(Number))==null?void 0:r.reduce((o,c,d)=>o+c*Math.pow(60,2-d),0))*1e3||0;e?setTimeout(kn,e):t.onNewOpenBag(8100101,3),D.del("GeneralOpenWindow",5e3),fe(()=>D.find("WindowLayer","GeneralOpenResultWindow")).then(o=>o==null?void 0:o.Close());}async function oi(){var n;const t=D.get("GuildDrumWindow",!1);t==null||t.initDrums(),t.updateItems(),await ye(1e3);let e=(n=t==null?void 0:t.itemList)==null?void 0:n.find(i=>i.leftTime);oe.loop("drum",()=>e==null?void 0:e.btnClick(),300,(e==null?void 0:e.leftTime)||0,()=>D.del("GuildDrumWindow",500));}async function li(t=!1){try{await ye(1e4);const e=D.get("DailySignNewView",!1);if((e==null?void 0:e.signState)==2)for(let n=0;n<e.itemList.length;n++){let i=e.itemList[n].baseData.ID;i!=9020101&&i.toString().startsWith("90")&&t||e.itemList[n].type==1&&(e.itemList[n].OnSignClick(),de("自动签到已完成<br>如需关闭，可在小抄设置中关闭"),await ye(500));}for(let n=0;n<(e==null?void 0:e.totalItemList.length);n++)e.totalItemList[n].type==3&&(e.totalItemList[n].OnSignClick(),await ye(500));if(D.del("DailySignNewView",1e4),!t){const n=D.get("WyqjBigView"),i=nt(n).find(a=>{var s;return ((s=a==null?void 0:a.constructor)==null?void 0:s.name)=="WyqjSmallView"});i==null||i.Init(),i==null||i.onClickTiYanBtn(),D.del("WyqjBigView",3e3);}}catch(e){console.error(e);}}async function Zt(){const t=D.get("TaskDailyView");t.taskPanel.contentSp.drawContaniers.filter(r=>{var o;return (o=r==null?void 0:r.taskvo)==null?void 0:o.CanAward}).forEach(r=>r.onOpClick()),setTimeout(()=>{Array.from({length:3},(r,o)=>{var c;return (c=t.topDayTask)==null?void 0:c.onClickItem(o)}),t.manager.HasJDRewardRed&&t.onceRewardClick(),D.del("TaskDailyView",3e3);},3e3);const e=D.get("IndpdtPanelWindow2");e.enterFunc();const[n,i]=nt(e,!0),a=nt(n).find(r=>{var o;return ((o=r==null?void 0:r.constructor)==null?void 0:o.name)=="NewPlayerSignGiftView"});a==null||a.Init(),a!=null&&a.panel&&fe(()=>D.find(a.panel,"Box","NewPlayerSignGiftItem")).then(r=>{var o;return (o=r==null?void 0:r.filter(c=>{var d;return (d=c==null?void 0:c.taskUserVo)==null?void 0:d.CanAward}))==null?void 0:o.forEach(c=>c.onItemClick())}),i&&(i.Init(),i.clickTab(1),i.curView.taskPanel.contentSp.drawContaniers.filter(r=>{var o;return (o=r==null?void 0:r.taskvo)==null?void 0:o.CanAward}).forEach(r=>r.onOpClick()),setTimeout(()=>{i.clickTab(0),i.tabGroup.btnList[0].redPointIsShow&&i.curView.onClickGetAll();},3e3)),D.del("IndpdtPanelWindow2",1e4);const s=D.get("ActivityWindow");s.enterFunc(),nt(s).flatMap(r=>{try{return nt(r)}catch{return []}}).flatMap(r=>{try{return r.itemArr.map(o=>o.getAwardBtn)}catch{return []}}).filter(r=>r.visible).forEach(r=>r.onClick()),setTimeout(()=>{var r;return (r=D.find("WindowLayer","TaskReqRewardWindow"))==null?void 0:r.Close()}),oe.delay("VuplexWebView",()=>s.Hide(),500),D.del("ActivityWindow",3e3);}function nt(t,e){var n,i,a;return ((a=(i=(n=t==null?void 0:t.tabGroup)==null?void 0:n.btnList)==null?void 0:i.filter(s=>e||s.redPointIsShow))==null?void 0:a.map(s=>{let r=t.viewStack.childInitDataList.findIndex(o=>o==s.value);return r<1&&(r=s.value),t.viewStack.selectedIndex=r,t.viewStack._childUIList[r]}))||[]}function Xt(t=""){const e=D.get("GiftExchangeWindow");e.giftInput.text=t,e.getClicked(),D.del("GiftExchangeWindow",1e4);}const Ot=(()=>{async function t(){var i,a,s,r,o,c,d,f,l,u;const e=((i=this==null?void 0:this.constructor)==null?void 0:i.name)=="MailWindow"?this:D.find("WindowLayer","MailWindow")||D.get("MailWindow"),n=e==null?void 0:e.mailContentWindow;if(Array.isArray(n==null?void 0:n.winArr)){(s=(a=D.class("ActivityManager"))==null?void 0:a.AskRechargeInfoAgain)==null||s.call(a),await ye(1e3);for(const p of (((r=e.manager)==null?void 0:r.systemMailList)||[]).filter(({mid:x})=>x)){let x=p.mid;if(p.title=="道具过期提醒")(o=e.manager)==null||o.DeleteMail(x);else if(p.hasAttachMent){p.read||(c=e.manager)==null||c.ReadMail(x);let E=p.AttachmentType,y=((d=p.attachment.getStringKey("key"))==null?void 0:d[0])??"",g=p.fromUserName&&p.fromUserName!="系统未知好友"?p.fromUserName:"";if(E==1){let B=g?2:0;n.ChangeWindow(B,p),(f=n.winArr[B])==null||f.getBtnClick(),(l=n.winArr[B])==null||l.Close(),n.close();}else E==2&&((u=e.manager)==null||u.SendClientDbsGetgmawardReq(y,x,g));await ye(500),setTimeout(()=>{var B;p.read&&p.Geted&&((B=e.manager)==null||B.DeleteMail(x));},1e3);}}D.del("MailWindow",1e4);}}return async function(e){if(e)return t();const n=await fe(()=>D.find("WindowLayer","MailWindow")),i=n==null?void 0:n.feedbackBtn;if(!(i!=null&&i.textField))return !1;let{x:a,y:s,width:r,height:o,_labelColors:c,_labelPadding:d,textField:{fontSize:f,font:l,bold:u},constructor:p}=i,x=n.myFuncBtn||new p;return Object.assign(x,{label:"一键领取",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:r,height:o,labelSize:f,labelFont:l,labelBold:u,_labelColors:c,_labelPadding:d}),x.pos(a-1.05*r,s),n.myFuncBtn||(x.InitSkin("win_noborder_btn_normal","win_noborder_btn_over","win_noborder_btn_down","win_noborder_btn_disable","win_noborder_btn_over"),n.addChild(n.myFuncBtn=x),n.myFuncBtn.on(Laya.Event.CLICK,n,t)),!0}})(),Yt=(()=>{let t=null,e=0,n="",i,a;const s=d=>{var f,l,u,p;return ((f=d==null?void 0:d.selloutTex)==null?void 0:f.visible)==!1&&((p=(u=(l=d==null?void 0:d.limitCount)==null?void 0:l._innerHTML)==null?void 0:u.includes)==null?void 0:p.call(u,"0/"))};function r(){t=null,document.querySelectorAll('.left input[type="checkbox"]').forEach(d=>{d.checked=!1;});}function o(d=900,f=50){oe.loop("seckill",()=>{var l;if(i=D.find("WindowLayer","ActivityWindow","","WelfareSeckillView")||D.get("WelfareSeckillView"),!((l=i==null?void 0:i.itemList)!=null&&l.length))return null;if(a=i.itemList.find((u,p)=>{var x;return p==t||((x=u.data)==null?void 0:x.goods_id)==t}),typeof(a==null?void 0:a.buyHpItemHandler)!="function")return !1;oe.set("seckill",c,e+50),de(`秒杀连点器启动！
${n}`);},f,d/f>>0,()=>de(`未找到秒杀面板！
连点器秒杀失败！`));}function c(d=300){a==null||a.buyHpItemHandler(),oe.loop("seckill",()=>{a==null||a.buyHpItemHandler(),s(a)||(r(),oe.clear("seckill"));},d);}return (d,f,l="",u=1e3)=>{var p;if(d===!1)r(),oe.clear("seckill"),de("秒杀连点器已取消！");else if(d!==void 0&&d!==t){e=f||Date.now();let x=e-u,E=x-Date.now();t=d,n=l||((p=_.goodsID(d))==null?void 0:p.name)||"",E>1?(de(`${(E/6e4).toFixed(1)}分钟后启动秒杀连点器！
${n}`),oe.set("seckill",o,x)):o();}return t}})();async function ci(t,e="",n,i,a="",s=null){var c,d;if(D.class("PromptLayer")||await fe(()=>D.class("PromptLayer"),1e3,1e3),!t)return null;class r{constructor(l,u,p=!1){Object.assign(this,{label:l,callBack:u,isCancel:p,thisObject:this,btnStyle:p?2:1,btnWidth:42,btnHeigth:29});}Clear(){this.thisObject=this.callBack=this.callBackParams=this.btnDescCallBack=this.btnGrayFunc=null,this.isCancel=this.btnGray=this.btnDescTime=!1;}}var o={content:t,title:e,canClose:!1,clickClose:!0,showIcon:!0,buttonArr:[new r(n,i)],Clear(){var f,l,u;(f=this.buttonArr)==null||f.forEach(p=>p==null?void 0:p.Clear()),(l=this.checkBoxData)==null||l.Clear(),(u=this.countdownData)==null||u.Clear();}};a&&o.buttonArr.push(new r(a,s,!0)),(d=(c=D.class("PromptLayer"))==null?void 0:c.GetInstance())==null||d.ShowConfirmWin(o);}async function $t(t={},e="",n=null){let i=await fe(()=>D.find("PromptLayer","ConfirmWindow"));if(!i)return null;Array.isArray(i)||(i=[i]),i.forEach(a=>{if(!(a!=null&&a.confirmData)||Object.entries(t).some(([r,o])=>a.confirmData[r]!=o))return;typeof n=="boolean"&&a.checkBox&&(a.checkBox.selected=n);let s=a.confirmData.buttonArr.find(r=>r.label==e);s.callBack&&s.thisObject&&s.callBack.apply(s.thisObject,s.callBackParams),a.confirmData.clickClose&&a.RemoveFromParent();});}function vn(t="浩铭er",e=!1){var i;const n=D.get("SzxyHelpWin");return n.enterWindow(t),(i=n==null?void 0:n.btnHelp)!=null&&i.enabled?(n.onClickHelp(),D.del("SzxyHelpWin"),!0):(e&&de("助力已完成，非常感谢！"),D.del("SzxyHelpWin"),!1)}const Ue=0,Ie=65280,We=65282;var Wn="jsjiami.com.v7";function je(t,e){const n=tt();return je=function(i,a){i=i-283;let s=n[i];if(je.zdEtZF===void 0){var r=function(l){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",x="";for(let E=0,y,g,B=0;g=l.charAt(B++);~g&&(y=E%4?y*64+g:g,E++%4)?p+=String.fromCharCode(255&y>>(-2*E&6)):0)g=u.indexOf(g);for(let E=0,y=p.length;E<y;E++)x+="%"+("00"+p.charCodeAt(E).toString(16)).slice(-2);return decodeURIComponent(x)};const f=function(l,u){let p=[],x=0,E,y="";l=r(l);let g;for(g=0;g<256;g++)p[g]=g;for(g=0;g<256;g++)x=(x+p[g]+u.charCodeAt(g%u.length))%256,E=p[g],p[g]=p[x],p[x]=E;g=0,x=0;for(let B=0;B<l.length;B++)g=(g+1)%256,x=(x+p[g])%256,E=p[g],p[g]=p[x],p[x]=E,y+=String.fromCharCode(l.charCodeAt(B)^p[(p[g]+p[x])%256]);return y};je.Diplav=f,t=arguments,je.zdEtZF=!![];}const o=n[0],c=i+o,d=t[c];return d?s=d:(je.Vzrebh===void 0&&(je.Vzrebh=!![]),s=je.Diplav(s,a),t[c]=s),s},je(t,e)}function tt(){const t=function(){return [Wn,"qnyjghsCYjMiamViQ.McomU.IWv7fpeISKGkxSPE==","fmo9W7FcVmogWQD3pYtcRLJdUvO","kmkVbmkwl8oGCmoTjG","W5qqeCoyW5HcWRxdI27dN8o6","sCo0FY5YWQWbsmoQs8oAna","WRJcHr7cVaXItJJdPg7cJh4","W4JcNdZcTYzzE8or"].concat(function(){return ["WO4Mk8oUW5xdMWOK","p1RdHuVdHmo3BCoklqtdIH3cGG","ptuCWRmaW6b9WRxdRW","E0RcISoOeZpdPffRWOCG","uGxdMcmTzmk/B0VdPmoqWQ3cHa","WOhcOmkabCoaW49GuhXiW4W","sSokp8khuHRcLXO","W7BdQIZcRSoSmSoDWRbwymkR"].concat(function(){return ["WQfBWQZcMhxcK8knrJ0clG","ztBdS8oqW6FcLmkyW77cTZ8bcG","W6VcHmoEWOZcH8o4WROFWP/cVSkD","WRqDW57cNCkgifzgW5xdPmksv3e","yHr+ESoGwmo2CmoadLCYWQa"]}())}())}();return tt=function(){return t},tt()}((function(t,e,n,i,a,s,r){return t=t>>1,s="hs",r="hs",function(o,c,d,f,l){const u=je;f="tfi",s=f+s,l="up",r+=l,s=d(s),r=d(r),d=0;const p=o();for(;[]&&--i+c;)try{f=parseInt(u(295,"axVt"))/1+-parseInt(u(283,"u5Ld"))/2+parseInt(u(284,"bC)X"))/3*(parseInt(u(296,"e$!x"))/4)+parseInt(u(289,"oAX8"))/5*(parseInt(u(287,"[J0P"))/6)+-parseInt(u(301,"OylK"))/7+-parseInt(u(288,"66pA"))/8*(parseInt(u(285,"c3Vy"))/9)+-parseInt(u(286,"tVp$"))/10*(-parseInt(u(298,"pRYO"))/11);}catch{f=d;}finally{if(l=p[s](),t<=i)d?a?f=l:a=l:d=l;else if(d==a.replace(/[yVhgIeMYCPkqWQxfGKpSEnU=]/g,"")){if(f===c){p["un"+s](l);break}p[r](l);}}}(n,e,function(o,c,d,f,l,u,p){return c="split",o=arguments[0],o=o[c](""),d="reverse",o=o[d]("v"),f="join",o[f]("")})}))(376,849340,tt,190),tt&&(Wn=tt);const W={userID:0,account:"",nickname:"",inviteName:"",curOfficerLv:1,v:![],UsedGeneralSkinID:{UsedGeneralSkinID:{}},isFrameAdd:![],goods:[],lotteries:[],closeIframe:![],trialTime:0,autoBotStatus:30,autoBotInfinite:![],guildVIP:{},recGoods:{}};let It=[["padding","PADDING",0],["skinSwitch","SKIN_SWITCH",!1],["generalSwitch","GENERAL_SWITCH",!1],["skinStateSwitch","SKIN_STATE_SWITCH",!0],["skinStateBlockSwitch","SKIN_STATE_BLOCK_SWITCH",!1],["skinPaperSwitch","SKIN_PAPER_SWITCH",!0],["allPaperSwitch","ALL_PAPER_SWITCH",!1],["cardBackSwitch","CARD_BACK_SWITCH",!1],["seatUISwitch","SEAT_UI_SWITCH",!0],["autoSignSwitch","AUTO_SIGN_SWITCH",!1],["autoSignSkipSwitch","AUTO_SIGN_SKIP_SWITCH",!1],["autoInviteSwitch","AUTO_INVITE_SWITCH",!1],["autoDrumSwitch","AUTO_DRUM_SWITCH",!1],["autoWuJiangSwitch","AUTO_WUJIANG_SWITCH",!1],["autoKanShuSwitch","AUTO_KANSHU_SWITCH",!1],["autoYueKaSwitch","AUTO_YUEKA_SWITCH",!1],["skipWindowSwitch","SKIP_WINDOW_SWITCH",!1],["skipADSwitch","SKIP_AD_SWITCH",!0],["CDKNotificationSwitch","CDK_NOTIFICATION_SWITCH",!0],["killEffectSwitch","KILL_EFFECT_SWITCH",!1],["wuxieSwitch","WUXIE_SWITCH",!1]];const ue=new Proxy(Object.fromEntries(It.map(([t,e,n])=>[t,Oe(e,n)])),{set:function(t,e,n){let i=Object.fromEntries(It)[e]??e;Xe(i,n);let a={};return a.username=W.userID,a.settingKey=e,a.value=n,Nt(Jn(a),300),t[e]=n,e=="padding"&&(window.padding=n),!0}}),z={seatWidthPercent:.3,firstUpdateSeatUI:!1,scoreFrameTotal:10,scoreFrameIndex:0,paddingLeft:10,paddingRight:15,paddingTop:30,paddingBottom:0,paddingLeftTopExtra:0,selectStarted:!1,leftRightTop:20,stackCardAreaHeight:0,stackCardAreaY:0,MAX_SEAT_WIDTH:149,inPopFirstTarget:!1,unscaledWidth:146,unscaledHeight:172,MAX_HEIGHT:180,MAX_WIDTH:150,scale:1,selfSeatUiUnscaledHeight:178,rightBarWidth:221,seatUIs:[],cities:[]},_={},Ce={};function In(t){Object.assign(Ce,t);}const ft=Oe("gameRecord",{}),Be={},oe={tasks:{},shift:0,overdue:!0,async now(){if(!this.overdue)return Date.now()+this.shift;this.overdue=!1,this.delay("timer",()=>{this.overdue=!0;},18e5);const t=["https://worldtimeapi.org/api/timezone/Etc/UTC","https://timeapi.io/api/Time/current/zone?timeZone=UTC"];for(const e of t)try{const n=await fetch(e);if(!n.ok){console.error(`Error fetching time from ${e}: ${n.statusText}`);continue}const i=await n.json();let a;return i.utc_datetime?a=new Date(i.utc_datetime).getTime():i.dateTime&&(a=new Date(i.dateTime).getTime()),this.shift=a-Date.now(),a}catch(n){console.error(`Error fetching time from ${e}:`,n);continue}return de("使用当前电脑时间"),Date.now()+this.shift},loop(t,e,n,i=1/0,a){this.clear(t);let s=setInterval(()=>{e(),--i<=0&&(this.clear(t),typeof a=="function"&&a());},n);return this.tasks[t]={intervalId:s,callback:e},this.tasks[t].intervalId},delay(t,e,n){this.clear(t);let i=setTimeout(()=>{this.clear(t),e();},n);return this.tasks[t]={timeoutId:i,callback:e},this.tasks[t].timeoutId},set(t,e,n,i=18e5){(async function a(){this.clear(t);const s=Date.now(),r=(n??s)-s;if(r>1){let o=setTimeout(a.bind(this),r<i?r:i);this.tasks[t]={timeoutId:o,callback:e};}else e();}).call(this);},trigger(t){if(!this.tasks[t])return null;let{timeoutId:e,callback:n}=this.tasks[t];return e&&(clearTimeout(e),delete this.tasks[t]),typeof n!="function"?!1:(n(),!0)},clear(t){t?Array.isArray(t)||(t=[t]):t=Object.keys(this.tasks),t.filter(e=>this.tasks[e]).map(e=>{if(!this.tasks[e])return null;let{intervalId:n,timeoutId:i}=this.tasks[e];return i?clearTimeout(i):n&&clearInterval(n),delete this.tasks[e],e});}},U=new Proxy({turn:0,round:0,phase:0,currentID:void 0,isGameStart:!0,isPassed:!1,spellSpace:{},domContainer:["temp","phase","round","turn","game","long"].reduce((t,e,n)=>(t[e]=t[n]=[],t),{}),end(t){(this.isGameStart&&!this.isPassed||t===!1)&&(this.isGameStart=!1,this.isPassed=!0,z.seatUIs=[],z.friendGeneral=0,Pt(null),D.reset(),document.querySelectorAll(".mizhu").forEach(e=>e.style.display="none"),console.warn("游戏已结束！")),t&&this.isPassed&&(this.isPassed=!1,this.turn=0,this.round=0,this.phase=0,this.currentID=void 0,this.spellSpace={},Gt(W.userID),M.reset(),console.warn("游戏已重置！游戏即将开始！"),Ve(()=>D.init()));},ready(t){this.end(!0),M.cardList=t;let e=_.cardIDsOrder.filter(i=>t.includes(i)),n=e.concat(t.filter(i=>!e.includes(i))).filter(Boolean);me.init(n),ne.init(n,"2-255"),M.isGuoZhan=t.includes(1150),M.isDouDiZhu=t.includes(13005),M.isShanHeTu=t.includes(20100),M.isShanHeTu&&(Be.sanBanFu=0),Mi(),console.warn("牌堆初始化完成");},start(){this.isGameStart||!M.size||(this.isGameStart=!0,this.isPassed=!1,console.warn("游戏开始！["+M.seatIDs+"] > "+M.mySeats),Ri(),_i(M.size),ne.draw());},enter(t,e,n){var i,a,s,r,o,c,d,f,l,u,p;if(t>0)this.turn=t,this.round=0,this.clear("turn"),t==1&&(this.clear("game"),this.start());else {e==0?(this.currentID=n,this.round++,this.phase=0,[7011,3090,2143,3271].forEach(y=>delete this.spellSpace[y]),document.getElementById("suit").innerText="",document.getElementById("boTu").innerText="",document.getElementById("result").innerHTML="",ne.draw("2-255"),this.clear("round"),W.autoBotSwitch===!0&&D.limit>0&&((r=(s=(a=(i=D.gamescene)==null?void 0:i.topMenu)==null?void 0:a.areaServerLabel)==null?void 0:s.text)!=null&&r.includes("身份"))&&(this.currentID==((u=(l=(f=(d=(c=(o=D.gamescene)==null?void 0:o.seatContainer)==null?void 0:c.seatUIs)==null?void 0:d.filter(y=>y.seat.currentHp>0))==null?void 0:f.map(y=>y.seat.index))==null?void 0:l.slice(-1))==null?void 0:u[0])?D.auto(3):this.currentID!=M.mySeats[0]&&D.auto(!0))):this.phase++,this.clear("phase");let x=document.getElementById("phrase"),E=parseInt((p=x.innerText.match(/\(([0-9])\)$/))==null?void 0:p[1]);this.phase==E?x.innerText=x.innerText.replace(/(回合)?(.{2,3})(阶段)? ?\(([0-9])\)$/,`$2>${["开始时","准备","判定","摸牌","出牌","弃牌","结束","结束时","结束后"][e]}($4)`):x.innerText=`${["回合开始时","准备阶段","判定阶段","摸牌阶段","出牌阶段","弃牌阶段","结束阶段","回合结束时","回合结束后"][e]} (${this.phase})`;}},clear(t,e,n){let i=this.domContainer[t];for(let a=i.length-1;a>=0;a--)n===void 0&&e!==i[a].SpellID&&i[a].count--,(!(i[a].count>0)||e===i[a].SpellID&&n===i[a].SeatID)&&(i[a].element.remove(),i.splice(a,1));}},{ownKeys(t){return Reflect.ownKeys(t.spellSpace)},getOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t.spellSpace,e)},deleteProperty(t,e){return Reflect.deleteProperty(t.spellSpace,e)},get(t,e,n){return e in t?t[e]:Reflect.get(t.spellSpace,e,t.spellSpace)},set(t,e,n,i){return e in t?t[e]=n:Reflect.set(t.spellSpace,e,n,t.spellSpace),!0}}),M={cardList:[],seatUIs:[],seatIDs:[],orderIDs:[],mySeats:[],generals:{},shift:0,isShanHeTu:!1,isGuoZhan:!1,isDouDiZhu:!1,size:void 0,firstID:void 0,seatPos(t=8){return {0:[],1:[0],2:[0,4],3:[0,3,5],4:[0,1,4,7],5:[0,1,3,5,7],6:[0,1,3,4,5,7],7:[0,1,2,3,5,6,7],8:[0,1,2,3,4,5,6,7]}[t]},dealCard:()=>null,reset(){this.cardList=[],this.seatUIs=[],this.seatIDs=[],this.orderIDs=[],this.mySeats=[],this.generals={},this.shift=0,this.isShanHeTu=!1,this.isGuoZhan=!1,this.isDouDiZhu=!1,this.size=void 0,this.firstID=void 0,this.dealCard=(t,e)=>{t=parseInt(t),this.orderIDs.includes(t)||(this.firstID===void 0&&(this.firstID=t,console.warn("[PubGsCMoveCard]先手位置:"+t)),this.orderIDs.push(t),e>0&&!this.mySeats.includes(t)&&(this.mySeats.length?this.mySeats.push(t):this.setMyID(t)),this.update(!1,this.orderIDs)),this.orderIDs.length==this.size&&(this.dealCard=()=>null);};},getOrder(t){var i;if(this.seatUIs.length)return (i=this.seatUIs.find(a=>a.seatID==t))==null?void 0:i.order;let e=this.seatIDs.indexOf(this.firstID??this.seatIDs[0])%this.size,n=this.seatIDs.indexOf(parseInt(t));if(n!==-1)return (n-e+this.size)%this.size},getIndex(t){if(this.seatUIs.length)return this.seatUIs.findIndex(a=>a.seatID==t);let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,n=this.seatIDs.indexOf(parseInt(t));if(n<0)return;let i=(n-e+this.size)%this.size;return this.seatPos()[i]},getID(t){var a;if(this.seatUIs.length)return (a=this.seatUIs[this.seatPos().indexOf(parseInt(t))])==null?void 0:a.seatID;let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,n=this.seatPos().indexOf(parseInt(t));if(n<0)return;let i=(n+e+this.size)%this.size;return this.seatIDs[i]},sequence(t){let e=this.seatIDs.indexOf(t);return e<0?[]:this.seatIDs.slice(e).concat(this.seatIDs.slice(0,e))},update(t,e=this.orderIDs){if(e=e.slice(),e.length>this.seatIDs.length||e.length==this.seatIDs.length&&t!==!1)this.seatIDs=e,this.size=e.length;else if(t){for(let n=e.length;n<this.size;n++)e.push(((e[n-1]??-1)+1)%this.size);this.seatIDs=e,this.size=e.length;}this.draw();},fromUI(){var e,n,i,a,s,r;let t=(a=(i=(n=(e=D.gamescene)==null?void 0:e.seatContainer)==null?void 0:n.seatUIs)==null?void 0:i.map(o=>o.seat))==null?void 0:a.filter(o=>!o.isHide);(s=t==null?void 0:t.filter(o=>o.fixedViewId))!=null&&s.length&&(this.seatUIs=t.map(o=>({seatID:o.index,order:o.fixedViewId-1,seat:o})),this.size=this.seatUIs.length,this.firstID=((r=this.seatUIs.find(o=>o.order==0))==null?void 0:r.seatID)??this.firstID,this.seatIDs=this.seatUIs.map(o=>o.seatID),this.setMyID(this.seatUIs[0].seatID),this.draw());},setMyID(t){if(t!==void 0&&this.mySeats[0]!==t){let e=this.mySeats.indexOf(t);e>-1&&this.mySeats.splice(e,1),this.mySeats.unshift(t);}},setGeneral(t,e,n=0,i=!1){if(!_.generalDict[e])return;this.generals[t]||(this.generals[t]=Array(this.isGuoZhan?2:1).fill(0)),this.generals[t][n]=e;let a=this.getOrder(t),s=document.getElementById(a+1);s&&s.style.setProperty("--No-content",`"${M.name(t)}"`);},find(t,e,n=!1){var i;return Array.isArray(e)||(e=[e]),(i=this.generals[t])==null?void 0:i.find(a=>e.find(s=>{var r;return n?(r=_.skinMap[a])==null?void 0:r.has(s):a==s}))},name(t,e=!0){var a,s,r,o;let n=this.getOrder(t);if(n===void 0)return "";let i=((a=this.generals[t])==null?void 0:a.length)>1?this.generals[t].map(c=>_.generalDict[c]):[(o=(r=(s=this.seatUIs.find(c=>c.seatID==t))==null?void 0:s.seat)==null?void 0:r.general)==null?void 0:o.CardName];return e===null&&(i==null?void 0:i.length)!=1&&(i=[]),(i!=null&&i.some(Boolean)?i.map(c=>c||"暗").join("丨"):"一二三四五六七八"[n]+"号位")+(e?"丨"+"一二三四五六七八"[n]:"")},draw(){this.seatIDs.forEach(t=>{let e=this.getOrder(t),n=document.getElementById(e+1);if(!n)return;let i=M.name(t);n.style.setProperty("--No-content",`"${i}"`);}),Pt();}},me=new Proxy({name:{},color:Array.from({length:7},()=>new Set),number:Array.from({length:14},()=>new Set),query:new Set,select:{name:new Set,color:new Set,number:new Set},cards:[],QCARD:class{constructor(t,e,n,i,a){this.id=t,this.name=e,this.color=n,this.number=i,this.type=a,this.key=-1;}plot(t){let e=this._button;if(!e){if(e=this._button=document.createElement("button"),e.className=this.color<=2?"shoupai R":"shoupai",!this.id)return e;e.id="Qcard"+this.id,e.innerHTML=`<span>${En(this.color)+Ne(this.number)}</span><br>${this.name.substring(0,2)}`;}return (this.key!==t||t==1)&&(this.key=t,e.style.backgroundColor=t===0?"":t===1?"cyan":"#23201d",e.title=t===0?"牌堆":t===2?"弃牌堆":ie.findKZ(this.id).zones.map(n=>{let[i,a,s]=n.split("-").map(r=>parseInt(r));return ne.name(a,i,null,s,s)}).join("/")),e}},[Symbol.iterator]:function*(){for(let t of this.cards)t!==void 0&&(yield t);},init(t){this.name={},this.color=Array.from({length:7},()=>new Set),this.number=Array.from({length:14},()=>new Set),this.type=Array.from({length:4},()=>new Set),this.query=new Set,this.select={name:new Set,color:new Set,number:new Set},this.cards=[],t.forEach(e=>{let{name:n,color:i,number:a,type:s}=ae[e];n in this.name||(this.name[n]=new Set),this.name[n].add(e),this.color[i].add(e),this.number[a].add(e),this.type[s].add(e),i==3&&a>=2&&a<=9&&this.number[0].add(e),n.match(/^(冰|火|雷)?杀$/)&&this.color[Math.ceil(i/2)+4].add(e),this.cards[e]=new this.QCARD(e,n,i,a,s);});},onquery(t,e){if(this.select[t].delete(e)){if(this.select[t].size){Array.from(this[t][e]).forEach(n=>this.query.delete(n)),this.draw();return}}else this.select[t].add(e);this.query=["name","number","color"].filter(n=>this.select[n].size).reduce((n,i)=>new Set(Array.from(this.select[i]).flatMap(a=>Array.from(this[i][a])).filter(a=>!n.size||n.has(a))),new Set),this.draw();},queryone(t,e){this.query=new Set(Array.from(this[t][e])),this.draw();},draw(){const t=document.getElementById("cardTypeDetail");if(t.innerHTML="",this.query.size==0)return;let e=new Set(ne.unknown),n=new Set(ne.qipai),i=_.cardIDsOrder.filter(a=>this.query.has(a)).reduce((a,s)=>(e.has(s)?a[0].push(s):n.has(s)?a[2].push(s):a[1].push(s),a),[[],[],[]]);[0,1,2].forEach(a=>i[a].forEach(s=>t.appendChild(this.cards[s].plot(a))));}},{get(t,e,n){return typeof e=="number"||typeof e=="string"&&!isNaN(e)?t.cards[e]:Reflect.get(...arguments)}}),J=class J{static label(e){if(J.groups.has(e))return J.groups.get(e);const n=J.LABELs.shift();return J.groups.set(e,n),n}constructor(e,n=null,i="12-255",a=null,s=null){var r;this._key=e,this.zone=i,this.id=n??((r=this.next)==null?void 0:r.id)??this.key,this.next=a,this.prev=s,J.nodes.has(e)||J.nodes.set(e,new Set),J.nodes.get(e).add(this);}get head(){let e=this;for(;e.prev;)e=e.prev;return e}get end(){let e=this;for(;e.next;)e=e.next;return e}get key(){return this._key}set key(e){this._key!=e&&(J.nodes.get(this._key).delete(this),this._key=e,J.nodes.has(e)||J.nodes.set(e,new Set),J.nodes.get(e).add(this));}static get(e){return J.nodes.has(e)?Array.from(J.nodes.get(e)):[]}static init(e,n){return J.key=0,J.nodes=new Map,J.groups=new Map([[0,"?"]]),J.LABELs=Array.from({length:62},(i,a)=>String.fromCharCode(a+65)),e.map(i=>new J(0,i,n))}toString(){return this.next?this.prev?this.key+"<"+this.next.toString():this.zone+":"+this.key+"<"+this.next.toString():"["+this.id+"]"+(this.key>0?ae[this.id].ncn:"？")}plot(e){var i;if(this.key<0&&this.key%2==0&&this.next)return this.next.plot(e);let n=this._button;return n||(n=this._button=document.createElement("button"),n.className="shoupai"),n.disabled=this.key<=0&&this.key%2==0,(e||this.key!=((i=n==null?void 0:n.dataset)==null?void 0:i.key)||this.key<=0&&J.label(this.key)!=n.innerHTML)&&(n.className="shoupai",n.id="card"+this.id,n.dataset.key=this.key,this.key>0?(n.classList.remove("G"),ae[this.id].color>2?n.classList.remove("R"):ae[this.id].color>0&&n.classList.add("R"),n.style.color="",n.style.fontSize="",n.title=new ne("unknown").cards.has(this)?J.findKZ(this.id).zones.map(a=>{let[s,r,o]=a.split("-").map(c=>parseInt(c));return ne.name(r,s,null,o,o)}).join("/"):ae[this.id].ncn,n.innerHTML=`<span>${ae[this.id].cn}</span><br>${ae[this.id].name.substring(0,2)}`):(n.classList.add("G"),n.innerHTML="？")),n}swap(e){if(!e||e==this)return this;for([this.key,e.key]=[e.key,this.key],[this.id,e.id]=[e.id,this.id],[this.next,e.next]=[e.next,this.next],this.next&&(this.next.prev=this),e.next&&(e.next.prev=e);e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;for(e.plot(!0),ne.draw(e.zone),e=this;e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;return e.plot(!0),ne.draw(e.zone),this}create(e){const n=new J(this.key,this.id,this.zone,this.next,this);return this.key=e,this.next&&(this.next.prev=n),this.next=n,this}delete(){let e=!1;if(this.next){let n=this.next;return this.key=n.key,this.id=n.id,this.next=n.next,n.next?n.next.prev=this:new ne("unknown").cards.delete(n)&&(e=!0,this.prev&&new ne("unknown").cards.add(this)),J.nodes.get(n.key).delete(n),e}else return this.key===0?(this.key=this.id,Rt(this.id,this.key),!0):null}destroy(e){let n=!1,i=this.key;for(;i<0;)this.delete()&&(n=!0),J.unpack(i)&&(n=!0),i=this.key;return this.key!=e&&(this.key=e??this.id,Rt(this.id,this.key)),this.prev?J.unpack(this.prev.key):(this.plot(!0),ne.draw(this.zone)),n&&ne.draw("unknown"),this}identify(e,n=null){if(n!==null&&console.count("REidentify"+n+">"+this),this.id==e)return this.key>0?this:(n&&(this.end.id=n),this.destroy(),this);let i,a=new Set([this.key]),s=[[this.key,[]]];for(;s.length>0;){let[r,o]=s.shift();if(i=J.find(r,e),i){o.concat(i).reduce((c,d)=>c.swap(d).next,this);break}for(let c of J.get(r).filter(d=>d.next))a.has(c.next.key)||(a.add(c.next.key),s.push([c.next.key,o.concat(c)]));}if(i){if(n){let r=this;for(r.id=n;r.next;)r=r.next,r.id=n;}return this.destroy(),this}else {if(e>0)return this.identify(0,e);console.error("identify error: "+(e>0?e:n)+">"+this);}return null}static move(e,n){Array.isArray(e)||(e=[e]);let{turn:i,round:a,phase:s}=U;return e==null||e.forEach(r=>Object.assign(r,{zone:n,turn:i,round:a,phase:s})),Array.from(new Set(e==null?void 0:e.map(r=>r.key))).filter(r=>r<=0).map(r=>J.unpack(r)).length?ne.draw("unknown"):Array.from(new Set(e==null?void 0:e.map(r=>r.key))).filter(r=>r>0&&me.query.has(r)).forEach(r=>{me[r].plot(n=="2-255"?2:1);}),e}static pack(e,n,i){if(!((e==null?void 0:e.length)>1&&(e!=null&&e.every(r=>r))))return;let a=new Set(e.map(r=>r.key));if(a.size===1)return [...a][0];J.key=J.key-1;let s;if(i){if(new Set(e.map(c=>c.head.zone)).size===1)return null;let o=Array.from(J.nodes.keys()).filter(c=>c<0);for(let c=0;c>=J.key;c--)if(!(o.includes(c*2-1)||o.includes(c*2-2))){s=c*2-i;break}o.filter(c=>c>s).sort((c,d)=>c-d).forEach(c=>{J.get(c).forEach(d=>{d.key=d.key-2,d.head.plot(!0);});}),s=-i;}else s=J.key*2-(n?2:1);return e.forEach(r=>{r.create(s),new ne("unknown").cards.delete(r),n||new ne("unknown").cards.add(r.end);}),ne.draw("unknown"),s}static unpack(e){if(e>0)return !0;const n=J.get(e);let i=new Set(n.map(s=>{var r;return (r=s.next)==null?void 0:r.key})),a=new Set(n.map(s=>s.head.zone));if(n.length===1||!a.has("1-255")&&(a.size===1||i.size===1&&e!==0)){J.groups.has(e)&&(J.LABELs.unshift(J.groups.get(e)),J.groups.delete(e));let s=n.map(r=>r.delete()).some(Boolean);return Array.from(new Set(n.filter(r=>r.prev).map(r=>r.prev.key))).forEach(r=>J.unpack(r)),n.filter(r=>!r.prev).forEach(r=>r.plot(!0)),Array.from(a).forEach(r=>ne.draw(r)),s}else return !1}static find(e,n){let i=J.get(e).find(a=>a.id==n);if(i===void 0&&e!=0){let a=J.get(0).find(s=>s.id==n);a&&(i=J.get(e).find(s=>s.end.key==0),i!==void 0&&a.swap(i.end));}return i}static findIDs(e,n=!1,i=new Set,a=new Set){return a.add(e),e>0||!n&&e==0?i.add(e):(n||e%2!=0)&&J.get(e).forEach(s=>{if(s.next){let r=s.next.key;a.has(r)||J.findIDs(r,n,i,a);}else n&&i.add(s.id);}),Array.from(i)}static findKZ(e,n=!1,i=new Set,a=new Set){let s=e;return !(s instanceof J)&&e>0&&(s=J.get(e)[0]),s instanceof J||(s=J.get(0).find(r=>r.id==e)),s instanceof J&&(!n&&s.key==0?(a.add(""),i.add(0)):(a.add(s.head.zone),i.has(s.key)||(i.add(s.key),(s.key<0||n&&s.key==0)&&J.get(s.key).forEach(r=>{r!=s&&J.findKZ(r,n,i,a);})),s.prev&&J.findKZ(s.prev,n,i,a))),{keys:Array.from(i),zones:Array.from(a)}}};Ye(J,"key",NaN),Ye(J,"nodes",new Map),Ye(J,"groups",new Map([[0,"?"]])),Ye(J,"LABELs",Array.from({length:50},(e,n)=>String.fromCodePoint(n<20?9312+n:n<35?12881-20+n:12977-35+n)));let ie=J;const we=class we{static get paidui(){return Array.from(new Set(Array.from(ie.get(0),({id:e})=>e).concat((we.obj["1-255"]??[]).map(({id:e})=>e))))}static get qipai(){return (we.obj["2-255"]??[]).filter(({key:e})=>e>0).map(({id:e})=>e)}static get unknown(){return Array.from(ie.get(0),({id:e})=>e)}static shoupai(e){return (we.obj["5-"+e]??[]).filter(({key:n})=>n>0).map(({id:n})=>n)}constructor(e,n=5,i=Ie,a=null,s=null,r=null){var o;typeof e=="number"?(this.id=e,this.zone=n,this.id==0&&[0,1,2,3,9,12].includes(this.zone)&&(this.id=255),this.zone==9&&(this.zone=1),this.zone==4&&(this.id=this.id+"-"+(r||s||0)),this.zone==8&&(this.id="-"+(s||r||0)),this.zoneID=this.zone+"-"+this.id):typeof e=="string"?[this.zoneID,this.zone,this.id]=e.match(/(.*?)-(.*)/)??[e,e,""]:(o=e==null?void 0:e.every)!=null&&o.call(e,c=>c instanceof ie),this.zoneID in we.obj||(we.obj[this.zoneID]=[]),this.zone==1?this.pos=i===Ie?Ue:i===Ue?Ie:i:this.zone===10?this.pos=i:this.pos=We,this.count=a;}show(e=[]){if(isNaN(ie.key))return [];if(Array.isArray(e)||(e=[e]),e.filter(a=>a>0).length==0)return [];let n=[],i=e.slice();if(this.pos==Ie)n=this.cards.slice(-e.length).map(a=>a.identify(i.shift()));else if(this.pos!=We)n=this.cards.slice(this.pos,e.length).map(a=>a.identify(i.shift()));else if(this.zone!=1){let a=i.map(s=>ie.findKZ(s,!0).keys);this.cards.slice().sort((s,r)=>r.key-s.key).some(s=>{if(i.filter(r=>r>0).length==0)return !0;a.some((r,o)=>{if(r.includes(s.key))return n[o]=s.identify(i[o]),r.length=0,i[o]=null,!0});}),i.forEach((s,r)=>{var o,c,d,f;if(s&&(n[r]=(o=this.cards.find(l=>l.id==0))==null?void 0:o.identify(s),n[r]===void 0&&(n[r]=(c=this.cards.find(l=>l.key==0))==null?void 0:c.identify(s)),n[r]===void 0)){let l=ie.get(s)[0];l?(n[r]=(f=(d=this.cards.find(u=>!n.includes(u)))==null?void 0:d.swap(l))==null?void 0:f.identify(s),console.error(this.zoneID+"SWAP Card ["+s+"] Shown")):(n[r]=new ie(s,s,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+s+"] Shown"));}});}return we.draw(this.zoneID),n}remove(e=[],n,i){if(isNaN(ie.key))return [];Array.isArray(e)||(e=[e]),i&&(this.count=i);let a=[],s=e.slice();if(this.pos==Ie)a=this.cards.splice(-this.count);else if(this.pos!=We)a=this.cards.splice(this.pos,this.count),this.zone==1&&[3208,7011,987,988].includes(n)&&(a=a.reverse());else if(e.filter(c=>c>0).length>0){let c=s.map(f=>ie.findKZ(f,!0).keys);this.cards.slice().reverse().sort((f,l)=>l.key-f.key).some(f=>{if(s.filter(l=>l>0).length==0)return !0;c.some((l,u)=>{if(l.includes(f.key))return a[u]=this.cards.splice(this.cards.indexOf(f),1)[0],l.length=0,s[u]=null,!0});}),s.forEach((f,l)=>{var p;if(!f)return;let u=this.cards.findIndex(x=>x.id==0);if(u===-1&&(u=this.cards.findIndex(x=>x.key==0)),u>-1)a[l]=this.cards.splice(u,1)[0];else {let x=ie.get(f)[0],E=this.cards.findIndex(y=>!a.includes(y));x&&E>=0?(a[l]=(p=this.cards.splice(E,1)[0])==null?void 0:p.swap(x),console.error(this.zoneID+"SWAP Card ["+f+"] Moved")):(a[l]=new ie(f,f,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+f+"] Moved"));}});}else if(this.count==this.length||this.size==1)a=this.cards.splice(0,this.count);else if(this.zone==1||this.zone==2){var r=[...this.cards.filter(c=>c.key<=0).sort((c,d)=>d.key-c.key),...this.cards.filter(c=>c.key>0)];if([11104,3488,862].includes(n)){var o=new Set(r.map(c=>c.key));n==11104?o=new Set(Array.from(o).filter(c=>ie.get(c).some(d=>{var f;return (f=me.type[3])==null?void 0:f.has(d.id)}))):n==3488?o=new Set(Array.from(o).filter(c=>ie.get(c).some(d=>{var f,l,u;return ((f=me.name.雷杀)==null?void 0:f.has(d.id))||((l=me.name.火杀)==null?void 0:l.has(d.id))||((u=me.name.冰杀)==null?void 0:u.has(d.id))}))):n==862&&(o=new Set(Array.from(o).filter(c=>ie.get(c).some(d=>me.number[6].has(d.id))))),r=r.filter(c=>o.has(c.key));}a=r.slice(0,this.count),a.some(c=>c.key>0||c.key%2)&&ie.pack(r,!0),a.forEach(c=>this.cards.splice(this.cards.indexOf(c),1));}else ie.pack(this.cards),a=this.cards.splice(0,this.count);return a.length!=this.count&&Array.from({length:this.count-a.length},()=>(console.error(this.zoneID+" New Card Moved"),a.push(new ie(0,0,this.zoneID)))),e.filter(c=>c>0).length==this.count?e.forEach((c,d)=>{var f;return (f=a[d])==null?void 0:f.identify(c)}):a.filter(c=>c.key>0).length==this.count&&a.forEach(({id:c},d)=>{e[d]=c;}),we.draw(this.zoneID),a}add(e){if(isNaN(ie.key))return;let n=ie.move(e,this.zoneID).slice();return this.pos==We?this.cards.splice(this.cards.length,0,...n):this.pos==Ie?this.cards.splice(this.cards.length,0,...n):this.cards.splice(this.pos,0,...n.reverse()),we.draw(this.zoneID),e}set(e){isNaN(ie.key)||(we.obj[this.zoneID]=ie.move(e,this.zoneID),we.draw(this.zoneID));}get cards(){return we.obj[this.zoneID]??[]}get length(){var e;return ((e=this.cards)==null?void 0:e.length)??0}get size(){var e;return new Set(((e=this.cards)==null?void 0:e.map(n=>n.key))??[]).size}static init(e,n){we.obj={unknown:new Set},we.obj[n]=ie.init(e,n);}static draw(e){var d,f;if(isNaN(ie.key))return;if(e===void 0){Object.keys(we.obj).filter(l=>l.split("-")[0]=="5").forEach(l=>we.draw(l));return}let n=null,i=null,[a,s,r]=((d=e.split("-"))==null?void 0:d.map(Number))??[];if(e=="unknown")n="knownCards";else if(a==1)n="paiduiCards";else if(a==2)n="qipaiCards";else if(a==5)n=String(M.getOrder(s)+1);else if(a==4&&r in _.markSpell)n="mark"+e;else return;i=document.getElementById(n);let o=Array.from(we.obj[e]??[]);if(a==2){let{turn:l,round:u,phase:p}=U;o=o.filter(x=>x.turn==l&&x.round==u);}if(e=="unknown"&&(Array.from(new Set(o.map(l=>l.head.zone))).forEach(l=>we.draw(l)),me.draw()),!o||o.filter(l=>l.key>0||l.key%2!==0).length==0){i&&(i.classList.contains("markedCard")?i.remove():i.querySelectorAll(":scope>.shoupai").forEach(l=>l.remove()));return}if(i)i.querySelectorAll(":scope>.shoupai").forEach(l=>l.remove());else if(a==4)(f=document.getElementById(String(M.getOrder(s)+1)))==null||f.insertAdjacentHTML("beforeend",`<div id="${n}" class="markedCard"><span class = 'mark'>${_.markSpell[r]}</span></div>`),i=document.getElementById(n);else return;e!="1-255"&&o.sort((l,u)=>l.key>0&&u.key>0?0:u.key-l.key),a==4&&(i=i.firstElementChild||i);var c=1;o.map(l=>l.plot(e=="unknown")).reverse().forEach((l,u,p)=>{var x,E;if(l.dataset.key==((E=(x=p[u+1])==null?void 0:x.dataset)==null?void 0:E.key))c++;else {c>1&&(l.style.fontSize="",l.innerHTML=`<span>${l.innerHTML}×</span><br>${c}`);let y=parseInt(l.dataset.key);if(y<0){let g=ie.findIDs(y).sort((B,ee)=>B>0&&ee>0?0:ee-B);l.title=c+"张："+g.map(B=>ae[B].ncn).join("/"),e!=="1-255"&&g.length<5&&(l.style.fontSize="",l.innerHTML=g.map(B=>{var ee,k;return ((k=(ee=ie.get(B)[0])==null?void 0:ee.plot())==null?void 0:k.outerHTML)||""}).join(""));}a==4?i.insertAdjacentElement("afterend",l):i.insertAdjacentElement("afterbegin",l),c=1;}});}static name(e,n,i,a,s){var o;let r;if(isNaN(n))return "?";if(n==1&&e==0)return "牌堆(游戏开始前) ";if(n==1&&e==255)r="牌堆";else if(n==2)r="弃牌堆";else if(n==3)r="处理区";else if(n==4)r="标记";else if(n==5)r="手牌";else if(n==6)r="装备";else if(n==7)r="判定区";else if(n==8)r="弹窗";else {if(n==9)return "洗牌";n==10?r="交换临时区":n==11?r="弃牌临时区":n==12?r="回收区":n==0&&(r="游戏外");}return ([0,1,2,3,8,11,12].includes(n)?"":M.name(e,!1))+([4,8].includes(n)?"["+((o=_.spellDict[n==8?s:a||s||0])==null?void 0:o.name)+"]":"")+(r??"zone"+n)+({[Ue]:"底",[Ie]:"顶",[We]:"*"}[i]??(i?":"+i:""))}};Ye(we,"obj",{unknown:new Set});let ne=we;function di(t=[],e=[]){const n=new Map;return t.forEach(i=>{n.set(i.GoodsBaseID,i.ChangeCount);}),e.forEach(i=>{const{GoodsBaseID:a,ChangeCount:s}=i;n.has(a)?n.set(a,n.get(a)+s):n.set(a,s);}),Array.from(n,([i,a])=>({GoodsBaseID:i,ChangeCount:a}))}const Cn={乐不思蜀:"乐",兵粮寸断:"兵",八卦阵:"八卦",爪黄飞电:"爪黄+1",的卢:"的卢+1",绝影:"绝影+1",骅骝:"骅骝+1",赤兔:"赤兔-1",大宛:"大宛-1",紫骍:"紫骍-1",紫騂:"紫骍-1",诸葛连弩:"连弩",木牛流马:"木马",顺手牵羊:"顺手",万箭齐发:"万箭",五谷丰登:"五谷",无中生有:"无中",过河拆桥:"过拆",桃园结义:"桃园",无懈可击:"无懈",南蛮入侵:"南蛮",借刀杀人:"借刀",铁索连环:"铁索",随机应变:"随机",远交近攻:"远交",以逸待劳:"逸劳",知己知彼:"知己",逐近弃远:"逐近",洞烛先机:"洞烛",出其不意:"出其",水淹七军:"水淹","无懈可击·国":"国无",挟天子以令诸侯:"挟令",方天画戟:"方天戟",雌雄双股剑:"雌雄剑",青龙偃月刀:"青龙刀",丈八蛇矛:"丈八矛",朱雀羽扇:"朱雀扇",白银狮子:"白银狮",三尖两刃刀:"三尖刀",乌铁锁链:"乌铁链",五行鹤翎扇:"五行扇",太公阴符:"太公符",无双方天戟:"无双戟",束发紫金冠:"紫金冠",玲珑狮蛮带:"玲珑带",红棉百花袍:"百花袍",红锦百花袍:"百花袍",四乘粮舆:"四乘舆",铁蒺玄舆:"铁蒺舆",飞轮战舆:"飞轮舆",鬼龙斩月刀:"鬼龙刀",国风玉袍:"国风袍",赤炎镇魂琴:"赤炎琴",奇门八阵:"奇门阵",绝尘金戈:"绝尘+1",修罗炼狱戟:"修罗戟",虚妄之冕:"虚妄冕",赤血青峰:"赤青锋",赤血青锋:"赤青锋",鸾凤和鸣剑:"鸾凤剑",七彩神鹿:"神鹿-1",金乌落日弓:"金乌弓",刑天破军斧:"刑天斧",长安大舰:"长安-2",禅让诏书:"诏书",镔铁双戟:"镔铁戟",继往开来:"继往",攻守兼备:"攻守",进退自如:"进退",洪荒之力:"洪荒",同舟共济:"同舟",力争上游:"力争",逆水行舟:"逆水",撒豆成兵:"撒豆",移花接木:"移花",联军盛宴:"联军",调虎离山:"调虎",火烧连营:"火烧",勠力同心:"勠力",调剂盐梅:"调剂",声东击西:"声东",增兵减灶:"增兵",草木皆兵:"草木",唯我独尊:"独尊",弃甲曳兵:"弃甲",金蝉脱壳:"金蝉",故步自封:"自封",金鼓笙旗:"金鼓",党同伐异:"伐异",燎原之火:"燎原","八卦阵(复制)":"八卦","仁王盾(复制)":"仁王盾","藤甲(复制)":"藤甲","白银狮子(复制)":"白银狮",商鞅变法:"变法",真龙长剑:"真龙剑",传国玉玺:"玉玺",厚积形:"厚积",桎梏形:"桎梏",盈冲形:"盈冲",背水形:"背水",整肃形:"整肃",寸兵形:"寸兵",雄黄酒:"酒"},ae=new Proxy({cards:{0:{name:"",type:0,color:0,number:0,ncn:"?",cn:"0",c:"",n:0}},[Symbol.iterator]:function*(){for(let t in this.cards)yield this.cards[t];}},{get:function(t,e){var n;if(e in t)return t[e];if(!t.cards[e])if((n=_.cardDict)!=null&&n[e]){let{name:i,type:a,color:s,number:r,subType:o}=_.cardDict[e],c=En(s),d=Ne(r);t.cards[e]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[o]||Cn[i]||i,type:parseInt(a),color:parseInt(s),number:parseInt(r),ncn:i+c+d,cn:c+d,c,n:d};}else t.cards[e]=t.cards[0];return t.cards[e]}});function En(t){return ["","♥","♦","♠","♣"][t]??""}function Ne(t,e=!0){return e&&parseInt(t)==1?"A":{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"J",12:"Q",13:"K"}[t]??""}function ui(){for(let e=11;e<=60;e++){const n=`https://web.sanguosha.com/220/h5_2/res/runtime/pc/Face/${e}.png`,i=document.createElement("img");i.src=n,i.classList.add("face"),i.onmousedown=()=>Ze(`#${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);}["昏君，昏君啊","主公，别开枪，自己人","能不能快一点儿呀，兵贵神速啊","小内再不跳，后面还怎么玩儿啊","小内啊，您老悠着点儿","不好意思，刚才卡了","你可以打的再烂一点儿吗","哥们儿，给力点儿行吗","你们怎么忍心就这么让我酱油了","我，我惹你们了吗","姑娘，你真是条汉子","三十六计，走为上，容我去去便回","人心散了，队伍不好带啊","风吹鸡蛋壳，牌去人安乐","哥，交个朋友吧","妹子，交个朋友吧","我从未见过如此厚颜无耻之人","你随便杀，闪不了算我输","这波不亏","请收下我的膝盖","你咋不上天呢","放开我的队友，冲我来","见证奇迹的时刻到了"].forEach((e,n)=>{const i=document.createElement("span");i.classList.add("calRes"),i.textContent=e,i.onmousedown=()=>Ze(`${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);});}async function Ze(t,e){de("复制成功！");var n={1:"⒈",2:"⒉",3:"⒊",4:"⒋",5:"⒌",6:"⒍",7:"⒎",8:"⒏",9:"⒐",J:"Ⓙ",Q:"Ⓠ",K:"Ⓚ","+":" ",10:"⒑"};if(e&&Object.keys(n).forEach(a=>{t=t.replaceAll(a,n[a]);}),D.chat(t),window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var i=document.createElement("textarea");i.textContent=t,i.style.position="fixed",document.body.appendChild(i),i.select();try{return document.execCommand("copy")}catch(a){return console.warn("Copy to clipboard failed.",a),prompt("Copy to clipboard: Ctrl+C, Enter",t)}finally{document.body.removeChild(i);}}}async function fi(t,e){if(ue.CDKNotificationSwitch){let a=Oe("CDK");a||(a=[]);let s=t.filter(r=>!a.includes(r.cdk));await ye(1e4);for(let r of s)ze(`找到兑换码！<br>${r.cdk}<br>点击即可兑换且关闭此条通知${r.rewards}<br>如不想要兑换码通知，可在设置中关闭`,"ac-tooltip",1e4,"green",function(){!a.includes(r.cdk)&&a.push(r.cdk),Xe("CDK",a),Xt(r.cdk);});}var n=document.getElementById(e);n.innerText="",t.length==0&&e=="CDK"&&(t=["所有兑换码已经兑换","迟点再看看吧"],_t("CDK"));for(let a of t){let s=document.createElement("button");s.className="calRes",s.innerText=typeof a=="object"?`${a.cdk}`:a,s.onmousedown=function(){Xt(typeof a=="object"?a.cdk:a),s.innerText="已兑换",setTimeout(()=>{s.textContent=typeof a=="object"?`${a.cdk}`:a;},"500");},n.append(s);var i=document.createElement("br");n.append(i);}}function hi(t){var e=document.getElementById("storeDetail");e.innerText="",t.length==0&&(t=["暂无集市数据"]);for(let n of t){let i=document.createElement("button");i.className="storeDetail",i.innerText=n,e.append(i);}}let pi={9020101:"欢乐豆",100301:"手气卡",100201:"点将卡",1150001:"灵宝经诰",100401:"换将卡",200201:"诏令天下",112301:"校尉将印",112101:"朱砂",12119999:"桃花",111801:"功勋",1111801:"水晶碎片",1114301:"圣魂玄晶",112501:"大将军印",1142901:"夺宝券"};function Tn(t){return !pi[t]}function Dn(t,e,n,i){var a;if(document.getElementById("sec"+t)==null){let s=document.getElementById("lottery");const r=document.createElement("div"),o=document.createElement("div");o.innerHTML=_.secId[t].Name+"："+_.generalDict[_.secId[t].bigrewards]+"  次数："+i+"<br>",o.id="sec"+t+"+times",r.id="sec"+t,r.append(o),s.append(r),s.append(document.createElement("hr"));}if(typeof document.getElementById("sec"+t)<"u"&&document.getElementById(t+"+"+e)==null){const s=document.getElementById("sec"+t+"+times");s.innerHTML=_.secId[t].Name+"："+_.generalDict[_.secId[t].bigrewards]+"  次数："+i+"<br>";let r=document.getElementById("sec"+t);const o=document.createElement("div");o.className="suit",Tn(e)&&o.classList.add("r");const c=document.createElement("span"),d=document.createElement("span");c.innerText=((a=_.goodsID(e))==null?void 0:a.name)+" * ",d.innerText=n,c.id=t+"+"+e,d.id=t+"+"+e+"+number",o.append(c),o.append(d),r.appendChild(o);}else if(typeof document.getElementById(t)<"u"&&document.getElementById(t+"+"+e)!=null){const s=document.getElementById("sec"+t+"+times");s.innerHTML=_.secId[t].Name+"："+_.generalDict[_.secId[t].bigrewards]+"  次数："+i+"<br>";let r=document.getElementById(t+"+"+e+"+number"),o=parseInt(r.innerText);o+=n,r.innerText=o;}}function en(t){let e=document.getElementById("lastUseCard");const n=document.createElement("div");for(const a of t){if(a=="0")continue;var i=document.createElement("button");i.className=ae[a].color<=2?"shoupai R":"shoupai";let s=document.createElement("span");s.innerText=ae[a].cn,i.appendChild(s),i.appendChild(document.createElement("br")),i.innerHTML+=ae[a].name.substring(0,2),n.append(i);}e.innerHTML=n.innerHTML;}const tn=new MutationObserver(t=>{t.forEach(e=>{const n=e.target,i=document.getElementById(n.id),a=document.getElementById("s"+n.id);if(a&&i&&(e.type==="childList"||e.type==="attributes")){const s=n.innerHTML;if(a.dataset.lastContent!==s){if(a){const r=n.cloneNode(!0);a.innerHTML=r.innerHTML,Bn(a);}a.dataset.lastContent=s;}}});}),mi={attributes:!0,childList:!0,subtree:!0};function Bn(t){t&&t instanceof HTMLElement&&(t.scrollHeight>40?t.classList.add("show-ellipsis"):t.classList.remove("show-ellipsis"));}function Nt(t,e){let n;function i(...a){clearTimeout(n),n=setTimeout(()=>t.apply(this,a),e);}return i.cancel=function(){clearTimeout(n),n=null;},i}const gi=Nt(()=>{requestAnimationFrame(()=>{document.querySelectorAll(".sorder-body").forEach(e=>{Bn(e);});});},500);window.addEventListener("resize",gi);function xt(){const t=document.getElementById("seatUI"),e=document.createDocumentFragment();for(let n of z.seatUIs)if(n.posY&&n.posX&&typeof n.actualSeatID<"u")if(document.getElementById("sor"+n.actualSeatID)==null){const i=document.createElement("div");i.className="sorderContainer",i.id="sor"+n.actualSeatID,i.style.top=n.posY+"px",i.style.left=n.posX+"px",i.style.width=(z.unscaledWidth+z.paddingRight)*z.scale+"px";const a=document.createElement("div");a.className="sorder-body",a.classList.add("sNo"+n.actualSeatID),a.id="s"+n.actualSeatID,i.appendChild(a);const s=document.getElementById(n.actualSeatID);s&&(tn.observe(s,mi),e.appendChild(i));}else {const i=document.getElementById("sor"+n.actualSeatID);i.style.top=n.posY+"px",i.style.left=n.posX+"px",i.style.width=(z.unscaledWidth+z.paddingRight)*z.scale+"px";}if(z.seatUIs.length===0){tn.disconnect();for(let n=1;n<=8;n++){const i=document.getElementById("sor"+n);i&&i.remove();}}t.appendChild(e);}async function Ct(t,e){for(let a of t){const{x:s,y:r}=_.Rcity[a.id],o=z.centerX+s*SystemContext.gameScale/window.devicePixelRatio+"px",c=z.centerY+r*SystemContext.gameScale/window.devicePixelRatio+"px";if(document.getElementById("city"+a.id+a.event)==null){const d=document.createElement("div");if(d.id="city"+a.id+a.event,d.className="city",d.style.position="absolute",d.style.fontSize="15px",d.style.left=o,d.style.top=c,typeof _.Rfight[a.event]<"u"){let l=[];for(let u of _.Rfight[a.event].generals){let p=u.start?"[先行]":"",[x,E]=an(u,Be.difficulty);E?l.push('<span style="color: rgb(240, 65, 85); font-weight: bolder">'+u.generalname+p+" "+x.join(" ")+"</span>"):l.push(u.generalname+p);}d.innerHTML=_.text[a.event]+"<hr>"+l.join("<br>").replace(/\n/g," ")+"<hr>"+_.Rfight[a.event].get.replace(/\n/g,"<br>");}else {let l=[];for(let u=1;u<4;u++){let p=a.event+u.toString().padStart(2,"0"),x=[];if(_.Rchoose[p])if(_.Rchoose[p].generals)for(let E of _.Rchoose[p].generals){let y=E.start?"[先行]":"",[g,B]=an(E,Be.difficulty);B?x.push('<span style="color: rgb(240, 65, 85); font-weight: bolder">'+E.generalname+" "+y+g.join(" ")+"</span>"):x.push(E.generalname+y);}else x.push(_.Rchoose[p].lost)&&x.push("");l.push(x);}d.innerHTML=(_.text[a.event]!==void 0?_.text[a.event]+"<hr>":"")+((_.Rchoose[a.event+"01"]?(_.Rchoose[a.event+"01"].lost==""?"":l[0].join("<br>").replace(/\n/g," ")+"<hr>")+_.Rchoose[a.event+"01"].get.replace(/\n/g,"<br>"):"")+(_.Rchoose[a.event+"02"]?"<hr>"+(_.Rchoose[a.event+"02"].lost==""?"":l[1].join("<br>").replace(/\n/g," ")+"<hr>")+_.Rchoose[a.event+"02"].get.replace(/\n/g,"<br>"):"")+(_.Rchoose[a.event+"03"]?"<hr>"+(_.Rchoose[a.event+"03"].lost==""?"":l[2].join("<br>").replace(/\n/g," ")+"<hr>")+_.Rchoose[a.event+"03"].get.replace(/\n/g,"<br>"):""));}document.getElementById("rogueUI").appendChild(d);}else {const d=document.getElementById("city"+a.id+a.event);d.style.left=o,d.style.top=c;}}const n=t.map(a=>"city"+a.id+a.event);document.querySelectorAll("div.city").forEach(a=>{n.includes(a.id)||a.remove();});}function yt(t,e="点击复制",n=!0,i=!1,a=null){let s=document.createElement("button");return s.className="calRes",s.title=e,s.disabled=i,s.innerText=t,s.onclick=()=>{Ze(t,n),s.innerText="复制成功",setTimeout(()=>{s.textContent=t;},500);},s}async function nn(t){let e=t.slice().sort((s,r)=>s-r),n=[];function i(s,r,o){if(o===13){n.push(s.slice());return}if(!(o>13))for(let c=r;c<e.length;c++)c>r&&e[c]===e[c-1]||(s.push(e[c]),i(s,c+1,o+e[c]),s.pop());}i([],0,0);let a=document.getElementById("result");a.innerHTML="";for(let s of n.sort((r,o)=>o.length-r.length))if(a.appendChild(yt(s.map(r=>Ne(r,!1)).join("+"))),a.children.length>=15)break;a.innerHTML===""&&(a.innerHTML='<span class="textRes">【资援】无解！</span>');}async function xi(t,e=!1){function n(c,...d){let f=c.slice();for(let l=0;l<f.length;l++){for(let u=0;u<d.length;u++)if(f[l]-=d[u][l],f[l]<0)return !1;if(l>0&&f[l]>=2)return 0}return f}let i=t.reduce((c,d)=>(c[0]++,c[d]++,c),Array(14).fill(0)),a=Math.floor(i[14]/2),s=new Map([[0,[Array(14).fill(0)]]]);for(let c=1;c<=13;c++){let d=i[c];if(d!=0)for(let f of Array.from(s.keys()).sort((l,u)=>u-l)){let l=s.get(f);for(let u=1;u<=d;u++){let p=f+c*u;if(p>a)break;s.has(p)||s.set(p,[]);for(let x=0;x<l.length;x++){let E=l[x].slice();E[0]+=u,E[c]+=u,s.get(p).push(E);}}}}s.delete(0);let r=new Map;for(let c of Array.from(s.keys()).sort((d,f)=>f-d)){let d=s.get(c);for(let f=0;f<d.length;f++)for(let l=f;l<d.length;l++){let u=n(i,d[f],d[l]);u&&(r.has(u[0])||r.set(u[0],[]),d[f][0]<=d[l][0]?r.get(u[0]).push([d[f],d[l],u]):r.get(u[0]).push([d[l],d[f],u]));}}let o=document.getElementById("result");o.innerHTML="",Array.from(r.keys()).sort((c,d)=>c-d).some(c=>{if(r.get(c).sort((d,f)=>d[0][0]-f[0][0]).forEach(([d,f,l])=>{let u=document.createElement("button");u.className="calRes";let p=document.createElement("span"),x=document.createElement("span");p.innerText=d.flatMap((E,y)=>y>0?Array(E).fill(Ne(y,!1)):[]).join("+"),x.innerText=f.flatMap((E,y)=>y>0?Array(E).fill(Ne(y,!1)):[]).join("+"),u.appendChild(p),u.insertAdjacentHTML("beforeend","<span>=</span>"),u.appendChild(x),u.title="点击复制",u.onclick=function(){Ze(this.innerText,!0);},e&&(u.title="点击“=”左侧或右侧的数字，将被点击一侧的数字分配给自己，另一侧的分配给张昌蒲",p.className="yanjiaospan",x.className="yanjiaospan",p.onclick=function(E){E.stopPropagation(),D.yanJiao([d,f,l],2);},x.onclick=function(E){E.stopPropagation(),D.yanJiao([d,f,l],0);}),o.appendChild(u);}),o.children.length>=5)return !0}),o.innerHTML===""?o.innerHTML='<span class="textRes">【严教】无解！</span>':e&&o.insertAdjacentHTML("afterbegin","界小抄：点下方数字可以自动分配牌<br>点击想要分配给自己的一组数字即可");}async function yi(t,e){if(!(t!=null&&t.length))return;let n=t.slice().sort((r,o)=>r-o),i=[];function a(r,o,c){if(!(c>13)){i.unshift(r.slice()),e&&(i[0].K=c===13?r.length:0);for(let d=o;d<n.length;d++)d>o&&n[d]===n[d-1]||(r.push(n[d]),a(r,d+1,c+n[d]),r.pop());}}a([],0,0);let s=document.getElementById("result");s.innerHTML="";for(let r of i.filter((o,c,d)=>!d.some(f=>o.length<f.length&&o.every(l=>f.includes(l)))).sort((o,c)=>c.K-o.K||c.length-o.length))s.appendChild(yt(r.map(o=>Ne(o,!1)).join("+"))),e&&r.K&&s.lastChild.classList.add("textRes");}async function sn(t,e){function n(o,c,d,f,l){if(d.length===l+1){c.push([...d,...d.reduce((u,p)=>(u.splice(u.indexOf(p),1),u),o.slice())]);return}for(let u=f;u<o.length;u++)u>f&&o[u]===o[u-1]||(d.push(o[u]),d[0]+=o[u],n(o,c,d,u+1,l),d[0]-=d.pop());return c}let i=document.getElementById("result");if(i.innerHTML="",!(t!=null&&t.length)||!(e!=null&&e.length))return;let a=Math.max(t.length,e.length);t.sort((o,c)=>o-c),e.sort((o,c)=>o-c);for(let o=2;o<=a;o++){let c=n(t,[],[0],0,o);n(e,[],[0],0,o).forEach(d=>c.forEach(f=>{d[0]>f[0]&&d.slice(1,o+1).every(l=>!f.slice(1,o+1).includes(l))&&(a<3||Array.from({length:o}).some((l,u)=>d[u+1]<f[u+1]))&&i.appendChild(yt(d.slice(1,o+1).map(l=>Ne(l))+"→"+f.slice(1,o+1).map(l=>Ne(l)),"点击复制",!1));}));}let s=Array.from(new Set(e)),r=Array.from(new Set(t));s.forEach(o=>{let c=r.filter(d=>d<o);c.length&&i.appendChild(yt(Ne(o)+"→"+c.map(d=>Ne(d)).join("/"),"点击复制",!1));}),i.innerHTML===""&&(i.innerHTML='<span class="textRes">【易城】无法交换！</span>');}async function Et(t){var c,d,f;if(!(t!=null&&t.allData)){z.cities=[],Ct(z.cities),document.getElementById("centerUI").classList.remove("show"),document.getElementById("centerUI").classList.add("hide");return}const e=document.getElementById("centerUI");e.classList.remove("hide"),e.classList.add("show");let n=t.allData,i=n.shopData,a=n.chapterData,s=n.generalpool;if(i){i.bShow=!0;let l=[];if(i.itemId&&_.Rplot)for(let u of i.itemId)_.Rplot[u]&&l.push(_.Rplot[u].name);hi(l);}if(s&&s.general_change&&s.general_change.length>0){let l=s.general_change.map(u=>_.generalDict[u]||`Unknown (${u})`);ze(`小抄提示：可换将为${l.reverse().join(", ")}`,"acTooltip",1e4,"green",null,!0);}let r=n.seasonData,o=r&&r.difficulty;o&&(Be.difficulty=o),Be.general=((d=(c=n.gameData)==null?void 0:c.myGeneral)==null?void 0:d.uGeneralId)??0,Be.itemId=((f=n.gameData)==null?void 0:f.itemId)??[],a&&a.locations&&(z.cities=a.locations.map(l=>({id:l.location,event:l.event})),_.Rcity&&Ct(z.cities));}const bi=(()=>{class t{constructor(){this.id=0,this.goods_id=0,this.goods_cnt=0,this.price_type=0,this.price_num=0,this.stock=0,this.buy_limit=0,this.ori_price=0,this.all_bought_cnt=0,this.self_bought_cnt=0;}Read(a){this.id=a.readUnsignedByte(),this.goods_id=a.readUnsignedInt(),this.goods_cnt=a.readUnsignedInt(),this.price_type=a.readUnsignedByte(),this.price_num=a.readUnsignedInt(),this.stock=a.readUnsignedInt(),this.buy_limit=a.readUnsignedByte(),this.ori_price=a.readUnsignedInt();}UpdateDate(a){this.goods_id=a.goods_id,this.goods_cnt=a.goods_cnt,this.price_type=a.price_type,this.price_num=a.price_num,this.stock=a.stock,this.buy_limit=a.buy_limit,this.ori_price=a.ori_price,this.all_bought_cnt=a.all_bought_cnt,this.self_bought_cnt=a.self_bought_cnt;}}function e(i){i.position=0;let a=[],s=i.readBoolean();if(i.Data.length<=1)return null;let r=i.readUnsignedInt(),o=i.readUnsignedInt(),c=new Date(r*1e3).toISOString().slice(5,16).replace("T"," "),d=new Date(o*1e3).toISOString().slice(5,16).replace("T"," "),f=i.readUnsignedInt();for(let l=0;l<f;l++){let u=new t;u.Read(i);let p=a.find(x=>x.id==u.id);p?p.UpdateDate(u):a.push(u);}f=i.readUnsignedInt();for(let l=0;l<f;l++){let u=i.readUnsignedInt(),p=i.readUnsignedInt(),x=a.find(E=>E.id==u);x&&(x.all_bought_cnt=p);}f=i.readUnsignedInt();for(let l=0;l<f;l++){let u=i.readUnsignedInt(),p=i.readUnsignedInt(),x=a.find(E=>E.id==u);x&&(x.self_bought_cnt=p);}return {commonVo:a,start_time:r,end_time:o,start:c,end:d,next:s}}let n=!1;return async i=>{if(n)return null;const a=document.querySelectorAll('.left input[type="checkbox"]');let s=e(i);if(!s)return null;let{commonVo:r,start_time:o,end_time:c,start:d,end:f,next:l}=s;if(l)return;o=(o-8*60*60)*1e3;let u=r.map(({goods_id:E,goods_cnt:y,price_type:g,price_num:B,stock:ee,buy_limit:k,ori_price:T,all_bought_cnt:H,self_bought_cnt:G},Q)=>{var be;let te=B+["","通用元宝","元宝","银两"][g]+": "+((be=_.goodsID(E))==null?void 0:be.name)+(y>1?"*"+y:""),he=`${d} ~ ${f} 共${ee}个`,xe=H>=ee||G>=k;return Object.assign(a[Q].dataset??{},{goods_id:E,start_time:o,goods:te}),{goods_id:E,goods:te,title:he,disabled:xe}}),p=document.getElementsByClassName("right")[0];p&&(p.innerHTML=u.map(({goods:E,title:y,disabled:g})=>`<span class="secKillDetailText${g?" gray":""}" title="${y}">${E}</span>`).join(""));let x=p.start-6e4;return x>Date.now()&&oe.set("miaosha",()=>{de(`${d}
秒杀即将开始！
`+u.map(({goods:E})=>E).join(`
`)),n=!0,setTimeout(()=>{n=!1;},66666);},x),i.Size==i.position}})();let wi=["巳蛇","灵动","八门","盾弓","智迟","持盈","卫主","不死","刚烈","觉醒","悲鸣","断肠","节命","先机","悲鸣","忘魂","雅士","挥泪","不屈","封冻","灵躯","武魂","已蛇"];const St={getspell:0,getspell_ZD:1,getspell_KN:2,getspell_EM:3,getspell_LY:4};function an(t,e){let n=[],i=!1,a=Si(e);const s=St[a];let r=Object.keys(St).filter(o=>St[o]<=s).map(o=>t[o]).filter(Boolean).join(";");r=r==null?void 0:r.split(";").map(o=>{var c;return ((c=_.spellDict[o])==null?void 0:c.name)||"无收录技能"});for(let o of r)wi.includes(o)&&(n.push(o),i=!0);return [n,i]}function Si(t){switch(Math.floor((t-1)/5)){case 0:return "getspell";case 1:return "getspell_ZD";case 2:return "getspell_KN";case 3:return "getspell_EM";case 4:return "getspell_LY";default:return "getspell"}}var it=[],Tt=[],rn={290:"推锋",766:"匡弼"},Re=[],ht={},pt={},et={},Ke={},mt=new Map,Ee=()=>({name:"加载中"}),ve=[],Dt={},Bt={},Ae={},Te={},ki={},Lt={},At={};Object.assign(_,{cardDict:it,cardIDsOrder:Tt,spellDict:Re,generalDict:ht,skinSP:pt,skinDict:et,skinMap:Ke,bigSkin:mt,goodsID:Ee,rogejson:Te,gxjson:ki,Rfight:Ae,Rchoose:Bt,Rcity:Dt,secId:Lt,vskinMap:At,Rplot:ve});async function vi(t){return new Promise(e=>JSZipUtils.getBinaryContent(window.location.host==="test.sanguosha.com"?"https://test.sanguosha.com/h5/res/config//Config_w.sgs":"https://web.sanguosha.com/220/h5_2/res/config/Config_w.sgs?v="+window.resourceVersion,(n,i)=>JSZip.loadAsync(i).then(async a=>{var ee;var s=(k=>k.getFullYear().toString()+(k.getMonth()+1).toString().padStart(2,"0")+k.getDate().toString().padStart(2,"0"))(new Date);let r=["sys_playcard","cha_spell","character","hd_roguelike","hd_1v1_rogue","sys_h5_shop","sys_gs_dbs_fs_goodsbaseinfo","sys_server_item_drops_templete_config","sys_h5_dbs_clientserverpub","cha_gs_dbs_fs_skininfo","gn_dbs_quest","sys_h5_quest","sys_h5_task","ff_dbs_lottery_new","ff_exchange_new","sys_treasure_chest","gn_dbs_giftbag","ff_tiangong","ff_chess"];var o=await Promise.all(r.map(k=>a.file(k+".sgs").async("arraybuffer").then(T=>JSON.parse(new TextDecoder().decode(new Zlib.Gunzip(CtrUtil.Ctr.Ofb_Dec(T)).decompress()))))).then(k=>r.reduce((T,H,G)=>(T[H+".sgs"]=k[G],T),{}));function c(k,T){if(typeof k!="object")return k;let H={};for(let G in k){let Q=T.get(G)||G;H[Q]=k[G];}return H}var d=new Map([["id","编号"],["name","名称"],["time","时间"],["desc","说明"],["reward","奖励"],["price","价格"],["max","限购"],["effect","效果"],["info","信息"]]),f=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.reduce((k,T)=>(k.set(T.a,T),k),new Map),l=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.abbreviation.field.reduce((k,{Short:T,Long:H})=>(k.set(T,H),k),new Map),u=o["sys_server_item_drops_templete_config.sgs"].AllDrop.DropTemplete.DropGroup.DropItem.reduce((k,T)=>(k.has(T.a)||k.set(T.a,[]),k.get(T.a).push(T.d),k),new Map);Ee=(()=>{var k={};return function(T){if(T=parseInt(T),k[T])return k[T];let H=c(f.get(T),l),G=o["sys_h5_shop.sgs"].root.itemtips.find(({a:te})=>te==T),Q=(H==null?void 0:H.usedeffect)&&y(H==null?void 0:H.usedeffect);return k[T]={...H,...G&&{info:G.e},...Q&&{effect:Q}}}})();var p={};function x(k){var H;let T=k==null?void 0:k.replace(/([^0-9,\.])/g,"").split(",").map(G=>parseInt(G));return (T==null?void 0:T.length)<2?k:(p[T[0]]??(p[T[0]]=(H=f.get(T[0]))==null?void 0:H.b)??T[0])+(parseInt(T[1])>1?"*"+T[1]:"")}var E={};function y(k){let T=parseInt(k);if(T!=1e3&&Math.abs(T)>0)return E[T]??(E[T]=(u.get(Math.abs(T))??[]).map(H=>{var G;return ((G=f.get(H))==null?void 0:G.b)??y(H)}).join(T>0?"/":"&"))}Re=o["cha_spell.sgs"].GameSpells.spell.reduce((k,{a:T,c:H,o:G})=>{var te,he;let Q={name:H,spellid:T,desc:((he=(te=G==null?void 0:G.replace(/<[^\<\>]*>/g,""))==null?void 0:te.replace(/#.*/g,""))==null?void 0:he.replace(/[;\n]+$/g,""))||""};return (Q.desc.includes("暗置")||Q.desc.includes("扣置")||Q.desc.includes("移出"))&&(rn[T]=Cn[Q.name]??Q.name),k[T]=Q,k},[]);let g=o["sys_playcard.sgs"].abbreviation.reduce((k,{Short:T,Long:H})=>(k.set(T,H),k),new Map);if(it=o["sys_playcard.sgs"].GamePlayCards.card.map(k=>c(k,g)).reduce((k,T)=>{var H,G;return k[T.id]={...T,name:T.name??((H=Re[T.spellId])==null?void 0:H.name),desc:(G=Re[T.spellId])==null?void 0:G.desc},k},[]),Tt=o["sys_playcard.sgs"].GamePlayCards.card.sort((k,T)=>k.c-T.c||k.d-T.d||k.h-T.h||k.m-T.m||k.g-T.g||k.f-T.f||k.a-T.a).map(({a:k})=>k),mt=new Map(o["cha_gs_dbs_fs_skininfo.sgs"].generalskin.items.item.map(k=>[String(k.a),[k.a,k.c,k.v||k.q,k.r]]).reverse()),et=o["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.reduce((k,{skinID:T,name:H,skinlevel:G,dongPoint:Q})=>{let te=parseInt(T/100);return k[te]||(k[te]={}),k[te][T]={level:{"0,0":"普通","0,1":"稀有","0,2":"史诗","0,3":"传说","0,4":"限定"}[G]||"未知",name:H,state:Q!==void 0},k},{}),pt=o["cha_gs_dbs_fs_skininfo.sgs"].generalskin.speciaSkin.filter(k=>String(k.skinID).includes("_")).reduce((k,T)=>{let[H,G]=T.skinID.split("_").map(Number);return k[H]?k[H].includes(G)||k[H].push(G):k[H]=[G],k},{}),Object.entries(pt).forEach(([k,T])=>{var Q,te;(Q=mt.get(k))==null||Q.push(T);let H=parseInt(k/100),G=(te=et[H])==null?void 0:te[k];G&&(delete et[H][k],T.forEach(he=>{et[H][k+"_"+he]={...G,name:G.name+he};}));}),ht=o["character.sgs"].GameCharacters.character.reduce((k,{a:T,ai:H,b:G})=>(k[T]=(H||"")+(G==null?void 0:G.replaceAll("&","")),k),{}),o["character.sgs"].GameCharacters.character.forEach(({a:k,v:T})=>{if(typeof T!="string"){Ke[k]=new Set([k]);return}let H=[k,...T.split(";").map(Q=>parseInt(Q))],G=H.find(Q=>Q in Ke);if(G){let Q=Ke[G];H.filter(te=>!Q.has(te)).forEach(te=>(Ke[te]=Q).add(te));}else {let Q=new Set(H);H.forEach(te=>Ke[te]=Q);}}),At=o["character.sgs"].WuJiangs.Spgroup.reduce((k,T)=>{const H=T.spgenerals?T.spgenerals.split(",").map(Number):[];return H.forEach(G=>{k[G]=new Set(H);}),k},{}),Lt=o["ff_tiangong.sgs"].root.Common.reduce((k,T)=>(k[T.Id]=T,k),{}),typeof t!="string"){let k=o["gn_dbs_giftbag.sgs"].giftsys.gifts.giftsItem.Item.filter(T=>T.c_allServerWord&&!T.platform&&(!T.level||T.level=="0,201")&&T.endtime>=s&&T.begintime<=s).sort((T,H)=>T.endtime-H.endtime).map(T=>{const H="<br>"+T.dataInfo.match(/\[(\d+),(\d+)\]/g).map(G=>{const[Q,te,he]=G.match(/\[(\d+),(\d+)\]/);return `${Ee(te).name} * ${he}`}).join("<br>");return {cdk:T.c_allServerWord||T.allServerWord,rewards:H}}).filter(Boolean);fi(k,"CDK");}if(Object.assign(_,{cardDict:it,cardIDsOrder:Tt,markSpell:rn,spellDict:Re,generalDict:ht,skinSP:pt,skinDict:et,skinMap:Ke,bigSkin:mt,goodsID:Ee,secId:Lt}),(typeof t!="string"||t=="roge")&&async function(k,T){Dt=k.Root.Level.reduce((h,{cityID:m,cityname:v,citypic:S,citycoordinate:I,startshow:w})=>{let[O,X]=I.split(",").map(Number);return h[m]={x:O,y:-X,boss:w,name:v??(S==null?void 0:S.replace(/^city_([0-9])_(.+)*\.png$/,(Z,A,se)=>({"1jjy":"将军营","1jl":"箭楼","1wl":"望楼","1fht1":"烽火台(左)","1ck":"仓库","1yf":"营房","1fht2":"烽火台(右)","1sjc":"神君祠","2xsj":"西市集","2wl":"望楼","2dsj":"东市集","2wk":"武库","2hgl":"挥公陵","2sdg":"舜帝宫","2gcm":"干城门","2ywt":"演武台","3ds":"东市","3gg":"桂宫","3bg":"北宫","3wyg":"未央宫","3wk":"武库","3mgg":"明光宫","3clg":"长乐宫","4js":"金市","4lyt":"凌云台","4hly":"华林园","4tc":"太仓","4tx":"碳墟","4smm":"司马门","4wk":"武库","4sz":"石址","5my":"梅园","5fhl":"凤凰林","5lt":"龙亭","5wk":"武库","5wl":"望楼","5cm":"城门","5ql":"谯楼","5clg":"陈留宫","6jkg":"建康宫","6ql":"戚里","6wl":"望楼","6ycq":"邺城桥","6ywt":"演武台","6sg":"书馆","6wfl":"万福楼","6wk":"武库","6tqt":"铜雀台"})[A+se]??Z))},h},{}),k.Root.Tactics.forEach(({plot:h,plotname:m,plotdesc:v,school:S,money:I,level:w})=>{ve[h]={name:m.replaceAll("·",""),desc:v.replaceAll(" ",""),school:S,money:I,level:w,type:2};}),k.Root.Spell.forEach(({id:h,spellid:m,money:v,level:S})=>{var I,w;ve[h]={name:(I=Re[m])==null?void 0:I.name,desc:(w=Re[m])==null?void 0:w.desc,spellid:m,money:v,level:S,type:3};}),k.Root.Card.forEach(({id:h,cardid:m,isequip:v,money:S,level:I})=>{var w=it[m];ve[h]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[w.subType]??w.name,desc:w.desc,color:w.color,number:w.number,money:S,level:I,type:4+v,rType:(w.type*10+w.subType)*100+v};});var H=k.Root.Roundid.reduce((h,{useSeason:m})=>m),G=new Map,Q=k.Root.Text.reduce((h,{ID:m,text:v})=>(h[m]=v,h),[]);k.Root.General=(h=>k.Root.General.map(m=>c(m,h)))(k.root.abbreviation.reduce((h,{Short:m,Long:v})=>(h.set(m,v),h),new Map)),k.Root.Adventure.forEach(h=>{h.chapname=Q[h.chapname]??h.chapname;});let te=k.Root.RewardGroup.reduce((h,{reward:m,rewarddesc:v,allreward:S,abandonmoney:I})=>{var w,O;return h[m]=(I?I+"铜币/":"")+((O=(w=S==null?void 0:S.split(";"))==null?void 0:w.flatMap(X=>X==null?void 0:X.split(",")))==null?void 0:O.map(X=>["随机","普通","稀有","史诗","传说"][X]).join("/"))+v.replace("多选一","自选"),h},k.Root.Other.reduce((h,{reward:m,rewardname:v})=>(h[m]=v,h),{}));var he=k.Root.Chapter.reduce((h,{seasonID:m,chapter:v,cityName:S,bosslocation:I,location:w})=>(w.split(";").forEach(O=>{h[O]=`${m}-${v}${S}`;}),h[I]=`${m}-${v}${S}BOSS`,h),{}),xe=k.Root.General.reduce((h,m)=>(h[m.generalgroup]||(h[m.generalgroup]=[]),h[m.generalgroup].push(m),m.generalname=m.generalname.replace("&",""),h),{});k.Root.General.forEach(h=>{h.GeneralRank||(h.GeneralRank=0),h.JumpStage&&(h.next=(([m,v])=>xe[m][v-1]??xe[m][0])(h.JumpStage.split(";"))),h.info={general:h.generalname,hp:h.hp,maxhp:h.maxhp,card:h.cardnum,draw:h.draw,sha:1+h.exshatimes,armor:h.armor,getarmor:h.getarmor,...h.next?{next:h.next.generalname}:{}},h.spells=["","_ZD","_KN","_EM","_LY"].flatMap((m,v)=>{var S;return (((S=h["getspell"+m])==null?void 0:S.split(";"))??[]).map(I=>Re[I]).filter(Boolean).map(I=>({...I,level:v}))}),h.spell=h.spells.map(({name:m})=>m).join(","),h.cards=["","_ZD","_KN","_EM","_LY"].flatMap((m,v)=>{var S,I;return [...((S=h["carddesc"+m])==null?void 0:S.split(";"))??[],...((I=h["equip"+m])==null?void 0:I.split(";"))??[]].map(w=>it[w]).filter(Boolean).map(({id:w})=>({id:w,ncn:ae[w].ncn,level:v}))}),h.card=h.cards.map(({ncn:m})=>m).join(",");}),Ae=k.Root.Fight.reduce((h,m)=>{function v(S,I,w=!1){S&&(m.fight+=Y(S.info),m.lost+=(S.start?"[先手]":"")+S.generalname,S.next?(m.lost+=">",S.next.stage=I,S.next.info.pre=S.generalname,m.generals.push(S.next),v(S.next,I+1,w)):w||(m.fight+="+",m.lost+=" "));}if(m.generals=[...xe[m.Ggroup]??[]],m.fight="",m.lost="",m.startnum){let S=m.generals.find(I=>I.generalID==m.startnum);S&&(S.start=!0);}return m.generals.forEach((S,I,w)=>v(S,1,I==w.length-1)),m.get=m.itemgroup+`铜币
`+(m.rewarditem?String(m.rewarditem).split(";"):[]).concat(String(m.reward).split(";")).map(S=>te[S]).join(`
`),m.text=Q[m.text]??m.text,m.name=Q[m.name]??m.name,h[m.fightID]=m,h},[]);for(let h in xe)h in Ae||(Ae[h]={generals:xe[h]});if(Bt=k.Root.Choose.reduce((h,m)=>{var v;return m.type==7?(h[m.effectID]=Ae[m.event1],G.set(m.event1,(v=k.Root.Adventure.find(S=>S.ID===parseInt(m.effectID/10)))==null?void 0:v.chapname)):m.type==3&&m.event1=="2"?h[m.effectID]={get:"营地"}:h[m.effectID]={lost:(S=>S&&"失去 "+S)(q(m.lostitem,m.lostnum,m.effectID)),get:(S=>S&&m.showitem?S.replace("随机","特定"):S)(q(m.getitem,m.getnum,m.effectID))},h},[]),Object.assign(_,{Rfight:Ae,Rchoose:Bt,Rcity:Dt,vskinMap:At,Rplot:ve,text:Q}),!t||t=="roge"){var be=Object.entries(xe).reduce((h,[m,v])=>{var O,X,Z,A,se;let S=m.length<6?m.slice(-3):m.slice(0,2)!=="99"?m.slice(-5,-2)+">":"*"+m.slice(-2),I=m.length<6?m.slice(0,-3)-2:m.slice(0,2)!=="99"?m.slice(0,-5)-2:m.slice(-3,-2)-m.slice(-4,-3)+9;if(["新年大吉"].includes(((O=Ae[m])==null?void 0:O.name)??((X=Ae[parseInt(S)+4e3])==null?void 0:X.name)))return h;h[S]||(h[S]={fight:((Z=Ae[m])==null?void 0:Z.name)??((A=Ae[parseInt(S)+4e3])==null?void 0:A.name)??"",generals:{}}),G.has(m)&&(h[S].event=G.get(m));let w=h[S].generals;return (((se=Ae[m])==null?void 0:se.generals)??v).forEach(P=>{let re=(S.startsWith("*")?I:"")+(P.stage||"")+"#"+P.generalID;for(;;){if(!w[re])w[re]={general:(P.info.pre?">":"")+P.generalname+(P.info.next?">":""),info:Y(P.info),levels:[],start:[],infos:{},spell:{},card:{},ad:{}};else if(w[re].levels.includes(I)){re+="@";continue}break}let Se=w[re];I%10<6&&I<20&&(Se.levels.push(I),P.start&&Se.start.push(I)),Se.infos[I]=P.info,P.otherad&&(Se.ad[I]=P.otherad),P.spells&&P.spells.forEach(le=>{Se.spell[le.spellid]||(Se.spell[le.spellid]={...le,levels:[],level:void 0}),I%10<6&&I<20&&Se.spell[le.spellid].levels.push(I+(le.level??0));}),P.cards&&P.cards.forEach(le=>{Se.card[le.id]||(Se.card[le.id]={name:le.ncn,levels:[],level:void 0}),I%10<6&&I<20&&Se.card[le.id].levels.push(I+(le.level??0));});}),h},{});Object.entries(be).forEach(([h,m])=>{be[h].shift=h.startsWith("*")&&Math.min(...Object.values(m.generals).flatMap(v=>v.levels))==1?1:0,m.generals=Object.values(m.generals).map(v=>(v.level=Math.min(...v.levels.sort((S,I)=>I-S))-be[h].shift,v.level=v.level,v.spell=Object.values(v.spell).map(S=>{let I=Math.min(...S.levels.sort((w,O)=>O-w));return S.levels.some((w,O,X)=>w<10&&!X.includes(w+10)&&(v.levels.includes(w+10)||v.levels.length==2&&v.levels.includes(10)))&&(S.level=[I]),S.levels.some(w=>w<10)&&(w=>{w.length&&(S.level=[I,w[w.length-1]]);})(S.levels.filter((w,O,X)=>w>=10&&!X.includes(w-10))),S.level=(S.level??I)-be[h].shift,delete S.levels,delete S.spellid,S}).sort((S,I)=>{let w=O=>O[1]>=10?O[1]:O[0]??O;return w(S.level)%10-w(I.level)%10||w(S.level)-w(I.level)}),v.card=Object.values(v.card).map(S=>{let I=Math.min(...S.levels.sort((w,O)=>O-w));return S.levels.some((w,O,X)=>w<10&&!X.includes(w+10)&&(v.levels.includes(w+10)||v.levels.length==2&&v.levels.includes(10)))&&(S.level=[I]),S.levels.some(w=>w<10)&&(w=>{w.length&&(S.level=[I,w[w.length-1]]);})(S.levels.filter((w,O,X)=>w>=10&&!X.includes(w-10))),S.level=(S.level??I)-be[h].shift,delete S.levels,S}).sort((S,I)=>{let w=O=>O[1]>=10?O[1]:O[0]??O;return w(S.level)%10-w(I.level)%10||w(S.level)-w(I.level)}),v.card.length||delete v.card,v.info=Object.values(v.infos).reduce((S,I)=>(Object.keys(S).forEach(w=>{I[w]>S[w]&&(S[w]=I[w]);}),S),{hp:0,card:0,draw:0,sha:0}),Object.keys(v.ad).length?Object.keys(v.ad).sort((S,I)=>I-S).forEach((S,I,w)=>{(S>=10&&v.ad[S]==v.ad[S%10]||v.ad[S]==v.ad[w[I+1]])&&delete v.ad[S];}):delete v.ad,v.start.length?v.start=Math.min(...v.start):delete v.start,delete v.infos,delete v.levels,v)).sort((v,S)=>v.level-S.level);});var C=k.Root.UniversalGroup.filter(h=>h.fightgroup!==void 0).reduce((h,m)=>{h[m.fightID]||(h[m.fightID]={});let v=String(m.fightgroup).slice(-3);return h[m.fightID][v]||(h[m.fightID][v]=[]),h[m.fightID][v].push(m),h},{}),R=Array.from(Array.from(k.Root.Level.reduce((h,{cityID:m,eventfight:v,universalfight:S,startshow:I})=>{var O,X;w(S),w((X=(O=v==null?void 0:v.split(";"))==null?void 0:O.map(Z=>Z.slice(-3)))==null?void 0:X.filter((Z,A,se)=>!se.slice(A+1).includes(Z)));function w(Z){if(!Z||Z.length==0)return;let A=h.get(Z);A?A.includes(he[m])||A.push(he[m]):h.set(Z,[he[m]]);}return h},new Map).entries()).reduce((h,[m,v])=>{let S=v.length>1&&new Set(v.map(I=>I.slice(0,3))).size<2?v.map((I,w)=>I.slice(w?3:0)).join("/"):String(v);return h.get(S)||h.set(S,new Set),(C[m]?Object.keys(C[m]):m).forEach(I=>h.get(S).add(I)),h},new Map).entries()).reduce((h,[m,v])=>(h[m]=Array.from(v,S=>be[S]),h),{});Te.jsbs=JSON.stringify(Object.entries(R).filter(h=>h[0].includes(H+"-")).reduce((h,[m,v])=>{let S=m.slice(2);return h[S]||(h[S]=[]),v.forEach(I=>{I.fight!="新年大吉"&&h[S].push(I);}),h},{})),Te.jsft=JSON.stringify(Object.values(be).filter(h=>["天涯故交","招兵买马","万众敬仰"].includes(h.event)&&h.shift||["突来危机","擂台比武","战事推演","为民除害","赛前演习","宵小叫嚣"].includes(h.event)).reduce((h,{event:m,generals:v,fight:S})=>(h[m]||(h[m]=[]),h[m].push({...S?{fight:S}:{},generals:v}),h),{})),Te.wscd=JSON.stringify(Object.values(T.Card.map(({CitationID:h,money:m})=>({...ve[h],money:m})).reduce((h,{level:m,money:v,name:S,color:I,number:w,desc:O,rType:X})=>{let Z=m+S+w;return h[Z]||(h[Z]={cl:[],level:v,name:S,number:w,type:X,desc:O}),h[Z].cl.push(I),h},{})).sort(Qe("type","level"))),Te.wssp=JSON.stringify(T.Spell.map(({CitationID:h,money:m})=>({...ve[h],money:m})).sort(Qe("money","level","spellid")).map(({level:h,money:m,name:v,desc:S})=>({level:m,name:v,desc:S}))),Te.wszf=JSON.stringify(T.Tactics.map(({CitationID:h,money:m})=>({...ve[h],money:m})).filter(h=>{var m;return (h.name=(m=h.name)==null?void 0:m.replace("·新",""))&&!h.name.includes("废弃")&&!h.desc.includes("备用")&&!/(游戏|战斗)开始/.test(h.desc)}).sort((h,m)=>!h.money^!m.money?h.money?1:-1:h.name.slice(0,2).localeCompare(m.name.slice(0,2))!=0?h.name.slice(0,2).localeCompare(m.name.slice(0,2)):Qe("money","level","name.length")(h,m)).map(({level:h,money:m,name:v,desc:S})=>({level:m,name:v,desc:S})).filter((h,m,v)=>JSON.stringify(h)!=JSON.stringify(v[m+1]))),Te.jssp=JSON.stringify(ve.filter(h=>(h==null?void 0:h.type)==3).sort(Qe("level","money","spellid")).map(({level:h,money:m,name:v,desc:S})=>({name:v,level:h,desc:S}))),Te.jscd=JSON.stringify(Object.values(ve.filter(h=>(h==null?void 0:h.type)>=4).reduce((h,{level:m,money:v,name:S,color:I,number:w,type:O,desc:X,rType:Z})=>{let A=m+S+w,se=[33,34].includes(Math.floor(Z/100))||S=="诸葛连弩"&&m==4;return h[A]||(h[A]={cl:[],level:se?0:m,money:v,name:S,number:w,type:Z+(se?6:0),desc:X}),h[A].cl.push(I),h},{})).sort(Qe("type","level","money")).sort((h,m)=>h.level>0&&m.level==0?-1:0)),Te.jssd=JSON.stringify(k.Root.seed.sort(Qe("level","seed")).map(({name:h,desc:m,level:v,huchijineng:S})=>{var w,O,X;let I=(w=m==null?void 0:m.match(/.*获得【([^【】]*)】.*/))==null?void 0:w[1];return I&&(m+=((O=Re[S])==null?void 0:O.desc)??((X=Re.find(Z=>(Z==null?void 0:Z.name)==I))==null?void 0:X.desc)),{name:h,level:v,desc:m}})),Te.jssc=JSON.stringify(k.Root.school.map(({school:h,name:m,effect:v,needputong:S,needxiyou:I,needshishi:w,needchuanshuo:O})=>({school:h,name:m,need:[S,I,w,O],desc:ve[v].desc.replaceAll(" ","")}))).replace("（","(").replace("）",")").replace("）",")"),Te.jszf=JSON.stringify(ve.filter(h=>(h==null?void 0:h.type)==2).filter(h=>(h.school=parseInt(h.school||100),h.name=h.name.replace("·新",""),!h.name.includes("废弃")&&!h.desc.includes("备用")&&!h.name.includes("套装"))).sort((h,m)=>h.name.slice(0,2).localeCompare(m.name.slice(0,2))!=0?h.name.slice(0,2).localeCompare(m.name.slice(0,2)):Qe("level","money","name.length")(h,m)).map(({level:h,money:m,name:v,desc:S,school:I})=>({...I<100?{school:I}:{},name:v,level:h,desc:S})).filter((h,m,v)=>JSON.stringify(h)!=JSON.stringify(v[m+1]))),Te.jstf=JSON.stringify(k.Root.saijitianfu.filter(h=>h.seasonID==H).reduce((h,{tfid:m,ceng:v,type:S,cost:I,plot:w,preposition:O})=>(h[m]={id:m,x:S,y:v,cost:I,pre:(O==null?void 0:O.split(/,|;/))??[],...ve[w]},h),[{id:0,x:0,y:0,cost:0,pre:[],name:"",level:0,type:0}])),e(Te);}function q(h,m,v){var S,I,w;return h?h.includes(",")?(([O,X])=>["随机","普通","稀有","史诗","传说"][X]+{2:"战法",3:"技能",4:"手牌",5:"装备"}[O])(h.split(",")):te[h]?(m>1?m:"")+te[h]:ve[h]?(S=ve[h])==null?void 0:S.name:xe[h]?(G.set(h,(I=k.Root.Adventure.find(O=>O.ID===parseInt(v/10)))==null?void 0:I.chapname),xe[h].map(O=>O.generalname).join(`
`)):(w=k.Root.Card.find(O=>O.id==h))==null?void 0:w.name:""}function Y({general:h,hp:m,maxhp:v,armor:S,getarmor:I,card:w,draw:O,sha:X,next:Z,pre:A}){return (A?">":"")+h+m+(v!==m?"/"+v:"")+"血"+w+"牌摸"+O+"杀"+X+(Z?">":"")}}(o["hd_roguelike.sgs"],o["hd_1v1_rogue.sgs"]),typeof t!="string"||t=="guanxing"){let be=function(C,R,q="https://web.sanguosha.com/220/h5_2/res/runtime/pc/general/big/bigSkin/"){let Y=q+C+".png";return fetch(Y).then(h=>{if(h.ok)return {name:R,desc:`<a target="_blank" href="${Y}"><img src="${Y.replace("bigSkin","static").replace("big/s","seat/s")}"></a>`};if(!q.includes("seat"))return be(C,R,q.replace("big/s","seat/s").replace("bigSkin","static"))})};_.gxjson={"结果为推演和预测，请以最终公告为准！更新时间":new Date().toLocaleString(),"【充值消费】":[]};let k=o["gn_dbs_quest.sgs"].TaskAll.Task.filter(({_attributes:C})=>C.clientTimeStart>=String(s)).map(({_attributes:C,Reward:R})=>{let q=",";return R.SelectReward&&(R=R.SelectReward,q="/"),R.RewardItem.length||(R.RewardItem=[R.RewardItem]),{id:C.id,time:C.timeStart.slice(0,8)+"—"+C.timeEnd.slice(0,8),desc:"【"+C.name+"】"+C.desc,reward:R.RewardItem.map(({_attributes:Y})=>x(Y.itemId+","+Y.count)).join(q)}}).concat(o["sys_h5_quest.sgs"].root.Task.filter(C=>C.ClientTimeStart>=String(s)).map(({Id:C,Name:R,Desc:q,Rewards:Y,Count:h,ClientTimeStart:m,ExtraRewards:v,ClientTimeEnd:S,SelectRewards:I})=>{let w=I?"/":",";return {id:C,time:m.slice(0,8)+"—"+S.slice(0,8),desc:"【"+R+"】"+q,reward:[Y+","+h,...(v==null?void 0:v.split(";"))??[]].map(x).join(w)}})),T=o["sys_h5_task.sgs"].TaskAll.TaskNode.filter(({duration:C,quest_id:R})=>R&&(!C||(C==null?void 0:C.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6})?.*"),"$1"))>=String(s))).reduce((C,{duration:R,quest_id:q,name:Y})=>{var v,S;let h=q.split(";").map(I=>parseInt(I)).filter(I=>I>0),m=(((S=R||((v=k.find(({id:I,time:w})=>h.includes(I)&&w))==null?void 0:v.time))==null?void 0:S.slice(0,8))+"·【"+(Y==null?void 0:Y.replace(/.*盲盒.*/,"盲盒福利"))+"】").replace(/.*(充值|消费).*/,"【充值消费】");return h.forEach(I=>{I!=""&&(C[I]=m);}),C},{});k.forEach(({id:C,...R})=>{let q=T[C]??String(s)+"·【其它任务】";_.gxjson[q]||(_.gxjson[q]=[]),_.gxjson[q].push(R);}),(C=>{var R;C.length>1&&(_.gxjson[((R=C[0].time)==null?void 0:R.slice(0,8))+"·兑换【占星秘宝】"]=C);})(o["ff_dbs_lottery_new.sgs"].root.ShopGoods.filter(({timeRange:C})=>(C==null?void 0:C.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(s)).map(({Id:C,counts:R,exchangecount:q,timeRange:Y})=>({time:Y==null?void 0:Y.replace(/.*?([0-9]+)T[0-9]+,([0-9]+)T[0-9]+/,(h,m,v)=>m+"-"+v),desc:"消耗·星石币*"+q,reward:x(C+","+R)}))),o["ff_exchange_new.sgs"].root.Common.filter(({duration:C})=>(C==null?void 0:C.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(s)).forEach(({itemid:C,goods:R,rewardstype:q,duration:Y})=>_.gxjson[Y.slice(0,8)+"·【"+Ee(C).name+"】兑换"]=R.sort((h,m)=>m.exchangecount1-h.exchangecount1).map(({exchangecount1:h,Id2:m,counts:v,limitcounts:S,itemid2:I,exchangecount2:w})=>{let O=String(v).split(";");return {time:Y.slice(0,8)+"—"+Y.slice(16,24),desc:"消耗·"+x((I??C)+","+(w??h))+(S?",限"+S+"次":""),reward:String(m).split(";").map((X,Z)=>x(X+","+O[Z])).join("/")}})),o["sys_treasure_chest.sgs"].root.Common.filter(({duration:C})=>(C==null?void 0:C.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(s)).forEach(({itemid:C,rewards:R,duration:q})=>_.gxjson[q.slice(0,8)+"·开启【"+Ee(C).name+"】"]=R.map(Y=>({time:q.slice(0,8)+"—"+q.slice(16,24),desc:"开启·"+x(C+","+Y.counts),reward:JSON.stringify(Y).split(/,"goodsid[0-9]+":" *([0-9,;]+) *"/).filter(h=>(h==null?void 0:h.search(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/))>=0).map(h=>h.replace(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/,(m,v,S)=>x(v)+(S?"["+x(S)+"]":""))).join(Y.rewardstype==2?"/":",")})));let H=[],G=[],Q=[],te=o["sys_h5_dbs_clientserverpub.sgs"].client.DuoBao[0].item.filter(({BeginTime:C})=>C>String(s)).flatMap(({DropId:C,ExchangeId:R,BeginTime:q,EndTime:Y})=>{let h=q.slice(0,8)+"-"+Y.slice(0,8),m=(u.get(Math.abs(C))??[]).map(Ee).filter(({name:w})=>!["夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","招募令","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(w)),v=m.map(({ID:w})=>w),I=(u.get(Math.abs(R))??[]).map(Ee).filter(({ID:w,name:O,TypeID:X})=>v.includes(w)||!(X==43&&(O!=null&&O.endsWith("动态套装"))||X==36&&(O!=null&&O.startsWith("文和乱武*"))||X==25&&["赵襄","沙摩柯(SP)","孙尚香(界限突破)"].includes(O)||["枭雄金印","水晶碎片","圣魂玄晶","史诗皮肤锦囊","传说皮肤锦囊","至臻皮肤礼盒","谋定水晶自选礼盒"].includes(O))).map(({ID:w,name:O})=>{let X=m.findIndex(({name:Z})=>Z==O);return X>=0&&v.splice(X,1,w),w});return Array.from(new Set([...v,...I])).map(Ee).map(({ID:w,TypeID:O,PicID:X,name:Z,returngoods:A,usedeffect:se,info:P,fragment:re})=>{var le;let Se={time:h,name:Z,price:[...v.includes(w)?["四角"]:[],...I.includes(w)&&re?[re+"夺宝碎片"]:[]].join("/"),...(F=>F&&{desc:F})(["祈福灯","圣魂玄晶","枭雄金印"].includes(Z)?"":A&&A!="0"&&A.split(";").filter(F=>(F==null?void 0:F.search(/[0-9]+,[0-9]+/))>=0).map(x).join(";")||(se==null?void 0:se.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&se.replace(/([0-9]+),[0-9,]+/g,x)||se&&y(se)||P)};return (O==36||((le=Se.name)==null?void 0:le.search(/\*[^0-9]/))>=0)&&Q.push({name:Z,res:X}),Se})});te.length&&(_.gxjson.夺宝行动=te,te=te.map(({name:C})=>C));let he=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(C=>{var R;return ((R=C.x)==null?void 0:R.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(s)&&C.a!=834901}).map(({a:C,ah:R,l:q})=>{if(q&&q.replace(/([0-9]+),[0-9,]+/g,(Y,h)=>(!R&&![100301,200101,1325201].includes(parseInt(h))&&H.push(parseInt(h)),Y)),R)G.push(C);else return C}).filter(Boolean).concat(H).sort((C,R)=>C-R).filter((C,R,q)=>R==0||C!=q[R-1]);Array.from(new Set(o["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.filter(C=>C.SellTime>String(s)).map(C=>C.baseID).concat(he.concat(he.filter((C,R,q)=>C-q[R-1]>1e3&&q[R+1]-C<1e3).map(C=>o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(R=>R.a-C>0&&R.a-C<1e4).map(R=>R.a)).reduce((C,R)=>[...C,...R],[])).sort((C,R)=>C-R)))).map(C=>Ee(C)).filter(C=>C&&![...te,"夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","招募令","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(C.name)).forEach(({ID:C,TypeID:R,PicID:q,name:Y,maxBuyCount:h,yuanbao:m,returngoods:v,SellTime:S,usedeffect:I,info:w,yuanbaoonly:O,fragment:X,exchange:Z,shopvisual:A})=>{var P;let se={...S&&{time:S.replace(/.*?([0-9]+)T[0-9]+;([0-9]+)T[0-9]+/,(re,Se,le)=>Se+"-"+le)},name:Y,...Z!=null&&Z.includes(",")?{price:x(Z)}:A&&m!=999999&&{price:O?m+"通用元宝":m+"元宝",...h&&((re,Se)=>parseInt(re)>0?{max:Se+"个/"+(re==1?"":re)+"天"}:{})(...h.split(";"))},...(re=>re&&{desc:re})(["祈福灯","圣魂玄晶","枭雄金印"].includes(Y)?"":v&&v!="0"&&v.split(";").filter(re=>(re==null?void 0:re.search(/[0-9]+,[0-9]+/))>=0).map(x).join(";")||(I==null?void 0:I.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&I.replace(/([0-9]+),[0-9,]+/g,x)||I&&y(I)||w)};(R==36||((P=se.name)==null?void 0:P.search(/\*[^0-9]/))>=0)&&Q.push({name:Y,res:q}),String(se.price).includes("夺宝")||String(se.price).includes("灵宝")?(_.gxjson.夺宝行动||(_.gxjson.夺宝行动=[]),_.gxjson.夺宝行动.push(se)):se.max?(_.gxjson.限购礼包||(_.gxjson.限购礼包=[]),_.gxjson.限购礼包.push(se)):(_.gxjson.其它道具||(_.gxjson.其它道具=[]),_.gxjson.其它道具.push(se));}),(ee=_.gxjson.其它道具)==null||ee.sort((C,R)=>C.price&&!R.price?-1:1),G.length&&(_.gxjson.祈福武将=Object.entries(G.map(C=>Ee(C)).filter(({returngoods:C})=>{var R;return ((R=Ee(C.split(";")[1].split(",")[0]))==null?void 0:R.TypeID)==25}).reduce((C,{name:R,lotteryPrice:q})=>(C[q]||(C[q]=[]),C[q].push(R.replace("武将","").replace(/\(.*?\)/g,"")),C),{})).sort((C,R)=>R[0]-C[0]).map(([C,R])=>({price:C+"同心结",reward:R.join("/")}))),(C=>{C.length&&(_.gxjson.祈愿台=C);})(o["ff_tiangong.sgs"].root.Drop.reduce((C,{Id:R,ItemId:q,MaxCount:Y})=>(C[R]||(C[R]=[]),(h=>{["欢乐豆","手气卡","点将卡","换将卡","诏令天下","夺宝券","招募令","武将包","皮肤包","朱砂","灵宝","桃花","功勋","校尉将印","大将军印","水晶碎片","圣魂玄晶","传世玉玺"].some(m=>h.startsWith(m))||C[R].push(h);})(x(q+","+Y)),C),[]).reduce((C,R)=>{if(R){let q=C.find(({reward:Y})=>R.includes(Y));q&&(q.reward=R.join(","));}return C},o["ff_tiangong.sgs"].root.Common.slice().reverse().reduce((C,{Id:R,Name:q,bigrewards:Y,Duration2:h})=>{let m=parseInt(h.slice(0,8))+1;if(m<parseInt(s))return C;let v=C.find(({name:S})=>S==q);return v?v.time+=";"+m:C.push({name:q,reward:ht[Y],time:String(m)}),C},[]).reverse()));const xe=(()=>{var C={};return function(R){return C[R]?C[R]:C[R]=o["ff_chess.sgs"].root.NewChess.filter(({PlanId2:q})=>q==R).reduce((q,{MaxFloors:Y})=>q+parseInt(Y),0)}})();(C=>{C.length&&(_.gxjson.绘卷=C);})(o["ff_chess.sgs"].root.Common.reduce((C,{GrandPrize:R,PlanID2:q,duration2:Y})=>{var m;let h=parseInt(Y.slice(0,8))+1;return h<parseInt(s)||C.push({reward:(m=Ee(R))==null?void 0:m.name,预估价格:xe(q)/2>>0,time:h+"-"+Y.slice(16,24)}),C},[])),_.gxjson.新品皮肤=Q.map(({name:C})=>({name:C})),Object.entries(_.gxjson).forEach(([C,R])=>_.gxjson[C]=Array.isArray(R)?R.map(q=>c(q,d)):c(R,d)),(!t||t=="guanxing")&&e(Promise.all(Q.map(({name:C,res:R})=>be(R,C))).then(C=>_.gxjson.新品皮肤=C.filter(Boolean)).then(()=>(Object.entries(_.gxjson).forEach(([C,R])=>_.gxjson[C]=Array.isArray(R)?R.map(q=>c(q,d)):c(R,d)),_.gxjson)));}e(o),console.warn("[initMap] Config_w 解析完成");})))}function Qe(...t){return new Function("_a","_b","return "+t.map(e=>"((_a."+e+")-(_b."+e+"))").join("||"))}var Wi=`<head><title>三国杀打小抄</title><meta charset="UTF-8"><style>::-webkit-scrollbar{width:5px;height:12px}::-webkit-scrollbar-track{border:1px solid #050505}::-webkit-scrollbar-thumb{background:#5f563f}::-webkit-scrollbar-thumb:hover{background:#2c2c2c}.body{width:100%;margin:0;padding:0;font-size:13px;width:100%;background:#23201d;background-size:cover;color:#f2de9c;display:flex;flex-direction:column;margin:1px;user-select:none;max-width:100vw;overflow-x:hidden;font-size:13px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Tahoma,Arial,sans-serif}.nav{width:100%;background:#23201d;text-align:center}.nav1{font-weight:bolder;height:20px;width:100%;color:#f2de9c;background:#23201d;margin-right:15px;display:block}#nav1:empty{display:none}.nav2{height:20px;width:49%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.nav2:hover{color:#f2de9c;background:#372820;border:1px solid #f2de9c}.nav2:focus{background:#372820;box-shadow:1px 1px 3px #f2de9c}.content{margin:1px}.AC-head{font-weight:bolder;height:66px;width:13%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin:1px;border-radius:5px;border:1px #23201d solid;box-shadow:1px 0 3px;overflow:hidden}.AC-head:hover{background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.AC-body{height:60px;width:79%;float:left;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.invite-body{height:40px;width:92%;float:left;display:flex;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:5px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.orderContainer{text-align:right;vertical-align:bottom}.order-head{font-weight:bolder;width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.order-body:empty{height:35px}.order-body{position:relative;padding:5px;height:auto;width:94%;display:block;box-shadow:1px 1px 3px;z-index:1;margin:1px;overflow:hidden;border-radius:5px}.order-body:after{text-align:center;content:var(--No-content, '座位号丨武将');position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownShouPai{border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.knownCardsInHand{text-align:center;position:relative;overflow:hidden;display:none;height:auto}.knownCards:empty{text-align:center;position:relative;overflow:hidden;display:none}.knownCards{width:94%;text-align:center;position:relative;overflow:hidden;height:auto}@keyframes blink{50%{border-color:#f2de9c}}.paiduiCards:after{text-align:center;content:'牌堆';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.qipaiCards:after{text-align:center;content:'本回合弃牌堆';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownCards{padding:5px;height:auto;width:94%;float:right;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.knownCards:after{text-align:center;content:'场上手牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#quanBian:after{text-align:center;content:'权变牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#yanXi:after{text-align:center;content:'宴戏牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardTypeDetail:after{text-align:center;content:'牌堆类型详情';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.ding{text-align:center;width:100%;position:relative;height:auto;display:none}.dingCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.dingCards:after{content:'第一张为牌堆顶';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.di{text-align:center;width:100%;position:relative;height:auto;display:none}.diCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.diCards:after{content:'第一张为牌堆底';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardDetail{width:100%;overflow:hidden;display:block}.type{width:100%;float:left}.cardTypeContainer{width:100%;overflow:hidden;display:block}.type-head{width:10%;float:left;text-align:center;color:#f2de9c;margin-left:3px;display:block;overflow:hidden;cursor:pointer}.type-body{padding:5px;width:94%;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.cardType{font-size:12px;width:25%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.cardType:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.storeDetail{font-size:12px;width:50%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.detail{width:100%;float:left;overflow:hidden}.detail-head{width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.detail-body{min-height:40px;padding:5px;width:94%;float:left;display:block;box-shadow:1px 1px 3px;margin:1px;border-radius:5px;overflow:hidden}.panel-header{background:#23201d;color:#f2de9c;padding:3px;text-align:left;border:none;width:100%;cursor:pointer;display:flex;align-items:center;border-radius:5px;border:1px transparent solid}.triangle{width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-left:6px solid #f2de9c;margin-right:10px;transition:transform .3s ease}.panel-content{max-height:0;width:100%;float:left;display:block;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;transition:max-height .3s ease-out}.panel-header.active .triangle{transform:rotate(90deg)}.panel-header.active{color:#f2de9c;background:#372820}.panel-header:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.r{color:#f04155}.suitRec{width:50%;float:right;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",Tahoma,Arial,sans-serif;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7)}.suit{width:50%;float:left}.phrase{float:left}.face{width:12.5%;display:block;float:left}.face:hover{width:12.5%;display:block;float:left;background:#f2de9c}#shandian{width:100%;float:left}.function{width:50%;margin:1px}.jizhan{width:100%;float:left}.yanjiao{width:50%;float:left}.yanjiaospan{border:1px solid #0000;box-sizing:border-box}.yanjiaospan:hover{border:1px solid #f2de9c;cursor:pointer}.calRes{width:98%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px;font-size:13px;margin:1px}.secKillDetailText{width:100%;height:26px;float:left;text-align:center;color:#f2de9c;background:#23201d;display:block;border-radius:5px;line-height:26px;margin-top:17px}.calRes:not(:disabled):hover{font-size:12px;color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhuBTN{width:48%;height:20px;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhuBTN:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhu{width:100%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhu:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#mySeatID1{width:48%}#mySeatID2{width:48%}.res{width:100%;float:left}a:link,a:visited{color:inherit;text-decoration:none;display:inline-flex;text-decoration:underline;border-radius:5px;cursor:pointer;align-items:center;justify-content:center}a:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#donate{position:relative;color:#f2de9c;display:block;text-align:center}.uuid{position:relative;color:#f2de9c;display:block;text-align:center;cursor:pointer}.uuid:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.uuid:active{background:#372820}.width{width:100%;height:5px;clear:both}.switch-container{display:flex}.switch{position:relative;display:block;margin-left:10px;width:56px;height:26px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#23201d;-webkit-transition:.4s;transition:.4s;border-radius:34px;border:1px solid #f2de9c;--slider-position:2px}.slider:before{position:absolute;content:"";height:20px;width:20px;left:var(--slider-position,2px);bottom:2px;background-color:#f2de9c;-webkit-transition:.4s;transition:.4s;border-radius:50%}input:checked+.slider{background-color:#372820}input:focus+.slider{box-shadow:0 0 1px #372820}.status{position:absolute;top:50%;transform:translateY(-50%);left:5px;color:#555}.explanation{margin:0 10px;display:flex;width:100%}input:checked+.slider+.status:before{content:'开'}input:checked+.slider+#autoBotStatus:before{content:var(--bot-status, '30');color:#f2de9c}input+.slider+#autoBotStatus:before{content:var(--bot-status, '关')}input+.slider+.status:before{content:"关"}.calRes:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.markedCard{display:inline-flex;align-items:center;border-radius:5px;border:1px solid #000;width:auto;background-color:#372820;color:#f2de9c}.mark{writing-mode:vertical-rl;margin-right:0;color:#f2de9c}.markedCard>.mark:only-child{display:none}.shoupai{color:#000;--shoupai-width:33px;padding:0;font-weight:bolder;margin-right:calc(32px - var(--shoupai-width));float:left;width:var(--shoupai-width);min-width:var(--shoupai-width);height:38px;border:1px solid #000;text-align:center;background:rgba(210,200,160,.5);border-radius:5px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",'Noto Color Emoji';white-space:nowrap;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7);font-size:13px}.shoupai.R{color:red}.shoupai.G{background:0}.shoupai.G .shoupai{background:0;pointer-events:none}.order-body:not(#paiduiCards) .shoupai:disabled{display:none}.order-body:not(#paiduiCards) .shoupai.G{width:auto}.left{width:30%;float:left}.right{width:70%;float:right}input[type=checkbox]:disabled+.slider{background-color:gray;cursor:not-allowed}.question-mark{display:inline-block;position:relative;width:15px;height:15px;line-height:15px;text-align:center;border:1px solid #f2de9c;border-radius:50%;margin-left:2px;transition:background-color .3s}.question-mark:hover{background-color:#372820;cursor:pointer}.tooltip{position:relative;background-color:#333;text-align:center;padding:5px;border-radius:5px;max-width:200px;white-space:pre-line;z-index:10000000001;opacity:0;pointer-events:none;transition:opacity .1s ease-in-out;color:#f2de9c;font-size:13px}.tooltip.visible{opacity:1;pointer-events:auto}.tooltip.top{margin-left:50px}#sidebarHint{position:fixed;top:0;right:0;width:25px;height:100%;background-color:rgba(55,40,32,.8);color:#f2de9c;display:none;justify-content:center;align-items:center;font-size:20px;writing-mode:vertical-rl;text-orientation:upright}:root{--my-background-image:url('https://web.sanguosha.com/220/h5_2/res/assets/bigPng/propGet.png')}.sorderContainer{font-size:13px;width:100%;display:flex;align-items:center;width:146px;z-index:10000000000;user-select:none;text-align:left;transition:height .2s;position:fixed;transform-origin:0 0}.sorder-head{display:flex;align-items:center;justify-content:center;font-weight:bolder;width:10%;height:25px;text-align:center;color:#f2de9c;margin-left:3px}.sorder-body{pointer-events:auto;height:auto;width:100%;float:right;display:flex;flex-wrap:wrap;overflow:hidden;z-index:1;max-height:48px}.sorder-body.show-ellipsis::after{content:'...';position:absolute;bottom:0;left:50%;transform:translateX(-50%);text-align:center;color:#f2de9c;font-weight:700;height:20px;background:linear-gradient(to bottom,rgba(255,255,255,0),rgb(0 0 0 / 80%));width:inherit}.sorder-body:hover{max-height:none;overflow:visible}.sorder-body:hover::after{display:none}.sorder-body:not(#paiduiCards) .shoupai:disabled{display:none}.sorder-body:not(#paiduiCards) .shoupai.G{width:auto}@keyframes fadeInLeftToRight{0%{clip-path:inset(0 100% 0 0);opacity:0}100%{clip-path:inset(0 0 0 0);opacity:1}}@keyframes fadeOutRightToLeft{0%{clip-path:inset(0 0 0 0);opacity:1}100%{clip-path:inset(0 100% 0 0);opacity:0}}.ac-tooltip{position:fixed;top:100px;left:45%;background-color:transparent;background-image:var(--my-background-image);cursor:pointer;background-size:100% 100%;color:#f44336;font-size:16px;border-radius:4px;z-index:9999;overflow:hidden;white-space:nowrap;padding:16px 32px;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transform:translateX(0);transition:opacity 1s ease-in-out,visibility 1s ease-in-out}.ac-tooltip.green{background-color:transparent;color:#f2de9c}.city{visibility:hidden;transition:opacity 1s ease-in-out,visibility 1s ease-in-out;background-color:rgba(55,52,39,.7);color:#f2de9c;align-items:center;justify-content:center;border-radius:5px;text-align:center;flex-direction:column;padding:5px}hr{width:100%;margin:0}@keyframes blink{50%{border-color:#f2de9c}}.centerUI{width:18px;height:18px;background-color:#4e251f;border-radius:4px;display:flex;border:1px solid rgb(110 107 91);justify-content:center;align-items:center;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,.3);visibility:hidden}.centerUI::after{content:"!";font-family:Arial,sans-serif;font-size:15px;color:#fff;font-weight:700}.centerUI:hover{background-color:rgb(134 74 58)}.show{animation:fadeInLeftToRight 1s forwards,blink 2s infinite;visibility:visible}.hide{animation:fadeOutRightToLeft 1s forwards;visibility:hidden}.window{width:1024px;height:600px;border:2px solid #333;border-radius:8px;box-shadow:0 0 15px rgba(0,0,0,.5);position:relative;background-color:#f5f5f5;overflow:hidden}.window-header{display:flex;justify-content:space-between;align-items:center;background-color:#23201d;color:#fff;padding:5px;cursor:move}.window-header .title{font-weight:700;padding-left:10px}.window-header .controls{display:flex;gap:5px}.window-header .controls button{background:0 0;border:none;color:#fff;cursor:pointer;padding:5px}.window-header .controls button:hover{background-color:rgba(255,255,255,.2)}.window-content{width:100%;height:calc(100% - 40px);border:none}.fullscreen{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-5C3C11THB3"><\/script><script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"><\/script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5C3C11THB3")<\/script></head><div class="body"><div class="nav"><div id="nav1"></div><div class="nav1" id="phrase">当前阶段提示</div><div><a href="https://goka.top:8080/chunlian" target="_blank" class="calRes">查看春联</a></div></div><div class="content" id="content"><div class="orderAndShouPai" id="orderAndShouPai"><button class="panel-header"><span class="triangle"></span> <b>武将手牌</b></button><div class="panel-content order" id="button"><div class="orderContainer" id="or1"><div class="order-body No1" id="1" style="--No-content:'神诸葛亮丨一'"><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button><div class="markedCard"><span class="mark">木马</span> <button class="shoupai G">♥10<br>测试</button> <button class="shoupai R">♦K<br>测试</button></div><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button></div></div><div class="orderContainer" id="or2"><div class="order-body No2" id="2" style="--No-content:'卧龙诸葛丨二'"><button class="shoupai G">♥10<br>暗牌</button> <button class="shoupai G">♥10<br>样式</button></div></div><div class="orderContainer" id="or3" style="--No-content:'天候孔明丨三'"><div class="order-body No3" id="3"></div></div><div class="orderContainer" id="or4" style="--No-content:'诸葛亮丨四'"><div class="order-body No4" id="4"></div></div><div class="orderContainer" id="or5" style="--No-content:'武诸葛亮丨五'"><div class="order-body No5" id="5"></div></div><div class="orderContainer" id="or6" style="--No-content:'卧龙凤雏丨六'"><div class="order-body No6" id="6"></div></div><div class="orderContainer" id="or7" style="--No-content:'界卧龙诸葛丨七'"><div class="order-body No7" id="7"></div></div><div class="orderContainer" id="or8" style="--No-content:'界诸葛亮丨八'"><div class="order-body No8" id="8"></div></div></div><div><div class="orderContainer"><div class="knownCards" id="knownCards"></div></div><div class="orderContainer"><div class="order-body paiduiCards" id="paiduiCards"></div></div><div class="orderContainer"><div class="order-body qipaiCards" id="qipaiCards"></div></div><div class="orderContainer"><div class="knownCards quanBianYanXi" id="quanBian"></div><div class="knownCards quanBianYanXi" id="yanXi"></div></div></div></div><div class="width"></div><div class="cardDetail" id="cardDetail"><div class="space"></div><div class="detail"><div class="detail-body"><div class="suit r" id="heart">♥红桃 × 0</div><div class="suit" id="spade">♠黑桃 × 0</div><div class="suit" id="club">♣梅花 × 0</div><div class="suit r" id="diamond">♦方片 × 0</div><div class="suit r" id="hongsha">红杀 × 0</div><div class="suit" id="heisha" n>黑杀 × 0</div><div class="sha" id="sha">剩余出杀次数：指记入次数的杀</div><span>乱击/权变</span><div class="suitRec" id="suit"></div><br><span>博图</span><div class="suitRec" id="boTu"></div><br><span>上一张使用的牌</span><br><button class="shoupai R" id="lastUseCard">＾＾<br>•ω•</button><br><br><br><div id="guhuo" style="display:none">蛊惑牌</div><div class="function yanjiao" id="yanjiao">严教小抄</div><button class="function mizhuBTN" id="mizhu">糜竺小抄</button> <button class="function mizhu mySeatID" id="mySeatID1">座位：1</button> <button class="function mizhu mySeatID" id="mySeatID2">座位：2</button><div class="function res" id="result">结果样式：1 1 1 1 = 4</div></div></div><div class="width"></div><div class="type"><div class="cardTypeContainer"><div class="type-body type1" id="type1"><button class="cardType" id="test1">小抄</button> <button class="cardType">开发</button> <button class="cardType">小伙伴</button></div></div><div class="cardTypeContainer"><div class="type-body type2" id="type2"><button class="cardType">霜迟</button> <button class="cardType">孤独尊</button> <button class="cardType">无所谓</button> <button class="cardType">埃城</button> <button class="cardType">辉弥</button> <button class="cardType">天野</button> <button class="cardType">人富</button></div></div><div class="cardTypeContainer"><div class="type-body type3" id="type3"></div></div><div class="orderContainer"><div class="knownCards cardTypeDetail" id="cardTypeDetail"></div></div></div></div><div class="width"></div><div class="width"></div><div class="laya" id="laya"><div class="space"></div><button class="panel-header laya-header"><span class="triangle"></span> <b>快捷操作</b></button><div class="panel-content" id="layaDiv"><div class="switch-container"><div id="autoBotSwitchContainer"><span class="explanation">自动挂机<span class="question-mark" data-tooltip="AI接管挂机刷酒馆30亲密度&#10;自动创建演武房间开始对战&#10;建议点将张辽禁将只留标风&#10;禁用其它SP武将可提高胜率&#10;到身份演武房间列表后开启&#10;界小抄用户可以无限制使用&#10;开关数字表示酒馆剩余时间&#10;双击打开官阶百胜无尽挂机&#10;到经典场国战开启可刷福卡">?</span></span> <label class="switch"><input id="autoBotSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoBotStatus"></span></label></div><div><span class="explanation" id="autoExplanation"></span></div></div><div class="switch-container"><div><span class="explanation">盖主速刷<span class="question-mark" data-tooltip="主公点将黄盖一分钟苦肉自杀速刷&#10;可用来刷武将百胜战功和官阶任务&#10;保证已激活的账号在 7 天内登录过&#10;一：登录小号创建自选身份密码房&#10;二：多开大号加入房间点自动挂机&#10;三：大号需双击自动挂机开始锁定&#10;四：小号点将黄盖，打开盖主速刷&#10;五：大号准备并保持两窗口在前台&#10;">?</span></span> <label class="switch"><input id="autoHGSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoHGStatus"></span></label></div><div><span class="explanation" id="autoHGExplanation"></span></div></div><div class="switch-container" style="display:none"><div><span class="explanation">加入互助<span class="question-mark" data-tooltip="点击加入小抄互相助力小组&#10;每天自动助力三位小抄玩家&#10;同时收到三位小抄玩家助力&#10;默认为小抄给当前玩家助力&#10;右侧可输入想要助力的玩家&#10;“再”打开《加入互助》开关&#10;该玩家可收到三个小抄助力&#10;">?</span></span> <label class="switch"><input id="autoInviteSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><textarea class="invite-body" type="text" id="inviteName" required maxlength="10" size="10" placeholder="大西瓜"></textarea></div></div><button class="calRes" id="guanxing">自助观星</button> <button class="calRes" id="mail" disabled="disabled">一键领取邮箱物品</button> <button class="calRes" id="task" disabled="disabled">一键领取所有任务奖励</button></div></div><div class="store" id="store"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>山河图</b></button><div class="panel-content"><div><button class="calRes" id="openStore">点击打开商店换装备->跳奇遇</button></div><div><span id="chongsheng">重生是否发动：否</span></div><div><span id="sanBanFu">三板斧计数器</span></div><div id="storeDetail"><button class="storeDetail">集市霸王·壹300</button> <button class="storeDetail">集市霸王·贰200</button> <button class="storeDetail">集市霸王·叁100</button> <button class="storeDetail">会员商店·肆1100</button> <button class="storeDetail">稳定承载1100</button> <button class="storeDetail">极奢1100</button></div></div></div><div class="secKill" id="secKill"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>秒杀连点器（悬停查看详情）</b></button><div class="panel-content" id="secKillDetail"><div class="left"><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem1Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem2Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem3Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br></div><div class="right"><span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span></div></div></div><div class="chat" id="chat"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>聊天（点击自动输入）</b></button><div class="panel-content chat-body"></div></div><div class="CDK"><button class="panel-header"><span class="triangle"></span> <b>兑换码（点击即兑换）</b></button><div class="panel-content"><div class="function res" id="CDK"><button class="calRes">小麦好帅</button></div></div></div><div class="tianguo"><button class="panel-header"><span class="triangle"></span> <b>统计</b></button><div class="panel-content"><button id="gamerecord" class="calRes" style="text-align:center">战绩胜率统计</button><div id="PlayerTianGuo" style="text-align:center">你的天过次数/总次数</div><div><div id="lottery"><a href="https://goka.top:8080/choujiang?username=" target="_blank" class="calRes" id="choujiang">点击查看祈愿台数据</a></div></div></div></div><button class="panel-header"><span class="triangle"></span> <b>设置</b></button><div class="setting panel-content"><div class="switch-container"><div><span class="explanation">皮肤体验<span class="question-mark" data-tooltip="该功能仅限于体验皮肤&#10;喜欢还请购买支持画师&#10;此功能随时失效！！！">?</span></span> <label class="switch"><input id="skinSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="skinStateButton"><span class="explanation">动态皮肤</span> <label class="switch"><input id="skinStateSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">屏蔽动态<span class="question-mark" data-tooltip="屏蔽其他人的动态皮肤&#10;电脑卡顿的话可以打开">?</span></span> <label class="switch"><input id="skinStateBlockSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">皮肤壁纸 <span class="question-mark" data-tooltip="打开后进入皮肤详情界面进行设置&#10;可以将动静态皮肤设置为游戏壁纸&#10;也可以把静态皮肤图片保存到本地&#10;不建议与微端自定义背景同时使用">?</span> </span><label class="switch"><input id="skinPaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="paperStateButton"><span class="explanation">全局壁纸<span class="question-mark" data-tooltip="对局外也将背景替换为皮肤壁纸">?</span></span> <label class="switch"><input id="allPaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div style="display:none"><span class="explanation">金色卡背</span> <label class="switch"><input id="cardBackSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">明牌框框 <span class="question-mark" data-tooltip="明牌展示在武将下面">? </span></span><label class="switch"><input id="seatUISwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">五阶特效 <span class="question-mark" data-tooltip="其他角色显示五阶特效">? </span></span><label class="switch"><input id="generalSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">自动签到 <span class="question-mark" data-tooltip="自动领取打卡签到的奖励">? </span></span><label class="switch"><input id="autoSignSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">跳体验卡 <span class="question-mark" data-tooltip="签到会有体验武将&#10;如领取会污染将池&#10;开启按钮跳过领取&#10;月底记得手动领取">? </span></span><label class="switch"><input id="autoSignSkipSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">领武将包<span class="question-mark" data-tooltip="每天登录，自动领取免费的武将包">?</span></span> <label class="switch"><input id="autoWuJiangSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">公会三敲<span class="question-mark" data-tooltip="每天自动公会三敲&#10;无惧公会长的诫厉">?</span></span> <label class="switch"><input id="autoDrumSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">月卡奖励<span class="question-mark" data-tooltip="自动领取月卡奖励&#10;界小抄先行体验">?</span></span> <label class="switch"><input id="autoYueKaSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">自动砍树<span class="question-mark" data-tooltip="每天登录自动砍树&#10;界小抄先行体验">?</span></span> <label class="switch"><input id="autoKanShuSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">跳过弹窗<span class="question-mark" data-tooltip="跳过领取武将&#10;MVP结算&#10;出货弹窗&#10;老仙特效&#10;加快氪金速度">?</span></span> <label class="switch"><input id="skipWindowSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">击杀特效 <span class="question-mark" data-tooltip="屏蔽击杀特效">? </span></span><label class="switch"><input id="killEffectSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">兑换码通知<span class="question-mark" data-tooltip="关闭则不会显示兑换码通知">?</span></span> <label class="switch"><input id="CDKNotificationSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div></div><div class="width"></div><div class="ACContainer"><textarea class="AC-body" type="text" id="AC" name="AC" required placeholder="点击添加激活码&#13;&#10;当前激活码未激活"></textarea> <button class="AC-head" type="submit" id="ACSubmit">激活</button></div><div style="text-align:center"><a href="https://afdian.com/@yimadaO_o" target="_blank">开发不易 如您喜欢 不妨支持小抄</a><div class="width"></div><a href="https://qm.qq.com/q/PBA8Mt4rCI" target="_blank">加群一起玩</a><div class="width"></div><a href="https://support.qq.com/products/664780/" target="_blank">提需求</a><div class="width"></div><a href="https://greasyfork.org/zh-CN/scripts/448004-%E4%B8%89%E5%9B%BD%E6%9D%80%E6%89%93%E5%B0%8F%E6%8A%84/versions" target="_blank">查看历史更新</a><div class="width"></div><div class="uuid id" id="uuid">id：</div><div class="width"></div><div class="uuid nickName" id="nickName">昵称：</div><div class="width"></div><div class="uuid guildID" id="guildID">公会数字ID：</div><div class="width"></div><div class="width"></div></div></div><script><\/script></div>`;let $e=null;const st=" "+"2.9.41.1".replace(/^2\.9\./,""),Ii=`
【春节活动】；
1月19号~2月19号活动期间；
1.限时上架界小抄周卡(7元/7天)；
2.新老会员额外获得一个月时长（永久会员转化为发放一个月激活码，可以分享给朋友使用）；
【小抄更新内容】；
回滚一些可能导致卡顿的内容；
对此造成的不便还请见谅；
`.replace(/；/g,"<br>");var pn,mn;(mn=(pn=document.getElementById("createSkinIframeSource"))==null?void 0:pn.contentWindow)==null||mn.document;function Ci(){return window.WDVerSion="1.0.0",window.padding=ue.padding||0,window.addEventListener("resize",Ln),new Promise((t,e)=>{function n(){return new Promise(i=>{function a(){var s;typeof JSZipUtils<"u"&&typeof CtrUtil<"u"&&typeof((s=CtrUtil==null?void 0:CtrUtil.Ctr)==null?void 0:s.Ofb_Dec)<"u"&&typeof SystemContext<"u"&&document.getElementById("bgDiv")?_n(!0).then(i):setTimeout(a,1e3);}a();})}Promise.all([n()]).then(t).catch(e);})}function Ei(){var t,e,n,i;return window.removeEventListener("resize",Ln),window.removeEventListener("resize",Rn),window.removeEventListener("SGSresize",An),(t=document.getElementById("seatUI"))==null||t.remove(),(e=document.getElementById("rogueUI"))==null||e.remove(),(n=document.getElementById("cusBGDiv"))==null||n.remove(),(i=document.getElementById("createIframe"))==null||i.remove(),W.isFrameAdd=!1,!0}function Ln(){window.innerWidth=document.documentElement.clientWidth-window.padding;}function An(){window.dispatchEvent(new Event("resize"));}let dt;function Rn(){dt&&clearTimeout(dt),dt=setTimeout(()=>{Di(),dt=null;},500);}async function _n(t=!1){var e,n,i,a,s;if(t&&((e=document.getElementById("seatUI"))==null||e.remove(),(n=document.getElementById("rogueUI"))==null||n.remove(),(i=document.getElementById("cusBGDiv"))==null||i.remove(),(a=document.getElementById("createIframe"))==null||a.remove(),W.isFrameAdd=!1),!W.isFrameAdd){window.addEventListener("resize",Rn),SystemContext._gameScreenType=SystemContext.gameScreenType,SystemContext._gameScale=SystemContext.gameScale,Object.defineProperty(SystemContext,"gameScreenType",{get:function(){return this._gameScreenType},set:function(r){this._gameScreenType!==r&&(this._gameScreenType=r,window.dispatchEvent(new Event("SGSresize")));}}),Object.defineProperty(SystemContext,"gameScale",{get:function(){return this._gameScale},set:function(r){this._gameScale!==r&&(this._gameScale=r,window.dispatchEvent(new Event("SGSresize")));}}),window.addEventListener("SGSresize",An);try{document.getElementById("bgDiv").firstElementChild.draggable=!1,(s=document.querySelector("link[rel=stylesheet]"))==null||s.remove();}catch{}return Ai(),Ti(),Gi(),W.isFrameAdd=!0,vi(!0)}}function Ti(){var t=document.getElementById("bgDiv");if(t){var e=document.createElement("div");e.id="cusBGDiv",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.zIndex="0",e.style.pointerEvents="none";var n=document.createElement("video");n.className="bg-ani",n.id="sgsBgVideo",n.autoplay=!0,n.loop=!0,n.muted=!0,n.preload="auto",n.style.setProperty("object-fit","fill","important");var i=document.createElement("img");i.className="bg-ani",i.id="sgsBgIMG",i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i.style.zIndex="1",i.style.position="absolute",i.style.top="0",i.style.left="0",e.appendChild(n),e.appendChild(i),t.appendChild(e),window.dispatchEvent(new Event("resize"));}}function Di(){if(!SystemContext)return;z.width=SystemContext.gameWidth*SystemContext.gameScale>>0,z.height=SystemContext.gameHeight*SystemContext.gameScale>>0,z.scale=SystemContext.gameScale,z.seatUIs&&z.seatUIs.length>0&&(Gn(),xt());let t={width:(SystemContext.gameWidth*SystemContext.gameScale>>0)/window.devicePixelRatio,height:(SystemContext.gameHeight*SystemContext.gameScale>>0)/window.devicePixelRatio};ue.padding&&document.getElementById("createIframe")?(document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px",document.getElementById("createIframe").style.height="100%",document.getElementById("createIframe").style.right="0px",document.getElementById("createIframe").style.top="0px"):document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px";let e=document.getElementById("cusBGDiv"),n=document.getElementById("sgsBgVideo"),i=document.getElementById("sgsBgIMG"),a=document.getElementById("seatUI"),s=document.getElementById("rogueUI"),r=document.getElementById("centerUI"),o=((window.innerHeight*window.devicePixelRatio-SystemContext.gameScale*SystemContext.gameHeight)/(2*window.devicePixelRatio)+SystemContext.gameScale*SystemContext.gameHeight/2)/window.devicePixelRatio;e&&(e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.left=window.innerWidth/2+"px",e.style.top=o+"px"),n.width=t.width,n.height=t.height,n.style.left=window.innerWidth/2+"px",n.style.top=o+"px",i.width=t.width,i.height=t.height,a.style.width=`${t.width}px`,a.style.height=`${t.height}px`,a.style.left=window.innerWidth/2+"px",a.style.top=o+"px",s.style.width=`${t.width}px`,s.style.height=`${t.height}px`,s.style.left=window.innerWidth/2+"px",s.style.top=o+"px",z.centerX=window.innerWidth>t.width?t.width/2:window.innerWidth/2,z.centerY=t.height/2,r.style.left=210*SystemContext.gameScale/window.devicePixelRatio+"px",r.style.top=52*SystemContext.gameScale/window.devicePixelRatio+"px",z.cities.length>0&&Ct(z.cities);}function Gn(){const t={ScaledHeight:z.selfSeatUiUnscaledHeight*z.scale};let e=z.unscaledWidth*z.scale,n=z.unscaledHeight*z.scale;z.ScaleWidth=e,z.ScaleHeight=n;let i=z.height,a=z.width;var s=t.ScaledHeight,r=0,o=0,c=z.seatUIs.length;if(c!=1){r=e,o=n;var d=[];d=z.seatUIs;var f=d.length-1,l=0,u=0,p=0;f<3?u=f:f==3?u=1:f==4||f==6?u=2:(f==5||f==7)&&(u=3),l=f-u>>1,p=f-l-u,M.isShanHeTu&&c==3&&z.friendGeneral==1&&(u=1,p=1);var x=1,E,y,g=0,B=0,ee=0,k=0,T=z.rightBarWidth*z.scale,H=0;if(l>0){var G=r,Q=o*l;for(ee=(i-s-Q)*.25>>0,z.verticalGap=ee,Q+=(l-1)*ee,E=x+l,g=a-G-z.paddingRight*z.scale-T-H,B=(i-s-Q-z.paddingTop*z.scale-z.paddingBottom>>1)+(z.paddingTop+10)*z.scale+Q+z.leftRightTop;x<E;x+=1)y=d[x],B-=n,y.posX=(g-5>>0)/window.devicePixelRatio,y.posY=(B+n>>0)/window.devicePixelRatio,y.DisplayLocation="Right",B-=ee;}if(u>0){var te=r*u;for(k=(a-T-te)*.07>>0,z.horizontalGap=k,te+=(u-1)*k,E=x+u,g=(a-te-T)/2+te+(a<=1600?z.paddingLeftTopExtra:0),B=(z.paddingTop+10)*z.scale;x<E;x+=1)y=d[x],g-=e,y.posX=(g>>0)/window.devicePixelRatio,y.posY=(B+n>>0)/window.devicePixelRatio,y.DisplayLocation="Top",g-=k;}var he=0;if(p>0){var xe=o*p;for(ee=(i-s-xe)*.25>>0,xe+=(p-1)*ee,E=x+p,g=z.paddingLeft*z.scale,B=(i-s-xe-z.paddingTop*z.scale-z.paddingBottom>>1)+(z.paddingTop+10)*z.scale+z.leftRightTop;x<E;x+=1)y=d[x],y&&(y.DisplayLocation="Left",y.posX=(g+he>>0)/window.devicePixelRatio,y.posY=(B+n>>0)/window.devicePixelRatio),B+=o+ee;}}}function Pt(t){if(z.seatUIs=[],xt(),t===null)return;let e=M.sequence(M.mySeats[0]);z.seatUIs=e.map(n=>({actualSeatID:M.getOrder(n)+1})),Gn(),xt();}function Bi(){document.getElementById("sgsBgIMG").src="https://web.sanguosha.com/10/pc/res/assets/runtime/general/maxBig/604701.png",setTimeout(function(){document.getElementById("sgsBgIMG").src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";},2e4);}function Li(){var t=document.createElement("div");t.id="sidebarHint",t.innerText="拖到这里变为变为侧边栏，再次拖动取消侧边栏",document.body.appendChild(t);}function Ai(){var t=document.createElement("div");t.id="seatUI",t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.pointerEvents="none",t.style.display="";var e=document.createElement("div");e.id="rogueUI",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.pointerEvents="none",e.style.display="",ue.seatUISwitch?t.style.display="block":(t.style.display="none",document.querySelectorAll("#seatUI > *:not(.city)").forEach(i=>i.style.display="none"));var n=document.createElement("div");n.id="centerUI",n.className="centerUI",n.style.position="absolute",n.style.pointerEvents="auto",n.onmouseover=function(){document.querySelectorAll("div.city").forEach(a=>{a.classList.remove("hide"),a.classList.add("show");});},n.onmouseout=function(){document.querySelectorAll("div.city").forEach(a=>{a.classList.remove("show"),a.classList.add("hide");});},e.appendChild(n),document.body.appendChild(t),document.body.appendChild(e);}function Ri(){for(let t=0;t<=7;t++){let e="or"+(t+1);document.getElementById(e).style.display="block";}}function _i(t){for(let e=7;e>=t;e--){let n="or"+(e+1);document.getElementById(n).style.display="none";}}function Gi(){let t=document.getElementById("createIframe");if(!t){t=document.createElement("div"),t.id="createIframe",t.id="createIframe",t.className="createIframe",t.style.position="fixed",t.style.overflow="hidden",t.style.resize="vertical",t.style.top="31px",t.style.right="155px",t.style.width="230px",t.style.height="500px",t.style.zIndex="10000000000",t.style.display="flex",t.style.flexDirection="column",t.style.color="#f2de9c",t.style.background="rgb(35, 32, 29)",t.style.userSelect="none",t.style.textAlign="left",t.style.transition="height 200ms",t.style.borderRadius="8px",t.style.transformOrigin="top right",t.style.transform="translate(0px, 0px)";var e=document.createElement("p");e.id="header",e.className="header",e.style.margin="1px",e.style.userSelect="none",e.style.cursor="grab",e.style.display="flex",e.style.alignItems="center",e.style.fontSize="20px",e.style.borderRadius="5px";var n=document.createElement("span");n.id="title",n.style="margin-right: auto;",n.innerText="三国杀打小抄"+st,t.appendChild(e),t.onmouseover=function(){document.querySelectorAll("div.city").forEach(d=>{d.classList.remove("hide"),d.classList.add("show");});},t.onmouseout=function(){document.querySelectorAll("div.city").forEach(d=>{d.classList.remove("show"),d.classList.add("hide");});};var i=document.createElement("button");i.innerText="-",i.id="toggle-me",i.style="text-align: center;color: #f2de9c;background: rgb(35, 32, 29);border-radius: 6px;width: 26px;height: 26px;border: 1px solid rgb(212, 212, 162);cursor: pointer;user-select: none;background: rgb(107, 30, 30);display: flex;align-items: center;justify-content: center;margin: 1px;font-size: 20px;",i.type="button",i.addEventListener("mouseover",function(){i.style.backgroundColor="rgb(130, 30, 30)";}),i.addEventListener("mouseout",function(){i.style.backgroundColor="rgb(107, 30, 30)";}),e.appendChild(n),e.appendChild(i),localStorage.getItem("DXCVersion")!=st&&(ze(`小抄已经更新到${st}<br>${Ii}`,"acTooltip",3e4,"green"),localStorage.setItem("DXCVersion",st)),document.body.appendChild(t),$e=document.createElement("div"),$e.style="border: none;width: 230px;height: 100%;margin: 0px;overflow-y: auto;overflow-x: hidden;",$e.id="iframe-source",t.append($e),$e.innerHTML=Wi,$e.querySelectorAll("script").forEach(c=>{const d=document.createElement("script");c.src?(d.src=c.src,d.async=c.async):d.textContent=c.textContent,document.body.appendChild(d),c.remove();});const s=document.querySelectorAll('input[id$="Switch"]'),r=document.querySelectorAll(".slider");s.forEach((c,d)=>{const f=r[d];c.addEventListener("change",l=>{const u=l.target.checked;try{gsap.to(f,{duration:.4,ease:"power2.inOut",css:{"--slider-position":u?"30px":"2px"},onStart:()=>{gsap.to(f,{scale:1.1,duration:.2,ease:"power1.inOut"});},onComplete:()=>{gsap.to(f,{scale:1,duration:.2,ease:"power1.inOut"});}}),gsap.to(f,{duration:.4,ease:"power2.inOut",boxShadow:u?"0 0 15px rgba(255, 204, 0, 1)":"0 0 0 rgba(0, 0, 0, 0)",background:u?"linear-gradient(to right, #ff7b54, #ffcc00)":"rgb(35, 32, 29)"});}catch(p){console.error("GSAP animation failed:",p);}});}),document.querySelectorAll(".panel-header").forEach(c=>{c.addEventListener("click",function(){const d=this.nextElementSibling;this.classList.toggle("active"),d.style.maxHeight?d.style.maxHeight=null:d.style.maxHeight=d.scrollHeight+"px";const f=new MutationObserver(()=>{d.style.maxHeight&&(d.style.maxHeight=d.scrollHeight+"px");});f.observe(d,{childList:!0,subtree:!0,characterData:!0}),d.style.maxHeight||f.disconnect();});}),document.querySelectorAll(".laya-header")[0].click(),document.querySelectorAll(".question-mark").forEach(function(c){c.addEventListener("mouseenter",function(d){let f=document.createElement("div");f.classList.add("tooltip","top"),f.textContent=c.getAttribute("data-tooltip"),document.body.appendChild(f);const l=c.getBoundingClientRect();f.style.left=`${l.left+window.scrollX+l.width/2-f.offsetWidth/2}px`,f.style.top=`${l.top+window.scrollY-f.offsetHeight-8}px`,f.classList.add("visible"),c.addEventListener("mouseleave",function(){f.classList.remove("visible"),setTimeout(()=>{f.remove();},100);});});});}Li(),Oi(),Pi(),ui();}function Oi(){var t=document.getElementById("toggle-me");t.onclick=function(){W.closeIframe=!W.closeIframe,W.closeIframe?(document.getElementById("iframe-source").style.display="none",t.innerText="+",document.getElementById("createIframe").style.height="30px",document.getElementById("createIframe").style.opacity="0.6",document.getElementById("createIframe").style.width="75px",document.getElementById("title").innerText="小抄",document.getElementById("createIframe").style.resize="none",ue.padding&&(ue.padding=0,window.dispatchEvent(new Event("resize")),cn=0,dn=0,draggable.style.transform=`translate(${cn}px, ${dn}px)`)):(document.getElementById("iframe-source").style.display="block",t.innerText="-",document.getElementById("createIframe").style.height="500px",document.getElementById("createIframe").style.opacity="1",document.getElementById("createIframe").style.width="230px",document.getElementById("title").innerText="三国杀打小抄"+st,document.getElementById("createIframe").style.resize="vertical");},document.getElementById("autoInviteSwitch").addEventListener("click",n=>{var a;if(n.target.checked){var i=(a=document.getElementById("inviteName"))==null?void 0:a.value;typeof i=="string"&&i.length!==0&&(W.inviteName=i,Xe("INVITE_NAME",W.inviteName),de(`为目前机器所有账号绑定助力${W.inviteName}，如需更改/删除，更改/删除昵称重新打开开关`)),wn(W.inviteName.trim()||W.nickname);}else _t("INVITE_NAME");}),document.getElementById("guanxing").onmousedown=function(){const n=on(kt(_.gxjson),"myWindowGuanXing","观星");ln(n);},document.getElementById("gamerecord").onclick=async function(){for(this.disabled=!0,Gt(W.userID);Ce.req;)await ye(500);this.disabled=!1,W.v&&await Yn();const n=on(Mn(JSON.stringify(Ce)),"myWindowGameRecord","游戏记录");ln(n);},document.getElementById("mizhu").onmousedown=function(){let n=document.querySelectorAll(".mizhu");M.mySeats.length<=1?(n.forEach(i=>i.style.display="none"),nn(Array.from(ne.shoupai(M.mySeats[0]),i=>ae[i].number))):M.mySeats.forEach((i,a)=>{n[a].style.display="block",n[a].innerText=M.name(i),n[a].onclick=()=>{nn(Array.from(ne.shoupai(i),s=>ae[s].number));},a==0&&n[a].click();});};function e(n,i,o){var c,d,f,l;var s=n.target,r=s.checked,o=s.id;if(!(o==="autoBotSwitch"||o==="autoHGSwitch")){if(ue[o]=r,o=="skinSwitch")document.getElementById("skinStateButton").style.display=r?"block":"none";else if(o=="seatUISwitch")document.getElementById("seatUI").style.display=r?"block":"none";else if(o=="skinPaperSwitch"){let u=(d=(c=D.find("SceneLayer",null))==null?void 0:c.constructor)==null?void 0:d.name;document.getElementById("paperStateButton").style.display=r?"block":"none",ct.switch(r&&(Je.includes(u)||ue.allPaperSwitch&&!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(u)));}else if(o=="allPaperSwitch"){let u=(l=(f=D.find("SceneLayer",null))==null?void 0:f.constructor)==null?void 0:l.name;ct.switch(r&&!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(u)||Je.includes(u));}}}if(window.padding==0){console.warn("closesidebar");var t=document.getElementById("toggle-me");console.warn("toggle"),t.click();}window.dispatchEvent(new Event("resize")),document.querySelectorAll(".switch").forEach(n=>n.addEventListener("change",e)),document.getElementById("ACSubmit").onclick=xn,Ni();}function Ni(){let t=document.getElementById("openStore");t.onclick=function(){D.class("GameEventDispatcher").ShowWindow("RogueJiShiWindow"),ze("满足以下条件购买技能或者装备可跳关<br>1、已经进入对局<br>2、商店有可替换的装备/技能<br>例如身上有麒麟弓，商店有贯石斧<br>购买完成之后，投降之后会显示替换提示<br>","acTooltip",1e4,"green",!1);};}function on(t,e,n){let i=document.getElementById("myWindow"+e);if(i)return i.style.display="block",i;const a=document.createElement("div");a.classList.add("window"),a.id=e;const s=document.createElement("div");s.classList.add("window-header");const r=document.createElement("div");r.classList.add("title"),r.innerText=n;const o=document.createElement("div");o.classList.add("controls");const c=document.createElement("button");c.innerText="⬜";const d=document.createElement("button");d.innerText="❌",o.appendChild(c),o.appendChild(d),s.appendChild(r),s.appendChild(o);const f=document.createElement("iframe");return f.classList.add("window-content"),f.srcdoc=`
    <html>
      <head><meta charset="utf-8" /><title>${e}</title></head>
      <body>${t}</body>
    </html>
  `,a.appendChild(s),a.appendChild(f),document.body.appendChild(a),{windowDiv:a,maximizeBtn:c,closeBtn:d}}function ln(t){const{windowDiv:e,maximizeBtn:n,closeBtn:i}=t;let a=!1;n.addEventListener("click",()=>{a?e.classList.remove("fullscreen"):e.classList.add("fullscreen"),a=!a;}),i.addEventListener("click",()=>{e.style.display="none";});}let cn=0,dn=0;function Pi(){const t=document.getElementById("header"),e=document.getElementById("createIframe"),n=document.getElementById("sidebarHint");let i=!1,a=0,s=0,r=0,o=0,c=!1;const d=u=>{t.style.cursor="grabbing",i=!0,a=u.clientX||u.touches[0].clientX,s=u.clientY||u.touches[0].clientY,e.style.userSelect="none",e.style.willChange="transform",document.addEventListener("mousemove",f),document.addEventListener("mouseup",l),document.addEventListener("touchmove",f),document.addEventListener("touchend",l);};t.addEventListener("mousedown",d),t.addEventListener("touchstart",d);function f(u){if(!i)return;n.style.display="flex";const p=u.clientX||u.touches[0].clientX,x=u.clientY||u.touches[0].clientY,E=p-a,y=x-s;r+=E,o+=y,ue.padding&&(ue.padding=0,e.style.height="500px",window.dispatchEvent(new Event("resize"))),c||(c=!0,requestAnimationFrame(()=>{e.style.transform=`translate(${r}px, ${o}px)`,c=!1;})),window.innerWidth-p<25?n.style.backgroundColor="rgba(55, 40, 32, 1)":n.style.backgroundColor="rgba(55, 40, 32, 0.8)",a=p,s=x;}function l(u){n.style.display="none",t.style.cursor="grab",i=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",l),e.style.willChange="auto",window.innerWidth-(u.clientX||u.touches[0].clientX)<25&&t.id==="header"&&(ue.padding||(W.closeIframe&&document.getElementById("toggle-me").click(),ue.padding=232,window.dispatchEvent(new Event("resize")),r=0,o=0,e.style.transform=`translate(${r}px, ${o}px)`));}}function Rt(t,e){let{name:n,number:i,color:a}=ae[t??0];if(t!==void 0&&(!t||!n||me.name[n]===void 0))return;let s=ne.unknown;(t?[n]:Object.keys(me.name)).forEach(r=>{let o=s.filter(d=>me.name[r].has(d)).length,c=document.getElementById(r);c.textContent=o>1?o+r:r,c.disabled=o<=0;}),(t?[5,6].filter(r=>me.color[r].has(t)).concat(a):[1,2,3,4,5,6]).forEach(r=>{var d;let o=s.filter(f=>me.color[r].has(f)).length,c=document.getElementById(["","heart","club","spade","diamond","hongsha","heisha"][r]);c.innerHTML=(d=c.innerHTML)==null?void 0:d.replace(/-?[0-9]+/,String(o));}),t?me.query.has(t)&&me[t].plot(e==0?0:1):me.draw();}function Mi(){for(let t=1;t<=3;t++)document.getElementById("type"+t).innerHTML="";for(let t of document.getElementsByClassName("order-body"))t.innerHTML="",t.title="一二三四五六七八"[t.id.slice(-1)]??t.title;for(let t in me.name){let e=document.getElementById("type"+ae[[...me.name[t]][0]].type),n=document.createElement("button");n.id=t,n.className="cardType",n.innerText=t,n.onclick=()=>{me.queryone("name",t);},e.appendChild(n);}z.seatUIs=[],xt(),Et();}var Hi=[1562902854,1678425373];const un=function(){const t=typeof window.requestIdleCallback=="function";return console.warn("Use IdleCallback",t),function(e,n=500){if(t){const i=window.requestIdleCallback(e),a=setTimeout(()=>{window.cancelIdleCallback(i),e();},n);return ()=>clearTimeout(a)}else return setTimeout(e,0)}}();Nt(t=>{const e=W.recGoods[t.secId];if(e&&e.length>0){for(let n of e)yn(t.secId,n.GoodsBaseID,t.openTime,t.levelId,n.ChangeCount);delete W.recGoods[t.secId];}},6e4);function ji(t){var r,o,c,d,f,l,u,p,x,E,y,g,B,ee,k,T,H,G,Q,te,he,xe,be,C,R,q,Y,h,m,v,S;try{if(!t)return;if((r=t.startsWith)!=null&&r.call(t,"socket连接关闭")){$t({content:"您的二次密码认证错误，请稍后再试"},"确定");return}if((o=t.startsWith)!=null&&o.call(t,"--checkPlayChatFast msg=INFO:")){let b=atob(t.slice(29,t.indexOf(" soundUrl",29))),[N,L,j,V]=b.split(":").map($=>isNaN(Number($))?$:Number($));if(console.warn(b,{[N]:L,[j]:V}),N=="mainSeatID"){let $=D.order.indexOf(L);$>=0&&(D.order.splice($,1),D.order.push(L)),fe(()=>M.mySeats[0]>=0).then(()=>{var K,ge,Le,He;((He=(Le=(ge=(K=D.gamescene)==null?void 0:K.seatContainer)==null?void 0:ge.selfSeatUi)==null?void 0:Le.seat)==null?void 0:He[j])==V&&D.chat(`sub-SeatID:${M.mySeats[0]}  :${j}:${V}`,"INFO");});}else if(N="sub-SeatID"){let $=D.order.indexOf(L);$>=0&&(D.order.splice($,1),D.order.splice(-1,0,L));}}else if((c=t.startsWith)!=null&&c.call(t,"SwitchScene"))un(()=>{var N,L;let b=D.scene=t.slice(t.lastIndexOf("-")+1);U.end(Je.includes(b)),ue.skinPaperSwitch&&ct.switch(ue.allPaperSwitch?!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(b):Je.includes(b)),b=="TableScene"?(si(),W.autoBotSwitch&&oe.delay("auto",()=>Ve(()=>W.autoBotSwitch&&D.readyStart(),20),8e3)):b=="HallScene"?(W.autoBotSwitch===!0||W.autoBotSwitch===28)&&(de("5秒后开始酒馆自动挂机"),oe.delay("auto",()=>Ve(()=>(W.autoBotSwitch===!0||W.autoBotSwitch===28)&&D.newRoom(),10,1e3),5e3)):["NewPaiWeiScene","DouDiZhu2023Scene","RogueLike1v1Scene","RogueLikeBigMapScene"].some(j=>t.endsWith(j))&&((W.autoBotSwitch===!0||W.autoBotSwitch===28)&&((N=document.getElementById("autoBotSwitch"))==null||N.click()),(W.autoBotSwitch===9||W.autoBotSwitch===29)&&((L=document.getElementById("autoHGSwitch"))==null||L.click()));});else if(ue.skipWindowSwitch&&["TianShuWindow","RogueLike1v1ZhanJiWindow","GameResultWindow","GeneralOpenResultWindow","GetPropSpecialWindow","GameMvpWindow","SkinOpenResultWindowNew","OldbackOneClickDrawAwdWin","VersionNoticeWindow","AdPushWindow"].includes(t)){let b=t=="GetPropSpecialWindow"?5:1,N=t=="TianShuWindow"?L=>{var j;return (L==null?void 0:L.type)==6?(L.type=0,(j=L.Close)==null?void 0:j.call(L)):"false"}:t=="GetPropSpecialWindow"?L=>{var j,V;return (j=L==null?void 0:L.Hide)==null||j.call(L),(V=L==null?void 0:L.Close)==null?void 0:V.call(L)}:t=="RogueLike1v1ZhanJiWindow"?L=>{var j;return (j=L==null?void 0:L.onClickClose)==null?void 0:j.call(L)}:L=>{var j;return (j=L==null?void 0:L.Close)==null?void 0:j.call(L)};Ve(()=>fe(()=>D.find(null,t),10,200*b).then(L=>Array.isArray(L)?L.every(N):L!=null&&L.Close?N(L):"done"),b,1e3);}else if((d=t.endsWith)!=null&&d.call(t,"View"))t=="VuplexWebView"&&oe.trigger("VuplexWebView");else if((f=t.endsWith)!=null&&f.call(t,"Window"))t=="MailWindow"?Ot():t=="ChangeSkinWindow"?ue.skinSwitch&&fe(()=>D.find("WindowLayer","ChangeSkinWindow","selectView","itemList"),50,100).then(b=>(b==null?void 0:b.length)>1&&(b==null?void 0:b.forEach(N=>{N.dynamicState=N.hasSkin?N.dynamicState?-1:-2:-3,N.hasSkin=N.bg.mouseEnabled=!0,N.blackbg.visible=N.isUsing=!1,N.timeBg.visible=N.composeBg.visible=N.composeIcon.visible=N.composeTxt1.visible=N.composeTxt2.visible=N.composeTxt.visible=N.timeLimiteTxt.visible=!1;}))):t=="NS2023ComposeWindow"?ai():t=="SkinInfoWindow"?ue.skinPaperSwitch&&ti():t=="SelectSkinWindow"?W.autoBotSwitch!=9&&fe(()=>D.find("WindowLayer",t)).then(b=>b==null?void 0:b.Close()):t=="SelectCardWindow"?D.flag===!0&&$n(!0,!0):t=="WuGuFengDengWindow"&&D.flag===!0?D.wugu():["SelectGeneralWindow","SelectGeneralHappyWindow","SelectCountryWarGeneralWindow"].includes(t)&&W.autoBotSwitch?setTimeout(()=>{fe(()=>D.find("WindowLayer",t)).then(async b=>{var j,V;if(!((j=b==null?void 0:b.generalUis)!=null&&j.length))return;if(t=="SelectCountryWarGeneralWindow"){for(let $ of b.generalUis)$!=null&&$.Card&&($!=null&&$.CanSelect)&&(b.onClickGeneralCard($),await ye(1e3));await ye(1e3),(V=b.confirmBtnEvent)==null||V.call(b);return}let N=-1,L=null;b.generalUis.some($=>{var ge;if($!=null&&$.dianJiangSk)return L=$;let K=((ge=$==null?void 0:$.generalInfo)==null?void 0:ge.quality)||0;K>N&&(N=K,L=$);}),L==null||L.sureBtnClick(),W.autoBotSwitch!=9&&setTimeout(()=>L==null?void 0:L.sureBtnClick(),500);});},3e3):t=="AdPushWindow"&&fe(()=>D.find("WindowLayer",t)).then(b=>b.curViewList[0].closeClicker(),de("小抄已经为你跳过广告和祈愿台出货播报"));else if(t.className===void 0&&!["ClientGeneralSkinReq"].includes((l=t.constructor)==null?void 0:l.name))return;ue.killEffectSwitch&&t.className=="CClientGameRewardPointNTF"&&(t.Type=0);let{ProtoObj:I,className:w,SeatID:O,SrcSeatID:X,targetSeatID:Z,SpellID:A,Param:se,Params:P,Datas:re,DataCount:Se,CardCount:le,CardIDs:F,FromID:Pe,FromZone:pe,FromPosition:ke,FromZoneParam:Mt,ToID:Fe,ToZone:ce,ToPosition:bt,ToZoneParam:Ht,MoveType:Me,Type:qe}=t;if(w||(w=(u=t.constructor)==null?void 0:u.name),!W.userID&&t.userID&&["ClientLoginRep","ClientUserDataCounterNtf","ClinetNetSpeedNtf","SmsgUpdateTaskListToClient","ClientGuildMemberChangeNtf"].includes(w)){if(Object.assign(W,{userID:t.userID,nickname:t.Nickname||W.nickname||"",account:t.Account||localStorage.LastUserName||localStorage.SGS_LASTLOGIN_ACCOUNT||localStorage.SGS_LASTLOGIN_ACCOUNT1||W.account||""}),W.UsedGeneralSkinID=Oe(W.account+"::UsedGeneralSkinID",W.UsedGeneralSkinID),Object.assign(ct.res,Oe(W.userID+"::paperRes",{},!0)),ii(),Hi.includes(W.userID))return;Promise.all([_n(),fe(()=>{var ge;const b=D.get("QldjChooseRuleWindow");let{clientId:N,nickname:L,guildID:j,guildName:V,Level:$,vipLevel:K}=((ge=b==null?void 0:b.seat)==null?void 0:ge.playerInfo)||{};return D.del("QldjChooseRuleWindow"),N!=W.userID||!L||!V&&j?null:(Object.assign(W,{nickname:L,guildID:j,guildName:V,Level:$,vipLevel:K}),L)},30,1e3)]).then(()=>{ue.autoSignSwitch&&li(ue.autoSignSkipSwitch),ri(W.userID);let b=document.getElementById("uuid");b.innerText="id："+W.userID,b.onclick=function(){Ze(W.userID,!1),b.innerText="复制成功",setTimeout(()=>{b.textContent="id："+W.userID;},"500");};let N=document.getElementById("nickName");N.innerText="昵称："+W.nickname,N.onclick=function(){Ze(W.nickname,!1),N.innerText="复制成功",setTimeout(()=>{N.textContent="昵称："+W.nickname;},"500");};let L=document.getElementById("guildID");L.innerText="公会数字ID："+W.guildID,Fn(),document.getElementById("inviteName").setAttribute("placeholder",W.nickname||""),Oe("INVITE_NAME")&&Oe("INVITE_NAME")!=W.Nickname&&(document.getElementById("inviteName").value=Oe("INVITE_NAME"));async function j(V=2e4){var ge;let K=0;for(;!W.nickname||!W.userID;)if(await new Promise(Le=>setTimeout(Le,2e3)),K+=2e3,K>=V){de("没办法获取到昵称用于助力 请重新登录");return}wn(((ge=W.inviteName)==null?void 0:ge.trim())||W.nickname);}Date.now()<new Date("2024-12-15")&&ue.autoInviteSwitch&&j();});}if(w=="ClientNianComposeRep"){console.warn(t);var e=localStorage.getItem(W.account+"::NianComposeRecord"),n=e&&((p=JSON.parse(e))==null?void 0:p.NianComposeRecord)||[];n.push({id:t.goodsbaseId,items:t.composeId});try{fetch("https://goka.top:8080/chunlian",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});}catch(b){console.error("Error parsing JSON:",b);}}if(w=="ClientGeneralSkinRep"){M.mySeats[0]===void 0&&qe==5&&t.ClientID<10&&(M.setMyID(t.ClientID),Pt());let b=t.GeneralSkinList[0],N=M.find(M.mySeats[0],b.GeneralID,!0);if(b.GeneralID!=N&&ue.skinStateBlockSwitch&&(b.state=0),ue.skinSwitch&&N){if([46,479].includes(b.GeneralID)&&Bi(),W.UsedGeneralSkinID.UsedGeneralSkinID[N]){let[L,j]=String(W.UsedGeneralSkinID.UsedGeneralSkinID[N]).split("_").map(V=>parseInt(V));b.SkinID=L,b.skin_type=j||0;}b.state=ue.skinStateSwitch?1:0;}}else if(w=="ClientGeneralSkinReq"){if(ue.skinSwitch){let{RealGeneralID:b,SkinID:N,state:L}=t.SkinItem;if(!(L<0))return;L<-2&&(t.SkinItem.SkinID=0),t.SkinItem.state=L<-1?0:1;let[j,V]=String(W.UsedGeneralSkinID.UsedGeneralSkinID[b]).split("_").map(Number);if(j==N)if(N in _.skinSP)N=N+"_"+_.skinSP[N][(V||1)%_.skinSP[N].length];else return;W.UsedGeneralSkinID.UsedGeneralSkinID[b]=N,Xe(W.account+"::UsedGeneralSkinID",W.UsedGeneralSkinID);}}else if(w!="MsgReconnectGame"){if(w=="ClientOfficerInfoRep")W.curOfficerLv=t.curOfficerLv;else if(w=="decodeSSCChatmsgNtf")I.scene==11&&(I.scene=2);else if(w=="ClientRoleGeneralStarRep")ue.generalSwitch&&(t.Star>=0&&(t.Star=4),I.star>=0&&(I.star=4));else if(w=="ClientGameRecordInfoRep")(I==null?void 0:I.query_uid)==W.userID&&[26,35,44,5,7].includes(I==null?void 0:I.id)&&((x=Ce==null?void 0:Ce.req)==null||x.delete(I.id),((E=Ce.req)==null?void 0:E.size)==0&&delete Ce.req,(y=I==null?void 0:I.all_record)!=null&&y.length&&Xn(I.id||0,I.all_record));else if(w=="DbsCcUserGoodshintNtf")qe==2010&&typeof t.GoodsList=="object"&&(W.goods=di(W.goods,t.GoodsList));else if(w=="decodeClientSecretInfoRep"){if(Object.keys(W.goods).length>0){_.currentSec=I.secId;for(let b of W.goods)Dn(_.currentSec,b.GoodsBaseID,b.ChangeCount,I.openTime),(b.GoodsBaseID==11180||Tn(b.GoodsBaseID))&&yn(I.secId,b.GoodsBaseID,I.openTime,I.levelId,b.ChangeCount);}W.goods=[];}else if(w=="decodeClientTavernInfoRep"){let b=((g=I==null?void 0:I.tavern_info)==null?void 0:g.day_quest_finished_cnt)??0;if(W.autoBotStatus=30-b,W.autoBotInfinite||document.querySelector(".status").style.setProperty("--bot-status",`"${W.autoBotStatus.toString().padStart(2,"0")}"`),b>=30){let N=document.getElementById("autoBotSwitch");N!=null&&N.checked&&!W.autoBotInfinite&&N.click(),de(`今日已获得亲密度：${b}<br>恭喜你完成任务~`);}else b>0&&de(`今日已获得亲密度：${b}，还差 ${30-b} 亲密度<br>继续努力吧~`);}else if(w=="ClientSecKillInfoRep")bi(t.Data);else if(w=="decodeRogueLikeDataSync")Et(I);else if(w=="ClientActivitysetDataRep")un(()=>{Et();});else if(w=="decodeRogueLikeGameOverRep")document.getElementById("chongsheng").innerText="重生是否发动：是";else if(w=="SmsgGamePlayerDead")(W.autoBotSwitch===!0||W.autoBotSwitch===28)&&!W.autoBotInfinite&&O==M.mySeats[0]&&setTimeout(()=>{var b,N,L,j,V;((L=(N=(b=D.gamescene)==null?void 0:b.seatContainer)==null?void 0:N.seatUIs)==null?void 0:L.reduce(($,K,ge,Le)=>{var He,jt,Ut,zt,Ft;return $+((He=K==null?void 0:K.seat)!=null&&He.figure&&K.seat.figure==Le[0].seat.figure||(zt=(Ut=(jt=K==null?void 0:K.seat)==null?void 0:jt.playerInfo)==null?void 0:Ut.showName)!=null&&zt.includes("金")?1:-1)*((Ft=K==null?void 0:K.seat)==null?void 0:Ft.currentHp)},0))<0&&((V=(j=D.gamescene)==null?void 0:j.topMenu)==null||V.onClickBack(),$t({title:"退出游戏"},"确定",!0));},1e4);else if(w=="MsgGameDealCharacter"){if(W.userID==1099193522&&typeof Allows<"u"&&typeof qe<"u"&&qe==1){var i=Math.floor(Math.random()*Allows.length+1);document.getElementById("title").innerText="选"+i;}}else if(w=="GsCUpdateRoleDataNtf")M.mySeats[0]===void 0&&t.StateID===58&&(M.setMyID(O),console.warn(w,"游戏人数："+M.size+", 我的座位："+M.mySeats,M.seatIDs));else if(w=="GsCFirstPhaseRole")O!==void 0&&(M.firstID=O,console.warn("先手位置:"+M.firstID));else if(w=="MsgGameRoundNtf")t.isPassed&&(U.isPassed=t.isPassed);else if(!(w=="MsgGameOver"||w=="ClientRecommendShopItemRep"||w=="ClientLeavetableRep")){if(w=="decodeRougeBaseInfoRep")z.friendGeneral=((B=I==null?void 0:I.friendGeneral)==null?void 0:B.length)??z.friendGeneral;else if(w=="MsgGamePlayCardNtf")U.ready(t.CardList);else if(w=="SmsgGameSetCharacter")M.mySeats[0]===void 0&&M.isDouDiZhu&&t.Infos.length==1&&M.setMyID(t.Infos[0].SeatID),t.Infos.forEach(({SeatID:b,CharacterID:N})=>{M.setGeneral(b,N);});else if(w=="GsCGuoZhanSetCharacter")(ee=t.GeneralData)==null||ee.forEach(({index:b,cardID:N})=>{M.setGeneral(O,N,b);});else if(w=="MsgGameTurnNtf")U.enter(t.TurnCnt);else if(w=="GsCGamephaseNtf")U.enter(null,t.Round,O);else if(w=="GsCUpdateRoleDataExNtf")U.currentID==O&&t.DataID==1&&Array.isArray(t.Datas)&&(document.getElementById("sha").innerText="剩余出杀次数："+Math.max(0,re[2]-re[1]),O==M.mySeats[0]&&M.isShanHeTu&&Be.itemId.includes(2042)&&(re[1]==0&&(Be.previousData=0),Be.sanBanFu+=re[1]-Be.previousData,Be.previousData=re[1],Be.sanBanFu%3==0?document.getElementById("sanBanFu").innerText="三板斧计数器":document.getElementById("sanBanFu").innerText="三板斧计数器："+((Number(Be.sanBanFu)-1)%3+1)));else if(w=="GsCTriggerSpellNew"){if(ue.wuxieSwitch){const b=j=>{var V;return j?`<font color='#FFFF00' href='1|${j}|0|2'>"${(V=_.spellDict[j])==null?void 0:V.name}"</font>`:"未知技能"},N=j=>(V=>V?`<font color='#FFFF00' >${V}${j==M.mySeats[0]?"(你)":""}</font>`:"")(M.name(j,null));let L=(k=t.TriggerSpellData)!=null&&k.length?t.TriggerSpellData:[{}];if(!L.length)return;D.trace("<font color='#00FFFF'>&gt;&gt;</font>"+((T=L[0])!=null&&T.SpellId?"":((j,V)=>j&&V?j+"的"+V:j||V)(N(t.SrcSpellCasterSeat),t.SrcSpellID?b(t.SrcSpellID):""))+"<font color='#00FFFF'>&gt;</font>"+(j=>j?"向"+j:"")(N(t.TriggerSeatId))+"询问"+L.map(({SpellId:j,SeatId:V,Targets:$})=>((K,ge)=>ge?`对${ge}的`:K?`${K}的`:"")(V!=t.TriggerSeatId?N(V):"",($==null?void 0:$.map(N).join(","))||"")+b(j)).join(","));}}else if(w=="ClientHappyGetFriendHandcardRep")M.find(t.seatId,[7004,2087,3048])&&new ne(t.seatId).show(t.Cards);else if(w=="PubGsCUseCard")M.mySeats[0]==O&&en([t.CardID]),U.currentID==O&&M.find(U.currentID,[7003,2086,3047])&&t.useType==1&&t.fromZone!=1&&!t.isSend?(U.spellSpace[7011]||(U.spellSpace[7011]={count:0,color:new Set}),ae[t.CardID].type!=3&&U.spellSpace[7011].count++,U.spellSpace[7011].color.add(ae[t.CardID].c),document.getElementById("suit").innerHTML="["+U.spellSpace[7011].count+"]"+Array.from(U.spellSpace[7011].color).join("")):U.currentID==O&&M.find(U.currentID,[330,1068])&&t.useType==1&&!t.isSend&&(document.getElementById("suit").innerHTML=ae[t.CardID].cn);else if(w=="PubGsCUseSpell")A==3324&&(document.getElementById("chongsheng").innerText="重生是否发动：是"),M.mySeats[0]==O&&F.length==1&&en(F),A==2143?(U.spellSpace[A]||(U.spellSpace[A]=new Set),F.forEach(b=>U.spellSpace[A].add(ae[b].c)),document.getElementById("suit").innerHTML=Array.from(U.spellSpace[A]).join("")):[3157,3511].includes(A)&&F.filter(b=>b>0).length!=0&&(X==M.mySeats[0]||W.v)?U[A]=F:([3193,3185,3138].includes(A)||A==3161)&&U.phase--;else if(w=="GsCRoleOptTargetNtf")if(A==945&&se==0&&(P==null?void 0:P.length)>0)xi(P.map(b=>ae[b].number),W.v&&O==M.mySeats[0]);else if(A==3440&&M.mySeats.includes(O)&&se==0&&(P==null?void 0:P.length)>0)qe==28?sn(P.map(b=>ae[b].number),new ne(O).cards.map(b=>ae[b.id].number)):sn();else if(A==11003&&se==0&&(P==null?void 0:P.length)>0&&X!=M.mySeats[0]&&ue.v)document.getElementById("result").innerHTML='<span class="textRes"> 【锻造】<br>'+P.map(b=>ae[b].ncn).join("<br>")+"</span>";else if([7016,7017].includes(A)&&(P==null?void 0:P.length)>0&&(X==M.mySeats[0]||W.v)){U[A]=P.slice();let b=Array.from(new Set(new ne(se).cards.map(({key:K})=>K))).sort((K,ge)=>ge-K),N=Array.from(new Set(new ne(255,1).cards.slice(0,M.isGuoZhan?void 0:2).map(({key:K})=>K))).sort((K,ge)=>ge-K),{yes:L,no:j}=P.reduce((K,ge)=>{let{keys:Le}=ie.findKZ(ge);return b.find(He=>Le.includes(He))!==void 0&&K.yes.push(ge),N.find(He=>Le.includes(He))!==void 0&&K.no.push(ge),K},{yes:[],no:[]}),V=document.getElementById("result");j.length==2?L=P.filter(K=>!j.includes(K)):L.length==1&&(j=P.filter(K=>!L.includes(K))),L.length==1||L.length==2?(V.innerHTML='<span class="textRes">【宴戏】'+L.map(K=>ae[K].ncn).join("/")+"</span>",U[A]=L.concat(P.filter(K=>!L.includes(K)))):V.innerHTML='<span class="textRes">【宴戏】未知</span>';let $=new ne(se).show(U[A][0]).concat(new ne(255,1,M.isGuoZhan?We:Ie).show(U[A].slice(-2)));L.length==3?ie.pack($):L.length==1?ie.pack($.slice(1,3)):L.length==2&&(ie.pack($.slice(0,2)),ie.pack($.slice(1,3))),P.forEach(K=>{V.innerHTML+='<span class="textRes'+(L.length<3&&L.includes(K)?" textRes":"")+'">'+ae[K].ncn+"："+[[L,"手牌"],[j,"牌堆"]].filter(([ge,Le])=>ge.includes(K)).map(([ge,Le])=>Le).join("/")+"</span><br>";});}else [4,5,921,372,811,357,3119,501,3437].includes(A)&&(P==null?void 0:P.length)>0?Z!==void 0&&Z!==255&&new ne(Z).show(P):[851,361,774,3310].includes(A)&&se==0&&(P==null?void 0:P.length)>0?Z!==void 0&&Z!==255&&new ne(Z).show(P):A==943&&se==0&&(P==null?void 0:P.length)==1?new ne(255,1).show(P):A==898&&se==0&&(P==null?void 0:P.length)>2?X!==void 0&&X!==255&&new ne(X).show(P.slice(1,P[0]+1)):(A==987||A==988)&&se==1&&(P==null?void 0:P.length)>2?Z!==void 0&&Z!==255&&(X==M.mySeats[0]||W.v)&&new ne(Z).show(P.slice(-P[1])):A==3266&&se==0&&(P==null?void 0:P.length)>0?Z!==void 0&&(X==M.mySeats[0]||W.v)&&new ne(Z,Z==255?1:5).show(P.filter((b,N)=>N%3==1)):A==3483&&se==1?(P==null?void 0:P.length)>2&&Z!==void 0&&Z!==255?new ne(Z).show(P.slice(-P[1])):P[0]>0&&(U[A]=P[0]):(A==7010||A==7011)&&(P==null?void 0:P.length)>0&&Z==255?(U.spellSpace[7009]=P.slice(),(X==M.mySeats[0]||W.v)&&ie.pack(new ne(255,1).show(P))):A==2900&&qe==28&&M.setGeneral(Z,P[2],P[1],!0);else if(w=="CGsRoleSpellOptRep")A==2022?M.setGeneral(O,re[0],re[1],!0):A==7009?((H=U[7009])==null||H.pop(),(G=U[7009])!=null&&G.length||new ne(255,1).show(re)):A==3336?new ne(255,1,Ue).show((Q=re==null?void 0:re.slice())==null?void 0:Q.reverse()):re.length>0&&A==15&&qe==10&&Vn(ae[re[0]].color==1);else if(w=="PubGsCMoveCard"){if(F=F.slice(),le===0||Me===0||ce===11||t.isSend)return;if(A==713&&Me==21&&le==F.length-2){let b=F.splice(0,1)[0];F.splice(b,1);}F.filter(b=>b>0).length!=le&&F.filter(b=>b>0).length!=0&&(console.error("PubGsCMoveCard error: 明暗牌混合：["+F+"]"),console.error(t),F=[]),pe==1&&ke==We&&[3208,7011,987,988].includes(A)&&(ke=Ie),pe==1&&ke==We&&Me==13&&le==1&&(ke=Ie),pe==1&&ke==We&&ce==4&&Me==8&&A==795&&le==1&&(ke=Ie),pe==1&&ke==We&&ce==5&&A==3101&&le==1&&(ke=Ue),pe==1&&ke==We&&ce==5&&!M.isGuoZhan&&[7016,7017].includes(A)&&le==1&&(ke=Ie),ce==1&&Fe==255&&bt==Ie&&(F=F.filter(b=>b!=4400&&b!=4401));var a=new ne(Pe,pe,ke,le,A,Mt),s=new ne(Fe,ce,bt,le,A,Ht);if(ce==12||pe==12)ce!=12?s.add(F.concat(Array(le-F.length).fill(0)).map(b=>new ie(b,b,s.zoneID))):pe!=12&&pe!=0&&a.remove(F,A);else if(pe==5&&ce==1&&Fe==0)s.add(a.remove(F.filter(b=>b>0)).map(b=>b.destroy(0)));else if(pe==2&&ce==9&&Pe==0&&Fe==0)U.isGameStart&&!U.isPassed&&ie.pack(ie.get(0).map(b=>b.destroy()),!1,1),s.set([...s.cards.map(b=>U.isPassed?b.destroy(0):b),...a.cards.map(b=>b.destroy(0))]),a.set([]),Rt(),U.isPassed=!1;else if(Me!==255){if(pe==1&&ce==5&&M.dealCard(Fe,F[0]),ce==2&&(U.spellSpace[3090]||(U.spellSpace[3090]=new Set),F.forEach(b=>U.spellSpace[3090].add(ae[b].c)),document.getElementById("boTu").innerHTML=Array.from(U.spellSpace[3090]).join("")),(pe==5||ce==5)&&(Fe==((te=M.mySeats)==null?void 0:te[0])||Pe==((he=M.mySeats)==null?void 0:he[0]))){let b=Array.from(ne.shoupai(M.mySeats[0]));ce==5?b.push(...F):pe==5&&(b=b.filter(j=>!F.includes(j))),b=b.map(j=>ae[j]);const{countType2:N,countSha:L}=[...b].reduce((j,V)=>(V.type===2&&!["乐","兵","闪电"].includes(V.name)&&j.countType2++,["杀","火杀","雷杀","冰杀"].includes(V.name)&&j.countSha++,j),{countType2:0,countSha:0});document.getElementById("result").innerHTML='<span class="textRes">【权道】杀：普通锦囊</span><br><span class="textRes">'+L+"："+N+"</span>";}if([441,3492].includes(A)&&ce==8&&Me==6&&yi(F.map(b=>ae[b].number),A==3492&&W.v),A==3033&&pe==1&&ce==8&&F.filter(b=>b>0).length==1){let b=ae[F[0]].number,N=0,L=0,j=0;ne.paidui.forEach(V=>{let $=ae[V].number;$===b?j++:$>b?N++:L++;}),document.getElementById("result").innerHTML='<span class="textRes">【吉占】猜'+(N>L?"大":"小")+'</span><br><span class="textRes">跟'+b+"比，"+N+"张大		"+L+"张小		"+j+"平</span>";}if(A==3329&&Pe==U.currentID){let b=ae[F[0]].number,N=ne.paidui,L=["无中","洞烛","顺手","过拆","逐近","决斗","南蛮","万箭","出其","水淹","随机","洪荒","同舟","力争","移花"].flatMap(V=>N.filter($=>{var K;return (K=me.name[V])==null?void 0:K.has($)})).reduce((V,$)=>{let K=ae[$].number;return K>b?V.g++:K<b?V.l++:V.e++,V},{g:0,l:0,e:0}),j=["五谷","桃园","火攻","借刀","撒豆"].flatMap(V=>N.filter($=>{var K;return (K=me.name[V])==null?void 0:K.has($)})).reduce((V,$)=>{let K=ae[$].number;return K>b?V.g++:K<b?V.l++:V.e++,V},{g:0,l:0,e:0});document.getElementById("result").innerHTML='<span class="textRes">【和衷】'+(L.g>L.l?"大":L.g<L.l?"小":j.g>j.l?"大":j.g<j.l?"小":"平")+'</span><br><span class="textRes">'+L.g+"."+j.g+"大		"+L.l+"."+j.l+"小</span>";}else A==3488&&pe==5&&ce==5&&Me==21&&F.filter(b=>b>0).length==1?(U[A]||(U[A]={}),U[A][Pe]=F.find(b=>b>0)):A==3488&&pe==5&&ce==10&&Me==11&&F.filter(b=>b>0).length==0?(F[0]=((xe=U[A])==null?void 0:xe[Pe])||0,U[A].stack=F[0]):A==3488&&pe==10&&(ce==1||ce==2)&&Me==11&&F.filter(b=>b>0).length==0&&(F[0]=((be=U[A])==null?void 0:be.stack)||0,(C=U[A])==null||delete C.stack);if([3157,3511].includes(A)&&pe==2&&ce==5&&le==((R=U[A])==null?void 0:R.length)&&F.filter(b=>b>0).length==0&&U[A].forEach((b,N)=>F[N]=b),[7016,7017].includes(A)&&ce==5&&le==1&&(X==M.mySeats[0]||W.v)&&(F[0]&&((q=U[A])!=null&&q.includes(F[0]))?U[A].splice(U[A].indexOf(F[0]),1):pe==5||((Y=U[A])==null?void 0:Y.length)==2||((h=U[A])==null?void 0:h.length)==1?F[0]=((m=U[A])==null?void 0:m.shift())||0:M.isGuoZhan),Pe==Fe&&pe==ce&&(ke==bt||ce!=1)&&(Mt==Ht||ce!=4))a.show(F);else if(A==3208&&pe==10&&ce==5&&F.filter(b=>b>0).length===0)a.pos=Ue,ie.pack(a.cards.slice(0,a.length-1)),s.add(a.remove(F));else if(A==3483)if(pe==10&&ce==10)F.filter(b=>b>0).length===0&&(a.pos=Ue,s.pos=Ie),s.add(a.remove(F));else if(pe==1&&ce==10&&ke==We)U[A]&&ie.pack(a.cards.slice(0,U[A])),F.filter(b=>b>0).length==0&&(a.pos=Ue),s.add(a.remove(F));else if(pe==5&&ce==10)U[A]=s.add(a.remove(F));else if(pe==10&&ce==1&&ke==We){if(F.filter(b=>b>0).length==0&&((v=U[A])==null?void 0:v.length)==le&&U[A].every(b=>a.cards.includes(b))){let b=U[A].flatMap(L=>a.cards.splice(a.cards.indexOf(L),1));ie.pack(s.add(b));let N=b.map(L=>L.key);N.every(L=>L>0)&&F.splice(0,le,...N);}else s.add(a.remove(F));delete U[A];}else s.add(a.remove(F));else if(A==780&&pe==5&&ke==We&&le==1)if(ce==5&&Pe==U.currentID)U[A]=s.add(a.remove(F))[0];else if(ce==1&&Pe!=U.currentID&&a.cards.includes(U[A])){let b=(S=s.add(a.cards.splice(a.cards.indexOf(U[A]),1))[0])==null?void 0:S.key;b>0&&F.filter(N=>N>0).length==0&&(F[0]=b),delete U[A];}else s.add(a.remove(F));else s.add(a.remove(F,A));}}}}}catch(I){console.error(I);}}function fn(){let t=Array.prototype.slice.call(arguments);try{return t[0]==="INIT"?Ci():t[0]==="EXIT"?Ei():ji(t[t.length-1])}catch(e){console.error(e.message),console.error(e.stack);const[,n,i]=e.stack.match(/(\d+):(\d+)/);console.error("Line:",n),console.error("Column:",i),de("小抄GG了，联系作者解决");}}typeof SGSMODULE<"u"&&(Object.defineProperty(window.console,"log",{get(){return console.info},set(){}}),window.SGSMODULE.forEach(t=>t("EXIT")),delete window.SGSMODULE);console.info("%c三国杀打小抄","font-weight: bold; color: white; background-color: #525288; padding: 1px 4px; border-radius: 4px;");window.SGSMODULE=[];Object.defineProperty(window.console,"log",{get(){return function(...t){(window._debug||window.isLogAllClass)&&console.debug(...t),window.SGSMODULE.forEach(e=>e==null?void 0:e(...t));}},set(){}});fn("INIT").then(t=>{t&&window.SGSMODULE.push(fn);});

})();