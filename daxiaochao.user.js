// ==UserScript==
// @name         三国杀打小抄
// @namespace    https://greasyfork.org/scripts/448004
// @version      2.9.44.8
// @author       小麦 孤独尊
// @description  打小抄支持网页版和微端，微端文件请加群 830137048
// @icon         https://i0.hdslb.com/bfs/new_dyn/17ec41a0ca79633b77399065ab80da3f2138912.png
// @downloadURL  https://goka.top:8080/daxiaochao.user.js
// @updateURL    https://goka.top:8080/daxiaochao.user.js
// @match        *://game.4399iw2.com/yxsgs/*
// @match        *://my.4399.com/yxsgs/*
// @match        *://*.sanguosha.com/*
// @match        *://web.kuaiwan.com/kwsgsn/*
// @match        *://wan.baidu.com/microend?gameId=19793595/*
// @match        *://www.7k7k.com/special/sgs/?*
// @grant        none
// @run-at       document-start
// ==/UserScript==

(function () {
  'use strict';

  var Ft=Object.freeze,Kt=Object.defineProperty;var jn=(t,e,n)=>e in t?Kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var et=(t,e,n)=>(jn(t,typeof e!="symbol"?e+"":e,n),n);var Vt=(t,e)=>Ft(Kt(t,"raw",{value:Ft(e||t.slice())}));function Pe(t,e=null,n=!0){let i;return !i&&typeof localStorage<"u"&&(i=localStorage.getItem(t)),i?JSON.parse(i):e}async function Ke(t,e,n=!0){typeof localStorage<"u"&&localStorage.setItem(t,JSON.stringify(e));}async function jt(t,e=!0){typeof localStorage<"u"&&localStorage.removeItem(t);}function Bt(t,e=0){let n="";const i="  ".repeat(e);if(Array.isArray(t))t.every(a=>typeof a!="object"||!a)?n+=`${i}${t.join("	")}
`:(n+=`${i}<ol>
`,t.forEach(a=>{n+=`${i}  <li>
`,n+=Bt(a,e+2),n+=`${i}  </li>
`;}),n+=`${i}</ol>
`);else if(typeof t=="object"&&t!==null)if(Object.values(t).every(a=>typeof a!="object"||!a))n+=`${i}${Object.entries(t).map(([a,s])=>`<strong>${a}:</strong> ${s}`).join(", ")}
`;else {n+=`${i}<ul>
`;for(const a in t)n+=`${i}  <li>
`,n+=`${i}    <strong>${a}:</strong>
`,n+=Bt(t[a],e+2),n+=`${i}  </li>
`;n+=`${i}</ul>
`;}else n+=`${i}  ${t}
`;return n}async function Hn(t,e=""){const n=document.createElement("a");n.download=e,n.href=t,n.click(),n.remove();}const Tt=[];let pt=!1,It=null;function Ve(t,e="acTooltip",n=1e4,i="",o=null,a=!1){a?qn(t,e,n,i):(Tt.push({text:t,id:e,duration:n,className:i,clickCallback:o}),pt||Dt());}function qn(t,e,n,i){let o=document.getElementById(e);o||(o=document.createElement("div"),o.id=e,o.className="ac-tooltip "+i,document.body.appendChild(o)),o.innerHTML=t,o.className="ac-tooltip "+i,o.addEventListener("click",()=>{bt(uniqueId);}),setTimeout(()=>{o.classList.remove("hide"),o.classList.add("show"),o.style.top="20px";},50),It&&clearTimeout(It),It=setTimeout(()=>bt(e),n);}function pe(t){if(ChannelUtils!=null&&ChannelUtils.openQQBuy){ChannelUtils.openQQBuy({ret:!0,msg:t});return}}function Dt(t){if(Tt.length===0){pt=!1;return}pt=!0;const{text:e,id:n,duration:i,className:o,clickCallback:a}=Tt.shift();let s=document.getElementById(n);s&&s.remove();let r=n+"-"+new Date().getTime(),l=document.createElement("div");l.id=r,l.className="ac-tooltip "+o,l.innerHTML=e,document.body.appendChild(l),a&&typeof a=="function"&&l.addEventListener("click",a),l.addEventListener("click",()=>{bt(r),Dt();}),setTimeout(()=>{l.classList.remove("hide"),l.classList.add("show"),l.style.top="20px";},50),i?setTimeout(()=>{bt(r),Dt();},i):pt=!1;}function bt(t){let e=document.getElementById(t);e&&(e.classList.remove("show"),e.classList.add("hide"),setTimeout(()=>{e&&e.remove();},300));}var pn,Un=function(t){return String.raw(pn||(pn=Vt([`
<html><head><meta charset="utf-8" /><title>战绩胜率统计</title><style>
table { margin-right: 8px; border-collapse: collapse; }
th, td { text-align: center; border: 1px solid black; font-size: 24px; box-sizing: border-box; }
td { padding: 2px 5px; }
.nav, thead { background: white; position: sticky;; }
.rate { margin: 5px; font-size: 28px;}
.button {  display: none; } 
.button[name=mode] ~ .label { display: inline-block; font-size: 30px; user-select: none; border: solid 1px black; border-radius: 5px; padding: 5px; margin: 5px; }
th .button ~ .label { display: inline-block; width: 100%; height: 100%;}
th .button:checked ~ .label::after { content: "↓"; }
th.reverse .button:checked ~ .label::after { content: "↑"; }
.button:checked ~ .label { background: rgb(64,160,255); } 
.s0 { background: white; }
.s1 { background: rgb(221,0,0); }
.s2 { background: rgb(255, 200, 0); }
.s3 { background: rgb(0, 136, 68); }
.s4 { background: rgb(0, 94, 183); }
.s5 { background: rgb(255, 0, 255); }
</style></head><body style="margin: 0 8px;">
<div class="nav" style="top: 0; height: 136px; z-index: 3"><div id="modeTab"></div><div id="summary"></div></div>
<div style="display: flex; align-items: flex-start; flex-wrap: wrap;"><table id="detail"><thead style="top: 135px; z-index: 1"></thead><tbody></tbody></table>
<table id="record"><thead style="top: 135px; z-index: 2"></thead><tbody></tbody></table></div>

<script>
const data = Object.entries(`,`).reduce((acc,[mode, records]) => {
acc[mode] = Object.entries(records).reverse().map(([time, record]) => ({timestamp:parseInt(time), time: new Date(time*1000).toISOString().slice(0,16).replace('T',' '), ...record, durationstr: formatSeconds(record.duration)}));
return acc;
},{});
const modeName = {1: '八人标准', 2: '六人身份', 3: '八人军争', 4: '应变身份', 5: '八人至尊', 6: '身份老友房', 7: '国战', 8: '应变国战', 9: '国战老友房', 10: '新1V1', 11: '欢乐', 12: '应变欢乐', 13: '欢乐老友房', 14: '统率', 15: '4V4演武', 16: '应变演武', 17: '欢乐演武', 18: '国战演武', 19: '统率排位', 20: '欢乐排位', 21: '智斗三国', 22: '欢乐新手', 23: '欢乐新手', 24: '六人新手', 25: '六人新手', 26: '排位赛', 27: '主公杀', 28: '1v1面杀练习场', 29: '五人匹配', 30: '排位赛', 31: '欢乐33', 32: '33老友房', 33: '武将试炼', 34: '武将试炼', 35: '斗地主', 36: '线上赛事', 37: '山河图', 38: '王战练习', 39: 'SCL练习', 40: '斗地主练习', 42: '八人匹配', 43: '个人挑战1V1', 44: '单骑无双'};
const sfName = {5:{0: '综合', 1: '主公', 2: '忠臣', 3: '反贼', 4: '内奸'},7:{0: '综合', 1: '魏国', 2: '蜀国', 3: '吴国', 4: '群雄', 5:'晋国'},26:{0:'综合',2:'先手',3:'后手'},35:{0:'综合',1:'地主',3:'农民'},44:{0:'综合',1:'先手',4:'后手'}};
colors=['white','rgb(221,0,0)','rgb(255, 200, 0)','rgb(0, 136, 68)','rgb(0, 94, 183)','rgb(255, 0, 255)','black'];
const modeTab = document.getElementById('modeTab');
[26,35,44,5,7].forEach(mode => {
if(mode in data) modeTab.innerHTML += '<label><input type="radio" class="button" name="mode" value="'+mode+'" onclick="reSet()"><span class="label">'+modeName[mode]+'</span></label>';
}); modeTab.innerHTML += ' （更多功能敬请期待…）';
document.querySelector('#record thead').innerHTML = '<tr onclick="recordSort(event)">'+['时间','武将','身份','胜负','时长'].map((name,i)=>'<th'+(i?'':' class="reverse"')+'><label><input type="radio" class="button" name="record" onchange="recordSort(event)" '+(i?'':'checked')+'><span class="label">'+name+'</span></label></th>').join('')+'</tr>';
function reSet() {
var i, tabcontent, tablinks;
window.mode = document.querySelector('#modeTab input[name="mode"]:checked')?.value
window.guozhanQ = modeName[mode].includes('国战');
window.records = data[mode].filter(record => record.shenfen).sort();
let summary = Array.from({length:10},(_,i)=>[0,0,0,i]);
let detail = records.reduce((acc, record) => {
    summary[0][record.result] += 1;
    summary[0][2] += record.duration;
    summary[record.shenfen][record.result] += 1;
    record.general.forEach((g,n)=>{
        if(!acc[g]) acc[g] = Array.from({length:10},(_,i)=>[0,0,0,i]);
        acc[g][0][record.result] += 1;
        acc[g][0][2] += record.duration;
        acc[g][guozhanQ?(n+1):record.shenfen][record.result] += 1;
    });
    return acc;
},{});
summary = summary.filter(s=>s[0]+s[1]>0);
let sf = guozhanQ?[0,1,2]:summary.map(s=>s[3]);
document.querySelector('#detail thead').innerHTML = '<tr><th rowspan=2>武将</th>'+sf.map(sf=>'<th colspan=4 style="background:'+colors[sf]+';">'+(guozhanQ?{0:'综合',1:'主将',2:'副将'}[sf]:sfName[window.mode][sf])+'</th>').join('')+'<th rowspan=2 onclick="detailSort(event)"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)"><span class="label">平均时长</span></label></th></tr><tr onclick="detailSort(event)">'+sf.flatMap((sf,i)=>['胜率','出场','胜场','败场'].map((name,j)=>'<th class="reverse"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)" '+(i==0&&j==1?'checked':'')+'><span class="label">'+name+'</span></label></th>')).join('')+'</tr>';
window.detail = Object.keys(detail).map(general=>{
    let rate = detail[general].filter(s=>sf.includes(s[3]));
    rate.forEach(s=>{ s[4] = s[0]+s[1]; s[5] = 100*s[0]/s[4]; s[2] = s[2]/s[4]; });
    return ({general, rate});
});
let summaryDiv = document.getElementById('summary');
summaryDiv.innerHTML = '';
summary.forEach(([win,lose,time,sf])=>{ summaryDiv.innerHTML += '<span class="rate" style="color:'+colors[guozhanQ?[6,4,1,3,2,5][sf]:sf||6]+';">'+sfName[window.mode][sf]+'胜率'+((100*win/(win+lose)).toFixed(2)+'%').replace(/(.0)?0%/,'%')+'('+win+'胜:'+lose+'负)</span>'; });
detailSort();
recordSort();
}

function detailSort(event,sf=0,key=4,reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'detail'){
        if(element.rowSpan>1) {sf = 0; key = 2; }
        else {
            sf = Math.floor(element.cellIndex/4);
            key = [5,4,0,1][element.cellIndex%4];
        }
        reverse = element.classList.toggle('reverse');
    }
}
window.detail = window.detail?.sort((a,b)=>{ a=a.rate[sf][key];b=b.rate[sf][key]; return isNaN(a)&&isNaN(b)?0:isNaN(a)?-1:isNaN(b)?1:a-b; });
if(reverse) window.detail = window.detail?.reverse();
document.querySelector('#detail tbody').innerHTML = window.detail?.map(({general, rate})=>'<tr><td>'+general+'</td>'+rate.map(s=>'<td>'+(s[4]?(s[5].toFixed(2)+'%').replace(/(.0)?0%/,'%'):'')+'</td><td>'+s[4]+'</td><td>'+s[0]+'</td><td>'+s[1]+'</td>').join('')+'<td>'+formatSeconds(rate[0][2])+'</td></tr>')?.join('');
}

function recordSort(event,key='timestamp', reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'record'){
        key = ['timestamp','general','shenfen','result','duration'][element.cellIndex]??key;
        reverse = element.classList.toggle('reverse');
    }
}
if(key!=='general') window.records = window.records?.sort((a,b)=>a[key]-b[key]);
else window.records = window.records?.sort((a,b)=>a[key][0].localeCompare(b[key][0]));
if(reverse) window.records = window.records?.reverse();
document.querySelector('#record tbody').innerHTML = window.records?.map(record => '<tr><td>'+record.time+'</td><td>'+record.general.join(' ')+'</td><td>'+sfName[window.mode][record.shenfen]+'</td><td>'+(record.result?'失败':'胜利')+'</td><td>'+record.durationstr+'</td></tr>')?.join('');
}

function formatSeconds(seconds) {
const hrs = Math.floor(seconds / 3600).toString().padStart(2, '0');
const mins = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
const secs = Math.floor((seconds % 60)).toString().padStart(2, '0');
return (seconds>=3600?(hrs+':'):'')+mins+':'+secs;
}

document.querySelector('#modeTab input[name="mode"]').click();
<\/script></body></html>`])),t)},xn="jsjiami.com.v7";((function(t,e,n,i,o,a,s){return t=t>>4,a="hs",s="hs",function(r,l,d,f,c){const u=Ee;f="tfi",a=f+a,c="up",s+=c,a=d(a),s=d(s),d=0;const p=r();for(;[]&&--i+l;)try{f=parseInt(u(426,"Th8%"))/1+parseInt(u(430,"uSqA"))/2+-parseInt(u(278,"03Zi"))/3*(-parseInt(u(308,"uSqA"))/4)+-parseInt(u(524,"!q)p"))/5+-parseInt(u(336,"*wL)"))/6*(-parseInt(u(536,"z7td"))/7)+-parseInt(u(322,"wjsR"))/8+parseInt(u(544,"uSqA"))/9*(-parseInt(u(343,"3CEc"))/10);}catch{f=d;}finally{if(c=p[a](),t<=i)d?o?f=c:o=c:d=c;else if(d==o.replace(/[CfLYpHkDQqVKJxFyBPGROw=]/g,"")){if(f===l){p["un"+a](c);break}p[s](c);}}}(n,e,function(r,l,d,f,c,u,p){return l="split",r=arguments[0],r=r[l](""),d="reverse",r=r[d]("v"),f="join",r[f]("")})}))(3216,838851,ct,203),ct&&(xn=10165);function Ee(t,e){const n=ct();return Ee=function(i,o){i=i-263;let a=n[i];if(Ee.UtUeEC===void 0){var s=function(c){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",g="";for(let y=0,C,b,H=0;b=c.charAt(H++);~b&&(C=y%4?C*64+b:b,y++%4)?p+=String.fromCharCode(255&C>>(-2*y&6)):0)b=u.indexOf(b);for(let y=0,C=p.length;y<C;y++)g+="%"+("00"+p.charCodeAt(y).toString(16)).slice(-2);return decodeURIComponent(g)};const f=function(c,u){let p=[],g=0,y,C="";c=s(c);let b;for(b=0;b<256;b++)p[b]=b;for(b=0;b<256;b++)g=(g+p[b]+u.charCodeAt(b%u.length))%256,y=p[b],p[b]=p[g],p[g]=y;b=0,g=0;for(let H=0;H<c.length;H++)b=(b+1)%256,g=(g+p[b])%256,y=p[b],p[b]=p[g],p[g]=y,C+=String.fromCharCode(c.charCodeAt(H)^p[(p[b]+p[g])%256]);return C};Ee.bAgCRi=f,t=arguments,Ee.UtUeEC=!![];}const r=n[0],l=i+r,d=t[l];return d?a=d:(Ee.GDNbnM===void 0&&(Ee.GDNbnM=!![]),a=Ee.bAgCRi(a,o),t[l]=a),a},Ee(t,e)}async function Qn(t=k.v){const e=Ee,n={RcPRs:function(o,a){return o(a)},hOUgH:e(271,"r9@5"),ScWTy:e(417,"r9@5"),pKHUR:function(o,a){return o!==a},xFFmX:e(534,"uSqA"),ouTLi:function(o,a){return o===a},ZiElJ:e(546,"a6MC"),BKqFe:"task",xUmbb:"mail",PkfVq:function(o){return o()},ahTJB:"autoDrumSwitch",lrGGO:e(447,"uSqA"),FcaJw:function(o){return o()},qdcCO:e(554,"kwn["),GbNiE:e(467,"RWfn"),fIFcE:e(369,"ohVA")},i=[{id:n[e(316,"t0K(")],action:pi},{id:n[e(551,"r9@5")],action:In},{id:e(566,"RWfn"),action:Wn}];t?(i[e(303,"gurh")]({id:n[e(445,"1w6n")],action:Yt},{id:e(503,"TLpc"),action:Zt},{id:n.lrGGO,action:$t}),n[e(460,"!q)p")](zn)):n.qdcCO===n[e(399,"!q)p")]?(_0x590f41[e(341,"TLpc")]="",_0x3ce1ae.parentElement[e(365,"QTd]")]="",_0x1d9a40[e(575,"t#fQ")]=!![],_0x491291[e(442,"Q3x0")]=![],_0x20b14b[e(420,"OJsJ")]=_0x2284bd+"<br>后可再次体验"):[{id:n.BKqFe,action:Yt},{id:n[e(560,"!q)p")],action:Zt},{id:e(573,"Q3x0"),action:$t}][e(577,"z7td")](({id:a})=>{const s=e,r=document[s(435,"hKyZ")](a);r&&(n[s(383,"KJLZ")](n[s(538,"Q3x0")],s(377,"OJsJ"))?(n[s(339,"Sd7y")](_0x2945c4,n[s(433,"gR)G")]),_0x323020[s(411,"QTd]")](n[s(439,"*wL)")],_0x4c5b7f),_0x129754[s(363,"N#O5")]=_0x51ffbf):(r[s(274,"DTOE")]=![],r[s(522,"kwn[")]=!![],r[s(315,"AnLg")](new Event("change"))));}),i.forEach(({id:o,action:a})=>{const s=e,r=document[s(345,"KJLZ")](o);r&&(n.ouTLi(s(563,"M36t"),n[s(474,"JLuo")])?_0x34ac7f[s(323,"a6MC")]=()=>_0x1a7b08():(r[s(434,"B*IF")]=![],n[s(565,"AnLg")](o,n[s(585,"fKBw")])||o===n[s(328,"ohVA")]?r[s(318,"KJLZ")]=()=>a():r.checked&&n[s(478,"O0s3")](a)));});}function zn(){const t=Ee,e={UbqKV:"task",bGWwi:t(409,"QTd]"),BCRMx:function(i){return i()},lVfld:function(i,o){return i!==o},GoCBH:function(i,o){return i===o},lSeTR:t(516,"3CEc"),VCSXj:function(i,o,a,s){return i(o,a,s)}},n=document[t(531,"B*IF")](t(265,"#W7o"));n[t(525,"t0K(")](i=>{const o=t,a={FJgCO:e[o(473,"kwn[")],QjuQB:e[o(314,"gR)G")],OMPEw:function(s){return e.BCRMx(s)},WUSMe:function(s,r){return e[o(368,"1w6n")](s,r)},VAWTx:function(s,r){return e.GoCBH(s,r)},hRiwc:"XWcuL",ryyjq:e[o(583,"!q)p")],rzdNy:function(s,r,l,d){return e.VCSXj(s,r,l,d)},VzGcQ:function(s,r){return s(r)}};i[o(268,"gka4")]=![],i[o(427,"ohVA")]=function(){const s=o,r={soSjX:a.FJgCO,NvUUJ:a.QjuQB,YEtmv:s(480,"1w6n"),iNEyf:function(l){return a[s(452,"Uq0S")](l)},wVlRB:function(l,d){return l(d)},puitT:function(l,d){return a[s(280,"N#O5")](l,d)},iZuRI:function(l,d,f,c){return l(d,f,c)},xcLCH:function(l,d){return l(d)},euXqw:function(l,d){return a[s(334,"03Zi")](l,d)},hBeLo:s(292,"nu@&"),FGIJM:function(l,d){return a.WUSMe(l,d)},XTNmm:function(l,d){return a[s(496,"Q3x0")](l,d)}};a[s(313,"OJsJ")](s(386,"JLuo"),a[s(359,"Q3x0")])?[{id:r[s(342,"Q3x0")],action:_0x3d1d6e},{id:r[s(549,"Q3x0")],action:_0x49a2ed},{id:r[s(489,"M36t")],action:_0xe44479}][s(437,"Uq0S")](({id:d})=>{const f=s,c=_0x4c20aa[f(351,"eh@)")](d);c&&(c.checked=![],c[f(533,"hpBo")]=!![],c[f(382,"a6MC")](new _0x4e38ef(f(557,"xH!1"))));}):this[s(492,"TLpc")]?a[s(337,"!q)p")]!==a[s(457,"TLpc")]?_0x33dbee.checked&&r[s(419,"9eBN")](_0x3d5842):(n[s(344,"KJLZ")](l=>{const d=s,f={brCLm:function(c,u){return r[Ee(569,"9eBN")](c,u)},snGpN:function(c,u,p,g){return r.iZuRI(c,u,p,g)},GZKeN:function(c,u){return c(u)},qiVUA:function(c,u){return r[Ee(497,"Th8%")](c,u)}};if(r[d(317,"gka4")](r[d(469,"xH!1")],d(266,"oeY[")))this[d(307,"9eBN")]?(_0x46d753[d(422,"ohVA")](c=>{const u=d;f[u(485,"oeY[")](c,this)&&(c[u(274,"DTOE")]=![]);}),_0x4f3c48(r[d(356,"Uq0S")](_0x1d3854,this[d(449,"hm@a")][d(378,"Q3x0")]),r.wVlRB(_0x32c9e6,this.dataset[d(374,"$*s2")]),this[d(450,"Uq0S")].goods)):_0x5e484b(![]);else if(r.FGIJM(l,this))if(r[d(349,"ohVA")]("JMvPy","JMvPy"))l.checked=![];else {const c={LybcF:function(u,p){return f[d(400,"RWfn")](u,p)}};_0x573c6d[d(384,"4$6I")](u=>{c[d(346,"el3g")](u,this)&&(u.checked=![]);}),f.snGpN(_0x43b042,f.GZKeN(_0x37158c,this[d(404,"TLpc")][d(378,"Q3x0")]),f[d(564,"JLuo")](_0x3a7d52,this[d(404,"TLpc")][d(333,"Uq0S")]),this[d(264,"r9@5")][d(270,"tR[5")]);}}),a[s(273,"oeY[")](en,parseInt(this[s(458,"eh@)")][s(479,"1w6n")]),a[s(456,"*wL)")](parseInt,this[s(272,"Q3x0")][s(275,"4$6I")]),this.dataset[s(572,"Ifj1")])):a[s(521,"9qhw")](en,![]);};});}async function lt(t=![]){const e=Ee,n={XXiKL:function(c,u){return c(u)},lvODT:e(327,"!q)p"),iUnXY:"autoBotTip",fkWzu:function(c,u){return c!==u},Rsfjb:"酒馆挂机今日可用",XHHsR:function(c,u){return c===u},Cklxp:"QAyQt",nqteO:e(389,"9eBN"),ayGVo:function(c){return c()},PBlSZ:e(504,"oeY["),BuVfy:"change",sCXbS:e(468,"wjsR"),gIEut:e(505,"9qhw"),jripC:function(c){return c()},MXwYO:e(279,"9eBN"),whcni:e(451,"N#O5"),QXpOW:"EjUIl",vAxjL:"--bot-status",fFFqO:e(465,"gurh"),FrKMx:function(c,u){return c(u)},uHhIi:"eWqzK",amcOi:"盖主速刷已关闭",llAgg:function(c,u){return c<=u},hZvJj:function(c,u,p,g){return c(u,p,g)},vmVYK:e(340,"nu@&"),RjCNt:"autoBotSwitch",NrpkO:"autoHGSwitch",XNrMn:e(387,"nu@&"),vgQai:e(347,"gR)G"),EIAFn:function(c,u){return c-u},dstuO:function(c,u){return c*u},EXPpq:function(c,u){return c*u},OTQeW:function(c,u){return c+u},pqccr:function(c,u){return c*u},LhNnw:function(c,u){return c*u},UishR:function(c,u){return c*u},zsxyP:e(428,"O0s3"),BGZep:function(c,u){return c!==u},wBIee:e(371,"gR)G"),LJDzR:function(c,u){return c*u},ySkZJ:function(c,u){return c*u},JPZEs:"lGVvi",NEMsx:e(299,"gR)G"),bOjpG:function(c,u){return c(u)},zvrdw:function(c,u){return c+u},rLxOg:e(539,"03Zi"),GlQWk:function(c,u){return c!==u},DEGxU:e(267,"ohVA"),qQFhC:function(c,u){return c(u)},mNTVV:function(c,u){return c!==u},iBtrX:e(561,"el3g"),hAwEr:function(c,u){return c(u)},QzlsY:function(c,u){return c!==u},vAZxW:e(562,"N#O5"),bSvZf:"酒馆挂机可体验",HRhbO:e(579,"#W7o"),eRvzd:e(486,"a6MC"),BGQld:function(c,u){return c==u},IOGGi:e(295,"9eBN"),FDUcw:"来自公会包月",VUjjS:function(c,u){return c!==u},ENHqV:function(c,u){return c(u)}};let i=ie[e(462,"RWfn")](),o=n[e(518,"9eBN")](i,n[e(578,"z7td")](Pe,n[e(396,"xH!1")],0,![])),a=document[e(493,"el3g")](n[e(357,"xH!1")]),s=document[e(507,"JLuo")](n.NrpkO),r=document[e(376,"03Zi")](n[e(455,"el3g")]),l=document.getElementById(n[e(466,"gka4")]),d=n[e(391,"gka4")](k.trialTime,n.dstuO(n[e(502,"gR)G")](n[e(555,"N#O5")](6,24),3600),1e3)),f=new Date(n[e(290,"hpBo")](k.trialTime,n[e(418,"hm@a")](8,3600)*1e3))[e(570,"03Zi")]().slice(0,10);if(k[e(300,"O0s3")][25242]=new Date(n[e(321,"nu@&")](i,n[e(421,"eh@)")](n[e(277,"Sd7y")](n[e(523,"JLuo")](6,24),3600),1e3)))[e(410,"$*s2")](),a.disabled=![],k.v){a[e(470,"uSqA")]=![],s[e(584,"*wL)")]=![];let c=n.zsxyP;n[e(586,"hKyZ")](r.innerHTML,c)&&(n[e(512,"Q3x0")](n[e(263,"t0K(")],e(443,"Sd7y"))?(_0x4e3bfd[e(415,"Ifj1")]=![],_0x29f01f.autoBotSwitch=9,_0x525672[e(548,"gR)G")](0)):(n.XXiKL(pe,e(353,"uSqA")),o="v",Ke(n[e(332,"Th8%")],n[e(567,"!q)p")](i,n[e(550,"wjsR")](n.LJDzR(n[e(395,"gurh")](7,24),3600),1e3)),![]),r[e(484,"uSqA")]=c));}else if(n[e(529,"gka4")](i,k.guildVIP[k.guildID]))if(n[e(501,"r9@5")]===n[e(488,"03Zi")]){let c=e(509,"O0s3")+new Date(k[e(542,"Q3x0")][k[e(477,"gR)G")]]).toLocaleDateString();r[e(552,"hKyZ")]!==c&&(n[e(487,"DTOE")](n[e(305,"t#fQ")],n[e(319,"uSqA")])?(n.bOjpG(pe,n.zvrdw(k[e(459,"$*s2")],e(298,"el3g"))),r.innerHTML=c):(this.checked?(_0x20ac62.checked=![],_0x38d287[e(326,"#W7o")]=9,_0x5f31f3[e(324,"OJsJ")](0)):(_0x2d913b[e(513,"03Zi")]=![],n[e(354,"DTOE")](_0x2a2886,e(438,"Uq0S"))),_0x4fada9.auto(_0x9b24bb[e(394,"oeY[")]),_0x2bfed3[e(440,"a6MC")](n[e(362,"Uq0S")],()=>_0x2d6bfe(),500)));}else _0x360419[e(352,"wjsR")]=![],_0x4d6595[e(329,"AnLg")](n.iUnXY,()=>_0x5413ed("酒馆挂机已关闭"),500);else if(n[e(414,"03Zi")](i,17284896e5))if(n[e(423,"gR)G")](n[e(310,"uSqA")],e(539,"03Zi"))){let c=e(463,"1w6n");n[e(483,"gurh")](_0x40c5fc[e(390,"QTd]")],c)&&(n[e(576,"hm@a")](_0x3268f0,n.Rsfjb),_0x2966aa.innerHTML=c);}else {let c=e(301,"hKyZ");n[e(380,"Sd7y")](r[e(517,"KJLZ")],c)&&(n.DEGxU!==e(481,"hpBo")?(n[e(568,"eh@)")](pe,n[e(432,"KJLZ")]),a[e(520,"KJLZ")]("change",()=>{const u=e;n[u(429,"1w6n")](n.Cklxp,n.nqteO)?(_0x5666f0(u(269,"ohVA")),_0x562943[u(373,"xH!1")]=_0x117a2e):n.ayGVo(Cn);},{once:!![]}),r.innerHTML=c):(_0x1dcb18(n[e(360,"3CEc")]),_0x50b11c[e(520,"KJLZ")](n[e(297,"9eBN")],()=>{n[e(475,"hm@a")](_0x37202c);},{once:!![]}),_0x3a7b10.innerHTML=_0x15413a));}else if(n[e(431,"TLpc")](i,d)){let c="本周已体验<br>今日可使用";n[e(482,"3CEc")](r[e(508,"ohVA")],c)&&(n[e(547,"#W7o")](e(464,"TLpc"),n.iBtrX)?n.ayGVo(_0x1c51ed):(n[e(454,"*wL)")](pe,n[e(436,"gR)G")]),r.innerHTML=c));}else if(i>=k[e(309,"*wL)")])if(n.QzlsY(e(446,"03Zi"),n.vAZxW)){let c=e(325,"B*IF");r[e(471,"hm@a")]!==c&&(n[e(367,"O0s3")](pe,n[e(293,"JLuo")]),a[e(527,"el3g")](n.BuVfy,wn),r[e(506,"Sd7y")]=c);}else {const c=_0x38cb82[e(376,"03Zi")](_0x484c76);c&&(c[e(528,"el3g")]=![],_0x1cf159===n[e(296,"ohVA")]||_0x15b985===n.gIEut?c.onmousedown=()=>_0x23295e():c.checked&&n[e(379,"t#fQ")](_0x5a53f6));}else {const c=n[e(559,"fKBw")].split("|");let u=0;for(;[];){switch(c[u++]){case"0":a.parentElement[e(401,"wjsR")]="";continue;case"1":r[e(363,"N#O5")]=f+e(581,"eh@)");continue;case"2":a[e(412,"B*IF")]=![];continue;case"3":a[e(408,"ohVA")]=!![];continue;case"4":a[e(571,"Q3x0")]="";continue}break}}if(!a[e(558,"Th8%")]&&!a[e(331,"Sd7y")]&&(a[e(285,"!q)p")]=function(){const c=e;this[c(361,"gR)G")]?(s[c(415,"Ifj1")]=![],k.autoBotSwitch=!![],ie[c(448,"t0K(")]("autoBotTip",()=>T[c(535,"DTOE")](),500)):n.whcni!==n[c(355,"ohVA")]?(k[c(311,"hKyZ")]=![],ie.delay(c(553,"el3g"),()=>pe(c(348,"t#fQ")),500)):(_0x2c05dd(_0x235b18.guildName+n.MXwYO),_0x197f6b[c(541,"4$6I")]=_0x4601ce),k[c(375,"t#fQ")]=![],document.querySelector(c(545,"*wL)")).style[c(407,"#W7o")](n[c(532,"Th8%")],'"'+k.autoBotStatus[c(472,"a6MC")]().padStart(2,"0")+'"'),T[c(444,"Th8%")](k[c(394,"oeY[")]),ie[c(291,"DTOE")](c(281,"gR)G"),()=>lt(),500);}),!a.disabled&&!a.parentElement[e(289,"gka4")]&&(a[e(306,"O0s3")][e(413,"DTOE")]=function(){const c=e;a[c(491,"!q)p")]=!![],s[c(587,"AnLg")]=![],k[c(358,"hm@a")]=!![],ie[c(499,"eh@)")](n[c(397,"oeY[")],()=>T.readyStart(0),500),k[c(284,"B*IF")]=!![],document.querySelector(n[c(372,"9qhw")])[c(441,"JLuo")][c(530,"M36t")](n.vAxjL,c(424,"gR)G")),n[c(335,"1w6n")](pe,"百胜、官阶挂机开启"),T[c(304,"hKyZ")](k.autoBotSwitch),ie.delay(n[c(543,"gR)G")],()=>lt(),500);}),o||n[e(366,"M36t")](i,k.guildVIP[k[e(476,"r9@5")]])){let c=n[e(302,"hpBo")]+(n[e(388,"Uq0S")](o,"v")?e(330,"hpBo"):o?n.IOGGi:n[e(574,"!q)p")]);n[e(498,"N#O5")](l[e(519,"eh@)")],c)&&(n[e(537,"t0K(")](pe,e(294,"gR)G")),l[e(398,"B*IF")]=c,s[e(556,"3CEc")]=![],s.onchange=function(){const u=e,p={TMfSw:function(g,y){return n[Ee(287,"Uq0S")](g,y)},Smrnq:"盖主速刷已关闭",rAxrA:"autoBotSetUp",wpuVo:u(580,"3CEc")};this[u(412,"B*IF")]?n[u(495,"t#fQ")](n.uHhIi,n[u(283,"TLpc")])?(_0x117dce(p[u(511,"wKKR")]),_0x3e914b[u(541,"4$6I")]=_0x5cef69,_0x17ab51[u(276,"Uq0S")]=![],_0x4ce1e2[u(320,"wjsR")]=function(){const g=u;this[g(461,"uSqA")]?(_0x35f319.checked=![],_0x5e7f41[g(385,"hpBo")]=9,_0x22b16d[g(582,"#W7o")](0)):(_0x4fb0fb[g(416,"AnLg")]=![],p[g(515,"9qhw")](_0x341b63,p[g(381,"wKKR")])),_0x5c5c80.auto(_0x1fc4d3[g(406,"$*s2")]),_0x2fe044.delay(p[g(494,"!q)p")],()=>_0x572388(),500);}):(a.checked=![],k[u(312,"r9@5")]=9,T[u(392,"z7td")](0)):(k[u(540,"Uq0S")]=![],n[u(405,"el3g")](pe,n[u(393,"Q3x0")])),T.auto(k.autoBotSwitch),ie[u(350,"1w6n")](n[u(425,"fKBw")],()=>lt(),500);});}else s[e(402,"oeY[")]="",s[e(364,"eh@)")]=!![],s[e(338,"O0s3")]=![],l[e(484,"uSqA")]=e(490,"B*IF");!a.checked&&!s[e(526,"OJsJ")]&&(k[e(370,"ohVA")]=![]);}function ct(){const t=function(){return [xn,"JfCjKyQsVjqxPiaGFmwyiC.cODLoBRmHkB.vp7QY==","W54ly8osyq","WO3dTNpcJbi","W7xdNSoYW5VcHSoPcW","dmoPWPnZBa","W73cMmkqWP/cN8ocWRq","FCkog8k0FCo0xbJcOCoKWQq9WOLpW5b4WQm/WQuzWQxdSSohWQaAWPLTmW","WQjuW5VcOqG","W55jW5PHW5S","WP89seDdW7azWRq","6yE26AAm5O6Q5PYO5lMC5PA/5yYS55sK","WP/dMbFdJ8kg","6yEl6Aw/5O+M5P+e5yYd5l+06AMm","pdXOj2GtWP4","WQDuW73cTrG","WOVcR8k7WOJcSmkfrq","DCktjfP1bmoTWQVdN8kS","WO9iWQiHW6VdSgnZ","aGvBW48S","aaBdNCo5mmoQW7SIquRcHcmO","5yEP5l+g6yse6Awd5O+o5P+B5y++5PYl","W6b4W74YeG","ot3cTrNcGCo4bmoQCCocW77cJq","W6CGW4VcHHqKWQSaEZldONW","reOBW4VcQW","WPlcR0xdT37dGCoqkmohWQxdQKRcI3bQ","EmknxSomW6VdLCoCkq","W4PSdrawWQLjWQa7WPCME2a","WQ1tWPOnW7e","AxRdS0FdSmoMpSo6zCo3W5O","WPq6x0rnW78qWRK0WP0","W6NdSmklWR4E","WOZcOSkYWORcOG","WO3cLeulya","mmoHWOW8WRq","6BQC55QE5lU65ysA5Bom5y2G5yMh55Uh6ioi5yIP6igw5yYs55w877YI","55A055Aq5Bgz5OMb5yA95lMk","W5DjW7bWW4u","W4FcQqdcO8k1","5yEd5l2Y6yEb6AEA5O+E5P+U5y+i5PYR","pIdcHZxcKG","WOhdPJ/dQ8obEMpcIa","W77cGEACOCoq5PAh5yQyjCo5W4am6zM55PwS5yEX6lE355wx","W4pdTSkSWQeT","sMBdJmkV","WQ7dHf3cHG","WP5sWRtdJvS","WPBdSItdOSolwg/cTmkKWPfqWQXn","W6BcTdpcPSkNWOtcNW","dCk7ySogW6NdGdW","WQvriCk5WPZdH8oXu8kE","s8k8CCo/W70","WQ7dHf3cHIdcUM3dImofw13dUCou","W7JcJmkqWPhcRSoiWRqJDSoUb8k+WOG","t8ksW5KRuG","oG/cLGhcQG","W7ldN8oKW4JcJmo4dmoQpmo/ybiT","gSodWO5CsW","WP4Hy1Dw","df7dQ8oyx8kCW6bSyb5G","D8k1rmodW6i","WQ/dSCkVy8oIxSkxDW","WQFcQhOMzq","W7hcRSo9oSk6b8odjaNdLfldL27dQG","x8oDW5BcGmowwSoNW77dHmoCWRy","A8k2W68BuY7cJhxdKwq","5P+F5zkY5y+E5l+l6AQW5lQU5AAnxColWRhcVq","mSkxcSk9s8k7qsxcPSo4WQqfWPu","DSkwsColW4JdLmoph8onWRpcQKi","W5XFW4vWW7q","W7ldK8o7W5NcLa","55EQ5BkR5OME5yY05lY255wE","iqn2W4K6WONcU8kM","h8olm8o6mG","WPHvWRaYW73dG3j+xr0","z3FcVmkuFa","WQeXwmkDWQS","W6yxCCoGW4lcO8kUCCkmh8oUaCov","zCkArmooW7S","WOxdUZpdPmoosu4","ha5fW7mO","WONcIv8SEMBdH8oQW5/dKYWy","xMWqW6RcO0X9EW","kZjplem","xSoRWP/cVeRdTCkQu8kk","bv/dTmoYs8kmW60","bfxdSSoYrSkkW6HTyr1mW5SSkW","W6mrW7e/WPO","ot3cTrNcI8oqnCobzmoAW4RcKZvxB2Td","6yAc6AAr5O+75P6e5BEr5ywJ6zs+","W7XEW6z/W7S","WP0mxCk3WP4","WQBcJhaAst/dK0jBFWBdSmo9kW","WQhdQSk4zmobx8keqsBdJKddNwK","6ywR6Aw25OYl5P6k5y2155AI","WRdcN8k3WQdcLW","W7vsW5HDW4e","WPX3WR0sW4S","rrBcVCooWPG","ncqTWPldR8oAWOpcRXVdUComb8kH","ma91mxG","p8krW4pcHNe","oYdcPbxcQmoYfa","WODxWP4eW50","W55dW4mAbtxcHCorpG","WQxcGhC+rZBdM0m","u8oOpai6WRvhpmkvW4K","DhycWOSx","WOtdNdZdT8oI"].concat(function(){return ["WPu/v8k6WOm","W4v/W5X9W507WQ1Fb8kSWO3dVxaGASk+","W4v/W5X9W54DWPb7bSkTWR3dOG","oZRcJrVcLa","WPCRW59OW6O","FHlcKmoLWP4aEczM","W57cHSoXt2GesfaRW5a","WRfIWO3dKwf/WQC9xqFdQL4zWQ1s","vLpcN8kfAmk9WQ4WsKZcQbWKjW","CCkIW481EW","pZjZiMGPWOpcMW","WRPLWPddJMa","cqfeW7yW","xa1TgSkP","vmoAW4JcN8ocxCoHW7ldRSoDWR0FpW","e3VdJSoIEa","ymkin21GomoX","W4FdKCkUWRqlgCkgrCoUWQPEtIm","jCogWPeIWOC","WONcIv8SD2VdLSoOW5NdUIWfdCo/dG","WQLMWOaSW60","W7/cNrdcI8k7","vCoOnGuKWP5/gmk6","WR4DEMbp","W4pcOt3dNrG1sCkmWQ7dPG","otb/cxi","WRrBW63cLcpcQSowvemQW4RcSbC","q0ddLmkDWOW","yrhcQmozWQC","WRX7W7FcOZG","WPRcTf/dVu7dPSoWlmoL","umkbC8onW48","x8kWWQNdQ8oZ","WQ/dSCkOACoVu8kCEZldJa","WRPaW7RcKWdcQ8ofyG","i8kOvSosW7NdSCo2","vwmhW6pcSuDU","W7CWW7OxWPa","W4ZcH8oKuL40sgOXW5ZdIeJcGG","imkhcSkcE8k7rrpcO8oLWQK","W4bJW5TZW7q2WQzO","xCoZla8DWRDfbSkEW5FdMSoHCmoOWRxcLG","W4RcL8oKAxu2wq","xCoIpcuGWRnfiCk6W4VdUSoIFmoYWRpcJa","WPdcSLtdU1FdI8oa","WOFcQCk6WONcT8kdtwaTWQ8","xvRcQSkNyW","mHlcI8kObf02","W7FdG8oJW5FcR8oJg8ordSoGCr8X","W7RcKCkfWPdcI8oc","jsa6WP7dNW","W6ZcKHpcVmkQ","Cmk9W6aAwdxcRfNdRW","WOtcSvqVva","W4jLW5PxW7C5WQS","gG/cMXpcSW","EHtdSdddTSkMqSkB","W7a2xCoqua","x8kvvSkAqCk0AN0knSkdeG","W4TKW4T6W7C0WQrP","55AQ5BkC5OUs5l6D5zo9eeJcQSo/5PsC6zML5yU05l2g55w5","WQeHECkLWRu","dSoho8kiWQ3cVGNdPsxdNqGg","xw4YW6xcPq","m3ldQSoKCa","maFcLbhcIW","WPFcS0ldUv7dGSobbq","WQJdLf3cRa7cShtdVSoCrMVdO8o1WQO","cJVcPXZcOq","WO1oWQmfW6JdV24","55I95lIA6yoo5yM35Bw75yEV6zER","WOjah8kmWOK","vmowW5FcJSoA","iCogWOmkWRC","oZv5jxatWO4","lr9zW4Wm","cmoteCom","WRSIqmkqWOi","FehcNmkUFq","wmkfFCoFW4pdVXtdMGZdNr4JWRdcLgq","h8ooWRz3Ca","mtaTWPZdNSoqWOm","WO9aWQuHW7RdUxi","W5PlW4qXpq","WQrSWOefW74","dcdcJmo+W77cPmo2A8kwWQRdH8kA","WRLIp8kDWOi","W7CMW6erWRi","WODzd8k7WQe","q3SkW6JcSW","WQxcIha+vJ/dIG","W4RcH8o5uxGvxvqJ","uCkaxmoUW70","wSkyBmotW7hdRXu","u8kTWP0","5P+v5zcb5BEd5l6f6AMRW7qmxxdKUkJMLPRLJ7ZKVOtNL7i","wMW9W7JcLW","fgddI8kMWRldOmot","WO0ZAKDi","ECkoWOddK8oO","WRtdVSk/ya","FZ7cM8omWOm","xCkzESorW7JdPHtdTq","pd83WPJdN8o9WQpcSsa","rmoCW6JcM8orqmoSW70","WO5Lz8oSuq","cmoBWR8kWPG","ncGEWQVdGG","W77cJmknWPlcImoUWOq","pZ3cQbRcP8oEna"].concat(function(){return ["WRBdUdddKCou","WP4gxSkYWPtcLWDl","WPGCrCk5WR7cVqTKl8kXchRcJ8k5W5i","W4hdTCkDWRy+","aSkDW7VcG30","xhJdQmk9WRm","umkEz8ovW6JdGIxdNce","WRDCW5RcTWW","6BU055ML5Bk05yYy5B6J5zcgWR7dUmozWPu","WRdcJ8kwWPJcIq","E2BcSCkfDW","qv83WOeg","6z+Z6kwB5ywD5l6c5yY55P6MWPGdW5VdVEAkLEEvQowZREAkGowfVUs5Sa","DmklwmohW6hdNSoF","uMOwW6hcQuD+","W4GnW6CzWRdcSCkGrNP6BcT9oG","zCkIrCowW4S","WRz8WQ7dHfy","dHXleMm","eCofkCoGmq","W6f4W4Cvja","WQxcJgG+xa","bKO7W5JcJLzl","W5pcQCk+WRVcNW","pdVcTqpcJa","uhChW63cIun0tCkMWPBdS3dcImo1Cc0","6yAh6AAO5O6B5P+b5y6o6zQv5Pwu5l2u6AQ4","WPWmW7b1","jWn7W4qPWQ/cImkoWR4","nCoxWO4JWR5sumoHW4HydGRdNsq","W41KW4z3W6qsWPDbiW","5yAk5l6j5y2t5P6p6iwweeJcQSo/","cSo2W5pcN8kSWQ9DEWfPW4BdOmk9","EbbQiSk3","gHPgi2S","uepcN8kVrSk3WRCgu1hcNGyf","W4PLcHCyWQTpW6ypWOuvyeJcSa","WQuGW79kW5i","cCk6W5JcNeK","cL7dQmoswmkNW5ffqW","W6NcSbFcOSkR","WQJcH2O6vXldQMP5","aLtdOSoYxmkkW6T8qWb9W5yaiCk1W5W","WQCxW556W7q","WR9UzCogzCoZuCkE","b8oBWOKoWOa","jSoBc8ksWR3cJSkopmoeWQBcQKam","hCoeWQHtAmkeW78","ESk7W6SCqrJcNa","W44mW7CzWQRcSCkJv1HNxszrmeBcQW","W4SbW6a9WR7cUmkOrW","WPC4EKfg","A383WRWctez/n8k/W58","WOlcR1tdQKxdVCobdComWQddT0VcKevJWRC","h8oNhCojnq","W4ldJCkPWRORgSkxCG","uCkbsmo6W4S","WOBcOSkPWRNcTmkpta","WOBcJbtdOY0sBa","pSoLWPjNxW","ibTAk0m","qhdcH8kmCa","WOPuWQuVW4VdS3jerXhdQCosva","B8kjk01Ze8onWO/dVG","pYH1kN8GWQpcRW","nd7cJJlcLW","cmoco8kbWQNdUZ/dKHZdJXG","W79qpmk5WOtdPSoR","E8owW4JcPmok","c8kQnSkHwW","kI3cOblcUSoebmoyzSoc","fITje1e","WRddRSkVAmoX","W6hcRmkjWPZcJG","WQBdN0FcJbdcNu3dLSo+","W44DW6CZWP7cU8k5D31+","WOLXB8oEqa","W7j1W70pbG","c8k6W5ZcTeNdSmkDwG","DbtcN8oUWOST","dCopfSocg8oPwvi","W5qsESo2sW","CCkQE8ohW48","W7W/W54lWR8","W5rCW54Mna","qM0eWRGZ","i8oBWQWZWPm","W7NdG8odW7tcHa","xmk3WP7dImojW6OHxrDgW4BdVmkRWR3dMLas","wmk3BmobW50","WRdcUei3zG","W7xcQt/cSCky","rvNcOSkts8klWRCNtvBcJq","nZn/lNOyWO3cMG","nHxcGCkVha","osHOkuidWO/cTmk9hSo+dLhcP8kZ","uCkNAmohW70","WRr+WORdN0f8WRyq","dqKWWRBdOq","W5FcQY7dVaafvq","W5NcNIRdSWS","z8kEtSkUoSkObWRdOa","6BQR55If5lQu5yA55BcK5y2R5yUp55Ma6icV5yUQ6ikv5yYD55Es77YG","W73cI3zH5zcR5y615ysZ5QYg5l2M6AQh","iCkhh8k2CmkhqrFcO8oL","E8kWwmoWW5G","WRvko8k5WPldV8o9wG"]}())}())}();return ct=function(){return t},ct()}const Fn="2.9.44.8";async function Kn(){bn(),$n(),Zn(),re.CDKNotificationSwitch&&Vn();}var yn="jsjiami.com.v7";function dt(){const t=function(){return [yn,"kjsfRjTBiFaVqmngViOCr.OrwchMoDmPN.bqdvq7==","v8oiv8ofkG","W4VcHKX3ma","WQ8xWRFdT8ke","qKO8mCo/","FJJdIMOt","W7bTW5fjba","sSk9pSostq","CdpcSSkkWOG","WRpcU8oTm8oX","W4VcLSotCHCwWRrtuq","cSkThdtdUCkDWO3dKSosW780prn8W7ffWPZcQsNcReiJl3BdG3y1yW","jSozWQGZdq","W7lcPgVcTmoPBZehW4i","WPdcP8kfW5/dOa","z8ozWRX6cKRcNCk9W6LTbmklc3FdRJjfWRfDWRBdTSoZtN7cQSkffK0","Dmo5xSoxpG","W4FcVa7cNa","q8onAb3dOa","pZtcIgjo","W69XW4ldQ8k4WQRcJSknDa","behcIdVdLa","iCoBWQ07fxhcMmk5W6G","tmkwW4ZcOIejW7HHjG","xSoWoJ1l","WOldRvZdHSkLcuGuW7FdG8o+wCkr","k8kkW7NdRmkT","dcldIslMVOtMTzlNOiJKUBFPM7pKUOFOH6xLTQ/KVBRNLkjHWPpcV8o46k6a5y6A5Ps854cQ5ys16kYd6ycN556k5lM05AEg5yQz5yMu57ov6lwQ5P6s","5BAS5R6E5REc","WRxcO07dJCkTW440W7Xo","W6BcNb/cQSo1","g8kgW4xdUCkMW5T1C8kokmolWPhcI8kD","ESo2sColmW","W4eTdehcM8o7BZ3dPNJdUWK+ta","bKmZg8k4","f8kpWQtcU8o2","WOxdLvHL","WO7dHwnKW5SEseXc"].concat(function(){return ["WQJcQ8oJiSoMW7VcGmkIW5XI","o8kDj0FdJW","WR1xWO/cKMudWPFcPY0ZW5SKWOi","W57cSrJcGCo8wHu","cCkWWP/cU8or","uYRcUCk1WPO","CwpcRSkZCa","xSoLx8opdCkUWQ5JW68lt1BcRCko","kCoBhapcNthdI35jvSobaG","WR/dQwrF","k1OdgSkT","BCoVySolfW","W5RcHrNcQmo3","rSovCJBdKa","W73cOLLCkW","p8oyeaNcOa","W50cW6hdIdu","Fe7cT8kQA8oHz8ouC8o9W5u","W6jvWQRcT8kNWOHzpSouWQa","a2dcQbtdJG","WPNdVN02WOZcKLtcJCoaWQhdSG","y8knwhtdMb3dRNHODCoh","W7xcS3BcOCoSvt8","jmk2WRRcJmo7h0vIW7PZWRBdMJ3dHq","WOlcPCoRW4NdMG","BgyOl8ovWOZdOW","dSkeWQtcRmoh","f1nXnSkS","W63dQrfQEWlcGsZcSmojESoxWQm","W7ZcI15VdGupW7ZdHJaB","rMakvba","W7DyW4rnkmk8W68","WR7dIM5LW5W","EctcJmkzWPy","W4VdGCoEnHu","Dha+lSo9WQ8","WOvJj8k8W40vWOddHSoiW4SqWRe","W4BcOmo/FI0","xmo4w8oYhSk8WRfgW6KwB3NcSSkeyHOdAt8xW6a"].concat(function(){return ["sCkOW5nGW4O","oaucimky","xYNdMxtcQxTLhSkqW6BdKbRcSW","fmoggttcVG","vSo4xmovhSkOWR8","vSoPxNBcSSkqWPxcKSo4W545jfa","u8k3fCorDG","W4NcLd1qW48","x8oQmJzTywBdOG","fqTvngVdTeWcW4fNWORcHKO","W5/cGxDhgW","WQrmc8k1WPvdm8obWRnLW40T","W5NcK25DjG","WPauW6xdKSkk","WPtcU8oba3u","c8kuWRBcMSoW","C8kYW7RcMCk4aGv3WQy","W43cGmoUCrWZWOq","ygOuAt4","imoAWQeOmge","gmk2WPJcO8op","W6JcHZv6W5i","rhRcVmkICW","WRNcQKS3jN7dGqVcQSoktmooWQWcBmk2wmktWRS","WQaeW7/dTmkP","WR8GWOBdLSkNWQJcSmkkyq","W6/cH8o1CGPa","WOFdPf3dGmkLcKCXW6NdMmo0sCku","vf8dBZ7cQHydW6bgWOe","CcFcH8kHWR7dU2S","WRyaWPddKSkA","5B695yUl5R6Q5RE/56ks5P+75PAu5P2M6iskWRm","cSovcsBcQG","WQNcSmomW4VdNa","5OAf6lcF5l+x5A+h55sf5Bou5OIo55IK5PAh5O2jWRWmW4Xy55Mr6ik/5l6b6AUD5lUYWQ/cP8k35PA9boEwSmki5QcF5Bst5yA+6ykA5lIm6ycDWQBcKCoMnEw/V+AnVoAsNUs8PUw3R+E7UEwhNEMcPownHoEvVINcSvhdS+s7G+AwUUIfLUwiGUE6G+ADUUwnNUEvJ0ObWOz35lQH6zAF5yMW6kcT5yEy6yca5y+N55sJn8orW7ZdM+IgIUwkG+ENMoACQEwnIEEvRG","W6KGow/cJG","d04vjSkx"]}())}())}();return dt=function(){return t},dt()}function Oe(t,e){const n=dt();return Oe=function(i,o){i=i-213;let a=n[i];if(Oe.QZwxuD===void 0){var s=function(c){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",g="";for(let y=0,C,b,H=0;b=c.charAt(H++);~b&&(C=y%4?C*64+b:b,y++%4)?p+=String.fromCharCode(255&C>>(-2*y&6)):0)b=u.indexOf(b);for(let y=0,C=p.length;y<C;y++)g+="%"+("00"+p.charCodeAt(y).toString(16)).slice(-2);return decodeURIComponent(g)};const f=function(c,u){let p=[],g=0,y,C="";c=s(c);let b;for(b=0;b<256;b++)p[b]=b;for(b=0;b<256;b++)g=(g+p[b]+u.charCodeAt(b%u.length))%256,y=p[b],p[b]=p[g],p[g]=y;b=0,g=0;for(let H=0;H<c.length;H++)b=(b+1)%256,g=(g+p[b])%256,y=p[b],p[b]=p[g],p[g]=y,C+=String.fromCharCode(c.charCodeAt(H)^p[(p[b]+p[g])%256]);return C};Oe.LUHoRx=f,t=arguments,Oe.QZwxuD=!![];}const r=n[0],l=i+r,d=t[l];return d?a=d:(Oe.FoHQgf===void 0&&(Oe.FoHQgf=!![]),a=Oe.LUHoRx(a,o),t[l]=a),a},Oe(t,e)}((function(t,e,n,i,o,a,s){return t=t>>4,a="hs",s="hs",function(r,l,d,f,c){const u=Oe;f="tfi",a=f+a,c="up",s+=c,a=d(a),s=d(s),d=0;const p=r();for(;[]&&--i+l;)try{f=-parseInt(u(236,"J6Z^"))/1+parseInt(u(252,"TU4D"))/2+parseInt(u(320,"][V)"))/3*(parseInt(u(234,"KeOG"))/4)+parseInt(u(264,"Ck(#"))/5+parseInt(u(244,"v[3b"))/6+-parseInt(u(260,"a$9#"))/7+-parseInt(u(218,"cjNp"))/8;}catch{f=d;}finally{if(c=p[a](),t<=i)d?o?f=c:o=c:d=c;else if(d==o.replace(/[bgqCMhRDTNdVPfwOBrkFn=]/g,"")){if(f===l){p["un"+a](c);break}p[s](c);}}}(n,e,function(r,l,d,f,c,u,p){return l="split",r=arguments[0],r=r[l](""),d="reverse",r=r[d]("v"),f="join",r[f]("")})}))(3184,393274,dt,201),dt&&(yn=201);function bn(){var o,a;const t=Oe,e={mOWiS:t(245,"u)I1"),qyCYe:function(s,r,l,d,f){return s(r,l,d,f)},cmpkZ:t(215,"2oLY"),ZweCG:function(s,r){return s!==r},jPfwM:t(283,"Ck(#"),HTQNs:function(s,r){return s+r},UHtXh:function(s,r){return s+r},NxqvW:t(286,"qc(l"),ajqjK:function(s,r,l){return s(r,l)},efxKI:function(s,r){return s===r},HrOKt:t(291,"UEbe"),FalqN:function(s,r,l,d,f,c){return s(r,l,d,f,c)},WiHPg:t(319,"vj^Q"),VrMmh:t(275,"&@F%"),iYpPr:function(s,r){return s+r},hdocc:"【永久会员】",pEEAH:function(s,r){return s==r},NhMgE:"createIframe",FqvSF:t(306,"EF0K"),IuXlB:function(s){return s()},mqFXW:function(s,r,l){return s(r,l)},OdqqA:function(s,r){return s(r)},EGTyK:function(s,r){return s(r)},MLKeC:"qvjFj",lHcRB:t(302,"a$9#"),bShXK:t(225,"2oLY"),pKhsh:"application/json"};if(!k[t(274,"EF0K")])if(e[t(249,"E$wD")](e[t(309,"]1bT")],e[t(250,"(esz")])){(o=T[t(256,"5tDo")](t(233,"w[k9")))==null||o.getTaskListFromServer();return}else {(a=_0xab87a[t(293,"u)I1")](e[t(213,"&@F%")]))==null||a[t(254,"$5[9")]();return}let n=document[t(324,"c*0!")]("AC");const i={username:k[t(251,"9YCv")],playername:k.nickname,guildID:k[t(272,"Ny*L")],password:n[t(279,"KeOG")],version:Fn};e[t(235,"LNL]")](fetch,e[t(255,"wAcB")],{method:e[t(246,"Ck(#")],headers:{"Content-Type":e.pKhsh},body:JSON.stringify(i)}).then(s=>s[t(214,"2oLY")]())[t(308,"Wj2u")](s=>{const r=t,l={xSTsO:function(f,c,u,p,g){return e.qyCYe(f,c,u,p,g)},qTEHU:e.cmpkZ,lUxcU:"green",HJxzo:function(f,c){return e.ZweCG(f,c)},HtSan:e.jPfwM,wkZCX:function(f,c){return e[Oe(229,"]1bT")](f,c)},DYvee:function(f,c){return e[Oe(321,"Wj2u")](f,c)},ZoOZJ:e[r(296,"*[KL")],QlYnh:function(f,c,u){return e[r(310,"vj^Q")](f,c,u)},PkadC:function(f,c){return e[r(231,"C$Cf")](f,c)},iQrZj:e.HrOKt,xYVXY:function(f,c,u,p,g,y){return e[r(217,"]Nl8")](f,c,u,p,g,y)},CIgmK:function(f,c,u,p,g){return e[r(267,"u)I1")](f,c,u,p,g)}};let d=s[r(280,"0Jqk")]?e[r(317,"i[!K")]:"未激活";if(s[r(259,"$5[9")]?(n.setAttribute(e[r(312,"LNL]")],s[r(247,"oNaj")]),setTimeout(()=>{const f=r;l[f(276,"J6Z^")](f(298,"viPq"),"qwNNC")?n[f(224,"C$Cf")](l[f(288,"uzXS")],l[f(265,"u)I1")](l.wkZCX(l[f(273,"Ck(#")](l[f(305,"W$Oa")],s[f(223,"$5[9")][f(261,"viPq")](" ")[0]),`
`),d)):l[f(269,"#m5&")](_0x468d72,f(289,"oNaj"),l[f(270,"&@F%")],1e4,l.lUxcU);},3e3)):e[r(249,"E$wD")](e[r(227,"$5[9")],"bvkqj")?n[r(266,"Kv!M")](e[r(297,"oNaj")],e[r(230,"u)I1")](e[r(262,"J6Z^")](e[r(258,"C$Cf")],s[r(239,"vp6w")][r(303,"EF0K")](" ")[0])+`
`,d)):l[r(248,"2oLY")](_0x102a2f,_0x5d13fb.message,![]),s[r(284,"E$wD")][r(216,"koTz")](e[r(300,"koTz")])&&setTimeout(()=>{const f=r,c={LWtQq:function(u,p,g){return u(p,g)},AkfmL:function(u,p,g,y,C,b){return u(p,g,y,C,b)},YLjrV:l[f(253,"Ny*L")],foagB:function(u,p){return l[f(287,"C$Cf")](u,p)},OJnIN:l[f(228,"Wj2u")],nVNYs:function(u,p,g){return l[f(232,"cjNp")](u,p,g)}};l.xYVXY(Ve,s.message+f(318,"*[KL"),l.qTEHU,3e4,l[f(292,"$5[9")],function(){const u=f;if(c[u(315,"Dvb&")](u(285,"0Jqk"),c[u(242,"vp6w")]))c.nVNYs(Xe,s[u(241,"9YCv")],![]);else {const p={OhAky:function(g,y,C){return c[u(226,"UEbe")](g,y,C)}};c[u(323,"$5[9")](_0x2f6d56,_0x191c88[u(219,"Wj2u")]+"<br>激活码不限于自己使用<br>请及时点击该通知以复制到粘贴板",u(301,"Ny*L"),3e4,c[u(222,"w[k9")],function(){const g=u;p[g(290,"c*0!")](_0x5659e2,_0x118988[g(284,"E$wD")],![]);});}});},1e3),s.guildExpirationTime){const f=s[r(278,"v[3b")].replace(" ","T"),c=new Date(f);k[r(263,"Dvb&")][k.guildID]=c;}if(e.pEEAH(s.activated,!![])){const f=r(271,"vp6w")[r(220,"&@F%")]("|");let c=0;for(;[];){switch(f[c++]){case"0":document[r(322,"i[!K")](e[r(221,"E$wD")]).style.border=e[r(268,"KeOG")];continue;case"1":k.v&&e.IuXlB(ri);continue;case"2":k.v=!![];continue;case"3":k[r(314,"s745")]=0;continue;case"4":e[r(299,"E$wD")](setTimeout,()=>{const u=r;l[u(295,"9YCv")](Ve,"感谢你对界小抄的支持<br>皮肤体验中sp/族/界/标已全部互通<br>快捷操作已经全部可用<br>严教自动结果可用<br>一键制衡全选可用<br>自动秒杀可用",l[u(294,"0Jqk")],1e4,l[u(277,"w[k9")]);},5e3);continue}break}}else k[r(313,"EF0K")]=parseInt(s[r(304,"*8tl")]);e.OdqqA(ei,s[r(238,"*8tl")]),n[r(243,"z(8w")]="",e[r(307,"$5[9")](Qn,s.activated),e[r(325,"Sn0m")](lt,!![]);})[t(240,"uzXS")](s=>console.error(t(281,"Ny*L"),s));}function Vn(){fetch("https://goka.top:8080/CDK",{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{bi(t,"CDK");}).catch(t=>console.error("Error:",t));}async function Jn(t,e){const n=`https://goka.top:8080/getLottery?username=${t}&secId=${e}`;return fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>(k.lotteries=i,console.table(i),i)).catch(i=>(console.error("Error:",i),[]))}async function Zn(){try{const t=document.getElementById("choujiang");t.href="https://goka.top:8080/choujiang?username="+k.userID,(await Jn(k.userID,0)).forEach(n=>{An(n.secId,n.itemId,n.itemNum,n.times);});}catch(t){console.error("Error during fetching:",t);}}async function Sn(t,e,n,i,o){const a={username:k.userID,itemId:e,secId:t,times:n,level:i,itemNum:o};fetch("https://goka.top:8080/recLottery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).catch(s=>console.error("Error:",s));}async function wn(t){if(this.checked)this.removeEventListener("change",wn);else return;const e={username:k.userID};try{const i=await(await fetch("https://goka.top:8080/trial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return k.trialTime=parseInt(i.message),console.warn(k.trialTime),lt(!0),i}catch(n){return console.error("Error:",n),[]}}async function $n(){const t={tianGuo:!1,username:k.userID,officerLv:k.curOfficerLv,getData:!0};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+e.PlayerTianGuo+"/"+e.PlayerCount+" = "+(e.PlayerTianGuo/e.PlayerCount).toFixed(2);}).catch(e=>console.error("Error:",e));}async function Yn(t){let e={tianGuo:t,username:k.userID,officerLv:k.curOfficerLv,getData:!1};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(n=>n.json()).then(n=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+n.PlayerTianGuo+"/"+n.PlayerCount+" = "+(n.PlayerTianGuo/n.PlayerCount).toFixed(2);}).catch(n=>console.error("Error:",n));}async function kn(t=k.nickname){try{const e=await fetch(`https://goka.top:8080/support?username=${t}&userid=${k.userID}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.status===204||e.headers.get("Content-Length")==="0"){console.warn("今日已3助力");return}if(e.ok){const n=await e.json();for(let i of n){let o=0;for(;;){console.warn(i);let a=Cn(i);if(await me(5e3),a)o++;else break;if(o>2)break}}}}catch(e){console.error("Error:",e);}}async function Xn(t){try{await fetch("https://goka.top:8080/setting",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});}catch(e){console.error("Error:",e);}}async function ei(t){try{const e={};t==null||t.forEach(n=>{e[n.settingKey]=n.value;}),Lt.forEach(([n,i,o])=>{const a=document.getElementById(n);if(a){const s=e[n]==="true";if(Pe(n)!==s){a.checked=s;const r=new CustomEvent("change",{bubbles:!0,cancelable:!0});a.dispatchEvent(r);}}});}catch(e){return console.error("Error fetching settings:",e),{}}}var vn="jsjiami.com.v7";((function(t,e,n,i,o,a,s){return t=t>>4,a="hs",s="hs",function(r,l,d,f,c){const u=Me;f="tfi",a=f+a,c="up",s+=c,a=d(a),s=d(s),d=0;const p=r();for(;[]&&--i+l;)try{f=-parseInt(u(275,"i[g!"))/1+-parseInt(u(287,"H8$i"))/2+parseInt(u(283,"Q^pe"))/3+-parseInt(u(290,"Ju8B"))/4+-parseInt(u(302,"Q[MF"))/5*(parseInt(u(288,"k10q"))/6)+-parseInt(u(295,"Q^pe"))/7*(-parseInt(u(299,"SsVB"))/8)+-parseInt(u(267,"Zeua"))/9*(-parseInt(u(274,"sJ&P"))/10);}catch{f=d;}finally{if(c=p[a](),t<=i)d?o?f=c:o=c:d=c;else if(d==o.replace(/[xRTXtKWDPCLlSFgdwJIr=]/g,"")){if(f===l){p["un"+a](c);break}p[s](c);}}}(n,e,function(r,l,d,f,c,u,p){return l="split",r=arguments[0],r=r[l](""),d="reverse",r=r[d]("v"),f="join",r[f]("")})}))(3040,604003,ut,192),ut&&(vn=15455);function Me(t,e){const n=ut();return Me=function(i,o){i=i-266;let a=n[i];if(Me.mVmvMc===void 0){var s=function(c){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",g="";for(let y=0,C,b,H=0;b=c.charAt(H++);~b&&(C=y%4?C*64+b:b,y++%4)?p+=String.fromCharCode(255&C>>(-2*y&6)):0)b=u.indexOf(b);for(let y=0,C=p.length;y<C;y++)g+="%"+("00"+p.charCodeAt(y).toString(16)).slice(-2);return decodeURIComponent(g)};const f=function(c,u){let p=[],g=0,y,C="";c=s(c);let b;for(b=0;b<256;b++)p[b]=b;for(b=0;b<256;b++)g=(g+p[b]+u.charCodeAt(b%u.length))%256,y=p[b],p[b]=p[g],p[g]=y;b=0,g=0;for(let H=0;H<c.length;H++)b=(b+1)%256,g=(g+p[b])%256,y=p[b],p[b]=p[g],p[g]=y,C+=String.fromCharCode(c.charCodeAt(H)^p[(p[b]+p[g])%256]);return C};Me.KZWorK=f,t=arguments,Me.mVmvMc=!![];}const r=n[0],l=i+r,d=t[l];return d?a=d:(Me.KWuCic===void 0&&(Me.KWuCic=!![]),a=Me.KZWorK(a,o),t[l]=a),a},Me(t,e)}function ut(){const t=function(){return [vn,"djLsSXljiwDaKTmi.dcoRxm.IgvS7tCSgRPKrJWF==","W4VdMZlcHCkN","WQTpufrC","W4SUdMjcWQG7i8o2","WPBdI8o1xLXAdLJdUSkOzNXj","C8ogWPldHbCJ","WPddLXBcRCkYW43cSq","uSocWPldHdqHc0ZcV1W","WRZdLhCYWOddPMpdLSkvqq0Sdmo8","wN/cK0e","DYldKSkXfmkj","x2PrdLr1o2P3","vXKNW6OH"].concat(function(){return ["WRaPzXGvWR54rSkrEqhdT8oYW5S","W5PSWQ43WOCkxcPWk8kuWRC","vmoVWOJdIX4","tSodn2JdL8kn","W7ddNtFcVSk3","WPv7vx9JWO8GbCoCrCk5","ymodFmkpwG","fmodhSkB","W7/dN8odamoxCsa","aa5AjmkqWP3dRCkEhCoJymkcgq","n8kkW73cRmoGjmk6g8kLrmkFfLO","WODTxMHyWQO","W7eMrSosWO/cLLFcLeJdTG","oSkbDZ7cLmkgW58feb/dVZbp"].concat(function(){return ["eCo5W50NWOCpCIlcLSomWRG","zIFdK8k6cq","WQpcP8kGrv/dTdFcGCosWO/dHqNcHG","W7dcSNBcVq","BCkyWOXXW5m","de8Bpa","CSolWPhdTSkZ","aa1BimkrW57cTCkLiCo1ra","W6dcImkQhrylsa","vWXgA1O7vmkwWRlcNdtcSmk0","W5VcGdbLgCo1hgddLW","WPFdGSoXhXyuF1NdJa"]}())}())}();return ut=function(){return t},ut()}async function ti(t,e){const n=Me,i={daWKa:function(s,r){return s||r},MXhfl:function(s,r,l){return s(r,l)},YQkNM:function(s,r){return s+r},UHtkf:function(s,r){return s*r},uGJkl:function(s,r){return s-r},vtymJ:function(s,r,l){return s(r,l)},wsXmk:n(286,"Pwao"),bOiiR:function(s,r,l){return s(r,l)},DhHRq:"https://goka.top:8080/gameRecords/save",YIlRB:n(281,"(t!i"),msckg:"application/json",DxrPX:n(277,"H8$i")};let o=Le[t];o||(Le[t]=o={});let a=![];if(e[n(282,"Fx!j")](({figure:s,game_result:r,game_time:l,game_over_time:d,used_general:f,label_mode:c})=>{const u=n;r!=255&&!o[d]&&(o[d]={shenfen:s,result:i.daWKa(r,0),duration:l,general:f==null?void 0:f.map(p=>M[u(279,"Q[MF")][p]||p)},a=!![]);}),a){i.vtymJ(Ke,i[n(294,"*BR5")],mt);try{k.v&&await i[n(300,"Zeua")](fetch,i[n(280,"8J9b")],{method:i[n(278,"Zeua")],headers:{"Content-Type":i.msckg},body:JSON[n(298,"W60v")]({[k[n(285,"Q[MF")]]:Le})})[n(270,"spq6")](s=>s[n(293,"S26y")]())[n(291,"Q5Hm")](s=>{const r=n;!s&&i[r(292,"k10q")](setTimeout,()=>Laya[r(296,"SsVB")][r(271,"K!Dm")][r(268,"zdSY")](),i.YQkNM(Math[r(289,"K!Dm")](i[r(276,"zdSY")](Math[r(266,"zdSY")](),i[r(301,"Q[MF")](i.uGJkl(3e5,1e4),1))),1e4));});}catch(s){console.error(i[n(273,"uf#@")],s);}}}async function ni(t=k.userID){const e=`https://goka.top:8080/gameRecords/get?username=${t}`;return fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>(Bn(n),n)).catch(n=>(console.error("Error:",n),[]))}async function ii(t){try{console.warn("postCDK",t),fetch("https://goka.top:8080/CDK",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});}catch(e){console.error("Error:",e);}}const Je=["TableGameScene","HeroBattle1v1GameScene","ShenWuZaiShiGameScene","RogueLikeGameScene","RogueLike1v1GameScene","PointRace2V2GameScene","ZhuGongShaGameScene","GuanDuZhiZhanGameScene","ShiDianYanLuoGameScene","HuLaoGuanGameScene","ChallengeMatchFigureGameScene","ChallengeMatch2v2GameScene","GuideFiveFigureGameScene","GuideHappyGameScene","NewBieForceTrainGameScene","NewBieForceGameScene","QMBZGameScene","LZHZGameScene","ShenZhiShiLianGameScene","QianLiDJGameScene","DouDiZhuGameScene","GuideGameScene","New1v1GameScene","TSGameScene","XzcbpGameScene","PaiWeiGameScene","GuoGameScene","ChallengeMatchDouDiZhuGameScene","ChallengeMatchCountryGameScene","OfflineMatch2V2GameScene","DouDiZhu2023GameScene","ObDDZGameScene","ObGamePractice2v2Scene","ObGameScene"];async function ze(t,e=20,n=500,i=()=>{}){const o=await Promise.resolve(t());if(o){i(o);return}else e>0?setTimeout(()=>ze(t,e-1,n,i),n):i(null);}function ue(t,e=20,n=500){return new Promise(i=>{ze(t,e,n,i);})}function me(t,e){return new Promise((n,i)=>{setTimeout(()=>n(e),t);})}const T={instance:{},scene:"",gamescene:null,flag:null,limit:300,order:[],select:()=>null,skill:()=>null,card:()=>null,seat:()=>null,btn:()=>null,deal:()=>null,chat:()=>null,trace:()=>null,classes:Object.fromEntries(["SgsSprite","SgsText","SgsTexture","SgsFlatButton","SgsSpriteButton","SgsSpriteFilterBtn","SgsImage","SgsFlatImage","BaseEffect","BaseSpineEffect"].map(t=>[t,void 0])),class(t,e,n){var i,o,a,s,r,l,d,f,c,u,p,g,y,C,b,H,ne,v,D,U,_,Z,ee,xe,be,Se,I,O,K,Y,h,m;if(e||!this.classes[t]){if(typeof n=="function")this.classes[t]=n();else if(n)this.classes[t]=n;else if(t=="GameEventDispatcher")this.classes[t]=(i=this.find("SceneLayer"))==null?void 0:i.ged;else if(t=="SgsText")this.classes[t]=(o=this.find("SceneLayer","","topMenu","timeLabel"))==null?void 0:o.constructor;else if(t=="SgsTexture")this.classes[t]=(a=this.find("SceneLayer","","topMenu","lineBg"))==null?void 0:a.constructor;else if(t=="SgsFlatButton")this.classes[t]=(s=this.find("SceneLayer","","topMenu","logo"))==null?void 0:s.constructor;else if(t=="SgsSpriteFilterBtn")this.classes[t]=(r=this.find("SceneLayer","","topMenu","backBtn"))==null?void 0:r.constructor;else if(t=="SgsSpriteButton")this.classes[t]=(f=(d=(l=this.class("SgsSpriteFilterBtn"))==null?void 0:l.prototype)==null?void 0:d.__proto__)==null?void 0:f.constructor;else if(t=="SgsSprite")this.classes[t]=(p=(u=(c=this.class("SgsSpriteButton"))==null?void 0:c.prototype)==null?void 0:u.__proto__)==null?void 0:p.constructor;else if(t=="TimerManager")this.classes[t]=(g=this.class("ActivityGameDataManager"))==null?void 0:g.timerManager;else if(t=="ServerProxy")this.classes[t]=(y=this.class(this.classes.TaskManager?"TaskManager":"ActivityManager"))==null?void 0:y.proxy;else if(t=="ActivityManager"){let w=!this.instance.TaskDailyView;this.classes[t]=(C=this.get("TaskDailyView"))==null?void 0:C.manager,w&&this.del("TaskDailyView");}else if(t=="PromptLayer"){let w=!this.instance.FcmTipWindow;this.classes[t]=(H=(b=this.get("FcmTipWindow"))==null?void 0:b.ParentLayerInstance)==null?void 0:H.constructor,w&&this.del("FcmTipWindow");}else if(t=="ActivityGameDataManager"){let w=!this.instance.RogueRuQinWindow;this.classes[t]=(ne=this.get("RogueRuQinWindow"))==null?void 0:ne.adManager,w&&this.del("RogueRuQinWindow");}else if(t=="GeneralSkinManager"){let w=!this.instance.GeneralSkinView;this.classes[t]=(v=this.get("GeneralSkinView"))==null?void 0:v.gsm,w&&this.del("GeneralSkinView");}else if(t=="TaskManager"){let w=!this.instance.MentorSelfTaskView;const S=this.get("MentorSelfTaskView");S==null||S.tabCliCked(1);const E=(D=this.find(S,"MentorSelfLiCheng","MentorLiChengUI"))==null?void 0:D[0];if(!E)return null;E.isSelf=!0,(U=E.taskData)==null||U.splice(0,1/0,{HasAward:!0,baseVo:{name:"",MentorReward:{ApprenticeItemsList:[]}},TaskConditions:[]}),E.updateContent(),this.classes[t]=(xe=(ee=(Z=(_=E==null?void 0:E.panel)==null?void 0:_.content)==null?void 0:Z._children)==null?void 0:ee[0])==null?void 0:xe.manager,w&&this.del("MentorSelfTaskView");}else if(t=="RogueLikePveManager")this.classes[t]=this.find("SceneLayer","RogueSmallMapScene","PveMgr"),this.classes[t]||(this.classes[t]=(be=this.get("RogueSmallMapScene"))==null?void 0:be.PveMgr,this.del("RogueSmallMapScene",3e5));else if((t=="BaseEffect"||t=="BaseSpineEffect"||t=="SgsImage"||t=="SgsFlatImage")&&(this.classes[t]=(O=(I=(Se=this.gamescene)==null?void 0:Se.SelfSeatUi)==null?void 0:I.getEffectType(t=="BaseEffect"?2:4))==null?void 0:O.constructor,!this.classes[t])){const w=this.get("SkinInfoWindow");if(!(w!=null&&w.skinBigSps))return;Object.assign(w,{skinData:{skinBaseVo:{}},generalinfo:{ItemID:1}}),w.showRightInfo(),w.skinBigSps.CreateBgEffect(),w.skinBigSps.CreateSpineEffect(),this.classes.SgsImage=(K=w.skinImg)==null?void 0:K.constructor,this.classes.SgsFlatImage=(Y=w.skinRightImg)==null?void 0:Y.constructor,this.classes.BaseEffect=(h=w.skinBigSps.bgEffect)==null?void 0:h.constructor,this.classes.BaseSpineEffect=(m=w.skinBigSps.spineBg)==null?void 0:m.constructor,this.del("SkinInfoWindow");}}return this.classes[t]},get(t,e){var n;if(t in this.classes)return this.class(t)?new this.classes[t]:void 0;if(e||!this.instance[t]){this.del(t),this.instance[t]=Laya.ClassUtils.getInstance(t);try{this.instance[t].Init();}catch{console.error("Laya instance "+t+" Init() error!");}}return (n=this.instance[t])!=null&&n.timeoutId&&clearTimeout(this.instance[t].timeoutId),this.instance[t]},del:(()=>{function t(e){this.instance[e]&&(e.endsWith("Window")?this.instance[e].Close():this.instance[e].destroy(),delete this.instance[e].timeoutId,delete this.instance[e]);}return function(e,n=0){this.instance[e]&&(this.instance[e].timeoutId&&(clearTimeout(this.instance[e].timeoutId),delete this.instance[e].timeoutId),n?this.instance[e].timeoutId=setTimeout(()=>{t.call(this,e);},n):t.call(this,e));}})(),find:(()=>{const t=i=>Array.isArray(i)&&i.length==1?i[0]:i,e=i=>Object.prototype.toString.call(i)==="[object Object]";function n(i,o){var a;if(o in i)return i[o];{let s=o?(a=i==null?void 0:i._children)==null?void 0:a.filter(r=>{var l;return r.name==o||((l=r.constructor)==null?void 0:l.name)==o}):i==null?void 0:i._children;return s!=null&&s.length?t(s):[]}}return function(...i){let o=e(i[0])?i.shift():Laya.stage,a=i.reduce((s,r)=>s instanceof Object?Array.isArray(s)?s.length?Array.isArray(r)?t(s.flatMap(l=>r.flatMap(d=>n(l,d)))):t(s.flatMap(l=>n(l,r))):[]:e(s)?Array.isArray(r)?t(r.flatMap(l=>n(s,l))):t(n(s,r)):[]:[],o);return (a==null?void 0:a.length)==0?null:a}})(),clickBuilder(t,e,n=o=>o,i=(o,a)=>(o.onClick(),a)){if(!t)return null;function o(a,s=!0){return a?s&&!a[e]?!1:i(a,s):null}return function(...a){let s=typeof a[0]=="boolean"?a.shift():null;if(a.length==0)a=Object.keys(t);else {let r=t.map(n);a.every(l=>r.includes(l))&&(a=a.map(l=>r.indexOf(l)));}if(typeof s=="boolean")return a.map(r=>o(t[r],s));for(let r of a){let l=t[r];if(l!=null&&l[e])return o(l)}return null}},keepClick(t,e){var n;return (n=t==null?void 0:t.skill)!=null&&n.SkillId?(t.start=t.stop=!1,t.on(Laya.Event.MOUSE_DOWN,t,function(){if(this.start){ie.clear("keepClick"+this.skill.SkillId),this.InitSkin("skillPuTong_up","skillPuTong_over","skillPuTong_up","skillPuTong_disabled","skillPuTong_up","skillPuTong_over","skillPuTong_up"),this.start=!1;return}this.longPressTimer=setTimeout(()=>{ie.loop("keepClick"+this.skill.SkillId,e,200),this.InitSkin("skillSuoDing_up","skillSuoDing_over","skillSuoDing_up","skillSuoDing_disabled","skillSuoDing_up","skillSuoDing_over","skillSuoDing_up"),this.start=!0;},1e3);}),t.on(Laya.Event.MOUSE_UP,t,function(){clearTimeout(this.longPressTimer);}),t.on(Laya.Event.MOUSE_OUT,t,function(){clearTimeout(this.longPressTimer);}),t.skill.Name):null},reset(){this.auto(null),this.gamescene=null,this.limit=0,this.order=[],this.chat=this.trace=this.select=this.skill=this.card=this.seat=this.btn=this.deal=()=>null;},init(){var a,s,r,l,d,f,c;if((r=(s=(a=this.gamescene)==null?void 0:a.seatContainer)==null?void 0:s.seatUIs)!=null&&r.length)return !0;let t=this.find("SceneLayer",Je);if(!t)return !1;(l=t.rightView)==null||l.tabClicked(2);let e=(d=t.seatContainer)==null?void 0:d.seatUIs,n=t.chatViewUI,i=(f=t.rightView)==null?void 0:f.traceArea;if(!(e!=null&&e.length)||!n||!i)return !1;this.gamescene=t,k.v&&ai(),ci(),this.seatUIs();const o=(c=this.gamescene.manager)==null?void 0:c.UpdateSeatFixedViewID;return typeof o=="function"&&!o.toString().includes("func.apply")&&Object.defineProperty(this.gamescene.manager,"UpdateSeatFixedViewID",{value:function(){o.apply(this,arguments),ie.delay("seats",T.seatUIs.bind(T),500);}}),this.chat=(u,p=!1)=>{var g;return n!=null&&n.chatInput?(typeof p=="string"&&(u=p+":"+btoa(u)),n.chatInput.text=u,p&&((g=n.sendBtn)==null||g.onClick()),!0):null},this.trace=u=>{let p=i.msgContainer.getChildAt(i.msgContainer.numChildren-1),g=i.getHtmlBase(u+"<br>");if(!g){console.error("创建trace项失败",u);return}g.y=p.y+p.height||3,i.msgContainer.addChild(g),Laya.timer.callLater(i,i.reScorllTo);},this.limit=290,ue(()=>{var u;return A.firstID!==void 0&&((u=e.filter(p=>{var g;return (g=p==null?void 0:p.seat)==null?void 0:g.fixedViewId}))==null?void 0:u.length)},300).then(()=>this.auto(k.autoBotSwitch||!1)),!0},seatUIs(t=!1){var i,o,a,s,r;let e=(s=(a=(o=(i=this.gamescene)==null?void 0:i.seatContainer)==null?void 0:o.seatUIs)==null?void 0:a.map(l=>l.seat))==null?void 0:s.filter(l=>!l.isHide);if(!((r=e==null?void 0:e.filter(l=>l.fixedViewId))!=null&&r.length))return [];let n=e.map((l,d,f)=>({seat:l,seatID:l.index,order:l.fixedViewId-1,figure:A.isGuoZhan?l.Country==f[0].Country||-!!l.Country:l.figure==f[0].figure,ai:l.playerInfo.clientId<4e9?0:l.playerInfo.showName.includes("金")?1:2}));A.seatUIs.map(l=>l.order).join(",")!=n.map(l=>l.order).join(",")&&A.fromUI(n),t===!0&&n.some(({ai:l})=>l)&&pe("对战AI小杀！"),n=n.map(l=>({...l,index:this.order.indexOf(l.seatID)})).sort((l,d)=>l.figure-d.figure||d.ai-l.ai||l.index-d.index||l.order-d.order),this.order=n.map(l=>l.seatID),console.warn("优先级：",n.map(({seatID:l,order:d,figure:f,ai:c})=>["玩家-","玫瑰金-","小杀-"][c]+(A.name(l)||l)+"-"+d+(f?"-队友":"")).join(">"));},wugu:(()=>{let t=null;return function(e=1e3){return new Promise(n=>{ie.loop("wugu",()=>{var a,s;let i=this.find("WindowLayer","WuGuFengDengWindow");if(!i){ie.clear("wugu"),n(t),t=null;return}let o=(a=i.showCardUIs)==null?void 0:a.find(r=>r.maskAlpha==0);o&&((s=i.OnSelectNormalCardUi)==null||s.call(i,o),t=o.Card.cardId);},e);})}})(),yanJiao(t,e=1){var o;const n=this.find("WindowLayer","YanJiaoWindow");if(!n)return;if(((o=n.seat)==null?void 0:o.index)!=A.mySeats[0])return !1;if(e%2!=0){let a=n.cardQueues.flatMap(s=>s);n.cardQueues[0].splice(0,1/0,...a),n.cardQueues[1].splice(0,1/0),n.cardQueues[2].splice(0,1/0),n.layoutCardUIs();return}let i=n.cardQueues.flatMap(a=>a).reduce((a,s)=>(a[s.Card.CardNumber].push(s),a),Array.from({length:14},()=>[]));n.cardQueues[0].splice(0,1/0,...t[2].flatMap((a,s)=>a&&s?i[s].splice(0,a):[])),n.cardQueues[1].splice(0,1/0,...t[e/2].flatMap((a,s)=>a&&s?i[s].splice(0,a):[])),n.cardQueues[2].splice(0,1/0,...t[1-e/2].flatMap((a,s)=>a&&s?i[s].splice(0,a):[])),n.layoutCardUIs();},async newRoom(){var e,n,i,o,a,s;const t=this.find("SceneLayer","HallScene","roomListView");if([28].includes(t==null?void 0:t.modeId)){k.autoBotSwitch=28,t.onShowOfWindow();const r=await ue(()=>this.find("WindowLayer","CreatOFRoomWindow"));if(typeof(r==null?void 0:r.sureCreate)!="function")return null;r.sureCreate();}else if([74,84].includes(t==null?void 0:t.modeId)){t.sendCreateTable();const r=await ue(()=>this.find("WindowLayer","CreateTableWindow"));if(!r)return null;(e=r.showMoreHandler)==null||e.call(r),(i=(n=r.modeBox)==null?void 0:n._labels)!=null&&i.length&&(r.modeBox.selectedIndex=r.modeBox._labels.length-1),r.timeBox&&(r.timeBox.selectedIndex=1),r.banItemBox&&(r.banItemBox.selected=!0),r.passwordInput&&(r.passwordInput.text="GuDuZun"),await me(1e3),(o=r.sureHandler)==null||o.call(r);const l=await ue(()=>this.find("SceneLayer","TableScene"));if(!((s=(a=l==null?void 0:l.seatListView)==null?void 0:a.seatList)!=null&&s.length))return null;let d=l.seatListView.seatList.filter(f=>!f.WaitInfo).slice(-1)[0];l.seatListView.showBtns(d),l.seatListView.sitHandler();}else return pe("请进入【经典场-国战】或【自由场-身份演武】房间列表后再开启挂机！"),!1;return !0},async readyStart(t){var o,a,s,r,l,d,f,c,u,p,g,y,C,b,H,ne,v,D,U;const e=await ue(()=>this.find("SceneLayer","TableScene"),t);let n=(a=(o=e==null?void 0:e.seatListView)==null?void 0:o.seatList)==null?void 0:a.length;if(!n||!(e!=null&&e.startUI))return null;await me(2e3);let i=(l=(r=(s=e==null?void 0:e.topMenu)==null?void 0:s.areaServerLabel)==null?void 0:r.text)==null?void 0:l.includes("国战老友");if(i||(f=(d=e.dianjiangView)==null?void 0:d.onOpenDJClick)==null||f.call(d),!((u=(c=e.startUI)==null?void 0:c.startBtn)!=null&&u.visible))return (g=(p=e.startUI)==null?void 0:p.readyBtn)!=null&&g.visible&&((C=(y=e.startUI).readyHandler)==null||C.call(y)),i&&k.autoBotSwitch==9&&(k.autoBotSwitch=29),!0;if(i){k.autoBotSwitch=28;for(let _ of e.seatListView.seatList.filter(Z=>!Z.WaitInfo&&Z.seatId<n/2))e.seatListView.showBtns(_),e.seatListView.addAiHandler(_),await me(200);await me(1e3);}else {if(k.autoBotSwitch===!0)for(let _ of e.seatListView.seatList.filter(Z=>!Z.WaitInfo&&Z.seatId>=n/2))e.seatListView.showBtns(_),e.seatListView.addAiMHandler(_),await me(200);if((b=e.confirmNormalAi)==null||b.call(e),await me(1e3),k.autoBotSwitch===!0&&((v=(ne=(H=e.banGeneralBtn)==null?void 0:H.skins)==null?void 0:ne[0])!=null&&v.startsWith("open"))){e.banGeneralHandler();const _=await ue(()=>this.find("WindowLayer","BanGeneralWindow"));if(!((D=_==null?void 0:_.showItemui)!=null&&D.length))(U=_==null?void 0:_.Close)==null||U.call(_);else {for(let Z of _.showItemui.slice(0,7))Z.onClick(),await me(200);_.onSureBtnClick();}}}return await me(5e3),ze(()=>{let _=this.find("SceneLayer","TableScene","startUI");if(!(_!=null&&_.startBtn)||!(_!=null&&_.confirmStart))return "Cancel";if(_.startBtn.enabled)_.confirmStart();else return !1;return !0},60,2e3),!0},auto(t){var e,n,i,o,a,s;if(t!=this.flag&&(this.flag=t,ie.clear("auto"),ie.clear("keepClick769"),ie.clear("keepClick295"),t!==null))if((n=(e=this.gamescene)==null?void 0:e.seatContainer)!=null&&n.selfSeatUi){if(this.deal.toString().endsWith("null")){let r=this.gamescene.seatContainer.seatUIs,l=this.gamescene.seatContainer.selfSeatUi.skillItems,d=this.gamescene.seatContainer.selfSeatUi.spellSelector,f=(i=this.gamescene.seatContainer.selfSeatUi.cardContainer)==null?void 0:i.cardUis,c=(o=this.gamescene.seatContainer.selfSeatUi.buttonBar)==null?void 0:o.btns;if(!(r!=null&&r.length)||!f||!c||!l||!d)return !1;this.seatUIs(!0);let u=this.clickBuilder(d.btnList,"_enabled",y=>{var C;return (C=y.data)==null?void 0:C.sendData},(y,C)=>{var b;return d.btnClick(y),(b=y.data)==null?void 0:b.sendData});this.select=(y,...C)=>{var b;if(d.visible&&(!y||((b=d.spell)==null?void 0:b.SkillId)==y))return u(...C||[])},this.skill=this.clickBuilder(l,"activated",y=>{var C;return (C=y.skill)==null?void 0:C.SkillId},(y,C)=>{var b;return y.SetSelected(C),(b=y.skill)==null?void 0:b.SkillId});let p=this.clickBuilder(f,"activated",y=>{var C;return (C=y.Card)==null?void 0:C.cardId},(y,C)=>{var b;return y.setSelected(C),(b=y.Card)==null?void 0:b.cardId});this.card=(...y)=>{var b,H;if(y!=null&&y.length)return p(arguments);let C=this.gamescene.seatContainer.selfSeatUi.cardContainer;return (b=C.AllSelectHandCards)==null||b.call(C),(H=C.cardUis)==null?void 0:H.filter(ne=>ne.selected).map(ne=>{var v;return (v=ne.Card)==null?void 0:v.cardId})},this.seat=this.clickBuilder(r,"activated",y=>{var C;return (C=y.seat)==null?void 0:C.index},(y,C)=>{var b;return y.seat.SetSelected(C),(b=y.seat)==null?void 0:b.index}),this.btn=this.clickBuilder(c,"_enabled",y=>y.name,(y,C)=>(y.onClick(),y.name));let g=y=>Array.isArray(y)?y[0]:y;this.deal=(y=this.order,C=[0,1,2,3])=>{var H,ne,v,D,U,_;this.select();let b=g(this.card());(H=ge.name.闪电)!=null&&H.has(b)||(ne=ge.name.借刀)!=null&&ne.has(b)?b=g(this.card(!0)):(v=ge.name.铁索)!=null&&v.has(b)?y=[!1]:j.currentID==A.mySeats[0]&&((D=ge.name.无懈)!=null&&D.has(b)||(U=ge.name.国无)!=null&&U.has(b))?C=[3,1,0,2]:(_=ge.name.桃)!=null&&_.has(b)&&A.seatUIs.some(({seat:Z,ai:ee,figure:xe})=>ee>1&&!xe&&!Z.isDead&&Z.currentHp<=0)&&(C=[1,2,3,0]),this.flag==9&&(C=[3,1,0,2]),this.btn(...C.slice(0,1))===null&&(this.seat(...y),this.btn(...C));},t&&A.isGuoZhan&&l.forEach(y=>!y.generalHasShow&&y.canHalfShow&&!y.isHalfShow&&!y.activated&&y.clickHandler()),k.v&&setTimeout(()=>l.map(y=>{var b;let C=(b=y.skill)==null?void 0:b.SkillId;if(C){if(C==769)return this.keepClick(y,()=>this.skill(769));if(C==295)return this.keepClick(y,()=>this.select(295,2))}else return null}).filter(Boolean).forEach(y=>Ve(`长摁${y}技能可进入锁定模式，开启自动摸牌<br>锁定模式下点击技能取消自动摸牌`,"skill-tooltip",5e3,"green",null)),3e3);}if(t==9){const r=()=>{var l;this.limit%2?this.btn(3,1,0):this.skill(62),this.limit--,((l=this.gamescene.Manager)==null?void 0:l.GamePassedTime)>60&&ie.loop("auto",r,500);};ie.loop("auto",r,3500),pe("启动黄盖主公自动苦肉模式");}else if(t==3){let r=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,r,r.stageMoveHandler),ie.loop("auto",()=>{r.seat.OnlineState!=3&&r.onTrusteeshipClick(),this.limit--<=0&&this.auto(k.autoBotSwitch||!1);},1e3),pe("切换到AI托管挂机...");}else if(t==28)if(!k.autoBotInfinite&&A.seatUIs.slice(1).every(({ai:r})=>r)){let r=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,r,r.stageMoveHandler),ie.loop("auto",()=>{r.seat.OnlineState!=7&&r.onTrusteeshipClick();},1e3);}else ie.loop("auto",()=>this.deal(),1e3),A.seatUIs.slice(1).some(({ai:r})=>!r)&&ue(()=>{var r,l;return A.mySeats[0]>=0&&((l=(r=A.seatUIs[0])==null?void 0:r.seat)==null?void 0:l.Country)>0}).then(()=>this.chat(`mainSeatID:${A.mySeats[0]}  :Country:${A.seatUIs[0].seat.Country}`,"INFO"));else if(t==29)ie.loop("auto",()=>this.deal(),1e3);else if(t){let r=(s=(a=this.gamescene)==null?void 0:a.seatContainer)==null?void 0:s.selfSeatUi;ie.loop("auto",()=>{var l;((l=r==null?void 0:r.seat)==null?void 0:l.OnlineState)>=3&&(r==null||r.stageMoveHandler()),this.deal();},1e3),pe("切换到脚本接管挂机...");}else console.warn("自动挂机已关闭！");}else this.flag=null;}};window.laya=T;const si=(()=>{const t=n=>Array.isArray(n)?n:[n];function e(n=!0,i,o,a){var l,d,f,c,u,p;const s=((l=this==null?void 0:this.constructor)==null?void 0:l.name)=="SelectCardWindow"?this:T.find("WindowLayer","SelectCardWindow");if(!s)return null;if(((d=s.seat)==null?void 0:d.index)!=(o>=0?o:A.mySeats[0])||i>0&&((f=s.Skill)==null?void 0:f.SkillId)!=i)return !1;a=(a>0?a:((c=s.Skill)==null?void 0:c.SelectCardCountWhenResponse)||1)-(((u=s.selectCardUis)==null?void 0:u.length)||0);let r=t(T.find(s,"SkillSelectCardUi")).filter(g=>{var y;return (g==null?void 0:g.activated)&&!((y=s.selectCardUis)!=null&&y.includes(g))}).slice(0,a).map(g=>{var y;return s.onTouchCard({target:g}),(y=g.Card)==null?void 0:y.CardId});return n===!0&&((p=s.confirmClick)==null||p.call(s)),r}return async function(n,...i){var H,ne;const o=await ue(()=>T.find("WindowLayer","SelectCardWindow"),50,100);if(n)return e.apply(o,i);const a=o==null?void 0:o.confirm_btn,s=((H=o.Skill)==null?void 0:H.SelectCardCountWhenResponse)||1;if(!(a!=null&&a.textField)||!(s>1)||((ne=o.seat)==null?void 0:ne.index)!=A.mySeats[0])return !1;let{x:r,y:l,width:d,height:f,_labelColors:c,_labelPadding:u,textField:{fontSize:p,font:g,bold:y},constructor:C}=a,b=o.myFuncBtn||new C;return Object.assign(b,{label:"一键全选",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:d,height:f,labelSize:p,labelFont:g,labelBold:y,_labelColors:c,_labelPadding:u}),b.pos(r-1.2*d,l),o.myFuncBtn||(b.InitSkin("window_btn_style1_normal","window_btn_style1_over","window_btn_style1_down","window_btn_style1_disable"),o.addChild(o.myFuncBtn=b),o.myFuncBtn.on(Laya.Event.CLICK,o,e)),!0}})();function Ct(t,e=null){var n,i;if(re.cardLabelSwitch){const o=(i=(n=T.gamescene.seatContainer)==null?void 0:n.selfSeatUi)==null?void 0:i.cardContainer;if(!o||!o.cardUis)return;o.cardUis.forEach((a,s)=>{try{if(!a)return;if(t=="新组合"){const r=a.Card.cardInfo.type+"-"+a.Card.cardInfo.Color;!j.spellSpace[3338].has(r)&&a.CardLabelDesc!="新组合"?a.AddCardLabel(t):j.spellSpace[3338].has(r)&&a.CardLabelDesc=="新组合"&&a.AddCardLabel();}if(t=="明牌"&&e.includes(a.Card.cardId)){let r=a.CardLabelDesc;r!="明牌"&&a.AddCardLabel(r+t);}}catch(r){console.error(`更新卡牌${s}标签失败:`,r);}});}}const ai=(()=>{function t(n){var a,s;const i=((a=this==null?void 0:this.constructor)==null?void 0:a.name)=="CardUIContainer"?this:T.find("SceneLayer",Je,"SelfSeatUi","cardContainer");if(!((s=i==null?void 0:i.cardUis)!=null&&s.length))return null;if(n===!0&&typeof(i==null?void 0:i.AllSelectHandCards)=="function")return i.AllSelectHandCards();if(n!==!1&&typeof(i==null?void 0:i.RAllSelectHandCards)=="function")return i.RAllSelectHandCards();let o=i.cardUis.filter(r=>r==null?void 0:r.activated).reduce((r,l)=>(r[l.selected?1:0].push(l),r),[[],[]]);n!==!0&&o[1].forEach(r=>r.CardUI_Click()),n!==!1&&o[0].forEach(r=>r.CardUI_Click());}const e=[function(){t.call(this,!0);},function(){t.call(this,void 0);},function(){t.call(this,!1);}];return async function(){var i;const n=await ue(()=>{var o;return ((o=T.gamescene)==null?void 0:o.SelfSeatUi)||T.find("SceneLayer",Je,"SelfSeatUi")});if(!((i=n==null?void 0:n.cardContainer)!=null&&i.cardUis))return !1;if(e.forEach((o,a)=>{let s=n["myFuncBtn"+a]||T.get("SgsSpriteFilterBtn");Object.assign(s,{label:["全选","反选",""][a],width:40,height:25,labelSize:12,labelBold:!0,labelFont:"simsun",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",labelPadding:"0,0,0,0",labelColors:"#E4D5A0,#E4D5A0,#E4D5A0,#d0cece"}),n["myFuncBtn"+a]||(a==2?s.InitSkin(""):s.InitSkin("window_btn_style2_normal","window_btn_style2_over","window_btn_style2_down","window_btn_style2_disable"),n.addChild(n["myFuncBtn"+a]=s),n["myFuncBtn"+a].on(Laya.Event.CLICK,n.cardContainer,o));}),!n.OnStageResize.toString().includes("myFuncBtn")){const o=n.OnStageResize;Object.defineProperty(n,"OnStageResize",{value:function(){o.apply(this,arguments);let a=this.width-(this.constructor.handCardRight||252)+50;Array.from({length:3},(s,r)=>{var l;return (l=this["myFuncBtn"+r])==null?void 0:l.pos(a,33+23*r)});}}),n.OnStageResize();}return !0}})();async function ri(){if(!k.patchGetOnlineSKinList){const t=T.class("GeneralSkinManager").__proto__;if(!t||typeof t._GetOnlineSKinList=="function")return;t._GetOnlineSKinList=t.GetOnlineSKinList,Object.defineProperty(t,"GetOnlineSKinList",{value:function(e){let n=t._GetOnlineSKinList.apply(this,arguments);if(!re.skinSwitch)return n;const i=M.vskinMap[e]?Array.from(M.vskinMap[e]).filter(r=>r!==e):[];if(i&&i.length){for(var o=[],a=0;a<i.length;a++){var s=this.getOnlineSKinListByGeneralId(i[a],!0,!0);s&&s.length&&(o=o.concat(s));}if(n!=null&&n.length){const r=new Map;[...n,...o].forEach(l=>r.set(l.skinID,l)),n=Array.from(r.values());}}if(n&&n.length)return n},configurable:!0}),k.patchGetOnlineSKinList=!0;}}async function oi(){const t=Symbol("originalRelayout"),e=await ue(()=>{var i;return ((i=T.gamescene)==null?void 0:i.topMenu)||T.find("SceneLayer",Je,"topMenu")});async function n(){const i=e==null?void 0:e.__proto__;!i||k.patchSkinBtn||(k.patchSkinBtn=!0,i[t]||(i[t]=i.ReLayoutBtnByScene),Object.defineProperty(i,"ReLayoutBtnByScene",{value:function(){i[t].apply(this,arguments),this.skinBtn&&(this.skinBtn.visible=!0);let o=SystemContext.gameWidth;for(let a=this.btnList.length-1;a>=0;a--){const s=this.btnList[a];s.visible&&(o=o-s.width+1,s.x=o);}this.btnStartX=o;},configurable:!0}));}!e||k.patchSkinBtn||(n(),k.patchSkinBtn=!0,e.ReLayoutBtnByScene());}const ft={res:{},sprite:void 0,async init(){var n,i;if((n=this.sprite)!=null&&n._parent)return this.sprite;const t=await ue(()=>T.find("BackgroundLayer"));if(!t||(this.sprite=this.sprite||t.myBg||T.get("SgsSprite"),!this.sprite))return !1;this.sprite.bg||(this.sprite.bg=T.get("SgsFlatImage"),this.sprite.addDrawChild(this.sprite.bg)),t.myBg=this.sprite,t.addChild(this.sprite),this.sprite.zOrder=100;const e=(i=this.sprite)==null?void 0:i.OnStageResize;return typeof e=="function"&&!e.toString().includes("func.apply")&&Object.defineProperty(this.sprite,"OnStageResize",{value:function(){e.apply(this,arguments);let o=Math.max(this.width?SystemContext.gameWidth/this.width:1,this.height?SystemContext.gameHeight/this.height:1);this.scale(o,o),this.pos(SystemContext.gameWidth/2,SystemContext.gameHeight/2);}}),!0},async setBg({url:t,type:e,width:n,height:i}=this.res){var o;if(t&&((o=this.sprite)!=null&&o._parent||await ue(()=>this.init()),!(!this.sprite||this.sprite.url==t))){if(Object.assign(this.sprite,{width:n,height:i}),this.clear(),console.warn(e,t),e==0)this.sprite.bg.skin=t,this.sprite.bg.posInteger(-n/2,-i/2);else if(e!=1){let a,s,r,l;e==2?(r="sk",l=T.class("BaseEffect")):(r="json",l=T.class("BaseSpineEffect")),e!=3?(a=["beijing","xingxiang"],s="play"):(a=["beijing","daiji","qianjing"],s="DaiJi"),a.forEach(d=>{let f=new l;this.sprite.addChild(f),f.AutoReleaseRes=!0,f.InitEffect(`${t}/${d}.${r}`,s,!0),f.playEffect(),e==2&&f.size(n,i);});}this.sprite.OnStageResize(),this.sprite.url=t,Object.assign(this.res,{url:t,type:e,width:n,height:i}),await Ke(k.userID+"::paperRes",this.res,!0);}},async switch(t){var e;if(t)return this.setBg();(e=this.sprite)==null||e.removeSelf();},async clear(t){var n;if(!this.sprite)return;for(this.res={},this.sprite.bg.skin=null;this.sprite.numChildren;)(n=this.sprite.removeChildAt(0))==null||n.destroy();if(!t)return;jt(k.userID+"::paperRes",!0),this.sprite.removeSelf(),this.sprite=void 0;const e=await ue(()=>T.find("BackgroundLayer"));if(!e)return !1;delete e.myBg;}},Jt=(()=>async function(){var t,e,n;try{const i=await ue(()=>T.find("WindowLayer","BlessNewWindow"));if(!i||!i.blessTimeTxt||!i.tongxinTxt||!i.taskUI){console.error("UI实例或其属性未定义");return}const a=((e=(t=i.blessTimeTxt)==null?void 0:t.text)==null?void 0:e.split(`
`))[0],s=parseFloat(i.tongxinTxt.text)||0,r=parseFloat((n=i.taskUI.drawContaniers[0])==null?void 0:n.text)||0,l=r===0?0:Math.floor(s/r*100);i.blessTimeTxt.text=`${a}
出结率：${s} / ${r} = ${l}%`;}catch(i){console.error("执行 calTongXinJieLv 时发生错误:",i);}})(),li=(()=>{async function t(){var r,l,d,f,c,u,p,g;if(!((r=this==null?void 0:this.skinImg)!=null&&r.skin))return null;let i=this.is169?594:this.isHor?536:350,o=this.is169?335:this.isHor?380:464,a=this.isDynamicPlay!=1?0:((d=(l=this.skinData)==null?void 0:l.skinBaseVo)==null?void 0:d.ResType)||0,s=((c=(f=this.skinData)==null?void 0:f.skinBaseVo)==null?void 0:c.DynamicSkinBigSkeletonUrl)||"";if(a==2?T.class("BaseEffect",!0,()=>{var y,C;return (C=(y=this.skinBigSps)==null?void 0:y.bgEffect)==null?void 0:C.constructor}):a>2&&T.class("BaseSpineEffect",!0,()=>{var y,C;return (C=(y=this.skinBigSps)==null?void 0:y.spineBg)==null?void 0:C.constructor}),a==1){s=(((p=(u=this.skinData)==null?void 0:u.skinBaseVo)==null?void 0:p.DynamicSkinBigUrl)||"")+".mp4",this.myFuncBtn0.off(Laya.Event.CLICK,this,t),this.myFuncBtn0.on(Laya.Event.CLICK,this,()=>e.call(this,s)),this.myFuncBtn0.label="保存视频";return}else if(a==3)this.skinData.skinBaseVo.NewSkinJudge?s=this.skinData.skinBaseVo.DynamicSkinBigSkeletonUrlNew(this.juexingState):a=4;else if(!(a==2||a==4)){let{response:y,url:C}=await n(this.skinImg.skin);if(C&&y.ok){s=C;let b=await y.blob(),H=await createImageBitmap(b);i=H.width,o=H.height;}}(g=this.Close)==null||g.call(this),console.warn({url:s,type:a,width:i,height:o}),Ve("壁纸设置成功，该壁纸会覆盖所有原生壁纸<br>如需停止使用该壁纸，可在设置中关闭","ac-tooltip",1e4,"green",null),setTimeout(()=>ft.setBg({url:s,type:a,width:i,height:o}),1e3);}async function e(i){var f,c,u,p,g,y,C;let o=((c=(f=this.skinData)==null?void 0:f.skinBaseVo)==null?void 0:c.name)||M.generalDict[(u=this.skinData)==null?void 0:u.generalID]||"三国杀皮肤",a=(g=(p=this.skinData)==null?void 0:p.skinBaseVo)==null?void 0:g.bigSkin,s=i&&typeof i=="string"?i:((y=this.skinImg)==null?void 0:y.skin)||"";if(!s)return;let[,r,l]=s.match(/\/([0-9]+)(_[0-9])?(\.png|\.mp4)/i).map(Number),d=((C=M.skinSP[r])==null?void 0:C.length)||{60500:3,62300:2,66100:2}[r]||(l?2:1);(d>1?Array.from({length:d},(b,H)=>"_"+(H+1)):[""]).forEach(async b=>{let H=s.replace(/(\/[0-9]+)(_[0-9])?(\.png|\.mp4)/i,"$1"+b+"$3"),{response:ne}=await n(H,a);if(ne!=null&&ne.ok){let v=await ne.blob(),D=URL.createObjectURL(v);Hn(D,o+b),URL.revokeObjectURL(D);}});}async function n(i,o=!0){if(o){let s=i.replace("/big/static/","/big/bigSkin/"),r=await fetch(s);if(r.ok)return {response:r,url:s}}let a=await fetch(i);return a.ok?{response:a,url:i}:null}return async function(){const i=await ue(()=>T.find("WindowLayer","SkinInfoWindow")),o=i==null?void 0:i.skinFrame;if(!o)return !1;let{x:a,y:s,width:r}=o;return [t,e].forEach((l,d)=>{let f=i["myFuncBtn"+d]||T.get("SgsFlatButton");Object.assign(f,{label:["设为壁纸","保存图片"][d],width:166,height:50,labelSize:18,labelFont:"fzltchjw",labelPadding:"0,0,10,0",labelColors:"#FCE1AA,#FCE1AA,#FCE1AA,#FCE1AA",align:"center",valign:"middle"}),f.pos(a+r/2+(d-1)*166,s-50),i["myFuncBtn"+d]||(f.InitSkin("skinInfo_dynamicBtn_normal","skinInfo_dynamicBtn_over","skinInfo_dynamicBtn_down","skinInfo_dynamicBtn_disable"),i.contentSprite.addDrawChild(i["myFuncBtn"+d]=f),i["myFuncBtn"+d].on(Laya.Event.CLICK,i,l));}),!0}})(),ci=(()=>{let t=!1;async function e(){var a,s,r;const i=await ue(()=>T.find(this==null?void 0:this.stateContainer,"SeatStateTextUI")).then(l=>Array.isArray(l)?l[0]:l),o=(a=i==null?void 0:i.__proto__)==null?void 0:a.SetSeatState;return typeof o!="function"||o.toString().includes("func.apply")?t=!1:(Object.defineProperty(i.__proto__,"SetSeatState",{value:function(l,d){var c;let f=["SeatStateBoTuPo"].includes((c=d==null?void 0:d.constructor)==null?void 0:c.name);f&&(l!=null&&l.IsSelf)&&(this.textField.fontSize=17,this.textField.color="#FFFFFF"),o.apply(this,arguments),f&&(this.textField.text=this.textField.text.replace("♠","♤").replace("♥","♡"));},configurable:!0}),["SeatStateBoTuPo"].includes((r=(s=i.seatState)==null?void 0:s.constructor)==null?void 0:r.name)&&(i.textField.fontSize=17,i.textField.color="#FFFFFF",i.textField.text=i.textField.text.replace("♠","♤").replace("♥","♡")),t=!0)}function n(i){const o=i==null?void 0:i.updateSeatState;if(typeof o!="function"||o.toString().includes("func.apply"))return !1;Object.defineProperty(i,"updateSeatState",{value:async function(a){t&&Object.defineProperty(this,"updateSeatState",{value:o,configurable:!0}),o.apply(this,arguments),!t&&a&&a.Opened&&!a.MultiFlag&&!(a.IsZhanFaState&&this.rogue1v1ZhanFaContainer)&&!a.NeedAnimate&&a.NeedLayout&&!(a.IsStateCard&&this.seat&&this.seat.IsSelf)&&(t=!0,e.call(this));},configurable:!0});}return async function(){var o,a,s;if(t)return !0;const i=(a=(o=T.gamescene)==null?void 0:o.seatContainer)==null?void 0:a.seatUIs;if(!(i!=null&&i.length))return !1;i.forEach(n),n((s=i[0])==null?void 0:s.__proto__);}})();async function di(){var i;const t=await ue(()=>T.find("SceneLayer","","chatViewUI")||T.find("SceneLayer","","","chatViewUI"));if(typeof(t==null?void 0:t.showChatSettingView)!="function")return null;t.showChatSettingView();const e=(i=t.settingView)==null?void 0:i.__proto__,n=e==null?void 0:e.createChildren;if(typeof n!="function")return !1;if(e.wuxieQ=re.wuxieSwitch,Object.defineProperty(e,"set",{value:function(){re.wuxieSwitch=this.wuxieQ=!re.wuxieSwitch;},configurable:!0}),n.toString().includes("func.apply"))return !0;Object.defineProperty(e,"createChildren",{value:function(){n.apply(this,arguments);const o=this==null?void 0:this.roomCheck;if(!o)return;this.bgTet.height=this.height+=21;let{x:a,y:s,width:r,height:l,_labelColors:d,_labelPadding:f,textField:{fontSize:c,font:u,bold:p},constructor:g}=o;this.wuxieCheck=new g,Object.assign(this.wuxieCheck,{label:"显示技能读条",y:s+21*2,x:a,width:r,height:l,labelSize:c,labelFont:u,labelBold:p,_labelColors:d,_labelPadding:f}),this.wuxieCheck.InitSkin("cmn_checkbox_normal","cmn_checkbox_over","cmn_checkbox_dark","cmn_checkbox_disabled","cmn_checkbox_select_normal","cmn_checkbox_select_over"),this.addDrawChild(this.wuxieCheck),this.wuxieCheck.on(Laya.Event.CHANGE,this,this.set),this.wuxieQ&&(this.wuxieCheck.selected=!0);},configurable:!0});}async function ui(){const t=await ue(()=>T.find("SceneLayer",null,"leftView","__proto__"),1e3),e=t==null?void 0:t.getBtnRes;if(typeof e!="function"||e.toString().includes("func.apply"))return !1;Object.defineProperty(t,"getBtnRes",{value:function(){return e.apply(this,arguments).filter(n=>n.type!=10187).sort((n,i)=>!n.zhutiIcon==!i.zhutiIcon?0:i.zhutiIcon?1:-1)},configurable:!0});}async function fi(){const t=await ue(()=>T.find("SceneLayer","TableScene")),e=t==null?void 0:t.recordBtn;if(!(e!=null&&e.textField))return !1;let{x:n,y:i,width:o,height:a,constructor:s}=e,r=t.myFuncBtn||new s;return Object.assign(r,{width:o,height:30}),r.pos(31,46),t.myFuncBtn||(Object.assign(r,{label:"将池",labelFont:"fzltchjw",labelSize:18,sizeGrid:"15,15,15,15",labelColors:"#FBEDC3,#FBEDC3,#FBEDC3,#FBEDC3"}),r.InitSkin("vippoint_red_normal","vippoint_red_over","vippoint_red_down","vippoint_red_disable"),t.addChild(t.myFuncBtn=r),t.myFuncBtn.on(Laya.Event.CLICK,t,t.showJiangChi)),!0}function hi(t){mt[t]?Bn(mt[t]):mt[t]=Le,Ht(t);}async function Ht(t,e=[26,35,44,5,7]){const n=T.get("SevenDayResultWindow");n.uuid=t,Le.req=new Set(e),setTimeout(()=>{Array.from(Le.req,i=>n.sendReq(i)),T.del("SevenDayResultWindow",1e3);},0);}async function Zt(){setTimeout(async()=>{var e,n;await me(1e3);const t=T.get("KanShuWindow",!0);((e=t.jbpUserData)==null?void 0:e.Status)==0&&(t.onKanShuClick(),await me(2e3),t.onUpdateAwardStatus(),await me(1e3)),((n=t.jbpUserData)==null?void 0:n.Status)==1&&(t.autoClickAllPeach(),await me(1e3),t.onShowEvent(),await me(500),t.onShowEvent(),T.del("KanShuWindow",3e3));},0);}async function $t(){var n;const t=T.get("ZhiGouMonthCardView");if(t.updateAllInfo(),(n=t.cardData)!=null&&n.bActive){t.getBtnClick();for(let i=0;i<4;i++)t.addItemClick(i);}T.del("ZhiGouMonthCardView",1e3);const e=T.get("NewWeekCardView");e.updateAllInfo(),e.getBtn._text=="领取"&&e.getBtnClick(),T.del("NewWeekCardView",1e3);}async function Wn(){var n,i,o,a,s;const t=T.get("GeneralOpenWindow"),e=((s=(a=(o=(i=(n=t==null?void 0:t.newView)==null?void 0:n.freeTimeTxt)==null?void 0:i._text)==null?void 0:o.split(":"))==null?void 0:a.map(Number))==null?void 0:s.reduce((r,l,d)=>r+l*Math.pow(60,2-d),0))*1e3||0;e?setTimeout(Wn,e):t.onNewOpenBag(8100101,3),T.del("GeneralOpenWindow",5e3),ue(()=>T.find("WindowLayer","GeneralOpenResultWindow")).then(r=>r==null?void 0:r.Close());}async function pi(){var n;const t=T.get("GuildDrumWindow",!1);t==null||t.initDrums(),t.updateItems(),await me(1e3);let e=(n=t==null?void 0:t.itemList)==null?void 0:n.find(i=>i.leftTime);ie.loop("drum",()=>e==null?void 0:e.btnClick(),300,(e==null?void 0:e.leftTime)||0,()=>T.del("GuildDrumWindow",500));}async function mi(t=!1){try{await me(1e4);const e=T.get("DailySignNewView",!1);if((e==null?void 0:e.signState)==2)for(let n=0;n<e.itemList.length;n++){let i=e.itemList[n].baseData.ID;i!=9020101&&i.toString().startsWith("90")&&t||e.itemList[n].type==1&&(e.itemList[n].OnSignClick(),pe("自动签到已完成<br>如需关闭，可在小抄设置中关闭"),await me(500));}for(let n=0;n<(e==null?void 0:e.totalItemList.length);n++)e.totalItemList[n].type==3&&(e.totalItemList[n].OnSignClick(),await me(500));if(T.del("DailySignNewView",1e4),!t){const n=T.get("WyqjBigView"),i=at(n).find(o=>{var a;return ((a=o==null?void 0:o.constructor)==null?void 0:a.name)=="WyqjSmallView"});i==null||i.Init(),i==null||i.onClickTiYanBtn(),T.del("WyqjBigView",3e3);}}catch(e){console.error(e);}}async function Yt(){var s,r;const t=T.get("TaskDailyView");t.taskPanel.contentSp.drawContaniers.filter(l=>{var d;return (d=l==null?void 0:l.taskvo)==null?void 0:d.CanAward}).forEach(l=>l.onOpClick()),setTimeout(()=>{Array.from({length:3},(l,d)=>{var f;return (f=t.topDayTask)==null?void 0:f.onClickItem(d)}),t.manager.HasJDRewardRed&&t.onceRewardClick(),T.del("TaskDailyView",3e3);},3e3);const e=T.get("IndpdtPanelWindow2");e.enterFunc(),(r=(s=e==null?void 0:e.tabGroup)==null?void 0:s.btnList[2])!=null&&r.redPointIsShow&&gi(!0,13360001,1);const[n,i]=at(e,!0),o=at(n).find(l=>{var d;return ((d=l==null?void 0:l.constructor)==null?void 0:d.name)=="NewPlayerSignGiftView"});o==null||o.Init(),o!=null&&o.panel&&ue(()=>T.find(o.panel,"Box","NewPlayerSignGiftItem")).then(l=>{var d;return (d=l==null?void 0:l.filter(f=>{var c;return (c=f==null?void 0:f.taskUserVo)==null?void 0:c.CanAward}))==null?void 0:d.forEach(f=>f.onItemClick())}),i&&(i.Init(),i.clickTab(1),i.curView.taskPanel.contentSp.drawContaniers.filter(l=>{var d;return (d=l==null?void 0:l.taskvo)==null?void 0:d.CanAward}).forEach(l=>l.onOpClick()),setTimeout(()=>{i.clickTab(0),i.tabGroup.btnList[0].redPointIsShow&&i.curView.onClickGetAll();},3e3)),T.del("IndpdtPanelWindow2",1e4);const a=T.get("ActivityWindow");a.enterFunc(),at(a).flatMap(l=>{try{return at(l)}catch{return []}}).flatMap(l=>{try{return l.itemArr.map(d=>d.getAwardBtn)}catch{return []}}).filter(l=>l.visible).forEach(l=>l.onClick()),setTimeout(()=>{var l;return (l=T.find("WindowLayer","TaskReqRewardWindow"))==null?void 0:l.Close()}),ie.delay("VuplexWebView",()=>a.Hide(),500),T.del("ActivityWindow",3e3);}function at(t,e){var n,i,o;return ((o=(i=(n=t==null?void 0:t.tabGroup)==null?void 0:n.btnList)==null?void 0:i.filter(a=>e||a.redPointIsShow))==null?void 0:o.map(a=>{let s=t.viewStack.childInitDataList.findIndex(r=>r==a.value);return s<1&&(s=a.value),t.viewStack.selectedIndex=s,t.viewStack._childUIList[s]}))||[]}function Xt(t=""){const e=T.get("GiftExchangeWindow");e.giftInput.text=t,e.getClicked(),T.del("GiftExchangeWindow",1e4);}const In=(()=>{async function t(){var i,o,a,s,r,l,d,f,c,u;const e=((i=this==null?void 0:this.constructor)==null?void 0:i.name)=="MailWindow"?this:T.find("WindowLayer","MailWindow")||T.get("MailWindow"),n=e==null?void 0:e.mailContentWindow;if(Array.isArray(n==null?void 0:n.winArr)){(a=(o=T.class("ActivityManager"))==null?void 0:o.AskRechargeInfoAgain)==null||a.call(o),await me(1e3);for(const p of (((s=e.manager)==null?void 0:s.systemMailList)||[]).filter(({mid:g})=>g)){let g=p.mid;if(p.title=="道具过期提醒")(r=e.manager)==null||r.DeleteMail(g);else if(p.hasAttachMent){p.read||(l=e.manager)==null||l.ReadMail(g);let y=p.AttachmentType,C=((d=p.attachment.getStringKey("key"))==null?void 0:d[0])??"",b=p.fromUserName&&p.fromUserName!="系统未知好友"?p.fromUserName:"";if(y==1){let H=b?2:0;n.ChangeWindow(H,p),(f=n.winArr[H])==null||f.getBtnClick(),(c=n.winArr[H])==null||c.Close(),n.close();}else y==2&&((u=e.manager)==null||u.SendClientDbsGetgmawardReq(C,g,b));await me(500),setTimeout(()=>{var H;p.read&&p.Geted&&((H=e.manager)==null||H.DeleteMail(g));},1e3);}}T.del("MailWindow",1e4);}}return async function(e){if(e)return t();const n=await ue(()=>T.find("WindowLayer","MailWindow")),i=n==null?void 0:n.feedbackBtn;if(!(i!=null&&i.textField))return !1;let{x:o,y:a,width:s,height:r,_labelColors:l,_labelPadding:d,textField:{fontSize:f,font:c,bold:u},constructor:p}=i,g=n.myFuncBtn||new p;return Object.assign(g,{label:"一键领取",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:s,height:r,labelSize:f,labelFont:c,labelBold:u,_labelColors:l,_labelPadding:d}),g.pos(o-1.05*s,a),n.myFuncBtn||(g.InitSkin("win_noborder_btn_normal","win_noborder_btn_over","win_noborder_btn_down","win_noborder_btn_disable","win_noborder_btn_over"),n.addChild(n.myFuncBtn=g),n.myFuncBtn.on(Laya.Event.CLICK,n,t)),!0}})(),en=(()=>{let t=null,e=0,n="",i,o;const a=d=>{var f,c,u,p;return ((f=d==null?void 0:d.selloutTex)==null?void 0:f.visible)==!1&&((p=(u=(c=d==null?void 0:d.limitCount)==null?void 0:c._innerHTML)==null?void 0:u.includes)==null?void 0:p.call(u,"0/"))};function s(){t=null,document.querySelectorAll('.left input[type="checkbox"]').forEach(d=>{d.checked=!1;});}function r(d=900,f=50){ie.loop("seckill",()=>{var c;if(i=T.find("WindowLayer","ActivityWindow","","WelfareSeckillView")||T.get("WelfareSeckillView"),!((c=i==null?void 0:i.itemList)!=null&&c.length))return null;if(o=i.itemList.find((u,p)=>{var g;return p==t||((g=u.data)==null?void 0:g.goods_id)==t}),typeof(o==null?void 0:o.buyHpItemHandler)!="function")return !1;ie.set("seckill",l,e+50),pe(`秒杀连点器启动！
${n}`);},f,d/f>>0,()=>pe(`未找到秒杀面板！
连点器秒杀失败！`));}function l(d=300){o==null||o.buyHpItemHandler(),ie.loop("seckill",()=>{o==null||o.buyHpItemHandler(),a(o)||(s(),ie.clear("seckill"));},d);}return (d,f,c="",u=1e3)=>{var p;if(d===!1)s(),ie.clear("seckill"),pe("秒杀连点器已取消！");else if(d!==void 0&&d!==t){e=f||ie.now();let g=e-u,y=g-ie.now();t=d,n=c||((p=M.goodsID(d))==null?void 0:p.name)||"",y>1?(pe(`${(y/6e4).toFixed(1)}分钟后启动秒杀连点器！
${n}`),ie.set("seckill",r,g)):r();}return t}})();async function tn(t={},e="",n=null,i=0){i&&await me(i);let o=await ue(()=>T.find("PromptLayer","ConfirmWindow"));if(!o)return null;Array.isArray(o)||(o=[o]),o.forEach(a=>{if(!(a!=null&&a.confirmData)||Object.entries(t).some(([r,l])=>a.confirmData[r]!=l))return;typeof n=="boolean"&&a.checkBox&&(a.checkBox.selected=n);let s=a.confirmData.buttonArr.find(r=>r.label==e);s.callBack&&s.thisObject&&s.callBack.apply(s.thisObject,s.callBackParams),a.confirmData.clickClose&&a.RemoveFromParent();});}async function gi(t=!1,e,n,i=null,o=null,a=0,s=null){let r=[...arguments];if(typeof r[0]=="boolean"?r.shift():t=!1,r.length<2)return null;const l=T.get("NormalShopBuyWindow");l.enterWindow(...r),t?(l.confirmBuy(),T.del("NormalShopBuyWindow")):(l.confirmBuyHandler(),delete T.instance.NormalShopBuyWindow);}function Cn(t="浩铭er",e=!1){var i;const n=T.get("SzxyHelpWin");return n.enterWindow(t),(i=n==null?void 0:n.btnHelp)!=null&&i.enabled?(n.onClickHelp(),T.del("SzxyHelpWin"),!0):(e&&pe("助力已完成，非常感谢！"),T.del("SzxyHelpWin"),!1)}const Fe=0,De=65280,Te=65282;var En="jsjiami.com.v7";function Qe(t,e){const n=it();return Qe=function(i,o){i=i-283;let a=n[i];if(Qe.zdEtZF===void 0){var s=function(c){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let p="",g="";for(let y=0,C,b,H=0;b=c.charAt(H++);~b&&(C=y%4?C*64+b:b,y++%4)?p+=String.fromCharCode(255&C>>(-2*y&6)):0)b=u.indexOf(b);for(let y=0,C=p.length;y<C;y++)g+="%"+("00"+p.charCodeAt(y).toString(16)).slice(-2);return decodeURIComponent(g)};const f=function(c,u){let p=[],g=0,y,C="";c=s(c);let b;for(b=0;b<256;b++)p[b]=b;for(b=0;b<256;b++)g=(g+p[b]+u.charCodeAt(b%u.length))%256,y=p[b],p[b]=p[g],p[g]=y;b=0,g=0;for(let H=0;H<c.length;H++)b=(b+1)%256,g=(g+p[b])%256,y=p[b],p[b]=p[g],p[g]=y,C+=String.fromCharCode(c.charCodeAt(H)^p[(p[b]+p[g])%256]);return C};Qe.Diplav=f,t=arguments,Qe.zdEtZF=!![];}const r=n[0],l=i+r,d=t[l];return d?a=d:(Qe.Vzrebh===void 0&&(Qe.Vzrebh=!![]),a=Qe.Diplav(a,o),t[l]=a),a},Qe(t,e)}function it(){const t=function(){return [En,"qnyjghsCYjMiamViQ.McomU.IWv7fpeISKGkxSPE==","fmo9W7FcVmogWQD3pYtcRLJdUvO","kmkVbmkwl8oGCmoTjG","W5qqeCoyW5HcWRxdI27dN8o6","sCo0FY5YWQWbsmoQs8oAna","WRJcHr7cVaXItJJdPg7cJh4","W4JcNdZcTYzzE8or"].concat(function(){return ["WO4Mk8oUW5xdMWOK","p1RdHuVdHmo3BCoklqtdIH3cGG","ptuCWRmaW6b9WRxdRW","E0RcISoOeZpdPffRWOCG","uGxdMcmTzmk/B0VdPmoqWQ3cHa","WOhcOmkabCoaW49GuhXiW4W","sSokp8khuHRcLXO","W7BdQIZcRSoSmSoDWRbwymkR"].concat(function(){return ["WQfBWQZcMhxcK8knrJ0clG","ztBdS8oqW6FcLmkyW77cTZ8bcG","W6VcHmoEWOZcH8o4WROFWP/cVSkD","WRqDW57cNCkgifzgW5xdPmksv3e","yHr+ESoGwmo2CmoadLCYWQa"]}())}())}();return it=function(){return t},it()}((function(t,e,n,i,o,a,s){return t=t>>1,a="hs",s="hs",function(r,l,d,f,c){const u=Qe;f="tfi",a=f+a,c="up",s+=c,a=d(a),s=d(s),d=0;const p=r();for(;[]&&--i+l;)try{f=parseInt(u(295,"axVt"))/1+-parseInt(u(283,"u5Ld"))/2+parseInt(u(284,"bC)X"))/3*(parseInt(u(296,"e$!x"))/4)+parseInt(u(289,"oAX8"))/5*(parseInt(u(287,"[J0P"))/6)+-parseInt(u(301,"OylK"))/7+-parseInt(u(288,"66pA"))/8*(parseInt(u(285,"c3Vy"))/9)+-parseInt(u(286,"tVp$"))/10*(-parseInt(u(298,"pRYO"))/11);}catch{f=d;}finally{if(c=p[a](),t<=i)d?o?f=c:o=c:d=c;else if(d==o.replace(/[yVhgIeMYCPkqWQxfGKpSEnU=]/g,"")){if(f===l){p["un"+a](c);break}p[s](c);}}}(n,e,function(r,l,d,f,c,u,p){return l="split",r=arguments[0],r=r[l](""),d="reverse",r=r[d]("v"),f="join",r[f]("")})}))(376,849340,it,190),it&&(En=it);const k={userID:0,account:"",nickname:"",inviteName:"",curOfficerLv:1,v:![],UsedGeneralSkinID:{UsedGeneralSkinID:{}},isFrameAdd:![],goods:[],lotteries:[],closeIframe:![],trialTime:0,autoBotStatus:30,autoBotInfinite:![],guildVIP:{},recGoods:{}};let Lt=[["padding","PADDING",0],["skinSwitch","SKIN_SWITCH",!1],["generalSwitch","GENERAL_SWITCH",!1],["skinStateSwitch","SKIN_STATE_SWITCH",!0],["skinStateBlockSwitch","SKIN_STATE_BLOCK_SWITCH",!1],["skinPaperSwitch","SKIN_PAPER_SWITCH",!0],["allPaperSwitch","ALL_PAPER_SWITCH",!1],["cardBackSwitch","CARD_BACK_SWITCH",!1],["seatUISwitch","SEAT_UI_SWITCH",!0],["autoSignSwitch","AUTO_SIGN_SWITCH",!1],["autoSignSkipSwitch","AUTO_SIGN_SKIP_SWITCH",!1],["autoInviteSwitch","AUTO_INVITE_SWITCH",!1],["autoDrumSwitch","AUTO_DRUM_SWITCH",!1],["autoWuJiangSwitch","AUTO_WUJIANG_SWITCH",!1],["autoKanShuSwitch","AUTO_KANSHU_SWITCH",!1],["autoYueKaSwitch","AUTO_YUEKA_SWITCH",!1],["skipWindowSwitch","SKIP_WINDOW_SWITCH",!1],["skipProbWindowSwitch","SKIP_PROB_WINDOW_SWITCH",!1],["skipADSwitch","SKIP_AD_SWITCH",!0],["CDKNotificationSwitch","CDK_NOTIFICATION_SWITCH",!0],["killEffectSwitch","KILL_EFFECT_SWITCH",!1],["wuxieSwitch","WUXIE_SWITCH",!1],["rogueCitySwitch","ROGUE_CITY_SWITCH",!0],["cardLabelSwitch","CARD_LABEL_SWITCH",!0]];const re=new Proxy(Object.fromEntries(Lt.map(([t,e,n])=>(localStorage.getItem(e)===null&&Ke(e,n),[t,Pe(e,n)]))),{set:function(t,e,n){const i=Lt.find(([s])=>s===e);if(!i)return !1;const o=i[1];Ke(o,n);let a={username:k.userID,settingKey:e,value:n};return qt(Xn(a),300),t[e]=n,e=="padding"&&(window.padding=n),!0}}),V={seatWidthPercent:.3,firstUpdateSeatUI:!1,scoreFrameTotal:10,scoreFrameIndex:0,paddingLeft:10,paddingRight:15,paddingTop:30,paddingBottom:0,paddingLeftTopExtra:0,selectStarted:!1,leftRightTop:20,stackCardAreaHeight:0,stackCardAreaY:0,MAX_SEAT_WIDTH:149,inPopFirstTarget:!1,unscaledWidth:146,unscaledHeight:172,MAX_HEIGHT:180,MAX_WIDTH:150,scale:1,selfSeatUiUnscaledHeight:178,rightBarWidth:221,seatUIs:[],cities:[]},M={},Le={};function Bn(t){Object.assign(Le,t);}const mt=Pe("gameRecord",{}),ve={},ie={tasks:{},corr:0,shift:0,now(t=!0){return Date.now()+this.corr+(t?0:this.shift)},sync(t){this.corr=(t.ServerTime-8*3600)*1e3-Date.now(),this.shift&&(t.ServerTime+=this.shift/1e3>>0);},update(t=Date.now()){var e;(e=T.class("TimerManager"))==null||e.SendHeartbeart(t);},modify(t=null){this.shift=t?t-this.now():0,this.update();},local(t){let e=new Date(t??this.now()),n=e.getTimezoneOffset();return e.setMinutes(e.getMinutes()-n),e.toISOString()},loop(t,e,n,i=1/0,o){this.clear(t);let a=setInterval(()=>{e(),--i<=0&&(this.clear(t),typeof o=="function"&&o());},n);return this.tasks[t]={intervalId:a,callback:e},this.tasks[t].intervalId},delay(t,e,n){this.clear(t);let i=setTimeout(()=>{this.clear(t),e();},n);return this.tasks[t]={timeoutId:i,callback:e},this.tasks[t].timeoutId},set(t,e,n,i=18e5){this.clear(t);const o=this.now(),a=(n??o)-o;if(a>1){let s=setTimeout(()=>this.set(t,e,n,i),a<i?a:i);this.tasks[t]={timeoutId:s,callback:e};}else e();},trigger(t){if(!this.tasks[t])return null;let{timeoutId:e,callback:n}=this.tasks[t];return e&&(clearTimeout(e),delete this.tasks[t]),typeof n!="function"?!1:(n(),!0)},clear(t){t?Array.isArray(t)||(t=[t]):t=Object.keys(this.tasks),t.filter(e=>this.tasks[e]).map(e=>{if(!this.tasks[e])return null;let{intervalId:n,timeoutId:i}=this.tasks[e];return i&&clearTimeout(i),n&&clearInterval(n),delete this.tasks[e],e});}},j=new Proxy({turn:0,round:0,phase:0,currentID:void 0,isGameStart:!0,isPassed:!1,spellSpace:{},domContainer:["temp","phase","round","turn","game","long"].reduce((t,e,n)=>(t[e]=t[n]=[],t),{}),end(t){(this.isGameStart&&!this.isPassed||t===!1)&&(this.isGameStart=!1,this.isPassed=!0,V.seatUIs=[],V.friendGeneral=0,Ut(null),T.reset(),document.querySelectorAll(".mizhu").forEach(e=>e.style.display="none"),console.warn("游戏已结束！")),t&&this.isPassed&&(this.isPassed=!1,this.turn=0,this.round=0,this.phase=0,this.currentID=void 0,this.spellSpace={},Ht(k.userID),A.reset(),console.warn("游戏已重置！游戏即将开始！"),ze(()=>T.init()));},ready(t){this.end(!0),A.cardList=t;let e=M.cardIDsOrder.filter(i=>t.includes(i)),n=e.concat(t.filter(i=>!e.includes(i))).filter(Boolean);ge.init(n),te.init(n,"2-255"),A.isGuoZhan=t.includes(1150),A.isDouDiZhu=t.includes(13005),A.isShanHeTu=t.includes(20100),A.isShanHeTu&&(ve.sanBanFu=0),Xi(),A.isShanHeTu&&oi(),[3338].forEach(i=>delete this.spellSpace[i]),console.warn("牌堆初始化完成");},start(){this.isGameStart||!A.size||(this.isGameStart=!0,this.isPassed=!1,console.warn("游戏开始！["+A.seatIDs+"] > "+A.mySeats),zi(),Fi(A.size),te.draw());},enter(t,e,n){var i,o,a,s,r;if(t>0)this.turn=t,this.round=0,this.clear("turn"),t==1&&(this.clear("game"),this.start());else {e==0?(this.currentID=n,this.round++,this.phase=0,[7011,3090,2143,3271].forEach(f=>delete this.spellSpace[f]),document.getElementById("suit").innerText="",document.getElementById("boTu").innerText="",document.getElementById("result").innerHTML="",te.draw("2-255"),this.clear("round"),k.autoBotSwitch===!0&&T.limit>0&&((s=(a=(o=(i=T.gamescene)==null?void 0:i.topMenu)==null?void 0:o.areaServerLabel)==null?void 0:a.text)!=null&&s.includes("身份"))&&(this.currentID==A.seatUIs.filter(f=>f.seat.currentHp>0).map(f=>f.seat.index).slice(-1)[0]?T.auto(3):this.currentID!=A.mySeats[0]&&T.auto(!0))):this.phase++,this.clear("phase");let l=document.getElementById("phrase"),d=parseInt((r=l.innerText.match(/\(([0-9])\)$/))==null?void 0:r[1]);this.phase==d?l.innerText=l.innerText.replace(/(回合)?(.{2,3})(阶段)? ?\(([0-9])\)$/,`$2>${["开始时","准备","判定","摸牌","出牌","弃牌","结束","结束时","结束后"][e]}($4)`):l.innerText=`${["回合开始时","准备阶段","判定阶段","摸牌阶段","出牌阶段","弃牌阶段","结束阶段","回合结束时","回合结束后"][e]} (${this.phase})`;}},clear(t,e,n){let i=this.domContainer[t];for(let o=i.length-1;o>=0;o--)n===void 0&&e!==i[o].SpellID&&i[o].count--,(!(i[o].count>0)||e===i[o].SpellID&&n===i[o].SeatID)&&(i[o].element.remove(),i.splice(o,1));}},{ownKeys(t){return Reflect.ownKeys(t.spellSpace)},getOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t.spellSpace,e)},deleteProperty(t,e){return Reflect.deleteProperty(t.spellSpace,e)},get(t,e,n){return e in t?t[e]:Reflect.get(t.spellSpace,e,t.spellSpace)},set(t,e,n,i){return e in t?t[e]=n:Reflect.set(t.spellSpace,e,n,t.spellSpace),!0}}),A={cardList:[],seatUIs:[],seatIDs:[],orderIDs:[],mySeats:[],generals:{},shift:0,isShanHeTu:!1,isGuoZhan:!1,isDouDiZhu:!1,size:void 0,firstID:void 0,seatPos(t=8){return {0:[],1:[0],2:[0,4],3:[0,3,5],4:[0,1,4,7],5:[0,1,3,5,7],6:[0,1,3,4,5,7],7:[0,1,2,3,5,6,7],8:[0,1,2,3,4,5,6,7]}[t]},dealCard:()=>null,reset(){this.cardList=[],this.seatUIs=[],this.seatIDs=[],this.orderIDs=[],this.mySeats=[],this.generals={},this.shift=0,this.isShanHeTu=!1,this.isGuoZhan=!1,this.isDouDiZhu=!1,this.size=void 0,this.firstID=void 0,this.dealCard=(t,e)=>{t=parseInt(t),this.orderIDs.includes(t)||(this.firstID===void 0&&(this.firstID=t,console.warn("[PubGsCMoveCard]先手位置:"+t)),this.orderIDs.push(t),e>0&&!this.mySeats.includes(t)&&(this.mySeats.length?this.mySeats.push(t):this.setMyID(t)),this.update(!1,this.orderIDs)),this.orderIDs.length==this.size&&(this.dealCard=()=>null);};},getOrder(t){var i;if(this.seatUIs.length)return (i=this.seatUIs.find(o=>o.seatID==t))==null?void 0:i.order;let e=this.seatIDs.indexOf(this.firstID??this.seatIDs[0])%this.size,n=this.seatIDs.indexOf(parseInt(t));if(n!==-1)return (n-e+this.size)%this.size},getIndex(t){if(this.seatUIs.length)return this.seatUIs.findIndex(o=>o.seatID==t);let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,n=this.seatIDs.indexOf(parseInt(t));if(n<0)return;let i=(n-e+this.size)%this.size;return this.seatPos()[i]},getID(t){var o;if(this.seatUIs.length)return (o=this.seatUIs[this.seatPos().indexOf(parseInt(t))])==null?void 0:o.seatID;let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,n=this.seatPos().indexOf(parseInt(t));if(n<0)return;let i=(n+e+this.size)%this.size;return this.seatIDs[i]},sequence(t){let e=this.seatIDs.indexOf(t);return e<0?[]:this.seatIDs.slice(e).concat(this.seatIDs.slice(0,e))},update(t,e=this.orderIDs){if(e=e.slice(),e.length>this.seatIDs.length||e.length==this.seatIDs.length&&t!==!1)this.seatIDs=e,this.size=e.length;else if(t){for(let n=e.length;n<this.size;n++)e.push(((e[n-1]??-1)+1)%this.size);this.seatIDs=e,this.size=e.length;}this.draw();},fromUI(t=[]){var e;this.seatUIs=t,this.size=this.seatUIs.length,this.firstID=((e=this.seatUIs.find(n=>n.order==0))==null?void 0:e.seatID)??this.firstID,this.seatIDs=this.seatUIs.map(n=>n.seatID),this.setMyID(this.seatUIs[0].seatID),this.draw();},setMyID(t){if(t!==void 0&&this.mySeats[0]!==t){let e=this.mySeats.indexOf(t);e>-1&&this.mySeats.splice(e,1),this.mySeats.unshift(t);}},setGeneral(t,e,n=0,i=!1){if(!M.generalDict[e])return;this.generals[t]||(this.generals[t]=Array(this.isGuoZhan?2:1).fill(0)),this.generals[t][n]=e,this.isGuoZhan&&!i&&ie.delay("seatUIs",()=>T.seatUIs(),3e3);let o=this.getOrder(t),a=document.getElementById(o+1);a&&a.style.setProperty("--No-content",`"${A.name(t)}"`);},find(t,e,n=!1){var i;return Array.isArray(e)||(e=[e]),(i=this.generals[t])==null?void 0:i.find(o=>e.find(a=>{var s;return n?(s=M.skinMap[o])==null?void 0:s.has(a):o==a}))},name(t,e=!0){var o,a,s,r;let n=this.getOrder(t);if(n===void 0)return "";let i=((o=this.generals[t])==null?void 0:o.length)>1?this.generals[t].map(l=>M.generalDict[l]):[(r=(s=(a=this.seatUIs.find(l=>l.seatID==t))==null?void 0:a.seat)==null?void 0:s.general)==null?void 0:r.CardName];return e===null&&(i==null?void 0:i.length)!=1&&(i=[]),(i!=null&&i.some(Boolean)?i.map(l=>l||"暗").join("丨"):"一二三四五六七八"[n]+"号位")+(e?"丨"+"一二三四五六七八"[n]:"")},draw(){this.seatIDs.forEach(t=>{let e=this.getOrder(t),n=document.getElementById(e+1);if(!n)return;let i=A.name(t);n.style.setProperty("--No-content",`"${i}"`);}),Ut();}},ge=new Proxy({name:{},color:Array.from({length:7},()=>new Set),number:Array.from({length:14},()=>new Set),query:new Set,select:{name:new Set,color:new Set,number:new Set},cards:[],QCARD:class{constructor(t,e,n,i,o){this.id=t,this.name=e,this.color=n,this.number=i,this.type=o,this.key=-1;}plot(t){let e=this._button;if(!e){if(e=this._button=document.createElement("button"),e.className=this.color<=2?"shoupai R":"shoupai",!this.id)return e;e.id="Qcard"+this.id,e.innerHTML=`<span>${Dn(this.color)+je(this.number)}</span><br>${this.name.substring(0,2)}`;}return (this.key!==t||t==1)&&(this.key=t,e.style.backgroundColor=t===0?"":t===1?"cyan":"#23201d",e.title=t===0?"牌堆":t===2?"弃牌堆":se.findKZ(this.id).zones.map(n=>{let[i,o,a]=n.split("-").map(s=>parseInt(s));return te.name(o,i,null,a,a)}).join("/")),e}},[Symbol.iterator]:function*(){for(let t of this.cards)t!==void 0&&(yield t);},init(t){this.name={},this.color=Array.from({length:7},()=>new Set),this.number=Array.from({length:14},()=>new Set),this.type=Array.from({length:4},()=>new Set),this.query=new Set,this.select={name:new Set,color:new Set,number:new Set},this.cards=[],t.forEach(e=>{let{name:n,color:i,number:o,type:a}=de[e];n in this.name||(this.name[n]=new Set),this.name[n].add(e),this.color[i].add(e),this.number[o].add(e),this.type[a].add(e),i==3&&o>=2&&o<=9&&this.number[0].add(e),n.match(/^(冰|火|雷)?杀$/)&&this.color[Math.ceil(i/2)+4].add(e),this.cards[e]=new this.QCARD(e,n,i,o,a);});},onquery(t,e){if(this.select[t].delete(e)){if(this.select[t].size){Array.from(this[t][e]).forEach(n=>this.query.delete(n)),this.draw();return}}else this.select[t].add(e);this.query=["name","number","color"].filter(n=>this.select[n].size).reduce((n,i)=>new Set(Array.from(this.select[i]).flatMap(o=>Array.from(this[i][o])).filter(o=>!n.size||n.has(o))),new Set),this.draw();},queryone(t,e){this.query=new Set(Array.from(this[t][e])),this.draw();},draw(){const t=document.getElementById("cardTypeDetail");if(t.innerHTML="",this.query.size==0)return;let e=new Set(te.unknown),n=new Set(te.qipai),i=M.cardIDsOrder.filter(o=>this.query.has(o)).reduce((o,a)=>(e.has(a)?o[0].push(a):n.has(a)?o[2].push(a):o[1].push(a),o),[[],[],[]]);[0,1,2].forEach(o=>i[o].forEach(a=>t.appendChild(this.cards[a].plot(o))));}},{get(t,e,n){return typeof e=="number"||typeof e=="string"&&!isNaN(e)?t.cards[e]:Reflect.get(...arguments)}}),$=class ${static label(e){if($.groups.has(e))return $.groups.get(e);const n=$.LABELs.shift();return $.groups.set(e,n),n}constructor(e,n=null,i="12-255",o=null,a=null){var s;this._key=e,this.zone=i,this.id=n??((s=this.next)==null?void 0:s.id)??this.key,this.next=o,this.prev=a,$.nodes.has(e)||$.nodes.set(e,new Set),$.nodes.get(e).add(this);}get head(){let e=this;for(;e.prev;)e=e.prev;return e}get end(){let e=this;for(;e.next;)e=e.next;return e}get key(){return this._key}set key(e){this._key!=e&&($.nodes.get(this._key).delete(this),this._key=e,$.nodes.has(e)||$.nodes.set(e,new Set),$.nodes.get(e).add(this));}static get(e){return $.nodes.has(e)?Array.from($.nodes.get(e)):[]}static init(e,n){return $.key=0,$.nodes=new Map,$.groups=new Map([[0,"?"]]),$.LABELs=Array.from({length:62},(i,o)=>String.fromCharCode(o+65)),e.map(i=>new $(0,i,n))}toString(){return this.next?this.prev?this.key+"<"+this.next.toString():this.zone+":"+this.key+"<"+this.next.toString():"["+this.id+"]"+(this.key>0?de[this.id].ncn:"？")}plot(e){var i;if(this.key<0&&this.key%2==0&&this.next)return this.next.plot(e);let n=this._button;return n||(n=this._button=document.createElement("button"),n.className="shoupai"),n.disabled=this.key<=0&&this.key%2==0,(e||this.key!=((i=n==null?void 0:n.dataset)==null?void 0:i.key)||this.key<=0&&$.label(this.key)!=n.innerHTML)&&(n.className="shoupai",n.id="card"+this.id,n.dataset.key=this.key,this.key>0?(n.classList.remove("G"),de[this.id].color>2?n.classList.remove("R"):de[this.id].color>0&&n.classList.add("R"),n.style.color="",n.style.fontSize="",n.title=new te("unknown").cards.has(this)?$.findKZ(this.id).zones.map(o=>{let[a,s,r]=o.split("-").map(l=>parseInt(l));return te.name(s,a,null,r,r)}).join("/"):de[this.id].ncn,n.innerHTML=`<span>${de[this.id].cn}</span><br>${de[this.id].name.substring(0,2)}`):(n.classList.add("G"),n.innerHTML="？")),n}swap(e){if(!e||e==this)return this;for([this.key,e.key]=[e.key,this.key],[this.id,e.id]=[e.id,this.id],[this.next,e.next]=[e.next,this.next],this.next&&(this.next.prev=this),e.next&&(e.next.prev=e);e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;for(e.plot(!0),te.draw(e.zone),e=this;e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;return e.plot(!0),te.draw(e.zone),this}create(e){const n=new $(this.key,this.id,this.zone,this.next,this);return this.key=e,this.next&&(this.next.prev=n),this.next=n,this}delete(){let e=!1;if(this.next){let n=this.next;return this.key=n.key,this.id=n.id,this.next=n.next,n.next?n.next.prev=this:new te("unknown").cards.delete(n)&&(e=!0,this.prev&&new te("unknown").cards.add(this)),$.nodes.get(n.key).delete(n),e}else return this.key===0?(this.key=this.id,Pt(this.id,this.key),!0):null}destroy(e){let n=!1,i=this.key;for(;i<0;)this.delete()&&(n=!0),$.unpack(i)&&(n=!0),i=this.key;return this.key!=e&&(this.key=e??this.id,Pt(this.id,this.key)),this.prev?$.unpack(this.prev.key):(this.plot(!0),te.draw(this.zone)),n&&te.draw("unknown"),this}identify(e,n=null){if(n!==null&&console.count("REidentify"+n+">"+this),this.id==e)return this.key>0?this:(n&&(this.end.id=n),this.destroy(),this);let i,o=new Set([this.key]),a=[[this.key,[]]];for(;a.length>0;){let[s,r]=a.shift();if(i=$.find(s,e),i){r.concat(i).reduce((l,d)=>l.swap(d).next,this);break}for(let l of $.get(s).filter(d=>d.next))o.has(l.next.key)||(o.add(l.next.key),a.push([l.next.key,r.concat(l)]));}if(i){if(n){let s=this;for(s.id=n;s.next;)s=s.next,s.id=n;}return this.destroy(),this}else {if(e>0)return this.identify(0,e);console.error("identify error: "+(e>0?e:n)+">"+this);}return null}static move(e,n){Array.isArray(e)||(e=[e]);let{turn:i,round:o,phase:a}=j;return e==null||e.forEach(s=>Object.assign(s,{zone:n,turn:i,round:o,phase:a})),Array.from(new Set(e==null?void 0:e.map(s=>s.key))).filter(s=>s<=0).map(s=>$.unpack(s)).length?te.draw("unknown"):Array.from(new Set(e==null?void 0:e.map(s=>s.key))).filter(s=>s>0&&ge.query.has(s)).forEach(s=>{ge[s].plot(n=="2-255"?2:1);}),e}static pack(e,n,i){if(!((e==null?void 0:e.length)>1&&(e!=null&&e.every(s=>s))))return;let o=new Set(e.map(s=>s.key));if(o.size===1)return [...o][0];$.key=$.key-1;let a;if(i){if(new Set(e.map(l=>l.head.zone)).size===1)return null;let r=Array.from($.nodes.keys()).filter(l=>l<0);for(let l=0;l>=$.key;l--)if(!(r.includes(l*2-1)||r.includes(l*2-2))){a=l*2-i;break}r.filter(l=>l>a).sort((l,d)=>l-d).forEach(l=>{$.get(l).forEach(d=>{d.key=d.key-2,d.head.plot(!0);});}),a=-i;}else a=$.key*2-(n?2:1);return e.forEach(s=>{s.create(a),new te("unknown").cards.delete(s),n||new te("unknown").cards.add(s.end);}),te.draw("unknown"),a}static unpack(e){if(e>0)return !0;const n=$.get(e);let i=new Set(n.map(a=>{var s;return (s=a.next)==null?void 0:s.key})),o=new Set(n.map(a=>a.head.zone));if(n.length===1||!o.has("1-255")&&(o.size===1||i.size===1&&e!==0)){$.groups.has(e)&&($.LABELs.unshift($.groups.get(e)),$.groups.delete(e));let a=n.map(s=>s.delete()).some(Boolean);return Array.from(new Set(n.filter(s=>s.prev).map(s=>s.prev.key))).forEach(s=>$.unpack(s)),n.filter(s=>!s.prev).forEach(s=>s.plot(!0)),Array.from(o).forEach(s=>te.draw(s)),a}else return !1}static find(e,n){let i=$.get(e).find(o=>o.id==n);if(i===void 0&&e!=0){let o=$.get(0).find(a=>a.id==n);o&&(i=$.get(e).find(a=>a.end.key==0),i!==void 0&&o.swap(i.end));}return i}static findIDs(e,n=!1,i=new Set,o=new Set){return o.add(e),e>0||!n&&e==0?i.add(e):(n||e%2!=0)&&$.get(e).forEach(a=>{if(a.next){let s=a.next.key;o.has(s)||$.findIDs(s,n,i,o);}else n&&i.add(a.id);}),Array.from(i)}static findKZ(e,n=!1,i=new Set,o=new Set){let a=e;return !(a instanceof $)&&e>0&&(a=$.get(e)[0]),a instanceof $||(a=$.get(0).find(s=>s.id==e)),a instanceof $&&(!n&&a.key==0?(o.add(""),i.add(0)):(o.add(a.head.zone),i.has(a.key)||(i.add(a.key),(a.key<0||n&&a.key==0)&&$.get(a.key).forEach(s=>{s!=a&&$.findKZ(s,n,i,o);})),a.prev&&$.findKZ(a.prev,n,i,o))),{keys:Array.from(i),zones:Array.from(o)}}};et($,"key",NaN),et($,"nodes",new Map),et($,"groups",new Map([[0,"?"]])),et($,"LABELs",Array.from({length:50},(e,n)=>String.fromCodePoint(n<20?9312+n:n<35?12881-20+n:12977-35+n)));let se=$;const ke=class ke{static get paidui(){return Array.from(new Set(Array.from(se.get(0),({id:e})=>e).concat((ke.obj["1-255"]??[]).map(({id:e})=>e))))}static get qipai(){return (ke.obj["2-255"]??[]).filter(({key:e})=>e>0).map(({id:e})=>e)}static get unknown(){return Array.from(se.get(0),({id:e})=>e)}static shoupai(e){return (ke.obj["5-"+e]??[]).filter(({key:n})=>n>0).map(({id:n})=>n)}constructor(e,n=5,i=De,o=null,a=null,s=null){var r;typeof e=="number"?(this.id=e,this.zone=n,this.id==0&&[0,1,2,3,9,12].includes(this.zone)&&(this.id=255),this.zone==9&&(this.zone=1),this.zone==4&&(this.id=this.id+"-"+(s||a||0)),this.zone==8&&(this.id="-"+(a||s||0)),this.zoneID=this.zone+"-"+this.id):typeof e=="string"?[this.zoneID,this.zone,this.id]=e.match(/(.*?)-(.*)/)??[e,e,""]:(r=e==null?void 0:e.every)!=null&&r.call(e,l=>l instanceof se),this.zoneID in ke.obj||(ke.obj[this.zoneID]=[]),this.zone==1?this.pos=i===De?Fe:i===Fe?De:i:this.zone===10?this.pos=i:this.pos=Te,this.count=o;}show(e=[]){if(isNaN(se.key))return [];if(Array.isArray(e)||(e=[e]),e.filter(o=>o>0).length==0)return [];let n=[],i=e.slice();if(this.pos==De)n=this.cards.slice(-e.length).map(o=>o.identify(i.shift()));else if(this.pos!=Te)n=this.cards.slice(this.pos,e.length).map(o=>o.identify(i.shift()));else if(this.zone!=1){let o=i.map(a=>se.findKZ(a,!0).keys);this.cards.slice().sort((a,s)=>s.key-a.key).some(a=>{if(i.filter(s=>s>0).length==0)return !0;o.some((s,r)=>{if(s.includes(a.key))return n[r]=a.identify(i[r]),s.length=0,i[r]=null,!0});}),i.forEach((a,s)=>{var r,l,d,f;if(a&&(n[s]=(r=this.cards.find(c=>c.id==0))==null?void 0:r.identify(a),n[s]===void 0&&(n[s]=(l=this.cards.find(c=>c.key==0))==null?void 0:l.identify(a)),n[s]===void 0)){let c=se.get(a)[0];c?(n[s]=(f=(d=this.cards.find(u=>!n.includes(u)))==null?void 0:d.swap(c))==null?void 0:f.identify(a),console.error(this.zoneID+"SWAP Card ["+a+"] Shown")):(n[s]=new se(a,a,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+a+"] Shown"));}});}return ke.draw(this.zoneID),n}remove(e=[],n,i){if(isNaN(se.key))return [];Array.isArray(e)||(e=[e]),i&&(this.count=i);let o=[],a=e.slice();if(this.pos==De)o=this.cards.splice(-this.count);else if(this.pos!=Te)o=this.cards.splice(this.pos,this.count),this.zone==1&&[3208,7011,987,988].includes(n)&&(o=o.reverse());else if(e.filter(l=>l>0).length>0){let l=a.map(f=>se.findKZ(f,!0).keys);this.cards.slice().reverse().sort((f,c)=>c.key-f.key).some(f=>{if(a.filter(c=>c>0).length==0)return !0;l.some((c,u)=>{if(c.includes(f.key))return o[u]=this.cards.splice(this.cards.indexOf(f),1)[0],c.length=0,a[u]=null,!0});}),a.forEach((f,c)=>{var p;if(!f)return;let u=this.cards.findIndex(g=>g.id==0);if(u===-1&&(u=this.cards.findIndex(g=>g.key==0)),u>-1)o[c]=this.cards.splice(u,1)[0];else {let g=se.get(f)[0],y=this.cards.findIndex(C=>!o.includes(C));g&&y>=0?(o[c]=(p=this.cards.splice(y,1)[0])==null?void 0:p.swap(g),console.error(this.zoneID+"SWAP Card ["+f+"] Moved")):(o[c]=new se(f,f,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+f+"] Moved"));}});}else if(this.count==this.length||this.size==1)o=this.cards.splice(0,this.count);else if(this.zone==1||this.zone==2){var s=[...this.cards.filter(l=>l.key<=0).sort((l,d)=>d.key-l.key),...this.cards.filter(l=>l.key>0)];if([11104,3488,862].includes(n)){var r=new Set(s.map(l=>l.key));n==11104?r=new Set(Array.from(r).filter(l=>se.get(l).some(d=>{var f;return (f=ge.type[3])==null?void 0:f.has(d.id)}))):n==3488?r=new Set(Array.from(r).filter(l=>se.get(l).some(d=>{var f,c,u;return ((f=ge.name.雷杀)==null?void 0:f.has(d.id))||((c=ge.name.火杀)==null?void 0:c.has(d.id))||((u=ge.name.冰杀)==null?void 0:u.has(d.id))}))):n==862&&(r=new Set(Array.from(r).filter(l=>se.get(l).some(d=>ge.number[6].has(d.id))))),s=s.filter(l=>r.has(l.key));}o=s.slice(0,this.count),o.some(l=>l.key>0||l.key%2)&&se.pack(s,!0),o.forEach(l=>this.cards.splice(this.cards.indexOf(l),1));}else se.pack(this.cards),o=this.cards.splice(0,this.count);return o.length!=this.count&&Array.from({length:this.count-o.length},()=>(console.error(this.zoneID+" New Card Moved"),o.push(new se(0,0,this.zoneID)))),e.filter(l=>l>0).length==this.count?e.forEach((l,d)=>{var f;return (f=o[d])==null?void 0:f.identify(l)}):o.filter(l=>l.key>0).length==this.count&&o.forEach(({id:l},d)=>{e[d]=l;}),ke.draw(this.zoneID),o}add(e){if(isNaN(se.key))return;let n=se.move(e,this.zoneID).slice();return this.pos==Te?this.cards.splice(this.cards.length,0,...n):this.pos==De?this.cards.splice(this.cards.length,0,...n):this.cards.splice(this.pos,0,...n.reverse()),ke.draw(this.zoneID),e}set(e){isNaN(se.key)||(ke.obj[this.zoneID]=se.move(e,this.zoneID),ke.draw(this.zoneID));}get cards(){return ke.obj[this.zoneID]??[]}get length(){var e;return ((e=this.cards)==null?void 0:e.length)??0}get size(){var e;return new Set(((e=this.cards)==null?void 0:e.map(n=>n.key))??[]).size}static init(e,n){ke.obj={unknown:new Set},ke.obj[n]=se.init(e,n);}static draw(e){var d,f;if(isNaN(se.key))return;if(e===void 0){Object.keys(ke.obj).filter(c=>c.split("-")[0]=="5").forEach(c=>ke.draw(c));return}let n=null,i=null,[o,a,s]=((d=e.split("-"))==null?void 0:d.map(Number))??[];if(e=="unknown")n="knownCards";else if(o==1)n="paiduiCards";else if(o==2)n="qipaiCards";else if(o==5)n=String(A.getOrder(a)+1);else if(o==4&&s in M.markSpell)n="mark"+e;else return;i=document.getElementById(n);let r=Array.from(ke.obj[e]??[]);if(o==2){let{turn:c,round:u,phase:p}=j;r=r.filter(g=>g.turn==c&&g.round==u);}if(e=="unknown"&&(Array.from(new Set(r.map(c=>c.head.zone))).forEach(c=>ke.draw(c)),ge.draw()),!r||r.filter(c=>c.key>0||c.key%2!==0).length==0){i&&(i.classList.contains("markedCard")?i.remove():i.querySelectorAll(":scope>.shoupai").forEach(c=>c.remove()));return}if(i)i.querySelectorAll(":scope>.shoupai").forEach(c=>c.remove());else if(o==4)(f=document.getElementById(String(A.getOrder(a)+1)))==null||f.insertAdjacentHTML("beforeend",`<div id="${n}" class="markedCard"><span class = 'mark'>${M.markSpell[s]}</span></div>`),i=document.getElementById(n);else return;e!="1-255"&&r.sort((c,u)=>c.key>0&&u.key>0?0:u.key-c.key),o==4&&(i=i.firstElementChild||i);var l=1;r.map(c=>c.plot(e=="unknown")).reverse().forEach((c,u,p)=>{var g,y;if(c.dataset.key==((y=(g=p[u+1])==null?void 0:g.dataset)==null?void 0:y.key))l++;else {l>1&&(c.style.fontSize="",c.innerHTML=`<span>${c.innerHTML}×</span><br>${l}`);let C=parseInt(c.dataset.key);if(C<0){let b=se.findIDs(C).sort((H,ne)=>H>0&&ne>0?0:ne-H);c.title=l+"张："+b.map(H=>de[H].ncn).join("/"),e!=="1-255"&&b.length<5&&(c.style.fontSize="",c.innerHTML=b.map(H=>{var ne,v;return ((v=(ne=se.get(H)[0])==null?void 0:ne.plot())==null?void 0:v.outerHTML)||""}).join(""));}o==4?i.insertAdjacentElement("afterend",c):i.insertAdjacentElement("afterbegin",c),l=1;}});}static name(e,n,i,o,a){var r;let s;if(isNaN(n))return "?";if(n==1&&e==0)return "牌堆(游戏开始前) ";if(n==1&&e==255)s="牌堆";else if(n==2)s="弃牌堆";else if(n==3)s="处理区";else if(n==4)s="标记";else if(n==5)s="手牌";else if(n==6)s="装备";else if(n==7)s="判定区";else if(n==8)s="弹窗";else {if(n==9)return "洗牌";n==10?s="交换临时区":n==11?s="弃牌临时区":n==12?s="回收区":n==0&&(s="游戏外");}return ([0,1,2,3,8,11,12].includes(n)?"":A.name(e,!1))+([4,8].includes(n)?"["+((r=M.spellDict[n==8?a:o||a||0])==null?void 0:r.name)+"]":"")+(s??"zone"+n)+({[Fe]:"底",[De]:"顶",[Te]:"*"}[i]??(i?":"+i:""))}};et(ke,"obj",{unknown:new Set});let te=ke;function xi(t=[],e=[]){const n=new Map;return t.forEach(i=>{n.set(i.GoodsBaseID,i.ChangeCount);}),e.forEach(i=>{const{GoodsBaseID:o,ChangeCount:a}=i;n.has(o)?n.set(o,n.get(o)+a):n.set(o,a);}),Array.from(n,([i,o])=>({GoodsBaseID:i,ChangeCount:o}))}const Tn={乐不思蜀:"乐",兵粮寸断:"兵",八卦阵:"八卦",爪黄飞电:"爪黄+1",的卢:"的卢+1",绝影:"绝影+1",骅骝:"骅骝+1",赤兔:"赤兔-1",大宛:"大宛-1",紫骍:"紫骍-1",紫騂:"紫骍-1",诸葛连弩:"连弩",木牛流马:"木马",顺手牵羊:"顺手",万箭齐发:"万箭",五谷丰登:"五谷",无中生有:"无中",过河拆桥:"过拆",桃园结义:"桃园",无懈可击:"无懈",南蛮入侵:"南蛮",借刀杀人:"借刀",铁索连环:"铁索",随机应变:"随机",远交近攻:"远交",以逸待劳:"逸劳",知己知彼:"知己",逐近弃远:"逐近",洞烛先机:"洞烛",出其不意:"出其",水淹七军:"水淹","无懈可击·国":"国无",挟天子以令诸侯:"挟令",方天画戟:"方天戟",雌雄双股剑:"雌雄剑",青龙偃月刀:"青龙刀",丈八蛇矛:"丈八矛",朱雀羽扇:"朱雀扇",白银狮子:"白银狮",三尖两刃刀:"三尖刀",乌铁锁链:"乌铁链",五行鹤翎扇:"五行扇",太公阴符:"太公符",无双方天戟:"无双戟",束发紫金冠:"紫金冠",玲珑狮蛮带:"玲珑带",红棉百花袍:"百花袍",红锦百花袍:"百花袍",四乘粮舆:"四乘舆",铁蒺玄舆:"铁蒺舆",飞轮战舆:"飞轮舆",鬼龙斩月刀:"鬼龙刀",国风玉袍:"国风袍",赤炎镇魂琴:"赤炎琴",奇门八阵:"奇门阵",绝尘金戈:"绝尘+1",修罗炼狱戟:"修罗戟",虚妄之冕:"虚妄冕",赤血青峰:"赤青锋",赤血青锋:"赤青锋",鸾凤和鸣剑:"鸾凤剑",七彩神鹿:"神鹿-1",金乌落日弓:"金乌弓",刑天破军斧:"刑天斧",长安大舰:"长安-2",禅让诏书:"诏书",镔铁双戟:"镔铁戟",继往开来:"继往",攻守兼备:"攻守",进退自如:"进退",洪荒之力:"洪荒",同舟共济:"同舟",力争上游:"力争",逆水行舟:"逆水",撒豆成兵:"撒豆",移花接木:"移花",联军盛宴:"联军",调虎离山:"调虎",火烧连营:"火烧",勠力同心:"勠力",调剂盐梅:"调剂",声东击西:"声东",增兵减灶:"增兵",草木皆兵:"草木",唯我独尊:"独尊",弃甲曳兵:"弃甲",金蝉脱壳:"金蝉",故步自封:"自封",金鼓笙旗:"金鼓",党同伐异:"伐异",燎原之火:"燎原","八卦阵(复制)":"八卦","仁王盾(复制)":"仁王盾","藤甲(复制)":"藤甲","白银狮子(复制)":"白银狮",商鞅变法:"变法",真龙长剑:"真龙剑",传国玉玺:"玉玺",厚积形:"厚积",桎梏形:"桎梏",盈冲形:"盈冲",背水形:"背水",整肃形:"整肃",寸兵形:"寸兵",雄黄酒:"酒"},de=new Proxy({cards:{0:{name:"",type:0,color:0,number:0,ncn:"?",cn:"0",c:"",n:0}},[Symbol.iterator]:function*(){for(let t in this.cards)yield this.cards[t];}},{get:function(t,e){var n;if(e in t)return t[e];if(!t.cards[e])if((n=M.cardDict)!=null&&n[e]){let{name:i,type:o,color:a,number:s,subType:r}=M.cardDict[e],l=Dn(a),d=je(s);t.cards[e]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[r]||Tn[i]||i,type:parseInt(o),color:parseInt(a),number:parseInt(s),ncn:i+l+d,cn:l+d,c:l,n:d};}else t.cards[e]=t.cards[0];return t.cards[e]}});function Dn(t){return ["","♥","♦","♠","♣"][t]??""}function je(t,e=!0){return e&&parseInt(t)==1?"A":{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"J",12:"Q",13:"K"}[t]??""}function yi(){for(let e=11;e<=60;e++){const n=`https://web.sanguosha.com/220/h5_2/res/runtime/pc/Face/${e}.png`,i=document.createElement("img");i.src=n,i.classList.add("face"),i.onmousedown=()=>Xe(`#${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);}["昏君，昏君啊","主公，别开枪，自己人","能不能快一点儿呀，兵贵神速啊","小内再不跳，后面还怎么玩儿啊","小内啊，您老悠着点儿","不好意思，刚才卡了","你可以打的再烂一点儿吗","哥们儿，给力点儿行吗","你们怎么忍心就这么让我酱油了","我，我惹你们了吗","姑娘，你真是条汉子","三十六计，走为上，容我去去便回","人心散了，队伍不好带啊","风吹鸡蛋壳，牌去人安乐","哥，交个朋友吧","妹子，交个朋友吧","我从未见过如此厚颜无耻之人","你随便杀，闪不了算我输","这波不亏","请收下我的膝盖","你咋不上天呢","放开我的队友，冲我来","见证奇迹的时刻到了"].forEach((e,n)=>{const i=document.createElement("span");i.classList.add("calRes"),i.textContent=e,i.onmousedown=()=>Xe(`${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);});}async function Xe(t,e){pe("复制成功！");var n={1:"⒈",2:"⒉",3:"⒊",4:"⒋",5:"⒌",6:"⒍",7:"⒎",8:"⒏",9:"⒐",J:"Ⓙ",Q:"Ⓠ",K:"Ⓚ","+":" ",10:"⒑"};if(e&&Object.keys(n).forEach(o=>{t=t.replaceAll(o,n[o]);}),T.chat(t),window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var i=document.createElement("textarea");i.textContent=t,i.style.position="fixed",document.body.appendChild(i),i.select();try{return document.execCommand("copy")}catch(o){return console.warn("Copy to clipboard failed.",o),prompt("Copy to clipboard: Ctrl+C, Enter",t)}finally{document.body.removeChild(i);}}}async function bi(t,e){if(re.CDKNotificationSwitch){let o=Pe("CDK");o||(o=[]);let a=t.filter(s=>!o.includes(s.cdk));await me(1e4);for(let s of a)Ve(`找到兑换码！<br>${s.cdk}<br>点击即可兑换且关闭此条通知${s.rewards}<br>如不想要兑换码通知，可在设置中关闭`,"ac-tooltip",1e4,"green",function(){!o.includes(s.cdk)&&o.push(s.cdk),Ke("CDK",o),Xt(s.cdk);});}var n=document.getElementById(e);n.innerText="",t.length==0&&e=="CDK"&&(t=["所有兑换码已经兑换","迟点再看看吧"],jt("CDK"));for(let o of t){let a=document.createElement("button");a.className="calRes",a.innerText=typeof o=="object"?`${o.cdk}`:o,a.onmousedown=function(){Xt(typeof o=="object"?o.cdk:o),a.innerText="已兑换",setTimeout(()=>{a.textContent=typeof o=="object"?`${o.cdk}`:o;},"500");},n.append(a);var i=document.createElement("br");n.append(i);}}function Si(t){var e=document.getElementById("storeDetail");e.innerText="",t.length==0&&(t=["暂无集市数据"]);for(let n of t){let i=document.createElement("button");i.className="storeDetail",i.innerText=n,e.append(i);}}let wi={9020101:"欢乐豆",100301:"手气卡",100201:"点将卡",1150001:"灵宝经诰",100401:"换将卡",200201:"诏令天下",112301:"校尉将印",112101:"朱砂",12119999:"桃花",111801:"功勋",1111801:"水晶碎片",1114301:"圣魂玄晶",112501:"大将军印",1142901:"夺宝券"};function Ln(t){return !wi[t]}function An(t,e,n,i){var o;if(document.getElementById("sec"+t)==null){let a=document.getElementById("lottery");const s=document.createElement("div"),r=document.createElement("div");r.innerHTML=M.secId[t].Name+"："+M.generalDict[M.secId[t].bigrewards]+"  次数："+i+"<br>",r.id="sec"+t+"+times",s.id="sec"+t,s.append(r),a.append(s),a.append(document.createElement("hr"));}if(typeof document.getElementById("sec"+t)<"u"&&document.getElementById(t+"+"+e)==null){const a=document.getElementById("sec"+t+"+times");a.innerHTML=M.secId[t].Name+"："+M.generalDict[M.secId[t].bigrewards]+"  次数："+i+"<br>";let s=document.getElementById("sec"+t);const r=document.createElement("div");r.className="suit",Ln(e)&&r.classList.add("r");const l=document.createElement("span"),d=document.createElement("span");l.innerText=((o=M.goodsID(e))==null?void 0:o.name)+" * ",d.innerText=n,l.id=t+"+"+e,d.id=t+"+"+e+"+number",r.append(l),r.append(d),s.appendChild(r);}else if(typeof document.getElementById(t)<"u"&&document.getElementById(t+"+"+e)!=null){const a=document.getElementById("sec"+t+"+times");a.innerHTML=M.secId[t].Name+"："+M.generalDict[M.secId[t].bigrewards]+"  次数："+i+"<br>";let s=document.getElementById(t+"+"+e+"+number"),r=parseInt(s.innerText);r+=n,s.innerText=r;}}function nn(t){let e=document.getElementById("lastUseCard");const n=document.createElement("div");for(const o of t){if(o=="0")continue;var i=document.createElement("button");i.className=de[o].color<=2?"shoupai R":"shoupai";let a=document.createElement("span");a.innerText=de[o].cn,i.appendChild(a),i.appendChild(document.createElement("br")),i.innerHTML+=de[o].name.substring(0,2),n.append(i);}e.innerHTML=n.innerHTML;}const sn=new MutationObserver(t=>{t.forEach(e=>{const n=e.target,i=document.getElementById(n.id),o=document.getElementById("s"+n.id);if(o&&i&&(e.type==="childList"||e.type==="attributes")){const a=n.innerHTML;if(o.dataset.lastContent!==a){if(o){const s=n.cloneNode(!0);o.innerHTML=s.innerHTML,On(o);}o.dataset.lastContent=a;}}});}),ki={attributes:!0,childList:!0,subtree:!0};function On(t){t&&t instanceof HTMLElement&&(t.scrollHeight>40?t.classList.add("show-ellipsis"):t.classList.remove("show-ellipsis"));}function qt(t,e){let n;function i(...o){clearTimeout(n),n=setTimeout(()=>t.apply(this,o),e);}return i.cancel=function(){clearTimeout(n),n=null;},i}const vi=qt(()=>{requestAnimationFrame(()=>{document.querySelectorAll(".sorder-body").forEach(e=>{On(e);});});},500);window.addEventListener("resize",vi);function St(){const t=document.getElementById("seatUI"),e=document.createDocumentFragment();for(let n of V.seatUIs)if(n.posY&&n.posX&&typeof n.actualSeatID<"u")if(document.getElementById("sor"+n.actualSeatID)==null){const i=document.createElement("div");i.className="sorderContainer",i.id="sor"+n.actualSeatID,i.style.top=n.posY+"px",i.style.left=n.posX+"px",i.style.width=(V.unscaledWidth+V.paddingRight)*V.scale+"px";const o=document.createElement("div");o.className="sorder-body",o.classList.add("sNo"+n.actualSeatID),o.id="s"+n.actualSeatID,i.appendChild(o);const a=document.getElementById(n.actualSeatID);a&&(sn.observe(a,ki),e.appendChild(i));}else {const i=document.getElementById("sor"+n.actualSeatID);i.style.top=n.posY+"px",i.style.left=n.posX+"px",i.style.width=(V.unscaledWidth+V.paddingRight)*V.scale+"px";}if(V.seatUIs.length===0){sn.disconnect();for(let n=1;n<=8;n++){const i=document.getElementById("sor"+n);i&&i.remove();}}t.appendChild(e);}const He={TITLE:{color:"#f2de9c",fontSize:20,bold:!0},HR:{text:"--------------------",color:"#ccc",fontSize:15},GENERAL:{normal:"#f2de9c",warning:"rgb(240, 65, 85)",fontSize:20},GET_INFO:{color:"#f2de9c",fontSize:20,bold:!0}};function st(t){const e=new Laya.Label;return e.text=t.text||"",e.color=t.color||"#ffffff",e.fontSize=t.fontSize||16,e.bold=t.bold||!1,e.align="center",e.valign="middle",e.width=210,e}function wt(){return st({text:He.HR.text,color:He.HR.color,fontSize:He.HR.fontSize,bold:!1})}function Rn(t,e){const[n,i]=Li(t,e),o=t.start?"[先行]":"";return st({text:`${t.generalname}${o}${i?" "+n.join(" "):""}`,color:i?He.GENERAL.warning:He.GENERAL.normal,fontSize:He.GENERAL.fontSize,bold:!0})}function Wi(t,e,n){t.layoutEnabled=!0,t.vScrollBarSkin="",e.graphics.clear(),e.graphics.drawRect(0,0,210,n,"#3B3A27"),e.pos(0,0);}function Ii(t,e){let n=0;if(M.text[t.event]){const a=st({text:M.text[t.event],...He.TITLE});e.addChild(a),n+=a.height;const s=wt();e.addChild(s),n+=s.height;}t.generals.forEach(a=>{const s=Rn(a,ve.difficulty);e.addChild(s),n+=s.height;});const i=wt();e.addChild(i),n+=i.height;const o=st({text:t.get.replace(/\n/g,`
`),...He.GET_INFO});return e.addChild(o),n+=o.height,n}function Ci(t,e){let n=0;for(let i=0;i<3;i++){const o=t+(i+1).toString().padStart(2,"0");if(!M.Rchoose[o])continue;const a=M.Rchoose[o];a.generals&&a.generals.forEach(l=>{const d=Rn(l,ve.difficulty);e.addChild(d),n+=d.height;});const s=st({text:a.get.replace(/\n/g,`
`),...He.GET_INFO});e.addChild(s),n+=s.height;const r=wt();e.addChild(r),n+=r.height;}return n}function At(t,e){ve.res=[];for(const n of t){const{x:i,y:o}=M.Rcity[n.id];let a=0;const s=new Laya.VBox;s.pos(i,o),s.zOrder=999,s.name="city";const r=new Laya.Sprite;if(r.alpha=.7,s.addChild(r),M.Rfight[n.event])a=Ii({...M.Rfight[n.event],event:n.event},s);else {if(M.text[n.event]){const l=st({text:M.text[n.event],...He.TITLE});s.addChild(l),a+=l.height;const d=wt();s.addChild(d),a+=d.height;}a+=Ci(n.event,s);}Wi(s,r,a),ve.res.push({id:n.id,city:s});}ue(()=>T.find("SceneLayer","RogueSmallMapScene")).then(n=>{for(let i=(n==null?void 0:n.cityView.numChildren)-1;i>=0;i--){const o=n.cityView.getChildAt(i);o.name==="city"&&n.cityView.removeChild(o);}ve.res.forEach(({city:i})=>{n.cityView.addChild(i);});});}function kt(t,e="点击复制",n=!0,i=!1,o=null){let a=document.createElement("button");return a.className="calRes",a.title=e,a.disabled=i,a.innerText=t,a.onclick=()=>{Xe(t,n),a.innerText="复制成功",setTimeout(()=>{a.textContent=t;},500);},a}async function an(t){let e=t.slice().sort((a,s)=>a-s),n=[];function i(a,s,r){if(r===13){n.push(a.slice());return}if(!(r>13))for(let l=s;l<e.length;l++)l>s&&e[l]===e[l-1]||(a.push(e[l]),i(a,l+1,r+e[l]),a.pop());}i([],0,0);let o=document.getElementById("result");o.innerHTML="";for(let a of n.sort((s,r)=>r.length-s.length))if(o.appendChild(kt(a.map(s=>je(s,!1)).join("+"))),o.children.length>=15)break;o.innerHTML===""&&(o.innerHTML='<span class="textRes">【资援】无解！</span>');}async function Ei(t,e=!1){function n(l,...d){let f=l.slice();for(let c=0;c<f.length;c++){for(let u=0;u<d.length;u++)if(f[c]-=d[u][c],f[c]<0)return !1;if(c>0&&f[c]>=2)return 0}return f}let i=t.reduce((l,d)=>(l[0]++,l[d]++,l),Array(14).fill(0)),o=Math.floor(i[14]/2),a=new Map([[0,[Array(14).fill(0)]]]);for(let l=1;l<=13;l++){let d=i[l];if(d!=0)for(let f of Array.from(a.keys()).sort((c,u)=>u-c)){let c=a.get(f);for(let u=1;u<=d;u++){let p=f+l*u;if(p>o)break;a.has(p)||a.set(p,[]);for(let g=0;g<c.length;g++){let y=c[g].slice();y[0]+=u,y[l]+=u,a.get(p).push(y);}}}}a.delete(0);let s=new Map;for(let l of Array.from(a.keys()).sort((d,f)=>f-d)){let d=a.get(l);for(let f=0;f<d.length;f++)for(let c=f;c<d.length;c++){let u=n(i,d[f],d[c]);u&&(s.has(u[0])||s.set(u[0],[]),d[f][0]<=d[c][0]?s.get(u[0]).push([d[f],d[c],u]):s.get(u[0]).push([d[c],d[f],u]));}}let r=document.getElementById("result");r.innerHTML="",Array.from(s.keys()).sort((l,d)=>l-d).some(l=>{if(s.get(l).sort((d,f)=>d[0][0]-f[0][0]).forEach(([d,f,c])=>{let u=document.createElement("button");u.className="calRes";let p=document.createElement("span"),g=document.createElement("span");p.innerText=d.flatMap((y,C)=>C>0?Array(y).fill(je(C,!1)):[]).join("+"),g.innerText=f.flatMap((y,C)=>C>0?Array(y).fill(je(C,!1)):[]).join("+"),u.appendChild(p),u.insertAdjacentHTML("beforeend","<span>=</span>"),u.appendChild(g),u.title="点击复制",u.onclick=function(){Xe(this.innerText,!0);},e&&(u.title="点击“=”左侧或右侧的数字，将被点击一侧的数字分配给自己，另一侧的分配给张昌蒲",p.className="yanjiaospan",g.className="yanjiaospan",p.onclick=function(y){y.stopPropagation(),T.yanJiao([d,f,c],2);},g.onclick=function(y){y.stopPropagation(),T.yanJiao([d,f,c],0);}),r.appendChild(u);}),r.children.length>=5)return !0}),r.innerHTML===""?r.innerHTML='<span class="textRes">【严教】无解！</span>':e&&r.insertAdjacentHTML("afterbegin","界小抄：点下方数字可以自动分配牌<br>点击想要分配给自己的一组数字即可");}async function Bi(t,e){if(!(t!=null&&t.length))return;let n=t.slice().sort((s,r)=>s-r),i=[];function o(s,r,l){if(!(l>13)){i.unshift(s.slice()),e&&(i[0].K=l===13?s.length:0);for(let d=r;d<n.length;d++)d>r&&n[d]===n[d-1]||(s.push(n[d]),o(s,d+1,l+n[d]),s.pop());}}o([],0,0);let a=document.getElementById("result");a.innerHTML="";for(let s of i.filter((r,l,d)=>!d.some(f=>r.length<f.length&&r.every(c=>f.includes(c)))).sort((r,l)=>l.K-r.K||l.length-r.length))a.appendChild(kt(s.map(r=>je(r,!1)).join("+"))),e&&s.K&&a.lastChild.classList.add("textRes");}async function rn(t,e){function n(r,l,d,f,c){if(d.length===c+1){l.push([...d,...d.reduce((u,p)=>(u.splice(u.indexOf(p),1),u),r.slice())]);return}for(let u=f;u<r.length;u++)u>f&&r[u]===r[u-1]||(d.push(r[u]),d[0]+=r[u],n(r,l,d,u+1,c),d[0]-=d.pop());return l}let i=document.getElementById("result");if(i.innerHTML="",!(t!=null&&t.length)||!(e!=null&&e.length))return;let o=Math.max(t.length,e.length);t.sort((r,l)=>r-l),e.sort((r,l)=>r-l);for(let r=2;r<=o;r++){let l=n(t,[],[0],0,r);n(e,[],[0],0,r).forEach(d=>l.forEach(f=>{d[0]>f[0]&&d.slice(1,r+1).every(c=>!f.slice(1,r+1).includes(c))&&(o<3||Array.from({length:r}).some((c,u)=>d[u+1]<f[u+1]))&&i.appendChild(kt(d.slice(1,r+1).map(c=>je(c))+"→"+f.slice(1,r+1).map(c=>je(c)),"点击复制",!1));}));}let a=Array.from(new Set(e)),s=Array.from(new Set(t));a.forEach(r=>{let l=s.filter(d=>d<r);l.length&&i.appendChild(kt(je(r)+"→"+l.map(d=>je(d)).join("/"),"点击复制",!1));}),i.innerHTML===""&&(i.innerHTML='<span class="textRes">【易城】无法交换！</span>');}async function Ot(t){var r,l,d;if(!(t!=null&&t.allData))return;let e=t.allData,n=e.shopData,i=e.chapterData,o=e.generalpool;if(n){n.bShow=!0;let f=[];if(n.itemId&&M.Rplot)for(let c of n.itemId)M.Rplot[c]&&f.push(M.Rplot[c].name);Si(f);}if(o&&o.general_change&&o.general_change.length>0){let f=o.general_change.map(c=>M.generalDict[c]||`Unknown (${c})`);Ve(`小抄提示：可换将为${f.reverse().join(", ")}`,"acTooltip",1e4,"green",null,!0);}let a=e.seasonData,s=a&&a.difficulty;s&&(ve.difficulty=s),ve.general=((l=(r=e.gameData)==null?void 0:r.myGeneral)==null?void 0:l.uGeneralId)??0,ve.itemId=((d=e.gameData)==null?void 0:d.itemId)??[],i&&i.locations&&(V.cities=i.locations.map(f=>({id:f.location,event:f.event})),M.Rcity&&re.rogueCitySwitch&&At(V.cities));}const Ti=(()=>{class t{constructor(){this.id=0,this.goods_id=0,this.goods_cnt=0,this.price_type=0,this.price_num=0,this.stock=0,this.buy_limit=0,this.ori_price=0,this.all_bought_cnt=0,this.self_bought_cnt=0;}Read(o){this.id=o.readUnsignedByte(),this.goods_id=o.readUnsignedInt(),this.goods_cnt=o.readUnsignedInt(),this.price_type=o.readUnsignedByte(),this.price_num=o.readUnsignedInt(),this.stock=o.readUnsignedInt(),this.buy_limit=o.readUnsignedByte(),this.ori_price=o.readUnsignedInt();}UpdateDate(o){this.goods_id=o.goods_id,this.goods_cnt=o.goods_cnt,this.price_type=o.price_type,this.price_num=o.price_num,this.stock=o.stock,this.buy_limit=o.buy_limit,this.ori_price=o.ori_price,this.all_bought_cnt=o.all_bought_cnt,this.self_bought_cnt=o.self_bought_cnt;}}function e(i){i.position=0;let o=[],a=i.readBoolean();if(i.Data.length<=1)return null;let s=i.readUnsignedInt(),r=i.readUnsignedInt(),l=new Date(s*1e3).toISOString().slice(5,16).replace("T"," "),d=new Date(r*1e3).toISOString().slice(5,16).replace("T"," "),f=i.readUnsignedInt();for(let c=0;c<f;c++){let u=new t;u.Read(i);let p=o.find(g=>g.id==u.id);p?p.UpdateDate(u):o.push(u);}f=i.readUnsignedInt();for(let c=0;c<f;c++){let u=i.readUnsignedInt(),p=i.readUnsignedInt(),g=o.find(y=>y.id==u);g&&(g.all_bought_cnt=p);}f=i.readUnsignedInt();for(let c=0;c<f;c++){let u=i.readUnsignedInt(),p=i.readUnsignedInt(),g=o.find(y=>y.id==u);g&&(g.self_bought_cnt=p);}return {commonVo:o,start_time:s,end_time:r,start:l,end:d,next:a}}let n=!1;return async i=>{if(n)return null;const o=document.querySelectorAll('.left input[type="checkbox"]');let a=e(i);if(!a)return null;let{commonVo:s,start_time:r,end_time:l,start:d,end:f,next:c}=a;if(c)return;r=(r-8*60*60)*1e3;let u=s.map(({goods_id:y,goods_cnt:C,price_type:b,price_num:H,stock:ne,buy_limit:v,ori_price:D,all_bought_cnt:U,self_bought_cnt:_},Z)=>{var Se;let ee=H+["","通用元宝","元宝","银两"][b]+": "+((Se=M.goodsID(y))==null?void 0:Se.name)+(C>1?"*"+C:""),xe=`${d} ~ ${f} 共${ne}个`,be=U>=ne||_>=v;return Object.assign(o[Z].dataset??{},{goods_id:y,start_time:r,goods:ee}),{goods_id:y,goods:ee,title:xe,disabled:be}}),p=document.getElementsByClassName("right")[0];p&&(p.innerHTML=u.map(({goods:y,title:C,disabled:b})=>`<span class="secKillDetailText${b?" gray":""}" title="${C}">${y}</span>`).join(""));let g=p.start-6e4;return g>ie.now()&&ie.set("miaosha",()=>{pe(`${d}
秒杀即将开始！
`+u.map(({goods:y})=>y).join(`
`)),n=!0,setTimeout(()=>{n=!1;},66666);},g),i.Size==i.position}})();let Di=["巳蛇","灵动","八门","盾弓","智迟","持盈","卫主","不死","刚烈","觉醒","悲鸣","断肠","节命","先机","悲鸣","忘魂","雅士","挥泪","不屈","封冻","灵躯","武魂","已蛇","邪徒"];const Et={getspell:0,getspell_ZD:1,getspell_KN:2,getspell_EM:3,getspell_LY:4};function Li(t,e){let n=[],i=!1,o=Ai(e);const a=Et[o];let s=Object.keys(Et).filter(r=>Et[r]<=a).map(r=>t[r]).filter(Boolean).join(";");s=s==null?void 0:s.split(";").map(r=>{var l;return ((l=M.spellDict[r])==null?void 0:l.name)||"无收录技能"});for(let r of s)Di.includes(r)&&(n.push(r),i=!0);return [n,i]}function Ai(t){switch(Math.floor((t-1)/5)){case 0:return "getspell";case 1:return "getspell_ZD";case 2:return "getspell_KN";case 3:return "getspell_EM";case 4:return "getspell_LY";default:return "getspell"}}var rt=[],Rt=[],on={290:"推锋",766:"匡弼"},Ne=[],gt={},xt={},nt={},Ye={},yt=new Map,Be=()=>({name:"加载中"}),Ce=[],Gt={},_t={},Re={},Ae={},Oi={},Nt={},Mt={};Object.assign(M,{cardDict:rt,cardIDsOrder:Rt,spellDict:Ne,generalDict:gt,skinSP:xt,skinDict:nt,skinMap:Ye,bigSkin:yt,goodsID:Be,rogejson:Ae,gxjson:Oi,Rfight:Re,Rchoose:_t,Rcity:Gt,secId:Nt,vskinMap:Mt,Rplot:Ce});async function Ri(t){return new Promise(e=>JSZipUtils.getBinaryContent(window.location.host==="test.sanguosha.com"?"https://test.sanguosha.com/h5/res/config//Config_w.sgs":"https://web.sanguosha.com/220/h5_2/res/config/Config_w.sgs?v="+window.resourceVersion,(n,i)=>JSZip.loadAsync(i).then(async o=>{var ne;const a=function(){const v=new Date;return v.getFullYear().toString()+(v.getMonth()+1).toString().padStart(2,"0")+v.getDate().toString().padStart(2,"0")+"T000002"}();let s=["sys_playcard","cha_spell","character","hd_roguelike","hd_1v1_rogue","sys_h5_shop","sys_gs_dbs_fs_goodsbaseinfo","sys_server_item_drops_templete_config","sys_h5_dbs_clientserverpub","cha_gs_dbs_fs_skininfo","gn_dbs_quest","sys_h5_quest","sys_h5_task","ff_dbs_lottery_new","ff_exchange_new","sys_treasure_chest","gn_dbs_giftbag","ff_tiangong","ff_chess"];var r=await Promise.all(s.map(v=>o.file(v+".sgs").async("arraybuffer").then(D=>JSON.parse(new TextDecoder().decode(new Zlib.Gunzip(CtrUtil.Ctr.Ofb_Dec(D)).decompress()))))).then(v=>s.reduce((D,U,_)=>(D[U+".sgs"]=v[_],D),{}));function l(v,D){if(typeof v!="object")return v;let U={};for(let _ in v){let Z=D.get(_)||_;U[Z]=v[_];}return U}var d=new Map([["id","编号"],["name","名称"],["time","时间"],["desc","说明"],["reward","奖励"],["price","价格"],["max","限购"],["effect","效果"],["info","信息"]]),f=r["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.reduce((v,D)=>(v.set(D.a,D),v),new Map),c=r["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.abbreviation.field.reduce((v,{Short:D,Long:U})=>(v.set(D,U),v),new Map),u=r["sys_server_item_drops_templete_config.sgs"].AllDrop.DropTemplete.DropGroup.DropItem.reduce((v,D)=>(v.has(D.a)||v.set(D.a,[]),v.get(D.a).push(D.d),v),new Map);Be=(()=>{var v={};return function(D){if(D=parseInt(D),v[D])return v[D];let U=l(f.get(D),c),_=r["sys_h5_shop.sgs"].root.itemtips.find(({a:ee})=>ee==D),Z=(U==null?void 0:U.usedeffect)&&C(U==null?void 0:U.usedeffect);return v[D]={...U,..._&&{info:_.e},...Z&&{effect:Z}}}})();var p={};function g(v){var U;let D=v==null?void 0:v.replace(/([^0-9,\.])/g,"").split(",").map(_=>parseInt(_));return (D==null?void 0:D.length)<2?v:(p[D[0]]??(p[D[0]]=(U=f.get(D[0]))==null?void 0:U.b)??D[0])+(parseInt(D[1])>1?"*"+D[1]:"")}var y={};function C(v){let D=parseInt(v);if(D!=1e3&&Math.abs(D)>0)return y[D]??(y[D]=(u.get(Math.abs(D))??[]).map(U=>{var _;return ((_=f.get(U))==null?void 0:_.b)??C(U)}).join(D>0?"/":"&"))}Ne=r["cha_spell.sgs"].GameSpells.spell.reduce((v,{a:D,c:U,o:_})=>{var ee,xe;let Z={name:U,spellid:D,desc:((xe=(ee=_==null?void 0:_.replace(/<[^\<\>]*>/g,""))==null?void 0:ee.replace(/#.*/g,""))==null?void 0:xe.replace(/[;\n]+$/g,""))||""};return (Z.desc.includes("暗置")||Z.desc.includes("扣置")||Z.desc.includes("移出"))&&(on[D]=Tn[Z.name]??Z.name),v[D]=Z,v},[]);let b=r["sys_playcard.sgs"].abbreviation.reduce((v,{Short:D,Long:U})=>(v.set(D,U),v),new Map);if(rt=r["sys_playcard.sgs"].GamePlayCards.card.map(v=>l(v,b)).reduce((v,D)=>{var U,_;return v[D.id]={...D,name:D.name??((U=Ne[D.spellId])==null?void 0:U.name),desc:(_=Ne[D.spellId])==null?void 0:_.desc},v},[]),Rt=r["sys_playcard.sgs"].GamePlayCards.card.sort((v,D)=>v.c-D.c||v.d-D.d||v.h-D.h||v.m-D.m||v.g-D.g||v.f-D.f||v.a-D.a).map(({a:v})=>v),yt=new Map(r["cha_gs_dbs_fs_skininfo.sgs"].generalskin.items.item.map(v=>[String(v.a),[v.a,v.c,v.v||v.q,v.r]]).reverse()),nt=r["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.reduce((v,{skinID:D,name:U,skinlevel:_,dongPoint:Z})=>{let ee=parseInt(D/100);return v[ee]||(v[ee]={}),v[ee][D]={level:{"0,0":"普通","0,1":"稀有","0,2":"史诗","0,3":"传说","0,4":"限定"}[_]||"未知",name:U,state:Z!==void 0},v},{}),xt=r["cha_gs_dbs_fs_skininfo.sgs"].generalskin.speciaSkin.filter(v=>String(v.skinID).includes("_")).reduce((v,D)=>{let[U,_]=D.skinID.split("_").map(Number);return v[U]?v[U].includes(_)||v[U].push(_):v[U]=[_],v},{}),Object.entries(xt).forEach(([v,D])=>{var Z,ee;(Z=yt.get(v))==null||Z.push(D);let U=parseInt(v/100),_=(ee=nt[U])==null?void 0:ee[v];_&&(delete nt[U][v],D.forEach(xe=>{nt[U][v+"_"+xe]={..._,name:_.name+xe};}));}),gt=r["character.sgs"].GameCharacters.character.reduce((v,{a:D,ai:U,b:_})=>(v[D]=(U||"")+(_==null?void 0:_.replaceAll("&","")),v),{}),r["character.sgs"].GameCharacters.character.forEach(({a:v,v:D})=>{if(typeof D!="string"){Ye[v]=new Set([v]);return}let U=[v,...D.split(";").map(Z=>parseInt(Z))],_=U.find(Z=>Z in Ye);if(_){let Z=Ye[_];U.filter(ee=>!Z.has(ee)).forEach(ee=>(Ye[ee]=Z).add(ee));}else {let Z=new Set(U);U.forEach(ee=>Ye[ee]=Z);}}),Mt=r["character.sgs"].WuJiangs.Spgroup.reduce((v,D)=>{const U=D.spgenerals?D.spgenerals.split(",").map(Number):[];return U.forEach(_=>{v[_]=new Set(U);}),v},{}),Nt=r["ff_tiangong.sgs"].root.Common.reduce((v,D)=>(v[D.Id]=D,v),{}),typeof t!="string"){let v=r["gn_dbs_giftbag.sgs"].giftsys.gifts.giftsItem.Item.filter(D=>D.cdkey!="sgs"&&!D.platform&&D.endtime>=a&&D.begintime<=a).sort((D,U)=>D.endtime-U.endtime).map(D=>{const U="<br>"+D.dataInfo.match(/\[(\d+),(\d+)\]/g).map(_=>{const[Z,ee,xe]=_.match(/\[(\d+),(\d+)\]/);return `${Be(ee).name} * ${xe}`}).join("<br>");return {giftID:D.giftID,endtime:D.endtime,begintime:D.begintime,dataInfo:D.dataInfo,rewards:U}}).filter(Boolean);M.CDKDict=v;}if(Object.assign(M,{cardDict:rt,cardIDsOrder:Rt,markSpell:on,spellDict:Ne,generalDict:gt,skinSP:xt,skinDict:nt,skinMap:Ye,bigSkin:yt,goodsID:Be,secId:Nt}),(typeof t!="string"||t=="roge")&&async function(v,D){Gt=v.Root.Level.reduce((h,{cityID:m,cityname:w,citypic:S,citycoordinate:E,startshow:B})=>{let[Q,q]=E.split(",").map(Number);return h[m]={x:Q,y:-q,boss:B,name:w??(S==null?void 0:S.replace(/^city_([0-9])_(.+)*\.png$/,(N,ae,le)=>({"1jjy":"将军营","1jl":"箭楼","1wl":"望楼","1fht1":"烽火台(左)","1ck":"仓库","1yf":"营房","1fht2":"烽火台(右)","1sjc":"神君祠","2xsj":"西市集","2wl":"望楼","2dsj":"东市集","2wk":"武库","2hgl":"挥公陵","2sdg":"舜帝宫","2gcm":"干城门","2ywt":"演武台","3ds":"东市","3gg":"桂宫","3bg":"北宫","3wyg":"未央宫","3wk":"武库","3mgg":"明光宫","3clg":"长乐宫","4js":"金市","4lyt":"凌云台","4hly":"华林园","4tc":"太仓","4tx":"碳墟","4smm":"司马门","4wk":"武库","4sz":"石址","5my":"梅园","5fhl":"凤凰林","5lt":"龙亭","5wk":"武库","5wl":"望楼","5cm":"城门","5ql":"谯楼","5clg":"陈留宫","6jkg":"建康宫","6ql":"戚里","6wl":"望楼","6ycq":"邺城桥","6ywt":"演武台","6sg":"书馆","6wfl":"万福楼","6wk":"武库","6tqt":"铜雀台"})[ae+le]??N))},h},{}),v.Root.Tactics.forEach(({plot:h,plotname:m,plotdesc:w,school:S,money:E,level:B})=>{Ce[h]={name:m.replaceAll("·",""),desc:w.replaceAll(" ",""),school:S,money:E,level:B,type:2};}),v.Root.Spell.forEach(({id:h,spellid:m,money:w,level:S})=>{var E,B;Ce[h]={name:(E=Ne[m])==null?void 0:E.name,desc:(B=Ne[m])==null?void 0:B.desc,spellid:m,money:w,level:S,type:3};}),v.Root.Card.forEach(({id:h,cardid:m,isequip:w,money:S,level:E})=>{var B=rt[m];Ce[h]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[B.subType]??B.name,desc:B.desc,color:B.color,number:B.number,money:S,level:E,type:4+w,rType:(B.type*10+B.subType)*100+w};});var U=v.Root.Roundid.reduce((h,{useSeason:m})=>m),_=new Map,Z=v.Root.Text.reduce((h,{ID:m,text:w})=>(h[m]=w,h),[]);v.Root.General=(h=>v.Root.General.map(m=>l(m,h)))(v.root.abbreviation.reduce((h,{Short:m,Long:w})=>(h.set(m,w),h),new Map)),v.Root.Adventure.forEach(h=>{h.chapname=Z[h.chapname]??h.chapname;});let ee=v.Root.RewardGroup.reduce((h,{reward:m,rewarddesc:w,allreward:S,abandonmoney:E})=>{var B,Q;return h[m]=(E?E+"铜币/":"")+((Q=(B=S==null?void 0:S.split(";"))==null?void 0:B.flatMap(q=>q==null?void 0:q.split(",")))==null?void 0:Q.map(q=>["随机","普通","稀有","史诗","传说"][q]).join("/"))+w.replace("多选一","自选"),h},v.Root.Other.reduce((h,{reward:m,rewardname:w})=>(h[m]=w,h),{}));var xe=v.Root.Chapter.reduce((h,{seasonID:m,chapter:w,cityName:S,bosslocation:E,location:B})=>(B.split(";").forEach(Q=>{h[Q]=`${m}-${w}${S}`;}),h[E]=`${m}-${w}${S}BOSS`,h),{}),be=v.Root.General.reduce((h,m)=>(h[m.generalgroup]||(h[m.generalgroup]=[]),h[m.generalgroup].push(m),m.generalname=m.generalname.replace("&",""),h),{});v.Root.General.forEach(h=>{h.GeneralRank||(h.GeneralRank=0),h.JumpStage&&(h.next=(([m,w])=>be[m][w-1]??be[m][0])(h.JumpStage.split(";"))),h.info={general:h.generalname,hp:h.hp,maxhp:h.maxhp,card:h.cardnum,draw:h.draw,sha:1+h.exshatimes,armor:h.armor,getarmor:h.getarmor,...h.next?{next:h.next.generalname}:{}},h.spells=["","_ZD","_KN","_EM","_LY"].flatMap((m,w)=>{var S;return (((S=h["getspell"+m])==null?void 0:S.split(";"))??[]).map(E=>Ne[E]).filter(Boolean).map(E=>({...E,level:w}))}),h.spell=h.spells.map(({name:m})=>m).join(","),h.cards=["","_ZD","_KN","_EM","_LY"].flatMap((m,w)=>{var S,E;return [...((S=h["carddesc"+m])==null?void 0:S.split(";"))??[],...((E=h["equip"+m])==null?void 0:E.split(";"))??[]].map(B=>rt[B]).filter(Boolean).map(({id:B})=>({id:B,ncn:de[B].ncn,level:w}))}),h.card=h.cards.map(({ncn:m})=>m).join(",");}),Re=v.Root.Fight.reduce((h,m)=>{function w(S,E,B=!1){S&&(m.fight+=Y(S.info),m.lost+=(S.start?"[先手]":"")+S.generalname,S.next?(m.lost+=">",S.next.stage=E,S.next.info.pre=S.generalname,m.generals.push(S.next),w(S.next,E+1,B)):B||(m.fight+="+",m.lost+=" "));}if(m.generals=[...be[m.Ggroup]??[]],m.fight="",m.lost="",m.startnum){let S=m.generals.find(E=>E.generalID==m.startnum);S&&(S.start=!0);}return m.generals.forEach((S,E,B)=>w(S,1,E==B.length-1)),m.get=m.itemgroup+`铜币
`+(m.rewarditem?String(m.rewarditem).split(";"):[]).concat(String(m.reward).split(";")).map(S=>ee[S]).join(`
`),m.text=Z[m.text]??m.text,m.name=Z[m.name]??m.name,h[m.fightID]=m,h},[]);for(let h in be)h in Re||(Re[h]={generals:be[h]});if(_t=v.Root.Choose.reduce((h,m)=>{var w;return m.type==7?(h[m.effectID]=Re[m.event1],_.set(m.event1,(w=v.Root.Adventure.find(S=>S.ID===parseInt(m.effectID/10)))==null?void 0:w.chapname)):m.type==3&&m.event1=="2"?h[m.effectID]={get:"营地"}:h[m.effectID]={lost:(S=>S&&"失去 "+S)(K(m.lostitem,m.lostnum,m.effectID)),get:(S=>S&&m.showitem?S.replace("随机","特定"):S)(K(m.getitem,m.getnum,m.effectID))},h},[]),Object.assign(M,{Rfight:Re,Rchoose:_t,Rcity:Gt,vskinMap:Mt,Rplot:Ce,text:Z}),!t||t=="roge"){var Se=Object.entries(be).reduce((h,[m,w])=>{var Q,q,N,ae,le;let S=m.length<6?m.slice(-3):m.slice(0,2)!=="99"?m.slice(-5,-2)+">":"*"+m.slice(-2),E=m.length<6?m.slice(0,-3)-2:m.slice(0,2)!=="99"?m.slice(0,-5)-2:m.slice(-3,-2)-m.slice(-4,-3)+9;if(["新年大吉"].includes(((Q=Re[m])==null?void 0:Q.name)??((q=Re[parseInt(S)+4e3])==null?void 0:q.name)))return h;h[S]||(h[S]={fight:((N=Re[m])==null?void 0:N.name)??((ae=Re[parseInt(S)+4e3])==null?void 0:ae.name)??"",generals:{}}),_.has(m)&&(h[S].event=_.get(m));let B=h[S].generals;return (((le=Re[m])==null?void 0:le.generals)??w).forEach(oe=>{let L=(S.startsWith("*")?E:"")+(oe.stage||"")+"#"+oe.generalID;for(;;){if(!B[L])B[L]={general:(oe.info.pre?">":"")+oe.generalname+(oe.info.next?">":""),info:Y(oe.info),levels:[],start:[],infos:{},spell:{},card:{},ad:{}};else if(B[L].levels.includes(E)){L+="@";continue}break}let he=B[L];E%10<6&&E<20&&(he.levels.push(E),oe.start&&he.start.push(E)),he.infos[E]=oe.info,oe.otherad&&(he.ad[E]=oe.otherad),oe.spells&&oe.spells.forEach(P=>{he.spell[P.spellid]||(he.spell[P.spellid]={...P,levels:[],level:void 0}),E%10<6&&E<20&&he.spell[P.spellid].levels.push(E+(P.level??0));}),oe.cards&&oe.cards.forEach(P=>{he.card[P.id]||(he.card[P.id]={name:P.ncn,levels:[],level:void 0}),E%10<6&&E<20&&he.card[P.id].levels.push(E+(P.level??0));});}),h},{});Object.entries(Se).forEach(([h,m])=>{Se[h].shift=h.startsWith("*")&&Math.min(...Object.values(m.generals).flatMap(w=>w.levels))==1?1:0,m.generals=Object.values(m.generals).map(w=>(w.level=Math.min(...w.levels.sort((S,E)=>E-S))-Se[h].shift,w.level=w.level,w.spell=Object.values(w.spell).map(S=>{let E=Math.min(...S.levels.sort((B,Q)=>Q-B));return S.levels.some((B,Q,q)=>B<10&&!q.includes(B+10)&&(w.levels.includes(B+10)||w.levels.length==2&&w.levels.includes(10)))&&(S.level=[E]),S.levels.some(B=>B<10)&&(B=>{B.length&&(S.level=[E,B[B.length-1]]);})(S.levels.filter((B,Q,q)=>B>=10&&!q.includes(B-10))),S.level=(S.level??E)-Se[h].shift,delete S.levels,delete S.spellid,S}).sort((S,E)=>{let B=Q=>Q[1]>=10?Q[1]:Q[0]??Q;return B(S.level)%10-B(E.level)%10||B(S.level)-B(E.level)}),w.card=Object.values(w.card).map(S=>{let E=Math.min(...S.levels.sort((B,Q)=>Q-B));return S.levels.some((B,Q,q)=>B<10&&!q.includes(B+10)&&(w.levels.includes(B+10)||w.levels.length==2&&w.levels.includes(10)))&&(S.level=[E]),S.levels.some(B=>B<10)&&(B=>{B.length&&(S.level=[E,B[B.length-1]]);})(S.levels.filter((B,Q,q)=>B>=10&&!q.includes(B-10))),S.level=(S.level??E)-Se[h].shift,delete S.levels,S}).sort((S,E)=>{let B=Q=>Q[1]>=10?Q[1]:Q[0]??Q;return B(S.level)%10-B(E.level)%10||B(S.level)-B(E.level)}),w.card.length||delete w.card,w.info=Object.values(w.infos).reduce((S,E)=>(Object.keys(S).forEach(B=>{E[B]>S[B]&&(S[B]=E[B]);}),S),{hp:0,card:0,draw:0,sha:0}),Object.keys(w.ad).length?Object.keys(w.ad).sort((S,E)=>E-S).forEach((S,E,B)=>{(S>=10&&w.ad[S]==w.ad[S%10]||w.ad[S]==w.ad[B[E+1]])&&delete w.ad[S];}):delete w.ad,w.start.length?w.start=Math.min(...w.start):delete w.start,delete w.infos,delete w.levels,w)).sort((w,S)=>w.level-S.level);});var I=v.Root.UniversalGroup.filter(h=>h.fightgroup!==void 0).reduce((h,m)=>{h[m.fightID]||(h[m.fightID]={});let w=String(m.fightgroup).slice(-3);return h[m.fightID][w]||(h[m.fightID][w]=[]),h[m.fightID][w].push(m),h},{}),O=Array.from(Array.from(v.Root.Level.reduce((h,{cityID:m,eventfight:w,universalfight:S,startshow:E})=>{var Q,q;B(S),B((q=(Q=w==null?void 0:w.split(";"))==null?void 0:Q.map(N=>N.slice(-3)))==null?void 0:q.filter((N,ae,le)=>!le.slice(ae+1).includes(N)));function B(N){if(!N||N.length==0)return;let ae=h.get(N);ae?ae.includes(xe[m])||ae.push(xe[m]):h.set(N,[xe[m]]);}return h},new Map).entries()).reduce((h,[m,w])=>{let S=w.length>1&&new Set(w.map(E=>E.slice(0,3))).size<2?w.map((E,B)=>E.slice(B?3:0)).join("/"):String(w);return h.get(S)||h.set(S,new Set),(I[m]?Object.keys(I[m]):m).forEach(E=>h.get(S).add(E)),h},new Map).entries()).reduce((h,[m,w])=>(h[m]=Array.from(w,S=>Se[S]),h),{});Ae.jsbs=JSON.stringify(Object.entries(O).filter(h=>h[0].includes(U+"-")).reduce((h,[m,w])=>{let S=m.slice(2);return h[S]||(h[S]=[]),w.forEach(E=>{E.fight!="新年大吉"&&h[S].push(E);}),h},{})),Ae.jsft=JSON.stringify(Object.values(Se).filter(h=>["天涯故交","招兵买马","万众敬仰"].includes(h.event)&&h.shift||["突来危机","擂台比武","战事推演","为民除害","赛前演习","宵小叫嚣"].includes(h.event)).reduce((h,{event:m,generals:w,fight:S})=>(h[m]||(h[m]=[]),h[m].push({...S?{fight:S}:{},generals:w}),h),{})),Ae.wscd=JSON.stringify(Object.values(D.Card.map(({CitationID:h,money:m})=>({...Ce[h],money:m})).reduce((h,{level:m,money:w,name:S,color:E,number:B,desc:Q,rType:q})=>{let N=m+S+B;return h[N]||(h[N]={cl:[],level:w,name:S,number:B,type:q,desc:Q}),h[N].cl.push(E),h},{})).sort($e("type","level"))),Ae.wssp=JSON.stringify(D.Spell.map(({CitationID:h,money:m})=>({...Ce[h],money:m})).sort($e("money","level","spellid")).map(({level:h,money:m,name:w,desc:S})=>({level:m,name:w,desc:S}))),Ae.wszf=JSON.stringify(D.Tactics.map(({CitationID:h,money:m})=>({...Ce[h],money:m})).filter(h=>{var m;return (h.name=(m=h.name)==null?void 0:m.replace("·新",""))&&!h.name.includes("废弃")&&!h.desc.includes("备用")&&!/(游戏|战斗)开始/.test(h.desc)}).sort((h,m)=>!h.money^!m.money?h.money?1:-1:h.name.slice(0,2).localeCompare(m.name.slice(0,2))!=0?h.name.slice(0,2).localeCompare(m.name.slice(0,2)):$e("money","level","name.length")(h,m)).map(({level:h,money:m,name:w,desc:S})=>({level:m,name:w,desc:S})).filter((h,m,w)=>JSON.stringify(h)!=JSON.stringify(w[m+1]))),Ae.jssp=JSON.stringify(Ce.filter(h=>(h==null?void 0:h.type)==3).sort($e("level","money","spellid")).map(({level:h,money:m,name:w,desc:S})=>({name:w,level:h,desc:S}))),Ae.jscd=JSON.stringify(Object.values(Ce.filter(h=>(h==null?void 0:h.type)>=4).reduce((h,{level:m,money:w,name:S,color:E,number:B,type:Q,desc:q,rType:N})=>{let ae=m+S+B,le=[33,34].includes(Math.floor(N/100))||S=="诸葛连弩"&&m==4;return h[ae]||(h[ae]={cl:[],level:le?0:m,money:w,name:S,number:B,type:N+(le?6:0),desc:q}),h[ae].cl.push(E),h},{})).sort($e("type","level","money")).sort((h,m)=>h.level>0&&m.level==0?-1:0)),Ae.jssd=JSON.stringify(v.Root.seed.sort($e("level","seed")).map(({name:h,desc:m,level:w,huchijineng:S})=>{var B,Q,q;let E=(B=m==null?void 0:m.match(/.*获得【([^【】]*)】.*/))==null?void 0:B[1];return E&&(m+=((Q=Ne[S])==null?void 0:Q.desc)??((q=Ne.find(N=>(N==null?void 0:N.name)==E))==null?void 0:q.desc)),{name:h,level:w,desc:m}})),Ae.jssc=JSON.stringify(v.Root.school.map(({school:h,name:m,effect:w,needputong:S,needxiyou:E,needshishi:B,needchuanshuo:Q})=>({school:h,name:m,need:[S,E,B,Q],desc:Ce[w].desc.replaceAll(" ","")}))).replace("（","(").replace("）",")").replace("）",")"),Ae.jszf=JSON.stringify(Ce.filter(h=>(h==null?void 0:h.type)==2).filter(h=>(h.school=parseInt(h.school||100),h.name=h.name.replace("·新",""),!h.name.includes("废弃")&&!h.desc.includes("备用")&&!h.name.includes("套装"))).sort((h,m)=>h.name.slice(0,2).localeCompare(m.name.slice(0,2))!=0?h.name.slice(0,2).localeCompare(m.name.slice(0,2)):$e("level","money","name.length")(h,m)).map(({level:h,money:m,name:w,desc:S,school:E})=>({...E<100?{school:E}:{},name:w,level:h,desc:S})).filter((h,m,w)=>JSON.stringify(h)!=JSON.stringify(w[m+1]))),Ae.jstf=JSON.stringify(v.Root.saijitianfu.filter(h=>h.seasonID==U).reduce((h,{tfid:m,ceng:w,type:S,cost:E,plot:B,preposition:Q})=>(h[m]={id:m,x:S,y:w,cost:E,pre:(Q==null?void 0:Q.split(/,|;/))??[],...Ce[B]},h),[{id:0,x:0,y:0,cost:0,pre:[],name:"",level:0,type:0}])),e(Ae);}function K(h,m,w){var S,E,B;return h?h.includes(",")?(([Q,q])=>["随机","普通","稀有","史诗","传说"][q]+{2:"战法",3:"技能",4:"手牌",5:"装备"}[Q])(h.split(",")):ee[h]?(m>1?m:"")+ee[h]:Ce[h]?(S=Ce[h])==null?void 0:S.name:be[h]?(_.set(h,(E=v.Root.Adventure.find(Q=>Q.ID===parseInt(w/10)))==null?void 0:E.chapname),be[h].map(Q=>Q.generalname).join(`
`)):(B=v.Root.Card.find(Q=>Q.id==h))==null?void 0:B.name:""}function Y({general:h,hp:m,maxhp:w,armor:S,getarmor:E,card:B,draw:Q,sha:q,next:N,pre:ae}){return (ae?">":"")+h+m+(w!==m?"/"+w:"")+"血"+B+"牌摸"+Q+"杀"+q+(N?">":"")}}(r["hd_roguelike.sgs"],r["hd_1v1_rogue.sgs"]),typeof t!="string"||t=="guanxing"){let Se=function(I,O,K="https://web.sanguosha.com/220/h5_2/res/runtime/pc/general/big/bigSkin/"){let Y=K+I+".png";return fetch(Y).then(h=>{if(h.ok)return {name:O,desc:`<a target="_blank" href="${Y}"><img src="${Y.replace("bigSkin","static").replace("big/s","seat/s")}"></a>`};if(!K.includes("seat"))return Se(I,O,K.replace("big/s","seat/s").replace("bigSkin","static"))})};M.gxjson={"结果为推演和预测，请以最终公告为准！更新时间":new Date().toLocaleString(),"【充值消费】":[]};let v=r["gn_dbs_quest.sgs"].TaskAll.Task.filter(({_attributes:I})=>I.clientTimeStart>=String(a)).map(({_attributes:I,Reward:O})=>{let K=",";return O.SelectReward&&(O=O.SelectReward,K="/"),O.RewardItem.length||(O.RewardItem=[O.RewardItem]),{id:I.id,time:I.timeStart.slice(0,8)+"—"+I.timeEnd.slice(0,8),desc:"【"+I.name+"】"+I.desc,reward:O.RewardItem.map(({_attributes:Y})=>g(Y.itemId+","+Y.count)).join(K)}}).concat(r["sys_h5_quest.sgs"].root.Task.filter(I=>I.ClientTimeStart>=String(a)).map(({Id:I,Name:O,Desc:K,Rewards:Y,Count:h,ClientTimeStart:m,ExtraRewards:w,ClientTimeEnd:S,SelectRewards:E})=>{let B=E?"/":",";return {id:I,time:m.slice(0,8)+"—"+S.slice(0,8),desc:"【"+O+"】"+K,reward:[Y+","+h,...(w==null?void 0:w.split(";"))??[]].map(g).join(B)}})),D=r["sys_h5_task.sgs"].TaskAll.TaskNode.filter(({duration:I,quest_id:O})=>O&&(!I||(I==null?void 0:I.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6})?.*"),"$1"))>=String(a))).reduce((I,{duration:O,quest_id:K,name:Y})=>{var w,S;let h=K.split(";").map(E=>parseInt(E)).filter(E=>E>0),m=(((S=O||((w=v.find(({id:E,time:B})=>h.includes(E)&&B))==null?void 0:w.time))==null?void 0:S.slice(0,8))+"·【"+(Y==null?void 0:Y.replace(/.*盲盒.*/,"盲盒福利"))+"】").replace(/.*(充值|消费).*/,"【充值消费】");return h.forEach(E=>{E!=""&&(I[E]=m);}),I},{});v.forEach(({id:I,...O})=>{let K=D[I]??String(a)+"·【其它任务】";M.gxjson[K]||(M.gxjson[K]=[]),M.gxjson[K].push(O);}),(I=>{var O;I.length>1&&(M.gxjson[((O=I[0].time)==null?void 0:O.slice(0,8))+"·兑换【占星秘宝】"]=I);})(r["ff_dbs_lottery_new.sgs"].root.ShopGoods.filter(({timeRange:I})=>(I==null?void 0:I.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a)).map(({Id:I,counts:O,exchangecount:K,timeRange:Y})=>({time:Y==null?void 0:Y.replace(/.*?([0-9]+)T[0-9]+,([0-9]+)T[0-9]+/,(h,m,w)=>m+"-"+w),desc:"消耗·星石币*"+K,reward:g(I+","+O)}))),r["ff_exchange_new.sgs"].root.Common.filter(({duration:I})=>(I==null?void 0:I.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a)).forEach(({itemid:I,goods:O,rewardstype:K,duration:Y})=>M.gxjson[Y.slice(0,8)+"·【"+Be(I).name+"】兑换"]=O.sort((h,m)=>m.exchangecount1-h.exchangecount1).map(({exchangecount1:h,Id2:m,counts:w,limitcounts:S,itemid2:E,exchangecount2:B})=>{let Q=String(w).split(";");return {time:Y.slice(0,8)+"—"+Y.slice(16,24),desc:"消耗·"+g((E??I)+","+(B??h))+(S?",限"+S+"次":""),reward:String(m).split(";").map((q,N)=>g(q+","+Q[N])).join("/")}})),r["sys_treasure_chest.sgs"].root.Common.filter(({duration:I})=>(I==null?void 0:I.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a)).forEach(({itemid:I,rewards:O,duration:K})=>M.gxjson[K.slice(0,8)+"·开启【"+Be(I).name+"】"]=O.map(Y=>({time:K.slice(0,8)+"—"+K.slice(16,24),desc:"开启·"+g(I+","+Y.counts),reward:JSON.stringify(Y).split(/,"goodsid[0-9]+":" *([0-9,;]+) *"/).filter(h=>(h==null?void 0:h.search(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/))>=0).map(h=>h.replace(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/,(m,w,S)=>g(w)+(S?"["+g(S)+"]":""))).join(Y.rewardstype==2?"/":",")})));let U=[],_=[],Z=[],ee=r["sys_h5_dbs_clientserverpub.sgs"].client.DuoBao[0].item.filter(({BeginTime:I})=>I>String(a)).flatMap(({DropId:I,ExchangeId:O,BeginTime:K,EndTime:Y})=>{let h=K.slice(0,8)+"-"+Y.slice(0,8),m=(u.get(Math.abs(I))??[]).map(Be).filter(({name:B})=>!["夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","招募令","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(B)),w=m.map(({ID:B})=>B),E=(u.get(Math.abs(O))??[]).map(Be).filter(({ID:B,name:Q,TypeID:q})=>w.includes(B)||!(q==43&&(Q!=null&&Q.endsWith("动态套装"))||q==36&&(Q!=null&&Q.startsWith("文和乱武*"))||q==25&&["赵襄","沙摩柯(SP)","孙尚香(界限突破)"].includes(Q)||["枭雄金印","水晶碎片","圣魂玄晶","史诗皮肤锦囊","传说皮肤锦囊","至臻皮肤礼盒","谋定水晶自选礼盒"].includes(Q))).map(({ID:B,name:Q})=>{let q=m.findIndex(({name:N})=>N==Q);return q>=0&&w.splice(q,1,B),B});return Array.from(new Set([...w,...E])).map(Be).map(({ID:B,TypeID:Q,PicID:q,name:N,returngoods:ae,usedeffect:le,info:oe,fragment:L})=>{var P;let he={time:h,name:N,price:[...w.includes(B)?["四角"]:[],...E.includes(B)&&L?[L+"夺宝碎片"]:[]].join("/"),...(we=>we&&{desc:we})(["祈福灯","圣魂玄晶","枭雄金印"].includes(N)?"":ae&&ae!="0"&&ae.split(";").filter(we=>(we==null?void 0:we.search(/[0-9]+,[0-9]+/))>=0).map(g).join(";")||(le==null?void 0:le.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&le.replace(/([0-9]+),[0-9,]+/g,g)||le&&C(le)||oe)};return (Q==36||((P=he.name)==null?void 0:P.search(/\*[^0-9]/))>=0)&&Z.push({name:N,res:q}),he})});ee.length&&(M.gxjson.夺宝行动=ee,ee=ee.map(({name:I})=>I));let xe=r["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(I=>{var O;return ((O=I.x)==null?void 0:O.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(a)&&I.a!=834901}).map(({a:I,ah:O,l:K})=>{if(K&&K.replace(/([0-9]+),[0-9,]+/g,(Y,h)=>(!O&&![100301,200101,1325201].includes(parseInt(h))&&U.push(parseInt(h)),Y)),O)_.push(I);else return I}).filter(Boolean).concat(U).sort((I,O)=>I-O).filter((I,O,K)=>O==0||I!=K[O-1]);Array.from(new Set(r["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.filter(I=>I.SellTime>String(a)).map(I=>I.baseID).concat(xe.concat(xe.filter((I,O,K)=>{var Y,h;return I-K[O-1]>1e3&&K[O+1]-I<1e3&&((h=(Y=Be(I))==null?void 0:Y.name)==null?void 0:h[4])!="*"}).map(I=>r["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(O=>O.a-I>0&&O.a/1e4>>0==I/1e4>>0).map(O=>O.a)).reduce((I,O)=>[...I,...O],[])).sort((I,O)=>I-O)))).map(I=>Be(I)).filter(I=>I&&![...ee,"夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","招募令","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(I.name)).forEach(({ID:I,TypeID:O,PicID:K,name:Y,maxBuyCount:h,yuanbao:m,returngoods:w,SellTime:S,usedeffect:E,info:B,yuanbaoonly:Q,fragment:q,exchange:N,shopvisual:ae})=>{var oe;let le={...S&&{time:S.replace(/.*?([0-9]+)T[0-9]+;([0-9]+)T[0-9]+/,(L,he,P)=>he+"-"+P)},name:Y,...N!=null&&N.includes(",")?{price:g(N)}:ae&&m!=999999&&{price:Q?m+"通用元宝":m+"元宝",...h&&((L,he)=>parseInt(L)>0?{max:he+"个/"+(L==1?"":L)+"天"}:{})(...h.split(";"))},...(L=>L&&{desc:L})(["祈福灯","圣魂玄晶","枭雄金印"].includes(Y)?"":w&&w!="0"&&w.split(";").filter(L=>(L==null?void 0:L.search(/[0-9]+,[0-9]+/))>=0).map(g).join(";")||(E==null?void 0:E.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&E.replace(/([0-9]+),[0-9,]+/g,g)||E&&C(E)||B)};(O==36||((oe=le.name)==null?void 0:oe.search(/\*[^0-9]/))>=0)&&Z.push({name:Y,res:K}),String(le.price).includes("夺宝")||String(le.price).includes("灵宝")?(M.gxjson.夺宝行动||(M.gxjson.夺宝行动=[]),M.gxjson.夺宝行动.push(le)):le.max?(M.gxjson.限购礼包||(M.gxjson.限购礼包=[]),M.gxjson.限购礼包.push(le)):(M.gxjson.其它道具||(M.gxjson.其它道具=[]),M.gxjson.其它道具.push(le));}),(ne=M.gxjson.其它道具)==null||ne.sort((I,O)=>I.price&&!O.price?-1:1),_.length&&(M.gxjson.祈福武将=Object.entries(_.map(I=>Be(I)).filter(({returngoods:I})=>{var O;return ((O=Be(I.split(";")[1].split(",")[0]))==null?void 0:O.TypeID)==25}).reduce((I,{name:O,lotteryPrice:K})=>(I[K]||(I[K]=[]),I[K].push(O.replace("武将","").replace(/\(.*?\)/g,"")),I),{})).sort((I,O)=>O[0]-I[0]).map(([I,O])=>({price:I+"同心结",reward:O.join("/")}))),(I=>{I.length&&(M.gxjson.祈愿台=I);})(r["ff_tiangong.sgs"].root.Drop.reduce((I,{Id:O,ItemId:K,MaxCount:Y})=>(I[O]||(I[O]=[]),(h=>{["欢乐豆","手气卡","点将卡","换将卡","诏令天下","夺宝券","招募令","武将包","皮肤包","朱砂","灵宝","桃花","功勋","校尉将印","大将军印","水晶碎片","圣魂玄晶","传世玉玺"].some(m=>h.startsWith(m))||I[O].push(h);})(g(K+","+Y)),I),[]).reduce((I,O)=>{if(O){let K=I.find(({reward:Y})=>O.includes(Y));K&&(K.reward=O.join(","));}return I},r["ff_tiangong.sgs"].root.Common.slice().reverse().reduce((I,{Id:O,Name:K,bigrewards:Y,Duration2:h})=>{let m=parseInt(h.slice(0,8))+1;if(m<parseInt(a))return I;let w=I.find(({name:S})=>S==K);return w?w.time+=";"+m:I.push({name:K,reward:gt[Y],time:String(m)}),I},[]).reverse()));const be=(()=>{var I={};return function(O){return I[O]?I[O]:I[O]=r["ff_chess.sgs"].root.NewChess.filter(({PlanId2:K})=>K==O).reduce((K,{MaxFloors:Y})=>K+parseInt(Y),0)}})();(I=>{I.length&&(M.gxjson.绘卷=I);})(r["ff_chess.sgs"].root.Common.reduce((I,{GrandPrize:O,PlanID2:K,duration2:Y})=>{var m;let h=parseInt(Y.slice(0,8))+1;return h<parseInt(a)||I.push({reward:(m=Be(O))==null?void 0:m.name,预估价格:be(K)/2>>0,time:h+"-"+Y.slice(16,24)}),I},[])),M.gxjson.新品皮肤=Z.map(({name:I})=>({name:I})),Object.entries(M.gxjson).forEach(([I,O])=>M.gxjson[I]=Array.isArray(O)?O.map(K=>l(K,d)):l(O,d)),(!t||t=="guanxing")&&e(Promise.all(Z.map(({name:I,res:O})=>Se(O,I))).then(I=>M.gxjson.新品皮肤=I.filter(Boolean)).then(()=>(Object.entries(M.gxjson).forEach(([I,O])=>M.gxjson[I]=Array.isArray(O)?O.map(K=>l(K,d)):l(O,d)),M.gxjson)));}e(r),console.warn("[initMap] Config_w 解析完成");})))}function $e(...t){return new Function("_a","_b","return "+t.map(e=>"((_a."+e+")-(_b."+e+"))").join("||"))}function Gi(t,e){const n=t.matchAll(/\[(\d+),(\d+)\]/g),i=Array.from(n).map(a=>({GoodsBaseID:parseInt(a[1]),ChangeCount:parseInt(a[2])}));if(i.length!==e.length)return !1;const o=new Map(e.map(a=>[a.GoodsBaseID,a.ChangeCount]));return i.every(a=>o.get(a.GoodsBaseID)===a.ChangeCount)&&e.every(a=>i.some(s=>s.GoodsBaseID===a.GoodsBaseID&&s.ChangeCount===a.ChangeCount))}var _i=`<head><title>三国杀打小抄</title><meta charset="UTF-8"><style>::-webkit-scrollbar{width:5px;height:12px}::-webkit-scrollbar-track{border:1px solid #050505}::-webkit-scrollbar-thumb{background:#5f563f}::-webkit-scrollbar-thumb:hover{background:#2c2c2c}.body{width:100%;padding:0;font-size:13px;background:#23201d;background-size:cover;color:#f2de9c;display:flex;flex-direction:column;margin:1px;user-select:none;max-width:100vw;overflow-x:hidden;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Tahoma,Arial,sans-serif}.nav{width:100%;background:#23201d;text-align:center;display:flex;align-items:center;gap:15px;padding:5px 0}.nav1{font-weight:bolder;height:20px;width:40%;color:#f2de9c;background:#23201d;margin-right:15px;display:block}.sha{font-weight:bolder;height:20px;width:40%;color:#f2de9c;background:#23201d;margin-right:15px;display:block}#nav1:empty{display:none}.nav2{height:20px;width:49%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.nav2:hover{color:#f2de9c;background:#372820;border:1px solid #f2de9c}.nav2:focus{background:#372820;box-shadow:1px 1px 3px #f2de9c}.content{margin:1px}.AC-head{font-weight:bolder;height:66px;width:13%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin:1px;border-radius:5px;border:1px #23201d solid;box-shadow:1px 0 3px;overflow:hidden}.AC-head:hover{background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.AC-body{height:60px;width:79%;float:left;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.invite-body{height:40px;width:92%;float:left;display:flex;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:5px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.orderContainer{text-align:right;vertical-align:bottom}.order-head{font-weight:bolder;width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.order-body:empty{height:35px}.order-body{position:relative;padding:5px;height:auto;width:94%;display:block;box-shadow:1px 1px 3px;z-index:1;margin:1px;overflow:hidden;border-radius:5px}.order-body:after{text-align:center;content:var(--No-content, '座位号丨武将');position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownShouPai{border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.knownCardsInHand{text-align:center;position:relative;overflow:hidden;display:none;height:auto}.knownCards:empty{text-align:center;position:relative;overflow:hidden;display:none}.knownCards{width:94%;text-align:center;position:relative;overflow:hidden;height:auto}@keyframes blink{50%{border-color:#f2de9c}}.paiduiCards:after{text-align:center;content:'牌堆';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.qipaiCards:after{text-align:center;content:'本回合弃牌堆';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownCards{padding:5px;height:auto;width:94%;float:right;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.knownCards:after{text-align:center;content:'场上手牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#quanBian:after{text-align:center;content:'权变牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#yanXi:after{text-align:center;content:'宴戏牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardTypeDetail:after{text-align:center;content:'牌堆类型详情';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.ding{text-align:center;width:100%;position:relative;height:auto;display:none}.dingCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.dingCards:after{content:'第一张为牌堆顶';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.di{text-align:center;width:100%;position:relative;height:auto;display:none}.diCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.diCards:after{content:'第一张为牌堆底';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardDetail{width:100%;overflow:hidden;display:block}.type{width:100%;float:left}.cardTypeContainer{width:100%;overflow:hidden;display:block}.type-head{width:10%;float:left;text-align:center;color:#f2de9c;margin-left:3px;display:block;overflow:hidden;cursor:pointer}.type-body{padding:5px;width:94%;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.cardType{font-size:12px;width:25%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.cardType:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.storeDetail{font-size:12px;width:50%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.detail{width:100%;float:left;overflow:hidden}.detail-head{width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.detail-body{min-height:40px;padding:5px;width:94%;float:left;display:block;box-shadow:1px 1px 3px;margin:1px;border-radius:5px;overflow:hidden}.panel-header{background:#23201d;color:#f2de9c;padding:3px;text-align:left;border:none;width:100%;cursor:pointer;display:flex;align-items:center;border-radius:5px;border:1px transparent solid}.triangle{width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-left:6px solid #f2de9c;margin-right:10px;transition:transform .3s ease}.panel-content{max-height:0;width:100%;float:left;display:block;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;transition:max-height .3s ease-out}.panel-header.active .triangle{transform:rotate(90deg)}.panel-header.active{color:#f2de9c;background:#372820}.panel-header:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.r{color:#f04155}.suitRec{width:50%;float:right;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",Tahoma,Arial,sans-serif;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7)}.suit{width:50%;float:left}.phrase{float:left}.face{width:12.5%;display:block;float:left}.face:hover{width:12.5%;display:block;float:left;background:#f2de9c}#shandian{width:100%;float:left}.function{width:50%;margin:1px}.jizhan{width:100%;float:left}.yanjiao{width:50%;float:left}.yanjiaospan{border:1px solid #0000;box-sizing:border-box}.yanjiaospan:hover{border:1px solid #f2de9c;cursor:pointer}.calRes{width:98%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px;font-size:13px;margin:1px}.secKillDetailText{width:100%;height:26px;float:left;text-align:center;color:#f2de9c;background:#23201d;display:block;border-radius:5px;line-height:26px;margin-top:17px}.calRes:not(:disabled):hover{font-size:12px;color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhuBTN{width:48%;height:20px;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhuBTN:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhu{width:100%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhu:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#mySeatID1{width:48%}#mySeatID2{width:48%}.res{width:100%;float:left}a:link,a:visited{color:inherit;text-decoration:none;display:inline-flex;text-decoration:underline;border-radius:5px;cursor:pointer;align-items:center;justify-content:center}a:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#donate{position:relative;color:#f2de9c;display:block;text-align:center}.uuid{position:relative;color:#f2de9c;display:block;text-align:center;cursor:pointer}.uuid:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.uuid:active{background:#372820}.width{width:100%;height:5px;clear:both}.switch-container{display:flex}.switch{position:relative;display:block;margin-left:5px;width:56px;height:26px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#23201d;-webkit-transition:.4s;transition:.4s;border-radius:34px;border:1px solid #f2de9c;--slider-position:2px}.slider:before{position:absolute;content:"";height:20px;width:20px;left:var(--slider-position,2px);bottom:2px;background-color:#f2de9c;-webkit-transition:.4s;transition:.4s;border-radius:50%}input:checked+.slider{background-color:#372820}input:focus+.slider{box-shadow:0 0 1px #372820}.status{position:absolute;top:50%;transform:translateY(-50%);left:5px;color:#555}.explanation{margin:0 5px;display:flex;width:100%}input:checked+.slider+.status:before{content:'开'}input:checked+.slider+#autoBotStatus:before{content:var(--bot-status, '30');color:#f2de9c}input+.slider+#autoBotStatus:before{content:var(--bot-status, '关')}input+.slider+.status:before{content:"关"}.calRes:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.markedCard{display:inline-flex;align-items:center;border-radius:5px;border:1px solid #000;width:auto;background-color:#372820;color:#f2de9c}.mark{writing-mode:vertical-rl;margin-right:0;color:#f2de9c}.markedCard>.mark:only-child{display:none}.shoupai{color:#000;--shoupai-width:33px;padding:0;font-weight:bolder;margin-right:calc(32px - var(--shoupai-width));float:left;width:var(--shoupai-width);min-width:var(--shoupai-width);height:38px;border:1px solid #000;text-align:center;background:rgba(210,200,160,.5);border-radius:5px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",'Noto Color Emoji';white-space:nowrap;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7);font-size:13px}.shoupai.R{color:red}.shoupai.G{background:0}.shoupai.G .shoupai{background:0;pointer-events:none}.order-body:not(#paiduiCards) .shoupai:disabled{display:none}.order-body:not(#paiduiCards) .shoupai.G{width:auto}.left{width:30%;float:left}.right{width:70%;float:right}input[type=checkbox]:disabled+.slider{background-color:gray;cursor:not-allowed}.question-mark{display:inline-block;position:relative;width:15px;height:15px;line-height:15px;text-align:center;border:1px solid #f2de9c;border-radius:50%;margin-left:2px;transition:background-color .3s}.question-mark:hover{background-color:#372820;cursor:pointer}.tooltip{position:relative;background-color:#333;text-align:center;padding:5px;border-radius:5px;max-width:200px;white-space:pre-line;z-index:10000000001;opacity:0;pointer-events:none;transition:opacity .1s ease-in-out;color:#f2de9c;font-size:13px}.tooltip.visible{opacity:1;pointer-events:auto}.tooltip.top{margin-left:50px}#sidebarHint{position:fixed;top:0;right:0;width:25px;height:100%;background-color:rgba(55,40,32,.8);color:#f2de9c;display:none;justify-content:center;align-items:center;font-size:20px;writing-mode:vertical-rl;text-orientation:upright}:root{--my-background-image:url('https://web.sanguosha.com/220/h5_2/res/assets/bigPng/propGet.png')}.sorderContainer{font-size:13px;width:100%;display:flex;align-items:center;width:146px;z-index:10000000000;user-select:none;text-align:left;transition:height .2s;position:fixed;transform-origin:0 0}.sorder-head{display:flex;align-items:center;justify-content:center;font-weight:bolder;width:10%;height:25px;text-align:center;color:#f2de9c;margin-left:3px}.sorder-body{pointer-events:auto;height:auto;width:100%;float:right;display:flex;flex-wrap:wrap;overflow:hidden;z-index:1;max-height:48px}.sorder-body.show-ellipsis::after{content:'...';position:absolute;bottom:0;left:50%;transform:translateX(-50%);text-align:center;color:#f2de9c;font-weight:700;height:20px;background:linear-gradient(to bottom,rgba(255,255,255,0),rgb(0 0 0 / 80%));width:inherit}.sorder-body:hover{max-height:none;overflow:visible}.sorder-body:hover::after{display:none}.sorder-body:not(#paiduiCards) .shoupai:disabled{display:none}.sorder-body:not(#paiduiCards) .shoupai.G{width:auto}@keyframes fadeInLeftToRight{0%{clip-path:inset(0 100% 0 0);opacity:0}100%{clip-path:inset(0 0 0 0);opacity:1}}@keyframes fadeOutRightToLeft{0%{clip-path:inset(0 0 0 0);opacity:1}100%{clip-path:inset(0 100% 0 0);opacity:0}}.ac-tooltip{position:fixed;top:100px;left:45%;background-color:transparent;background-image:var(--my-background-image);cursor:pointer;background-size:100% 100%;color:#f44336;font-size:16px;border-radius:4px;z-index:9999;overflow:hidden;white-space:nowrap;padding:16px 32px;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transform:translateX(0);transition:opacity 1s ease-in-out,visibility 1s ease-in-out}.ac-tooltip.green{background-color:transparent;color:#f2de9c}.city{visibility:hidden;transition:opacity 1s ease-in-out,visibility 1s ease-in-out;background-color:rgba(55,52,39,.7);color:#f2de9c;align-items:center;justify-content:center;border-radius:5px;text-align:center;flex-direction:column;padding:5px}hr{width:100%;margin:0}@keyframes blink{50%{border-color:#f2de9c}}.show{animation:fadeInLeftToRight 1s forwards,blink 2s infinite;visibility:visible}.hide{animation:fadeOutRightToLeft 1s forwards;visibility:hidden}.window{width:1024px;height:600px;border:2px solid #333;border-radius:8px;box-shadow:0 0 15px rgba(0,0,0,.5);position:relative;background-color:#f5f5f5;overflow:hidden}.window-header{display:flex;justify-content:space-between;align-items:center;background-color:#23201d;color:#fff;padding:5px;cursor:move}.window-header .title{font-weight:700;padding-left:10px}.window-header .controls{display:flex;gap:5px}.window-header .controls button{background:0 0;border:none;color:#fff;cursor:pointer;padding:5px}.window-header .controls button:hover{background-color:rgba(255,255,255,.2)}.window-content{width:100%;height:calc(100% - 40px);border:none}.fullscreen{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-5C3C11THB3"><\/script><script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"><\/script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5C3C11THB3")<\/script></head><div class="body"><div class="nav"><div class="nav1" id="phrase">当前阶段提示</div><div class="sha" id="sha">可出杀次数：0</div></div><div class="content" id="content"><div class="orderAndShouPai" id="orderAndShouPai"><button class="panel-header"><span class="triangle"></span> <b>武将手牌</b></button><div class="panel-content order" id="button"><div class="orderContainer" id="or1"><div class="order-body No1" id="1" style="--No-content:'神诸葛亮丨一'"><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button><div class="markedCard"><span class="mark">木马</span> <button class="shoupai G">♥10<br>测试</button> <button class="shoupai R">♦K<br>测试</button></div><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button></div></div><div class="orderContainer" id="or2"><div class="order-body No2" id="2" style="--No-content:'卧龙诸葛丨二'"><button class="shoupai G">♥10<br>暗牌</button> <button class="shoupai G">♥10<br>样式</button></div></div><div class="orderContainer" id="or3" style="--No-content:'天候孔明丨三'"><div class="order-body No3" id="3"></div></div><div class="orderContainer" id="or4" style="--No-content:'诸葛亮丨四'"><div class="order-body No4" id="4"></div></div><div class="orderContainer" id="or5" style="--No-content:'武诸葛亮丨五'"><div class="order-body No5" id="5"></div></div><div class="orderContainer" id="or6" style="--No-content:'卧龙凤雏丨六'"><div class="order-body No6" id="6"></div></div><div class="orderContainer" id="or7" style="--No-content:'界卧龙诸葛丨七'"><div class="order-body No7" id="7"></div></div><div class="orderContainer" id="or8" style="--No-content:'界诸葛亮丨八'"><div class="order-body No8" id="8"></div></div></div><div><div class="orderContainer"><div class="knownCards" id="knownCards"></div></div><div class="orderContainer"><div class="order-body paiduiCards" id="paiduiCards"></div></div><div class="orderContainer"><div class="order-body qipaiCards" id="qipaiCards"></div></div><div class="orderContainer"><div class="knownCards quanBianYanXi" id="quanBian"></div><div class="knownCards quanBianYanXi" id="yanXi"></div></div></div></div><div class="width"></div><div class="cardDetail" id="cardDetail"><div class="space"></div><div class="detail"><div class="detail-body"><div class="suit r" id="heart">♥红桃 × 0</div><div class="suit" id="spade">♠黑桃 × 0</div><div class="suit" id="club">♣梅花 × 0</div><div class="suit r" id="diamond">♦方片 × 0</div><div class="suit r" id="hongsha">红杀 × 0</div><div class="suit" id="heisha" n>黑杀 × 0</div><span>乱击/权变</span><div class="suitRec" id="suit"></div><br><span>博图</span><div class="suitRec" id="boTu"></div><br><span>上一张使用的牌</span><br><button class="shoupai R" id="lastUseCard">＾＾<br>•ω•</button><br><br><br><div id="guhuo" style="display:none">蛊惑牌</div><div class="function yanjiao" id="yanjiao">严教小抄</div><button class="function mizhuBTN" id="mizhu">糜竺小抄</button> <button class="function mizhu mySeatID" id="mySeatID1">座位：1</button> <button class="function mizhu mySeatID" id="mySeatID2">座位：2</button><div class="function res" id="result">结果样式：1 1 1 1 = 4</div></div></div><div class="width"></div><div class="type"><div class="cardTypeContainer"><div class="type-body type1" id="type1"><button class="cardType" id="test1">小抄</button> <button class="cardType">开发</button> <button class="cardType">小伙伴</button></div></div><div class="cardTypeContainer"><div class="type-body type2" id="type2"><button class="cardType">霜迟</button> <button class="cardType">孤独尊</button> <button class="cardType">无所谓</button> <button class="cardType">埃城</button> <button class="cardType">辉弥</button> <button class="cardType">天野</button> <button class="cardType">人富</button></div></div><div class="cardTypeContainer"><div class="type-body type3" id="type3"></div></div><div class="orderContainer"><div class="knownCards cardTypeDetail" id="cardTypeDetail"></div></div></div></div><div class="width"></div><div class="width"></div><div class="laya" id="laya"><div class="space"></div><button class="panel-header laya-header"><span class="triangle"></span> <b>快捷操作</b></button><div class="panel-content" id="layaDiv"><div class="switch-container"><div id="autoBotSwitchContainer"><span class="explanation">自动挂机<span class="question-mark" data-tooltip="AI接管挂机刷酒馆30亲密度&#10;自动创建演武房间开始对战&#10;建议点将张辽禁将只留标风&#10;禁用其它SP武将可提高胜率&#10;到身份演武房间列表后开启&#10;界小抄用户可以无限制使用&#10;开关数字表示酒馆剩余时间&#10;双击打开官阶百胜无尽挂机&#10;到经典场国战开启可刷福卡">?</span></span> <label class="switch"><input id="autoBotSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoBotStatus"></span></label></div><div><span class="explanation" id="autoExplanation"></span></div></div><div class="switch-container"><div><span class="explanation">盖主速刷<span class="question-mark" data-tooltip="主公点将黄盖一分钟苦肉自杀速刷&#10;可用来刷武将百胜战功和官阶任务&#10;保证已激活的账号在 7 天内登录过&#10;一：登录小号创建自选身份密码房&#10;二：多开大号加入房间点自动挂机&#10;三：大号需双击自动挂机开始锁定&#10;四：小号点将黄盖，打开盖主速刷&#10;五：大号准备并保持两窗口在前台&#10;">?</span></span> <label class="switch"><input id="autoHGSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoHGStatus"></span></label></div><div><span class="explanation" id="autoHGExplanation"></span></div></div><div class="switch-container" style="display:none"><div><span class="explanation">加入互助<span class="question-mark" data-tooltip="点击加入小抄互相助力小组&#10;每天自动助力三位小抄玩家&#10;同时收到三位小抄玩家助力&#10;默认为小抄给当前玩家助力&#10;右侧可输入想要助力的玩家&#10;“再”打开《加入互助》开关&#10;该玩家可收到三个小抄助力&#10;">?</span></span> <label class="switch"><input id="autoInviteSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><textarea class="invite-body" type="text" id="inviteName" required maxlength="10" size="10" placeholder="大西瓜"></textarea></div></div><button class="calRes" id="guanxing">自助观星</button> <button class="calRes" id="mail" disabled="disabled">一键领取邮箱物品</button> <button class="calRes" id="task" disabled="disabled">一键领取所有任务奖励</button></div></div><div class="store" id="store"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>山河图</b></button><div class="panel-content"><div><button class="calRes" id="openStore">点击打开商店换装备->跳奇遇</button></div><div><span id="chongsheng">重生是否发动：否</span></div><div><span id="sanBanFu">三板斧计数器</span></div><div id="storeDetail"><button class="storeDetail">集市霸王·壹300</button> <button class="storeDetail">集市霸王·贰200</button> <button class="storeDetail">集市霸王·叁100</button> <button class="storeDetail">会员商店·肆1100</button> <button class="storeDetail">稳定承载1100</button> <button class="storeDetail">极奢1100</button></div></div></div><div class="secKill" id="secKill"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>秒杀连点器（悬停查看详情）</b></button><div class="panel-content" id="secKillDetail"><div class="left"><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem1Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem2Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem3Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br></div><div class="right"><span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span></div></div></div><div class="chat" id="chat"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>聊天（点击自动输入）</b></button><div class="panel-content chat-body"></div></div><div class="CDK"><button class="panel-header"><span class="triangle"></span> <b>兑换码（点击即兑换）</b></button><div class="panel-content"><div class="function res" id="CDK"><button class="calRes">小麦好帅</button></div></div></div><div class="tianguo"><button class="panel-header"><span class="triangle"></span> <b>统计</b></button><div class="panel-content"><button id="gamerecord" class="calRes" style="text-align:center">战绩胜率统计</button><div id="PlayerTianGuo" style="text-align:center">你的天过次数/总次数</div><div><div id="lottery"><a href="https://goka.top:8080/choujiang?username=" target="_blank" class="calRes external-link" data-url="https://goka.top:8080/choujiang?username=" id="choujiang">点击查看祈愿台数据</a></div></div></div></div><button class="panel-header"><span class="triangle"></span> <b>设置</b></button><div class="setting panel-content"><div class="switch-container"><div><span class="explanation">皮肤体验<span class="question-mark" data-tooltip="该功能仅限于体验皮肤&#10;喜欢还请购买支持画师&#10;此功能随时失效！！！">?</span></span> <label class="switch"><input id="skinSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="skinStateButton"><span class="explanation">动态皮肤<span class="question-mark" data-tooltip="打开显示动态皮肤&#10;关闭显示静态皮肤&#10;电脑卡顿可以打开">?</span></span> <label class="switch"><input id="skinStateSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">屏蔽动态<span class="question-mark" data-tooltip="屏蔽其他人的动态皮肤&#10;电脑卡顿的话可以打开">?</span></span> <label class="switch"><input id="skinStateBlockSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">皮肤壁纸 <span class="question-mark" data-tooltip="打开后进入皮肤详情界面进行设置&#10;可以将动静态皮肤设置为游戏壁纸&#10;也可以把静态皮肤图片保存到本地&#10;不建议与微端自定义背景同时使用">?</span> </span><label class="switch"><input id="skinPaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="paperStateButton"><span class="explanation">全局壁纸<span class="question-mark" data-tooltip="对局外也将背景替换为皮肤壁纸">?</span></span> <label class="switch"><input id="allPaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">五阶特效 <span class="question-mark" data-tooltip="其他角色显示五阶特效">? </span></span><label class="switch"><input id="generalSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">山河地图 <span class="question-mark" data-tooltip="提前预测奇遇事件">?</span> </span><label class="switch"><input id="rogueCitySwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div style="display:none"><span class="explanation">金色卡背</span> <label class="switch"><input id="cardBackSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">明牌框框 <span class="question-mark" data-tooltip="明牌展示在武将下面">? </span></span><label class="switch"><input id="seatUISwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">卡牌标签<span class="question-mark" data-tooltip="会在自己手上的卡牌显示标签&#10;明牌：五谷顺手迂志等明牌&#10;新组合：界小抄提示百出的新组合&#10;更多标签在开发中">?</span></span> <label class="switch"><input id="cardLabelSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">自动签到 <span class="question-mark" data-tooltip="自动领取打卡签到的奖励">? </span></span><label class="switch"><input id="autoSignSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">跳体验卡 <span class="question-mark" data-tooltip="签到会有体验武将&#10;如领取会污染将池&#10;开启按钮跳过领取&#10;月底记得手动领取">? </span></span><label class="switch"><input id="autoSignSkipSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">领武将包<span class="question-mark" data-tooltip="每天登录，自动领取免费的武将包">?</span></span> <label class="switch"><input id="autoWuJiangSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">公会三敲<span class="question-mark" data-tooltip="每天自动公会三敲&#10;无惧公会长的诫厉">?</span></span> <label class="switch"><input id="autoDrumSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">月卡奖励<span class="question-mark" data-tooltip="自动领取月卡奖励&#10;界小抄先行体验">?</span></span> <label class="switch"><input id="autoYueKaSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">自动砍树<span class="question-mark" data-tooltip="每天登录自动砍树&#10;界小抄先行体验">?</span></span> <label class="switch"><input id="autoKanShuSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">跳过弹窗<span class="question-mark" data-tooltip="跳过广告弹窗&#10;MVP结算&#10;武将包弹窗&#10;皮肤包弹窗&#10;老仙特效">?</span></span> <label class="switch"><input id="skipWindowSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">跳过出货<span class="question-mark" data-tooltip="跳过出货弹窗&#10;祈愿台翻翻乐&#10;加快氪金速度">?</span></span> <label class="switch"><input id="skipProbWindowSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">屏蔽击杀 <span class="question-mark" data-tooltip="屏蔽击杀特效">? </span></span><label class="switch"><input id="killEffectSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">兑换码&emsp;<span class="question-mark" data-tooltip="开启将显示兑换码通知&#10;且收集您的兑换码兑换">?</span></span> <label class="switch"><input id="CDKNotificationSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div></div><div class="width"></div><div class="ACContainer"><textarea class="AC-body" type="text" id="AC" name="AC" required placeholder="点击添加激活码"></textarea> <button class="AC-head" type="submit" id="ACSubmit">激活</button></div><div style="text-align:center"><a href="https://afdian.com/@yimadaO_o" class="external-link" data-url="https://afdian.com/@yimadaO_o">开发不易 如您喜欢 不妨支持小抄</a><div class="width"></div><a href="https://qm.qq.com/q/zIwVQjlqnY" class="external-link" data-url="https://qm.qq.com/q/zIwVQjlqnY">加群一起玩</a><div class="width"></div><a href="https://support.qq.com/products/664780/" class="external-link" data-url="https://support.qq.com/products/664780/" target="_blank">提需求</a><div class="width"></div><a href="https://goka.top:8080" class="external-link" data-url="https://goka.top:8080" target="_blank">关于我们</a><div class="width"></div><div class="uuid id" id="uuid">id：</div><div class="width"></div><div class="uuid nickName" id="nickName">昵称：</div><div class="width"></div><div class="uuid guildID" id="guildID">公会数字ID：</div><div class="width"></div><div class="width"></div></div></div><script><\/script></div>`;let tt=null;const ot=" "+"2.9.44.8".replace(/^2\.9\./,""),Ni=`
区分出货弹窗和其他弹窗，设置中祈愿台翻翻乐弹窗被分为出货弹窗，请自行设置；
修复在新的机器上面，设置开关不生效的问题；
小抄设置保存在云端，一次设置，到处能用；
预祝大家闪闪节能顺利白嫖游卡；
`.replace(/；/g,"<br>");var mn,gn;(gn=(mn=document.getElementById("createSkinIframeSource"))==null?void 0:mn.contentWindow)==null||gn.document;function Mi(){return window.WDVerSion="1.0.0",window.padding=re.padding||0,window.addEventListener("resize",Gn),new Promise((t,e)=>{function n(){return new Promise(i=>{function o(){var a;typeof JSZipUtils<"u"&&typeof CtrUtil<"u"&&typeof((a=CtrUtil==null?void 0:CtrUtil.Ctr)==null?void 0:a.Ofb_Dec)<"u"&&typeof SystemContext<"u"&&document.getElementById("bgDiv")?Mn(!0).then(i):setTimeout(o,1e3);}o();})}Promise.all([n()]).then(t).catch(e);})}function Pi(){var t,e,n,i;return window.removeEventListener("resize",Gn),window.removeEventListener("resize",Nn),window.removeEventListener("SGSresize",_n),(t=document.getElementById("seatUI"))==null||t.remove(),(e=document.getElementById("rogueUI"))==null||e.remove(),(n=document.getElementById("cusBGDiv"))==null||n.remove(),(i=document.getElementById("createIframe"))==null||i.remove(),k.isFrameAdd=!1,!0}function Gn(){window.innerWidth=document.documentElement.clientWidth-window.padding;}function _n(){window.dispatchEvent(new Event("resize"));}let ht;function Nn(){ht&&clearTimeout(ht),ht=setTimeout(()=>{Hi(),ht=null;},500);}async function Mn(t=!1){var e,n,i,o,a;if(t&&((e=document.getElementById("seatUI"))==null||e.remove(),(n=document.getElementById("rogueUI"))==null||n.remove(),(i=document.getElementById("cusBGDiv"))==null||i.remove(),(o=document.getElementById("createIframe"))==null||o.remove(),k.isFrameAdd=!1),!k.isFrameAdd){window.addEventListener("resize",Nn),SystemContext._gameScreenType=SystemContext.gameScreenType,SystemContext._gameScale=SystemContext.gameScale,Object.defineProperty(SystemContext,"gameScreenType",{get:function(){return this._gameScreenType},set:function(s){this._gameScreenType!==s&&(this._gameScreenType=s,window.dispatchEvent(new Event("SGSresize")));}}),Object.defineProperty(SystemContext,"gameScale",{get:function(){return this._gameScale},set:function(s){this._gameScale!==s&&(this._gameScale=s,window.dispatchEvent(new Event("SGSresize")));}}),window.addEventListener("SGSresize",_n);try{document.getElementById("bgDiv").firstElementChild.draggable=!1,(a=document.querySelector("link[rel=stylesheet]"))==null||a.remove();}catch{}return Qi(),ji(),Ki(),k.isFrameAdd=!0,Ri(!0)}}function ji(){var t=document.getElementById("bgDiv");if(t){var e=document.createElement("div");e.id="cusBGDiv",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.zIndex="0",e.style.pointerEvents="none";var n=document.createElement("video");n.className="bg-ani",n.id="sgsBgVideo",n.autoplay=!0,n.loop=!0,n.muted=!0,n.preload="auto",n.style.setProperty("object-fit","fill","important");var i=document.createElement("img");i.className="bg-ani",i.id="sgsBgIMG",i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i.style.zIndex="1",i.style.position="absolute",i.style.top="0",i.style.left="0",e.appendChild(n),e.appendChild(i),t.appendChild(e),window.dispatchEvent(new Event("resize"));}}function Hi(){if(!SystemContext)return;V.width=SystemContext.gameWidth*SystemContext.gameScale>>0,V.height=SystemContext.gameHeight*SystemContext.gameScale>>0,V.scale=SystemContext.gameScale,V.seatUIs&&V.seatUIs.length>0&&(Pn(),St());let t={width:(SystemContext.gameWidth*SystemContext.gameScale>>0)/window.devicePixelRatio,height:(SystemContext.gameHeight*SystemContext.gameScale>>0)/window.devicePixelRatio};re.padding&&document.getElementById("createIframe")?(document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px",document.getElementById("createIframe").style.height="100%",document.getElementById("createIframe").style.right="0px",document.getElementById("createIframe").style.top="0px"):document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px";let e=document.getElementById("cusBGDiv"),n=document.getElementById("sgsBgVideo"),i=document.getElementById("sgsBgIMG"),o=document.getElementById("seatUI"),a=document.getElementById("rogueUI"),s=((window.innerHeight*window.devicePixelRatio-SystemContext.gameScale*SystemContext.gameHeight)/(2*window.devicePixelRatio)+SystemContext.gameScale*SystemContext.gameHeight/2)/window.devicePixelRatio;e&&(e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.left=window.innerWidth/2+"px",e.style.top=s+"px"),n.width=t.width,n.height=t.height,n.style.left=window.innerWidth/2+"px",n.style.top=s+"px",i.width=t.width,i.height=t.height,o.style.width=`${t.width}px`,o.style.height=`${t.height}px`,o.style.left=window.innerWidth/2+"px",o.style.top=s+"px",a.style.width=`${t.width}px`,a.style.height=`${t.height}px`,a.style.left=window.innerWidth/2+"px",a.style.top=s+"px",V.centerX=window.innerWidth>t.width?t.width/2:window.innerWidth/2,V.centerY=t.height/2;}function Pn(){const t={ScaledHeight:V.selfSeatUiUnscaledHeight*V.scale};let e=V.unscaledWidth*V.scale,n=V.unscaledHeight*V.scale;V.ScaleWidth=e,V.ScaleHeight=n;let i=V.height,o=V.width;var a=t.ScaledHeight,s=0,r=0,l=V.seatUIs.length;if(l!=1){s=e,r=n;var d=[];d=V.seatUIs;var f=d.length-1,c=0,u=0,p=0;f<3?u=f:f==3?u=1:f==4||f==6?u=2:(f==5||f==7)&&(u=3),c=f-u>>1,p=f-c-u,A.isDouDiZhu&&(V.seatUIs[0].actualSeatID==2?(u=1,c=1):V.seatUIs[0].actualSeatID==3&&(u=1,p=1)),A.isShanHeTu&&l==3&&V.friendGeneral==1&&(u=1,p=1);var g=1,y,C,b=0,H=0,ne=0,v=0,D=V.rightBarWidth*V.scale,U=0;if(c>0){var _=s,Z=r*c;for(ne=(i-a-Z)*.25>>0,V.verticalGap=ne,Z+=(c-1)*ne,y=g+c,b=o-_-V.paddingRight*V.scale-D-U,H=(i-a-Z-V.paddingTop*V.scale-V.paddingBottom>>1)+(V.paddingTop+10)*V.scale+Z+V.leftRightTop;g<y;g+=1)C=d[g],H-=n,C.posX=(b-5>>0)/window.devicePixelRatio,C.posY=(H+n>>0)/window.devicePixelRatio,C.DisplayLocation="Right",H-=ne;}if(u>0){var ee=s*u;for(v=(o-D-ee)*.07>>0,V.horizontalGap=v,ee+=(u-1)*v,y=g+u,b=(o-ee-D)/2+ee+(o<=1600?V.paddingLeftTopExtra:0),H=(V.paddingTop+10)*V.scale;g<y;g+=1)C=d[g],b-=e,C.posX=(b>>0)/window.devicePixelRatio,C.posY=(H+n>>0)/window.devicePixelRatio,C.DisplayLocation="Top",b-=v;}var xe=0;if(p>0){var be=r*p;for(ne=(i-a-be)*.25>>0,be+=(p-1)*ne,y=g+p,b=V.paddingLeft*V.scale,H=(i-a-be-V.paddingTop*V.scale-V.paddingBottom>>1)+(V.paddingTop+10)*V.scale+V.leftRightTop;g<y;g+=1)C=d[g],C&&(C.DisplayLocation="Left",C.posX=(b+xe>>0)/window.devicePixelRatio,C.posY=(H+n>>0)/window.devicePixelRatio),H+=r+ne;}}}function Ut(t){if(V.seatUIs=[],St(),t===null)return;let e=A.sequence(A.mySeats[0]);V.seatUIs=e.map(n=>({actualSeatID:A.getOrder(n)+1})),Pn(),St();}function qi(){document.getElementById("sgsBgIMG").src="https://web.sanguosha.com/10/pc/res/assets/runtime/general/maxBig/604701.png",setTimeout(function(){document.getElementById("sgsBgIMG").src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";},2e4);}function Ui(){var t=document.createElement("div");t.id="sidebarHint",t.innerText="拖到这里变为变为侧边栏，再次拖动取消侧边栏",document.body.appendChild(t);}function Qi(){var t=document.createElement("div");t.id="seatUI",t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.pointerEvents="none",t.style.display="";var e=document.createElement("div");e.id="rogueUI",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.pointerEvents="none",e.style.display="",re.seatUISwitch?t.style.display="block":(t.style.display="none",document.querySelectorAll("#seatUI > *:not(.city)").forEach(n=>n.style.display="none")),document.body.appendChild(t),document.body.appendChild(e);}function zi(){for(let t=0;t<=7;t++){let e="or"+(t+1);document.getElementById(e).style.display="block";}}function Fi(t){for(let e=7;e>=t;e--){let n="or"+(e+1);document.getElementById(n).style.display="none";}}function Ki(){let t=document.getElementById("createIframe");if(!t){t=document.createElement("div"),t.id="createIframe",t.id="createIframe",t.className="createIframe",t.style.position="fixed",t.style.overflow="hidden",t.style.resize="vertical",t.style.top="31px",t.style.right="155px",t.style.width="230px",t.style.height="500px",t.style.zIndex="10000000000",t.style.display="flex",t.style.flexDirection="column",t.style.color="#f2de9c",t.style.background="rgb(35, 32, 29)",t.style.userSelect="none",t.style.textAlign="left",t.style.transition="height 200ms",t.style.borderRadius="8px",t.style.transformOrigin="top right",t.style.transform="translate(0px, 0px)";var e=document.createElement("p");e.id="header",e.className="header",e.style.margin="1px",e.style.userSelect="none",e.style.cursor="grab",e.style.display="flex",e.style.alignItems="center",e.style.fontSize="20px",e.style.borderRadius="5px";var n=document.createElement("span");n.id="title",n.style="margin-right: auto;",n.innerText="三国杀打小抄"+ot,t.appendChild(e),t.onmouseover=function(){document.querySelectorAll("div.city").forEach(d=>{d.classList.remove("hide"),d.classList.add("show");});},t.onmouseout=function(){document.querySelectorAll("div.city").forEach(d=>{d.classList.remove("show"),d.classList.add("hide");});};var i=document.createElement("button");i.innerText="-",i.id="toggle-me",i.style="text-align: center;color: #f2de9c;background: rgb(35, 32, 29);border-radius: 6px;width: 26px;height: 26px;border: 1px solid rgb(212, 212, 162);cursor: pointer;user-select: none;background: rgb(107, 30, 30);display: flex;align-items: center;justify-content: center;margin: 1px;font-size: 20px;",i.type="button",i.addEventListener("mouseover",function(){i.style.backgroundColor="rgb(130, 30, 30)";}),i.addEventListener("mouseout",function(){i.style.backgroundColor="rgb(107, 30, 30)";}),e.appendChild(n),e.appendChild(i),localStorage.getItem("DXCVersion")!=ot&&(Ve(`小抄已经更新到${ot}<br>${Ni}`,"acTooltip",3e4,"green"),localStorage.setItem("DXCVersion",ot)),document.body.appendChild(t),tt=document.createElement("div"),tt.style="border: none;width: 230px;height: 100%;margin: 0px;overflow-y: auto;overflow-x: hidden;",tt.id="iframe-source",t.append(tt),tt.innerHTML=_i,tt.querySelectorAll("script").forEach(l=>{const d=document.createElement("script");l.src?(d.src=l.src,d.async=l.async):d.textContent=l.textContent,document.body.appendChild(d),l.remove();});const a=document.querySelectorAll('input[id$="Switch"]'),s=document.querySelectorAll(".slider");a.forEach((l,d)=>{const f=s[d];l.addEventListener("change",c=>{const u=c.target.checked;try{gsap.to(f,{duration:.4,ease:"power2.inOut",css:{"--slider-position":u?"30px":"2px"},onStart:()=>{gsap.to(f,{scale:1.1,duration:.2,ease:"power1.inOut"});},onComplete:()=>{gsap.to(f,{scale:1,duration:.2,ease:"power1.inOut"});}}),gsap.to(f,{duration:.4,ease:"power2.inOut",boxShadow:u?"0 0 15px rgba(255, 204, 0, 1)":"0 0 0 rgba(0, 0, 0, 0)",background:u?"linear-gradient(to right, #ff7b54, #ffcc00)":"rgb(35, 32, 29)"});}catch(p){console.error("GSAP animation failed:",p);}});}),document.querySelectorAll(".panel-header").forEach(l=>{l.addEventListener("click",function(){const d=this.nextElementSibling;this.classList.toggle("active"),d.style.maxHeight?d.style.maxHeight=null:d.style.maxHeight=d.scrollHeight+"px";const f=new MutationObserver(()=>{d.style.maxHeight&&(d.style.maxHeight=d.scrollHeight+"px");});f.observe(d,{childList:!0,subtree:!0,characterData:!0}),d.style.maxHeight||f.disconnect();});}),document.querySelectorAll(".laya-header")[0].click(),document.querySelectorAll(".question-mark").forEach(function(l){l.addEventListener("mouseenter",function(d){let f=document.createElement("div");f.classList.add("tooltip","top"),f.textContent=l.getAttribute("data-tooltip"),document.body.appendChild(f);const c=l.getBoundingClientRect();f.style.left=`${c.left+window.scrollX+c.width/2-f.offsetWidth}px`,f.style.top=`${c.top+window.scrollY-f.offsetHeight-8}px`,f.classList.add("visible"),l.addEventListener("mouseleave",function(){f.classList.remove("visible"),setTimeout(()=>{f.remove();},100);});});});}Ui(),Vi(),Yi(),yi();}function Vi(){var t=document.getElementById("toggle-me");t.onclick=function(){k.closeIframe=!k.closeIframe,k.closeIframe?(document.getElementById("createIframe").style.top="31px",document.getElementById("createIframe").style.right="155px",document.getElementById("iframe-source").style.display="none",t.innerText="+",document.getElementById("createIframe").style.height="30px",document.getElementById("createIframe").style.opacity="0.6",document.getElementById("createIframe").style.width="75px",document.getElementById("title").innerText="小抄",document.getElementById("createIframe").style.resize="none",re.padding&&(re.padding=0,window.dispatchEvent(new Event("resize")),dn=0,un=0,document.getElementById("createIframe").style.transform=`translate(${dn}px, ${un}px)`)):(document.getElementById("iframe-source").style.display="block",t.innerText="-",document.getElementById("createIframe").style.height="500px",document.getElementById("createIframe").style.opacity="1",document.getElementById("createIframe").style.width="230px",document.getElementById("title").innerText="三国杀打小抄"+ot,document.getElementById("createIframe").style.resize="vertical");},document.getElementById("autoInviteSwitch").addEventListener("click",n=>{var o;if(n.target.checked){var i=(o=document.getElementById("inviteName"))==null?void 0:o.value;typeof i=="string"&&i.length!==0&&(k.inviteName=i,Ke("INVITE_NAME",k.inviteName),pe(`为目前机器所有账号绑定助力${k.inviteName}，如需更改/删除，更改/删除昵称重新打开开关`)),kn(k.inviteName.trim()||k.nickname);}else jt("INVITE_NAME");}),document.getElementById("guanxing").onmousedown=function(){const n=ln(Bt(M.gxjson),"myWindowGuanXing","观星");cn(n);},document.getElementById("gamerecord").onclick=async function(){for(this.disabled=!0,Ht(k.userID);Le.req;)await me(500);this.disabled=!1,k.v&&await ni();const n=ln(Un(JSON.stringify(Le)),"myWindowGameRecord","游戏记录");cn(n);},document.getElementById("mizhu").onmousedown=function(){let n=document.querySelectorAll(".mizhu");A.mySeats.length<=1?(n.forEach(i=>i.style.display="none"),an(Array.from(te.shoupai(A.mySeats[0]),i=>de[i].number))):A.mySeats.forEach((i,o)=>{n[o].style.display="block",n[o].innerText=A.name(i),n[o].onclick=()=>{an(Array.from(te.shoupai(i),a=>de[a].number));},o==0&&n[o].click();});};function e(n,i,r){var l,d,f,c;var a=n.target,s=a.checked,r=a.id;if(!(r==="autoBotSwitch"||r==="autoHGSwitch"))if(re[r]=s,r=="skinSwitch")document.getElementById("skinStateButton").style.display=s?"block":"none";else if(r=="seatUISwitch")document.getElementById("seatUI").style.display=s?"block":"none";else if(r=="skinPaperSwitch"){let u=(d=(l=T.find("SceneLayer",null))==null?void 0:l.constructor)==null?void 0:d.name;document.getElementById("paperStateButton").style.display=s?"block":"none",ft.switch(s&&(Je.includes(u)||re.allPaperSwitch&&!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(u)));}else if(r=="allPaperSwitch"){let u=(c=(f=T.find("SceneLayer",null))==null?void 0:f.constructor)==null?void 0:c.name;ft.switch(s&&!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(u)||Je.includes(u));}else r=="rogueCitySwitch"&&At(s?V.cities:"");}if(window.padding==0){console.warn("closesidebar");var t=document.getElementById("toggle-me");console.warn("toggle"),t.click();}window.dispatchEvent(new Event("resize")),document.querySelectorAll(".switch").forEach(n=>n.addEventListener("change",e)),document.getElementById("ACSubmit").onclick=bn,Ji(),Zi();}function Ji(){let t=document.getElementById("openStore");t.onclick=function(){T.class("GameEventDispatcher").ShowWindow("RogueJiShiWindow"),Ve("满足以下条件购买技能或者装备可跳关<br>1、已经进入对局<br>2、商店有可替换的装备/技能<br>例如身上有麒麟弓，商店有贯石斧<br>购买完成之后，投降之后会显示替换提示<br>","acTooltip",1e4,"green",!1);};}function Zi(){document.querySelectorAll(".external-link").forEach(t=>{t.addEventListener("click",async e=>{e.preventDefault();const n=t.dataset.url;if(window.WEIDUAN)try{const{shell:o}=require("electron");o.openExternal(n);return}catch{console.warn("Electron API调用失败，回退通用方法");}const i=window.open(n,"_blank");(!i||i.closed)&&$i(targetUrl);});});}const $i=t=>{const e=`
    <div style="${modal.style.cssText}">
        <p>跳转的网站被您屏蔽了，请手动访问：<a href="${t}" target="_blank">${t}</a></p>
    </div>
`;document.body.insertAdjacentHTML("beforeend",e);};function ln(t,e,n){let i=document.getElementById("myWindow"+e);if(i)return i.style.display="block",i;const o=document.createElement("div");o.classList.add("window"),o.id=e;const a=document.createElement("div");a.classList.add("window-header");const s=document.createElement("div");s.classList.add("title"),s.innerText=n;const r=document.createElement("div");r.classList.add("controls");const l=document.createElement("button");l.innerText="⬜";const d=document.createElement("button");d.innerText="❌",r.appendChild(l),r.appendChild(d),a.appendChild(s),a.appendChild(r);const f=document.createElement("iframe");return f.classList.add("window-content"),f.srcdoc=`
    <html>
      <head><meta charset="utf-8" /><title>${e}</title></head>
      <body>${t}</body>
    </html>
  `,o.appendChild(a),o.appendChild(f),document.body.appendChild(o),{windowDiv:o,maximizeBtn:l,closeBtn:d}}function cn(t){const{windowDiv:e,maximizeBtn:n,closeBtn:i}=t;let o=!1;n.addEventListener("click",()=>{o?e.classList.remove("fullscreen"):e.classList.add("fullscreen"),o=!o;}),i.addEventListener("click",()=>{e.style.display="none";});}let dn=0,un=0;function Yi(){const t=document.getElementById("header"),e=document.getElementById("createIframe"),n=document.getElementById("sidebarHint");let i=!1,o=0,a=0,s=0,r=0,l=!1;const d=u=>{t.style.cursor="grabbing",i=!0,o=u.clientX||u.touches[0].clientX,a=u.clientY||u.touches[0].clientY,e.style.userSelect="none",e.style.willChange="transform",document.addEventListener("mousemove",f),document.addEventListener("mouseup",c),document.addEventListener("touchmove",f),document.addEventListener("touchend",c);};t.addEventListener("mousedown",d),t.addEventListener("touchstart",d);function f(u){if(!i)return;n.style.display="flex";const p=u.clientX||u.touches[0].clientX,g=u.clientY||u.touches[0].clientY,y=p-o,C=g-a;s+=y,r+=C,re.padding&&(re.padding=0,e.style.height="500px",window.dispatchEvent(new Event("resize"))),l||(l=!0,requestAnimationFrame(()=>{e.style.transform=`translate(${s}px, ${r}px)`,l=!1;})),window.innerWidth-p<25?n.style.backgroundColor="rgba(55, 40, 32, 1)":n.style.backgroundColor="rgba(55, 40, 32, 0.8)",o=p,a=g;}function c(u){n.style.display="none",t.style.cursor="grab",i=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",c),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",c),e.style.willChange="auto",window.innerWidth-(u.clientX||u.touches[0].clientX)<25&&t.id==="header"&&(re.padding||(k.closeIframe&&document.getElementById("toggle-me").click(),re.padding=232,window.dispatchEvent(new Event("resize")),s=0,r=0,e.style.transform=`translate(${s}px, ${r}px)`));}}function Pt(t,e){let{name:n,number:i,color:o}=de[t??0];if(t!==void 0&&(!t||!n||ge.name[n]===void 0))return;let a=te.unknown;(t?[n]:Object.keys(ge.name)).forEach(s=>{let r=a.filter(d=>ge.name[s].has(d)).length,l=document.getElementById(s);l.textContent=r>1?r+s:s,l.disabled=r<=0;}),(t?[5,6].filter(s=>ge.color[s].has(t)).concat(o):[1,2,3,4,5,6]).forEach(s=>{var d;let r=a.filter(f=>ge.color[s].has(f)).length,l=document.getElementById(["","heart","club","spade","diamond","hongsha","heisha"][s]);l.innerHTML=(d=l.innerHTML)==null?void 0:d.replace(/-?[0-9]+/,String(r));}),t?ge.query.has(t)&&ge[t].plot(e==0?0:1):ge.draw();}function Xi(){for(let t=1;t<=3;t++)document.getElementById("type"+t).innerHTML="";for(let t of document.getElementsByClassName("order-body"))t.innerHTML="",t.title="一二三四五六七八"[t.id.slice(-1)]??t.title;for(let t in ge.name){let e=document.getElementById("type"+de[[...ge.name[t]][0]].type),n=document.createElement("button");n.id=t,n.className="cardType",n.innerText=t,n.onclick=()=>{ge.queryone("name",t);},e.appendChild(n);}V.seatUIs=[],St(),Ot();}var es=[1562902854,1678425373];const fn=function(){const t=typeof window.requestIdleCallback=="function";return console.warn("Use IdleCallback",t),function(e,n=500){if(t){const i=window.requestIdleCallback(e),o=setTimeout(()=>{window.cancelIdleCallback(i),e();},n);return ()=>clearTimeout(o)}else return setTimeout(e,0)}}();qt(t=>{const e=k.recGoods[t.secId];if(e&&e.length>0){for(let n of e)Sn(t.secId,n.GoodsBaseID,t.openTime,t.levelId,n.ChangeCount);delete k.recGoods[t.secId];}},6e4);function ts(t){var o,a,s,r,l,d,f,c,u,p,g,y,C,b,H,ne,v,D,U,_,Z,ee,xe,be,Se,I,O,K,Y,h,m,w,S,E,B,Q;try{if(!t)return;if((o=t.startsWith)!=null&&o.call(t,"socket连接关闭")){tn({content:"您的二次密码认证错误，请稍后再试"},"确定");return}if((a=t.startsWith)!=null&&a.call(t,"--checkPlayChatFast msg=INFO:")){let x=atob(t.slice(29,t.indexOf(" soundUrl",29))),[R,W,G,F]=x.split(":").map(X=>isNaN(Number(X))?X:Number(X));if(console.warn(x,{[R]:W,[G]:F}),R=="mainSeatID"){let X=T.order.indexOf(W);X>=0&&(T.order.splice(X,1),T.order.push(W),T.seatUIs()),ue(()=>A.mySeats[0]>=0).then(()=>{var z,ye;((ye=(z=A.seatUIs[0])==null?void 0:z.seat)==null?void 0:ye[G])==F&&T.chat(`sub-SeatID:${A.mySeats[0]}  :${G}:${F}`,"INFO");});}else if(R="sub-SeatID"){let X=T.order.indexOf(W);X>=0&&(T.order.splice(X,1),T.order.splice(-1,0,W),T.seatUIs());}}else if((s=t.startsWith)!=null&&s.call(t,"SwitchScene"))fn(()=>{var R,W;let x=T.scene=t.slice(t.lastIndexOf("-")+1);j.end(Je.includes(x)),re.skinPaperSwitch&&ft.switch(re.allPaperSwitch?!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(x):Je.includes(x)),x=="TableScene"?(fi(),k.autoBotSwitch&&ie.delay("auto",()=>ze(()=>k.autoBotSwitch&&T.readyStart(),20),8e3)):x=="HallScene"?(k.autoBotSwitch===!0||k.autoBotSwitch===28)&&(pe("5秒后开始酒馆自动挂机"),ie.delay("auto",()=>ze(()=>(k.autoBotSwitch===!0||k.autoBotSwitch===28)&&T.newRoom(),10,1e3),5e3)):["NewPaiWeiScene","DouDiZhu2023Scene","RogueLike1v1Scene","RogueLikeBigMapScene"].some(G=>t.endsWith(G))&&((k.autoBotSwitch===!0||k.autoBotSwitch===28)&&((R=document.getElementById("autoBotSwitch"))==null||R.click()),(k.autoBotSwitch===9||k.autoBotSwitch===29)&&((W=document.getElementById("autoHGSwitch"))==null||W.click()));});else if(re.skipWindowSwitch&&["TianShuWindow","RogueLike1v1ZhanJiWindow","GameResultWindow","GeneralOpenResultWindow","GameMvpWindow","GameZhanJiWindow","SkinOpenResultWindowNew","OldbackOneClickDrawAwdWin","VersionNoticeWindow","AdPushWindow"].includes(t)){let x=t=="GetPropSpecialWindow"?5:1,R=t=="TianShuWindow"?W=>{var G;return (W==null?void 0:W.type)==6?(W.type=0,(G=W.Close)==null?void 0:G.call(W)):"false"}:t=="GetPropSpecialWindow"?W=>{var G,F;return (G=W==null?void 0:W.Hide)==null||G.call(W),(F=W==null?void 0:W.Close)==null?void 0:F.call(W)}:t=="GameResultWindow"?W=>me(500).then(()=>{var G;return (G=W==null?void 0:W.laterClose)==null?void 0:G.call(W)}):t=="RogueLike1v1ZhanJiWindow"?W=>me(500).then(()=>{var G;return (G=W==null?void 0:W.onClickClose)==null?void 0:G.call(W)}):t=="AdPushWindow"?W=>(W==null||W.curViewList.forEach(G=>{var F;return (F=G==null?void 0:G.closeClicker)==null?void 0:F.call(G)}),pe("小抄已经为你跳过广告和祈愿台出货播报")):W=>{var G;return (G=(W==null?void 0:W.laterClose)??(W==null?void 0:W.Close))==null?void 0:G.bind(W)()};ze(()=>ue(()=>T.find(null,t),10,200*x).then(W=>Array.isArray(W)?W.every(R):W!=null&&W.Close?R(W):"done"),x,1e3);}else if(re.skipProbWindowSwitch&&["GetPropSpecialWindow"].includes(t)){let x=5,R=W=>{var G,F;return (G=W==null?void 0:W.Hide)==null||G.call(W),(F=W==null?void 0:W.Close)==null||F.call(W),!0};ze(()=>ue(()=>T.find(null,t),10,200*x).then(W=>Array.isArray(W)?W.every(R):W!=null&&W.Close?R(W):"done"),x,1e3);}if(k.autoBotSwitch&&["GameResultWindow","GameMvpWindow","GameZhanJiWindow"].includes(t)){let x=t=="GameResultWindow"?R=>me(500).then(()=>{var W;return (W=R==null?void 0:R.laterClose)==null?void 0:W.call(R)}):R=>{var W;return (W=(R==null?void 0:R.laterClose)??(R==null?void 0:R.Close))==null?void 0:W.bind(R)()};ze(()=>ue(()=>T.find(null,t),10,200).then(R=>Array.isArray(R)?R.every(x):R!=null&&R.Close?x(R):"done"),1,1e3);}else if((r=t.endsWith)!=null&&r.call(t,"View"))t=="VuplexWebView"&&ie.trigger("VuplexWebView");else if((l=t.endsWith)!=null&&l.call(t,"Window"))t=="MailWindow"?In():t=="ChangeSkinWindow"?re.skinSwitch&&ue(()=>T.find("WindowLayer","ChangeSkinWindow","selectView"),50,100).then(x=>{var W,G,F,X;if(!((W=x==null?void 0:x.itemList)!=null&&W.length))return;let R=[(G=x.generalInfo)==null?void 0:G.Id,...((F=x.generalInfo)==null?void 0:F.GeneralSkinParentIDs)||[]];((X=x==null?void 0:x.itemList)==null?void 0:X.length)>1&&x.itemList.forEach(z=>{z.dynamicState=R.includes(z.SkinID/100>>0)?z.hasSkin?z.dynamicState?-1:-2:-3:-4,z.hasSkin=z.bg.mouseEnabled=!0,z.blackbg.visible=z.isUsing=!1,z.timeBg.visible=z.composeBg.visible=z.composeIcon.visible=z.composeTxt1.visible=z.composeTxt2.visible=z.composeTxt.visible=z.timeLimiteTxt.visible=!1;});}):t=="SkinInfoWindow"?re.skinPaperSwitch&&li():t=="BlessNewWindow"?Jt():t=="SelectSkinWindow"?k.autoBotSwitch!=9&&ue(()=>T.find("WindowLayer",t)).then(x=>x==null?void 0:x.Close()):t=="SelectCardWindow"?T.flag&&!(((f=(d=A.seatUIs[0])==null?void 0:d.seat)==null?void 0:f.OnlineState)>1)&&si(!0,!0):t=="WuGuFengDengWindow"&&T.flag&&!(((u=(c=A.seatUIs[0])==null?void 0:c.seat)==null?void 0:u.OnlineState)>1)?T.wugu():["SelectGeneralWindow","SelectGeneralHappyWindow","SelectCountryWarGeneralWindow"].includes(t)&&k.autoBotSwitch&&setTimeout(()=>{ue(()=>T.find("WindowLayer",t)).then(async x=>{var G,F;if(!((G=x==null?void 0:x.generalUis)!=null&&G.length))return;if(t=="SelectCountryWarGeneralWindow"){for(let X of x.generalUis)X!=null&&X.Card&&(X!=null&&X.CanSelect)&&(x.onClickGeneralCard(X),await me(1e3));await me(1e3),(F=x.confirmBtnEvent)==null||F.call(x);return}let R=-1,W=null;x.generalUis.some(X=>{var ye;if(X!=null&&X.dianJiangSk)return W=X;let z=((ye=X==null?void 0:X.generalInfo)==null?void 0:ye.quality)||0;z>R&&(R=z,W=X);}),W==null||W.sureBtnClick(),k.autoBotSwitch!=9&&setTimeout(()=>W==null?void 0:W.sureBtnClick(),500);});},3e3);else if(t.className===void 0&&!["ClientGeneralSkinReq"].includes((p=t.constructor)==null?void 0:p.name))return;re.killEffectSwitch&&t.className=="CClientGameRewardPointNTF"&&(t.Type=0);let{ProtoObj:q,className:N,SeatID:ae,SrcSeatID:le,targetSeatID:oe,SpellID:L,Param:he,Params:P,Datas:we,DataCount:ns,CardCount:We,CardIDs:J,FromID:Ge,FromZone:fe,FromPosition:Ie,FromZoneParam:Qt,ToID:qe,ToZone:ce,ToPosition:vt,ToZoneParam:zt,MoveType:Ue,Type:_e}=t;if(N||(N=(g=t.constructor)==null?void 0:g.name),!k.userID&&t.userID&&["ClientLoginRep","ClientUserDataCounterNtf","ClinetNetSpeedNtf","SmsgUpdateTaskListToClient","ClientGuildMemberChangeNtf"].includes(N)){if(Object.assign(k,{userID:t.userID,nickname:t.Nickname||k.nickname||"",account:t.Account||localStorage.LastUserName||localStorage.SGS_LASTLOGIN_ACCOUNT||localStorage.SGS_LASTLOGIN_ACCOUNT1||k.account||""}),k.UsedGeneralSkinID=Pe(k.account+"::UsedGeneralSkinID",k.UsedGeneralSkinID),Object.assign(ft.res,Pe(k.userID+"::paperRes",{},!0)),di(),re.skipWindowSwitch&&ui(),es.includes(k.userID))return;Promise.all([Mn(),ue(()=>{var ye;const x=T.get("QldjChooseRuleWindow");let{clientId:R,nickname:W,guildID:G,guildName:F,Level:X,vipLevel:z}=((ye=x==null?void 0:x.seat)==null?void 0:ye.playerInfo)||{};return T.del("QldjChooseRuleWindow"),R!=k.userID||!W||!F&&G?null:(Object.assign(k,{nickname:W,guildID:G,guildName:F,Level:X,vipLevel:z}),W)},30,1e3)]).then(()=>{re.autoSignSwitch&&mi(re.autoSignSkipSwitch),hi(k.userID);let x=document.getElementById("uuid");x.innerText="id："+k.userID,x.onclick=function(){Xe(k.userID,!1),x.innerText="复制成功",setTimeout(()=>{x.textContent="id："+k.userID;},"500");};let R=document.getElementById("nickName");R.innerText="昵称："+k.nickname,R.onclick=function(){Xe(k.nickname,!1),R.innerText="复制成功",setTimeout(()=>{R.textContent="昵称："+k.nickname;},"500");};let W=document.getElementById("guildID");W.innerText="公会数字ID："+k.guildID,Kn(),document.getElementById("inviteName").setAttribute("placeholder",k.nickname||""),Pe("INVITE_NAME")&&Pe("INVITE_NAME")!=k.Nickname&&(document.getElementById("inviteName").value=Pe("INVITE_NAME"));async function G(F=2e4){var ye;let z=0;for(;!k.nickname||!k.userID;)if(await new Promise(Ze=>setTimeout(Ze,2e3)),z+=2e3,z>=F){pe("没办法获取到昵称用于助力 请重新登录");return}kn(((ye=k.inviteName)==null?void 0:ye.trim())||k.nickname);}Date.now()<new Date("2024-12-15")&&re.autoInviteSwitch&&G();});}if(N=="ClientGeneralSkinRep"){A.mySeats[0]===void 0&&_e==5&&t.ClientID<10&&(A.setMyID(t.ClientID),Ut());let x=t.GeneralSkinList[0],R=A.find(A.mySeats[0],x.GeneralID,!0);if(x.GeneralID!=R&&re.skinStateBlockSwitch&&(x.state=0),re.skinSwitch&&R){if([46,479].includes(x.GeneralID)&&qi(),k.UsedGeneralSkinID.UsedGeneralSkinID[R]){let[G,F]=String(k.UsedGeneralSkinID.UsedGeneralSkinID[R]).split("_").map(X=>parseInt(X));x.SkinID=G,x.skin_type=F||0;}x.state=re.skinStateSwitch?1:0;const W=T.class("GeneralSkinManager");(W.SelfSkinList.every(({baseInfo:G})=>G.firstUsedEffect!=x.SkinID)||(y=W._GetOnlineSKinList)!=null&&y.call(W,x.GeneralID).every(({skinID:G})=>G!=x.SkinID))&&requestAnimationFrame(()=>{W.generalSkinOwnHT[x.GeneralID]=0;});}}else if(N=="ClientGeneralSkinReq"){if(re.skinSwitch){let{RealGeneralID:x,SkinID:R,state:W}=t.SkinItem;if(!(W<0))return;W<-2&&(t.SkinItem.SkinID=0),t.SkinItem.state=W<-1?0:1;let[G,F]=String(k.UsedGeneralSkinID.UsedGeneralSkinID[x]).split("_").map(Number);if(G==R)if(R in M.skinSP)R=R+"_"+M.skinSP[R][(F||1)%M.skinSP[R].length];else return;k.UsedGeneralSkinID.UsedGeneralSkinID[x]=R,Ke(k.account+"::UsedGeneralSkinID",k.UsedGeneralSkinID);}}else if(N!="MsgReconnectGame"){if(N=="ClientOfficerInfoRep")k.curOfficerLv=t.curOfficerLv;else if(N=="decodeSSCChatmsgNtf")q.scene==11&&(q.scene=2);else if(N=="ClientRoleGeneralStarRep")re.generalSwitch&&(t.Star>=0&&(t.Star=4),q.star>=0&&(q.star=4));else if(N=="ClientGameRecordInfoRep")(q==null?void 0:q.query_uid)==k.userID&&[26,35,44,5,7].includes(q==null?void 0:q.id)&&((C=Le==null?void 0:Le.req)==null||C.delete(q.id),((b=Le.req)==null?void 0:b.size)==0&&delete Le.req,(H=q==null?void 0:q.all_record)!=null&&H.length&&ti(q.id||0,q.all_record));else if(N=="DbsCcUserGoodshintNtf")_e==2010&&typeof t.GoodsList=="object"&&(k.goods=xi(k.goods,t.GoodsList)),(_e==58||_e==65)&&ie.delay("tongxin",()=>Jt(),5e3),_e==5&&typeof t.GoodsList=="object"&&(k.CDKgoods=t.GoodsList);else if(N=="decodeClientSecretInfoRep"){if(Object.keys(k.goods).length>0){M.currentSec=q.secId;for(let x of k.goods)An(M.currentSec,x.GoodsBaseID,x.ChangeCount,q.openTime),(x.GoodsBaseID==11180||Ln(x.GoodsBaseID))&&Sn(q.secId,x.GoodsBaseID,q.openTime,q.levelId,x.ChangeCount);}k.goods=[];}else if(N=="ClientPickupgiftbagRep"&&re.CDKNotificationSwitch){if(t.CDKey!=""&&!/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]+$/.test(t.CDKey)&&(t.Result==1||t.Result==2)){for(let x of M.CDKDict)if(Gi(x.dataInfo,k.CDKgoods)){x.cdk=t.CDKey,ii(x);break}}}else if(N=="decodeClientTavernInfoRep"){let x=((ne=q==null?void 0:q.tavern_info)==null?void 0:ne.day_quest_finished_cnt)??0;if(k.autoBotStatus=30-x,k.autoBotInfinite||document.querySelector(".status").style.setProperty("--bot-status",`"${k.autoBotStatus.toString().padStart(2,"0")}"`),x>=30){let R=document.getElementById("autoBotSwitch");R!=null&&R.checked&&!k.autoBotInfinite&&R.click(),pe(`今日已获得亲密度：${x}<br>恭喜你完成任务~`);}else x>0&&pe(`今日已获得亲密度：${x}，还差 ${30-x} 亲密度<br>继续努力吧~`);}else if(N=="MsgHeartAliveRep")ie.sync(t);else if(N=="ClientSecKillInfoRep")Ti(t.Data);else if(N=="decodeRogueLikeDataSync")Ot(q);else if(N=="ClientActivitysetDataRep")fn(()=>{Ot();});else if(N=="decodeRogueLikeGameOverRep")document.getElementById("chongsheng").innerText="重生是否发动：是";else if(N=="SmsgGamePlayerDead")ae==A.mySeats[0]&&(k.autoBotSwitch===!0&&!k.autoBotInfinite||k.autoBotSwitch===28&&A.seatUIs.slice(1).every(({ai:x})=>x))&&setTimeout(()=>{var x,R;A.seatUIs.reduce((W,{seat:G,ai:F},X,z)=>W+(G!=null&&G.figure&&G.figure==z[0].figure||F<2?1:-1)*(G==null?void 0:G.currentHp),0)<0&&((R=(x=T.gamescene)==null?void 0:x.topMenu)==null||R.onClickBack(),tn({title:"退出游戏"},"确定",!0,5e3));},5e3);else if(N=="MsgGameDealCharacter"){if(k.userID==1099193522&&typeof Allows<"u"&&typeof _e<"u"&&_e==1){var e=Math.floor(Math.random()*Allows.length+1);document.getElementById("title").innerText="选"+e;}}else if(N=="GsCUpdateRoleDataNtf")A.mySeats[0]===void 0&&t.StateID===58&&(A.setMyID(ae),console.warn(N,"游戏人数："+A.size+", 我的座位："+A.mySeats,A.seatIDs));else if(N=="GsCFirstPhaseRole")ae!==void 0&&(A.firstID=ae,console.warn("先手位置:"+A.firstID));else if(N=="MsgGameRoundNtf")t.isPassed&&(j.isPassed=t.isPassed);else if(!(N=="MsgGameOver"||N=="ClientRecommendShopItemRep"||N=="ClientLeavetableRep")){if(N=="decodeRougeBaseInfoRep")V.friendGeneral=((v=q==null?void 0:q.friendGeneral)==null?void 0:v.length)??V.friendGeneral;else if(N=="MsgGamePlayCardNtf")j.ready(t.CardList);else if(N=="SmsgGameSetCharacter")A.mySeats[0]===void 0&&A.isDouDiZhu&&t.Infos.length==1&&A.setMyID(t.Infos[0].SeatID),t.Infos.forEach(({SeatID:x,CharacterID:R})=>{A.setGeneral(x,R);});else if(N=="GsCGuoZhanSetCharacter")(D=t.GeneralData)==null||D.forEach(({index:x,cardID:R})=>{A.setGeneral(ae,R,x);});else if(N=="MsgGameTurnNtf")j.enter(t.TurnCnt);else if(N=="GsCGamephaseNtf")j.enter(null,t.Round,ae);else if(N=="GsCUpdateRoleDataExNtf")j.currentID==ae&&t.DataID==1&&Array.isArray(t.Datas)&&(document.getElementById("sha").innerText="可出杀次数："+Math.max(0,we[2]-we[1]),ae==A.mySeats[0]&&A.isShanHeTu&&((U=ve.itemId)!=null&&U.includes(2042))&&(we[1]==0&&(ve.previousData=0),ve.sanBanFu+=we[1]-ve.previousData,ve.previousData=we[1],ve.sanBanFu%3==0?document.getElementById("sanBanFu").innerText="三板斧计数器":document.getElementById("sanBanFu").innerText="三板斧计数器："+((Number(ve.sanBanFu)-1)%3+1)));else if(N=="GsCTriggerSpellNew"){if(re.wuxieSwitch){const x=G=>{var F;return G?`<font color='#FFFF00' href='1|${G}|0|2'>"${(F=M.spellDict[G])==null?void 0:F.name}"</font>`:"未知技能"},R=G=>(F=>F?`<font color='#FFFF00' >${F}${G==A.mySeats[0]?"(你)":""}</font>`:"")(A.name(G,null));let W=(_=t.TriggerSpellData)!=null&&_.length?t.TriggerSpellData:[{}];if(!W.length)return;T.trace("<font color='#00FFFF'>&gt;&gt;</font>"+((Z=W[0])!=null&&Z.SpellId?"":((G,F)=>G&&F?G+"的"+F:G||F)(R(t.SrcSpellCasterSeat),t.SrcSpellID?x(t.SrcSpellID):""))+"<font color='#00FFFF'>&gt;</font>"+(G=>G?"向"+G:"")(R(t.TriggerSeatId))+"询问"+W.map(({SpellId:G,SeatId:F,Targets:X})=>((z,ye)=>ye?`对${ye}的`:z?`${z}的`:"")(F!=t.TriggerSeatId?R(F):"",(X==null?void 0:X.map(R).join(","))||"")+x(G)).join(","));}}else if(N=="ClientHappyGetFriendHandcardRep")A.find(t.seatId,[7004,2087,3048])&&new te(t.seatId).show(t.Cards);else if(N=="PubGsCUseCard")A.mySeats[0]==ae&&nn([t.CardID]),j.currentID==ae&&A.find(j.currentID,[7003,2086,3047])&&t.useType==1&&t.fromZone!=1&&!t.isSend?(j.spellSpace[7011]||(j.spellSpace[7011]={count:0,color:new Set}),de[t.CardID].type!=3&&j.spellSpace[7011].count++,j.spellSpace[7011].color.add(de[t.CardID].c),document.getElementById("suit").innerHTML="["+j.spellSpace[7011].count+"]"+Array.from(j.spellSpace[7011].color).join("")):j.currentID==ae&&A.find(j.currentID,[330,1068])&&t.useType==1&&!t.isSend&&(document.getElementById("suit").innerHTML=de[t.CardID].cn);else if(N=="PubGsCUseSpell"){if(A.mySeats[0]==ae&&J.length==1&&nn(J),L==3324)document.getElementById("chongsheng").innerText="重生是否发动：是";else if(L==2143)j.spellSpace[L]||(j.spellSpace[L]=new Set),J.forEach(x=>j.spellSpace[L].add(de[x].c)),document.getElementById("suit").innerHTML=Array.from(j.spellSpace[L]).join("");else if([3157,3511].includes(L)&&J.filter(x=>x>0).length!=0&&(le==A.mySeats[0]||k.v))j[L]=J;else if([3193,3185,3138].includes(L)||L==3161)j.phase--;else if(L==3338&&J.length!=0&&k.v&&A.generals[A.mySeats[0]]==573){j.spellSpace[L]||(j.spellSpace[L]=new Set);const x=J[0]+"-"+J[1];j.spellSpace[L].has(x)||(j.spellSpace[L].add(x),console.warn("new combination",j.spellSpace[L]),ie.delay("baichu",()=>Ct("新组合"),500));}}else if(N=="GsCRoleOptTargetNtf")if(L==945&&he==0&&(P==null?void 0:P.length)>0)Ei(P.map(x=>de[x].number),k.v&&ae==A.mySeats[0]);else if(L==3440&&A.mySeats.includes(ae)&&he==0&&(P==null?void 0:P.length)>0)_e==28?rn(P.map(x=>de[x].number),new te(ae).cards.map(x=>de[x.id].number)):rn();else if(L==11003&&he==0&&(P==null?void 0:P.length)>0&&le!=A.mySeats[0]&&re.v)document.getElementById("result").innerHTML='<span class="textRes"> 【锻造】<br>'+P.map(x=>de[x].ncn).join("<br>")+"</span>";else if([7016,7017].includes(L)&&(P==null?void 0:P.length)>0&&(le==A.mySeats[0]||k.v)){j[L]=P.slice();let x=Array.from(new Set(new te(he).cards.map(({key:z})=>z))).sort((z,ye)=>ye-z),R=Array.from(new Set(new te(255,1).cards.slice(0,A.isGuoZhan?void 0:2).map(({key:z})=>z))).sort((z,ye)=>ye-z),{yes:W,no:G}=P.reduce((z,ye)=>{let{keys:Ze}=se.findKZ(ye);return x.find(Wt=>Ze.includes(Wt))!==void 0&&z.yes.push(ye),R.find(Wt=>Ze.includes(Wt))!==void 0&&z.no.push(ye),z},{yes:[],no:[]}),F=document.getElementById("result");G.length==2?W=P.filter(z=>!G.includes(z)):W.length==1&&(G=P.filter(z=>!W.includes(z))),W.length==1||W.length==2?(F.innerHTML='<span class="textRes">【宴戏】'+W.map(z=>de[z].ncn).join("/")+"</span>",j[L]=W.concat(P.filter(z=>!W.includes(z)))):F.innerHTML='<span class="textRes">【宴戏】未知</span>';let X=new te(he).show(j[L][0]).concat(new te(255,1,A.isGuoZhan?Te:De).show(j[L].slice(-2)));W.length==3?se.pack(X):W.length==1?se.pack(X.slice(1,3)):W.length==2&&(se.pack(X.slice(0,2)),se.pack(X.slice(1,3))),P.forEach(z=>{F.innerHTML+='<span class="textRes'+(W.length<3&&W.includes(z)?" textRes":"")+'">'+de[z].ncn+"："+[[W,"手牌"],[G,"牌堆"]].filter(([ye,Ze])=>ye.includes(z)).map(([ye,Ze])=>Ze).join("/")+"</span><br>";});}else [4,5,921,372,811,357,3119,501,3437].includes(L)&&(P==null?void 0:P.length)>0?oe!==void 0&&oe!==255&&new te(oe).show(P):[851,361,774,3310].includes(L)&&he==0&&(P==null?void 0:P.length)>0?oe!==void 0&&oe!==255&&new te(oe).show(P):L==943&&he==0&&(P==null?void 0:P.length)==1?new te(255,1).show(P):L==898&&he==0&&(P==null?void 0:P.length)>2?le!==void 0&&le!==255&&new te(le).show(P.slice(1,P[0]+1)):(L==987||L==988)&&he==1&&(P==null?void 0:P.length)>2?oe!==void 0&&oe!==255&&(le==A.mySeats[0]||k.v)&&new te(oe).show(P.slice(-P[1])):L==3266&&he==0&&(P==null?void 0:P.length)>0?oe!==void 0&&(le==A.mySeats[0]||k.v)&&new te(oe,oe==255?1:5).show(P.filter((x,R)=>R%3==1)):L==3483&&he==1?(P==null?void 0:P.length)>2&&oe!==void 0&&oe!==255?new te(oe).show(P.slice(-P[1])):P[0]>0&&(j[L]=P[0]):(L==7010||L==7011)&&(P==null?void 0:P.length)>0&&oe==255?(j.spellSpace[7009]=P.slice(),(le==A.mySeats[0]||k.v)&&se.pack(new te(255,1).show(P))):L==2900&&_e==28&&A.setGeneral(oe,P[2],P[1],!0);else if(N=="CGsRoleSpellOptRep")L==2022?A.setGeneral(ae,we[0],we[1],!0):L==7009?((ee=j[7009])==null||ee.pop(),(xe=j[7009])!=null&&xe.length||new te(255,1).show(we)):L==3336?new te(255,1,Fe).show((be=we==null?void 0:we.slice())==null?void 0:be.reverse()):we.length>0&&L==15&&_e==10&&Yn(de[we[0]].color==1);else if(N=="PubGsCMoveCard"){if(J=J.slice(),We===0||Ue===0||ce===11||t.isSend)return;if(L==713&&Ue==21&&We==J.length-2){let x=J.splice(0,1)[0];J.splice(x,1);}if(J.filter(x=>x>0).length!=We&&J.filter(x=>x>0).length!=0&&(console.error("PubGsCMoveCard error: 明暗牌混合：["+J+"]"),console.error(t),J=[]),fe==1&&Ie==Te&&[3208,7011,987,988].includes(L)&&(Ie=De),fe==1&&Ie==Te&&Ue==13&&We==1&&(Ie=De),fe==1&&Ie==Te&&ce==4&&Ue==8&&L==795&&We==1&&(Ie=De),fe==1&&Ie==Te&&ce==5&&L==3101&&We==1&&(Ie=Fe),fe==1&&Ie==Te&&ce==5&&!A.isGuoZhan&&[7016,7017].includes(L)&&We==1&&(Ie=De),fe==1&&ce==5&&L==3338&&k.v&&qe==A.mySeats[0]&&ie.delay("baichu",()=>Ct("新组合"),500),fe==8&&ce==5&&L==6||fe==5&&ce==5){let x=new Set(A.mySeats);x.delete(A.mySeats[0]),console.log(x),!x.has(Ge)&&qe==A.mySeats[0]&&ie.delay("mingpai",()=>Ct("明牌",J),500);}ce==1&&qe==255&&vt==De&&(J=J.filter(x=>x!=4400&&x!=4401));var n=new te(Ge,fe,Ie,We,L,Qt),i=new te(qe,ce,vt,We,L,zt);if(ce==12||fe==12)ce!=12?i.add(J.concat(Array(We-J.length).fill(0)).map(x=>new se(x,x,i.zoneID))):fe!=12&&fe!=0&&n.remove(J,L);else if(fe==5&&ce==1&&qe==0)i.add(n.remove(J.filter(x=>x>0)).map(x=>x.destroy(0)));else if(fe==2&&ce==9&&Ge==0&&qe==0)j.isGameStart&&!j.isPassed&&se.pack(se.get(0).map(x=>x.destroy()),!1,1),i.set([...i.cards.map(x=>j.isPassed?x.destroy(0):x),...n.cards.map(x=>x.destroy(0))]),n.set([]),Pt(),j.isPassed=!1;else if(Ue!==255){if(fe==1&&ce==5&&A.dealCard(qe,J[0]),ce==2&&(j.spellSpace[3090]||(j.spellSpace[3090]=new Set),J.forEach(x=>j.spellSpace[3090].add(de[x].c)),document.getElementById("boTu").innerHTML=Array.from(j.spellSpace[3090]).join("")),(fe==5||ce==5)&&(qe==((Se=A.mySeats)==null?void 0:Se[0])||Ge==((I=A.mySeats)==null?void 0:I[0]))){let x=Array.from(te.shoupai(A.mySeats[0]));ce==5?x.push(...J):fe==5&&(x=x.filter(G=>!J.includes(G))),x=x.map(G=>de[G]);const{countType2:R,countSha:W}=[...x].reduce((G,F)=>(F.type===2&&!["乐","兵","闪电"].includes(F.name)&&G.countType2++,["杀","火杀","雷杀","冰杀"].includes(F.name)&&G.countSha++,G),{countType2:0,countSha:0});document.getElementById("result").innerHTML='<span class="textRes">【权道】杀：普通锦囊</span><br><span class="textRes">'+W+"："+R+"</span>";}if([441,3492].includes(L)&&ce==8&&Ue==6&&Bi(J.map(x=>de[x].number),L==3492&&k.v),L==3033&&fe==1&&ce==8&&J.filter(x=>x>0).length==1){let x=de[J[0]].number,R=0,W=0,G=0;te.paidui.forEach(F=>{let X=de[F].number;X===x?G++:X>x?R++:W++;}),document.getElementById("result").innerHTML='<span class="textRes">【吉占】猜'+(R>W?"大":"小")+'</span><br><span class="textRes">跟'+x+"比，"+R+"张大		"+W+"张小		"+G+"平</span>";}if(L==3329&&Ge==j.currentID){let x=de[J[0]].number,R=te.paidui,W=["无中","洞烛","顺手","过拆","逐近","决斗","南蛮","万箭","出其","水淹","随机","洪荒","同舟","力争","移花"].flatMap(F=>R.filter(X=>{var z;return (z=ge.name[F])==null?void 0:z.has(X)})).reduce((F,X)=>{let z=de[X].number;return z>x?F.g++:z<x?F.l++:F.e++,F},{g:0,l:0,e:0}),G=["五谷","桃园","火攻","借刀","撒豆"].flatMap(F=>R.filter(X=>{var z;return (z=ge.name[F])==null?void 0:z.has(X)})).reduce((F,X)=>{let z=de[X].number;return z>x?F.g++:z<x?F.l++:F.e++,F},{g:0,l:0,e:0});document.getElementById("result").innerHTML='<span class="textRes">【和衷】'+(W.g>W.l?"大":W.g<W.l?"小":G.g>G.l?"大":G.g<G.l?"小":"平")+'</span><br><span class="textRes">'+W.g+"."+G.g+"大		"+W.l+"."+G.l+"小</span>";}else L==3488&&fe==5&&ce==5&&Ue==21&&J.filter(x=>x>0).length==1?(j[L]||(j[L]={}),j[L][Ge]=J.find(x=>x>0)):L==3488&&fe==5&&ce==10&&Ue==11&&J.filter(x=>x>0).length==0?(J[0]=((O=j[L])==null?void 0:O[Ge])||0,j[L].stack=J[0]):L==3488&&fe==10&&(ce==1||ce==2)&&Ue==11&&J.filter(x=>x>0).length==0&&(J[0]=((K=j[L])==null?void 0:K.stack)||0,(Y=j[L])==null||delete Y.stack);if([3157,3511].includes(L)&&fe==2&&ce==5&&We==((h=j[L])==null?void 0:h.length)&&J.filter(x=>x>0).length==0&&j[L].forEach((x,R)=>J[R]=x),[7016,7017].includes(L)&&ce==5&&We==1&&(le==A.mySeats[0]||k.v)&&(J[0]&&((m=j[L])!=null&&m.includes(J[0]))?j[L].splice(j[L].indexOf(J[0]),1):fe==5||((w=j[L])==null?void 0:w.length)==2||((S=j[L])==null?void 0:S.length)==1?J[0]=((E=j[L])==null?void 0:E.shift())||0:A.isGuoZhan),Ge==qe&&fe==ce&&(Ie==vt||ce!=1)&&(Qt==zt||ce!=4))n.show(J);else if(L==3208&&fe==10&&ce==5&&J.filter(x=>x>0).length===0)n.pos=Fe,se.pack(n.cards.slice(0,n.length-1)),i.add(n.remove(J));else if(L==3483)if(fe==10&&ce==10)J.filter(x=>x>0).length===0&&(n.pos=Fe,i.pos=De),i.add(n.remove(J));else if(fe==1&&ce==10&&Ie==Te)j[L]&&se.pack(n.cards.slice(0,j[L])),J.filter(x=>x>0).length==0&&(n.pos=Fe),i.add(n.remove(J));else if(fe==5&&ce==10)j[L]=i.add(n.remove(J));else if(fe==10&&ce==1&&Ie==Te){if(J.filter(x=>x>0).length==0&&((B=j[L])==null?void 0:B.length)==We&&j[L].every(x=>n.cards.includes(x))){let x=j[L].flatMap(W=>n.cards.splice(n.cards.indexOf(W),1));se.pack(i.add(x));let R=x.map(W=>W.key);R.every(W=>W>0)&&J.splice(0,We,...R);}else i.add(n.remove(J));delete j[L];}else i.add(n.remove(J));else if(L==780&&fe==5&&Ie==Te&&We==1)if(ce==5&&Ge==j.currentID)j[L]=i.add(n.remove(J))[0];else if(ce==1&&Ge!=j.currentID&&n.cards.includes(j[L])){let x=(Q=i.add(n.cards.splice(n.cards.indexOf(j[L]),1))[0])==null?void 0:Q.key;x>0&&J.filter(R=>R>0).length==0&&(J[0]=x),delete j[L];}else i.add(n.remove(J));else i.add(n.remove(J,L));}}}}}catch(q){console.error(q);}}function hn(){let t=Array.prototype.slice.call(arguments);try{return t[0]==="INIT"?Mi():t[0]==="EXIT"?Pi():ts(t[t.length-1])}catch(e){console.error(e.message),console.error(e.stack);const[,n,i]=e.stack.match(/(\d+):(\d+)/);console.error("Line:",n),console.error("Column:",i),pe("小抄GG了，联系作者解决");}}typeof SGSMODULE<"u"&&(Object.defineProperty(window.console,"log",{get(){return console.info},set(){}}),window.SGSMODULE.forEach(t=>t("EXIT")),delete window.SGSMODULE);console.info("%c三国杀打小抄","font-weight: bold; color: white; background-color: #525288; padding: 1px 4px; border-radius: 4px;");window.SGSMODULE=[];Object.defineProperty(window.console,"log",{get(){return function(...t){(window._debug||window.isLogAllClass)&&console.debug(...t),window.SGSMODULE.forEach(e=>e==null?void 0:e(...t));}},set(){}});hn("INIT").then(t=>{t&&window.SGSMODULE.push(hn);});

})();